webpackJsonp([23],{137:function(t,i,e){"use strict";function c(t,i,e,c,o,a,r,d,_){var n=t.PROJECT,v=t.USER;if(!n.is_public&&v&&n.current_user_role_id>=i.MEMBER&&setTimeout(function(){c.update_visit({id:n.id})},300),n.is_public)return void d.path(n.depot_path).replace();t.project_activities=[],t.activity_loading=!1,t.activity_loaded=!1,t.project_last_id=0;var s=20;c.query({project_id:n.id},function(i){0==i.code&&(t.PROJECT=i.data,n=i.data)});var p=999999999;t.activities_mode="all",t.loadProjectActivity=function(i,e){t.activity_loading=!0,t.activity_loaded=!1,o.project({project_id:n.id,user_id:v.id,last_id:i||p,type:e||"all"},function(e){if(t.activity_loading=!1,t.activity_loaded=!0,0==e.code){var c=e.data||[];c=_.removeNullItem(c),i&&p>i?t.project_activities=t.project_activities.concat(c):(t.project_activity_emtpy=0==c.length,t.project_activities=c),$(t.project_activities).each(function(t,i){i.hide_project_name=!0}),c.length<s&&(t.project_last_id=0),t.project_last_id=c.length>0?c[c.length-1].id:0,t.activities_of_date=_.orderActivityByDate(t.project_activities),t.project_activities=_.unifyActivity(t.project_activities,["id","created_at"])}else a.handle(e)})},t.loadProjectActivity(p,t.activities_mode),t.USER&&c.update_visit({id:n.id},function(t){}),i.isExpActive("qc-v2")&&!n.is_public&&i.canShowGuide("qc")&&d.path(d.path()+"/git/qc"),t.changeActivitiesMode=function(i){t.project_activities=[],t.activities_of_date=_.orderActivityByDate(t.project_activities),t.project_activities=_.unifyActivity(t.project_activities,["id","created_at"]),t.activities_mode=i,t.loadProjectActivity(p,i)},t.showUnreadMsg=function(){return"all"==t.activities_mode&&n.un_read_activities_count>0&&n.un_read_activities_count<=200}}var o=e(1);t.exports=o.module("project.controller.index",[]).controller("ProjectController",c),c.$inject=["$scope","$rootScope","$routeParams","Project","Activity","Errors","Topic","$location","Common"]},138:function(t,i,e){"use strict";var c=e(1);t.exports=c.module("project",[e(137).name])}});