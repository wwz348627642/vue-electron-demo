"use strict";angular.module("app").controller("AttachmentController",["$scope","$rootScope",function(a,b){a.folder_name="新建文件夹",a.createFolder=function(a){0!=a.length&&b.$broadcast("project.attachment.create.folder",a)},$("#create-folder-modal").modal("setting",{onHidden:function(){a.folder_name="新建文件夹"}})}]),angular.module("app").controller("AttachmentPreviewModal",["$scope","$rootScope","$timeout","Attachment","AttachmentOperatingService","Flash","Common",function(a,b,c,d,e,f,g){a.image_preview={prevId:-1,nextId:-1},a.file_info={project:void 0,file_id:void 0,folder_id:void 0},a.getFileType=function(a){return e.getFileType(a)},a.mode="preview",a.inner_menu="activity";var h=function(a){return"default"===a?0:a};a.renameFile=function(b){if(a.file_name_editing=!1,!b.readName)return b.readName=b.copy.readName,void f.fail().send("文件名不能为空");if(b.readName&&b.copy&&b.readName===b.copy.readName)return void e.doModeSwitch("preview");var c=a.file_info.project.id;a.file_name_editing=!0;var g=d.rename({id:c,file_id:b.file_id},{name:b.readName+"."+b.fileType});g.then(function(a){b.name=b.readName+"."+b.fileType,b.copy.name=angular.copy(b.name),b.copy.readName=angular.copy(b.readName),f.success().send("修改成功"),b.history_id=a.data&&a.data.history_id||b.history_id;var d={project_id:c,file_id:b.file_id,name:b.name};e.doFileHistoriesReloadSuccess(d),e.doFileRenameSuccess(d)}),g["catch"](function(){b.name=b.copy.name}),g["finally"](function(){e.doModeSwitch("preview"),a.file_name_editing=!1})},e.onModalFilePreviewLoadSuccess(function(b,c){angular.isDefined(c)&&(a.current_file=c,a.editor_type=j(c),k(a.file_info.file_id,h(a.file_info.folder_id),a.file_info.project.id))}),e.onOpenPreviewModal(function(b,c){e.doModeSwitch("preview"),c&&angular.isDefined(c.project)&&(a.file_info.project=c.project,a.file_info.file_id=c.file_id,a.file_info.folder_id=c.folder_id)}),e.onModalFileSaveSuccess(function(){e.doModeSwitch("preview"),e.doFileListReloadSuccess()}),e.onFilePreviewClear(function(){g.safeApply.call(a,function(){a.file_info.file_id=void 0,a.current_file={}})}),e.onModeSwitch(function(b,d){"edit"!==d||l(a.current_file)||(a.file_name_editing=!0,c(function(){i("#modal-edit-file-name-"+a.current_file.file_id)},30)),a.mode=d});var i=function(a){var b=$(a).focus();b[0].setSelectionRange(0,b[0].value.length)},j=function(a){return e.editorType(a)},k=function(b,c,e){c=c||0,d.image({id:e,file:b,folderId:c},function(b){a.image_preview=b.data||{prevId:-1,nextId:-1}})["catch"](function(){return a.image_preview={prevId:-1,nextId:-1},!1})},l=a.editable=function(a){return e.editable(a)};a.switchInnerMenu=function(b){a.inner_menu=b},a.changeFileId=function(b){a.file_info.file_id=b},a.onImageNavChange=function(a){var b=$(":focus");b.is("textarea, input")||c(function(){$(".modal-preview-button > a."+a).trigger("click")})},a.$on("$destroy",function(){e.removeModalFilePreviewLoadSuccess(),e.removeOpenPreviewModal(),e.removeModalFileSaveSuccess(),e.removeModeSwitch()})}]);var helpController=angular.module("app");helpController.controller("HelpController",["$scope","$location","$routeParams","Errors","Helps","location",function(a,b,c,d,e,f){a.title=c.title||"about_coding",a.key=c.key||"",a.question=c.question||"",a.root_category=[],a.current_root_category=null,a.loading_category=!0,e.root_category(function(b){if(a.loading_category=!1,0==b.code){a.root_category=b.data||[],a.current_root_category=a.root_category[0];for(var c in a.root_category){var d=a.root_category[c];d.code==a.title&&(a.current_root_category=a.root_category[c])}(!a.key||a.key.length<=0)&&a.loadQuestions(a.current_root_category)}}),a.faqs={};var g=function(b){for(var c in b){var d=b[c],e=a.faqs[d.category];e||(e=a.faqs[d.category]={name:d.category_name,questions:[]}),e.questions.push(d)}};a.loadQuestions=function(b){return b?(a.faqs={},c.key=null,a.current_root_category=b,a.load_question=!0,e.docs({code:b.code},function(b){a.load_question=!1,a.questions=b.data||[],g(a.questions)}),f.skipReload().path("/help/"+a.current_root_category.code+(a.question?"/"+a.question:"")),void f.skipReload().search("")):(a.load_question=!1,a.questions=[],void g(a.questions))},a.openQA=function(b){a.question==b?a.question="":a.question=b,f.skipReload().path("/help/"+a.current_root_category.code+(a.question?"/"+a.question:""))},a.search=function(b){b.length<=0||(a.faqs={},a.load_question=!0,e.search({key:b},function(b){a.load_question=!1,a.questions=b.data||[],g(a.questions)}))},a.key&&a.key.length>0&&a.search(a.key)}]);var helpIndexController=angular.module("app");helpIndexController.controller("HelpIndexController",["$scope","$location",function(a,b){a.search=function(a){b.path("/help/about_us").search("key",a||"")}}]),angular.module("app").controller("HomeController",["$scope","$rootScope","$location","PageTitle",function(a,b,c,d){b.USER?c.path("/user"):c.path("/login"),d.set("首页","Coding.net")}]);var footerController=angular.module("app");footerController.controller("FooterController",["$scope",function(a){a.show_qrcode=!1,$(document).on("click",function(){a.show_qrcode=!1,$("#qr_code_pop").removeClass("visible")}),a.clickPop=function(b){$("#qr_code_pop").addClass("visible"),a.show_qrcode=!a.show_qrcode,b.stopPropagation()},a.changeLanguage=function(a){$.cookie("language",a),window.location.reload()}}]),angular.module("app").controller("QuickSearchController",["$scope","ipCookie",function(a,b){a.form={focus:!1,prefix:"",search_text:""},a.$watch("PROJECT",function(b){a.form.prefix=b||!1})}]),angular.module("app").controller("FrequentlyProjectsController",["$scope","Projects","FrequentlyProjectsService","Common",function(a,b,c,d){a.projects=[],a.loading=!1,a.loaded=!1;var e=function(){a.loading=!0,a.loaded=!1;var c=b.pinProjects();c.then(function(b){a.projects=b.data&&b.data.list||[],a.projects=d.removeNullItem(a.projects)}),c["finally"](function(){a.loading=!1,a.loaded=!0})};a.pin=function(a,d){var f=b.pinCancel({ids:d.id});return f.then(function(){d.pin=!0,c.pinCancel(d),e()}),a.stopPropagation(),a.preventDefault(),!1},c.onPin(function(){e()})}]).service("FrequentlyProjectsService",["$rootScope",function(a){return{onPin:function(b){a.$on("on.project.pin",b)},pin:function(b){a.$broadcast("on.project.pin",b)},pinCancel:function(b){a.$broadcast("on.project.pin.cancel",b)},onPinCancel:function(b){a.$on("on.project.pin.cancel",b)}}}]),angular.module("app").controller("TopMenuProjectTitleController",["$rootScope","$scope","Projects","$location","Common",function(a,b,c,d,e){b.projects=[],b.showTitle=!0,b.current_project=null,a.$watch("PROJECT",function(a){b.PROJECT&&(b.current_project&&b.current_project.name!==a.name&&b.projects.length>0&&(b.projects=e.replaceWith(b.projects,a)),b.current_project=angular.copy(a)),a&&!a.is_public&&0==b.projects.length&&c["private"]({pageSize:100},function(a){b.projects=a.data.list||[]})}),b.$watch("current_project",function(b){b&&b.id!==a.PROJECT.id&&d.path(b.project_path)})}]),angular.module("app").controller("TopMenuTitleController",["$scope","$rootScope","$route","$injector",function(a,b,c,d){a.top_menu_title="";var e=c.current,f=b.top_menu_tpl,g=function(b){if(b&&b.$$route){var c=b.$$route.title;if(angular.isArray(c)){var e=c.slice(-1)[0];e.$inject=c.slice(0,-1),c=e}if(c){if(angular.isFunction(c)){c=d.invoke(c);var f=c&&c.then;if(f)return void c.then(function(b){a.top_menu_title=b})}a.top_menu_title=c}}};b.$on("$routeChangeSuccess",function(a,b){f||g(b)}),f||g(e)}]),angular.module("app").controller("UserDropdownController",["$scope","FrequentlyProjectsService","User","$rootScope",function(a,b,c,d){a.prj_update_count=0;var e=function(){c.unread_count({},function(b){d.updateUnreadList(b);var c=b.data&&0|b.data.project_update_count;a.prj_update_count=c,d.USER.project_update_count=c})};a.dropdown_settings={on:"hover",delay:{show:0,hide:300},onShow:function(){b.pin(),e()}}}]),angular.module("app").controller("ProjectAttachmentController",["$scope","$rootScope","$timeout","Attachment","Errors","location","$routeParams","Flash","Setting","Pager","Markdown","PageTitle","$q","Common","ModalService","AttachmentOperatingService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=a.PROJECT,r=[i.api_host,"/api/project/",q.id,"/file/upload"].join("");angular.extend(a,{ADMIN:b.ADMIN});var s=a.folder_id=g.region||"default",t=a.file_id=g.file_id||0,u=a.action=g.action||"list",v=["txt","md"],w=u||"list";a.pdf_preview=!1,a.pdf_preview_loading=!1,a.pdf_preview_loaded=!1,a.pdf_preview_page=1,a.pdf_resize="small",a.pdf_fullscreen_height=0,a.preview_able=!1,a.markdown_preview=!1,a.preview_image_rotate_degrees=0,a.image_preview={prevId:-1,nextId:-1},a.image_previewing=!1;var x=a.attachment_pager_id=(new Date).getTime();j=j.instance(x,a),j.onChange(function(b){"shared_files"==a.folder_id?a.loadSharedFiles(b):M("default"===a.folder_id?0:a.folder_id,b)}),a.files=[],a.folders=[],a.current_folder={readName:"",content:""},a.folders_count=[],a.default_folder_count=0,a.shared_files_count=0,a.file_loading=!0,a.files_loading=!0,a.folder_loading=!0,a.file_saving=!1,a.uploading=!1,a.folder_deleting=!1,a.check_all=!1,a.editing=!1,a.current_sub_folder={},a.in_sub=!1,a.selected_file_count=0,a.detail_mode="activity",a.navigate_change_enable=!0,a.file_name_editing=!1,a.version=f.search().version,a.checkAll=function(b){a.check_all=void 0!==b?b:!a.check_all,angular.forEach(a.files,function(b){b.editing=a.check_all}),a.selected_file_count=a.check_all?a.files.length:0},a.unCheckAll=function(){a.check_all=!1,angular.forEach(a.files,function(a){a.editing=!1}),a.selected_file_count=0},a.selectFile=function(b){a.selected_file_count=b.editing?--a.selected_file_count:++a.selected_file_count,b.editing=!b.editing},a.hasSelected=function(){var b=!1;return angular.forEach(a.files,function(a){!b&&a.editing&&(b=!0)}),b},a.showFilenameEllipsis=function(a){return a.name.substring(0,25)+(a.name.length>25?"...":"")};var y=function(a){return $.map(a,function(a){return a.editing?a.file_id:void 0})},z=function(){var b=[];angular.forEach(a.files,function(a){a.editing||b.push(a)}),a.files=angular.copy(b)};a.moveFileTo=function(b){if(!isNaN(b)){if(a.in_sub){if(a.current_sub_folder.file_id==b)return}else if(a.current_folder.file_id==b)return;if(!a.hasSelected())return void h.warn().send("请至少选择一个文件！");var c=y(a.files);d.move({id:q.id,folder:b,fileId:c},{},function(a){h.success().send("文件移动成功!"),z(),I()})}};var A=function(a){return"default"===a?0:a},B=function(a){return("edit"==a||"create"==a)&&(a="create"),"app/attachment/"+a+".html"},C=function(b,c){var d=c.file_id;a.action=b,a.current_template=B(b);var e=[q.project_path,"/attachment",a.folder_id?"/"+a.folder_id:"/default","/",b,d?"/"+d:""].join("");if("create"===b&&isNaN(d)){a.current_file={};var g=d||"txt";a.editor_type=g,e=[q.project_path,"/attachment",a.folder_id?"/"+a.folder_id:"/default","/create/",g].join("")}else if("edit"===b&&d){var g=a.editorType(c)||"txt";e=[q.project_path,"/attachment",a.folder_id?"/"+a.folder_id:"/default","/edit/",d,"/",g].join(""),a.editor_type=g}a.file_id=d,f.skipReload().path(e)};a.current_template=B(w),a.current_file=!1,a.share=!1;var D=null,E=0;a.uploading_files=[],a.upload_progress={total:0,loaded:0};var F=function(){var b=0,c=0;return angular.forEach(a.uploading_files,function(a){var d=a.progress;d&&(b+=d.loaded,c+=d.total)}),{total:c,loaded:b}},G=function(b){for(var c=0;c<b.files.length;c++)a.files=n.removeOfId(a.files,b.files[c].name,"name");n.safeApply.call(a,function(){E+=b.files.length,a.uploading_files=a.uploading_files.concat(b.files),b.submit(),a.uploading=!0})},H=function(){var b=$("div#attachment_dragenter"),c=!1,f=!1;$(document).bind("dragover",function(a){a.preventDefault();var b=$(document),c=$("#attachment_dragenter").dimmer("is animating")|$("#attachment_dragenter").dimmer("is active")|$(".modal.active").length,d=window.dropZoneTimeout;d||c?clearTimeout(d):$("#attachment_dragenter").dimmer("show");var e=!1,f=a.target;do{if(f===b[0]){e=!0;break}f=f.parentNode}while(null!=f);e?c||$("#attachment_dragenter").dimmer("show"):$("#attachment_dragenter").dimmer("hide"),window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null,$("#attachment_dragenter").dimmer("hide")},100)}),a.projectAttachmentZoneUploadSetting={xhrFields:{withCredentials:!0},url:r,dropZone:b,pasteZone:b,formData:{dir:A(a.folder_id)},maxFileSize:5e6,add:function(b,e){for(var g=0;g<e.files.length;g++){var i=e.files[g];if(i.size>314572800)return void h.fail().timeout(2e3).send("文件:"+i.name+" 大小超过300M!")}for(var j=[],k=0;k<e.files.length;k++)j.push(e.files[k].name);var l=d.is_existed({id:q.id,dir:A(a.folder_id),names:j});l.then(function(a){a.data&&a.data.conflict_file?f=!0:c=!0,G(e)})},done:function(b,g){E--,n.safeApply.call(a,function(){if(a.uploading=0!=E,a.uploading||(I(),a.upload_progress={total:0,loaded:0}),0==g.result.code){var b=d.resolve("files",g.result.data);b.then(function(b){a.files.unshift(b)})}else e.handle(g.result);if(a.uploading_files=n.removeOfId(a.uploading_files,g.files[0].name,"name"),!a.uploading){var i="文件上传成功";f&&(i+=":同名文件已覆盖，并产生新的文件版本"),h.success().send(i),f=!1,c=!1}})},fail:function(){n.safeApply.call(a,function(){E=0,a.uploading=!1,D=null,h.fail().send("上传失败!")})},progress:function(b,c){var d={total:c.total,loaded:c.loaded};n.safeApply.call(a,function(){var b=n.findOfId(a.uploading_files,c.files[0].name,"name");b.progress=d,a.uploading=!0,a.upload_progress=F()})}}};a.back=function(){a.current_template=B("list");var b=[q.project_path,"/attachment",a.folder_id>0?"/"+a.folder_id:""].join("");f.skipReload().path(b)},a.create=function(){a.current_file={},C("create")},a.upload=function(b){a.uploading||b&&b($("#upload-zone"))},a.uploadNewVersion=function(){a.detail_mode="history",c(function(){angular.element(document.querySelector("#uploadFile")).triggerHandler("click")})};var I=function(){var b=d.all_count({id:q.id});return b.then(function(b){a.folders_count=b.data,angular.forEach(a.folders,function(b){var c=n.findOfId(a.folders_count,b.file_id,"folder");b.count=angular.copy(c.count),angular.forEach(b.sub_folders,function(c){var d=n.findOfId(a.folders_count,c.file_id,"folder");c.count=angular.copy(d.count),b.count+=c.count})});var c=n.findOfId(a.folders_count,0,"folder");a.default_folder_count=c.count}),J(),b},J=function(){var b=d.shared_files({id:q.id,width:90,height:90,page:1});b.then(function(b){a.shared_files_count=b.data.totalRow})},K=function(b){var c=a.current_file?a.current_file.name:"",d=a.current_folder&&!a.in_sub?a.current_folder:a.current_sub_folder,e={list:[d&&d.name||"默认文件夹"],preview:[c,d&&d.name||"默认文件夹"],edit:["编辑",c],create:["创建新的文件"],shared_files:["正在分享的文件"]},f=e[b];f.push(q.name),f.push("Coding.net"),l.set.apply(this,f)},L=function(){a.folder_loading=!0;var b=d.all_folders({id:q.id,page:1,pageSize:9999}),c=b.then(function(b){a.folder_loading=!1,a.folders=b.data.list||[],angular.forEach(a.folders,function(a){angular.forEach(a.sub_folders,function(a){a.copy=angular.copy(a)})}),I()});return c},M=function(b,c){return a.folder_deleting?!1:(j.hide(),a.files=[],a.files_loading=!0,d.files({id:q.id,dir:b||0,width:90,height:90,page:c||1},function(b){a.files_loading=!1,a.files=b.data.list||[],H(),j.optionsReady(b.data)})["catch"](function(a,b){b&&900==b.code&&(Q(0),M(0))}))};a.loadSharedFiles=function(b){if(a.folder_deleting)return!1;j.hide(),a.files_loading=!0,a.current_template=B("shared_list");var c=[q.project_path,"/attachment/shared_files"].join("");return f.skipReload().path(c),a.folder_id="shared_files",K("shared_files"),I(),d.shared_files({id:q.id,width:90,height:90,page:b||1},function(b){a.files_loading=!1,a.files=b.data.list||[],j.optionsReady(b.data)})["catch"](function(a,b){b&&900==b.code&&(Q(0),M(0))})},a.suffix=function(a){return a?a.substring(a.lastIndexOf(".")+1):"???"};var N=function(){c(function(){var b=$("#attachment .file_info_word.file-image-info");a.current_file.image_width&&a.current_file.image_height?(b.css("display","table-row"),b.find(".file-info-right").text(a.current_file.image_width+" * "+a.current_file.image_height)):b.css("display","none"),$("#attachment .info.icon").data("html",$("#file-info-tpl").html())},300)};a.updateFile=function(b){$("body").removeClass("pagedown-fullscreen");var c=b.file_id;a.file_saving=!0,d.edit({id:q.id,file:c},{name:b.readName+"."+b.fileType,content:b.content},function(){a.file_saving=!1,h.success().send("更新成功！"),f.path(q.project_path+"/attachment/"+a.folder_id+"/preview/"+c)})["catch"](function(){a.file_saving=!1})},a.saveFile=function(b){return b.readName?b.content?($("body").removeClass("pagedown-fullscreen"),a.file_saving=!0,void d.create({id:q.id,dir:A(a.folder_id)},{name:b.readName+"."+a.editor_type,content:b.content},function(){a.file_saving=!1,h.success().send("创建成功！"),f.path(q.project_path+"/attachment/"+a.folder_id)})["catch"](function(){a.file_saving=!1})):void h.fail().send("文件内容不能为空！"):void h.fail().send("文件名不能为空！")},a.openFolder=function(b,c,d){if(b&&b.file_id){if(b.editing)return c.preventDefault(),!1;var e=!1;(a.in_sub||a.current_folder.file_id!=b.file_id)&&(e=!0),"undefined"==typeof b.show_sub&&(b.show_sub=!0),a.current_folder.file_id==b.file_id?e||(b.show_sub=!b.show_sub):b.show_sub=!0,Q(b.file_id),d?(a.in_sub=!0,a.current_sub_folder=n.findOfId(a.current_folder.sub_folders,b.file_id,"file_id")):(a.in_sub=!1,a.current_folder=n.findOfId(a.folders,b.file_id,"file_id"),a.current_sub_folder={}),e&&(M(b.file_id),K("list"))}else Q(0),M(0),a.in_sub=!1,a.current_folder={},a.current_sub_folder={},K("list");this.uploading_files=[]},a.getFileType=function(a){return p.getFileType(a)},a.editorType=function(a){return p.editorType(a)},a.editable=function(a){return p.editable(a)},a.editFile=function(b){a.current_template=B("edit");var c=a.getFileType(b);if("text"==c){var d=a.current_file;d&&d.file_id==b.file_id||(a.file_id=b.file_id),C("edit",b),K("edit")}},a.setFileNameEditable=function(b){a.file_name_editing=!0,b.preventDefault(),b.stopPropagation(),c(function(){T("#edit-file-name-"+a.current_file.file_id)},30)},a.renameFile=function(b){if(a.file_name_editing=!1,!b.readName)return b.readName=b.copy.readName,void h.fail().send("文件名不能为空");if(!b.readName||!b.copy||b.readName!==b.copy.readName){a.file_name_editing=!0;var c=d.rename({id:q.id,file_id:b.file_id},{name:b.readName+"."+b.fileType});c.then(function(a){b.name=b.readName+"."+b.fileType,b.copy.name=angular.copy(b.name),b.copy.readName=angular.copy(b.readName),h.success().send("修改成功"),b.activity_count++,b.history_count++,b.history_id=a.data&&a.data.history_id||b.history_id;var c={project_id:q.id,file_id:t};p.doFileHistoriesReloadSuccess(c)}),c["catch"](function(){b.name=b.copy.name}),c["finally"](function(){a.file_name_editing=!1})}},p.onFileRenameSuccess(function(b,c){if(c&&c.file_id){var d=n.findOfId(a.files,c.file_id,"file_id");d.name=c.name,d.updated_at=(new Date).getTime()}}),p.onDetailFileEditLoadSuccess(function(a,b){C("edit",b),K("edit")}),p.onDetailFileCreateSuccess(function(){h.success().send("创建成功！"),f.path(q.project_path+"/attachment/"+a.folder_id)}),p.onDetailFileSaveSuccess(function(b,c){h.success().send("更新成功！"),f.path(q.project_path+"/attachment/"+a.folder_id+"/preview/"+c.file_id)});var O=function(a,b,c){var d={project:a,file_id:b,folder_id:c};p.doOpenPreviewModal(d),aa.toggle()};a.previewFile=function(b,c){a.uploading||(O(q,b.file_id,a.folder_id),c.stopPropagation())};var P=a.deleteFile=function(b,c){if(a.selected_file_count=b.editing?--a.selected_file_count:a.selected_file_count,b&&confirm('确认删除文件 "'+b.name+'" ?')){var e=d["delete"]({id:q.id,fileIds:b.file_id},function(d){h.success().send("文件删除成功！"),a.files=n.removeOfId(a.files,b.file_id,"file_id"),I(),c&&f.path(q.project_path+"/attachment/"+a.folder_id)});return e}};a.deleteSelected=function(){var b=y(a.files);b.length>0&&confirm("确认删除选定的 "+b.length+" 个文件？")&&d["delete"]({id:q.id,fileIds:b},function(a){h.success().send("选定的 "+a.data+" 个文件删除成功！"),z(),I()})};var Q=function(b){if(!a.folder_loading){a.folder_id=b||"default",a.current_template=B("list");var c=[q.project_path,"/attachment/",b?b:""].join("");f.skipReload().path(c)}},R=function(b,c){var d=!1;return c?angular.forEach(a.current_folder.sub_folders,function(a){a.name!=b||d||(d=!0)}):angular.forEach(a.folders,function(a){a.name!=b||d||(d=!0)}),d},S=function(a){for(var b=!!a,c="新建文件夹",d=0,e=c;R(e,b);)e=c+ ++d;return e},T=function(a){var b=$(a).focus();b[0].setSelectionRange(0,b[0].value.length)};a.createFolder=function(b){var e=0==b?S():S(!0);d.mkdir({id:q.id,name:e,parentId:b},{},function(d){var e=d.data;Q(e.file_id),a.files=[],j.hide(),e.editing=!0,a.editing=!0,0==b?(a.folders.splice(0,0,e),a.current_folder=e):(a.current_folder.sub_folders.splice(0,0,e),a.current_sub_folder=e),c(function(){T("#folder-editor-"+e.file_id)},30),I(),K("list"),a.in_sub=!(0==b),H()})},a.updateFolderName=function(b){if(b){if(b.name.match(/[,`~!@#$%^&*:;()''""><|.\ \/=]/g))return h.warn().send("文件夹名："+b.name+" 不能采用"),void(b.name=(b.name||"").replace(/[,`~!@#$%^&*:;()''""><]/g,""));b.name!==b.copy.name&&b.name.length>0?d.update_name({id:q.id,name:b.name,dir:b.file_id},{},function(){a.editing=!1,b.editing=!1,delete b.copy,b.copy=angular.copy(b)})["catch"](function(){a.editing=!1,b.editing=!1,b.name=b.copy.name}):(b.name=b.copy.name,b.editing=!1,a.editing=!1)}},a.setFolderEditable=function(b,d){return d?(n.safeApply.call(a,function(){d.editing=!0,a.editing=!0}),c(function(){T("#folder-editor-"+d.file_id)},30),b.preventDefault(),!1):void 0},a.removeFolder=function(b,c,f){return c&&confirm('确认删除文件夹 "'+c.name+'" ?')&&(a.folder_deleting=!0,d.rmdir({id:q.id,dir:c.file_id},function(b){if(0==b.code)if(a.folder_deleting=!1,a.editing=!1,f){var d=a.current_folder;d.sub_folders=n.removeOfId(d.sub_folders,c.file_id,"file_id"),Q(d.file_id),M(d.file_id),a.current_sub_folder={},a.in_sub=!1}else a.folders=n.removeOfId(a.folders,c.file_id,"file_id"),Q(0),a.current_folder={},M(0);else e.handle(b)})["catch"](function(){c.editing=!1,a.editing=!1,a.folder_deleting=!1})),b.preventDefault(),!1},a.downloadFile=function(a){location.href=i.api_host+"/api/project/"+q.id+"/files/"+a.file_id+"/download"},a.zipDownload=function(){var b=y(a.files);if(b&&1===b.length)return window.open(i.api_host+"/api/project/"+q.id+"/files/"+b[0]+"/download"),void a.unCheckAll();var c={project:q.name,user:q.owner_user_name,ids:b.join(",")};d.zipDownloadNeedAsync(c,function(b){var e=b.data;e?confirm("批量下载文件过大，我们将在后台打包，打包完成后将给您发送站内通知。确认下载？")&&d.zipDownloadAsync(c,function(){h.success().send("文件已开始在后台打包"),a.unCheckAll()}):(a.unCheckAll(),window.open("/api/user/"+c.user+"/project/"+c.project+"/files/download?ids="+encodeURIComponent(c.ids),"文件打包下载"))})},a.contentUpdate=function(b){a.current_file.content=b};var U={};a.loadPdf=function(b){if(!a.pdf_preview_loading){a.pdf_preview_page=b||1;var c=a.current_file.file_id,e=U[c];e||(e=U[c]=[]);var f=e[b];if(f)return void(a.pdf_preview=f);a.pdf_preview_loading=!0,d.pdf({id:q.id,file:c,page:b||1},function(c){a.pdf_preview_loading=!1,a.pdf_preview=c.data,a.pdf_preview_loaded=!0,e[b]=angular.copy(a.pdf_preview)})["catch"](function(){a.pdf_preview_loading=!1})}};var V=function(){return a.current_folder&&a.current_folder.id||a.folder_id},W=function(b,c){c=c||0,d.image({id:q.id,file:b,folderId:c},function(b){a.image_preview=b.data||{prevId:-1,nextId:-1}})["catch"](function(){return a.image_preview={prevId:-1,nextId:-1},!1})};a.previewImage=function(b){if(!a.file_loading&&b>0){a.image_previewing=!0,a.file_id=b,a.image_previewing=!1;var c=[q.project_path,"/attachment/",V(),"/preview/",b].join("");f.skipReload().path(c)}},a.onImageNavChange=function(b){var c=$(":focus");c.is("textarea, input")||c.is("#pdf-preview-wrapper")||a.current_file.name.indexOf("pdf")>0||setTimeout(function(){$(".preview-button > a."+b).trigger("click")})},a.screenfull_enabled=screenfull.enabled,screenfull.enabled&&document.addEventListener(screenfull.raw.fullscreenchange,function(){a.pdf_resize=screenfull.isFullscreen?"full":"small",screenfull.isFullscreen?a.pdf_fullscreen_height="100%":a.pdf_fullscreen_height=0}),a.switchDetailMode=function(b){a.detail_mode=b},a.detailPath=function(a,b){var c=[a.project_path,"/attachment/",b.parent_id?b.parent_id:"default","/preview",b.file_id?"/"+b.file_id:""].join("");return c},L().then(function(){var b=n.findOfId(a.folders,a.folder_id,"file_id");b?(a.current_folder=b,a.current_sub_folder={},a.in_sub=!1):angular.forEach(a.folders,function(b){var c=n.findOfId(b.sub_folders,a.folder_id,"file_id");c&&(a.current_folder=b,a.current_sub_folder=c,a.in_sub=!0)})}),$(document).on("onShare",function(){I()});var X=function(b){a.file_id=b};if(isNaN(t)||0==t)if("list"==u)if("shared_files"==s){var Y=a.loadSharedFiles(j.currentPage());Y.then(function(){K("shared_files")})}else{var Z=M(isNaN(s)||0==s?0:s,j.currentPage());Z.then(function(){K("list")})}else"create"==u&&(a.current_file={},a.editor_type=-1==v.indexOf(t)?"txt":t,K("create"));else{if(a.version){a.switchDetailMode("history");var _={history_id:history.history_id,view:a.view};p.doFilePreviewHistorySelect(_)}X(t)}p.onDetailFileLoadFail(function(b,c){if(c&&900==c.code&&(Q(0),M(0)),c&&1304===c.code){var d=V(),e=[q.project_path,"/attachment/",d?d:""].join("");f.path(e),a.current_template=B(w)}return c&&1==c.code&&"preview"===u?(h.fail().send("预览的文件不存在或已被删除！"),f.path(q.project_path+"/attachment/"+a.folder_id),!1):(a.file_loading=!1,void(a.image_previewing=!1))}),p.onDetailFilePreviewLoadSuccess(function(b,c){a.current_file=c,a.file_loading=!1,a.image_previewing=!1,a.share=c.share;var d=V();W(c.file_id,A(d)),K(a.action),N()}),p.onClosePreviewModal(function(){a.attachment_preview_modal.toggle()}),p.onFileDeleteSuccess(function(a,b){var c=P(b);c&&c.then&&c.then(function(){ba()})}),p.onFileListReloadSuccess(function(){var b=isNaN(a.folder_id)||0==a.folder_id?0:a.folder_id;M(b,j.currentPage())}),a.$on("$destroy",function(){p.removeDetailFileLoadFail(),p.removeDetailFilePreviewLoadSuccess(),p.removeDetailFileEditLoadSuccess(),p.removeDetailFileCreateSuccess(),p.removeDetailFileSaveSuccess(),p.removeClosePreviewModal(),p.removeFileListReloadSuccess(),p.removeFileDeleteSuccess()});var aa=a.attachment_preview_modal=o.instance("attachment-preview-modal",{duration:200,onHide:function(){$(".project-file-tool-bar .preview-modal.info.icon").popup("hide"),p.doFilePreviewClear(),a.$broadcast("attachmentPreviewModalClosed")}}),ba=a.attachmentPreviewModal=function(){aa.toggle()}}]),angular.module("app").controller("ProjectAttachmentExpController",["$scope","$rootScope","$timeout","Attachment","Errors","$route","location","$routeParams","Flash","Setting","Pager","Markdown","PageTitle","$q","Common","ModalService","AttachmentOperatingService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=a.PROJECT,s=[j.api_host,"/api/project/",r.id,"/file/upload"].join("");angular.extend(a,{ADMIN:b.ADMIN});var t=a.folder_id=h.region||"default",u=a.file_id=h.file_id||0,v=a.action=h.action||"list",w=(a.editor_type=h.editor_type||!1,["txt","md"]),x=v||"list";a.pdf_preview=!1,a.pdf_preview_loading=!1,a.pdf_preview_loaded=!1,a.pdf_preview_page=1,a.pdf_resize="small",a.pdf_fullscreen_height=0,a.preview_able=!1,a.markdown_preview=!1,a.preview_image_rotate_degrees=0,a.image_preview={prevId:-1,nextId:-1},a.image_previewing=!1;var y=a.attachment_pager_id=(new Date).getTime();k=k.instance(y,a),k.onChange(function(b){"shared_files"==a.folder_id?a.loadSharedFiles(b):N("default"===a.folder_id?0:a.folder_id,b)}),a.files=[],a.folders=[],a.current_folder={readName:"",content:""},a.folders_count=[],a.default_folder_count=0,a.shared_files_count=0,a.file_loading=!0,a.files_loading=!0,a.folder_loading=!0,a.file_saving=!1,a.uploading=!1,a.folder_deleting=!1,a.editing=!1,a.zipDownloadUrl="",a.zipDownloadFileIds="",a.current_sub_folder={},a.in_sub=!1,a.selected_file_count=0,a.selectedFiles=[],a.detail_mode="activity",a.navigate_change_enable=!0,a.file_name_editing=!1,a.version=g.search().version,a.toggleCheckAll=function(b){a.allChecked()?_.remove(a.selectedFiles,function(b){return o.findOfId(a.files,b.file_id,"file_id")}):a.selectedFiles=_.uniqBy(a.selectedFiles.concat(a.files),"file_id"),a.selected_file_count=a.selectedFiles.length},a.unCheckAll=function(){a.selectedFiles=[],a.selected_file_count=0},a.allChecked=function(){function b(a,b){return a.length!=b.length||_.isArray(a)&&_.isArray(b)?void 0:a.file_id===b.file_id}if(0===a.selectedFiles.length||0===a.files.length)return!1;var c=_.intersectionWith(a.selectedFiles,a.files,function(a,c){return _.isEqualWith(a,c,b)}),d=angular.copy(a.files);return d=_.orderBy(d,"file_id"),c=_.orderBy(c,"file_id"),_.isEqualWith(d,c,b)},a.selectFile=function(b){null!=o.findOfId(a.selectedFiles,b.file_id,"file_id")?a.selectedFiles=o.removeOfId(a.selectedFiles,b.file_id,"file_id"):a.selectedFiles.push(b),a.selected_file_count=a.selectedFiles.length},a.fileSelected=function(b){return null!=o.findOfId(a.selectedFiles,b.file_id,"file_id")},a.hasSelected=function(){return a.selectedFiles.length>0},a.showFilenameEllipsis=function(a){return a.name.substring(0,25)+(a.name.length>25?"...":"")};var z=function(){return $.map(a.selectedFiles,function(a){return a.file_id})},A=function(){var b=[];angular.forEach(a.files,function(c){a.fileSelected(c)||b.push(c)}),a.files=angular.copy(b),a.unCheckAll()};a.moveFileTo=function(b){if(!isNaN(b)){if(a.in_sub){if(a.current_sub_folder.file_id==b)return}else if(a.current_folder.file_id==b)return;if(!a.hasSelected())return void i.warn().send("请至少选择一个文件！");var c=z(a.files);d.move({id:r.id,folder:b,fileId:c},{},function(a){i.success().send("文件移动成功!"),A(),J()})}};var B=function(a){return"default"===a?0:a},C=function(a){return("edit"==a||"create"==a)&&(a="create"),"list"===a?"app/project/exp/list.html":"app/attachment/"+a+".html"},D=function(b,c){var d=c.file_id;a.action=b,a.current_template=C(b);var e=[r.project_path,"/attachment",a.folder_id?"/"+a.folder_id:"/default","/",b,d?"/"+d:""].join("");if("create"===b&&isNaN(d)){a.current_file={};var f=d||"txt";a.editor_type=f,e=[r.project_path,"/attachment",a.folder_id?"/"+a.folder_id:"/default","/create/",f].join("")}else if("edit"===b&&d){var f=a.editorType(c)||"txt";e=[r.project_path,"/attachment",a.folder_id?"/"+a.folder_id:"/default","/edit/",d,"/",f].join(""),a.editor_type=f}a.file_id=d,g.skipReload().path(e)};a.current_template=C(x),a.current_file=!1,a.share=!1;var E=null,F=0;a.uploading_files=[],a.upload_progress={total:0,loaded:0};var G=function(){var b=0,c=0;return angular.forEach(a.uploading_files,function(a){var d=a.progress;d&&(b+=d.loaded,c+=d.total)}),{total:c,loaded:b}},H=function(b){for(var c=0;c<b.files.length;c++)a.files=o.removeOfId(a.files,b.files[c].name,"name");o.safeApply.call(a,function(){F+=b.files.length,a.uploading_files=a.uploading_files.concat(b.files),b.submit(),a.uploading=!0})},I=function(){var b=$("div#attachment_dragenter"),c=!1,f=!1;$(document).bind("dragover",function(a){a.preventDefault();var b=$(document),c=$("#attachment_dragenter").dimmer("is animating")|$("#attachment_dragenter").dimmer("is active")|$(".modal.active").length,d=window.dropZoneTimeout;d||c?clearTimeout(d):$("#attachment_dragenter").dimmer("show");var e=!1,f=a.target;do{if(f===b[0]){e=!0;break}f=f.parentNode}while(null!=f);e?c||$("#attachment_dragenter").dimmer("show"):$("#attachment_dragenter").dimmer("hide"),window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null,$("#attachment_dragenter").dimmer("hide")},100)}),a.projectAttachmentZoneUploadSetting={xhrFields:{withCredentials:!0},url:s,dropZone:b,pasteZone:b,formData:{dir:B(a.folder_id)},maxFileSize:5e6,add:function(b,e){for(var g=0;g<e.files.length;g++){var h=e.files[g];if(h.size>314572800)return void i.fail().timeout(2e3).send("文件:"+h.name+" 大小超过300M!")}for(var j=[],k=0;k<e.files.length;k++)j.push(e.files[k].name);var l=d.is_existed({id:r.id,dir:B(a.folder_id),names:j});l.then(function(a){a.data&&a.data.conflict_file?f=!0:c=!0,H(e)})},done:function(b,g){F--,o.safeApply.call(a,function(){if(a.uploading=0!=F,a.uploading||(J(),a.upload_progress={total:0,loaded:0
}),0==g.result.code){var b=d.resolve("files",g.result.data);b.then(function(b){a.files.unshift(b)})}else e.handle(g.result);if(a.uploading_files=o.removeOfId(a.uploading_files,g.files[0].name,"name"),!a.uploading){var h="文件上传成功";f&&(h+=":同名文件已覆盖，并产生新的文件版本"),i.success().send(h),f=!1,c=!1}})},fail:function(){o.safeApply.call(a,function(){F=0,a.uploading=!1,E=null,i.fail().send("上传失败!")})},progress:function(b,c){var d={total:c.total,loaded:c.loaded};o.safeApply.call(a,function(){var b=o.findOfId(a.uploading_files,c.files[0].name,"name");b.progress=d,a.uploading=!0,a.upload_progress=G()})}}};a.back=function(){a.current_template=C("list");var b=[r.project_path,"/attachment",a.folder_id>0?"/"+a.folder_id:""].join("");g.skipReload().path(b)},a.create=function(){a.current_file={},D("create")},a.upload=function(b){a.uploading||b&&b($("#upload-zone"))},a.uploadNewVersion=function(){a.detail_mode="history",c(function(){angular.element(document.querySelector("#uploadFile")).triggerHandler("click")})};var J=function(){var b=d.all_count({id:r.id});return b.then(function(b){a.folders_count=b.data,angular.forEach(a.folders,function(b){var c=o.findOfId(a.folders_count,b.file_id,"folder");b.count=angular.copy(c.count),angular.forEach(b.sub_folders,function(c){var d=o.findOfId(a.folders_count,c.file_id,"folder");c.count=angular.copy(d.count),b.count+=c.count})});var c=o.findOfId(a.folders_count,0,"folder");a.default_folder_count=c.count}),K(),b},K=function(){var b=d.shared_files({id:r.id,width:90,height:90,page:1});b.then(function(b){a.shared_files_count=b.data.totalRow})},L=function(b){var c=a.current_file?a.current_file.name:"",d=a.current_folder&&!a.in_sub?a.current_folder:a.current_sub_folder,e={list:[d&&d.name||"默认文件夹"],preview:[c,d&&d.name||"默认文件夹"],edit:["编辑",c],create:["创建新的文件"],shared_files:["正在分享的文件"]},f=e[b];f.push(r.name),f.push("Coding.net"),m.set.apply(this,f)},M=function(){a.folder_loading=!0;var b=d.all_folders({id:r.id,page:1,pageSize:9999}),c=b.then(function(b){a.folder_loading=!1,a.folders=b.data.list||[],angular.forEach(a.folders,function(a){angular.forEach(a.sub_folders,function(a){a.copy=angular.copy(a)})}),J()});return c},N=function(b,c){return a.folder_deleting?!1:(k.hide(),a.files=[],a.files_loading=!0,d.files({id:r.id,dir:b||0,width:90,height:90,page:c||1},function(b){a.files_loading=!1,a.files=b.data.list||[],I(),k.optionsReady(b.data)})["catch"](function(a,b){b&&900==b.code&&(R(0),N(0))}))};a.loadSharedFiles=function(b){if(a.folder_deleting)return!1;k.hide(),a.files_loading=!0,a.current_template=C("shared_list");var c=[r.project_path,"/attachment/shared_files"].join("");return g.skipReload().path(c),a.folder_id="shared_files",L("shared_files"),J(),d.shared_files({id:r.id,width:90,height:90,page:b||1},function(b){a.files_loading=!1,a.files=b.data.list||[],k.optionsReady(b.data)})["catch"](function(a,b){b&&900==b.code&&(R(0),N(0))})},a.suffix=function(a){return a?a.substring(a.lastIndexOf(".")+1):"???"};var O=function(){c(function(){var b=$("#attachment .file_info_word.file-image-info");a.current_file.image_width&&a.current_file.image_height?(b.css("display","table-row"),b.find(".file-info-right").text(a.current_file.image_width+" * "+a.current_file.image_height)):b.css("display","none"),$("#attachment .info.icon").data("html",$("#file-info-tpl").html())},300)};a.updateFile=function(b){$("body").removeClass("pagedown-fullscreen");var c=b.file_id;a.file_saving=!0,d.edit({id:r.id,file:c},{name:b.readName+"."+b.fileType,content:b.content},function(){a.file_saving=!1,i.success().send("更新成功！"),g.path(r.project_path+"/attachment/"+a.folder_id+"/preview/"+c)})["catch"](function(){a.file_saving=!1})},a.saveFile=function(b){return b.readName?b.content?($("body").removeClass("pagedown-fullscreen"),a.file_saving=!0,void d.create({id:r.id,dir:B(a.folder_id)},{name:b.readName+"."+a.editor_type,content:b.content},function(){a.file_saving=!1,i.success().send("创建成功！"),g.path(r.project_path+"/attachment/"+a.folder_id)})["catch"](function(){a.file_saving=!1})):void i.fail().send("文件内容不能为空！"):void i.fail().send("文件名不能为空！")},a.openFolder=function(b,c,d){if(b&&b.file_id){if(b.editing)return c.preventDefault(),!1;var e=!1;(a.in_sub||a.current_folder.file_id!=b.file_id)&&(e=!0),"undefined"==typeof b.show_sub&&(b.show_sub=!0),a.current_folder.file_id==b.file_id?e||(b.show_sub=!b.show_sub):b.show_sub=!0,R(b.file_id),d?(a.in_sub=!0,a.current_sub_folder=o.findOfId(a.current_folder.sub_folders,b.file_id,"file_id")):(a.in_sub=!1,a.current_folder=o.findOfId(a.folders,b.file_id,"file_id"),a.current_sub_folder={}),a.unCheckAll(),e&&(N(b.file_id),L("list"))}else R(0),N(0),a.in_sub=!1,a.current_folder={},a.current_sub_folder={},L("list");this.uploading_files=[]},a.getFileType=function(a){return q.getFileType(a)},a.editorType=function(a){return q.editorType(a)},a.editable=function(a){return q.editable(a)},a.editFile=function(b){a.current_template=C("edit");var c=a.getFileType(b);if("text"==c){var d=a.current_file;d&&d.file_id==b.file_id||(a.file_id=b.file_id),D("edit",b),L("edit")}},a.setFileNameEditable=function(b){a.file_name_editing=!0,b.preventDefault(),b.stopPropagation(),c(function(){U("#edit-file-name-"+a.current_file.file_id)},30)},a.renameFile=function(b){if(a.file_name_editing=!1,!b.readName)return b.readName=b.copy.readName,void i.fail().send("文件名不能为空");if(!b.readName||!b.copy||b.readName!==b.copy.readName){a.file_name_editing=!0;var c=d.rename({id:r.id,file_id:b.file_id},{name:b.readName+"."+b.fileType});c.then(function(a){b.name=b.readName+"."+b.fileType,b.copy.name=angular.copy(b.name),b.copy.readName=angular.copy(b.readName),i.success().send("修改成功"),b.activity_count++,b.history_count++,b.history_id=a.data&&a.data.history_id||b.history_id;var c={project_id:r.id,file_id:u};q.doFileHistoriesReloadSuccess(c)}),c["catch"](function(){b.name=b.copy.name}),c["finally"](function(){a.file_name_editing=!1})}},q.onFileRenameSuccess(function(b,c){if(c&&c.file_id){var d=o.findOfId(a.files,c.file_id,"file_id");d.name=c.name,d.updated_at=(new Date).getTime()}}),q.onDetailFileEditLoadSuccess(function(a,b){D("edit",b),L("edit")}),q.onDetailFileCreateSuccess(function(){i.success().send("创建成功！"),g.path(r.project_path+"/attachment/"+a.folder_id)}),q.onDetailFileSaveSuccess(function(b,c){i.success().send("更新成功！"),g.path(r.project_path+"/attachment/"+a.folder_id+"/preview/"+c.file_id)});var P=function(a,b,c){var d={project:a,file_id:b,folder_id:c};q.doOpenPreviewModal(d),ca.toggle()};a.previewFile=function(b,c){a.uploading||(P(r,b.file_id,a.folder_id),c.stopPropagation())};var Q=a.deleteFile=function(b,c){if(a.selected_file_count=a.fileSelected(b)?--a.selected_file_count:a.selected_file_count,b&&confirm('确认删除文件 "'+b.name+'" ?')){var e=d["delete"]({id:r.id,fileIds:b.file_id},function(d){i.success().send("文件删除成功！"),a.files=o.removeOfId(a.files,b.file_id,"file_id"),J(),c&&g.path(r.project_path+"/attachment/"+a.folder_id)});return e}};a.deleteSelected=function(){var b=z(a.files);b.length>0&&confirm("确认删除选定的 "+b.length+" 个文件？")&&d["delete"]({id:r.id,fileIds:b},function(a){i.success().send("选定的 "+a.data+" 个文件删除成功！"),A(),J()})};var R=function(b){if(!a.folder_loading){a.folder_id=b||"default",a.current_template=C("list");var c=[r.project_path,"/attachment/",b?b:""].join("");g.skipReload().path(c)}},S=function(b,c){var d=!1;return c?angular.forEach(a.current_folder.sub_folders,function(a){a.name!=b||d||(d=!0)}):angular.forEach(a.folders,function(a){a.name!=b||d||(d=!0)}),d},T=function(a){for(var b=!!a,c="新建文件夹",d=0,e=c;S(e,b);)e=c+ ++d;return e},U=function(a){var b=$(a).focus();b[0].setSelectionRange(0,b[0].value.length)};a.createFolder=function(b){var e=0==b?T():T(!0);d.mkdir({id:r.id,name:e,parentId:b},{},function(d){var e=d.data;R(e.file_id),a.files=[],k.hide(),e.editing=!0,a.editing=!0,0==b?(a.folders.splice(0,0,e),a.current_folder=e):(a.current_folder.sub_folders.splice(0,0,e),a.current_sub_folder=e),c(function(){U("#folder-editor-"+e.file_id)},30),J(),L("list"),a.in_sub=!(0==b),I()})},a.updateFolderName=function(b){if(b){if(b.name.match(/[,`~!@#$%^&*:;()''""><|.\ \/=]/g))return i.warn().send("文件夹名："+b.name+" 不能采用"),void(b.name=(b.name||"").replace(/[,`~!@#$%^&*:;()''""><]/g,""));b.name!==b.copy.name&&b.name.length>0?d.update_name({id:r.id,name:b.name,dir:b.file_id},{},function(){a.editing=!1,b.editing=!1,delete b.copy,b.copy=angular.copy(b)})["catch"](function(){a.editing=!1,b.editing=!1,b.name=b.copy.name}):(b.name=b.copy.name,b.editing=!1,a.editing=!1)}},a.setFolderEditable=function(b,d){return d?(o.safeApply.call(a,function(){d.editing=!0,a.editing=!0}),c(function(){U("#folder-editor-"+d.file_id)},30),b.preventDefault(),!1):void 0},a.removeFolder=function(b,c,f){return c&&confirm('确认删除文件夹 "'+c.name+'" ?')&&(a.folder_deleting=!0,d.rmdir({id:r.id,dir:c.file_id},function(b){if(0==b.code)if(a.folder_deleting=!1,a.editing=!1,a.unCheckAll(),f){var d=a.current_folder;d.sub_folders=o.removeOfId(d.sub_folders,c.file_id,"file_id"),R(d.file_id),N(d.file_id),a.current_sub_folder={},a.in_sub=!1}else a.folders=o.removeOfId(a.folders,c.file_id,"file_id"),R(0),a.current_folder={},N(0);else e.handle(b)})["catch"](function(){c.editing=!1,a.editing=!1,a.folder_deleting=!1})),b.preventDefault(),!1},a.downloadFile=function(a){location.href=j.api_host+"/api/project/"+r.id+"/files/"+a.file_id+"/download"},a.zipDownload=function(){var b=z(a.files);if(b&&1===b.length)return window.open(j.api_host+"/api/project/"+r.id+"/files/"+b[0]+"/download"),void a.unCheckAll();var e={project:r.name,user:r.owner_user_name,ids:b.join(",")};d.zipDownloadNeedAsync(e,function(b){var f=b.data;f?confirm("批量下载文件过大，我们将在后台打包，打包完成后将给您发送站内通知。确认下载？")&&d.zipDownloadAsync(e,function(){i.success().send("文件已开始在后台打包"),a.unCheckAll()}):(a.unCheckAll(),a.zipDownloadUrl="/api/user/"+e.user+"/project/"+e.project+"/files/download",a.zipDownloadFileIds=e.ids,c(function(){angular.element("#zipDownloadForm").submit(),a.zipDownloadUrl="",a.zipDownloadFileIds=""},100))})},a.onMoveSuccess=function(a){g.path(r.project_path+"/attachment/"+a),f.reload()},a.contentUpdate=function(b){a.current_file.content=b};var V={};a.loadPdf=function(b){if(!a.pdf_preview_loading){a.pdf_preview_page=b||1;var c=a.current_file.file_id,e=V[c];e||(e=V[c]=[]);var f=e[b];if(f)return void(a.pdf_preview=f);a.pdf_preview_loading=!0,d.pdf({id:r.id,file:c,page:b||1},function(c){a.pdf_preview_loading=!1,a.pdf_preview=c.data,a.pdf_preview_loaded=!0,e[b]=angular.copy(a.pdf_preview)})["catch"](function(){a.pdf_preview_loading=!1})}};var W=function(){return a.current_folder&&a.current_folder.id||a.folder_id},X=function(b,c){c=c||0,d.image({id:r.id,file:b,folderId:c},function(b){a.image_preview=b.data||{prevId:-1,nextId:-1}})["catch"](function(){return a.image_preview={prevId:-1,nextId:-1},!1})};a.previewImage=function(b){if(!a.file_loading&&b>0){a.image_previewing=!0,a.file_id=b,a.image_previewing=!1;var c=[r.project_path,"/attachment/",W(),"/preview/",b].join("");g.skipReload().path(c)}},a.onImageNavChange=function(b){var c=$(":focus");c.is("textarea, input")||c.is("#pdf-preview-wrapper")||a.current_file.name.indexOf("pdf")>0||setTimeout(function(){$(".preview-button > a."+b).trigger("click")})},a.screenfull_enabled=screenfull.enabled,screenfull.enabled&&document.addEventListener(screenfull.raw.fullscreenchange,function(){a.pdf_resize=screenfull.isFullscreen?"full":"small",screenfull.isFullscreen?a.pdf_fullscreen_height="100%":a.pdf_fullscreen_height=0}),a.switchDetailMode=function(b){a.detail_mode=b},a.detailPath=function(a,b){var c=[a.project_path,"/attachment/",b.parent_id?b.parent_id:"default","/preview",b.file_id?"/"+b.file_id:""].join("");return c},M().then(function(){var b=o.findOfId(a.folders,a.folder_id,"file_id");b?(a.current_folder=b,a.current_sub_folder={},a.in_sub=!1):angular.forEach(a.folders,function(b){var c=o.findOfId(b.sub_folders,a.folder_id,"file_id");c&&(a.current_folder=b,a.current_sub_folder=c,a.in_sub=!0)})}),$(document).on("onShare",function(){J()});var Y=function(b){a.file_id=b};if(isNaN(u)||0==u)if("list"==v)if("shared_files"==t){var Z=a.loadSharedFiles(k.currentPage());Z.then(function(){L("shared_files")})}else{var aa=N(isNaN(t)||0==t?0:t,k.currentPage());aa.then(function(){L("list")})}else"create"==v&&(a.current_file={},a.editor_type=-1==w.indexOf(u)?"txt":u,L("create"));else{if(a.version){a.switchDetailMode("history");var ba={history_id:history.history_id,view:a.view};q.doFilePreviewHistorySelect(ba)}Y(u)}q.onDetailFileLoadFail(function(b,c){if(c&&900==c.code&&(R(0),N(0)),c&&1304===c.code){var d=W(),e=[r.project_path,"/attachment/",d?d:""].join("");g.path(e),a.current_template=C(x)}return c&&1==c.code&&"preview"===v?(i.fail().send("预览的文件不存在或已被删除！"),g.path(r.project_path+"/attachment/"+a.folder_id),!1):(a.file_loading=!1,void(a.image_previewing=!1))}),q.onDetailFilePreviewLoadSuccess(function(b,c){a.current_file=c,a.file_loading=!1,a.image_previewing=!1,a.share=c.share;var d=W();X(c.file_id,B(d)),L(a.action),O()}),q.onClosePreviewModal(function(){a.attachment_preview_modal.toggle()}),q.onFileDeleteSuccess(function(a,b){var c=Q(b);c&&c.then&&c.then(function(){da()})}),q.onFileListReloadSuccess(function(){var b=isNaN(a.folder_id)||0==a.folder_id?0:a.folder_id;N(b,k.currentPage())}),a.$on("$destroy",function(){q.removeDetailFileLoadFail(),q.removeDetailFilePreviewLoadSuccess(),q.removeDetailFileEditLoadSuccess(),q.removeDetailFileCreateSuccess(),q.removeDetailFileSaveSuccess(),q.removeClosePreviewModal(),q.removeFileListReloadSuccess(),q.removeFileDeleteSuccess()});var ca=a.attachment_preview_modal=p.instance("attachment-preview-modal",{duration:200,onHide:function(){$(".project-file-tool-bar .preview-modal.info.icon").popup("hide"),q.doFilePreviewClear(),a.$broadcast("attachmentPreviewModalClosed")}}),da=a.attachmentPreviewModal=function(){ca.toggle()}}]),angular.module("app").controller("PasswordValidateController",["$scope","PasswordValidateService",function(a,b){a.method="",a.method_message="",a.two_factor_code="",a.words="这是一个危险操作，需要进行身份验证！",a.confirmed=!1,a.passwordValidate=function(){return 0!==a.two_factor_code.length?(a.confirmed=!0,$("#password-validate-modal").modal("hide"),!1):void 0},b.onRequire(function(c,d,e){if(a.method=e,"password"===a.method)a.method_message="登录密码";else if("totp"===a.method)a.method_message="两步验证码";else{if("phone"!==a.method)return!1;a.method_message="手机验证码"}$("#password-validate-modal").modal("setting",{duration:200,closable:!1,allowMultiple:!1,onShow:function(){a.two_factor_code="",a.confirmed=!1},onHide:function(){"password"===a.method?b.passwordReady(SHA1(a.two_factor_code),a.confirmed):b.passwordReady(a.two_factor_code,a.confirmed)},onApprove:function(){a.confirmed=!0},onDeny:function(){a.confirmed=!1}}).modal("show"),d&&d.length>0&&(a.words=d)})}]).service("PasswordValidateService",["$rootScope","$timeout",function(a,b){var c=700,d=null,e=null,f=null,g=function(b){e&&e(),e=a.$on("on.password.validate.ready",b)},h=function(e,f){b(function(){a.$broadcast("on.password.validate.ready",e,f,d)},c)},i=function(e,f,g,h){d=g,c=h||700,b(function(){a.$broadcast("on.password.required",e,f)},c)},j=function(b){f&&f(),f=a.$on("on.password.required",b)};return{onPasswordReady:g,passwordReady:h,require:i,onRequire:j,TYPES:{DELETE_PROJECT:"delete-project",TRANSFER_PROJECT:"transfer-project",DELETE_SSH_KEY:"delete-ssh-key",ADD_SSH_KEY:"add-ssh-key",ADD_DEPLOY_SSH_KEY:"add-deploy-key",DELETE_DEPLOY_SSH_KEY:"delete-deploy-key",BIND_DEPLOY_SSH_KEY:"bind-deploy-key",UNBIND_DEPLOY_SSH_KEY:"unbind-deploy-key",DELETE_PAAS:"delete-paas",DELETE_PAAS_SERVICE:"delete-paas-service",ARCHIVE_PROJECT:"archive_project",TEAM_MEMBER_REMOVE:"team_member_remove",TEAM_TRANSFER:"team_transfer",TEAM_DISMISS:"team_dismiss",TEAM_QUIT:"team_quit",TEAM_ARCHIVE_PROJECT:"team_archive_project",TEAM_EXPORT_PROJECT:"team_export_project",TEAM_DELETE_PROJECT:"team_delete_project",TEAM_IMPORT_PROJECT:"team_import_project",RESET_REPO:"reset_repo"}}}]),angular.module("app").controller("ProjectSettingController",["$scope","$routeParams","Project","$rootScope","location","Errors","Flash","Depot","Setting","Paas","Common",function(a,b,c,d,e,f,g,h,i,j,k){var l=a.PROJECT,m=d.USER;l.owner_id!=d.USER.id&&e.path(l.project_path),a.tag_menu="setting",a.inner_menu=b.region||"basic",a.current_project={},a.loading=!0,a.update_success=!1,a.uploading=!1,a.branches={},a.default_branch="",a.deleting=!1,a.members=[],a.selected_member=void 0,a.member_loading=!1,a.paas_enabled=!1,a.paas_url="/u/"+b.username+"/p/"+l.name+"/paas",a.transferring=!1,a.dropDownSetting={onShow:function(){$("#transfer-member > .menu > .search > .ui.icon.input > input").focus()}};var n=l.id;c.query({project_id:n},function(b){return a.loading=!1,0!=b.code?void f.handle(b):(a.current_project=b.data,void(a.project=b.data))}),h.depot({username:b.username,project_name:l.name},function(b){b.data?(a.depot=b.data.depot,a.default_branch=b.data.depot.default_branch):a.depot=!1}),h.listBranches({username:b.username,project_name:l.name},function(b){a.branches=b.data}),j.get({username:b.username,project_name:l.name},function(){a.paas_enabled=!0,$("#transfer-member").dropdown("destroy")},function(){a.paas_enabled=!1}),a.member_loading=!0,c.members({id:l.id},function(b){a.members=k.removeOfId(k.m2u(b.data.list),m.id),a.member_loading=!1}),a.selectMember=function(b){a.selected_member=b,$("#transfer-member").dropdown("hide")};var o=function(b,d){if(a.selected_member&&!a.transferring&&!a.paas_enabled){a.transferring=!0;var f=c.transfer({id:b.id,global_key:d.global_key},{},function(a){var b=a.data;e.path(b.project_path+"/setting/basic"),g.success().send("转让成功！")});f["catch"](function(b,c){c&&c.msg.password_error&&a.beforeTransferProject(200)}),f["finally"](function(){a.transferring=!1})}},p=[i.api_host,"/api/project/"+l.id+"/project_icon"].join("");a.uploadSetting={xhrFields:{withCredentials:!0},url:p,dropZone:null,add:function(b,c){var d=/(\.|\/)(jpe?g|png)$/i;return c.files[0].size>1048576?(g.fail().send("图像大于 1M"),!1):d.test(c.files[0].type)||d.test(c.files[0].name)?(c.submit(),void(a.uploading=!0)):(g.fail().send("只支持 JPG、JPEG、PNG 格式的图片"),!1)},done:function(b,c){0===c.result.code?(a.PROJECT=c.result.data,d.PROJECT=a.PROJECT,a.project_icon=c.result.data.icon,a.uploading=!1,d.$broadcast("project.icon.update",c.result.data.icon),g.success().send("上传成功!")):(f.handle(c.result),a.uploading=!1)},fail:function(){a.uploading=!1,g.fail().send("上传失败!")}};var q=angular.copy(a.PROJECT);a.updateProject=function(b,d){if((!r(b,q)||d!=a.default_branch)&&b.id){a.updating=!0,a.update_success=!1;var f={id:b.id,name:b.name,description:b.description,default_branch:d};c.update(f,function(b){a.updating=!1;var c=b.data;e.path(c.project_path+"/setting/basic"),g.success().send("更新成功！")})["catch"](function(b,c){a.updating=!1})}};var r=function(a,b){return a.name==b.name&&a.description==b.description};a.beforeDeleteProject=function(b){s(a.current_project.name)},a.beforeTransferProject=function(b){o(l,a.selected_member)};var s=function(b,d){a.deleting=!0;var e=c["delete"]({project_id:a.current_project.id,name:b});e.then(function(){location.href="/user/projects"}),e["catch"](function(b,c){c&&c.msg.password&&a.beforeDeleteProject(200),a.deleting=!1})};a.editProjectIcon=function(){$("#edit-project-icon-modal").modal("show")},a.$on("project.icon.update",function(b,c){a.project.icon=c})}]),angular.module("app").controller("ProjectDeployKeyIndexController",["$rootScope","$scope","Flash","Project","Depot","$routeParams","$location","$route",function(a,b,c,d,e,f,g,h){b.tag_menu="setting",b.inner_menu="deploy",b.key_id="",b.isProjectAdmin||g.path(b.PROJECT.project_path),e.queryDepolyKeys({username:f.username,project_name:b.PROJECT.name},function(a){0===a.code&&(b.project_keys=a.data)}),b.showUnbindPassword=function(a){i(a),b.key_id=""};var i=function(a){e.unBindDeployKey({username:f.username,project_name:b.PROJECT.name,id:a},{},function(a){h.reload(),c.success().send("删除成功")})["catch"](function(c,d){d&&1401===d.code&&b.showUnbindPassword(a)})}}]),angular.module("app").controller("ProjectDeployKeyNewController",["$scope","$rootScope","Errors","Depot","$routeParams","$location","Flash","ErrorCode",function(a,b,c,d,e,f,g,h){a.tag_menu="setting",a.inner_menu="deploy",a.submit_loading=!1,a.key={title:"",content:"",allowWriteAccess:!1},a.isProjectAdmin||f.path(a.PROJECT.project_path),a.showPasswordWithCreateKey=function(b){a.key.title=b.title,a.key.content=b.content,a.key.allowWriteAccess=b.allowWriteAccess,i(a.key)},a.split=function(b){if(null!==b){var c=b.split(" ");if(3===c.length)return a.key.title=c[2]}};var i=function(b){return a.submit_loading=!0,""===b.content?(g.fail().send("公钥不能为空"),void(a.submit_loading=!1)):void d.saveDeployKey({username:e.username,project_name:a.PROJECT.name},{title:b.title,content:b.content,allowWrite:b.allowWriteAccess},function(b){a.submit_loading=!1,g.success().send("添加成功"),f.path(a.PROJECT.project_path+"/setting/deploy_key")})["catch"](function(b,c){a.submit_loading=!1,c&&c.code===h.PASSWORD_ERROR&&a.showPasswordWithCreateKey(a.key)})}}]),angular.module("app").controller("ProjectDepotIndexController",["$rootScope","$scope","Depot","$route","$routeParams","$timeout","Flash",function(a,b,c,d,e,f,g){b.tag_menu="setting",b.inner_menu="depot";var h=b.PROJECT,i=b.USER;b.svn_url=h.svn_url,c.depot({username:e.username,project_name:e.project_name}).then(function(a){0==a.code&&(b.svn_enabled=a.data.depot.svn_enabled)}),b.toggleSvn=function(a){c.toggleSvn({username:e.username,project_name:e.project_name},{enable:a}).then(function(){g.success().send(a?"SVN 服务已开启!":"SVN 服务已关闭!")})};var j=0;b.do_copy=function(){b.copied=!0,f.cancel(j),j=f(function(){b.copied=!1},2e3)};b.beforeResetRepo=function(a){return h.owner_id!==i.id?void g.fail().send("只有项目拥者才可以清空仓库！"):void k()};var k=function(){b.repo_deleting=!0;var d=c.resetDepot({username:e.username,project_name:e.project_name},{});d.then(function(){g.success().send("清空完成！"),c.depot({username:e.username,project_name:e.project_name}).then(function(b){a.DEPOT=b.data})}),d["finally"](function(){b.repo_deleting=!1})}}]),angular.module("app").controller("ProjectSettingAdvanceController",["$scope","$rootScope","$location","Paas","Project","Depot","Common","Flash","ErrorCode",function(a,b,c,d,e,f,g,h,i){var j=a.PROJECT,k=a.USER;a.current_project=angular.copy(j),a.paas_enabled=!1,a.paas_url="/u/"+j.owner_user_name+"/p/"+j.name+"/paas",a.deleting=!1,a.repo_deleting=!1,a.members=[],a.selected_member=void 0,a.member_loading=!1,a.transferring=!1,a.acrhiving=!1,a.dropDownSetting={onShow:function(){$("#transfer-member > .menu > .search > .ui.icon.input > input").focus()}},d.get({username:j.owner_user_name,project_name:j.name},function(b){return 0!==b.code?void(a.paas_enabled=!1):(a.paas_enabled=!0,void $("#transfer-member").dropdown("destroy"))},function(){a.paas_enabled=!1}),a.member_loading=!0,e.members({id:j.id},function(b){a.members=g.removeOfId(g.m2u(b.data.list),k.id),a.member_loading=!1}),a.selectMember=function(b){a.selected_member=b,$("#transfer-member").dropdown("hide")};var l=function(b,d){if(a.selected_member&&!a.transferring&&!a.paas_enabled){a.transferring=!0;var f=e.transfer({id:b.id,global_key:d.global_key},{},function(b){var d=b.data;c.path(d.project_path),a.$emit("project.transfer"),h.success().send("转让成功！")});f["catch"](function(b,c){c&&c.msg.password_error&&a.beforeTransferProject(200)}),f["finally"](function(){a.transferring=!1})}};a.beforeDeleteProject=function(){m(a.current_project.name)},a.beforeTransferProject=function(){a.selected_member&&l(j,a.selected_member)},a.beforeArchiveProject=function(){n(a.current_project.id)};var m=function(b){a.deleting=!0;var c=e["delete"]({project_id:a.current_project.id,name:b},{});c.then(function(){a.$emit("project.remove"),location.href="/user/projects"}),c["catch"](function(b,c){c&&c.code==i.PASSWORD_ERROR&&a.beforeDeleteProject(),a.deleting=!1})},n=function(b){a.archiving=!0;var d=e.archive({id:b},{});d.then(function(a){c.path("/user/projects/archive"),h.success().send("归档成功！")}),d["catch"](function(b){b&&b.msg.password_error&&a.beforeArchiveProject(200)}),d["finally"](function(){a.archiving=!1})};a.quiting=!1,a.quit=function(){if(j.owner_id!=k.id&&confirm("确认退出项目？")){a.quiting=!0;var b=e.quit({id:j.id},{});b.then(function(){c.path("/user/projects"),a.$emit("project.quit"),h.success().send("退出项目成功！")}),b["finally"](function(){a.quiting=!1})}}}]),angular.module("app").controller("ProjectSettingBasicController",["$scope","$rootScope","Setting","Flash","Errors","Project","Depot","$location","Common",function(a,b,c,d,e,f,g,h,i){var j=a.PROJECT;a.uploading=!1,a.update_success=!1;var k=angular.copy(a.PROJECT);a.project=angular.copy(k);var l=[c.api_host,"/api/project/"+j.id+"/project_icon"].join("");a.uploadSetting={xhrFields:{withCredentials:!0},url:l,dropZone:null,disableImageResize:!0,loadImageMaxFileSize:52428800,imageMaxWidth:800,imageMaxHeight:800,imageMinWidth:128,imageMinHeight:128,processstart:function(){i.safeApply.call(a,function(){a.uploading=!0})},done:function(c,f){0===f.result.code?(a.PROJECT=f.result.data,b.PROJECT=a.PROJECT,a.project_icon=f.result.data.icon,a.uploading=!1,b.$broadcast("project.icon.update",f.result.data.icon),d.success().send("上传成功!")):(e.handle(f.result),a.uploading=!1)},fail:function(){a.uploading=!1,d.fail().send("上传失败!")}};var m=function(a,b){return a.name==b.name&&a.description==b.description};a.updateProject=function(c){if(!m(c,k)&&c.id){a.updating=!0,a.update_success=!1;var e={id:c.id,name:c.name,description:c.description};f.update(e,function(c){a.updating=!1;var e=c.data;b.PROJECT.description=e.description,h.path(e.project_path+"/setting/basic"),d.success().send("更新成功！")})["catch"](function(){a.updating=!1})}},a.editProjectIcon=function(){$("#edit-project-icon-modal").modal("show")}}]),angular.module("app").controller("ProjectSettingController",["$scope","$rootScope","$routeParams","Common","$location","$filter",function(a,b,c,d,e,f){var g=b.isExpActive("vip"),h=a.PROJECT.is_public?"basic":g?"basic":"summary",i=c.region||h,j=c.tab||"index";return a.inner_menu=i,a.tab=j,a.tag_menu="setting",a.PROJECT.is_public&&"summary"===c.region?void e.path(a.PROJECT.project_path+"/setting/basic"):(a.is_project_owner=a.PROJECT.owner_id===(a.USER?a.USER.id:0),a.isProjectAdmin=function(){return f("isRole")(a.PROJECT,a.ADMIN)},void(a.keysPath=function(){var a={summary:function(a){return g?void 0:"app/project/setting/summary/"+a+".html"},deploy_key:function(a){return"app/project/setting/deploy_key/"+a+".html"},webhook:function(a){return"app/project/setting/webhook/"+a+".html"},depot:function(a){return"app/project/setting/depot/"+a+".html"},support:function(a){return"app/project/setting/support/"+a+".html"},"default":"app/project/setting/general/"+i+".html"};return d.smartSwitch(a,i,j)}))}]),angular.module("app").config(["$routeProvider","$locationProvider","UserResolver","ProjectResolver","UserTeamRouterProvider",function(a,b,c,d,e){e.when("/u/:username/p/:project_name/setting/:region?[/]?:tab?[/]?:id?",{templateUrl:"app/project/setting/index.html",resolve:{USER:c,PROJECT:d},controller:"ProjectSettingController",module:"setting",title:["$routeParams","Common",function(a,b){var c=a.region||"basic",d=a.tab||"index",e=a.project_name,f={summary:"项目概览",basic:"基本设置",advance:"高级设置",deploy_key:"部署公钥",webhook:"WebHook 设置",depot:"仓库设置",support:"技术支持","default":"项目设置"};return b.smartSwitch(f,c,d)+" - "+e}]})}]),angular.module("app").controller("ProjectSummaryController",["$scope","Payment","$route","ProjectVersions","PaymentUpgradeService","ProjectSummaryService","Flash","$interval",function(a,b,c,d,e,f,g,h){var i={username:a.PROJECT.owner_user_name,project_name:a.PROJECT.name},j=function(){var c=b.project_summary(i);c.then(function(b){a.service_info=b.data||{},a.upgraded=a.PROJECT.plan>1||!!a.service_info.expired_plan&&a.service_info.expired_plan>1})},k=function(){var c=b.upgradePrice(i);c.then(function(b){var c=b&&b.data;a.upgrade_prices=e.dataToHuman(c)})},l=null;a.isTeamProject=function(){return a.PROJECT&&a.PROJECT.isTeam};var m=function(){a.loaded_export=!1,a.loading_export=!0;var c=b["export"](i);c.then(function(b){a.export_info=b.data||{};var c=(new Date).getTime(),d=c-+a.export_info.created_at,e=36e5;return d>e?void(a.seconds=null):(a.seconds=parseInt((e-d)/1e3),l&&h.cancel(l),void(l=h(function(){a.seconds--,a.seconds<=0&&(a.seconds=null,h.cancel(l))},1e3)))}),c["finally"](function(){a.loaded_export=!0,a.loading_export=!1})},n=function(){b.balance(function(b){a.balance=+b.data||0})},o=function(){var c=b.projectPlan(i);c.then(function(b){a.project_plan=b.data})};j(),n(),o(),a.insufficient=!1,a.balance=0,a.version_price=0,a.project_plan=void 0,a.export_info=void 0,a.loading_export=!1,a.loaded_export=!1,a.$on("upgrade.project.success",function(b,d){d&&f.upgrade(a,d),c.reload()}),a.$on("project.upgrade.renewal.success",function(b,c){a.project_plan.month=c.month,a.project_plan.auto=c.auto}),a.service_info={},a.upgrade_prices=void 0,a.version=d[a.PROJECT.plan].id,a.project_version=d[a.version],a.expired_project_version=d[a.service_info.expired_plan];var p=null,q=null,r=null,s=null;a.$on("set.upgrade.pro.modal",function(a,b){p=b}),a.$on("set.upgrade.renewal.modal",function(a,b){q=b}),a.$on("set.upgrade.just.renewal.modal",function(a,b){r=b}),a.$on("set.renewal.manually.modal",function(a,b){s=b}),a.$on("project.charge.success",function(){n()}),a.upgradePro=function(){p.toggle()},a.renewal=function(){q.toggle()},a.justRenewal=function(){r.toggle()},a.rate=function(a,b){if(angular.isUndefined(a)||angular.isUndefined(b))return 0;var c=+a/+b*100;return c>100&&(c=100),c+"%"},a.progressColor=function(a,b){return a&&b?a/b>7/8?"#D95C5C":a/b>.75?"#eb935d":"#A1CF64":"#A1CF64"},a.projectVersionBg=function(){return!a.PROJECT||a.service_info.expired_plan||1===a.PROJECT.plan?{background:"#EEE",color:"#444"}:{background:a.project_version.color,color:"#FFF"}},a.exportEnableTime=function(a){var b=Math.floor(a/60),c=a%60,d="";return b>0&&(d+=b+"分"),d+=c+"秒"},a.exportProject=function(){if(confirm("数据打包成功后，我们将会发送下载链接到您的注册邮箱，请耐心等待。\n\n确认打包当前项目？")){var a=b.exports(i,{});a.then(function(){g.success().send("数据已开始在后台打包，请耐心等待，并注意查收邮件！"),m()})}},a.renewalManually=function(){s.toggle()},a.$on("$destroy",function(){l&&h.cancel(l)}),a.checkRoleAndAutoRenew=function(){return a.is_project_owner||a.isProjectAdmin()&&a.project_plan&&!a.project_plan.auto},1!==a.PROJECT.plan&&a.isProjectAdmin()&&(k(),m())}]).service("ProjectSummaryService",function(){return{upgrade:function(a,b){a.PROJECT.plan=b,a.service_info&&a.service_info.expired_plan&&(a.service_info.expired_plan=void 0)}}}),angular.module("app").controller("ProjectUpgradeJustRenewalModalCtrl",["$scope","ModalService","ProjectVersions","Common",function(a,b,c,d){a.id=d.uuid();var e=a.upgrade_just_renewal_modal=b.instance("project-upgrade-just-renewal-modal"),f=a.renewal_result_modal=b.instance("project-renewal-result-modal");a.$emit("set.upgrade.just.renewal.modal",e);var g=a.version||"dev";a.upgrade_period=c[g].period,a.upgrade_version=c[g],a.version_description=c[g].description.join(" / "),a.form={period:"month"},a.renewal=function(a){f.toggle()}}]),angular.module("app").controller("PasswordRequiredModalCtrl",["$scope","StandalonePasswordValidateService",function(a,b){a.form={password:""},a.method="password",a.method_message="登录密码",a.confirm=function(b){a.form.password="",b="password"===a.method?SHA1(b||""):b,a.$emit("set.required.password",b),a.$parent.$broadcast("set.required.password",b)},a.$on("required.password.show",function(){b.authMethod(a)})}]),angular.module("app").controller("ProjectUpgradeRenewalModalCtrl",["$scope","ModalService","ProjectVersions","Payment","Flash","Common",function(a,b,c,d,e,f){a.id=f.uuid();var g={username:a.PROJECT.owner_user_name,project_name:a.PROJECT.name},h=a.upgrade_renewal_modal=b.instance("project-upgrade-renewal-modal");a.$emit("set.upgrade.renewal.modal",h),a.$watch("version",function(b){angular.isDefined(b)&&(a.upgrade_period=c[b||"dev"].period);
}),a.$watchCollection("project_plan",function(b){if(angular.isDefined(b)){var d=c.monthToHuman(a.project_plan.month),e=!!a.project_plan.auto;a.form={period:d,renewal:e}}}),a.renewal=function(b){var f=c.humanToData(b);f.plan=a.project_plan.plan;var i=d.updateRenewal(g,f);i.then(function(){h.action("hide"),a.$emit("project.upgrade.renewal.success",f),e.success().send("续费设置更新成功！")})}}]),angular.module("app").controller("ProjectRenewalManuallyModalCtrl",["$scope","ModalService","ProjectVersions","Payment","Common","Flash",function(a,b,c,d,e,f){a.current_versions=c[a.PROJECT.plan],a.version_description=c[a.PROJECT.plan].description.join(" / "),a.insufficient=!1,a.upgrade_periods={dev:c.dev.period,pro:c.pro.period};var g={username:a.PROJECT.owner_user_name,project_name:a.PROJECT.name};a.period=null,a.form={period:"month",voucher:""},a.available_plan=null,a.id=e.uuid(),a.$watchCollection("project_plan",function(b){angular.isDefined(b)&&(a.period=c.monthToHuman(a.project_plan.month))});var h=null,i=a.renewal_manually_modal=b.instance("renewal-manually-modal",{duration:200}),j=a.password_required_modal=b.instance("password-required-modal",{duration:200});a.password_words="项目续费",a.$emit("set.renewal.manually.modal",i),a.$on("set.project.upgrade.modal",function(a,b){h=b,a.preventDefault()}),a.$on("project.charge.success",function(){i.action("show")});var k=function(){if(1!==a.PROJECT.plan&&a.isProjectAdmin()){var b=d.renewal_plan(g);b.then(function(b){a.available_plan=b.data||0})}},l=function(){a.voucher?(a.version_price=a.current_versions.period[a.form.period]-a.voucher.money,a.version_price<0&&(a.version_price+=a.voucher.money,a.voucher=void 0,a.$broadcast("project.voucher.cancel",a.voucher),f.warn().send("代金券金额大于消费金额"))):a.version_price=a.current_versions.period[a.form.period],a.insufficient=a.balance<a.version_price};a.$watchCollection("form",function(){l()}),a.$watch("balance",function(){l()});var m=angular.noop;a.renewalNow=function(){a.insufficient?h.toggle():(j.toggle(),a.$broadcast("required.password.show"),m=function(b){var e=c.humanToData(a.form);a.voucher&&(e=$.extend(e,{voucherCode:a.voucher.code})),e=$.extend(e,{password:b});var h=d.renew(g,e);h.then(function(){j.action("hide"),f.success().send("续费成功"),a.$emit("upgrade.project.success")})})},a.$on("project.voucher.change",function(b,c){a.voucher=c,l()}),a.$on("set.required.password",function(a,b){m(b),a.preventDefault()}),k(),l()}]),angular.module("app").controller("ProjectUpgradeChargeModalCtrl",["$scope","ModalService","Payment","Flash","$window","location","Common",function(a,b,c,d,e,f,g){a.id=g.uuid();var h=!1,i=a.upgrade_charge_modal=b.instance("project-upgrade-charge-modal"),j=a.top_up_modal=b.instance("account-top-up-modal",{closable:!1,onShow:function(){i.action("hide")}});a.$emit("set.project.upgrade.modal",i),a.form={platform:"alipay",price:""};var k=function(){a.form.price=a.insufficient?a.version_price-a.balance:""};a.$watchCollection(function(){return[a.version_price,a.balance,a.insufficient]},function(a){angular.isDefined(a)&&k()}),a.charge=function(a,b){return isNaN(b.price)?(d.fail().send("充值金额有误!"),a.preventDefault(),!1):+b.price<.01?(d.fail().send("充值金额最少为 0.01 元"),a.preventDefault(),!1):+b.price>1e5?(d.fail().send("充值金额最大限额为 10 万元"),a.preventDefault(),!1):(j.action("show"),!0)},a.closeChargeModal=function(){i.action("hide")},a.payError=function(){h=!1,j.action("hide"),f.path("/user/account/payment-history/top-up")},a.paySuccess=function(){h=!0,a.$emit("project.charge.success"),j.action("hide"),f.path("/user/account/payment-history/top-up")},a.$on("$destroy",function(){a.top_up_modal.remove(),a.upgrade_charge_modal.remove()})}]),angular.module("app").controller("ProjectUpgradeProModalCtrl",["$scope","ModalService","ProjectVersions","Payment","Common","Flash",function(a,b,c,d,e,f){a.id=e.uuid();var g={username:a.PROJECT.owner_user_name,project_name:a.PROJECT.name},h=a.upgrade_pro_modal=b.instance("project-upgrade-pro-modal",{duration:200}),i=a.password_required_modal=b.instance("password-required-modal",{duration:200});a.password_words="升级项目为高级版";var j=null;a.form={period:"month",renewal:!0,version:"pro"},a.pro_version=c.pro,a.upgrade_period=c.pro.period,a.version_description=c.pro.description.join(" / "),a.insufficient=!1,a.coupon_popup_opt={className:{popup:"coding help-popup coupon-popup"},position:"bottom right",transition:"slide down",closable:!0,maxSearchDepth:100,on:"hover"},a.$emit("set.upgrade.pro.modal",h),a.$on("set.project.upgrade.modal",function(a,b){j=b,event.preventDefault()}),a.$on("project.charge.success",function(){h.action("show")});var k=function(){a.upgrade_prices&&(a.voucher?(a.version_price=a.upgrade_prices[a.form.period]-a.voucher.money,a.version_price<0&&(a.version_price+=a.voucher.money,a.voucher=void 0,a.$broadcast("project.voucher.cancel",a.voucher),f.warn().send("代金券金额大于消费金额"))):a.version_price=a.upgrade_prices[a.form.period],a.insufficient=a.balance<a.version_price)};a.$watchCollection("form",function(){k()}),a.$watch("balance",function(){k()}),a.$watch("upgrade_prices",function(a){angular.isDefined(a)&&(m(a),k())}),a.voucher=void 0,a.$on("project.voucher.change",function(b,c){a.voucher=c,k()});var l=angular.noop;a.upgrade=function(){if(a.insufficient)j.toggle();else{i.toggle(),a.$broadcast("required.password.show");var b=c[a.form.version];l=function(e){var h=c.humanToData(a.form);a.voucher&&(h=$.extend(h,{voucherCode:a.voucher.code})),h=$.extend(h,{two_factor_code:e});var j=d.upgradePro(g,h);j.then(function(){i.action("hide"),f.success().send("升级 "+b.name+" 成功！"),a.$emit("upgrade.project.success",h.plan)})}}},a.$on("set.required.password",function(a,b){l(b),a.preventDefault()});var m=function(b){var c=null;angular.forEach(b,function(a,b){+a>0&&null===c&&(c=b)}),a.form.period=c}}]).service("PaymentUpgradeService",function(){var a=function(a){return{month:a.upgrade[1],half_year:a.upgrade[6],full_year:a.upgrade[12],remain:a.remain.price>=0?a.remain.price:-1}};return{dataToHuman:a}}),angular.module("app").controller("ProjectUpgradeFormController",["$scope","$route","ProjectVersions","Payment","Flash","ModalService","$location","ProjectSummaryService","Setting",function(a,b,c,d,e,f,g,h,i){var j=a.PROJECT.project_path+"/setting/summary";if(1!==a.PROJECT.plan)return g.path(j),!1;var k=function(){d.balance(function(b){a.balance=+b.data||0})},l=null,m=a.password_required_modal=f.instance("password-required-modal");a.password_words="升级项目",a.$on("set.project.upgrade.modal",function(a,b){l=b,a.preventDefault()}),a.form={version:"dev",period:"month",renewal:a.is_project_owner},a.project_versions=c,a.upgrade_version_desc={dev:c.dev.description.join("<br/>"),pro:c.pro.description.join("<br/>")},a.upgrade_periods={dev:c.dev.period,pro:c.pro.period},a.voucher=void 0;var n=function(b){if(angular.isDefined(b)){var d=c[b.version];a.voucher?(a.version_price=d.period[b.period]-a.voucher.money,a.version_price<0&&(a.version_price+=a.voucher.money,a.voucher=void 0,a.$broadcast("project.voucher.cancel",a.voucher),e.warn().send("代金券金额大于消费金额"))):a.version_price=d.period[b.period],a.insufficient=a.balance<a.version_price}};a.$watchCollection("form",n),a.$watch("balance",function(b){angular.isDefined(b)&&n(a.form)}),a.$on("project.voucher.change",function(b,c){a.voucher=c,n(a.form)});var o=angular.noop;a.upgrade=function(b){var f=c[b.version];a.insufficient?l.toggle():(m.toggle(),a.$broadcast("required.password.show"),o=function(i){var k=$.extend({two_factor_code:i},c.humanToData(b));a.voucher&&(k=$.extend(k,{voucherCode:a.voucher.code}));var l=d.upgrade({username:a.PROJECT.owner_user_name,project_name:a.PROJECT.name},k);l.then(function(){m.action("hide"),e.success().send("升级 "+f.name+" 成功！"),h.upgrade(a,k.plan),g.path(j)}),l["catch"](function(a,b){b&&b.code>0&&b.msg.password&&m.action("show")})})},a.$on("set.required.password",function(a,b){a.currentScope&&a.targetScope&&a.currentScope.$id!==a.targetScope.$id&&(o(b),a.preventDefault())}),a.$on("project.charge.success",function(){b.reload()}),k()}]),angular.module("app").controller("VoucherController",["$scope","$route","Flash","$location","Voucher","Setting",function(a,b,c,d,e,f){a.showVoucher=!1,a.loadingVoucher=!1,a.voucherCode="",a.captchaCode="",e.captcha(function(b){a.showCaptcha=b.data}),a.refreshCaptcha=function(){return a.captcha=f.api_host+"/api/getCaptcha?code="+Math.random()},a.refreshCaptcha();var g=function(){a.showVoucher=!1,a.voucher=void 0,a.voucherCode="",a.$emit("project.voucher.change",angular.copy(a.voucher))};a.showHideVoucher=function(){a.showVoucher=!a.showVoucher},a.submitVoucher=function(b,c,d){a.loadingVoucher=!0,a.captchaCode="",a.refreshCaptcha();var f=e.check({code:b,j_captcha:c});return f.then(function(b){a.voucher=b.data,a.$emit("project.voucher.change",angular.copy(a.voucher))}),f["catch"](function(b,c){903==c.code&&(a.showCaptcha=!0)}),f["finally"](function(){a.loadingVoucher=!1}),d?(d.preventDefault(),!1):void 0},a.unuseVoucher=function(){g()},a.$on("project.voucher.cancel",function(b,c){c||(a.showVoucher=!0,a.voucher=void 0)})}]),angular.module("app").controller("ProjectSupportCtrl",["$scope","Payment","Flash","$location",function(a,b,c,d){var e={username:a.PROJECT.owner_user_name,project_name:a.PROJECT.name};a.ticket={title:"",type:0,content:""},a.type_ticket_field={},a.types=[],a.types_map={},a.creating=!1,a.updateContent=function(b){a.ticket.content=b},a.onTypeChange=function(b,c){a.ticket.type=c};var f=function(){var c=b.ticket_fields(e);c.then(function(b){if(b.data&&b.data.ticket_fields&&angular.isArray(b.data.ticket_fields)){a.type_ticket_field=b.data.ticket_fields[0];var c=a.type_ticket_field.custom_field_options;angular.forEach(c,function(b,d){a.types_map[d+1]=c[d].value,c[d].value=d+1}),a.types=c}})};a.submit=function(){var f={request:{title:a.ticket.title,comment:{content:a.ticket.content},custom_fields:[{name:a.type_ticket_field.name,value:a.types_map[a.ticket.type]}]}};if(!a.ticket.type)return c.fail().send("请选择问题类型"),!1;if(0===a.ticket.title.length)return c.fail().send("工单标题不能为空"),!1;if(0===a.ticket.content.length)return c.fail().send("工单内容不能为空"),!1;a.creating=!0;var g=b.ticket(e,{data:JSON.stringify(f)});g.then(function(){c.success().fail("工单创建成功，我们会及时跟进。");var b=a.PROJECT.project_path+"/setting/support";d.path(b)}),g["finally"](function(){a.creating=!1})},f()}]),angular.module("app").controller("CustomerTicketsCtrl",["$scope","Payment","CustomerTicketService","Pager",function(a,b,c,d){var e={username:a.PROJECT.owner_user_name,project_name:a.PROJECT.name},f=[],g=10;a.tickets=[],a.total_count=0,a.loading=!1,a.loaded=!1,a.ticket_status=c.ticket_status;var h=a.ticket_pager_id="project-ticket-id",i=d.instance(h,a);i.onChange(function(b){k(b),i.optionsReady(j(a.total_count,b))});var j=function(a,b){var c={page:b||1,pageSize:g,totalPage:0===a?0:Math.round(a/g)||1,totalRow:a};return c},k=function(b){var c=(b-1)*g,d=c+g;a.tickets=f.slice(c,d)},l=function(c){a.loading=!0,a.loaded=!1,c=c||1;var d=b.tickets(e,{});d.then(function(b){b.data&&(f=b.data||[],k(c),a.total_count=b.data.length||0,i.optionsReady(j(a.total_count,c)))}),d["finally"](function(){a.loading=!1,a.loaded=!0})};l(i.currentPage())}]).service("CustomerTicketService",function(){return{ticket_status:{"new":"尚未受理",open:"受理中",pending:"等待回复",solved:"已解决",closed:"已关闭"}}}),angular.module("app").controller("ProjectSupportTicketCtrl",["$scope","$routeParams","$location","Payment","Common","CustomerTicketService",function(a,b,c,d,e,f){if(a.ticket_id=b.id||0,a.detail_loading=!1,a.comment_loading=!1,a.ticket=void 0,a.comments=void 0,a.comments_loaded=!1,a.comments_loading=!1,a.ticket_comment="",a.ticket_status=f.ticket_status,isNaN(a.ticket_id)){var g=a.PROJECT.project_path+"/setting/support";return void c.path(g)}var h={username:a.PROJECT.owner_user_name,project_name:a.PROJECT.name},i=function(b){a.detail_loading=!0;var c=$.extend({},{id:b},h),e=d.get_ticket(c,{});return e.then(function(b){if(b.data){var c=b.data.request;a.ticket=c,a.ticket.bak_desc=a.ticket.description,a.ticket.description=void 0,a.owner=a.USER}}),e["finally"](function(){a.detail_loading=!1}),e},j=function(b){var c=$.map(b,function(a){return a.author_id}).join(","),f=$.extend({},{ids:c},h),g=d.users(f,{});g.then(function(c){if(c.data){var d=c.data.users;angular.forEach(b,function(b){var c=e.findOfId(d,b.author_id,"id");b.author=c,0===c.photo.length&&(b.author.photo=a.USER.avatar)})}})},k=function(b,c){a.comments_loaded=!1,a.comments_loading=!0;var e=$.extend({},{id:b},h),f=d.ticket_comments(e,{});f.then(function(b){b.data&&(c.then(function(){a.ticket.child_count=b.data.count>0?b.data.count-1:0}),a.comments=b.data.comments||[],c.then(function(){a.comments.length>0?(a.ticket.description=a.comments[0].html_content,a.comments.splice(0,1)):a.ticket.description=a.ticket.bak_desc}),j(a.comments))}),f["finally"](function(){a.comments_loaded=!0,a.comments_loading=!1})},l=i(a.ticket_id);k(a.ticket_id,l),a.commentTicket=function(b){var c={request:{comment:{content:b}}},e=$.extend({},{id:a.ticket_id},h),f=d.ticket_comment(e,{data:JSON.stringify(c)});return f.then(function(){k(a.ticket_id,l)}),f},a.refreshComments=function(){a.comments=[],k(a.ticket_id,l)}}]),angular.module("app").controller("ProjectWebHookEditController",["$scope","Flash","Project","Depot","$routeParams","$location",function(a,b,c,d,e,f){a.tag_menu="setting",a.inner_menu="hook",a.submit_loading=!1;var g=1,h=2,i=4,j=8,k=16,l=32,m=64,n=128,o=256;a.hook={hook_url:"",token:"",type_push:!0,type_mr_pr:!0,type_topic:!1,type_member:!1,type_comment:!1,type_document:!1,type_watch:!1,type_star:!1,type_task:!1},a.isProjectAdmin||f.path(a.PROJECT.project_path),d.getWebHook({username:e.username,project_name:a.PROJECT.name,id:e.id},function(c){0===c.code?(a.hook.hook_url=c.data.hook_url,a.hook.token=c.data.token,a.hook.type_push=(c.data.send_type&g)==g,a.hook.type_mr_pr=(c.data.send_type&h)==h,a.hook.type_topic=(c.data.send_type&i)==i,a.hook.type_member=(c.data.send_type&j)==j,a.hook.type_comment=(c.data.send_type&k)==k,a.hook.type_document=(c.data.send_type&l)==l,a.hook.type_watch=(c.data.send_type&m)==m,a.hook.type_star=(c.data.send_type&n)==n,a.hook.type_task=(c.data.send_type&o)==o):(b.fail().send("读取失败"),f.path(a.PROJECT.project_path+"/setting/webhook"))}),a.submit=function(c){a.submit_loading=!0,d.editWebHook({username:e.username,project_name:a.PROJECT.name,id:e.id},{hook_url:c.hook_url,token:c.token,type_push:c.type_push,type_mr_pr:c.type_mr_pr,type_topic:c.type_topic,type_member:c.type_member,type_comment:c.type_comment,type_document:c.type_document,type_watch:c.type_watch,type_star:c.type_star,type_task:c.type_task},function(c){b.success().send("修改 WebHook 成功"),a.submit_loading=!1,f.path(a.PROJECT.project_path+"/setting/webhook")})["catch"](function(b,c){a.submit_loading=!1})}}]),angular.module("app").controller("ProjectWebHookIndexController",["$scope","Flash","Project","Depot","$routeParams","$route","$timeout",function(a,b,c,d,e,f,g){a.tag_menu="setting",a.inner_menu="hook",a.isProjectAdmin||$location.path(a.PROJECT.project_path),d.depot({username:e.username,project_name:a.PROJECT.name},function(b){b.data?a.DEPOT=b.data.depot:a.DEPOT=!1}),d.webHooks({username:e.username,project_name:a.PROJECT.name},function(b){a.webHooks=b.data});var h=null,i=function(){d.webHookLogs({username:e.username,project_name:a.PROJECT.name},function(b){a.webHookLogs=b.data,h=g(i,1e4)})};a.$on("$destroy",function(){h&&g.cancel(h)}),i(),a.deleteWebhook=function(c){confirm("请确认删除该 WebHook ?")&&d.deleteWebHook({username:e.username,project_name:a.PROJECT.name,id:c},function(a){b.success().send("删除成功"),f.reload()})},a.testWebhook=function(c){d.testWebHook({username:e.username,project_name:a.PROJECT.name,id:c},{},function(a){b.success().send("已发送，请稍后查收结果。"),f.reload()})}}]),angular.module("app").controller("ProjectWebHookNewController",["$scope","Flash","Project","Depot","$routeParams","$location",function(a,b,c,d,e,f){a.tag_menu="setting",a.inner_menu="hook",a.submit_loading=!1,a.hook={hook_url:"",token:"",type_push:!0,type_mr_pr:!0,type_topic:!1,type_member:!1,type_comment:!1,type_document:!1,type_watch:!1,type_star:!1,type_task:!1},a.isProjectAdmin||f.path(a.PROJECT.project_path),a.submit=function(c){return c.hook_url?c.hook_url.length<8?void b.fail().send("WebHook 地址太短"):c.hook_url.length>128?void b.fail().send("WebHook 地址太长"):c.token.length>128?void b.fail().send("WebHook token 太长"):(a.submit_loading=!0,void d.createWebHook({username:e.username,project_name:a.PROJECT.name},{hook_url:c.hook_url,token:c.token,type_push:c.type_push,type_mr_pr:c.type_mr_pr,type_topic:c.type_topic,type_member:c.type_member,type_comment:c.type_comment,type_document:c.type_document,type_watch:c.type_watch,type_star:c.type_star,type_task:c.type_task},function(c){b.success().send("新建 WebHook 成功"),a.submit_loading=!1,f.path(a.PROJECT.project_path+"/setting/webhook")})["catch"](function(b,c){a.submit_loading=!1})):void b.fail().send("WebHook 地址不能为空")}}]),angular.module("app").controller("StandalonePasswordValidateController",["$scope","StandalonePasswordValidateService",function(a,b){a.method="",a.method_message="",a.two_factor_code="",a.words="这是一个危险操作，需要进行身份验证！",a.confirmed=!1,a.passwordValidate=function(){return 0!==a.two_factor_code.length?(a.confirmed=!0,$("#standalone-password-validate-modal").modal("hide"),!1):void 0},b.onRequire(function(c,d){b.authMethod(a,function(){$("#standalone-password-validate-modal").modal("setting",{duration:200,closable:!1,allowMultiple:!1,onShow:function(){a.two_factor_code="",a.confirmed=!1},onHide:function(){"password"===a.method?b.passwordReady(SHA1(a.two_factor_code),a.confirmed):b.passwordReady(a.two_factor_code,a.confirmed)},onApprove:function(){a.confirmed=!0},onDeny:function(){a.confirmed=!1}}).modal("show")}),d&&d.length>0&&(a.words=d)})}]).service("StandalonePasswordValidateService",["$rootScope","$timeout","TwoFactorAuth",function(a,b,c){var d=700,e=null,f=null,g=null,h=function(b){f&&f(),f=a.$on("on.standalone.password.validate.ready",b)},i=function(c,f){b(function(){a.$broadcast("on.standalone.password.validate.ready",c,f,e)},d)},j=function(c,f,g){e=f,d=g||700,b(function(){a.$broadcast("on.standalone.password.required",c)},d)},k=function(b){g&&g(),g=a.$on("on.standalone.password.required",b)},l=function(a,b){var d=c.method({},{});return d.then(function(c){a.method=c.data,"password"===a.method?a.method_message="登录密码":"totp"===a.method?a.method_message="两步验证码":"phone"===a.method&&(a.method_message="手机验证码"),b&&b()}),d};return{onPasswordReady:h,passwordReady:i,require:j,onRequire:k,authMethod:l,TYPES:{DELETE_PROJECT:"delete-project",TRANSFER_PROJECT:"transfer-project",DELETE_SSH_KEY:"delete-ssh-key",ADD_SSH_KEY:"add-ssh-key",ADD_DEPLOY_SSH_KEY:"add-deploy-key",DELETE_DEPLOY_SSH_KEY:"delete-deploy-key",BIND_DEPLOY_SSH_KEY:"bind-deploy-key",UNBIND_DEPLOY_SSH_KEY:"unbind-deploy-key",DELETE_PAAS:"delete-paas",DELETE_PAAS_SERVICE:"delete-paas-service",ARCHIVE_PROJECT:"archive_project",TEAM_MEMBER_REMOVE:"team_member_remove",TEAM_TRANSFER:"team_transfer",TEAM_DISMISS:"team_dismiss",TEAM_QUIT:"team_quit",TEAM_ARCHIVE_PROJECT:"team_archive_project",TEAM_EXPORT_PROJECT:"team_export_project",TEAM_DELETE_PROJECT:"team_delete_project",TEAM_IMPORT_PROJECT:"team_import_project",RESET_REPO:"reset_repo"}}}]),angular.module("app").controller("TaskDetailController",["$scope","$rootScope","TaskDetailService","TaskListService","$timeout","TaskItemService","Task","location","Flash","Activity","Common","$routeParams","PageTitle",function(a,b,c,d,e,f,g,h,i,j,k,l,m){a.task=null,a.activities=[],a.loading=!1,a.loading_activity=!1,a.loading_watchers=!1,a.members=[],a.watchers=[],a.just_show_comment=!!l.show_comment||!!h.path().match(/\S.*\/comment/)||!1,a.edit_desc=l.edit_desc||!1;var n=[],o=function(c){a.loading=!0;var d=f.projectParams(b.PROJECT);d=angular.extend(d,{id:c});var i=g.query(d);i.then(function(c){a.task=c.data,a.task.content=k.revertHtml(a.task.content),a.task.add_description=a.edit_desc,e(function(){b.$broadcast("project.task.description.editor.focus")}),a.edit_desc&&h.skipReload().search("edit_desc",void 0).replace(),q(a.task)}),i["catch"](function(a,b){if(b&&1600===b.code){var c=["/u/",d.username,"/p/",d.project_name,"/tasks"].join("");h.path(c).replace()}}),i["finally"](function(){a.loading=!1}),v(c);var j=r(c);j["finally"](function(){s(c)})},p=function(b){a.members=b},q=function(b){var c="任务 - "+k.ellipsisString(a.task.content,20)+" - Coding.net";m.set(c)};a.cgPageScroll={namespace:"task-comment"};var r=function(c,d){a.loading_activity=!0;var f=j.task({id:c,last_id:d||999999999});return f.then(function(c){var d=k.removeNullItem(c.data||[],"id");a.activities=k.squashActivity(d,6e4),e(function(){b.$broadcast("markdown.load.success."+a.cgPageScroll.namespace)},300)}),f["finally"](function(){a.loading_activity=!1}),f},s=function(c){var d=f.projectParams(b.PROJECT),e=g.getCurrentHistoryId(angular.extend(d,{task_id:c}));e.then(function(b){0===b.code&&(a.task.history_id=b.data)})},t=["update.status","update.owner","update.priority","update.content","update.deadline","update.description","tag.remove","tag.add","watcher.add","watcher.remove"];angular.forEach(t,function(a){var b=f.onProjectTaskSignal(a,function(a,b){r(b.id)});n.push(b)}),n.push(f.onProjectTaskSignal("remove",function(){var c=[b.PROJECT.project_path,"tasks/user",a.task.owner.global_key,"all"].join("/");h.path(c),i.success().send("任务删除成功！")})),n.push(f.onProjectTaskSignal("update.content",function(a,b){q(b)})),d.parentWatch(a,["task_id","members"],[o,p]),a.onComment=function(b){var c=a.task,d=g.comment({id:c.id},{content:b});return d.then(function(){r(c.id),a.task.comments+=1,a.$broadcast("task.detail.change",c)}),d},a.onRemove=function(){r(a.task.id),a.task.comments-=1},a.toggleTaskDetailUrl=function(){var c=!a.just_show_comment,d=[b.PROJECT.project_path,"task",a.task.id,c?"comment":""].join("/");return a.just_show_comment=c,h.skipReload().path(d),!1},a.showActivity=function(b){return"TaskComment"===b.target_type&&a.just_show_comment||!a.just_show_comment};var u={username:a.PROJECT.owner_user_name,project_name:a.PROJECT.name};a.onTagRemove=function(b){var c=g.removeTaskTag($.extend({task:a.task.id,label:b.id},u),{});return c.then(function(){f.sendProjectTaskSignal("tag.remove",a.task)}),c},a.onTagAdd=function(b){var c=g.addTaskTag($.extend({task:a.task.id,label:b.id},u),{});return c.then(function(){f.sendProjectTaskSignal("tag.add",a.task)}),c},a.onTagCreate=function(b){if(b.color&&b.name){var c=g.addTag(u,{name:b.name,color:b.color});return c.then(function(c){var d=c.data;b.id=d,a.$emit("project.tag.create",b)}),c}},a.onDetailTagSelect=function(b){h.path(a.task.project.project_path+"/tasks/label/"+b.id)},a.checkIconClass=function(a){return{"checkmark sign done":a,"empty checkbox processing":!a}},a.$on("project.task.tag.selected",function(b,c){h.path(a.task.project.project_path+"/tasks/label/"+c.id)}),a.$on("task.detail.description.change",function(b,c){a.$broadcast("task.detail.change",c),s(c.id)}),a.$on("task.detail.description.load.history",function(b,c){a.$broadcast("task.detail.description.show.history",c)});var v=function(b){a.loading_watchers=!0;var c=g.watchers($.extend({task:b,pageSize:1e3},u));c.then(function(b){a.watchers=b.data&&b.data.list||[]}),c["finally"](function(){a.loading_watchers=!1})},w=["watch","owner"];angular.forEach(w,function(a){var b=f.onProjectTaskSignal("update."+a,function(a,b){v(b.id)});n.push(b)}),a.$on("$destroy",function(){n.map(function(a){angular.isFunction(a)&&a()})})}]).service("TaskDetailService",[function(){}]),angular.module("app").controller("TaskDetailMenuController",["$scope","TaskUrgencyService","Common","TaskItemService","Task",function(a,b,c,d,e){a.priorities=b.priorities,a.form=void 0;var f={owner:function(b){a.task.owner=angular.copy(b)},urgency:function(b){var c=b.value;a.task.priority=c},deadline:function(b){var c=b.form_value||void 0;a.task.deadline=c}};a.$on("task.detail.select",function(b,d){var e=d.name;a.form[e]=d.value,c.smartSwitch(f,e,d.value)}),a.addWatcher=function(b){return e.watch({id:a.task.id,global_key:b.global_key},{}).then(function(){d.sendProjectTaskSignal("watcher.add",a.task)})},a.removeWatcher=function(b){var c=e.removeWatch({id:a.task.id,global_key:b.global_key});return c.then(function(){d.sendProjectTaskSignal("watcher.remove",a.task)}),c},a.removeTask=function(b){if(!a.updating&&confirm("确认删除该任务？")){a.updating=!0;var c=d.projectParams(b.project);c=angular.extend(c,{id:b.id});var f=e["delete"](c);f.then(function(){d.sendProjectTaskSignal("remove",b),a.updating=!1}),f["catch"](function(){a.updating=!1})}};var g=a.$watch("task",function(b){angular.isObject(b)&&(a.form={project:b.project,owner:b.owner,urgency:{value:b.priority,text:a.priorities[b.priority]},deadline:b.deadline,labels:b.labels},a.task_copy=angular.copy(b),g&&g())})}]),angular.module("app").controller("ProjectTaskEditTagController",["$scope","Task","Common","$rootScope","$routeParams","TagDropdownService",function(a,b,c,d,e,f){var g=a.project_params;a.searchTags="",a.new_tag={name:"",color:f.randomColor(),saving:!1},a.tag_editable=[],a.task_label_id=e.user||void 0,a.just_show=!isNaN(a.task_label_id),a.show_add_tag=!1,a.$on("project.task.tag.selected",function(b,c){a.task_label_id=c.id}),a.$on("load.task.list",function(){a.task_label_id=null}),a.toggleAddTag=function(){a.show_add_tag=!a.show_add_tag},a.toggleShowTags=function(b){return a.just_show=!a.just_show,b.stopPropagation(),!1},a.enableTagEditable=function(b,c){return a.tag_editable[b]=!0,c.stopPropagation(),!1},a.disableTagEditable=function(b,c){a.tag_editable[b]=!1,c.stopPropagation(),angular.forEach(a.tags,function(a){a.name!==a.copy.name&&a.copy.name&&(a.name=a.copy.name),a.color!==a.copy.color&&a.copy.color&&(a.color=a.copy.color)})},a.tagName=function(a){return a.name+(a.count?" ("+a.processing+"/"+a.count+")":"")},a.tagActive=function(){return a.task_label_id&&!isNaN(a.task_label_id)&&!a.just_show&&!a.tag_editable};var h=function(b){var c={name:b.name,color:b.color,id:b.id,owner_id:b.owner_id||a.USER.id};c.copy=angular.copy(c),a.tags.push(c)};d.$on("project.tag.create",function(a,b){h(b)}),a.addTaskTag=function(c){if(c.color&&c.name){c.saving=!0;var e=b.addTag(g,{name:c.name,color:c.color});e.then(function(b){var e=b.data;c.id=e,d.$broadcast("project.tag.add",c),a.$emit("project.tag.add",c),h(c,e),c.name="",c.color=f.randomColor()}),e["finally"](function(){c.saving=!1})}},a.removeTag=function(e,f){if(f.stopPropagation(),!confirm("确认删除标签 "+e.name+" ?"))return!1;e.updating=!0;var h=b.delTag($.extend({id:e.id},g));h.then(function(){a.tags=c.removeOfId(a.tags,e.id),d.$broadcast("project.tag.remove",e),a.$emit("project.tag.removed",e)}),h["finally"](function(){e.updating=!1})},a.updateTag=function(e){e.updating=!0;var f=b.updateTag($.extend({id:e.id},g),{name:e.reverted_name,color:e.color});f.then(function(){e.name=c.html(e.reverted_name),e.copy.name=e.name,e.copy.color=e.color,d.$broadcast("project.tag.updated",e),a.$broadcast("project.tag.updated",e)}),f["catch"](function(){e.name=e.copy.name,e.color=e.copy.color}),f["finally"](function(){a.tag_editable[e.id]=!1,e.updating=!1})},a.onColorChange=function(b){a.updateTag(b)},a.selectTag=function(a){d.$broadcast("project.task.tag.selected",a)},a.can_remove_tag={},a.can_edit=!1,a.$watch("members",function(b){angular.isDefined(b)&&angular.forEach(b,function(b){b.user_id===a.USER.id&&(a.can_edit=!0)})}),a.$watchCollection("tags",function(a){angular.isDefined(a)&&angular.forEach(a,function(a){a.reverted_name=c.revertHtml(a.name)})})}]),angular.module("app").controller("TaskListController",["$scope","$rootScope","$routeParams","Project","User","location","Task","Errors","Pager","PageTitle","Common","TaskItemService","TaskListService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=a.USER,o=a.PROJECT,p=[];a.current_project=o;var q=["inner_menu","task_user","user_task_status","username"];m.parentWatch(a,q),a.task_user=c.user?c.user:n.global_key,a.task_user_for_load=c.user,a.task_header_title="",a.task_user_name_map=null,a.tasks_total_count=0,a.task={},a.tasks=[],a.tasks_loading=!1,a.tasks_loaded=!1,a.sort_order="0";var r=a.task_pager_id=(new Date).getTime();a.taskPagerOptions=!1,i=i.instance(r,a);var s=i.onChange();s.then(null,null,function(b){"label"===a.inner_menu?a.loadTasksOfTag(a.task_label_id,"all",b):a.loadTasks(a.inner_menu||"user",a.task_user,a.user_task_status,b)});var t={all:"所有任务",processing:"进行中任务",done:"已完成任务",watch:"我关注的",create:"我创建的",label:"标签"},u=t.label+"：",v=function(a,b,c){var d={processing:"进行中的任务",done:"已完成的任务",watch:"我关注的",create:"我创建的",label:function(){return"任务标签"}(),user:function(){return c+"的任务"}()},e=d[b]||"项目任务";j.set(e,a,"Coding.net")},w=function(b){return angular.isDefined(b)&&b.length>0&&a.task_header_title.indexOf(u)<0},x=function(b){var c=a.task_user_name_map?a.task_user_name_map[a.task_user]:a.task_user;if("label"===a.inner_menu){if(a.task_header_title=t.label,w(a.tags)||b){var d=k.findOfId(a.tags,a.task_label_id);a.task_header_title=u+d.name}}else a.task_header_title=t[a.inner_menu]||c+" 的任务";v(o&&o.name||"",a.inner_menu,c)};a.$watch("tags",function(b){if(w(b)&&a.task_label_id>0){var c=k.findOfId(a.tags,a.task_label_id);a.task_header_title=u+c.name}}),a.$on("project.tag.updated",function(a,b){x(!0)}),a.$parent.$watch("task_user_name_map",function(b){b&&(a.task_user_name_map=b,a.task_user&&isNaN(a.task_user)&&v(o.name,a.inner_menu,b[a.task_user]))}),a.changeOwnerStatus=function(b){a.loadTasks(a.inner_menu,a.task_user,b)},a.changeSortOrder=function(b){a.sort_order=b,"label"===a.inner_menu?a.loadTasksOfTag(a.task_label_id,"all",i.currentPage()):"user"===a.inner_menu?a.loadTasks(a.inner_menu,a.task_user,a.user_task_status,i.currentPage()):"undefined"==a.inner_menu||null==a.inner_menu?a.loadTasks("all",null,a.user_task_status,i.currentPage()):a.loadTasks(a.inner_menu,a.task_user,a.user_task_status,i.currentPage())},a.loadTasks=function(b,c,d,h){if(!a.tasks_loading){a.tasks_loading=!0,a.tasks_loaded=!1,a.tasks=[];var j=function(b){i.optionsReady(b.data),a.tasks_loading=!1,a.tasks_loaded=!0,a.tasks=b.data.list||[],angular.forEach(a.tasks,function(a){a.content=k.revertHtml(a.content)}),a.tasks_total_count=b.data?b.data.totalRow:0,m.changeCount("index",a.tasks_total_count)},l=null;"user"!=b?(l=g.list({username:a.username,project_name:o.name,status:b,page:h||1,orderRule:a.sort_order},j),a.task.owner=n):(l=g.listOfOwner({username:a.username,project_name:o.name,owner:c,status:d||"all",page:h||1,orderRule:a.sort_order},j),c===n.global_key?a.task.owner=angular.copy(n):e.byKey({key:c},function(b){0==b.code&&(a.task.owner=b.data)})),l["catch"](function(a,b){if(b&&(1102===b.code||1115===b.code)){var c=[o.project_path,"/tasks"].join("");f.path(c)}}),a.inner_menu=b,a.task_user=c||"",a.user_task_status=d,x()}},a.loadTasksOfTag=function(b,c,d){a.tasks_loading=!0,a.tasks_loaded=!1,a.tasks=[];var e=g.listOfTag($.extend({label:b,status:c||"all",page:d||1,orderRule:a.sort_order},a.project_params));e.then(function(c){i.optionsReady(c.data),a.tasks=c.data.list||[],angular.forEach(a.tasks,function(a){a.content=k.revertHtml(a.content)}),a.tasks_total_count=c.data?c.data.totalRow:0,m.changeCount("index",a.tasks_total_count),x(!0),f.skipReload().path(a.PROJECT.project_path+"/tasks/label/"+b)}),e["finally"](function(){a.tasks_loading=!1,a.tasks_loaded=!0})},a.$on("load.task.list",function(b,c,d,e,f){a.loadTasks(c,d,e,f)}),a.$on("project.task.tag.selected",function(b,c){a.loadTasksOfTag(c.id,"all")}),angular.forEach(["remove","add"],function(b){var c=l.onProjectTaskSignal(b,function(c,d){"remove"===b?a.tasks=k.removeOfId(a.tasks,d.id):"add"===b&&d.project_id===o.id&&k.prepend(a.tasks,d)});p.push(c)}),m.onCountChange("list",function(b,c){a.tasks_total_count=c}),"label"===a.inner_menu?a.loadTasksOfTag(a.task_label_id,"all",i.currentPage()):"user"===a.inner_menu?a.loadTasks(a.inner_menu,a.task_user,a.user_task_status,i.currentPage()):(a.inner_menu||a.loadTasks("user",a.task_user,a.user_task_status,i.currentPage()),
a.loadTasks(a.inner_menu,null,a.user_task_status,i.currentPage())),x(),a.$on("$destroy",function(){p.map(function(a){angular.isFunction(a)&&a()})}),a.show_modal=void 0,a.toggleModal=function(){a.show_modal=!a.show_modal},a.onModalClose=function(){}}]).service("TaskListService",["$rootScope",function(a){var b=function(a,b,d){a&&a.$parent&&a.$parent.$watch&&(a.removeParentWatchers=[],angular.forEach(b||[],function(b,c){var e=a.$parent.$watch(b,function(e){a[b]=e;var f=(d||[])[c];"undefined"!=typeof e&&f&&f(e)});a.removeParentWatchers.push(e)}),a.$on("$destroy",function(){c(a)}))},c=function(a){angular.forEach(a.removeParentWatchers||[],function(a){a&&a()})},d=function(b,c){a.$on("project.task.count.change."+b,c)},e=function(b,c){a.$broadcast("project.task.count.change."+b,c)};return{parentWatch:b,onCountChange:d,changeCount:e}}]),angular.module("app").controller("CreateTaskModalController",["$scope","Task","ipCookie","TaskUrgencyService","Common","Flash","$rootScope","TaskItemService","TaskCreateModalService",function(a,b,c,d,e,f,g,h,i){a.priorities=d.priorities;var j={content:"",description:"",urgency:{value:1,text:a.priorities[1]},deadline:"",labels:[],watchers:[]};a.form=_.extend({project:null,owner:null},angular.copy(j));var k=a.USER;a.projects=[],a.labelsOfProject={},a.membersOfProject={},a.creating=!1,a.supplies_loading=!1,a.loadCreatingSupplies=function(){var c=b.creating();return a.supplies_loading=!0,c.then(function(b){var c=b.data.project||[],d=b.data.member||[],e=b.data.label||[];for(var f in c){var g=c[f],h=_.filter(d,{project_id:g.id});a.membersOfProject[g.id]=h||[];var i=_.filter(e,{project_id:g.id});a.labelsOfProject[g.id]=i||[]}a.projects=c,k=a.USER}),c["finally"](function(){a.supplies_loading=!1}),c};var l=null,m=!1;$("#create-task-modal").modal("setting",{duration:100,onHide:function(){return m=!0,!1},onShow:function(){return a.projects&&a.projects.length>0?void t(g.PROJECT):(l=a.loadCreatingSupplies(),void l.then(function(){t(g.PROJECT)}))},closable:!1});var n=function(){a.creating=!1,a.supplies_loading=!1},o=function(){var b=angular.copy(a.form.project);l=a.loadCreatingSupplies(),l.then(function(){a.$broadcast("create.task.modal.refresh",b||a.form.project)})},p=["project_member.add","project_member.remove","project.create","project.remove","project.transfer","project.quit","project.tag.add","project.tag.removed","project.tag.updated","project.archive"];p.map(function(a){g.$on(a,o)}),a.$on("create.task.select",function(b,c){var d=c.name;a.form[d]=c.value});var q=function(b){var c=_.filter(a.projects,{id:b}),d=_.filter(a.membersOfProject[b],{user_id:i.getOwnerId()}),e=d&&d[0]?d[0].user:angular.copy(k);e.initial=!0,a.form.project=c&&c[0]?c[0]:a.projects[0],a.form.owner=e},r=function(a){l&&l.then(function(){q(a)})},s=angular.noop;a.onDescriptionChange=function(b,c){a.form.description=b,s=c};var t=function(b){if(b)angular.isDefined(b)&&r(b.id);else{var c=i.getProjectId();c?r(c):l&&l.then(function(){q(a.projects[0].id)})}},u=function(a){return a.project?a.owner?a.content?!0:(f.fail().send("请添加任务内容！"),!1):(f.fail().send("请选择一个任务执行者！"),!1):(f.fail().send("请选择一个私有项目！"),!1)};a.hideModal=function(){$("#create-task-modal").modal("hide")},a.onSubmit=function(){return a.createTask()},a.createTask=function(){var c=angular.copy(a.form),d={};if(u(c)&&!a.creating){a.creating=!0,d.owner_id=c.owner.id,d.priority=c.urgency&&c.urgency.value||1,d.content=c.content,d.description=c.description,d.deadline=c.deadline&&c.deadline.form_value||"",d.labels=c.labels&&c.labels.map(function(a){return a.id}).join(",")||"",d.watchers=c.watchers&&c.watchers.map(function(a){return a.id}).join(",")||"";var g=e.projectParams(c.project),k=b.create(g,d);return k.then(function(b){s(!0);var d=b.data;d.content=e.revertHtml(d.content),h.sendProjectTaskSignal("add",d),a.form=_.extend(a.form,j),a.form.labels=[],a.form.watchers=[],a.$broadcast("project.task.create.clear");var g=["/u/",c.project.owner_user_name,"/p/",c.project.name,"/task/",d.id].join(""),k=['<a href="',g,'">',"任务 #"+d.number+" 创建成功，点击查看任务！","</a>"].join("");f.success().send(k),i.setProjectId(a.form.project&&a.form.project.id),i.setOwnerId(a.form.owner&&a.form.owner.id),a.hideModal(),n()}),k["catch"](function(){s(!1)}),k["finally"](function(){a.creating=!1}),k}}}]).service("TaskCreateModalService",["ipCookie",function(a){var b="last-create-task-project",c="last-create-task-owner";return{setProjectId:function(c){return a(b,c,{path:"/"})},getProjectId:function(){return a(b)},setOwnerId:function(b){return a(c,b,{path:"/"})},getOwnerId:function(){return a(c)}}}]),angular.module("app").controller("TaskDetailSelectLabelController",["$scope",function(a){a.labels=null;var b=function(b){b&&a.labelsOfProject&&(a.labels=a.labelsOfProject[b.id],a.form.labels=[])};a.$watch("form.project",b),a.$on("task.detail.modal.refresh",function(a,c){b(c)})}]),angular.module("app").controller("TaskDetailSelectMemberController",["$scope",function(a){var b="owner";a.owner=void 0,a.$watch("form.owner",function(b){(angular.isUndefined(a.owner)||b&&b.id!==a.owner.id)&&(a.owner=angular.copy(b))}),a.selectMember=function(c){a.$emit("task.detail.select",{name:b,value:c})},a.$watch("owner",function(b){b&&a.form.owner&&b.id!==a.form.owner.id&&a.selectMember(b)})}]),angular.module("app").controller("TaskDetailSelectProjectController",["$scope",function(a){var b="project";a.selectProject=function(c){a.$emit("task.detail.select",{name:b,value:c})}}]),angular.module("app").controller("TaskDetailSelectUrgencyController",["$scope","TaskUrgencyService",function(a,b){var c="urgency";a.selectUrgency=function(b){a.$emit("task.detail.select",{name:c,value:{value:b,text:a.priorities[b]}})}}]),angular.module("app").controller("CreateTaskSelectDeadlineController",["$scope",function(a){var b="deadline";a.task={deadline:""},a.onDeadlineChange=function(c){c.form_value=a.task.deadline,a.$emit("create.task.select",{name:b,value:c})},a.$on("project.task.create.clear",function(){a.task.deadline=""})}]),angular.module("app").controller("CreateTaskSelectLabelController",["$scope","$q","$timeout","Common","TopicTagEditorService",function(a,b,c,d,e){a.labels=null;var f=function(b){b&&a.labelsOfProject&&(a.labels=a.labelsOfProject[b.id],a.form.labels=[])};a.$watch("form.project",f),a.$on("create.task.modal.refresh",function(a,b){f(b)});var g=function(a){var d=b.defer();return c(function(){a&&a(),d.resolve()}),d.promise};a.onTagAdd=function(b){return g(function(){b&&a.form.labels.push(b)})},a.onTagRemove=function(b){return g(function(){b&&(a.form.labels=d.removeOfId(a.form.labels,b.id))})},a.onTagCreate=function(b){return a.labels&&a.labels.push(b),e.onTagCreate(a.form.project,this,b)}}]),angular.module("app").controller("CreateTaskSelectMemberController",["$scope",function(a){var b="owner";a.members=[];var c=function(c){if(c&&a.membersOfProject){var d=a.form[b];a.members=a.membersOfProject[c.id],d&&!d.initial&&(a.form[b]=null,d=null),a.members.length>=1&&a.$emit("create.task.select",{name:b,value:d||a.members[0].user})}};a.$watch("form.project",c),a.$on("create.task.modal.refresh",function(a,b){c(b)}),a.selectMember=function(c){a.$emit("create.task.select",{name:b,value:c.user})}}]),angular.module("app").controller("CreateTaskSelectProjectController",["$scope",function(a){var b="project";a.selectProject=function(c){a.$emit("create.task.select",{name:b,value:c})}}]),angular.module("app").controller("CreateTaskSelectUrgencyController",["$scope","TaskUrgencyService",function(a,b){var c="urgency";a.selectUrgency=function(b){a.$emit("create.task.select",{name:c,value:{value:b,text:a.priorities[b]}})}}]),angular.module("app").controller("CreateTaskSelectWatcherController",["$scope","Common","$q",function(a,b,c){var d="watchers";a.watchers=[],a.members=[];var e=function(b){b&&a.membersOfProject&&(a.members=a.membersOfProject[b.id],a.watchers=[])};a.$watch("form.project",e),a.addWatcher=function(e){var f=c.defer(),g=b.findOfId(a.watchers,e.id);return g||a.watchers.push(e),a.$emit("create.task.select",{name:d,value:a.watchers}),f.resolve({data:!0}),f.promise},a.removeWatcher=function(e){var f=c.defer();return a.watchers=b.removeOfId(a.watchers,e.id),a.$emit("create.task.select",{name:d,value:a.watchers}),f.resolve({data:!0}),f.promise}}]),angular.module("app").controller("InsertImageController",["$scope","$rootScope",function(a,b){a.PROJECT;a.insertImages=function(a){b.$broadcast("on.project.image.insert",a)}}]),angular.module("app").controller("ProjectTweetController",["$scope","$rootScope","Tweet","location","Common","$filter","BubbleCommentFormService","Flash",function(a,b,c,d,e,f,g,h){function i(){Number(d.search().pp)?(k(),a.one=!0):(j(),a.one=!1)}function j(b,d){a.loading=!0;var e=c.project_tweets({project_id:m.id,last_id:b},function(b){return 0===b.code?angular.isFunction(d)?void d(b.data):void(a.tweets=l(b.data)):void 0});e["finally"](function(){a.loading=!1})}function k(){var b=Number(d.search().pp);if(b){a.loading=!0;var e=c.project_tweet({project_id:m.id,tweet_id:b},function(b){0===b.code&&(a.tweets=l([b.data]))});e["finally"](function(){a.loading=!1})}}function l(a){return angular.forEach(a,function(a,b){a.content=f("restyleMarkDownImage")(a.content),a.content=f("restyleEmoji")(a.content)}),a}var m=(b.USER,b.PROJECT);a.PAGE_SIZE=20,a.show_more=!0,a.tweets=[],a.one=!1,a.loading=!0,a.feed_editor_config={content:""},a.rand=e.uuid,i();var n=b.$on("$locationChangeStart",function(){i()});a.$on("$destroy",function(){n(),o()}),a.refresh=function(){a.loading||(a.tweets=[],i())},a.more=function(b){j(b,function(b){b&&b.length<a.PAGE_SIZE&&(a.show_more=!1);for(var c=0,d=b.length;d>c;c++)a.tweets.push(b[c])})};var o=a.$on("feed.editor.submit",function(b,d,e){e.pending();var f=c.project_tweet_create({project_id:m.id},{content:a.feed_editor_config.content},function(b){0===b.code&&(a.tweets.unshift(b.data),a.feed_editor_config.content="",h.success().send("发表成功"),e.done())});f["catch"](function(){e.error()})});a["delete"]=function(b){if(confirm("确认删除该泡泡?")){c.project_tweet_delete({project_id:m.id,tweet_id:b.id},function(c){if(0===c.code){var d=e.findIndex(a.tweets,b,"_id");a.tweets.splice(d,1)}})}},a.comment=function(a){if(!a.sending){a.sending=!0;var b=c.project_tweet_comment({project_id:m.id,tweet_id:a.id},{content:a.comment_content},function(b){0===b.code&&(a.comment_list.unshift(b.data),a.comments++,a.comment_content="")});b["finally"](function(){a.sending=!1})}},a.deleteComment=function(a,b){if(confirm("确认删除该评论?")){c.project_tweet_comment_delete({project_id:m.id,tweet_id:a.tweet_id,id:a.id},function(c){if(0===c.code){var d=e.findIndex(b.comment_list,a,"_id");b.comment_list.splice(d,1),b.comments=--b.comments||0}})}},a.reply=function(a,b,c){b.comment_content=g.atPerson("",b.comment_content,a.owner.name),$(c.target).closest(".tweet-item").find(".tweet-comment-input").focus()},a.comments=function(a){if(!a.commentLoading||a.commentMore){a.commentLoading=!0;var b=c.project_tweet_comments({project_id:m.id,tweet_id:a.id,last_id:a.comment_list[a.comment_list.length-1].id},function(b){if(0===b.code){a.commentMore=!1;for(var c=0,d=b.data.length;d>c;c++)a.comment_list.push(b.data[c])}});b["finally"](function(){a.commentLoading=!1})}},a.detail=function(a){a.id&&d.search("pp",a.id)},a.back=function(){d.search("pp",void 0)}}]),angular.module("app").controller("TweetFeedEditController",["$scope","$localStorage","$rootScope","Tweet","Errors","Flash","TweetTopic",function(a,b,c,d,e,f,g){a.topics=c.tweetPop.default_topics,a.placeholder=c.tweetPop.placeholder,console.log(a.placeholder),a.feedEditor=void 0;var h=function(b){return a.tweets.splice(0,0,angular.extend(b,{comment_list:[],like_users:[],owner:c.USER}))};a.feed_editor_config={content:b.tweet_message||""},a.$watch("feed_editor_config.content",function(a){b.tweet_message=a});var i=function(){g.default_topics(function(b){c.tweetPop.default_topics=b.data||[],a.topics=c.tweetPop.default_topics})};a.$on("feed.editor.submit",function(a,b,c){if(a.stopPropagation(),c.pending(),$.isEmptyObject(b))return void c.error();var e=d.create({content:b},function(a){c.done();var b=a.data;h(b),f.success().send("发表成功")});e["catch"](function(){c.error()})}),i()}]),angular.module("app").controller("AccountAboutController",["$scope","AccountAboutService",function(a,b){b.getPhotoBy().then(function(b){a.photo_by=b})}]).service("AccountAboutService",[function(){var a=["http://eput.com/sima","http://eput.com/bagedar","http://eput.com/bagedar","http://eput.com/yisheng","http://eput.com/panpanvision","http://eput.com/hxwjja","http://eput.com/helentang","http://eput.com/zhouzhi","http://eput.com/kevinmark3","http://eput.com/oasis","http://eput.com/stanleychen","http://eput.com/Thomasfan"];return{setPhotoBy:function(a){this.photo_by=a},getPhotoBy:function(){return this.photo_by},photoBy:function(b){return a[b-1]}}}]),angular.module("app").controller("PhoneCodeCaptchaModalCtrl",["$scope","Setting","$timeout",function(a,b,c){a.$modal,a.setting={},a.captcha=b.api_host+"/api/getCaptcha?code="+Math.random(),a.refreshCaptcha=function(){c(function(){a.captcha=b.api_host+"/api/getCaptcha?code="+Math.random()},100)},a.$on("phone.code.captcha.modal.show",function(){a.$modal.modal("show"),a.refreshCaptcha(),a.j_captcha=""}),a.$on("phone.code.captcha.modal.hide",function(){a.$modal.modal("hide")}),a.submitCaptcha=function(){""!==a.j_captcha&&a.$emit("phone.code.captcha.modal.validate",a.j_captcha)},a.$on("$destroy",function(){a.$modal.remove()})}]),angular.module("app").service("RegisterService",["Setting","User","Common",function(a,b,c){var d=["hotmail.com","outlook.com","live.cn","live.com"],e=function(a,d){if(!a||a.length<3)return void(d&&d("个性后缀至少为3位字符"));if(a.length>32)return void(d&&d("个性后缀不能超过32位字符"));if(!c.isGlobalKey(a))return void(d&&d("个性后缀（32位）须以字母开头，且只能包含字母、数字、横线及下划线"));if(/^\d{11}$/.test(a))return void(d&&d("个性后缀不支持连续 11 位数字"));var e=b.check({key:a});e.then(function(a){a.data?d&&d(!1):d&&d("个性后缀已存在")}),e["catch"](function(){return d&&d("个性后缀已存在"),!1})},f=c.isEmail,g=function(a){var b=a.split("@")[1];return d.indexOf(b)>=0},h=c.isMagicEmail,i=c.isCode,j=function(a,c){if(!f(a))return void(c&&c([1,"邮件格式错误"]));var d=b.check({key:a});d.then(function(b){return b.data?void(g(a)?c&&c([3,"该邮箱可能接收不到邮件，建议改用其他邮箱"]):c&&c(!1)):void(c&&c([2,"邮箱已被注册"]))}),d["catch"](function(){return c&&c([2,"邮箱已被注册"]),!1})},k=function(a,c,d,e){if(!a)return void(d&&d([3,"手机不能为空"]));if(e)return void(d&&d(!1));var f=b.check_phone({phone:a,isoCode:c});f.then(function(a){a.data?d&&d(!1):d&&d([2,"手机已被注册"])}),f["catch"](function(a,b){return 1033===b.code?d&&d([3,"手机号码错误"]):d&&d([2,"手机已被注册"]),!1})},l=function(a,b){i(a)?b&&b(!1):b&&b([1,"手机验证码错误"])},m=function(a,b){/^[\d\s]*$/.test(a)&&6==a.replace(/\s/g,"").length?b&&b(!1):b&&b("请输入 6 位纯数字")},n=function(a,b){return a?a.length<6?void(b&&b("密码太短")):a.length>64?void(b&&b("密码太长")):void(b&&b(!1)):void(b&&b("密码不能为空"))},o=function(a,b,c){a!=b?c&&c("两次输入密码不一致"):c&&c(!1)},p=function(){var b=(new Date).getTime();return a.api_host+"/api/getCaptcha?code="+b};return{checkGlobalKeyIllegal:e,checkEmailIllegal:j,checkPhoneIllegal:k,checkCodeIllegal:l,checkTwofaCodeIllegal:m,checkPasswordIllegal:n,checkConfirmIllegal:o,refreshCaptcha:p,isEmail:f,isNotIncluded:g,isMagicEmail:h}}]),angular.module("app").controller("AccountSummaryCtrl",["$scope","$rootScope","ModalService","Payment","User",function(a,b,c,d,e){a.summary={},a.quota_private="";var f=a.exchange_coin_modal=c.instance("account-exchange-coin-modal"),g=function(){var b=d.summary();b.then(function(b){a.summary=b.data||{}})};a.memoryRate=function(a){var b=a.used_memory/a.total_memory*100;return(b>100?100:b)+"%"},a.exchangeCoin=function(){f.toggle()},g(),e.current(function(a){0===a.code&&(b.USER=a.data)}),b.isExpActive("vip")&&4!==b.USER.vip?e.vip_quota(function(b){0===b.code&&(a.quota_private=b.data.private_project_count)}):a.quota_private="无限"}]),angular.module("app").controller("AccountPointCtrl",["$scope","$routeParams","$location","ModalService","Payment","Point","Common","Flash","Pager",function(a,b,c,d,e,f,g,h,i){a.tab=b.tab||"",a.points={},a.point_records=[],a.record_loading=!1,a.points_loading=!1,a.gifts=[],a.gifts_loading=!1,a.gift_id=b.id||void 0;var j=a.exchange_coin_modal=d.instance("account-exchange-coin-modal"),k=function(b){if(!a.record_loading){a.record_loading=!0;var c=f.record({page:b,pageSize:10},function(b){a.point_records=b.data&&b.data.list||[],o.optionsReady(b.data)});c["finally"](function(){a.record_loading=!1})}},l=function(){if(!a.points_loading){a.points_loading=!0;var b=f.points(function(b){a.points=b.data||{}});b["finally"](function(){a.points_loading=!1})}},m=function(){if(!a.gifts_loading){a.gift_loading=!0;var b=f.gifts(function(b){a.gifts=b.data||b.data.list||[]});b["finally"](function(){a.gifts_loading=!1})}};a.exchange=function(b){var d=g.findOfId(a.gifts,b,"id");d&&(a.points.points_left<d.points_cost?h.fail().send("码币不够哦，努力赚码币吧！"):c.path("/user/account/credit/gift/"+b))},a.exchangeCoin=function(){j.toggle()};var n=a.pager_id=(new Date).getTime(),o=i.instance(n,a);o.onChange(function(a){k(a)}),"gift"===a.tab?m():k(1),l()}]),angular.module("app").controller("GiftExchangeController",["$scope","$routeParams","$location","Point","Messages","Common","Flash",function(a,b,c,d,e,f,g){a.gift_id=b.id||"",a.exchang_user={},a.gift={},a.loading=!1,a.submitting=!1,a.sending=!1;var h=function(){if(!a.loading){a.loading=!0;var b=d.gifts(function(b){var c=b.data||b.data.list||[];a.gift=f.findOfId(c,a.gift_id,"id")});b["finally"](function(){a.loading=!1})}};a.submit=function(b){if(!a.submitting&&!a.sending){if(!(b&&b.name&&b.address&&b.phone&&b.password))return void g.fail().send("请把信息补全");a.submitting=!0;var f=d.exchange({receiverName:b.name,receiverAddress:b.address,receiverPhone:b.phone,password:SHA1(b.password),giftId:a.gift_id},function(d){if(a.sending=!0,0===d.code){var f=["**兑换商品**","\n","\n","![图片](",a.gift.image,")","\n",a.gift.name,"\n","\n","---","\n","\n","**收件信息**","\n","\n","收件人：",b.name,"\n","收件地址：",b.address,"\n","手机号码：",b.phone].join(""),h=e.send_message({receiver_global_key:"coding",content:f},function(b){0===b.code&&(a.submitting=!1,g.success().send("兑换成功！"),c.path("/user/messages/history/coding"))});h["finally"](function(){a.sending=!1})}});f["finally"](function(){a.submitting=!1})}},h()}]),angular.module("app").controller("AccountInvoiceCtrl",["$scope","ModalService","Payment","Flash","Pager",function(a,b,c,d,e){var f=a.invoice_modal=b.instance("account-invoice-modal");a.invoice_price="",a.available_invoice_price=0,a.invoices=[],a.loaded=!1,a.loading=!1,a.invoice_pager_id="invoice_pager",a.invoice_edit_type="add",a.current_update_invoice={};var g=a.MIN_INVOICE_PRICE=100,h=e.instance(a.invoice_pager_id,a);a.invoice_status={1:"等待受理",2:"受理中",3:"已发出",4:"已签收"},a.expressInfo=function(a){return a.status>=3?a.express_company+":"+a.express_order_id:"尚未寄送"},a.createInvoice=function(){a.invoice_edit_type="add",a.invoice_price<g?d.fail().send("开票金额最小额度为 "+g+" 元"):a.invoice_price>a.available_invoice_price?d.fail().send("开票金额不能超过可开票金额"):a.available_invoice_price<g?d.fail().send("可开票金额不足 "+g+" 元"):f.toggle()},a.editInvoice=function(b){a.invoice_edit_type="update",a.current_update_invoice=angular.copy(b),a.current_update_invoice.opt_timestamp=(new Date).getTime(),f.toggle()},a.removeInvoice=function(a){if(confirm("确认删除金额为 ￥"+a.price+" 的发票么？")){var b=c.remove_invoice({id:a.id});b.then(function(){i(),j(h.currentPage())})}},a.signInvoice=function(a){if(confirm("确认签收"+a.express_company+":"+a.express_order_id+"?")){var b=c.sign_invoice({id:a.id},{});b.then(function(){i(),j(h.currentPage())})}};var i=function(){var b=c.invoice_price();b.then(function(b){a.available_invoice_price=b.data||0})},j=function(b){a.invoices=[],a.loading=!0,a.loaded=!1;var d=c.invoices({page:b||1,pageSize:20});d.then(function(b){a.invoices=b.data&&b.data.list||[],h.optionsReady(b.data)}),d["finally"](function(){a.loading=!1,a.loaded=!0})};a.$on("account.update.invoice.success",function(a){a.preventDefault(),i(),j(h.currentPage())}),h.onChange(function(a){j(a)}),i(),j(h.currentPage())}]),angular.module("app").controller("AccountExchangeCoinCtrl",["$scope","$filter","$location","$route","ModalService","Flash","Payment",function(a,b,c,d,e,f,g){a.summary={},a.form={num:"",password:""},a.exchanging=!1,a.available="";var h=e.get("account-exchange-coin-modal");h.on("hide",function(){a.form.password=""});var i=function(){var b=g.exchange_balance();b.then(function(b){if(a.summary=b.data||{},a.summary.exchange_rate){var c=a.summary.exchange_rate.split(":");a.rmb=c[0].trim();var d=c[1].trim();a.summary.exchange_message=d+"码币 = "+a.rmb+"人民币"}k()})},j=function(a){return isNaN(parseFloat(a))?!0:0>=a},k=function(){if(a.summary.exchange_rate){var c=a.summary.exchange_rate.split(":"),d=c[0],e=c[1],f=a.summary.balance||0,g=f/(d/e);g=g>=.1?b("number")(g,1):0,a.available="当前最多能购买 "+g+" 码币，0.01 码币起购买"}},l=function(){$(".account-exchange-coin-modal").modal("hide")};a.exchange=function(){if(!a.exchanging){if(j(a.form.num))return void f.fail().send("码币数不正确");a.exchanging=!0;var b=g.exchange_point({num:a.form.num,password:SHA1(a.form.password)});b.then(function(){l(),f.success().send("购买成功！"),"/user/account/credit"==c.path()?d.reload():c.path("/user/account/credit")}),b["finally"](function(){a.exchanging=!1})}},i()}]),angular.module("app").controller("AccountAddInvoiceCtrl",["$scope","Payment","ModalService","Flash",function(a,b,c,d){a.saving=!1,a.current_available_invoice_price=0;var e=function(){var b=a.invoices[0]||{};a.form={price:a.invoice_price||"",title:b.title||"",receiver:b.receiver||"",receiver_phone:b.receiver_phone||"",receiver_address:b.receiver_address||""}},f=c.get("account-invoice-modal");f.on("hide",function(){e(),a.saving=!1});var g=function(a){return 0===a.title.length||0===a.receiver.length||0===a.receiver_phone.length||0===a.receiver_address.length},h=function(a){return!/^1[0-9]{10}/gi.test(a)||a.length>11};a.addInvoice=function(c){var e=angular.copy(c);if(g(c))return d.fail().send("发票信息不能为空"),!1;if(h(c.receiver_phone))return d.fail().send("手机号格式错误"),!1;a.saving=!0;var i=b.invoice(e);i.then(function(){f.action("hide"),a.$emit("account.update.invoice.success"),d.success().send("开具发票申请成功！您提交的发票申请我们的客服会在月初和月中分别集中处理，并在第一时间快递到您的手上，请您合理安排时间提交发票申请并耐心等待， 谢谢。")}),i["finally"](function(){a.saving=!1})},a.updateInvoice=function(c){if(g(c))return d.fail().send("发票信息不能为空"),!1;if(h(c.receiver_phone))return d.fail().send("手机号格式错误"),!1;if(c.price<a.MIN_INVOICE_PRICE)return d.fail().send("开票金额最小额度为 "+a.MIN_INVOICE_PRICE+" 元"),!1;if(c.price>a.current_available_invoice_price)return d.fail().send("开票金额不能超过可开票金额"),!1;a.saving=!0;var e={invoiceId:c.id,price:c.price,title:c.title,receiver:c.receiver,receiver_phone:c.receiver_phone,receiver_address:c.receiver_address},i=b.update_invoice(e);i.then(function(){f.action("hide"),a.$emit("account.update.invoice.success"),d.success().send("更新成功！")}),i["finally"](function(){a.saving=!1})},a.$watchCollection(function(){return[a.invoice_edit_type,a.current_update_invoice]},function(){"update"===a.invoice_edit_type?(a.form=a.current_update_invoice,a.current_available_invoice_price=a.available_invoice_price+a.current_update_invoice.price):e()}),a.$watch("invoice_price",function(){e()})}]),angular.module("app").controller("OrderListController",["$scope","Payment","Pager","Flash",function(a,b,c,d){function e(c,d){var e={page:c||1,pageSize:d||10};a.loading=!0,b.get_order_list(e,function(b){0===b.code&&(f.optionsReady(b.data),a.orderList=b.data.list.map(function(a,b){var c=a.status,d=a.product_type,f=0===b&&1===e.page&&1===c&&2!==d;return 1==c?c="等待支付":2==c?c="支付成功":3==c?c="支付失败":4==c&&(c="已取消"),{orderId:a.order_id,createdAt:a.created_at,content:a.title,total:a.total_fee,status:c,showPendingBtn:f}})),a.loading=!1},null)}a.orderList=[],a.loading=!1,a.order_pager_id="order_list_pager";var f=c.instance(a.order_pager_id,a);f.onChange(function(a){e(a)}),e(1),a.cancelOrder=function(a){b.cancel_vip_order({orderid:a},{},function(a){0===a.code&&(d.success().send("取消订单成功"),e(1))})}}]),angular.module("app").controller("UserPayedProjectController",["$scope","UserPayedProjectService",function(a,b){a.pageSize=15,b.init(a)}]).controller("UserPayedProjectGeneralController",["$scope","UserPayedProjectService",function(a,b){a.pageSize=5,b.init(a)}]).service("UserPayedProjectService",["Payment","ProjectVersions","Pager",function(a,b,c){var d=function(d){d.projects=[],d.loaded=!1,d.loading=!1,d.total_size=0,d.versions=b,d.pager_id="payed_project"+(new Date).getTime();var e=c.instance(d.pager_id,d),f=function(b){b=b||1,d.loaded=!1,d.loading=!0;var c=a.projects({page:b,pageSize:d.pageSize});c.then(function(a){e.optionsReady(a.data),d.projects=a.data&&a.data.list||[],d.total_size=a.data&&a.data.totalRow||0}),c["finally"](function(){d.loaded=!0,d.loading=!1})};e.onChange(function(a){f(a)}),d.renewalStatus=function(a){return a.auto?"自动续费":"非自动续费"},f()};return{init:d}}]),angular.module("app").controller("AccountPaymentHistoryGeneralController",["$scope","AccountPaymentHistoryService",function(a,b){a.pageSize=5,b.init(a)}]).controller("AccountPaymentHistoryController",["$scope","AccountPaymentHistoryService",function(a,b){a.pageSize=15,b.init(a)}]).service("AccountPaymentHistoryService",["$routeParams","Payment","Flash","$window","$route","ModalService","Pager",function(a,b,c,d,e,f,g){var h=function(d){d.tab=a.tab||"pay",d.pageSize=d.pageSize||15,d.load={pay:{loading:!1,loaded:!1},top_up:{loading:!1,loaded:!1}},d.charge_logs=[],d.pay_logs=[],d.payment_platforms={alipay:"支付宝",weixin:"微信支付",admin:"管理员操作"},d.total_size={pay:0,top_up:0},d.payment_status={0:"待支付",1:"交易成功",2:"交易关闭"};var e={closable:!0},h=d.top_up_modal=f.instance("account-top-up-modal",e);d.goPay=function(a,b){h.toggle()},d.cancelPay=function(a,d){if(confirm("确认关闭金额为 ￥"+d+" 的交易？")){var e=b.close({id:a},{});e.then(function(){c.success().send("交易关闭成功！"),l()})}};var i=function(){h.action("hide")};d.payError=function(){l(),i()},d.paySuccess=function(){l(),i()},d.charge_pager_id="charge_pager",d.payment_pager_id="payment_pager";var j=g.instance(d.charge_pager_id,d),k=g.instance(d.payment_pager_id,d),l=function(a){d.charge_logs=[],d.load.top_up.loading=!0,d.load.top_up.loaded=!1;var c=b.charge_log({page:a||1,pageSize:d.pageSize});c.then(function(a){d.charge_logs=a.data&&a.data.list||[],d.total_size.top_up=a.data&&a.data.totalRow||0,j.optionsReady(a.data)}),c["finally"](function(){d.load.top_up.loading=!1,d.load.top_up.loaded=!0})};j.onChange(function(a){l(a)});var m=function(a){d.pay_logs=[],d.load.pay.loading=!0,d.load.pay.loaded=!1;var c=b.pay_log({page:a||1,pageSize:d.pageSize});c.then(function(a){d.pay_logs=a.data&&a.data.list||[],d.total_size.pay=a.data&&a.data.totalRow||0,k.optionsReady(a.data)}),c["finally"](function(){d.load.pay.loading=!1,d.load.pay.loaded=!0})};if(k.onChange(function(a){m(a)}),"top-up"===d.tab){var n=j.currentPage();l(n)}else{var n=k.currentPage();m(n)}};return{init:h}}]),angular.module("app").controller("AccountTopUpCtrl",["$scope","ModalService","Payment","Flash","$window","location","$timeout",function(a,b,c,d,e,f,g){var h={closable:!0};a.balance=0,a.url="",a.url_loading=!1,a.form={platform:"alipay",price:""},a.chargeResult=$.extend({result:!1,price:0},f.$$search);var i=a.top_up_modal=b.instance("account-top-up-modal",h),j=function(){c.balance(function(b){a.balance=+b.data||0})};a.topUp=function(b,c){return a.url_loading?(b.preventDefault(),!1):+c.price<.01?(d.fail().send("充值金额最少为 0.01 元"),b.preventDefault(),!1):+c.price>1e5?(d.fail().send("充值金额最大限额为 10 万元"),b.preventDefault(),!1):isNaN(c.price)?(d.fail().send("充值金额有误!"),b.preventDefault(),!1):confirm("确认充值 ￥"+c.price+"?")?void i.toggle():(b.preventDefault(),!1)};var k=function(){i.action("hide")};if(a.payError=function(){k(),f.path("/user/account/payment-history/top-up")},a.paySuccess=function(){f.path("/user/account/payment-history/top-up"),k()},j(),a.chargeResult.result){f.skipReload().search("result",void 0).search("price",void 0);var h={onShow:function(){g(function(){l.action("hide")},3e3)}},l=a.result_modal=b.instance("account-top-up-result-modal",h);l.toggle()}}]),angular.module("app").controller("UpgradeHistoryController",["$scope","Payment","Pager",function(a,b,c){function d(c,d){var f={page:c||1,pageSize:d||10};a.loading=!0,b.get_upgrade_history(f,function(b){0===b.code&&(e.optionsReady(b.data),a.historyList=b.data.list.map(function(a){return{orderId:a.order_id,title:a.title,updatedAt:moment(a.updated_at).format("YYYY-MM-DD"),startedAt:moment(a.started_at).format("YYYY-MM-DD"),expiredAt:moment(a.expired_at).format("YYYY-MM-DD")}})),a.loading=!1},null)}a.historyList=[],a.loading=!1,a.upgrade_history_pager_id="upgrade_history_pager";var e=c.instance(a.upgrade_history_pager_id,a);e.onChange(function(a){d(a)}),d(1)}]),angular.module("app").controller("UserAccountSettingController",["$scope","$rootScope","$routeParams","$location","Common","Payment","experiment",function(a,b,c,d,e,f,g){function h(b){if(!a.payform.useMb)return void(a.payform.mb="");if(!(3>b)){var c=0,d=o.points_left,e=+a.discount;if(3===b?c=199:(b=4)&&(c=699),c>0&&d>0){var f=c-e-50*d;if(f>=0)a.payform.mb=d;else{var g=(c-e)/50;a.payform.mb=g>0?g:0}}}}function i(b){3>b||f.vip_upgrade_info({uplevel:b}).then(function(c){if(0===c.code){var d=c.data,e=+d.discount;a.discount=d.discount,a.hasDiscount=!!e,a.startAt=d.nextVipStartedAt||moment().format("YYYY-MM-DD"),a.expiredAt=d.nextVipExpiredAt||moment(a.startAt).add(1,"y").format("YYYY-MM-DD"),j(b)}})}function j(b){if(!(3>b)){h(b);var c=3===b?199:699,d=a.payform,e=""===e?0:+d.mb,f=+a.discount,g=c-f;d.useMb&&e>0&&(g-=50*e,0>g&&(a.payform.mb=(c-f)/50,g=0),a.total=g.toFixed(2)),a.total=(0>g?0:g).toFixed(2)}}function k(a){clearTimeout(l),l=setTimeout(function(){f.check_payed({orderid:a}).then(function(b){0===b.code&&(b.data?d.url("/user/account"):k(a))})},3e3)}var l,m=c.region||"account",n=c.tab||"setting"===m&&"basic",o=a.USER;a.inner_menu=m,a.tab=n,c.renew?a.selectLevel=o.vip:a.selectLevel=+c.force||(o.vip<4?o.vip+1:4),a.showWeixinModal=!1,a.showAlipayModal=!1,a.weixinQR="",a.discount=0,a.hasDiscount=!1,a.startAt="",a.expiredAt="",a.total="",a.payform={platform:"Alipay",useMb:!1,mb:""},a.closeWeixinModal=function(){a.showWeixinModal=!1,a.weixinQR="",clearTimeout(l)},a.closeAlipayModal=function(){a.showAlipayModal=!1},a.toggleUseMb=function(){var b=a.selectLevel;j(b)},b.isExpActive("vip")&&i(a.selectLevel),a.mbChange=function(){j(a.selectLevel)},a.selectUpgrade=function(b,c){b.currentTarget.classList.contains("disabled")||(a.selectLevel=c,i(c))},a.paying=!1,a.pay=function(b){var c=a.payform,e={vip:a.selectLevel,platform:c.platform};return c.useMb&&("undefined"==typeof c.mb||c.mb<0||c.mb>o.points_left)||a.paying?void 0:0==+a.total?(a.paying=!0,e.point=c.mb,f.vip_upgrade(e,function(b){0===b.code&&d.url("/user/account"),a.paying=!1},null)):void("Weixin"===c.platform?(c.useMb&&c.mb>0&&(e.point=c.mb),a.paying=!0,f.vip_upgrade(e,function(b){if(0===b.code){var c=b.data.orderId;a.weixinQR=b.data.url,a.showWeixinModal=!0,k(c)}a.paying=!1},null)):"Alipay"===c.platform&&(a.showAlipayModal=!0))},a.submitPay=function(b){("Weixin"===a.payform.platform||0==+a.total)&&b.preventDefault()},a.keysPath=function(){var a={setting:function(a){return"keys"===a?"app/git/key/keys.html":"app/user/account_setting/setting/"+a+".html"},"default":function(){return"app/user/account_setting/account/"+m+".html"}};return e.smartSwitch(a,m,n)}}]),angular.module("app").config(["$routeProvider","$locationProvider","UserResolver",function(a,b,c){a.when("/user/account/:region?[/]?:tab?[/]?:id?",{templateUrl:"app/user/account_setting/index.html",controller:"UserAccountSettingController",resolve:{USER:c},reloadOnSearch:!1,module:"account",title:["$routeParams","Common",function(a,b){var c=a.region,d=a.tab,e=a.renew,f={keys:"SSH公钥",notification:"提醒设置",oauth:"绑定设置",applications:"应用设置"},g={setting:function(a){return f[a]||"个人设置"},"top-up":"账户充值","payed-project":"付费项目","payment-history":function(a){
return"top-up"===a?"充值记录":"消费记录"},invoice:"发票管理",credit:"码币",order:"订单管理",upgrade:function(){return e?"会员续费":"会员升级"},"upgrade-history":"升级记录","default":"账户概览"};return b.smartSwitch(g,c,d)}]})}]),angular.module("app").controller("PrivateTokenController",["$scope","Common","Flash","PrivateToken",function(a,b,c,d){a.privateToken={token:"",active:!1},a.loading=!0;var e=function(){a.loading=!0;var b=d.get();b.then(function(b){a.privateToken=b.data||{token:"",active:!1}}),b["catch"](function(){a.privateToken={token:"",active:!1}}),b["finally"](function(){a.loading=!1})};e();var f=function(){a.loading=!0;var b=d.open();b.then(function(b){a.privateToken=b.data,a.loading=!1})},g=function(){a.loading=!0;var b=d.close();b.then(function(b){a.privateToken.active=!1,a.loading=!1})};a.change=function(){a.privateToken.active?f():g()},a.refresh=function(){a.loading=!0;var b=d.refresh();b.then(function(b){a.privateToken=b.data,a.loading=!1})}}]),angular.module("app").controller("BasicSettingAdvanceSetting",["$scope","ModalService","$rootScope","User","Flash",function(a,b,c,d,e){a.USER=c.USER,a.showBindEmailModal=function(){c.$emit("open.bind.email.modal",a.USER)};var f=c.$on("bind.email.modal.update",function(a){});a.showChangeEmailModal=function(){c.$emit("open.change.email.modal",a.USER)};var g=c.$on("change.email.modal.update",function(a){}),h=a.USER.phone_country_code;a.phoneNoWithCountryCode=h?h+" "+a.USER.phone:a.USER.phone,a.resendEmail=function(){var b=d.send_register_email({email:a.USER.email});b.then(function(){e.success().send("发送激活邮件成功")})},a.showBindPhoneModal=function(){c.$emit("open.bind.phone.modal",a.USER)};var i=c.$on("bind.phone.modal.update",function(a){});a.showChangePhoneModal=function(){c.$emit("open.change.phone.modal",a.USER)};var j=c.$on("change.phone.modal.update",function(a){});a.showChangePasswordModal=function(){c.$emit("open.change.password.modal",a.USER)},a.$on("$destroy",function(){f(),g(),i(),j()})}]),angular.module("app").controller("ApplicationController",["$scope","$routeParams","$location","Customer","Common","Errors","Setting","Flash",function(a,b,c,d,e,f,g,h){var i=a.USER;a.inner_menu="applications",a.application_id=b.id,a.type="list",a.current_app_id="list"==a.type?a.application_id:void 0,a.creating=!1,a.updating=!1,a.current_app={},a.app_list=[],a.authorized_list=[],a.uploading=!1,a.loading=!1,a.reseting=!1,a.revoking=!1,a.deleting=!1,a.authorized_loading=!1;var j={"user:email":"邮箱地址(只读)",user:"用户基本信息(只读)",notification:"通知信息(读写)",social:"冒泡(只读)","social:tweet":"冒泡操作(读写)","social:message":"私信操作(读写)",project:"项目信息(只读)","project:members":"项目成员操作(读写)","project:task":"项目任务操作(读写)","project:file":"项目文件操作(读写)","project:depot":"项目代码仓库操作(读写)","project:key":"部署/个人公钥操作(读写)"},k=/((http|https):\/\/)?[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/,l=/((http|https):\/\/)?(localhost)(\:\d+)?([\/\w\-_\.]+)?/,m=function(){a.loading=!0;var b=d.list({},function(b){a.app_list=b.data.list});b["finally"](function(){a.loading=!1})},n=function(b){var e=d.info({application_id:b},function(c){a.current_app=c.data,a.current_app.copy=angular.copy(a.current_app),o(b)});e["catch"](function(){c.path("/user/account/setting/applications")})},o=function(b){d.user_count({application_id:b},function(b){a.current_app.user_count=b.data})},p=function(){if(!a.authorized_loading){a.authorized_loading=!0;var b=d.authorized(function(b){a.authorized_list=b.data&&b.data.list||[],angular.forEach(a.authorized_list,function(a){a.scopes=a.scopes.split(/\s|,/).map(function(a){return j[a]})})});b["finally"](function(){a.authorized_loading=!1})}};a.createApplication=function(b){if(!a.creating){if(!k.test(b.homepage_url)&&!l.test(b.homepage_url))return void h.fail().send("主页地址格式错误");if(!k.test(b.callback_url)&&!l.test(b.callback_url))return void h.fail().send("回调地址格式错误");a.creating=!0;var e=d.save({name:b.name,description:b.description,icon:b.icon,homepage_url:b.homepage_url,callback_url:b.callback_url,owner_id:i.id},function(a){c.path("/user/account/setting/applications/"+a.data.id),h.success().send("创建成功！")});e["finally"](function(){a.creating=!1})}},a.updateApplication=function(b){if(!a.updating&&!q(b,b.copy)){if(!k.test(b.homepage_url)&&!l.test(b.homepage_url))return void h.fail().send("主页地址格式错误");if(!k.test(b.callback_url)&&!l.test(b.callback_url))return void h.fail().send("回调地址格式错误");a.updating=!0;var c=d.update({application_id:b.id},{name:b.name,description:b.description,icon:b.icon,homepage_url:b.homepage_url,callback_url:b.callback_url,owner_id:b.owner_id},function(b){a.current_app=b.data,a.current_app.copy=angular.copy(a.current_app),o(a.current_app.id),h.success().send("修改成功")});c["finally"](function(){a.updating=!1})}};var q=function(a,b){return a.name===b.name&&a.homepage_url===b.homepage_url&&a.callback_url===b.callback_url&&a.description===b.description&&a.icon===b.icon};a.deleteApplication=function(b){if(!a.deleting)if(a.deleting=!0,b.id&&confirm("确认删除该应用？")){var e=d["delete"]({application_id:b.id},{},function(a){return 0!=a.code?void f.handle(a):void c.path("/user/account/setting/applications")});e["finally"](function(){a.deleting=!1})}else a.deleting=!1},a.resetSecretKey=function(b){if(!a.reseting){a.reseting=!0;var c=d.reset_secret({application_id:b.id},{},function(a){b.secret_key=a.data});c["finally"](function(){a.reseting=!1})}},a.revokeAllUsers=function(b){if(!a.revoking&&0!==b.user_count){a.revoking=!0;var c=d.revoke_users({application_id:b.id},{},function(){});c["finally"](function(){a.revoking=!1})}},a.revokeAuthorized=function(b){if(!b.revoking){b.revoking=!0;var c=d.revoke({application_id:b.id},{},function(){a.authorized_list=e.removeOfId(a.authorized_list,b.id,"id")});c["finally"](function(){b.revoking=!1})}},a["switch"]=function(b){a.type=b,"list"===a.type&&c.path("/user/account/setting/applications")};var r=[g.api_host,"/api/oauth/applications/icon"].join("");a.uploadSetting={xhrFields:{withCredentials:!0},url:r,dropZone:$("#application-icon"),loadImageMaxFileSize:52428800,imageMaxWidth:800,imageMaxHeight:800,imageMinWidth:128,imageMinHeight:128,processstart:function(){e.safeApply.call(a,function(){a.uploading=!0})},done:function(b,c){0===c.result.code?(a.current_app.icon=c.result.data,a.uploading=!1,h.success().send("上传成功！")):(f.handle(c.result),a.uploading=!1)},fail:function(b,c){a.uploading=!1,h.fail().end("上传失败！")}},"list"===a.type&&(a.application_id?n(a.application_id):(m(),p()))}]),angular.module("app").controller("UserAvatarSettingController",["$scope","$rootScope","Errors","Setting","Flash","$http","$location","User","Common","$timeout","$q",function(a,b,c,d,e,f,g,h,i,j,k){var l=[d.api_host,"/api/user/avatar"].join(""),m=b.CropAvatarModal;a.current_user=a.USER,a.avatar=!1,a.uploading=!1,a.changing=!1,a.new_avatar="",a.img={src:"",top:0,left:0,size:0},a.array=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],a.poll=void 0,a.choiceAvatar=function(b){return isNaN(b)?"none"===b?a.current_avatar="/static/fruit_avatar/none.jpg":a.current_avatar=b:a.current_avatar="/static/fruit_avatar/Fruit-"+b+".png",a.selected=b,a.new_avatar=b},a.changeAvatar=function(){if(!a.changing){var c;return""!==a.new_avatar?("gravatar"===a.new_avatar&&(c=a.gravatar),a.changing=!0,f.post("/api/user/updateavatar",{avatar:a.new_avatar}).success(function(c){return e.success().send("修改成功"),b.USER.lavatar=c.data.lavatar,b.USER.avatar=c.data.lavatar,a.changing=!1,g.path("/user/account/setting")}).error(function(){a.changing=!1})):void 0}},a.gravatar=void 0;var n=function(){var b=h.by_key({key:a.current_user.global_key});return b.then(function(b){a.poll&&j.cancel(a.poll),a.gravatar=b.data.gravatar,a.poll=void 0,a.refresh_gravatar=!1}),b};n(),a.refresh_gravatar=!1;var o=function(){h.refresh_gravatar_status(function(){a.refresh_gravatar=!0,p()})["catch"](function(){return n(),!1})},p=function(){a.poll=j(function(){o()},3e3)};p(),h.get_avatar(function(b){return a.current_avatar=b.data}),a.refreshGravatar=function(){if(!a.refresh_gravatar){var b=h.refresh_gravatar(function(){a.refresh_gravatar=!0,p()});b["catch"](function(){return e.fail().send("同步失败！"),!1})}},a.uploadSetting={xhrFields:{withCredentials:!0},url:l,dropZone:$("#avatar-upload-zone"),disableImageResize:!1,loadImageMaxFileSize:52428800,imageMaxWidth:800,imageMaxHeight:800,imageMinWidth:128,imageMinHeight:128,processstart:function(){i.safeApply.call(a,function(){a.uploading=!0})},done:function(d,f){0===f.result.code?(a.avatar=f.result.data,a.img.src=f.result.data,a.uploading=!1,e.success().send("上传成功!")):(c.handle(f.result),a.uploading=!1),q().then(function(){b.$broadcast("on.submit.crop.avatar",f.result.data)})},fail:function(b,c){a.uploading=!1,e.fail().send("上传失败!")}};var q=a.cropAvatar=function(){var a=k.defer();return m.activate(),setTimeout(function(){$("#crop-avatar-modal").modal("setting",{duration:100,closable:!1}).modal("show"),a.resolve()},100),a.promise};a.$on("$destroy",function(){a.poll&&(j.cancel(a.poll),a.poll=void 0),m.deactivate()}),a.$on("on.crop.avatar.success",function(b,c){a.current_avatar=c,a.new_avatar=c})}]),angular.module("app").controller("UserBasicSettingExpController",["$scope","$rootScope","User","Errors","Flash","$http","$interval","Options","Tags","Degrees","Schools","Skills","Common","UserBasicSettingServiceExp",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a){var b={};return Object.keys(t).map(function(a){b[t[a]]=a}),b[a]}function p(c){return b.isExpActive("vip")?"undefined"!=typeof r.sex&&"undefined"===c.sex?(e.fail().send("性别不能为空"),!1):r.name&&!c.name?(e.fail().send("昵称不能为空"),!1):r.birthday&&!c.birthday?(e.fail().send("生日不能为空"),!1):"undefined"!=typeof r.job&&"0"===c.job?(e.fail().send("工作不能为空"),!1):r.location&&!c.location.trim()?(e.fail().send("地区不能为空"),!1):r.degree&&!a.degreeValue?(e.fail().send("学历不能为空"),!1):r.school&&!a.schoolValue?(e.fail().send("学校不能为空"),!1):r.skills&&r.skills.length&&!a.skills.length?(e.fail().send("开发技能不能为空"),!1):!0:!0}function q(){var b=a.activeSkill,c=a.activeSkillValue,d=a.activeSkillLevel,e=a.skills;if(b&&d){var f=e.find(function(a){return a.text===b});f?f.level=d:e.push({text:b,level:d,value:c}),a.showSkill=!1}}var r=a.USER;a.show_warn=!0,a.JOBs=[],a.TAGs=[],a.DEGREES=[],a.degree="",a.degreeValue="";var s=[];a.SCHOOLS=[],a.schoolValue=r.school,a.SKILLS=[],a.showDegree=!1,a.showSchool=!1,a.showSkill=!1,a.activeSkill="",a.activeSkillValue="",a.activeSkillLevel=1,a.skills=[],a.showWelcomeSilverModal=!1,a.tags=r.tags.split(",");var t={1:"入门",2:"一般",3:"熟练",4:"精通"};a.pickmeup_opts={max:(new Date).getTime()},a.user=n.initUserSetting(r),h.jobs(function(b){a.JOBs=b.data}),i.user_tag_list(function(b){a.TAGs=b.data}),b.isExpActive("vip")&&(j.fetch(function(b){var c=Object.keys(b.data).length>0?b.data:{1:"高中及以下",2:"大专",3:"本科",4:"硕士及以上"};a.DEGREES=Object.keys(c).map(function(a){return{value:a,text:c[a]}}),a.degree=c[r.degree],a.degreeValue=r.degree}),k.fetch(function(b){a.SCHOOLS=s=Object.keys(b.data).map(function(a){return b.data[a]})}),l.fetch(function(b){a.SKILLS=Object.keys(b.data).map(function(a){return{value:a,text:b.data[a]}}),a.skills=(r.skills||[]).map(function(a){return{text:a.skillName,value:a.skillId,level:t[a.level]}})})),a.$on("user.avatar.update",function(b,c){a.user.lavatar=c}),a.closeWelcomeModal=function(){a.showWelcomeSilverModal=!1},a.selectTags=function(b){a.user.tags=b.join(",")},a.changeSchool=function(){var b=a.schoolValue;a.SCHOOLS=s.filter(function(a){return a.indexOf(b)>-1})},a.selectSchool=function(b){a.schoolValue=b.target.innerText,a.showSchool=!1},a.isWarningClose=!1,a.closeWarning=function(){a.isWarningClose=!0},a.toggleDegree=function(b){a.showDegree=!a.showDegree,a.showSchool=!1,a.showSkill=!1,b.stopPropagation()},a.toggleSchool=function(b){a.showSchool=!a.showSchool,a.showDegree=!1,a.showSkill=!1,b.stopPropagation()},a.openSchool=function(b){a.showSchool=!0,a.showDegree=!1,a.showSkill=!1,b.stopPropagation()},a.toggleSkill=function(b){a.showSkill=!a.showSkill,a.showDegree=!1,a.showSchool=!1,b.stopPropagation()},a.$watch("showSkill",function(b,c){b===!1&&(a.activeSkillLevel=a.activeSkill=a.activeSkillValue="")}),a.selectSkill=function(b,c){a.activeSkill=c,a.activeSkillValue=b.target.getAttribute("data-value"),q()},a.removeSkill=function(b,c){b.stopPropagation(),a.skills=a.skills.filter(function(a){return a.text!==c})},a.selectSkillLevel=function(b){a.activeSkillLevel=b,q()},a.forceOpen=function(a){a.stopPropagation()},a.selectDegree=function(b){var c=b.target.getAttribute("data-value");a.degree=b.target.innerText,a.degreeValue=c},a.onContainerClick=function(){a.showSchool=!1,a.showDegree=!1,a.showSkill=!1},a.submit=function(d){if(!p(d))return!1;var f=function(){a.updating=!0;var f=angular.copy(d.copy);d.copy=void 0;var g=angular.extend({},d,{skills:a.skills.map(function(a){return[a.value,o(a.level)].join(":")}),school:a.schoolValue,degree:a.degreeValue}),h=r.vip,i=c.update_info(g,function(c){var d=c.data;m.safeApply.call(b,function(){b.USER=d}),a.resend_second=0,a.show_timer=!1,a.user=n.initUserSetting(d),a.user.copy=void 0,a.user.copy=angular.copy(a.user),a.updating=!1,e.success().send("个人信息更新成功！"),h!==d.vip&&2===d.vip&&(a.showWelcomeSilverModal=!0)});i["catch"](function(){a.updating=!1,d.copy=angular.copy(f)})};f()},a.onDateChange=function(b){a.user.birthday=b}}]).service("UserBasicSettingServiceExp",["Common",function(a){var b=["name","sex","birthday","company","location","slogan","introduction","job","tags","lavatar"],c=function(a){var c={};for(var d in a)a.hasOwnProperty(d)&&b.indexOf(d)>=0&&(c[d]=a[d]);return c.id=a.id,c},d=function(b){var d=c(b);return d.slogan=a.revertHtml(d.slogan),d.copy=angular.copy(d),d},e=function(a){var c=a.copy;if(!c)throw new Error("copy variable required in user!");var d=!1;for(var e in a)a.hasOwnProperty(e)&&b.indexOf(e)>=0&&!d&&(d=("job"===e?a[e]+"":a[e])!==("job"===e?a.copy[e]+"":a.copy[e]));return d};return{initUserSetting:d,userChanged:e}}]),angular.module("app").controller("CropAvatarController",["$scope","$rootScope","Setting","$http","$location","Flash","Common","Errors",function(a,b,c,d,e,f,g,h){a.avatar=!1,a.img={src:"",top:0,left:0,size:0},a.onImgChange=function(b){return a.img=b};var i=a.closeModal=function(){$("#crop-avatar-modal").modal("hide")},j=function(){$("#crop-avatar-modal").modal("refresh")};a.doImageCrop=function(c){a.uploading||isNaN(c.top)||isNaN(c.left)||isNaN(c.size)||0===c.size||(a.uploading=!0,d.post("/api/user/avatarCrop2",{url:c.src,top:parseInt(c.top),left:parseInt(c.left),size:parseInt(c.size)}).success(function(c){0===c.code&&(a.avatar=!1,a.uploading=!1,a.new_avatar="",a.img={src:"",top:0,left:0,size:0},i(),b.$broadcast("on.crop.avatar.success",c.data),a.uploading=!1)}).error(function(){a.uploading=!1}))},b.$on("on.submit.crop.avatar",function(b,c){a.avatar=c,a.img.src=c,setTimeout(function(){j()},500)})}]),angular.module("app").controller("BindEmailModalController",["$scope","ModalService","$rootScope","User","Flash",function(a,b,c,d,e){a.$modal,a.setting={onShow:function(){a.captcha.update=!0}};var f="totp",g="password",h=c.$on("open.bind.email.modal",function(){a.$modal.modal("show"),a.captcha.value="",a.email.value="",a.password.value="",a.password.update=!0});a.$on("$destroy",function(){h()}),a.email={},a.captcha={type:"fixed"},a.password={},a.valid=function(){return a.email.valid&&a.captcha.valid&&a.password.valid},a.submit=function(){if(a.valid()){a.loading=!0;var b="";a.password.type===f?b=a.password.value:a.password.type===g&&(b=SHA1(a.password.value));var c=d.send_change_email({email:a.email.value,j_captcha:a.captcha.value,two_factor_code:b});c.then(function(b){e.success().send("发送验证邮件成功"),a.$modal.modal("hide")}),c["catch"](function(){a.captcha.update=!0}),c["finally"](function(){a.loading=!1})}},a.cancel=function(){a.$modal.modal("hide")}}]),angular.module("app").controller("BindPhoneModalController",["$scope","$rootScope","User","$route",function(a,b,c,d){a.$modal,a.setting={};var e="totp",f="password",g=b.$on("open.bind.phone.modal",function(){a.$modal.modal("show"),a.phone.value="",a.code.value="",a.password.value="",a.password.update=!0});a.$on("$destroy",function(){g()}),a.phone={},a.code={type:"bind"},a.password={},a.valid=function(){return a.phone.valid&&a.code.valid&&a.password.valid},a.submit=function(){if(a.valid()){a.loading=!0;var g="";a.password.type===e?g=a.password.value:a.password.type===f&&(g=SHA1(a.password.value));var h=c.phone_change({phone:a.phone.value,code:a.code.value,phoneCountryCode:"+"+a.phone.country_code,country:a.phone.iso_code,two_factor_code:g});h.then(function(e){c.current(function(c){b.USER=c.data,a.$modal.modal("hide"),d.reload()})}),h["finally"](function(){a.loading=!1})}},a.cancel=function(){a.$modal.modal("hide")}}]),angular.module("app").controller("ChangeEmailModalController",["$scope","$rootScope","User","Flash",function(a,b,c,d){a.$modal,a.setting={onShow:function(){a.captcha.update=!0}};var e="totp",f="password",g=b.$on("open.change.email.modal",function(b,c){a.$modal.modal("show"),a.email.value="",a.email.selfEmail=c.email,a.captcha.value="",a.password.value="",a.password.update=!0});a.$on("$destroy",function(){g()}),a.email={},a.captcha={type:"fixed"},a.password={},a.valid=function(){return a.email.valid&&a.captcha.valid&&a.password.valid},a.submit=function(){if(a.valid()){a.loading=!0;var b="";a.password.type===e?b=a.password.value:a.password.type===f&&(b=SHA1(a.password.value));var g=c.send_change_email({email:a.email.value,j_captcha:a.captcha.value,two_factor_code:b});g.then(function(b){d.success().send("发送验证邮件成功"),a.$modal.modal("hide")}),g["catch"](function(){a.captcha.update=!0}),g["finally"](function(){a.loading=!1})}},a.cancel=function(){a.$modal.modal("hide")}}]),angular.module("app").controller("ChangePasswordModalController",["$scope","$rootScope","User","Flash","Common","$timeout","location",function(a,b,c,d,e,f,g){a.$modal,a.setting={};var h=b.$on("open.change.password.modal",function(){a.$modal.modal("show")});a.$on("$destroy",function(){h()}),a.password={},a.password_confirm={isChangePassword:!0},a.valid=function(){return a.password.valid&&a.password_confirm.valid},a.submit=function(){if(a.valid()){a.loading=!0;var h=c.update_passwd({current_password:SHA1(a.password.value),password:SHA1(a.password_confirm.password),confirm_password:SHA1(a.password_confirm.confirm)});h.then(function(c){d.success().send("修改成功,请使用新密码重新登录！"),a.$modal.modal("hide"),e.safeApply.call(b,function(){b.USER=void 0}),f(function(){g.path("/login")},500)}),h["finally"](function(){a.loading=!1})}},a.cancel=function(){a.$modal.modal("hide")}}]),angular.module("app").controller("ChangePhoneModalController",["$scope","$rootScope","User","Flash","$route",function(a,b,c,d,e){a.$modal,a.setting={};var f="totp",g="password",h=b.$on("open.change.phone.modal",function(b,c){a.$modal.modal("show"),a.phone.value="",a.phone.selfPhone=c.phone,a.code.value="",a.password.value="",a.password.update=!0});a.$on("$destroy",function(){h()}),a.phone={},a.code={type:"change"},a.password={},a.valid=function(){return a.phone.valid&&a.code.valid&&a.password.valid},a.submit=function(){if(a.valid()){a.loading=!0;var d="";a.password.type===f?d=a.password.value:a.password.type===g&&(d=SHA1(a.password.value));var h=c.phone_change({phone:a.phone.value,code:a.code.value,phoneCountryCode:"+"+a.phone.country_code,country:a.phone.iso_code,two_factor_code:d});h.then(function(d){c.current(function(c){b.USER=c.data,a.$modal.modal("hide"),e.reload()})}),h["finally"](function(){a.loading=!1})}},a.cancel=function(){a.$modal.modal("hide")}}]),angular.module("app").controller("OAuthSettingController",["$scope","Common","OAuth","Flash",function(a,b,c,d){a.platforms=[],a.unbinding=!1,a.binding=!1,a.loading=!1,a.loaded=!1;var e=function(){a.loading=!0,a.loaded=!1;var b=c.platforms();b.then(function(b){a.platforms=b.data&&b.data.list||[]}),b["finally"](function(){a.loading=!1,a.loaded=!0})};e(),a.oauthIcon=function(a){a=a.toLowerCase();var c={github:"github alternate",weibo:"weibo",bitbucket:"bitbucket","default":"user"},d={},e=b.smartSwitch(c,a,a);return d[e]=!0,d},a.unbind=function(b){if(confirm("确定取消 "+b+" 账号绑定？")){var f=c.unbind({platform:b},{});a.unbinding=!0,f.then(function(){d.success().send("解绑 "+b+" 账号成功！"),e()}),f["catch"](function(){return d.fail().send("解绑 "+b+" 账号失败！"),!1}),f["finally"](function(){a.unbinding=!1})}},a.rebind=function(b){a.binding||(a.binding=b,location.href="/api/oauth/"+b.toLowerCase()+"/rebind")}}]),angular.module("app").controller("SecretQuestionController",["$scope","User","Errors","Flash","$location","Common","$rootScope","$timeout","SecretQuestion","$q","ModalService",function(a,b,c,d,e,f,g,h,i,j,k){a.questions=["您父亲的名称是？","您母亲的名称是？"," 您的小学的名称是？","您的第一个宠物的名称是？","您的中学的名称是？"],a.question1=0,a.question2=0,a.question3=0;var l=a.password_required_modal=k.instance("password-required-modal");l.on("show",function(){a.$broadcast("required.password.show")}),a.$on("set.required.password",function(a,b){a.currentScope&&a.targetScope&&a.currentScope.$id!==a.targetScope.$id&&(m(b),a.preventDefault())});var m=angular.noop;a.setting_secret_question=function(){var b=a.question1,c=a.question2,e=a.question3;1==a.question1&&(b=a.custom_question1),1==a.question2&&(c=a.custom_question2),1==a.question3&&(e=a.custom_question3),l.toggle(),m=function(f){var g=i.setting_secret_question({},{question1:b,answer1:a.answer1,question2:c,answer2:a.answer2,question3:e,answer3:a.answer3,two_factor_code:f});g.then(function(){l.action("hide"),d.success().send("密保设置成功！")}),g["catch"](function(a,b){b&&b.code>0&&l.action("show")})}};var n=function(){var b=i.count_secret_question();b.then(function(b){3===b.data&&(l.toggle(),m=function(b){var c=i.get_secret_question({two_factor_code:b});c.then(function(b){3===b.data.length&&(a.question1=b.data[0].question,a.answer1=b.data[0].answer,-1===$.inArray(a.question1,a.questions)&&(a.custom_question1=a.question1,a.question1=1),a.question2=b.data[1].question,a.answer2=b.data[1].answer,-1===$.inArray(a.question2,a.questions)&&(a.custom_question2=a.question2,a.question2=1),a.question3=b.data[2].question,a.answer3=b.data[2].answer,-1===$.inArray(a.question3,a.questions)&&(a.custom_question3=a.question3,a.question3=1)),l.action("hide")}),c["catch"](function(a,b){b&&b.code>0&&l.action("show")})})})};n()}]),angular.module("app").controller("TotpSettingController",["$scope","$localStorage","$rootScope","$route","User","Messages","Errors","Flash","Setting","$timeout","TwoFactorAuth","Flash",function(a,b,c,d,e,f,g,h,i,j,k){c.$on("on.two_factor_auth.method",function(b){k.new_totp_info(function(b){a.image_url=b.data.image_url,a.two_factor_code=""})}),a.verifyCode=function(){var b=k.open_totp({twoFactorCode:a.two_factor_code});b.then(function(){j(function(){c.$broadcast("on.two_factor_auth.totp",!0)},700),$("#totp-setting-modal").modal("hide"),h.success().send("成功开启两步验证！")})}}]),angular.module("app").controller("UserTwoFactorAuthSettingController",["$scope","User","Errors","Flash","$location","Common","$rootScope","$timeout","TwoFactorAuth","$q","ModalService","SecretQuestion",function(a,b,c,d,e,f,g,h,i,j,k,l){a.method="",a.opening=!1,a.step=1;var m=g.TotpSettingModal,n=a.password_required_modal=k.instance("password-required-modal");a.$watch("opening",function(b,c){b===!1?a.password_words="关闭两步验证":a.password_words="开启两步验证"}),a.showTotpModal=function(){var a=j.defer();return m.activate(),setTimeout(function(){$("#totp-setting-modal").modal("setting",{duration:100,onApprove:function(){return!1},onShow:function(){g.$broadcast("on.two_factor_auth.method")},onVisible:function(){setTimeout(function(){$("totp-setting-modal").find("input:first").trigger("focus")},0)},onHide:function(){}}).modal("show"),a.resolve()},100),a.promise},a.$on("set.required.password",function(a,b){a.currentScope&&a.targetScope&&a.currentScope.$id!==a.targetScope.$id&&(o(b),a.preventDefault())});var o=angular.noop;a.closeTwoFactorAuth=function(){var b=i.close_two_factor_auth({two_factor_code:""});b.then(function(){n.action("hide"),a.method="password",d.success().send("关闭两步验证成功")}),b["catch"](function(a,b){b&&b.code>0&&b.msg.password&&n.action("show")})},a.$on("$destroy",function(){m.deactivate()}),g.$on("on.two_factor_auth.totp",function(b){b&&(a.method="totp")}),i.method(function(b){a.method=b.data}),a.openTotp=function(){g.USER.is_phone_validated&&(a.opening=!0,a.step=1,i.new_totp_info(function(b){a.image_url=b.data.image_url,a.two_factor_code="",a.secret=b.data.secret,a.username=b.data.username}))},a.prevStep=function(){a.step=a.step>1?a.step-1:1},a.nextStep=function(){a.step=a.step<3?a.step+1:3},a.$watch(function(){return $("#input").is(":visible")},function(){$("#input")[0].focus()}),a.verifyCode=function(){if(a.two_factor_code=a.two_factor_code.trim(),!/\d{6}/.test(a.two_factor_code))return void d.fail().send("请输入六位数字");var b=i.verify_2fa_info({twoFactorCode:a.two_factor_code});b.then(function(){n.toggle(),a.$broadcast("required.password.show")}),b["catch"](function(b,c){c&&c.code>0&&c.msg.two_factor_code_error&&(a.two_factor_code="")})},o=function(b){var c=i.open_totp({twoFactorCode:a.two_factor_code,password:b});c.then(function(){a.opening=!1,n.action("hide"),a.method="totp",d.success().send("成功开启两步验证！")}),c["catch"](function(a,b){b&&b.code>0&&b.msg.two_factor_code_error?n.action("hide"):n.action("show")})}}]),angular.module("app").controller("ActivateEmailModalCtrl",["$scope","$rootScope","User","Setting","Flash","$timeout",function(a,b,c,d,e,f){a.form={email:b.USER.email,j_captcha:""},a.refreshCaptcha=function(){f(function(){a.captcha=d.api_host+"/api/getCaptcha?code="+Math.random()},100)},a.$on("activate.email.show",function(){a.refreshCaptcha(),a.captcha=""}),a.activateEmail=function(){if(!a.form.j_captcha)return void e.fail().send("请输入验证码");a.sending=!0;var b=c.send_activate(a.form,function(b){b.data&&e.success().send("激活邮件发送成功，请注意查收"),a.$emit("activate.email.success")});b["catch"](function(){a.refreshCaptcha()}),b["finally"](function(){a.sending=!1})}}]),angular.module("app").controller("AddFriendController",["$scope","$rootScope","User","Errors","Common","InviteFriendService","RegisterService","Flash","RequestValidModalService","$timeout",function(a,b,c,d,e,f,g,h,i,j){a.j_captcha="",a.captcha="",a.doValid=function(){c.request_valid({type:0},{j_captcha:a.j_captcha}).then(function(a){})};var k=b.USER;a.friends=[],a.selected_users=[],a.single_user=!1,a.key="",a.loading=!1,a.loaded=!1;var l=function(a){return angular.forEach(a,function(a){a.status=0}),a};a.loadFriend=function(b){b.length>0?(a.loading=!0,a.loaded=!1,a.friends=[],c.search({key:b},function(b){a.loaded=!0,a.loading=!1,0==b.code?(a.friends=l(b.data||[]),a.single_user=1==a.friends.length&&a.friends[0]):d.handle(b)})):(a.friends=[],a.loaded=!1)},a.selectFriend=function(b){b.selected=!b.selected,b.selected?a.selected_users.push(b):a.removeSelected(b)},a.removeSelected=function(b){return b.selected=!1,a.selected_users=e.removeOfId(a.selected_users,b.id),a.friends=e.replaceWith(a.friends,b),!1},a.doFollow=function(b){if(b&&0==b.status){var d=c.follow({users:b.global_key},{},function(c){a.$emit("friend.add",b),a.$broadcast("friend.add",b),k.follows_count++,b.status=1});d["catch"](function(c,d){return d&&1==d.code&&(b.status=2,b.msg=d.msg),d&&907==d.code&&i.onAfterHide(function(){j(function(){$("#add-friend-modal").modal("show"),a.key=b.global_key,a.loadFriend(b.global_key)},700),i.offAfterHide()}),!1})}},a.doUnfollow=function(b){if(b){var d=c.unfollow({users:b.global_key},{},function(c){a.$emit("friend.remove",b),a.$broadcast("friend.remove",b),b.status=0});d["catch"](function(a,c){return b.status=2,b.msg=c.msg,!1})}},a.isEmail=function(b){return g.isEmail(b)&&a.USER.email!==b},a.inviteFriend=function(){var b="Hi，我推荐你试试 https://coding.net 这个网站，感觉很不错哦！";f.invite(a.key,b,f.INVITE_FRIEND_LIMIT),$("#add-friend-modal").modal("hide")},$("#add-friend-modal").modal("setting",{allowMultiple:!0,onHide:function(){a.friends=[],a.selected_users=[],a.key="",a.loaded=!1},onShow:function(){b.InviteFriendModal.activate()}}),f.onAfterInvite(function(b,c,d,e){e===f.INVITE_FRIEND_LIMIT&&($("#add-friend-modal").modal("show"),a.key=c,a.loadFriend(c),d&&h.success().send("已向 "+c+" 发送邀请邮件！"))}),$("#add-friend-modal").on("click",".avatar",function(a){$("#add-friend-modal").modal("hide")})}]),angular.module("app").controller("MyGroupController",["$scope","location","Groups","Group","$routeParams","$route",function(a,b,c,d,e,f){a.groups={},a.group_creating=!1,a.group={};var g=function(){c.query(function(b){0==b.code&&(a.groups=b.data)})};a.createGroup=function(c){a.group_creating=!0,d.create(c,function(c){if(a.group_creating=!1,1e3==c.code)return void b.path("/login");if(0==c.code){var d=c.data;return void(location.href=d)}$.extend(a,{},c)})},g()}]),angular.module("app").controller("InviteFriendController",["$scope","$rootScope","InviteFriendService","User","$timeout","RequestValidModalService","Flash","Setting",function(a,b,c,d,e,f,g,h){a.copied=!1,a.j_captcha="",a.captcha="",a.doValid=function(){d.request_valid({type:4},{j_captcha:a.j_captcha}).then(function(a){})};var i=b.PROJECT,j=b.$watch("PROJECT",function(a){a&&(i=a,j())});a.form={email:"",content:""},a.inviting=!1,a.invited=!1,c.onInvite(function(b,d,e){a.inviting=!1,a.invited=!1,$("#invite-friend-modal").modal("setting",{duration:200,closable:!1,allowMultiple:!1,onHide:function(){c.afterInvite(a.form.email,a.invited)},onShow:function(){k()}}).modal("show"),d&&(a.form.email=d),0===a.form.content.length&&e&&(a.form.content=e)}),a.inviteFriend=function(){a.inviting=!0;var b=c.id(),g=b===c.INVITE_FRIEND_LIMIT?d.invite(a.form):d.inviteMember(angular.extend({username:i.owner_user_name,project_name:i.name},a.form),{});g.then(function(){a.invited=!0,$("#invite-friend-modal").modal("hide")}),g["catch"](function(a,b){return b&&2204!==b.code?void 0:($("#invite-friend-modal").modal("hide"),f.onAfterHide(function(){b&&2204===b.code&&e(function(){$("#invite-friend-modal").modal("show")},700),f.offAfterHide()}),!1)}),g["finally"](function(){a.inviting=!1})};var k=function(){var b=d.inviteNotLimited();b.then(function(b){a.invite_url=h.host+"/register?key="+b.data})};a.doCopy=function(){a.copied=!0,g.success().send("链接已复制到粘贴板")},a.getCopy=function(){return a.invite_url}}]).service("InviteFriendService",["$rootScope","$timeout",function(a,b){var c="on.invite.friend",d=c+".after",e="member",f="friend",g=4,h=null,i=700,j=function(d,e,f){h=f,b(function(){a.$broadcast(c,d,e)},i)},k=function(b){a.$on(c,b)},l=function(c,e){b(function(){a.$broadcast(d,c,e,h)},i)},m=function(b){a.$on(d,b)},n=function(){return h};return{invite:j,onInvite:k,afterInvite:l,onAfterInvite:m,id:n,INVITE_FRIEND:f,INVITE_MEMBER:e,INVITE_FRIEND_LIMIT:g}}]),angular.module("app").controller("WeixinPaymentController",["$rootScope","$route","$scope","$location","Payment",function(a,b,c,d,e){c.charge_id=d.search().charge_id,c.qr="",c.status,c.price,e.get_weixin_qr({charge_id:c.charge_id},{},function(a){c.qr=a.data.qr_url});var f=function(){e.get({id:c.charge_id},function(a){c.status=a.data.status,c.price=a.data.price,1==c.status&&(window.clearInterval(g),window.setTimeout(function(){window.close()},3e3))})},g=window.setInterval(f,1e3);c.$on("$destroy",function(){window.clearInterval(g)})}]),angular.module("app").controller("MyProjectActivitiesController",["$scope","$routeParams",function(a,b){}]),angular.module("app").controller("ProjectCreateController",["$scope","$rootScope","Project","$location","ProjectVersions","Payment","Flash","User","Common","ModalService",function(a,b,c,d,e,f,g,h,i,j){a.init_repo=!0,a.project_creating=!1,a.show_warn_osc=!1,a.enterise_plan=!1,a.summary={},a.quotaOverflow=!1,a.project={type:1,gitEnabled:!0,gitReadmeEnabled:!1,gitIgnore:"no",gitLicense:"no",vcsType:"git",importFrom:""},a.seniorForm={version:"free",period:"month",renewal:!0,selectedOwner:{}},a.periods={free:e.free.period,dev:e.dev.period,pro:e.pro.period};var k=a.password_required_modal=j.instance("password-required-modal");
a.password_words="创建项目";var l=angular.noop,m=function(){var c=f.summary();c.then(function(c){var d=a.summary=c.data||{},e=a.USER;a.quotaOverflow=b.isExpActive("vip")&&(1===e.vip&&d["private"]>=2||2===e.vip&&d["private"]>=5||3===e.vip&&d["private"]>=100)})};m(),a.createProject=function(b){if(2!==b.type||!a.quotaOverflow){var h=e.humanToData(a.seniorForm),i=_.map(a.selected_users,"id"),j=e[h.plan].limits.member,m=b;if(m=$.extend(m,{members:i.join(",")}),i.length>j-1)return void g.fail("超出最大人数");if(""==b.name)return void g.fail("项目名称不能为空");b.joinTeam=a.seniorForm.selectedOwner.joinTeam,b.teamGK=a.seniorForm.selectedOwner.globalKey,h.plan>1?f.balance(function(b){a.balance=+b.data||0,o(a.seniorForm),a.insufficient?g.fail().send('余额不足，请点击<a href="/user/account/top-up" target="_blank">这里</a>进行充值。'):(k.toggle(),a.$broadcast("required.password.show"),l=function(b){m=$.extend(m,{two_factor_code:b}),m=$.extend(m,h),a.voucher&&(m=$.extend(m,{voucherCode:a.voucher.code})),a.project_creating=!0;var e=c.create(m);e.then(function(b){k.action("hide"),a.project_creating=!1;var c=b.data;d.path(c),a.$emit("project.create")}),e["catch"](function(a,b){b&&b.code>0&&b.msg.password?k.action("show"):k.action("hide")}),e["finally"](function(){a.project_creating=!1})})}):(a.project_creating=!0,c.create(b,function(b){a.project_creating=!1;var c=b.data;d.path(c),a.$emit("project.create")})["catch"](function(){a.project_creating=!1}))}},a.$on("set.required.password",function(a,b){a.currentScope&&a.targetScope&&a.currentScope.$id!==a.targetScope.$id&&(l(b),a.preventDefault())}),a.showSenior=!1,a.showMember=!1,a.project_versions=e;var n=function(){f.balance(function(b){a.balance=+b.data||0})};a.voucher=void 0;var o=function(b){if(angular.isDefined(b)){if("free"===b.version?a.max_member=10:"dev"===b.version?a.max_member=20:"pro"===b.version&&(a.max_member=50),r(),"free"===b.version)return a.voucher=void 0,a.version_price=0,void a.$broadcast("project.voucher.cancel",a.voucher);var c=e[b.version];a.voucher?(a.version_price=c.period[b.period]-a.voucher.money,a.version_price<0&&"free"!=a.seniorForm.version&&(a.version_price+=a.voucher.money,a.voucher=void 0,a.$broadcast("project.voucher.cancel",a.voucher),g.warn().send("代金券金额大于消费金额"))):a.version_price=c.period[b.period],a.insufficient=a.balance<a.version_price}};a.$watchCollection("seniorForm",o),a.$watch("balance",function(b){angular.isDefined(b)&&o(a.seniorForm)}),a.$watch("project.type",function(b){1==b&&(a.seniorForm.version="free")}),a.$on("project.voucher.change",function(b,c){a.voucher=c,o(a.seniorForm)}),n(),a.selected_users=[],a.member_users=[],a.max_member=10,a.member_users.push(a.USER);var p=function(b){return $.map(b,function(b){var c=b;return $.each(a.selected_users,function(a,d){d.id==b.id&&(c.selected=!0)}),c})},q=function(b){if(b.is_member)return!0;var c=!!i.findOfId(a.member_users,b.id);return c?b.is_member=!0:b.is_member=!1,c};a.loadFriend=function(b){b.length>0?(a.selected_menu=null,s(function(){return h.search({key:b})})):(a.friends=[],a.loaded=!1)},a.selectFriend=function(b){if(b.global_key!==a.USER.global_key){if(b.is_member)return void a.removeSelected(b);if(b.selected=!b.selected,b.selected){if(a.member_size<=0)return void(b.selected=!1);a.selected_users.splice(0,0,b),r()}else a.removeSelected(b)}};var r=function(){var b=a.max_member-a.selected_users.length-a.member_users.length;a.member_size=0>=b?0:b};r(),a.max_member_warning_info="已到达到成员最大数，不能再继续选择成员！",a.removeSelected=function(b,c){return b.selected=!1,a.friends=i.replaceWith(a.friends,b),a.selected_users=i.removeOfId(a.selected_users,b.id),r(),c?(c.stopPropagation(),!1):void 0};var s=function(b,c){a.loading=!0,a.loaded=!1,a.friends=[];var d=b&&b();return d&&d.then(function(b){var d=b.data&&angular.isArray(b.data)?b.data:b.data.list||[];d=c&&c(d)||d,angular.forEach(d,function(a){a.is_member=q(a)}),a.friends=p(d||[])})&&d["finally"](function(){a.loaded=!0,a.loading=!1}),d};a.loadFriends=function(b){a.selected_menu="friend",a.key="",s(function(){return h.friends({page:b||1,pageSize:1e3})})},a.loadFollowers=function(b){a.selected_menu="follower",a.key="",s(function(){return h.followers({page:b||1,pageSize:1e3})})},a.loadProjectMembers=function(b){a.selected_menu=b,a.key="",s(function(){return c.members({id:b})},function(a){return i.m2u(a)})},a.selectMenuIs=function(a,b){return"member"===a&&"undefined"==typeof b?!1:isNaN(this.selected_menu)?a===this.selected_menu:"member"===a&&b===this.selected_menu},a.selectUserTitle=function(a){return a.name},h.enterprise_plan(function(b){a.enterise_plan=b.data})}]),angular.module("app").controller("RequestValidController",["$scope","User","Setting","Flash","RequestValidModalService","$rootScope","Common",function(a,b,c,d,e,f,g){a.j_captcha="",a.DEFAULT_LIMIT=e.DEFAULT_LIMIT,a.POST_LIMIT=e.POST_LIMIT,a.MESSAGE_LIMIT=e.MESSAGE_LIMIT,a.FOLLOW_LIMIT=e.FOLLOW_LIMIT,a.INVITE_FRIEND_LIMIT=e.INVITE_FRIEND_LIMIT,$("#request-valid-modal").modal("setting",{duration:100,onApprove:function(){return!1},onShow:function(){},onVisible:function(){e.beforeShow(),g.safeApply.call(a,function(){var b=e.getType();a.type=b,a.captcha=c.api_host+"/api/getCaptcha?type="+b+"&code="+Math.random()}),setTimeout(function(){$("#request-valid-modal").find("input:first").trigger("focus")},0)},onHide:function(){h(),a.j_captcha="",e.afterHide()}}),a.doValid=function(c){if(!c)return!1;var d={j_captcha:c};a.type===e.MESSAGE_LIMIT&&(d.receiver_global_key=e.getMessageReceiver());var f=b.request_valid({type:e.getType()},d);f.then(function(){$("#request-valid-modal").modal("hide")}),f["catch"](function(){h()})};var h=a.refreshCaptcha=function(){return a.captcha=c.api_host+"/api/getCaptcha?type="+e.getType()+"&code="+Math.random()};h()}]).service("RequestValidModalService",["$rootScope",function(a){function b(){return u}function c(a){return 0>a&&(a=0),u=a,this}function d(a){return v=a,this}function e(){return v}function f(){$("#request-valid-modal").modal("show")}function g(){$("#request-valid-modal").modal("hide")}function h(){w()}function i(){x()}function j(a){angular.isFunction(a)&&(w=a)}function k(a){angular.isFunction(a)&&(x=a)}function l(a){w=function(){}}function m(a){x=function(){}}var n=0,o=1,p=2,q=3,r=4,s="REQUEST_VALID_MODAL_SHOW_EVENT",t="REQUEST_VALID_MODAL_HIDE_EVENT",u=n,v="",w=function(){},x=function(){};return{DEFAULT_LIMIT:n,POST_LIMIT:o,MESSAGE_LIMIT:p,FOLLOW_LIMIT:q,INVITE_FRIEND_LIMIT:r,SHOW_EVENT:s,HIDE_EVENT:t,getType:b,setType:c,getMessageReceiver:e,setMessageReceiver:d,show:f,hide:g,beforeShow:h,afterHide:i,onBeforeShow:j,onAfterHide:k,offBeforeShow:l,offAfterHide:m}}]),angular.module("app").controller("SendBobbleController",["$rootScope","$scope","$localStorage","Tweet","TweetTopic","Flash","Common",function(a,b,c,d,e,f,g){var h=b.USER;b.topics=a.tweetPop.default_topics,b.placeholder=a.tweetPop.placeholder,$("#send-bobble-modal").modal("setting",{duration:100,onShow:function(){e.default_topics(function(c){a.tweetPop.default_topics=c.data||[],b.topics=a.tweetPop.default_topics})}}),b.$on("feed.editor.submit",function(a,c,e){if(a.stopPropagation(),e.pending(),$.isEmptyObject(c))return void e.error();var i=d.create({content:c},function(a){e.done();var c=g.wrapperTweetIntoActivity(a.data,h);b.$broadcast("activity.add",c),$("#send-bobble-modal").modal("hide"),f.success().send("冒泡发布成功！")});i["catch"](function(){e.error()})}),b.bobble_editor_options={content:c.tweet_modal_message||""},b.$watch("bobble_editor_options.content",function(a){c.tweet_modal_message=a})}]),angular.module("app").controller("SendMessageController",["$scope","$localStorage","$rootScope","$route","User","Messages","Errors","Flash","Setting","RequestValidModalService","$timeout",function(a,b,c,d,e,f,g,h,i,j,k){a.j_captcha="",a.captcha="";var l=1024;a.doValid=function(){e.request_valid({type:1},{j_captcha:a.j_captcha}).then(function(a){})},$("#send-message-modal").modal("setting",{duration:100,onApprove:function(){return!1},onShow:function(){a.no_receiver=!c.send_msg_target,c.send_msg_target&&(a.receiver_global_key=c.send_msg_target.global_key)},onVisible:function(){k(function(){$("#send-message-modal").find("input:first").trigger("focus")},0)},onHide:function(){}}),a.sending=!1,a.receiver="",a.receiver_global_key="",a.getUserByName=function(){return a.no_receiver&&!a.receiver?void h.fail().send("请输入用户昵称。"):a.no_receiver?void e.byName({name:a.receiver},function(b){0===b.code?b.data.global_key&&""!==b.data.global_key?(a.receiver_not_found=!1,a.receiver_global_key=b.data.global_key,a.$broadcast("feed.editor.do.submit")):(a.receiver_not_found=!0,a.not_found_user=a.receiver,h.fail().send("无法找到用户:"+a.not_found_user)):g.handle(b)}):void a.$broadcast("feed.editor.do.submit")},a.feed_editor={content:b.send_message||""},a.$watch("feed_editor.content",function(a){b.send_message=a}),a.$on("feed.editor.submit",function(b,e,g){if(g.pending(),b.stopPropagation(),$.isEmptyObject(e))return h.fail().send("请输入私信内容！"),void g.error();var i=function(b,c){if(a.sending=!0,c.length>l)return h.fail().send("私信内容不能超过 "+l+" 个字符！"),void g.error();var e=f.send_message({receiver_global_key:b,content:c},function(b){0===b.code&&(g.done(),a.receiver="",h.success().send("发送成功！"),a.sending=!1,d.reload()),$("#send-message-modal").modal("hide")});e["finally"](function(){a.sending=!1}),e["catch"](function(b,c){c&&3302!==c.code||($("#send-message-modal").modal("hide"),j.onAfterHide(function(){c&&3302===c.code&&k(function(){$("#send-message-modal").modal("show")},700),j.offAfterHide()}),k(function(){j.setType(j.MESSAGE_LIMIT).setMessageReceiver(a.receiver_global_key).show()},1e3),g.error())})};if(a.no_receiver){if(!a.receiver)return h.fail().send("无法找到用户:"+a.receiver),void g.error();a.receiver_global_key&&i(a.receiver_global_key,e)}else i(c.send_msg_target.global_key,e)})}]),angular.module("app").controller("ResetEmailModalCtrl",["$scope","$rootScope","Flash","RegisterService","User","Email","Setting","ModalService","$timeout",function(a,b,c,d,e,f,g,h,i){var j=b.USER;a.form={},a.reseting=!1;var k=a.password_required_modal=h.get("password-required-modal");a.password_words="修改邮箱";var l=a.checkEmail=function(a){return a.email?j.email===a.email?(c.fail().send("不能修改成当前邮箱"),!1):d.isEmail(a.email)?d.isNotIncluded(a.email)?(c.warn().send("该邮箱可能接收不到邮件，建议改用其他邮箱"),!0):!0:(c.fail().send("邮件格式错误"),!1):(c.fail().send("邮箱不能为空"),!1)},m=angular.noop;a.$on("set.required.password",function(a,b){m(b),a.preventDefault()}),a.resetEmail=function(b){l(b)&&(a.$emit("reset.email.success"),m=function(d){a.reseting=!0;var e=f.reset_email({},{email:b.email,two_factor_code:d},function(){k.toggle(),b.email="",b={},c.success().send("验证邮件发送成功！<br>请尽快去邮箱查收验证邮件以确认修改。<br>如若在收件箱中未看到激活邮件，请留意一下垃圾邮件箱(T_T)。")});e["catch"](function(a,b){b&&b.code>0&&b.msg.password&&k.action("show")}),e["finally"](function(){a.reseting=!1})},h.get("reset_email_modal").action("hide"),i(function(){k.toggle(),a.$parent.$broadcast("required.password.show")},1e3))}}]),angular.module("constants").constant("PROJECT",{resolve:function(a){return a.invoke(["$q","$rootScope",function(a,b){var c=a.defer(),d=function(){c.resolve(b.PROJECT)},e=function(){c.reject()};if(b.PROJECT)b.$evalAsync(d);else if(b.PROJECT===!1)b.$evalAsync(e);else var f=b.$watch("PROJECT",function(){b.PROJECT?(d(),f()):b.PROJECT===!1&&(e(),f())});return c.promise}])}}),angular.module("constants").constant("USER",{resolve:function(a){return a.invoke(["$q","$rootScope",function(a,b){var c=a.defer(),d=function(){c.resolve(b.USER)},e=function(){c.reject()};if(b.USER)b.$evalAsync(d);else if(b.USER===!1)b.$evalAsync(e);else var f=b.$watch("USER",function(){b.USER?(d(),f()):b.USER===!1&&(e(),f())});return c.promise}])}}),angular.module("constants").constant("DepotResolver",["$q","$rootScope",function(a,b){var c=a.defer(),d=function(){c.resolve(b.DEPOT)},e=function(){c.reject()};return b.DEPOT&&b.$evalAsync(d),b.DEPOT===!1?b.$evalAsync(e):b.$watch("DEPOT",function(){b.DEPOT?d():b.DEPOT===!1&&e()}),c.promise}]),angular.module("constants").constant("Emoji",{normal:[{code:"+1",image:"emojis/+1.png"},{code:"-1",image:"emojis/-1.png"},{code:"100",image:"emojis/100.png"},{code:"1234",image:"emojis/1234.png"},{code:"8ball",image:"emojis/8ball.png"},{code:"a",image:"emojis/a.png"},{code:"ab",image:"emojis/ab.png"},{code:"abc",image:"emojis/abc.png"},{code:"abcd",image:"emojis/abcd.png"},{code:"accept",image:"emojis/accept.png"},{code:"aerial_tramway",image:"emojis/aerial_tramway.png"},{code:"airplane",image:"emojis/airplane.png"},{code:"alarm_clock",image:"emojis/alarm_clock.png"},{code:"alien",image:"emojis/alien.png"},{code:"ambulance",image:"emojis/ambulance.png"},{code:"anchor",image:"emojis/anchor.png"},{code:"angel",image:"emojis/angel.png"},{code:"anger",image:"emojis/anger.png"},{code:"angry",image:"emojis/angry.png"},{code:"anguished",image:"emojis/anguished.png"},{code:"ant",image:"emojis/ant.png"},{code:"apple",image:"emojis/apple.png"},{code:"aquarius",image:"emojis/aquarius.png"},{code:"aries",image:"emojis/aries.png"},{code:"arrows_clockwise",image:"emojis/arrows_clockwise.png"},{code:"arrows_counterclockwise",image:"emojis/arrows_counterclockwise.png"},{code:"arrow_backward",image:"emojis/arrow_backward.png"},{code:"arrow_double_down",image:"emojis/arrow_double_down.png"},{code:"arrow_double_up",image:"emojis/arrow_double_up.png"},{code:"arrow_down",image:"emojis/arrow_down.png"},{code:"arrow_down_small",image:"emojis/arrow_down_small.png"},{code:"arrow_forward",image:"emojis/arrow_forward.png"},{code:"arrow_heading_down",image:"emojis/arrow_heading_down.png"},{code:"arrow_heading_up",image:"emojis/arrow_heading_up.png"},{code:"arrow_left",image:"emojis/arrow_left.png"},{code:"arrow_lower_left",image:"emojis/arrow_lower_left.png"},{code:"arrow_lower_right",image:"emojis/arrow_lower_right.png"},{code:"arrow_right",image:"emojis/arrow_right.png"},{code:"arrow_right_hook",image:"emojis/arrow_right_hook.png"},{code:"arrow_up",image:"emojis/arrow_up.png"},{code:"arrow_upper_left",image:"emojis/arrow_upper_left.png"},{code:"arrow_upper_right",image:"emojis/arrow_upper_right.png"},{code:"arrow_up_down",image:"emojis/arrow_up_down.png"},{code:"arrow_up_small",image:"emojis/arrow_up_small.png"},{code:"art",image:"emojis/art.png"},{code:"articulated_lorry",image:"emojis/articulated_lorry.png"},{code:"astonished",image:"emojis/astonished.png"},{code:"atm",image:"emojis/atm.png"},{code:"b",image:"emojis/b.png"},{code:"baby",image:"emojis/baby.png"},{code:"baby_bottle",image:"emojis/baby_bottle.png"},{code:"baby_chick",image:"emojis/baby_chick.png"},{code:"baby_symbol",image:"emojis/baby_symbol.png"},{code:"baggage_claim",image:"emojis/baggage_claim.png"},{code:"balloon",image:"emojis/balloon.png"},{code:"ballot_box_with_check",image:"emojis/ballot_box_with_check.png"},{code:"bamboo",image:"emojis/bamboo.png"},{code:"banana",image:"emojis/banana.png"},{code:"bangbang",image:"emojis/bangbang.png"},{code:"bank",image:"emojis/bank.png"},{code:"barber",image:"emojis/barber.png"},{code:"bar_chart",image:"emojis/bar_chart.png"},{code:"baseball",image:"emojis/baseball.png"},{code:"basketball",image:"emojis/basketball.png"},{code:"bath",image:"emojis/bath.png"},{code:"bathtub",image:"emojis/bathtub.png"},{code:"battery",image:"emojis/battery.png"},{code:"bear",image:"emojis/bear.png"},{code:"bee",image:"emojis/bee.png"},{code:"beer",image:"emojis/beer.png"},{code:"beers",image:"emojis/beers.png"},{code:"beetle",image:"emojis/beetle.png"},{code:"beginner",image:"emojis/beginner.png"},{code:"bell",image:"emojis/bell.png"},{code:"bento",image:"emojis/bento.png"},{code:"bicyclist",image:"emojis/bicyclist.png"},{code:"bike",image:"emojis/bike.png"},{code:"bikini",image:"emojis/bikini.png"},{code:"bird",image:"emojis/bird.png"},{code:"birthday",image:"emojis/birthday.png"},{code:"black_circle",image:"emojis/black_circle.png"},{code:"black_joker",image:"emojis/black_joker.png"},{code:"black_nib",image:"emojis/black_nib.png"},{code:"black_square",image:"emojis/black_square.png"},{code:"black_square_button",image:"emojis/black_square_button.png"},{code:"blossom",image:"emojis/blossom.png"},{code:"blowfish",image:"emojis/blowfish.png"},{code:"blue_book",image:"emojis/blue_book.png"},{code:"blue_car",image:"emojis/blue_car.png"},{code:"blue_heart",image:"emojis/blue_heart.png"},{code:"blush",image:"emojis/blush.png"},{code:"boar",image:"emojis/boar.png"},{code:"boat",image:"emojis/boat.png"},{code:"bomb",image:"emojis/bomb.png"},{code:"book",image:"emojis/book.png"},{code:"bookmark",image:"emojis/bookmark.png"},{code:"bookmark_tabs",image:"emojis/bookmark_tabs.png"},{code:"books",image:"emojis/books.png"},{code:"boom",image:"emojis/boom.png"},{code:"boot",image:"emojis/boot.png"},{code:"bouquet",image:"emojis/bouquet.png"},{code:"bow",image:"emojis/bow.png"},{code:"bowling",image:"emojis/bowling.png"},{code:"bowtie",image:"emojis/bowtie.png"},{code:"boy",image:"emojis/boy.png"},{code:"bread",image:"emojis/bread.png"},{code:"bride_with_veil",image:"emojis/bride_with_veil.png"},{code:"bridge_at_night",image:"emojis/bridge_at_night.png"},{code:"briefcase",image:"emojis/briefcase.png"},{code:"broken_heart",image:"emojis/broken_heart.png"},{code:"bug",image:"emojis/bug.png"},{code:"bulb",image:"emojis/bulb.png"},{code:"bullettrain_front",image:"emojis/bullettrain_front.png"},{code:"bullettrain_side",image:"emojis/bullettrain_side.png"},{code:"bus",image:"emojis/bus.png"},{code:"busstop",image:"emojis/busstop.png"},{code:"busts_in_silhouette",image:"emojis/busts_in_silhouette.png"},{code:"bust_in_silhouette",image:"emojis/bust_in_silhouette.png"},{code:"cactus",image:"emojis/cactus.png"},{code:"cake",image:"emojis/cake.png"},{code:"calendar",image:"emojis/calendar.png"},{code:"calling",image:"emojis/calling.png"},{code:"camel",image:"emojis/camel.png"},{code:"camera",image:"emojis/camera.png"},{code:"cancer",image:"emojis/cancer.png"},{code:"candy",image:"emojis/candy.png"},{code:"capital_abcd",image:"emojis/capital_abcd.png"},{code:"capricorn",image:"emojis/capricorn.png"},{code:"car",image:"emojis/car.png"},{code:"card_index",image:"emojis/card_index.png"},{code:"carousel_horse",image:"emojis/carousel_horse.png"},{code:"cat",image:"emojis/cat.png"},{code:"cat2",image:"emojis/cat2.png"},{code:"cd",image:"emojis/cd.png"},{code:"chart",image:"emojis/chart.png"},{code:"chart_with_downwards_trend",image:"emojis/chart_with_downwards_trend.png"},{code:"chart_with_upwards_trend",image:"emojis/chart_with_upwards_trend.png"},{code:"checkered_flag",image:"emojis/checkered_flag.png"},{code:"cherries",image:"emojis/cherries.png"},{code:"cherry_blossom",image:"emojis/cherry_blossom.png"},{code:"chestnut",image:"emojis/chestnut.png"},{code:"chicken",image:"emojis/chicken.png"},{code:"children_crossing",image:"emojis/children_crossing.png"},{code:"chocolate_bar",image:"emojis/chocolate_bar.png"},{code:"christmas_tree",image:"emojis/christmas_tree.png"},{code:"church",image:"emojis/church.png"},{code:"cinema",image:"emojis/cinema.png"},{code:"circus_tent",image:"emojis/circus_tent.png"},{code:"city_sunrise",image:"emojis/city_sunrise.png"},{code:"city_sunset",image:"emojis/city_sunset.png"},{code:"cl",image:"emojis/cl.png"},{code:"clap",image:"emojis/clap.png"},{code:"clapper",image:"emojis/clapper.png"},{code:"clipboard",image:"emojis/clipboard.png"},{code:"clock1",image:"emojis/clock1.png"},{code:"clock10",image:"emojis/clock10.png"},{code:"clock1030",image:"emojis/clock1030.png"},{code:"clock11",image:"emojis/clock11.png"},{code:"clock1130",image:"emojis/clock1130.png"},{code:"clock12",image:"emojis/clock12.png"},{code:"clock1230",image:"emojis/clock1230.png"},{code:"clock130",image:"emojis/clock130.png"},{code:"clock2",image:"emojis/clock2.png"},{code:"clock230",image:"emojis/clock230.png"},{code:"clock3",image:"emojis/clock3.png"},{code:"clock330",image:"emojis/clock330.png"},{code:"clock4",image:"emojis/clock4.png"},{code:"clock430",image:"emojis/clock430.png"},{code:"clock5",image:"emojis/clock5.png"},{code:"clock530",image:"emojis/clock530.png"},{code:"clock6",image:"emojis/clock6.png"},{code:"clock630",image:"emojis/clock630.png"},{code:"clock7",image:"emojis/clock7.png"},{code:"clock730",image:"emojis/clock730.png"},{code:"clock8",image:"emojis/clock8.png"},{code:"clock830",image:"emojis/clock830.png"},{code:"clock9",image:"emojis/clock9.png"},{code:"clock930",image:"emojis/clock930.png"},{code:"closed_book",image:"emojis/closed_book.png"},{code:"closed_lock_with_key",image:"emojis/closed_lock_with_key.png"},{code:"closed_umbrella",image:"emojis/closed_umbrella.png"},{code:"cloud",image:"emojis/cloud.png"},{code:"clubs",image:"emojis/clubs.png"},{code:"cn",image:"emojis/cn.png"},{code:"cocktail",image:"emojis/cocktail.png"},{code:"coffee",image:"emojis/coffee.png"},{code:"cold_sweat",image:"emojis/cold_sweat.png"},{code:"collision",image:"emojis/collision.png"},{code:"computer",image:"emojis/computer.png"},{code:"confetti_ball",image:"emojis/confetti_ball.png"},{code:"confounded",image:"emojis/confounded.png"},{code:"confused",image:"emojis/confused.png"},{code:"congratulations",image:"emojis/congratulations.png"},{code:"construction",image:"emojis/construction.png"},{code:"construction_worker",image:"emojis/construction_worker.png"},{code:"convenience_store",image:"emojis/convenience_store.png"},{code:"cookie",image:"emojis/cookie.png"},{code:"cool",image:"emojis/cool.png"},{code:"cop",image:"emojis/cop.png"},{code:"copyright",image:"emojis/copyright.png"},{code:"corn",image:"emojis/corn.png"},{code:"couple",image:"emojis/couple.png"},{code:"couplekiss",image:"emojis/couplekiss.png"},{code:"couple_with_heart",image:"emojis/couple_with_heart.png"},{code:"cow",image:"emojis/cow.png"},{code:"cow2",image:"emojis/cow2.png"},{code:"credit_card",image:"emojis/credit_card.png"},{code:"crocodile",image:"emojis/crocodile.png"},{code:"crossed_flags",image:"emojis/crossed_flags.png"},{code:"crown",image:"emojis/crown.png"},{code:"cry",image:"emojis/cry.png"},{code:"crying_cat_face",image:"emojis/crying_cat_face.png"},{code:"crystal_ball",image:"emojis/crystal_ball.png"},{code:"cupid",image:"emojis/cupid.png"},{code:"curly_loop",image:"emojis/curly_loop.png"},{code:"currency_exchange",image:"emojis/currency_exchange.png"},{code:"curry",image:"emojis/curry.png"},{code:"custard",image:"emojis/custard.png"},{code:"customs",image:"emojis/customs.png"},{code:"cyclone",image:"emojis/cyclone.png"},{code:"dancer",image:"emojis/dancer.png"},{code:"dancers",image:"emojis/dancers.png"},{code:"dango",image:"emojis/dango.png"},{code:"dart",image:"emojis/dart.png"},{code:"dash",image:"emojis/dash.png"},{code:"date",image:"emojis/date.png"},{code:"de",image:"emojis/de.png"},{code:"deciduous_tree",image:"emojis/deciduous_tree.png"},{code:"department_store",image:"emojis/department_store.png"},{code:"diamonds",image:"emojis/diamonds.png"},{code:"diamond_shape_with_a_dot_inside",image:"emojis/diamond_shape_with_a_dot_inside.png"},{code:"disappointed",image:"emojis/disappointed.png"},{code:"disappointed_relieved",image:"emojis/disappointed_relieved.png"},{code:"dizzy",image:"emojis/dizzy.png"},{code:"dizzy_face",image:"emojis/dizzy_face.png"},{code:"dog",image:"emojis/dog.png"},{code:"dog2",image:"emojis/dog2.png"},{code:"dollar",image:"emojis/dollar.png"},{code:"dolls",image:"emojis/dolls.png"},{code:"dolphin",image:"emojis/dolphin.png"},{code:"donut",image:"emojis/donut.png"},{code:"door",image:"emojis/door.png"},{code:"doughnut",image:"emojis/doughnut.png"},{code:"do_not_litter",image:"emojis/do_not_litter.png"},{code:"dragon",image:"emojis/dragon.png"},{code:"dragon_face",image:"emojis/dragon_face.png"},{code:"dress",image:"emojis/dress.png"},{code:"dromedary_camel",image:"emojis/dromedary_camel.png"},{code:"droplet",image:"emojis/droplet.png"},{code:"dvd",image:"emojis/dvd.png"},{code:"e-mail",image:"emojis/e-mail.png"},{code:"ear",image:"emojis/ear.png"},{code:"earth_africa",image:"emojis/earth_africa.png"},{code:"earth_americas",image:"emojis/earth_americas.png"},{code:"earth_asia",image:"emojis/earth_asia.png"},{code:"ear_of_rice",image:"emojis/ear_of_rice.png"},{code:"egg",image:"emojis/egg.png"},{code:"eggplant",image:"emojis/eggplant.png"},{code:"eight",image:"emojis/eight.png"},{code:"eight_pointed_black_star",image:"emojis/eight_pointed_black_star.png"},{code:"eight_spoked_asterisk",image:"emojis/eight_spoked_asterisk.png"},{code:"electric_plug",image:"emojis/electric_plug.png"},{code:"elephant",image:"emojis/elephant.png"},{code:"email",image:"emojis/email.png"},{code:"end",image:"emojis/end.png"},{code:"envelope",image:"emojis/envelope.png"},{code:"es",image:"emojis/es.png"},{code:"euro",image:"emojis/euro.png"},{code:"european_castle",image:"emojis/european_castle.png"},{code:"european_post_office",image:"emojis/european_post_office.png"},{code:"evergreen_tree",image:"emojis/evergreen_tree.png"},{code:"exclamation",image:"emojis/exclamation.png"},{code:"expressionless",image:"emojis/expressionless.png"},{code:"eyeglasses",image:"emojis/eyeglasses.png"},{code:"eyes",image:"emojis/eyes.png"},{code:"facepunch",image:"emojis/facepunch.png"},{code:"factory",image:"emojis/factory.png"},{code:"fallen_leaf",image:"emojis/fallen_leaf.png"},{code:"family",image:"emojis/family.png"},{code:"fast_forward",image:"emojis/fast_forward.png"},{code:"fax",image:"emojis/fax.png"},{code:"fearful",image:"emojis/fearful.png"},{code:"feelsgood",image:"emojis/feelsgood.png"},{code:"feet",image:"emojis/feet.png"},{code:"ferris_wheel",image:"emojis/ferris_wheel.png"},{code:"file_folder",image:"emojis/file_folder.png"},{code:"finnadie",image:"emojis/finnadie.png"},{code:"fire",image:"emojis/fire.png"},{code:"fireworks",image:"emojis/fireworks.png"},{code:"fire_engine",image:"emojis/fire_engine.png"},{code:"first_quarter_moon",image:"emojis/first_quarter_moon.png"},{code:"first_quarter_moon_with_face",image:"emojis/first_quarter_moon_with_face.png"},{code:"fish",image:"emojis/fish.png"},{code:"fishing_pole_and_fish",image:"emojis/fishing_pole_and_fish.png"},{code:"fish_cake",image:"emojis/fish_cake.png"},{code:"fist",image:"emojis/fist.png"},{code:"five",image:"emojis/five.png"},{code:"flags",image:"emojis/flags.png"},{code:"flashlight",image:"emojis/flashlight.png"},{code:"floppy_disk",image:"emojis/floppy_disk.png"},{code:"flower_playing_cards",image:"emojis/flower_playing_cards.png"},{code:"flushed",image:"emojis/flushed.png"},{code:"foggy",image:"emojis/foggy.png"},{code:"football",image:"emojis/football.png"},{code:"fork_and_knife",image:"emojis/fork_and_knife.png"},{code:"fountain",image:"emojis/fountain.png"},{code:"four",image:"emojis/four.png"},{code:"four_leaf_clover",image:"emojis/four_leaf_clover.png"},{code:"fr",image:"emojis/fr.png"},{code:"free",image:"emojis/free.png"},{code:"fried_shrimp",image:"emojis/fried_shrimp.png"},{code:"fries",image:"emojis/fries.png"},{code:"frog",image:"emojis/frog.png"},{code:"frowning",image:"emojis/frowning.png"},{code:"fu",image:"emojis/fu.png"},{code:"fuelpump",image:"emojis/fuelpump.png"},{code:"full_moon",image:"emojis/full_moon.png"},{code:"full_moon_with_face",image:"emojis/full_moon_with_face.png"},{code:"game_die",image:"emojis/game_die.png"},{code:"gb",image:"emojis/gb.png"},{code:"gem",image:"emojis/gem.png"},{code:"gemini",image:"emojis/gemini.png"},{code:"ghost",image:"emojis/ghost.png"},{code:"gift",image:"emojis/gift.png"},{code:"gift_heart",image:"emojis/gift_heart.png"},{code:"girl",image:"emojis/girl.png"},{code:"globe_with_meridians",image:"emojis/globe_with_meridians.png"},{code:"goat",image:"emojis/goat.png"},{code:"goberserk",image:"emojis/goberserk.png"},{code:"godmode",image:"emojis/godmode.png"},{code:"golf",image:"emojis/golf.png"},{code:"grapes",image:"emojis/grapes.png"},{code:"green_apple",image:"emojis/green_apple.png"},{code:"green_book",image:"emojis/green_book.png"},{code:"green_heart",image:"emojis/green_heart.png"},{code:"grey_exclamation",image:"emojis/grey_exclamation.png"},{code:"grey_question",image:"emojis/grey_question.png"},{code:"grimacing",image:"emojis/grimacing.png"},{code:"grin",image:"emojis/grin.png"},{code:"grinning",image:"emojis/grinning.png"},{code:"guardsman",image:"emojis/guardsman.png"},{code:"guitar",image:"emojis/guitar.png"},{code:"gun",image:"emojis/gun.png"},{code:"haircut",image:"emojis/haircut.png"},{code:"hamburger",image:"emojis/hamburger.png"},{code:"hammer",image:"emojis/hammer.png"},{code:"hamster",image:"emojis/hamster.png"},{code:"hand",image:"emojis/hand.png"},{code:"handbag",image:"emojis/handbag.png"},{code:"hankey",image:"emojis/hankey.png"},{code:"hash",image:"emojis/hash.png"},{code:"hatched_chick",image:"emojis/hatched_chick.png"},{code:"hatching_chick",image:"emojis/hatching_chick.png"},{code:"headphones",image:"emojis/headphones.png"},{code:"heart",image:"emojis/heart.png"},{code:"heartbeat",image:"emojis/heartbeat.png"},{code:"heartpulse",image:"emojis/heartpulse.png"},{code:"hearts",image:"emojis/hearts.png"},{code:"heart_decoration",image:"emojis/heart_decoration.png"},{code:"heart_eyes",image:"emojis/heart_eyes.png"},{code:"heart_eyes_cat",image:"emojis/heart_eyes_cat.png"},{code:"hear_no_evil",image:"emojis/hear_no_evil.png"},{code:"heavy_check_mark",image:"emojis/heavy_check_mark.png"},{code:"heavy_division_sign",image:"emojis/heavy_division_sign.png"},{code:"heavy_dollar_sign",image:"emojis/heavy_dollar_sign.png"},{code:"heavy_exclamation_mark",image:"emojis/heavy_exclamation_mark.png"},{code:"heavy_minus_sign",image:"emojis/heavy_minus_sign.png"},{code:"heavy_multiplication_x",image:"emojis/heavy_multiplication_x.png"},{code:"heavy_plus_sign",image:"emojis/heavy_plus_sign.png"},{code:"helicopter",image:"emojis/helicopter.png"},{code:"herb",image:"emojis/herb.png"},{code:"hibiscus",image:"emojis/hibiscus.png"},{code:"high_brightness",image:"emojis/high_brightness.png"},{code:"high_heel",image:"emojis/high_heel.png"},{code:"hocho",image:"emojis/hocho.png"},{code:"honeybee",image:"emojis/honeybee.png"},{code:"honey_pot",image:"emojis/honey_pot.png"},{code:"horse",image:"emojis/horse.png"},{code:"horse_racing",image:"emojis/horse_racing.png"},{code:"hospital",image:"emojis/hospital.png"},{code:"hotel",image:"emojis/hotel.png"},{code:"hotsprings",image:"emojis/hotsprings.png"},{code:"hourglass",image:"emojis/hourglass.png"},{code:"hourglass_flowing_sand",image:"emojis/hourglass_flowing_sand.png"},{code:"house",image:"emojis/house.png"},{code:"house_with_garden",image:"emojis/house_with_garden.png"},{code:"hurtrealbad",image:"emojis/hurtrealbad.png"},{code:"hushed",image:"emojis/hushed.png"},{code:"icecream",image:"emojis/icecream.png"},{code:"ice_cream",image:"emojis/ice_cream.png"},{code:"id",image:"emojis/id.png"},{code:"ideograph_advantage",image:"emojis/ideograph_advantage.png"},{code:"imp",image:"emojis/imp.png"},{code:"inbox_tray",image:"emojis/inbox_tray.png"},{code:"incoming_envelope",image:"emojis/incoming_envelope.png"},{code:"information_desk_person",image:"emojis/information_desk_person.png"},{code:"information_source",image:"emojis/information_source.png"},{code:"innocent",image:"emojis/innocent.png"},{code:"interrobang",image:"emojis/interrobang.png"},{code:"iphone",image:"emojis/iphone.png"},{code:"it",image:"emojis/it.png"},{code:"izakaya_lantern",image:"emojis/izakaya_lantern.png"},{code:"jack_o_lantern",image:"emojis/jack_o_lantern.png"},{code:"japan",image:"emojis/japan.png"},{code:"japanese_castle",image:"emojis/japanese_castle.png"},{code:"japanese_goblin",image:"emojis/japanese_goblin.png"},{code:"japanese_ogre",image:"emojis/japanese_ogre.png"},{code:"jeans",image:"emojis/jeans.png"},{code:"joy",image:"emojis/joy.png"},{code:"joy_cat",image:"emojis/joy_cat.png"},{code:"jp",image:"emojis/jp.png"},{code:"key",image:"emojis/key.png"},{code:"keycap_ten",image:"emojis/keycap_ten.png"},{code:"kimono",image:"emojis/kimono.png"},{code:"kiss",image:"emojis/kiss.png"},{code:"kissing",image:"emojis/kissing.png"},{code:"kissing_cat",image:"emojis/kissing_cat.png"},{code:"kissing_closed_eyes",image:"emojis/kissing_closed_eyes.png"
},{code:"kissing_face",image:"emojis/kissing_face.png"},{code:"kissing_heart",image:"emojis/kissing_heart.png"},{code:"kissing_smiling_eyes",image:"emojis/kissing_smiling_eyes.png"},{code:"koala",image:"emojis/koala.png"},{code:"koko",image:"emojis/koko.png"},{code:"kr",image:"emojis/kr.png"},{code:"large_blue_circle",image:"emojis/large_blue_circle.png"},{code:"large_blue_diamond",image:"emojis/large_blue_diamond.png"},{code:"large_orange_diamond",image:"emojis/large_orange_diamond.png"},{code:"last_quarter_moon",image:"emojis/last_quarter_moon.png"},{code:"last_quarter_moon_with_face",image:"emojis/last_quarter_moon_with_face.png"},{code:"laughing",image:"emojis/laughing.png"},{code:"leaves",image:"emojis/leaves.png"},{code:"ledger",image:"emojis/ledger.png"},{code:"leftwards_arrow_with_hook",image:"emojis/leftwards_arrow_with_hook.png"},{code:"left_luggage",image:"emojis/left_luggage.png"},{code:"left_right_arrow",image:"emojis/left_right_arrow.png"},{code:"lemon",image:"emojis/lemon.png"},{code:"leo",image:"emojis/leo.png"},{code:"leopard",image:"emojis/leopard.png"},{code:"libra",image:"emojis/libra.png"},{code:"light_rail",image:"emojis/light_rail.png"},{code:"link",image:"emojis/link.png"},{code:"lips",image:"emojis/lips.png"},{code:"lipstick",image:"emojis/lipstick.png"},{code:"lock",image:"emojis/lock.png"},{code:"lock_with_ink_pen",image:"emojis/lock_with_ink_pen.png"},{code:"lollipop",image:"emojis/lollipop.png"},{code:"loop",image:"emojis/loop.png"},{code:"loudspeaker",image:"emojis/loudspeaker.png"},{code:"love_hotel",image:"emojis/love_hotel.png"},{code:"love_letter",image:"emojis/love_letter.png"},{code:"low_brightness",image:"emojis/low_brightness.png"},{code:"m",image:"emojis/m.png"},{code:"mag",image:"emojis/mag.png"},{code:"mag_right",image:"emojis/mag_right.png"},{code:"mahjong",image:"emojis/mahjong.png"},{code:"mailbox",image:"emojis/mailbox.png"},{code:"mailbox_closed",image:"emojis/mailbox_closed.png"},{code:"mailbox_with_mail",image:"emojis/mailbox_with_mail.png"},{code:"mailbox_with_no_mail",image:"emojis/mailbox_with_no_mail.png"},{code:"man",image:"emojis/man.png"},{code:"mans_shoe",image:"emojis/mans_shoe.png"},{code:"man_with_gua_pi_mao",image:"emojis/man_with_gua_pi_mao.png"},{code:"man_with_turban",image:"emojis/man_with_turban.png"},{code:"maple_leaf",image:"emojis/maple_leaf.png"},{code:"mask",image:"emojis/mask.png"},{code:"massage",image:"emojis/massage.png"},{code:"meat_on_bone",image:"emojis/meat_on_bone.png"},{code:"mega",image:"emojis/mega.png"},{code:"melon",image:"emojis/melon.png"},{code:"memo",image:"emojis/memo.png"},{code:"mens",image:"emojis/mens.png"},{code:"metal",image:"emojis/metal.png"},{code:"metro",image:"emojis/metro.png"},{code:"microphone",image:"emojis/microphone.png"},{code:"microscope",image:"emojis/microscope.png"},{code:"milky_way",image:"emojis/milky_way.png"},{code:"minibus",image:"emojis/minibus.png"},{code:"minidisc",image:"emojis/minidisc.png"},{code:"mobile_phone_off",image:"emojis/mobile_phone_off.png"},{code:"moneybag",image:"emojis/moneybag.png"},{code:"money_with_wings",image:"emojis/money_with_wings.png"},{code:"monkey",image:"https://dn-coding-net-production-static.qbox.me/static/1666cf248f343226926d708cf3842126.png"},{code:"monkey_face",image:"emojis/monkey_face.png"},{code:"monorail",image:"emojis/monorail.png"},{code:"moon",image:"emojis/moon.png"},{code:"mortar_board",image:"emojis/mortar_board.png"},{code:"mountain_bicyclist",image:"emojis/mountain_bicyclist.png"},{code:"mountain_cableway",image:"emojis/mountain_cableway.png"},{code:"mountain_railway",image:"emojis/mountain_railway.png"},{code:"mount_fuji",image:"emojis/mount_fuji.png"},{code:"mouse",image:"emojis/mouse.png"},{code:"mouse2",image:"emojis/mouse2.png"},{code:"movie_camera",image:"emojis/movie_camera.png"},{code:"moyai",image:"emojis/moyai.png"},{code:"muscle",image:"emojis/muscle.png"},{code:"mushroom",image:"emojis/mushroom.png"},{code:"musical_keyboard",image:"emojis/musical_keyboard.png"},{code:"musical_note",image:"emojis/musical_note.png"},{code:"musical_score",image:"emojis/musical_score.png"},{code:"mute",image:"emojis/mute.png"},{code:"nail_care",image:"emojis/nail_care.png"},{code:"name_badge",image:"emojis/name_badge.png"},{code:"neckbeard",image:"emojis/neckbeard.png"},{code:"necktie",image:"emojis/necktie.png"},{code:"negative_squared_cross_mark",image:"emojis/negative_squared_cross_mark.png"},{code:"neutral_face",image:"emojis/neutral_face.png"},{code:"new",image:"emojis/new.png"},{code:"newspaper",image:"emojis/newspaper.png"},{code:"new_moon",image:"emojis/new_moon.png"},{code:"new_moon_with_face",image:"emojis/new_moon_with_face.png"},{code:"ng",image:"emojis/ng.png"},{code:"nine",image:"emojis/nine.png"},{code:"non-potable_water",image:"emojis/non-potable_water.png"},{code:"nose",image:"emojis/nose.png"},{code:"notebook",image:"emojis/notebook.png"},{code:"notebook_with_decorative_cover",image:"emojis/notebook_with_decorative_cover.png"},{code:"notes",image:"emojis/notes.png"},{code:"no_bell",image:"emojis/no_bell.png"},{code:"no_bicycles",image:"emojis/no_bicycles.png"},{code:"no_entry",image:"emojis/no_entry.png"},{code:"no_entry_sign",image:"emojis/no_entry_sign.png"},{code:"no_good",image:"emojis/no_good.png"},{code:"no_mobile_phones",image:"emojis/no_mobile_phones.png"},{code:"no_mouth",image:"emojis/no_mouth.png"},{code:"no_pedestrians",image:"emojis/no_pedestrians.png"},{code:"no_smoking",image:"emojis/no_smoking.png"},{code:"nut_and_bolt",image:"emojis/nut_and_bolt.png"},{code:"o",image:"emojis/o.png"},{code:"o2",image:"emojis/o2.png"},{code:"ocean",image:"emojis/ocean.png"},{code:"octocat",image:"emojis/octocat.png"},{code:"octopus",image:"emojis/octopus.png"},{code:"oden",image:"emojis/oden.png"},{code:"office",image:"emojis/office.png"},{code:"ok",image:"emojis/ok.png"},{code:"ok_hand",image:"emojis/ok_hand.png"},{code:"ok_woman",image:"emojis/ok_woman.png"},{code:"older_man",image:"emojis/older_man.png"},{code:"older_woman",image:"emojis/older_woman.png"},{code:"on",image:"emojis/on.png"},{code:"oncoming_automobile",image:"emojis/oncoming_automobile.png"},{code:"oncoming_bus",image:"emojis/oncoming_bus.png"},{code:"oncoming_police_car",image:"emojis/oncoming_police_car.png"},{code:"oncoming_taxi",image:"emojis/oncoming_taxi.png"},{code:"one",image:"emojis/one.png"},{code:"open_file_folder",image:"emojis/open_file_folder.png"},{code:"open_hands",image:"emojis/open_hands.png"},{code:"open_mouth",image:"emojis/open_mouth.png"},{code:"ophiuchus",image:"emojis/ophiuchus.png"},{code:"orange_book",image:"emojis/orange_book.png"},{code:"outbox_tray",image:"emojis/outbox_tray.png"},{code:"ox",image:"emojis/ox.png"},{code:"pager",image:"emojis/pager.png"},{code:"page_facing_up",image:"emojis/page_facing_up.png"},{code:"page_with_curl",image:"emojis/page_with_curl.png"},{code:"palm_tree",image:"emojis/palm_tree.png"},{code:"panda_face",image:"emojis/panda_face.png"},{code:"paperclip",image:"emojis/paperclip.png"},{code:"parking",image:"emojis/parking.png"},{code:"partly_sunny",image:"emojis/partly_sunny.png"},{code:"part_alternation_mark",image:"emojis/part_alternation_mark.png"},{code:"passport_control",image:"emojis/passport_control.png"},{code:"paw_prints",image:"emojis/paw_prints.png"},{code:"peach",image:"emojis/peach.png"},{code:"pear",image:"emojis/pear.png"},{code:"pencil",image:"emojis/pencil.png"},{code:"pencil2",image:"emojis/pencil2.png"},{code:"penguin",image:"emojis/penguin.png"},{code:"pensive",image:"emojis/pensive.png"},{code:"performing_arts",image:"emojis/performing_arts.png"},{code:"persevere",image:"emojis/persevere.png"},{code:"person_frowning",image:"emojis/person_frowning.png"},{code:"person_with_blond_hair",image:"emojis/person_with_blond_hair.png"},{code:"person_with_pouting_face",image:"emojis/person_with_pouting_face.png"},{code:"phone",image:"emojis/phone.png"},{code:"pig",image:"emojis/pig.png"},{code:"pig2",image:"emojis/pig2.png"},{code:"pig_nose",image:"emojis/pig_nose.png"},{code:"pill",image:"emojis/pill.png"},{code:"pineapple",image:"emojis/pineapple.png"},{code:"pisces",image:"emojis/pisces.png"},{code:"pizza",image:"emojis/pizza.png"},{code:"plus1",image:"emojis/plus1.png"},{code:"point_down",image:"emojis/point_down.png"},{code:"point_left",image:"emojis/point_left.png"},{code:"point_right",image:"emojis/point_right.png"},{code:"point_up",image:"emojis/point_up.png"},{code:"point_up_2",image:"emojis/point_up_2.png"},{code:"police_car",image:"emojis/police_car.png"},{code:"poodle",image:"emojis/poodle.png"},{code:"poop",image:"emojis/poop.png"},{code:"postal_horn",image:"emojis/postal_horn.png"},{code:"postbox",image:"emojis/postbox.png"},{code:"post_office",image:"emojis/post_office.png"},{code:"potable_water",image:"emojis/potable_water.png"},{code:"pouch",image:"emojis/pouch.png"},{code:"poultry_leg",image:"emojis/poultry_leg.png"},{code:"pound",image:"emojis/pound.png"},{code:"pouting_cat",image:"emojis/pouting_cat.png"},{code:"pray",image:"emojis/pray.png"},{code:"princess",image:"emojis/princess.png"},{code:"punch",image:"emojis/punch.png"},{code:"purple_heart",image:"emojis/purple_heart.png"},{code:"purse",image:"emojis/purse.png"},{code:"pushpin",image:"emojis/pushpin.png"},{code:"put_litter_in_its_place",image:"emojis/put_litter_in_its_place.png"},{code:"question",image:"emojis/question.png"},{code:"rabbit",image:"emojis/rabbit.png"},{code:"rabbit2",image:"emojis/rabbit2.png"},{code:"racehorse",image:"emojis/racehorse.png"},{code:"radio",image:"emojis/radio.png"},{code:"radio_button",image:"emojis/radio_button.png"},{code:"rage",image:"emojis/rage.png"},{code:"rage1",image:"emojis/rage1.png"},{code:"rage2",image:"emojis/rage2.png"},{code:"rage3",image:"emojis/rage3.png"},{code:"rage4",image:"emojis/rage4.png"},{code:"railway_car",image:"emojis/railway_car.png"},{code:"rainbow",image:"emojis/rainbow.png"},{code:"raised_hand",image:"emojis/raised_hand.png"},{code:"raised_hands",image:"emojis/raised_hands.png"},{code:"raising_hand",image:"emojis/raising_hand.png"},{code:"ram",image:"emojis/ram.png"},{code:"ramen",image:"emojis/ramen.png"},{code:"rat",image:"emojis/rat.png"},{code:"recycle",image:"emojis/recycle.png"},{code:"red_car",image:"emojis/red_car.png"},{code:"red_circle",image:"emojis/red_circle.png"},{code:"registered",image:"emojis/registered.png"},{code:"relaxed",image:"emojis/relaxed.png"},{code:"relieved",image:"emojis/relieved.png"},{code:"repeat",image:"emojis/repeat.png"},{code:"repeat_one",image:"emojis/repeat_one.png"},{code:"restroom",image:"emojis/restroom.png"},{code:"revolving_hearts",image:"emojis/revolving_hearts.png"},{code:"rewind",image:"emojis/rewind.png"},{code:"ribbon",image:"emojis/ribbon.png"},{code:"rice",image:"emojis/rice.png"},{code:"rice_ball",image:"emojis/rice_ball.png"},{code:"rice_cracker",image:"emojis/rice_cracker.png"},{code:"rice_scene",image:"emojis/rice_scene.png"},{code:"ring",image:"emojis/ring.png"},{code:"rocket",image:"emojis/rocket.png"},{code:"roller_coaster",image:"emojis/roller_coaster.png"},{code:"rooster",image:"emojis/rooster.png"},{code:"rose",image:"emojis/rose.png"},{code:"rotating_light",image:"emojis/rotating_light.png"},{code:"round_pushpin",image:"emojis/round_pushpin.png"},{code:"rowboat",image:"emojis/rowboat.png"},{code:"ru",image:"emojis/ru.png"},{code:"rugby_football",image:"emojis/rugby_football.png"},{code:"runner",image:"emojis/runner.png"},{code:"running",image:"emojis/running.png"},{code:"running_shirt_with_sash",image:"emojis/running_shirt_with_sash.png"},{code:"sa",image:"emojis/sa.png"},{code:"sagittarius",image:"emojis/sagittarius.png"},{code:"sailboat",image:"emojis/sailboat.png"},{code:"sake",image:"emojis/sake.png"},{code:"sandal",image:"emojis/sandal.png"},{code:"santa",image:"emojis/santa.png"},{code:"satellite",image:"emojis/satellite.png"},{code:"satisfied",image:"emojis/satisfied.png"},{code:"saxophone",image:"emojis/saxophone.png"},{code:"school",image:"emojis/school.png"},{code:"school_satchel",image:"emojis/school_satchel.png"},{code:"scissors",image:"emojis/scissors.png"},{code:"scorpius",image:"emojis/scorpius.png"},{code:"scream",image:"emojis/scream.png"},{code:"scream_cat",image:"emojis/scream_cat.png"},{code:"scroll",image:"emojis/scroll.png"},{code:"seat",image:"emojis/seat.png"},{code:"secret",image:"emojis/secret.png"},{code:"seedling",image:"emojis/seedling.png"},{code:"see_no_evil",image:"emojis/see_no_evil.png"},{code:"seven",image:"emojis/seven.png"},{code:"shaved_ice",image:"emojis/shaved_ice.png"},{code:"sheep",image:"emojis/sheep.png"},{code:"shell",image:"emojis/shell.png"},{code:"ship",image:"emojis/ship.png"},{code:"shipit",image:"emojis/shipit.png"},{code:"shirt",image:"emojis/shirt.png"},{code:"shit",image:"emojis/shit.png"},{code:"shoe",image:"emojis/shoe.png"},{code:"shower",image:"emojis/shower.png"},{code:"signal_strength",image:"emojis/signal_strength.png"},{code:"six",image:"emojis/six.png"},{code:"six_pointed_star",image:"emojis/six_pointed_star.png"},{code:"ski",image:"emojis/ski.png"},{code:"skull",image:"emojis/skull.png"},{code:"sleeping",image:"emojis/sleeping.png"},{code:"sleepy",image:"emojis/sleepy.png"},{code:"slot_machine",image:"emojis/slot_machine.png"},{code:"small_blue_diamond",image:"emojis/small_blue_diamond.png"},{code:"small_orange_diamond",image:"emojis/small_orange_diamond.png"},{code:"small_red_triangle",image:"emojis/small_red_triangle.png"},{code:"small_red_triangle_down",image:"emojis/small_red_triangle_down.png"},{code:"smile",image:"emojis/smile.png"},{code:"smiley",image:"emojis/smiley.png"},{code:"smiley_cat",image:"emojis/smiley_cat.png"},{code:"smile_cat",image:"emojis/smile_cat.png"},{code:"smiling_imp",image:"emojis/smiling_imp.png"},{code:"smirk",image:"emojis/smirk.png"},{code:"smirk_cat",image:"emojis/smirk_cat.png"},{code:"smoking",image:"emojis/smoking.png"},{code:"snail",image:"emojis/snail.png"},{code:"snake",image:"emojis/snake.png"},{code:"snowboarder",image:"emojis/snowboarder.png"},{code:"snowflake",image:"emojis/snowflake.png"},{code:"snowman",image:"emojis/snowman.png"},{code:"sob",image:"emojis/sob.png"},{code:"soccer",image:"emojis/soccer.png"},{code:"soon",image:"emojis/soon.png"},{code:"sos",image:"emojis/sos.png"},{code:"sound",image:"emojis/sound.png"},{code:"space_invader",image:"emojis/space_invader.png"},{code:"spades",image:"emojis/spades.png"},{code:"spaghetti",image:"emojis/spaghetti.png"},{code:"sparkler",image:"emojis/sparkler.png"},{code:"sparkles",image:"emojis/sparkles.png"},{code:"sparkling_heart",image:"emojis/sparkling_heart.png"},{code:"speaker",image:"emojis/speaker.png"},{code:"speak_no_evil",image:"emojis/speak_no_evil.png"},{code:"speech_balloon",image:"emojis/speech_balloon.png"},{code:"speedboat",image:"emojis/speedboat.png"},{code:"squirrel",image:"emojis/squirrel.png"},{code:"star",image:"emojis/star.png"},{code:"star2",image:"emojis/star2.png"},{code:"stars",image:"emojis/stars.png"},{code:"station",image:"emojis/station.png"},{code:"statue_of_liberty",image:"emojis/statue_of_liberty.png"},{code:"steam_locomotive",image:"emojis/steam_locomotive.png"},{code:"stew",image:"emojis/stew.png"},{code:"straight_ruler",image:"emojis/straight_ruler.png"},{code:"strawberry",image:"emojis/strawberry.png"},{code:"stuck_out_tongue",image:"emojis/stuck_out_tongue.png"},{code:"stuck_out_tongue_closed_eyes",image:"emojis/stuck_out_tongue_closed_eyes.png"},{code:"stuck_out_tongue_winking_eye",image:"emojis/stuck_out_tongue_winking_eye.png"},{code:"sunflower",image:"emojis/sunflower.png"},{code:"sunglasses",image:"emojis/sunglasses.png"},{code:"sunny",image:"emojis/sunny.png"},{code:"sunrise",image:"emojis/sunrise.png"},{code:"sunrise_over_mountains",image:"emojis/sunrise_over_mountains.png"},{code:"sun_with_face",image:"emojis/sun_with_face.png"},{code:"surfer",image:"emojis/surfer.png"},{code:"sushi",image:"emojis/sushi.png"},{code:"suspect",image:"emojis/suspect.png"},{code:"suspension_railway",image:"emojis/suspension_railway.png"},{code:"sweat",image:"emojis/sweat.png"},{code:"sweat_drops",image:"emojis/sweat_drops.png"},{code:"sweat_smile",image:"emojis/sweat_smile.png"},{code:"sweet_potato",image:"emojis/sweet_potato.png"},{code:"swimmer",image:"emojis/swimmer.png"},{code:"symbols",image:"emojis/symbols.png"},{code:"syringe",image:"emojis/syringe.png"},{code:"tada",image:"emojis/tada.png"},{code:"tanabata_tree",image:"emojis/tanabata_tree.png"},{code:"tangerine",image:"emojis/tangerine.png"},{code:"taurus",image:"emojis/taurus.png"},{code:"taxi",image:"emojis/taxi.png"},{code:"tea",image:"emojis/tea.png"},{code:"telephone",image:"emojis/telephone.png"},{code:"telephone_receiver",image:"emojis/telephone_receiver.png"},{code:"telescope",image:"emojis/telescope.png"},{code:"tennis",image:"emojis/tennis.png"},{code:"tent",image:"emojis/tent.png"},{code:"thought_balloon",image:"emojis/thought_balloon.png"},{code:"three",image:"emojis/three.png"},{code:"thumbsdown",image:"emojis/thumbsdown.png"},{code:"thumbsup",image:"emojis/thumbsup.png"},{code:"ticket",image:"emojis/ticket.png"},{code:"tiger",image:"emojis/tiger.png"},{code:"tiger2",image:"emojis/tiger2.png"},{code:"tired_face",image:"emojis/tired_face.png"},{code:"tm",image:"emojis/tm.png"},{code:"toilet",image:"emojis/toilet.png"},{code:"tokyo_tower",image:"emojis/tokyo_tower.png"},{code:"tomato",image:"emojis/tomato.png"},{code:"tongue",image:"emojis/tongue.png"},{code:"top",image:"emojis/top.png"},{code:"tophat",image:"emojis/tophat.png"},{code:"tractor",image:"emojis/tractor.png"},{code:"traffic_light",image:"emojis/traffic_light.png"},{code:"train",image:"emojis/train.png"},{code:"train2",image:"emojis/train2.png"},{code:"tram",image:"emojis/tram.png"},{code:"triangular_flag_on_post",image:"emojis/triangular_flag_on_post.png"},{code:"triangular_ruler",image:"emojis/triangular_ruler.png"},{code:"trident",image:"emojis/trident.png"},{code:"triumph",image:"emojis/triumph.png"},{code:"trolleybus",image:"emojis/trolleybus.png"},{code:"trollface",image:"emojis/trollface.png"},{code:"trophy",image:"emojis/trophy.png"},{code:"tropical_drink",image:"emojis/tropical_drink.png"},{code:"tropical_fish",image:"emojis/tropical_fish.png"},{code:"truck",image:"emojis/truck.png"},{code:"trumpet",image:"emojis/trumpet.png"},{code:"tshirt",image:"emojis/tshirt.png"},{code:"tulip",image:"emojis/tulip.png"},{code:"turtle",image:"emojis/turtle.png"},{code:"tv",image:"emojis/tv.png"},{code:"twisted_rightwards_arrows",image:"emojis/twisted_rightwards_arrows.png"},{code:"two",image:"emojis/two.png"},{code:"two_hearts",image:"emojis/two_hearts.png"},{code:"two_men_holding_hands",image:"emojis/two_men_holding_hands.png"},{code:"two_women_holding_hands",image:"emojis/two_women_holding_hands.png"},{code:"u5272",image:"emojis/u5272.png"},{code:"u5408",image:"emojis/u5408.png"},{code:"u55b6",image:"emojis/u55b6.png"},{code:"u6307",image:"emojis/u6307.png"},{code:"u6708",image:"emojis/u6708.png"},{code:"u6709",image:"emojis/u6709.png"},{code:"u6e80",image:"emojis/u6e80.png"},{code:"u7121",image:"emojis/u7121.png"},{code:"u7533",image:"emojis/u7533.png"},{code:"u7981",image:"emojis/u7981.png"},{code:"u7a7a",image:"emojis/u7a7a.png"},{code:"uk",image:"emojis/uk.png"},{code:"umbrella",image:"emojis/umbrella.png"},{code:"unamused",image:"emojis/unamused.png"},{code:"underage",image:"emojis/underage.png"},{code:"unlock",image:"emojis/unlock.png"},{code:"up",image:"emojis/up.png"},{code:"us",image:"emojis/us.png"},{code:"v",image:"emojis/v.png"},{code:"vertical_traffic_light",image:"emojis/vertical_traffic_light.png"},{code:"vhs",image:"emojis/vhs.png"},{code:"vibration_mode",image:"emojis/vibration_mode.png"},{code:"video_camera",image:"emojis/video_camera.png"},{code:"video_game",image:"emojis/video_game.png"},{code:"violin",image:"emojis/violin.png"},{code:"virgo",image:"emojis/virgo.png"},{code:"volcano",image:"emojis/volcano.png"},{code:"vs",image:"emojis/vs.png"},{code:"walking",image:"emojis/walking.png"},{code:"waning_crescent_moon",image:"emojis/waning_crescent_moon.png"},{code:"waning_gibbous_moon",image:"emojis/waning_gibbous_moon.png"},{code:"warning",image:"emojis/warning.png"},{code:"watch",image:"emojis/watch.png"},{code:"watermelon",image:"emojis/watermelon.png"},{code:"water_buffalo",image:"emojis/water_buffalo.png"},{code:"wave",image:"emojis/wave.png"},{code:"wavy_dash",image:"emojis/wavy_dash.png"},{code:"waxing_crescent_moon",image:"emojis/waxing_crescent_moon.png"},{code:"waxing_gibbous_moon",image:"emojis/waxing_gibbous_moon.png"},{code:"wc",image:"emojis/wc.png"},{code:"weary",image:"emojis/weary.png"},{code:"wedding",image:"emojis/wedding.png"},{code:"whale",image:"emojis/whale.png"},{code:"whale2",image:"emojis/whale2.png"},{code:"wheelchair",image:"emojis/wheelchair.png"},{code:"white_check_mark",image:"emojis/white_check_mark.png"},{code:"white_circle",image:"emojis/white_circle.png"},{code:"white_flower",image:"emojis/white_flower.png"},{code:"white_square",image:"emojis/white_square.png"},{code:"white_square_button",image:"emojis/white_square_button.png"},{code:"wind_chime",image:"emojis/wind_chime.png"},{code:"wine_glass",image:"emojis/wine_glass.png"},{code:"wink",image:"emojis/wink.png"},{code:"wolf",image:"emojis/wolf.png"},{code:"woman",image:"emojis/woman.png"},{code:"womans_clothes",image:"emojis/womans_clothes.png"},{code:"womans_hat",image:"emojis/womans_hat.png"},{code:"womens",image:"emojis/womens.png"},{code:"worried",image:"emojis/worried.png"},{code:"wrench",image:"emojis/wrench.png"},{code:"x",image:"emojis/x.png"},{code:"yellow_heart",image:"emojis/yellow_heart.png"},{code:"yen",image:"emojis/yen.png"},{code:"yum",image:"emojis/yum.png"},{code:"zap",image:"emojis/zap.png"},{code:"zero",image:"emojis/zero.png"},{code:"zzz",image:"emojis/zzz.png"}],monkey:[{code:"哈哈",image:"coding-emotions/coding-emoji-01.png"},{code:"吐",image:"coding-emotions/coding-emoji-02.png"},{code:"压力山大",image:"coding-emotions/coding-emoji-03.png"},{code:"忧伤",image:"coding-emotions/coding-emoji-04.png"},{code:"坏人",image:"coding-emotions/coding-emoji-05.png"},{code:"酷",image:"coding-emotions/coding-emoji-06.png"},{code:"哼",image:"coding-emotions/coding-emoji-07.png"},{code:"你咬我啊",image:"coding-emotions/coding-emoji-08.png"},{code:"内急",image:"coding-emotions/coding-emoji-09.png"},{code:"32个赞",image:"coding-emotions/coding-emoji-10.png"},{code:"加油",image:"coding-emotions/coding-emoji-11.png"},{code:"闭嘴",image:"coding-emotions/coding-emoji-12.png"},{code:"wow",image:"coding-emotions/coding-emoji-13.png"},{code:"泪流成河",image:"coding-emotions/coding-emoji-14.png"},{code:"NO!",image:"coding-emotions/coding-emoji-15.png"},{code:"疑问",image:"coding-emotions/coding-emoji-16.png"},{code:"耶",image:"coding-emotions/coding-emoji-17.png"},{code:"生日快乐",image:"coding-emotions/coding-emoji-18.png"},{code:"求包养",image:"coding-emotions/coding-emoji-19.png"},{code:"吹泡泡",image:"coding-emotions/coding-emoji-20.png"},{code:"睡觉",image:"coding-emotions/coding-emoji-21.png"},{code:"惊讶",image:"coding-emotions/coding-emoji-22.png"},{code:"Hi",image:"coding-emotions/coding-emoji-23.png"},{code:"打发点咯",image:"coding-emotions/coding-emoji-24.png"},{code:"呵呵",image:"coding-emotions/coding-emoji-25.png"},{code:"喷血",image:"coding-emotions/coding-emoji-26.png"},{code:"Bug",image:"coding-emotions/coding-emoji-27.png"},{code:"听音乐",image:"coding-emotions/coding-emoji-28.png"},{code:"垒码",image:"coding-emotions/coding-emoji-29.png"},{code:"我打你哦",image:"coding-emotions/coding-emoji-30.png"},{code:"顶足球",image:"coding-emotions/coding-emoji-31.png"},{code:"放毒气",image:"coding-emotions/coding-emoji-32.png"},{code:"表白",image:"coding-emotions/coding-emoji-33.png"},{code:"抓瓢虫",image:"coding-emotions/coding-emoji-34.png"},{code:"下班",image:"coding-emotions/coding-emoji-35.png"},{code:"冒泡",image:"coding-emotions/coding-emoji-36.png"},{code:"2015",image:"coding-emotions/coding-emoji-38.png"},{code:"拜年",image:"coding-emotions/coding-emoji-39.png"},{code:"发红包",image:"coding-emotions/coding-emoji-40.png"},{code:"放鞭炮",image:"coding-emotions/coding-emoji-41.png"},{code:"求红包",image:"coding-emotions/coding-emoji-42.png"},{code:"新年快乐",image:"coding-emotions/coding-emoji-43.png"}]}),angular.module("constants").constant("EmojiMap",{emoji:["smiley","heart_eyes","pensive","flushed","grin","kissing_heart","wink","angry","disappointed","disappointed_relieved","sob","stuck_out_tongue_closed_eyes","rage","persevere","unamused","smile","mask","kissing_face","sweat","joy","blush","cry","stuck_out_tongue_winking_eye","fearful","cold_sweat","astonished","smirk","scream","sleepy","confounded","relieved","smiling_imp","ghost","santa","dog","pig","cat","+1","-1","facepunch","fist","v","muscle","clap","point_left","point_up_2","point_right","point_down","ok_hand","heart","broken_heart","sunny","moon","star2","zap","cloud","lips","rose","coffee","birthday","clock10","beer","mag","iphone","house","car","gift","soccer","bomb","gem","alien","100","money_with_wings","video_game","hankey","sos","zzz","microphone","umbrella","book","pray","rocket","tea","watermelon"],coding:[{code:"哈哈",image:"coding-emoji-01"},{code:"吐",image:"coding-emoji-02"},{code:"压力山大",image:"coding-emoji-03"},{code:"忧伤",image:"coding-emoji-04"},{code:"坏人",image:"coding-emoji-05"},{code:"酷",image:"coding-emoji-06"},{code:"哼",image:"coding-emoji-07"},{code:"你咬我啊",image:"coding-emoji-08"},{code:"内急",image:"coding-emoji-09"},{code:"32个赞",image:"coding-emoji-10"},{code:"加油",image:"coding-emoji-11"},{code:"闭嘴",image:"coding-emoji-12"},{code:"wow",image:"coding-emoji-13"},{code:"泪流成河",image:"coding-emoji-14"},{code:"NO!",image:"coding-emoji-15"},{code:"疑问",image:"coding-emoji-16"},{code:"耶",image:"coding-emoji-17"},{code:"生日快乐",image:"coding-emoji-18"},{code:"求包养",image:"coding-emoji-19"},{code:"吹泡泡",image:"coding-emoji-20"},{code:"睡觉",image:"coding-emoji-21"},{code:"惊讶",image:"coding-emoji-22"},{code:"Hi",image:"coding-emoji-23"},{code:"打发点咯",image:"coding-emoji-24"},{code:"呵呵",image:"coding-emoji-25"},{code:"喷血",image:"coding-emoji-26"},{code:"Bug",image:"coding-emoji-27"},{code:"听音乐",image:"coding-emoji-28"},{code:"垒码",image:"coding-emoji-29"},{code:"我打你哦",image:"coding-emoji-30"},{code:"顶足球",image:"coding-emoji-31"},{code:"放毒气",image:"coding-emoji-32"},{code:"表白",image:"coding-emoji-33"},{code:"抓瓢虫",image:"coding-emoji-34"},{code:"下班",image:"coding-emoji-35"},{code:"冒泡",image:"coding-emoji-36"},{code:"拜年",image:"coding-emoji-39"},{code:"发红包",image:"coding-emoji-40"},{code:"放鞭炮",image:"coding-emoji-41"},{code:"求红包",image:"coding-emoji-42"},{code:"新年快乐",image:"coding-emoji-43"},{code:"胡了",image:"coding-emoji-44"},{code:"拆红包",image:"coding-emoji-45"},{code:"猴赛雷",image:"coding-emoji-46"},{code:"猴年行大运",image:"coding-emoji-47"},{code:"送红包",image:"coding-emoji-48"}],festival:[{code:"奔月",image:"festival-emoji-01"},{code:"吃月饼",image:"festival-emoji-02"},{code:"捞月",image:"festival-emoji-03"},{code:"打招呼",image:"festival-emoji-04"},{code:"中秋快乐",image:"festival-emoji-05"},{code:"赏月",image:"festival-emoji-06"},{code:"悠闲",image:"festival-emoji-07"},{code:"爬爬",image:"festival-emoji-08"}]}),angular.module("constants").constant("ErrorCode",{PASSWORD_ERROR:1401,TWO_FACTOR_CODE_REQUIRED:3209,TWO_FACTOR_PASSWORD_REQUIRED:3210}),angular.module("constants").constant("GroupResolver",["$q","$rootScope","$location",function(a,b,c){var d=a.defer(),e=function(){d.resolve(b.GROUP)},f=function(){d.reject(),c.url("/user/groups")};return b.GROUP?b.$evalAsync(e):b.GROUP===!1?b.$evalAsync(f):b.$watch("GROUP",function(){b.GROUP?e():b.GROUP===!1&&f()}),d.promise}]),angular.module("constants").constant("PermissionResolver",["$q","$rootScope","$filter","$location","Flash","PROJECT","$injector",function(a,b,c,d,e,f,g){var h=a.defer(),i=function(){h.resolve({role_id:b.PROJECT.current_user_role_id,role_name:b.PROJECT.current_user_role})},j=function(){h.reject()},k=function(){var a=c("isRole")(b.PROJECT,b.MEMBER);return b.PROJECT?b.PROJECT.is_public?!0:a:!1};return k()?b.$evalAsync(i):b.PROJECT===!1?b.$evalAsync(j):f.resolve(g).then(function(){k()?i():(j(),b.PROJECT&&(e.fail().send("无权访问项目代码相关功能"),d.path(b.PROJECT.project_path)))}),h.promise}]),angular.module("constants").constant("ProjectResolver",["$q","$rootScope","$location",function(a,b,c){var d=a.defer(),e=function(){d.resolve(b.PROJECT)},f=function(){d.reject(),b.USER?c.path("/user"):c.path("/")};return b.PROJECT?b.$evalAsync(e):b.PROJECT===!1?b.$evalAsync(f):b.$watch("PROJECT",function(){b.PROJECT?e():b.PROJECT===!1&&f()}),d.promise}]),angular.module("services").service("ProjectVersions",function(){var a={free:{id:"free",name:"免费版",icon:"coffee",description:["512M 免费内存","1G Git 仓库","项目成员 10 人","邮件"],period:{month:0,half_year:0,full_year:0},limits:{member:10,git:"1G"}},dev:{id:"dev",name:"开发版",icon:"wrench",color:"#5191bd",description:["1G 项目内存","5G Git 仓库","支持自定义域名","项目成员 20 人","支持数据打包","支持工单"],period:{month:49,half_year:245,full_year:441},limits:{member:20,git:"5G"}},pro:{id:"pro",name:"高级版",icon:"trophy",color:"#eb935d",description:["2G 项目内存","10G Git 仓库","支持自定义域名","项目成员 50 人","支持数据打包","保证 99.9% SLA","支持工单、QQ、电话"],period:{month:199,half_year:995,full_year:1791},limits:{member:50,git:"10G"}}},b=function(a){var b={free:1,dev:2,pro:3};return{plan:b[a.version],month:c(a.period),auto:+a.renewal}},c=function(a){var b={month:1,half_year:6,full_year:12};return b[a]},d=function(a){var b={1:"month",6:"half_year",12:"full_year"};return b[a]};return{free:a.free,dev:a.dev,pro:a.pro,1:a.free,2:a.dev,3:a.pro,humanToData:b,monthToHuman:d}}),angular.module("constants").constant("TeamResolver",["$q","$rootScope","$location",function(a,b,c){var d=a.defer(),e=function(){d.resolve(b.TEAM)},f=function(){d.reject(),c.url("/user/teams")};return b.GROUP?b.$evalAsync(e):b.TEAM===!1?b.$evalAsync(f):b.$watch("TEAM",function(){b.TEAM?e():b.TEAM===!1&&f()}),d.promise}]),angular.module("constants").constant("TopicConstants",{ORDER_BY:{"time.desc":49,"time.asc":50,"comment.desc":51,"comment.asc":52,"hot.desc":53,"hot.asc":54,"votes.desc":55,"votes.asc":56},COMMENT_TYPE:{TOPIC:0,COMMENT:1}});var userResolverFunc=function(a,b,c,d){var e=c.resolve(d),f=function(){var a=b.path();0!=a.indexOf("/register")&&0!=a.indexOf("/register")&&0!=a.indexOf("/resetPassword")&&0!=a.indexOf("/user/resetPassword")&&0!=a.indexOf("/activate")&&b.path("/login")};return e["catch"](f),e};userResolverFunc.$inject=["ipCookie","$location","USER","$injector"],angular.module("constants").constant("UserResolver",userResolverFunc),angular.module("directives").directive("cgActivity",["hljsService","$timeout","Tweet","Errors","Common","TaskDeadlineService","TaskUrgencyService","TaskCommentService","GitService",function(a,b,c,d,e,f,g,h,i){var j=["Project","ProjectMember","Tweet","TweetComment","Depot","Task","TaskComment","UserFollow","ProjectFile","ProjectTopic","PullRequestBean","PullRequestComment","MergeRequestBean","MergeRequestComment","ProjectStar","ProjectWatcher","QcTask","CommitLineNote","ProjectFileComment"],k=function(b,c,d){var e=d.cgActivity;if(b.targetType=e,-1!=j.indexOf(e)){var f=["common/directives/activities/tpl/",e,".html"].join("");b.tplName=f,b.$on("activity.hljs",function(){c.find("pre code").each(function(b,c){a.highlightBlock(c)})})}},l=["$scope",function(a){a.activity_comment_content={};var j=a.activity;if(j){var k=$.isEmptyObject(j.target);k&&(a.activity.target=null),"Tweet"==j.target_type&&j.tweet&&b(function(){a.$emit("activity.hljs")},30),a.replyTweet=function(a){a.tweet.show_reply_form=!0,b(function(){$("#tweet_comment_"+a.tweet.id).focus()},30)},a.removeTweet=function(b){b.target;b&&confirm("确认删除该泡泡？")&&c["delete"]({tweet_id:b.tweet.id},function(c){0==c.code?(b.tweet=null,a.$emit("activity.remove",b)):d.handle(c)})},a.commentTweet=function(b,e){b&&e&&(b.loading=!0,c.comment({id:b.id},{content:e},function(c){if(b.loading=!1,0!=c.code)return void d.handle(c);var e=c.data;e.owner=a.USER,b.comment_list.splice(0,0,e),b.comments_count++,a.activity_comment_content[b.id]=""})["catch"](function(){b.loading=!1}))},a.removeComment=function(a,b){var f=a.tweet;f&&b&&confirm("确认删除该评论？")&&c.delete_comment({
id:f.id,comment:b.id},function(a){return 0!=a.code?void d.handle(a):(f.comments_count--,void(f.comment_list=e.removeOfId(f.comment_list,b.id)))})},a.replyComment=function(b,c){var d=b.tweet;d.show_reply_form=!0,a.activity_comment_content[d.id]="@"+c.owner.name+" : ",$("#tweet_comment_"+d.id).focus()},a.parseDeadline=function(a){return a?"["+f.format(a).date+"]":""},a.commitLink=i.activityCommitLink,a.priorities=g.priorities,a.commentToText=h.text}}];return{link:k,template:'<ng-include src="tplName"></ng-include>',controller:l}}]),angular.module("directives").directive("cgActivities",["hljsService","$timeout","Common",function(a,b,c){var d=function(b,c){b.$on("activity.hljs",function(){c.find("pre code").each(function(b,c){a.highlightBlock(c)})})},e=["$scope","$rootScope",function(a,d){a.activity_comments={},a.activity_comment_content={},a.$on("activity.add",function(c,d){a.activities.splice(0,0,d),b(function(){a.$emit("activity.hljs")},30)}),a.$on("activity.remove",function(b,d){a.activities=c.removeOfId(a.activities,d.id)}),a.USER=d.USER}];return{link:d,scope:{activities:"=cgActivities"},templateUrl:"common/directives/activities/tpl/activities.html",controller:e}}]),angular.module("directives").directive("cgAd",[function(){return{scope:{banner_id:"@cgAd",width:"@",height:"@"},link:function(a,b,c){a.destory=function(){b.remove()}},templateUrl:"common/directives/ad/tpl/ad.html",controller:"AdController",replace:!0}}]).controller("AdController",["$scope","AdBanner",function(a,b){a.width=a.width||"auto",a.height=a.height||"auto",a.ad={};var c=b.get({id:a.banner_id},{});c.then(function(b){a.ad=b.data}),c["catch"](function(){return a.destory(),!1}),c["finally"](function(){a.loading=!1})}]).service("AdService",[function(){}]),angular.module("directives").directive("cgMultiAd",["$timeout",function(a){return{scope:{banner_ids:"=cgMultiAd",width:"@",height:"@",speed:"=speed"},link:function(b,c,d){b.speed=b.speed||3e3,b.destory=function(){c.remove()},c.hide();var e=0,f=null,g=function(){c.show();var d=c.find(".multi-ad-banner"),h=d.height();c.css({height:h}),angular.element(d[0]).css({"margin-top":-e*h+"px","-webkit-transition":"margin-top 1s",transition:"margin-top 1s","-moz-transition":"margin-top 1s","-o-transition":"margin-top 1s"}),e=++e%(d.length||0),a.cancel(f),f=a(g,b.speed)};a(g,b.speed);var h=c.find(".multi-ad-banner");c.css({height:h.height()})},templateUrl:"common/directives/ad/tpl/multi-ad.html",controller:"MultiAdController",replace:!0}}]).controller("MultiAdController",["$scope","AdBanner","$q",function(a,b,c){a.width=a.width||"auto",a.height=a.height||"auto",a.ads=[];var d=c.defer();d.resolve(a.banner_ids);var e=d.promise;e.then(function(c){for(var d in c)b.get({id:c[d]},function(b){0==b.code&&a.ads.push(b.data)})}),e["catch"](function(){return a.destory(),!1}),e["finally"](function(){a.loading=!1})}]).service("MultiAdService",[function(){}]),angular.module("directives").directive("cgAtWho",["At","Common",function(a,b){var c=function(a,c){angular.forEach(a,function(a){a.avatar=b.thumbnail(a.avatar,c||36)})},d=function(a,b,d,e){b=b||"@",c(a);var f=(new Date).getTime()+"_"+Math.round(1e4*Math.random());return{at:b,data:a,search_key:["name","name_pinyin","name_pinyin_short"],tpl:'<li data-value="'+(e?"":b)+'${name}"><img src="${avatar}" width="20" height="20" style="border-radius: 10px"/>${name}</li>',show_the_at:!0,insert_tpl:(e?"":b)+"${name} ",start_with_space:!1,space_after:!0,limit:d||5,alias:f}};return{scope:{at_symbol:"&atSymbol",at_suggestion_count:"&atSuggestionCount",insert_without_symbol:"&insertWithoutSymbol",at_member:"=atMember"},link:function(b,c){var e=b.$watch("at_member",function(){var e=null;e=isNaN(b.at_member)?a.ofFriend():a.ofProject(b.at_member),e.then(function(a){var e=d(a,b.at_symbol(),b.at_suggestion_count(),b.insert_without_symbol());c.atwho(e)})});b.$on("$destroy",function(){e();var a=$(c).data("atwho");a&&(a.close(),$(c).data("atwho",null))})}}}]),angular.module("directives").directive("cgAtContext",["At","Common","User",function(a,b,c){var d=function(a,c){angular.forEach(a,function(a){a.avatar=b.thumbnail(a.avatar,c||36)})};return{scope:{at_symbol:"&atSymbol",at_suggestion_count:"&atSuggestionCount",insert_without_symbol:"&insertWithoutSymbol",at_context_type:"=atContextType",at_item:"=atItem",at_all:"=?atAll",extra_item:"=extraItem"},link:function(a,b){a.at_all!==!1&&(a.at_all=!0);var e={remote_filter:_.debounce(function(b,e){var f=b,g=c.get_at_who_context({context_type:a.at_context_type,item_id:a.at_item.iid||a.at_item.id,extra_id:a.extra_item?a.extra_item.id:void 0});g.then(function(b){var c=b.data;d(c),a.at_all&&0==f.toLowerCase().indexOf("a")&&c.push({name:"ALL",avatar:"https://dn-coding-net-production-static.qbox.me/static/1666cf248f343226926d708cf3842126.png"}),e(c)})},300)},f=function(){$(b).data("atwho",null);var c=a.at_symbol()||"@",d=a.insert_without_symbol(),f=a.at_suggestion_count();b.atwho({at:c,show_the_at:!0,start_with_space:!1,search_key:["name","name_pinyin","name_pinyin_short"],space_after:!0,limit:f||5,tpl:'<li data-value="'+(d?"":c)+'${name}"><img src="${avatar}" width="20" height="20" style="border-radius: 10px"/>${name}</li>',callbacks:e})},g=a.$watch("at_item",function(a){!angular.isUndefined(a)&&a&&(a.then?a.then(function(){f()}):a&&f())});a.$on("$destroy",function(){g();var a=$(b).data("atwho");a&&(a.close(),$(b).data("atwho",null))})}}}]),angular.module("directives").directive("cgAtTopic",["TweetTopic",function(a){return{link:function(b,c){var d={remote_filter:_.debounce(function(b,c){a.auto_complete({key:b},function(a){var b=a.data;c(b)})},300)},e=function(){$(c).data("atwho",null),c.atwho({at:"#",show_the_at:!0,start_with_space:!1,space_after:!1,search_key:"name",tpl:'<li data-value="#${name}#" class="tweet-topic-name">${name}</li>',callbacks:d,limit:5})};e(),b.$on("$destroy",function(){var a=$(c).data("atwho");a&&(a.close(),$(c).data("atwho",null))})}}}]),angular.module("app").service("AttachmentOperatingService",["$rootScope","$timeout",function(a,b){var c=/\.(txt|md)$/,d=/\.(doc|docx|dot|docm|dotm|dotx|ppt|pptx|ppsx|pps|pptm|potm|ppam|potx|ppsm|xls|xlsx|xlsb|xlsm)$/,e=/\.(gif|png|jpeg|jpg)$/,f=/\.(pdf)$/,g=function(a){return c.test(a.name)},h=function(a){if(a&&a.name){var b=angular.isString(a)?a:a.name.toLowerCase();if(e.test(b))return"image";if(c.test(b))return"text";if(f.test(b))return"pdf"}return"binary"},i=function(a){return/\.(md|markdown)$/.test(a.name)?"md":"txt"},j=function(a){if(a&&a.name){var b=angular.isString(a)?a:a.name.toLowerCase();return d.test(b)}return!1},k=function(c){var d=[];return{"do":function(d,e){e?b(function(){a.$broadcast(c,d)},e):a.$broadcast(c,d)},on:function(e,f){var g=a.$on(c,function(a,c){f?b(function(){e&&e(a,c)},f):e&&e(a,c)});d.push(g)},remove:function(){angular.forEach(d,function(a){a()}),d=[]}}},l=function(a,b){var c="";return c=b?a+"."+b:a,k(c)},m="coding.preview.file.modal.open",n=l(m),o="coding.file.preview.modal.close",p=l(o),q="coding.edit.file.create.success",r=l(q,"modal"),s=l(q,"detail"),t="coding.edit.file.save.success",u=l(t,"modal"),v=l(t,"detail"),w="coding.preview.file.load.error",x=l(w,"modal"),y=l(w,"detail"),z="coding.edit.file.load.success",A=l(z,"modal"),B=l(z,"detail"),C="coding.preview.file.load.success",D=l(C,"modal"),E=l(C,"detail"),F="coding.file.delete",G=l(F),H="coding.file.list.reload",I=l(H),J="coding.preview.file.reload",K=l(J),L="coding.preview.file.histories.reload",M=l(L),N="coding.preview.file.history.select",O=l(N),P="coding.preview.file.modal.comment",Q=l(P),R="coding.file.preview.modal.switch",S=l(R),T="coding.edit.file.content.modified",U=l(T),V="coding.preview.file.clear",W=l(V),X=l("coding.file.rename");return{doOpenPreviewModal:n["do"],doClosePreviewModal:p["do"],doModalFileCreateSuccess:r["do"],doDetailFileCreateSuccess:s["do"],doModalFileSaveSuccess:u["do"],doDetailFileSaveSuccess:v["do"],doModalFileLoadFail:x["do"],doDetailFileLoadFail:y["do"],doModalFileEditLoadSuccess:A["do"],doDetailFileEditLoadSuccess:B["do"],doModalFilePreviewLoadSuccess:D["do"],doDetailFilePreviewLoadSuccess:E["do"],doFileDeleteSuccess:G["do"],doFileListReloadSuccess:I["do"],doFilePreviewReloadSuccess:K["do"],doFileHistoriesReloadSuccess:M["do"],doFilePreviewHistorySelect:O["do"],doFileCommentSuccess:Q["do"],doModeSwitch:S["do"],doFileModifiedSuccess:U["do"],doFilePreviewClear:W["do"],doFileRenameSuccess:X["do"],onOpenPreviewModal:n.on,onClosePreviewModal:p.on,onModalFileCreateSuccess:r.on,onDetailFileCreateSuccess:s.on,onModalFileSaveSuccess:u.on,onDetailFileSaveSuccess:v.on,onModalFileLoadFail:x.on,onDetailFileLoadFail:y.on,onModalFileEditLoadSuccess:A.on,onDetailFileEditLoadSuccess:B.on,onModalFilePreviewLoadSuccess:D.on,onDetailFilePreviewLoadSuccess:E.on,onFileDeleteSuccess:G.on,onFileListReloadSuccess:I.on,onFilePreviewReloadSuccess:K.on,onFileHistoriesReloadSuccess:M.on,onFilePreviewHistorySelect:O.on,onFileCommentSuccess:Q.on,onModeSwitch:S.on,onFileModifiedSuccess:U.on,onFilePreviewClear:W.on,onFileRenameSuccess:X.on,removeOpenPreviewModal:n.remove,removeClosePreviewModal:p.remove,removeModalFileCreateSuccess:r.remove,removeDetailFileCreateSuccess:s.remove,removeModalFileSaveSuccess:u.remove,removeDetailFileSaveSuccess:v.remove,removeModalFileLoadFail:x.remove,removeDetailFileLoadFail:y.remove,removeModalFileEditLoadSuccess:A.remove,removeDetailFileEditLoadSuccess:B.remove,removeModalFilePreviewLoadSuccess:D.remove,removeDetailFilePreviewLoadSuccess:E.remove,removeFileDeleteSuccess:G.remove,removeFileListReloadSuccess:I.remove,removeFilePreviewReloadSuccess:K.remove,removeFileHistoriesReloadSuccess:M.remove,removeFilePreviewHistorySelect:O.remove,removeFileCommentSuccess:Q.remove,removeModeSwitch:S.remove,removeFileModifiedSuccess:U.remove,removeFilePreviewClear:W.remove,getFileType:h,editorType:i,editable:g,isPreviewable:j}}]),angular.module("directives").directive("cgProjectFileCommentActivity",[function(){return{scope:{activity:"=cgProjectFileCommentActivity",project_id:"=cgProjectFileCommentProjectId",file_id:"=cgProjectFileCommentFileId",view:"=cgProjectFileCommentView",onRemove:"="},link:function(a,b,c){},templateUrl:"common/directives/attachment/comments/tpl/activity.html",controller:"ProjectFileCommentActivityController",replace:!0}}]).controller("ProjectFileCommentActivityController",["$scope","$rootScope","$filter","$location","Common","LightMdEditorService","Attachment","AttachmentOperatingService","Setting",function(a,b,c,d,e,f,g,h,i){a.activity.projectFileComment&&(a.activity.projectFileComment.content=c("restyleMarkDownImage")(a.activity.projectFileComment.content,800,800)),a.canRemove=function(a,b){return a.global_key===b.global_key},a.doRemove=function(){var b=a.project_id,c=a.file_id;if(confirm("确认删除该评论？")){var d=a.activity.projectFileComment,e=g.deleteComment({id:b,file_id:c,comment_id:d.id});e.then(function(){a.onRemove()})}},a.resolveType=function(){return"ProjectFile"===a.activity.target_type?"action":"comment"},a.getView=function(){return a.view?"."+a.view:".detail"},a.atPerson=function(c){var d=c.owner.name;return"modal"==a.view?void b.$broadcast("coding.preview.file.modal.comment",d):void f.atPerson(d,"project-file-detail-modal-editor")},a.activityClass=function(){var b="ProjectFile"===a.activity.target_type;return{comment:!b,action:b}};var j=function(){h.doClosePreviewModal()};a.toSpace=function(a){j(),d.path(a)},a.actionMsg=function(){var b=a.activity,c={create:function(){return"创建了文件"},update:function(){return"更新了文件"},upload_file:function(){return"上传了新版本"},delete_history:function(){return"删除了版本"},rename:function(){return"更新了文件名称"},update_file:function(){return"更新了文件"},"default":function(){return(b.action_msg||"修改了")+"文件"}},d=a.activity.action;return e.smartSwitch(c,d,b)},a.downloadHistory=function(b){var c=i.api_host+"/api/project/"+a.project_id+"/files/histories/"+b+"/download",d=g.fileStatus({id:a.project_id,history_id:b});d.then(function(){location.href=c})},a.actionIconClass=function(){var b=a.activity,c={create:"add",update_file:"edit",rename:"edit",upload_file:"cloud upload","delete":"remove",finish:"checkmark",reassign:"user",restore:"circle blank",update_priority:"exclamation",update_deadline:"calendar",update_description:"rotate180 align right",delete_history:"remove",move_file:"folder"},d=a.activity.action;return e.smartSwitch(c,d,b)}}]),angular.module("directives").directive("cgFileActivities",[function(){return{scope:{project:"=cgFileActivitiesProject",file_id:"=cgFileActivitiesFileId",view:"@cgFileActivitiesView",user:"=cgFileActivitiesUser",file:"=cgFileActivitiesFile"},templateUrl:function(a,b){var c=b.cgFileActivitiesView?"."+b.cgFileActivitiesView:".detail";return"common/directives/attachment/fileActivities/tpl/activities"+c+".html"},controller:"FileActivitiesController",restrict:"EA",replace:!0,link:function(a,b,c){}}}]).controller("FileActivitiesController",["$scope","$rootScope","Activity","Attachment","Common","TextService","BubbleCommentFormService","AttachmentOperatingService",function(a,b,c,d,e,f,g,h){a.loading_activity=!1,a.eventIcon=function(a){return"add"},a.activities=[],a.$watch("file_id",function(b){if(angular.isDefined(b)&&angular.isDefined(a.project)){var c=a.project.id;i(c,b)}});var i=function(b,d,g){var h=c.project_file({project_id:b,file_id:d,last_id:g||999999999});h.then(function(b){a.activities=e.removeNullItem(b.data||[],"id"),"modal"===a.view&&angular.forEach(a.activities,function(a){a.projectFileComment&&(a.projectFileComment.content=f.text(a.projectFileComment.content))})})},j=function(b,c){c&&c.file_id===a.file_id&&i(a.project.id,a.file_id)};h.onModalFileSaveSuccess(j),h.onDetailFileSaveSuccess(j),h.onFileHistoriesReloadSuccess(j),a.onRemove=function(){i(a.project.id,a.file_id),a.file&&a.file.activity_count&&a.file.activity_count--},a.onComment=function(b){var c=a.project.id,e=a.file_id,f=d.comment({id:c,file_id:e},{content:b});return f.then(function(){a.file&&a.file.activity_count&&a.file.activity_count++,i(a.project.id,a.file_id),"modal"==a.view&&(a.content="")}),f},h.onFileCommentSuccess(function(b,c){var d=a.content;d=g.atPerson(null,d,c),a.content=d,k()});var k=function(){$("#attachment-preview-modal-comment-textarea").focus()};a.$on("$destroy",function(){h.removeFileCommentSuccess()})}]),angular.module("directives").directive("cgFileEditor",[function(){return{scope:{project_id:"=cgFileEditorProjectId",file_id:"=cgFileEditorFileId",view:"@cgFileEditorView",editor_type:"=cgFileEditorType",mode:"=cgFileEditorMode",action:"=cgFileEditorAction"},templateUrl:"common/directives/attachment/tpl/editor.html",controller:"FileEditorController",restrict:"EA",link:function(a,b,c){}}}]).controller("FileEditorController",["$scope","$rootScope","Attachment","Flash","$routeParams","AttachmentOperatingService","$timeout","$localStorage","Common",function(a,b,c,d,e,f,g,h,i){a.current_file={};var j=(a.file_id,a.project_id),k=a.view,l=a.folder_id=e.region||"default",m=a.action||"edit",n="create"===m,o="edit"===m,p=0,q=0;a.fetch_draft_at=0;var r=function(a){return"default"===a?0:a};a.$watch("file_id",function(b){if(!isNaN(b)&&o){var c=h[w(j,b)];c?(a.current_file=angular.copy(c),a.current_file.copy=angular.copy(a.current_file)):t(j,b)}}),a.saveFile=function(b){return b.readName?b.content?($("body").removeClass("pagedown-fullscreen"),a.file_saving=!0,void c.create({id:j,dir:r(l)},{name:b.readName+"."+a.editor_type,content:b.content},function(){"modal"===k?f.doModalFileCreateSuccess(b):f.doDetailFileCreateSuccess(b),x(w(j))})["catch"](function(){a.file_saving=!1})):void d.fail().send("文件内容不能为空！"):void d.fail().send("文件名不能为空！")},a.suffix=function(a){return a?a.substring(a.lastIndexOf(".")+1):"???"},a.updateFile=function(b,d){if(!a.file_saving){if($("body").removeClass("pagedown-fullscreen"),!h[w(j,b.file_id)]&&a.current_file.readName===a.current_file.copy.readName&&a.current_file.content===a.current_file.copy.content)return void a.doSwitch(d,"preview");var e=b.file_id;a.file_saving=!0;var g=c.edit({id:j,file:e},{name:b.readName+"."+b.fileType,content:b.content},function(){"modal"==k?f.doModalFileSaveSuccess(b):f.doDetailFileSaveSuccess(b),x(w(j,a.current_file.file_id)),a.current_file.copy.readName=a.current_file.readName,a.current_file.copy.content=a.current_file.content,a.current_file.copy.name=a.current_file.name});g["finally"](function(){a.file_saving=!1})}};var s=a.doSwitch=function(a,b){f.doModeSwitch(b),a.stopPropagation()};a.cancel=function(){(!u()||confirm("本地草稿内容将会清空，确认离开？"))&&x(n?w(j):w(j,a.current_file.file_id)),$("body").removeClass("pagedown-fullscreen"),history.back()},a.cancelEditing=function(b,c){(!u()||confirm("本地草稿内容将会清空，确认离开？"))&&(x(n?w(j):w(j,a.current_file.file_id)),s(b,c),$("body").removeClass("pagedown-fullscreen"))};var t=function(b,d,e){a.file_loading=!0,a.current_file={};var g=c.view({id:b,file:d},function(b){a.file_loading=!1,a.current_file=b.data.file,a.current_file.content=b.data.content,a.current_file.readName=a.current_file.name.substring(0,a.current_file.name.lastIndexOf(".")),a.current_file.type=a.suffix(a.current_file.name),a.current_file.copy=angular.copy(a.current_file),a.office_preview=!1,a.preview_able&&toggleOfficePreview(a.current_file),e&&e(d),"modal"==k?f.doModalFileEditLoadSuccess(a.current_file):f.doDetailFileEditLoadSuccess(a.current_file)});return g["catch"](function(a,b){"modal"==k?f.doModalFileLoadFail(b):f.doDetailFileLoadFail(b)}),g},u=function(){return n&&h[q]||o&&h[p]},v=function(){var b="当前修改已保存至本地草稿，请放心继续操作！",c=function(){return u()?b:void 0};$(window).on("beforeunload",c),a.$on("$locationChangeStart",function(a,b,c){var d=/^([^#]*).*$/;(-1===b.indexOf("#")&&-1===c.indexOf("#")||b.replace(d,"$1")!==c.replace(d,"$1"))&&u()&&(confirm("你的内容已经保存到本地，确认离开？")||a.preventDefault())}),a.$on("$routeChangeStart",function(){$(window).off("beforeunload",c)})};v();var w=function(b,c){return c?"project-"+b+"-file-"+c:"project-"+b+"-file-"+a.editor_type},x=function(a){A.cancel(),delete h[a]},y=function(a,b){return!b||a.name!==b.name||a.content!==b.content||a.readName!==b.readName},z=angular.noop;a.saveDraft=function(b,c){b=b||w(j,c&&c.file_id||a.current_file.id),c=c||a.current_file,i.safeApply.call(a,function(){a.draft_saving_time=(new Date).getTime(),h[b]={draft_saving_time:a.draft_saving_time,content:c.content,name:c.name,fileType:c.fileType,readName:c.readName,file_id:c.file_id}}),g(function(){a.draft_saving_time=0},3e3)};var A=_.debounce(a.saveDraft,3e3);if(n){g(function(){$("#attachment-create").find('input[name="title"]').focus()},100),q=w(j);var B=h[q];B&&(a.current_file=angular.copy(B),a.current_file.copy=angular.copy(a.current_file),a.fetch_draft_at=B.draft_saving_time,a.current_file.init=!0,g(function(){a.fetch_draft_at=!1,a.current_file.init=!1},3001)),z=function(a){a&&!a.init&&(a.content||a.name)&&A(q,a)}}else g(function(){$("#attachment-create").find("textarea:first").focus()},100),z=function(b){if(b.file_id){p=w(j,b.file_id);var c=h[p];c?y(b,b.copy)||0!==a.fetch_draft_at?y(b,b.copy)&&A(p,b):(i.safeApply.call(a,function(){b.content=c.content,b.name=c.name,b.readName=c.readName,a.fetch_draft_at=c.draft_saving_time}),g(function(){a.fetch_draft_at=!1},3e3)):y(b,b.copy)&&A(p,b)}};var C=a.$watch("current_file.content",function(){angular.isDefined(a.current_file)&&(a.current_file.copy&&y(a.current_file,a.current_file.copy)&&b.$broadcast("coding.edit.file.content.modified"),z(a.current_file))});a.$on("$destroy",function(){C()})}]),angular.module("directives").directive("cgFileHistories",[function(){return{scope:{project:"=cgFileHistoriesProject",file:"=cgFileHistoriesFile",view:"@cgFileHistoriesView"},templateUrl:function(a,b){var c=b.cgFileHistoriesView?"."+b.cgFileHistoriesView:".detail";return"common/directives/attachment/fileHistories/tpl/histories"+c+".html"},controller:"FileHistoriesController",restrict:"EA",replace:!0,link:function(a,b,c){}}}]).controller("FileHistoriesController",["$scope","$rootScope","$timeout","Attachment","AttachmentOperatingService","Common","Setting","Flash","$location",function(a,b,c,d,e,f,g,h,i){a.histories=[],a.loading_histories=!1,a.uploading=!1,a.editing=!1,a.deleting_history=void 0,a.USER=b.USER;var j=i.search().version;angular.extend(a,{ADMIN:b.ADMIN}),a.upload=function(b){return a.uploading?void 0:"modal"==a.view?void(b&&b($("#file-modal-history-upload-zone"))):void(b&&b($("#file-history-upload-zone")))};var k=function(b,c){var d=[g.api_host,"/api/project/",b,"/file/history/upload"].join("");a.projectFileHistoryZoneUploadSetting={xhrFields:{withCredentials:!0},url:d,formData:{file_id:c},pasteZone:null,maxFileSize:5e6,singleFileUploads:!1,add:function(b,c){for(var d=0;d<c.files.length;d++){var e=c.files[d];if(e.size>314572800)return void h.fail().timeout(2e3).send("文件:"+e.name+" 大小超过300M!");var g=a.file,i=e.name.split("."),j=g.name.split("."),k=j[j.length-1];if(!(i.length>1))return void h.fail().timeout(2e3).send("上传文件类型有误！");if(k!==i[i.length-1])return void h.fail().timeout(2e3).send("上传文件类型有误！")}f.safeApply.call(a,function(){c.submit(),a.uploading=!0})},done:function(b,c){return"1309"==c.result.code?(h.fail().send("上传文件类型错误"),void f.safeApply.call(a,function(){a.uploading=!1})):void f.safeApply.call(a,function(){a.uploading=!1,o(!0)})},fail:function(){f.safeApply.call(a,function(){a.uploading=!1,h.fail().send("上传失败!")})},progress:function(b,c){var d={total:c.total,loaded:c.loaded};f.safeApply.call(a,function(){a.upload_progress=d})}}},l=function(a){var b=$(a).focus();b[0].setSelectionRange(0,b[0].value.length)},m=a.$watch("file",function(b){if(angular.isDefined(b)){var c=a.project.id,d=b.file_id;angular.isDefined(d)&&p(c,d),k(c,d)}});e.onFileHistoriesReloadSuccess(function(a,b){p(b.project_id,b.file_id)});var n=a.isCurrentHistory=function(b){return a.file?a.file.history_id?a.file.history_id===b.history_id:a.file.storage_key===b.storage_key:!1};a.cancelDelete=function(b,c){a.deleting_history=void 0,b.pre_delete=!1,c&&c.stopPropagation&&c.stopPropagation()},a.preDelete=function(b,c){a.deleting_history=b,b.pre_delete=!0,c&&c.stopPropagation&&c.stopPropagation()},a.setRemarkEditable=function(b,d){return d?(f.safeApply.call(a,function(){d.editing=!0,a.editing=!0}),c(function(){l("#file-history-remark-editor-"+d.history_id)},30),b.preventDefault(),b.stopPropagation(),!1):void 0},a.updateRemark=function(b){b.editing=!1;var c=a.project.id,e=a.file.file_id;if(b.remark!==b.copy.remark){var f=d.updateRemark({id:c,file_id:e,history_id:b.history_id},{remark:b.remark},function(){b.copy=angular.copy(b)});f["catch"](function(){b.remark=b.copy.remark}),f["finally"](function(){b.editing=!1,a.editing=!1})}},a.deleteHistory=function(b){if(!b.deleting){b.deleting=!0;var c=d.deleteHistory({id:a.project.id,history_id:b.history_id});c.then(function(){a.file.history_count--,a.file.activity_count++,a.deleting_history=void 0,h.success().send("删除成功"),a.histories=f.removeOfId(a.histories,b.history_id,"history_id")}),c["catch"](function(){b.deleting=!1})}},a.downloadHistory=function(b){location.href=g.api_host+"/api/project/"+a.project.id+"/files/histories/"+b.history_id+"/download"};var o=function(b){var c=a.project.id,d=a.file.file_id;c&&d&&(p(c,d),b&&e.doFilePreviewReloadSuccess(d))},p=function(b,c){a.loading_histories=!0;var f=d.histories({id:b,file_id:c});f.then(function(b){var c=b.data||[],d=0,f=!0;if(angular.forEach(c,function(a){a.copy=angular.copy(a),j===a.version&&(d=a.history_id,f=!1)}),a.histories=c,j&&f)h.warn().send("该版本不存在"),i.skipReload().search("version",null);else if(j&&j!=a.histories.length){var g={history_id:d,view:a.view,version:j};e.doFilePreviewHistorySelect(g)}}),f["finally"](function(){a.loading_histories=!1})};a.onRemove=function(){p(a.project.id,a.file_id)},a.selectHistory=function(b){if(!n(b)){var c={version:b.version,history_id:b.history_id,view:a.view};e.doFilePreviewHistorySelect(c)}},a.$on("$destroy",function(){m(),e.removeFilePreviewHistorySelect(),e.removeFileHistoriesReloadSuccess()}),a.$on("attachmentPreviewModalClosed",function(b){a.deleting_history=void 0})}]),angular.module("directives").directive("cgFilePreviewer",[function(){return{scope:{project_id:"=cgFilePreviewerProjectId",file_id:"=cgFilePreviewerFileId",view:"@cgFilePreviewerView"},templateUrl:"common/directives/attachment/tpl/previewer.html",controller:"FilePreviewerController",restrict:"EA",replace:!0,link:function(a,b,c){}}}]).controller("FilePreviewerController",["$scope","$rootScope","$timeout","Attachment","Markdown","Common","Setting","AttachmentOperatingService","$location","experiment",function(a,b,c,d,e,f,g,h,i,j){a.current_file={},a.file_loading=!0;var k=(a.file_id,a.view);a.pdf_preview=!1,a.pdf_preview_loading=!1,a.pdf_preview_loaded=!1,a.pdf_preview_page=1,a.pdf_resize="small",a.pdf_fullscreen_height=0,a.office_preview=!0,a.preview_able=!1,a.office_preview_loading=!1,a.office_style={"margin-top":"-90px"},a.markdown_preview=!1,a.image_previewing=!1,a.show_modal=function(){$("#preview-image-modal").modal("show")},a.hide_modal=function(){$("#preview-image-modal").modal("hide")},a.screenfull_enabled=screenfull.enabled,screenfull.enabled&&document.addEventListener(screenfull.raw.fullscreenchange,function(){a.pdf_resize=screenfull.isFullscreen?"full":"small",screenfull.isFullscreen?a.pdf_fullscreen_height="100%":a.pdf_fullscreen_height=0}),a.getFileType=function(a){return h.getFileType(a)},a.suffix=function(a){return a?a.substring(a.lastIndexOf(".")+1):"???"};var l={};a.loadPdf=function(b,c){var e=a.file_id;if(!a.pdf_preview_loading){a.pdf_preview_page=b||1;var f=l[e];f||(f=l[e]=[]);var g=f[b];if(g)return void(a.pdf_preview=g);a.pdf_preview_loading=!0,d.pdf({id:a.project_id,file:e,page:b||1},function(c){a.pdf_preview_loading=!1,a.pdf_preview=c.data,a.pdf_preview_loaded=!0,f[b]=angular.copy(a.pdf_preview)})["catch"](function(){a.pdf_preview_loading=!1}),c&&c.preventDefault&&c.preventDefault(),c&&c.stopPropagation&&c.stopPropagation()}},a.togglePdfResize=function(){a.pdf_resize="full"===a.pdf_resize?"small":"full";var b=$("#pdf-preview")[0];"full"==a.pdf_resize?(a.pdf_fullscreen_height="100%",screenfull.request(b)):(a.pdf_fullscreen_height=0,screenfull.enabled&&screenfull.toggle(b))};var m=a.isPreviewable=function(a){return h.isPreviewable(a)},n=a.toggleOfficePreview=function(b){if(!a.office_preview_loading){if(a.office_preview)return $("#office_preview").attr("src",""),void(a.office_preview=!1);if(a.office_preview_loading=!0,m(b)){var c=d.download_url({id:a.project_id,file_id:a.file_id});c.then(function(b){var c="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(b.data.download_url);a.office_style["margin-top"]="-90px",j.isActive("coding-owas")&&(c=g.owas_url+"?src="+encodeURIComponent(b.data.download_url),a.office_style["margin-top"]="-30px"),$("#office_preview").attr("src",c),a.office_preview=!0}),c["finally"](function(){a.office_preview_loading=!1})}}},o=a.toggleHistoryOfficePreview=function(b,c){if(!a.office_preview_loading){if(a.office_preview)return $("#office_preview").attr("src",""),void(a.office_preview=!1);if(a.office_preview_loading=!0,m(b)){var e=d.history_download_url({id:a.project_id,history_id:c});e.then(function(b){var c="https://view.officeapps.live.com/op/view.aspx?src="+encodeURIComponent(b.data.download_url);a.office_style["margin-top"]="-90px",j.isActive("coding-owas")&&(c=g.owas_url+"?src="+encodeURIComponent(b.data.download_url),a.office_style["margin-top"]="-30px"),$("#office_preview").attr("src",c),a.office_preview=!0}),e["finally"](function(){a.office_preview_loading=!1})}}},p=function(c){a.markdown_preview="",e.project_preview(f.projectParams(b.PROJECT),{content:c}).then(function(b){a.markdown_preview=b.data||""})},q=function(b,c,e){a.file_loading=!0,a.current_file={};var f=d.view({id:b,file:c},function(b){a.file_loading=!1,a.current_file=b.data.file,a.current_file.content=b.data.content,a.current_file.readName=a.current_file.name.substring(0,a.current_file.name.lastIndexOf(".")),a.current_file.type=a.suffix(a.current_file.name),a.current_file.activity_count=b.data.activity_count,a.current_file.history_count=b.data.history_count,a.current_file.share=b.data.share,a.current_file.copy=angular.copy(a.current_file),a.preview_able=m(a.current_file),a.office_preview=!1,a.preview_able&&n(a.current_file),e&&e(c),"modal"==k?h.doModalFilePreviewLoadSuccess(a.current_file):h.doDetailFilePreviewLoadSuccess(a.current_file)});return f["catch"](function(a,b){"modal"==k?h.doModalFileLoadFail(b):h.doDetailFileLoadFail(b)}),f},r=function(b,c){a.image_previewing=!0,q(b,c,function(){var b=a.current_file,c=a.getFileType(b);"pdf"===c?a.loadPdf():"md"===b.fileType&&(a.makdown_preview="",p(b.content)),"image"===c&&s(a.current_file),a.image_previewing=!1})},s=function(a){a.image_info_url&&$.get(a.image_info_url,function(b){a.image_width=b.width,a.image_height=b.height})},t=function(b,c,e){a.file_loading=!0;var f=d.view_history({id:b,history_id:c});f.then(function(b){a.file_loading=!1,a.current_file.storage_key=b.data.file.storage_key,a.current_file.history_id=b.data.file.history_id,a.current_file.owner_preview=b.data.file.owner_preview,a.current_file.content=b.data.content,a.current_file.name=b.data.file.name,a.current_file.type=a.suffix(a.current_file.name),a.preview_able=m(a.current_file),a.office_preview=!1,a.preview_able&&o(a.current_file,c),e&&e()})},u=function(b,c){t(b,c,function(){var b=a.current_file,c=a.getFileType(b);"pdf"===c?a.loadPdf():"md"===b.fileType&&(a.makdown_preview="",p(b.content))})};a.downloadFile=function(){location.href=g.api_host+"/api/project/"+a.project_id+"/files/"+a.file_id+"/download"},a.onPdfNavChange=function(a){c(function(){$("#pdf-preview .button."+a).trigger("click")})},a.$watch("file_id",function(b){angular.isDefined(a.project_id)&&angular.isDefined(b)&&r(a.project_id,b)}),h.onFilePreviewReloadSuccess(function(b,c){c&&r(a.project_id,c)}),h.onFilePreviewHistorySelect(function(b,c){!c.view||c.view&&a.view!==c.view||(u(a.project_id,c.history_id),$("#attachment-preview-modal").is(":visible")||i.skipReload().search("version",c.version))}),a.$on("$destroy",function(){h.removeFilePreviewHistorySelect(),h.removeFilePreviewReloadSuccess(),$("#preview-image-modal").remove(),i.search("version",null)}),a.$on("attachmentPreviewModalClosed",function(){i.search("version",null)})}]),angular.module("directives").directive("cgFileToolbar",function(){return{scope:{file:"=cgFileToolbarFile",project:"=cgFileToolbarProject",folder_id:"=cgFileToolbarFolderId"},link:function(a,b,c){},templateUrl:"common/directives/attachment/tpl/toolbar.html",controller:"FileToolbarController",restrict:"EA",replace:!0}}).controller("FileToolbarController",["$scope","$rootScope","$location","$timeout","$compile","Setting","AttachmentOperatingService",function(a,b,c,d,e,f,g){angular.extend(a,{ADMIN:b.ADMIN});var h=function(){g.doClosePreviewModal()},i=function(){d(function(){var b=$("#file-info-modal-tpl .file_info_word.file-image-info");a.file.image_width&&a.file.image_height?(b.css("display","table-row"),b.find(".file-info-right").text(a.file.image_width+" * "+a.file.image_height)):b.css("display","none"),$(".project-file-tool-bar .preview-modal.info.icon").data("html",$("#file-info-modal-tpl").html())},300)};a.USER=b.USER,a.downloadFile=function(b,c){"edit"!=a.mode&&(location.href=f.api_host+"/api/project/"+c+"/files/"+b.file_id+"/download")},a.toDetail=function(b,d,e){if("edit"!=a.mode){var f=[b.project_path,"/attachment/",e?e:"default","/preview",d?"/"+d:""].join("");c.path(f),h()}},a["delete"]=function(){g.doFileDeleteSuccess(a.file)},a.$watch("file",function(b){angular.isDefined(b)&&(a.file_modified=!1,a.share=b.share,i())}),a.doSwitch=function(b,c){a.file_modified||(g.doModeSwitch(c),b.stopPropagation())},g.onModeSwitch(function(b,c){a.mode=c}),g.onFileModifiedSuccess(function(){a.file_modified=!0}),a.$on("$destroy",function(){g.removeModeSwitch(),g.removeFileModifiedSuccess()})}]),angular.module("directives").directive("cgFolderDropdown",function(){return{scope:{folder:"=",isSubFolder:"=",hasTargetFolders:"=",onRename:"=",onZipDownload:"=",onRemove:"=",onMoveSuccess:"="},templateUrl:"common/directives/attachment/menu/tpl/folderDropdown.html",
transclude:!0,controller:"FolderDropdownController",restrict:"E",link:function(a,b){var c=".menu .item, .menu .item *";a.menuItems=b.find(c),a.zipDownloadForm=angular.element(b).find(".zipDownloadForm"),a.dropdownItem=b.find("[cg-dropdown]")}}}).controller("FolderDropdownController",["$rootScope","$scope","Attachment","Flash","$timeout","Common",function(a,b,c,d,e,f){var g=f.uuid(),h=a.PROJECT;b.showFolderSelectModal=!1,b.zipDownloadUrl="",b.dropdownStatus={show:!1},b.dropdownSetting={onHide:function(){b.dropdownStatus.show=!1},onShow:function(){b.dropdownStatus.show=!0,a.$broadcast("on.folder.dropdown.show",g)}},a.$on("on.folder.dropdown.show",function(a,c){c!==g&&b.dropdownItem.dropdown("is visible")&&b.dropdownItem.dropdown("hide")}),b.onFolderDropdownClick=function(a){var c=angular.element(a.target);c.is(b.menuItems)||a.stopPropagation()},b.onBeforeFolderZipDownload=function(a,f,g){if(0!==f.count){if(angular.isFunction(b.onZipDownload))return void b.onZipDownload.apply(this,arguments);var i={project:h.name,user:h.owner_user_name,folder:f.file_id};c.zipDownloadFolderNeedAsync(i,function(a){var f=a.data;f?confirm("批量下载文件过大，我们将在后台打包，打包完成后将给您发送站内通知。确认下载？")&&c.zipDownloadFolderAsync(i,function(){d.success().send("文件已开始在后台打包")}):(b.zipDownloadUrl="/api/user/"+i.user+"/project/"+i.project+"/folder/"+i.folder+"/download",e(function(){b.zipDownloadForm.submit(),b.zipDownloadUrl="",b.dropdownItem.dropdown("hide")},100))})}},b.loadModal=function(a){return this.showMoveFolderMenu(a)&&this.dropdownStatus.show},b.showMoveFolderMenu=function(a){return 0===a.sub_folders.length&&a.count>0&&b.hasTargetFolders},b.showDownloadMenu=function(a){return a.count>0},b.onBeforeFolderMove=function(a,c){0!==c.count&&b.hasTargetFolders&&(b.showFolderSelectModal=f.uuid())},b.onMoveTargetFolderSelect=function(a){var d=b.folder.file_id;c.moveFolder({user:h.owner_user_name,project:h.name,sourceFolderId:d,targetFolderId:a},{},function(){angular.isFunction(b.onMoveSuccess)&&b.onMoveSuccess(d,a)})},b.onModalHide=function(){b.showFolderSelectModal=!1}}]),angular.module("directives").directive("cgFolderSelectorModal",function(){return{scope:{show:"=",folder:"=",isSubFolder:"=",onSelect:"=",onHide:"=",title:"@"},templateUrl:"common/directives/attachment/menu/tpl/folderSelectorModal.html",controller:"FolderSelectorModalController",restrict:"E"}}).controller("FolderSelectorModalController",["$scope","ModalService","$rootScope","Common","CascadeMenuService",function(a,b,c,d,e){var f=a.folderSelectModal=b.instance("folder-select-modal");a.projectId=c.PROJECT.id,a.startInit=!1;var g=a.folder;a.excludeFolders=[0,a.isSubFolder?g.parent_id:g.file_id];var h=this.menu_id=d.uuid();this.disableUpload=!0,f.on("hide",function(){angular.isFunction(a.onHide)&&a.onHide()}),a.$watch("show",function(b){a.startInit=b?b:!1,f.action(b?"show":"hide")}),a.onFolderChange=function(b){a.onHide(),a.onSelect(b)};var i=c.$watch("PROJECT",function(b){b&&e.push(h,{text:a.title})});a.$on("$destroy",function(){i()})}]),angular.module("app").config(["$routeProvider","$locationProvider","UserResolver","ProjectResolver",function(a,b,c,d){a.when("/test/attachment",{templateUrl:"common/directives/attachment/tpl/example.html",controller:function(){}})}]),angular.module("directives").directive("cgAutoFocus",["$timeout","$parse",function(a,b){return{scope:{focus:"=cgAutoFocus",select_text:"=selectText"},link:function(c,d){var e=c.focus;angular.isDefined(e)?(c.$watch("focus",function(b){angular.isDefined(b)&&b===!0&&a(function(){var a=d[0];a.focus(),c.select_text&&a.setSelection&&a.setSelection(0,a.value.length)},200)},!0),d.on("blur",function(){angular.isDefined(e)&&a(function(){b(e).assign(c,!1)},200)})):a(function(){d[0].focus()},200)}}}]),angular.module("directives").directive("cgBubble",["$filter",function(a){return{scope:{tweet:"=cgBubble",onRemove:"=",hideAvatar:"=",expand:"="},link:function(b){b.tweet_content=a("restyleMarkDownImage")(b.tweet.content),b.tweet_content=a("restyleEmoji")(b.tweet_content)},templateUrl:"common/directives/bubble/tpl/bubble.html",controller:"BubbleController",transclude:!0,replace:!0}}]).controller("BubbleController",["$scope","Tweet","Payment","BubbleService","$rootScope","Common","Flash","$location","TwoFactorAuth","$sce","$window",function(a,b,c,d,e,f,g,h,i,j,k){var l=a.$watch("tweet",function(b){if(b&&b.owner){if(a.tweet.owner.avatar=f.thumbnail(b.owner.avatar,84),b&&b.location){var c=b.location.split("·");if(1===c.length)a.tweet.location=c[0];else{var e="";angular.forEach(c,function(a){e+=a+" · "}),e=e.substring(0,e.length-3),a.tweet.location=e}}d.thumbnailLikeUsers(b.like_users),l()}}),m=e.USER;a.liking=!1,a.liked=!1,a.like_show_limit=10,a.like_opt_done=!1,a.user=a.user||{},this.toggleLike=a.toggleLike=function(c){if(!a.liking){a.liking=!0,a.like_opt_done=!1;var e={like:function(){c.liked=!0,c.likes++,f.findOfId(c.reward_users,m.global_key,"global_key")||c.like_users.push(d.buildLikeUser(m)),a.like_opt_done=!0},un_like:function(){c.liked=!1,c.likes--,c.like_users=f.removeOfId(c.like_users,m.global_key,"global_key"),a.like_opt_done=!1}},g={like:e.un_like,un_like:e.like},h=c.liked?"un_like":"like",i=b[h]({id:c.id},{});e[h](),i["catch"](g[h]),i["finally"](function(){a.liking=!1})}},a.rewardTip=function(a){return a.rewarded?"您已打赏过了":"打赏给该用户"},a.showTip=function(a){a.owner_id!==m.id&&(a.showTweetTip=!0)},a.hideTip=function(a){a.showTweetTip=!1},a.canRemove=function(){return m&&m.id===a.tweet.owner_id&&!!a.onRemove},a.doRemove=function(){if(confirm("确认删除该泡泡？")){var c=b["delete"]({tweet_id:a.tweet.id});c.then(function(){f.safeApply.call(a,function(){a.onRemove(a.tweet)})})}},a.showMoreLikesAndRewards=function(b){return b.likes+b.rewards>a.like_show_limit},a.showAllLikesAndRewards=function(c){a.like_show_limit=c.likes+c.rewards,a.loading_likes=!0;var d=b.allLikesAndRewards({id:c.id,pageSize:5e3});d.then(function(a){c.like_users=a.data&&a.data.likeUsers||c.like_users,c.reward_users=a.data&&a.data.rewardUsers||c.reward_users}),d["finally"](function(){a.loading_likes=!1})},this.addComment=function(){a.tweet.comments++},this.removeComment=function(){a.tweet.comments--},h.search().tweet&&this.prepareReward(a.tweet)}]).service("BubbleService",["Common",function(a){var b=function(b){return{avatar:a.thumbnail(b.avatar,36),path:b.path,name:b.name,global_key:b.global_key}},c=function(b,c){angular.forEach(b,function(b){b.avatar=a.thumbnail(b.avatar,c||36)})},d=function(b,c){return!angular.isArray(b)&&b?void(b.owner.avatar=a.thumbnail(b.owner.avatar,c||60)):void angular.forEach(b,function(b){b.owner.avatar=a.thumbnail(b.owner.avatar,c||60)})};return{buildLikeUser:b,thumbnailLikeUsers:c,thumbnailCommentUser:d}}]),angular.module("directives").directive("cgBubbleComment",[function(){return{require:"?^cgBubble",scope:{tweet:"=cgBubbleComment"},link:function(a,b,c,d){a.decreaseCount=function(){d.removeComment()},a.increaseCount=function(){d.addComment()}},templateUrl:"common/directives/bubble/tpl/bubble_comment.html",controller:"BubbleCommentController",replace:!0}}]).controller("BubbleCommentController",["$scope","Tweet","BubbleCommentFormService","BubbleService",function(a,b,c,d){a.comments=a.tweet.comment_list=a.tweet.comment_list||[],d.thumbnailCommentUser(a.comments),a.tweet_id=a.tweet.id,a.loading_all=!1,a.loaded=!1,a.canRemove=function(a,b){return b&&a.owner_id===b.id},a.doRemove=function(c){if(confirm("确认删除该评论？")){c.removing=!0;var d=b.delete_comment({id:c.tweet_id,comment:c.id});d.then(function(){var b=a.comments.indexOf(c);a.comments.splice(b,1),a.decreaseCount()}),d["finally"](function(){c.removing=!1})}},a.insertCommentName=function(a){c.insertComment(a)},a.canShowMore=function(){return a.comments.length<a.tweet.comments},a.showAllComments=function(){if(!a.loaded){var c=b.comments({id:a.tweet.id,page:1,pageSize:500});a.loading_all=!0,c.then(function(b){b&&b.data&&(a.comments=b.data.list,a.tweet.comments=b.data.totalRow,a.loaded=!0)}),c["finally"](function(){a.loading_all=!1})}},c.onComment(a.tweet_id,function(b,c){a.comments.splice(0,0,c),a.increaseCount()})}]),angular.module("directives").directive("cgBubbleCommentForm",["$rootScope",function(a){return{require:"?^cgBubble",scope:{tweet:"=cgBubbleCommentForm"},link:function(a,b,c,d){var e=b.find("input,textarea");a.resizeInput=function(){e.css("height",0),e.css("height",e.prop("scrollHeight"))},a.resizeInput(),e.on("keyup",function(){a.resizeInput()}),a.focusInput=function(a){e.focus()},a.selection=function(){return{start:e[0].selectionStart,end:e[0].selectionEnd}},a.toggleLike=function(b){(a.tweet.liked&&b.match(/(\:\-1\:)|(\:thumbsdown\:)/g)||!a.tweet.liked&&b.match(/(\:\+1\:)|(\:thumbsup\:)/g))&&d.toggleLike(a.tweet)}},templateUrl:"common/directives/bubble/tpl/bubble_comment_form.html",controller:"BubbleCommentFormController",replace:!0}}]).controller("BubbleCommentFormController",["$scope","$localStorage","BubbleCommentFormService","Tweet","$rootScope","BubbleService",function(a,b,c,d,e,f){a.content="",a.sending=!1;var g=null,h=a.$watch("tweet",function(c){angular.isDefined(c)&&(g="message_"+c.id,a.content=b[g],h&&h())});a.doComment=function(){if(!a.sending){a.sending=!0;var h=d.comment({id:a.tweet.id},{content:a.content});h.then(function(d){var h=d.data;h.owner=e.USER,f.thumbnailCommentUser(h),c.doComment(a.tweet.id,h),a.toggleLike(a.content),a.content="",delete b[g]}),h["finally"](function(){a.sending=!1,setTimeout(function(){a.resizeInput()},100)})}},c.onCommentNameInsert(a.tweet.id,function(b,d){var e=a.selection();a.content=c.atPerson(e,a.content,d),a.focusInput(e)})}]).service("BubbleCommentFormService",["$rootScope",function(a){var b=function(b,c){a.$on("bubble.comment."+b+".insert.name",c)},c=function(b){a.$broadcast("bubble.comment."+b.tweet_id+".insert.name",b.owner.name)},d=function(b,c){a.$broadcast("bubble.comment."+b+".insert",c)},e=function(b,c){a.$on("bubble.comment."+b+".insert",c)},f=function(a,b,c){if(!b||0===b.length)return"@"+c+" ";var d=new RegExp("@"+c+"\\s","g"),e=b.match(d);return e&&0!==e.length||(b+=", @"+c+" "),b};return{onCommentNameInsert:b,insertComment:c,doComment:d,onComment:e,atPerson:f}}]),angular.module("directives").directive("cgBubbleReward",["$filter",function(a){return{scope:{reward:"=cgBubbleReward",onRemove:"="},templateUrl:"common/directives/bubbleReward/tpl/bubble_reward.html",controller:"BubbleRewardController",transclude:!0,replace:!0}}]).controller("BubbleRewardController",["$scope","Tweet","Payment","BubbleService","$rootScope","Common","Flash","$location","TwoFactorAuth","$sce","$window",function(a,b,c,d,e,f,g,h,i,j,k){var l=e.USER;a.user=a.user||{},a.tweet=null,a.$parent.reward=function(c,e){if(e&&e.preventDefault(),a.showTwoFactorCode){var h=a.user.twoFactorCode||"";if(!/^[\d\s]*$/.test(h)||6!=h.replace(/\s/g,"").length)return void g.fail().send("两步验证码为6位纯数字哦");var i=b.reward({tweet_id:c.id},{two_factor_code:h});i.then(function(a){n(a)})}else if(a.showPassword){var k=a.user.password||"";if(k.length>64||k.length<6)return void g.fail().send("密码长度为6~64位哦");var m=SHA1(k),i=b.reward({tweet_id:c.id},{password:m});i.then(function(a){n(a)})}else{var i=b.reward({tweet_id:c.id},{});i.then(function(a){n(a)})}var n=function(b){_.isEmpty(b.data)?(g.hide(),g.success().send("打赏成功！"),_.isEmpty(c.reward_users)&&(c.reward_users=[]),c.reward_users.push(d.buildLikeUser(l)),c.like_users=f.removeOfId(c.like_users,l.global_key,"global_key"),$("#tweet-reward-modal").modal("hide"),c.rewards=(c.rewards||0)+1,c.rewarded=!0):a.errorMessages=_.map(b.data,function(a){return j.trustAsHtml(a)})};return!1},a.$parent.prepareReward=function(d){if(a.tweet=d,d.owner_id===l.id)return void g.warn().send("不可以打赏自己哟！");if(d.rewarded)return void g.warn().send("已经打赏过了哦");a.user.password="",a.errorMessages=[];var e,f=b.prepareReward({tweet_id:d.id});f.then(function(b){if(b.data.need_password){var d=i.method({},{});d.then(function(b){"totp"==b.data?a.showTwoFactorCode=!0:"password"==b.data&&(a.showPassword=!0)})}e=c.exchange_balance(),e.then(function(b){a.user.points_left=b.data.point_left,$("#tweet-reward-modal").modal("show")}),_.isEmpty(b.data.error_msg)||(a.errorMessages=_.map(b.data.error_msg,function(a){return j.trustAsHtml(a)})),e["catch"](function(){})})}}]),angular.module("directives").directive("cgCascadingAddress",[function(){return{restrict:"E",scope:{province:"=province",city:"=city",model:"=ngModel"},replace:!0,templateUrl:"common/directives/casacadingAddress/tpl/city.html",link:function(a,b,c){a.change=!1,a.set={province:function(b){a.province=b,a.city=""},city:function(b){a.city=b}},a.clear=function(){""!==a.province&&(a.change=!0),a.province="",a.city=""},a.open=function(b){"show"===b?a.show=!0:a.show=!1},a.$watch("province",function(b){if(b){var c=a.provinces.filter(function(a){return a.p===b});a.cities=c[0].c,a.change=!0}else a.cities=[]}),a.$watch(function(){var b=a.province+" "+a.city;a.change&&(a.model=b.replace(/undefined *|   /g,""))}),a.provinces=[{p:"北京",c:[{n:"东城区"},{n:"西城区"},{n:"崇文区"},{n:"宣武区"},{n:"朝阳区"},{n:"丰台区"},{n:"石景山区"},{n:"海淀区"},{n:"门头沟区"},{n:"房山区"},{n:"通州区"},{n:"顺义区"},{n:"昌平区"},{n:"大兴区"},{n:"平谷区"},{n:"怀柔区"},{n:"密云县"},{n:"延庆县"}]},{p:"天津",c:[{n:"和平区"},{n:"河东区"},{n:"河西区"},{n:"南开区"},{n:"河北区"},{n:"红挢区"},{n:"滨海新区"},{n:"东丽区"},{n:"西青区"},{n:"津南区"},{n:"北辰区"},{n:"宁河区"},{n:"武清区"},{n:"静海县"},{n:"宝坻区"},{n:"蓟县"}]},{p:"河北",c:[{n:"石家庄",a:[{s:"长安区"},{s:"桥东区"},{s:"桥西区"},{s:"新华区"},{s:"井陉矿区"},{s:"裕华区"},{s:"井陉县"},{s:"正定县"},{s:"栾城县"},{s:"行唐县"},{s:"灵寿县"},{s:"高邑县"},{s:"深泽县"},{s:"赞皇县"},{s:"无极县"},{s:"平山县"},{s:"元氏县"},{s:"赵县"},{s:"辛集市"},{s:"藁城市"},{s:"晋州市"},{s:"新乐市"},{s:"鹿泉市"}]},{n:"唐山",a:[{s:"路南区"},{s:"路北区"},{s:"古冶区"},{s:"开平区"},{s:"丰南区"},{s:"丰润区"},{s:"滦县"},{s:"滦南县"},{s:"乐亭县"},{s:"迁西县"},{s:"玉田县"},{s:"唐海县"},{s:"遵化市"},{s:"迁安市"}]},{n:"秦皇岛",a:[{s:"海港区"},{s:"山海关区"},{s:"北戴河区"},{s:"青龙满族自治县"},{s:"昌黎县"},{s:"抚宁县"},{s:"卢龙县"}]},{n:"邯郸",a:[{s:"邯山区"},{s:"丛台区"},{s:"复兴区"},{s:"峰峰矿区"},{s:"邯郸县"},{s:"临漳县"},{s:"成安县"},{s:"大名县"},{s:"涉县"},{s:"磁县"},{s:"肥乡县"},{s:"永年县"},{s:"邱县"},{s:"鸡泽县"},{s:"广平县"},{s:"馆陶县"},{s:"魏县"},{s:"曲周县"},{s:"武安市"}]},{n:"邢台",a:[{s:"桥东区"},{s:"桥西区"},{s:"邢台县"},{s:"临城县"},{s:"内丘县"},{s:"柏乡县"},{s:"隆尧县"},{s:"任县"},{s:"南和县"},{s:"宁晋县"},{s:"巨鹿县"},{s:"新河县"},{s:"广宗县"},{s:"平乡县"},{s:"威县"},{s:"清河县"},{s:"临西县"},{s:"南宫市"},{s:"沙河市"}]},{n:"保定",a:[{s:"新市区"},{s:"北市区"},{s:"南市区"},{s:"满城县"},{s:"清苑县"},{s:"涞水县"},{s:"阜平县"},{s:"徐水县"},{s:"定兴县"},{s:"唐县"},{s:"高阳县"},{s:"容城县"},{s:"涞源县"},{s:"望都县"},{s:"安新县"},{s:"易县"},{s:"曲阳县"},{s:"蠡县"},{s:"顺平县"},{s:"博野县"},{s:"雄县"},{s:"涿州市"},{s:"定州市"},{s:"安国市"},{s:"高碑店市"}]},{n:"张家口",a:[{s:"桥东区"},{s:"桥西区"},{s:"宣化区"},{s:"下花园区"},{s:"宣化县"},{s:"张北县"},{s:"康保县"},{s:"沽源县"},{s:"尚义县"},{s:"蔚县"},{s:"阳原县"},{s:"怀安县"},{s:"万全县"},{s:"怀来县"},{s:"涿鹿县"},{s:"赤城县"},{s:"崇礼县"}]},{n:"承德",a:[{s:"双桥区"},{s:"双滦区"},{s:"鹰手营子矿区"},{s:"承德县"},{s:"兴隆县"},{s:"平泉县"},{s:"滦平县"},{s:"隆化县"},{s:"丰宁满族自治县"},{s:"宽城满族自治县"},{s:"围场满族蒙古族自治县"}]},{n:"沧州",a:[{s:"新华区"},{s:"运河区"},{s:"沧县"},{s:"青县"},{s:"东光县"},{s:"海兴县"},{s:"盐山县"},{s:"肃宁县"},{s:"南皮县"},{s:"吴桥县"},{s:"献县"},{s:"孟村回族自治县"},{s:"泊头市"},{s:"任丘市"},{s:"黄骅市"},{s:"河间市"}]},{n:"廊坊",a:[{s:"安次区"},{s:"广阳区"},{s:"固安县"},{s:"永清县"},{s:"香河县"},{s:"大城县"},{s:"文安县"},{s:"大厂回族自治县"},{s:"霸州市"},{s:"三河市"}]},{n:"衡水",a:[{s:"桃城区"},{s:"枣强县"},{s:"武邑县"},{s:"武强县"},{s:"饶阳县"},{s:"安平县"},{s:"故城县"},{s:"景县"},{s:"阜城县"},{s:"冀州市"},{s:"深州市"}]}]},{p:"山西",c:[{n:"太原",a:[{s:"小店区"},{s:"迎泽区"},{s:"杏花岭区"},{s:"尖草坪区"},{s:"万柏林区"},{s:"晋源区"},{s:"清徐县"},{s:"阳曲县"},{s:"娄烦县"},{s:"古交市"}]},{n:"大同",a:[{s:"城区"},{s:"矿区"},{s:"南郊区"},{s:"新荣区"},{s:"阳高县"},{s:"天镇县"},{s:"广灵县"},{s:"灵丘县"},{s:"浑源县"},{s:"左云县"},{s:"大同县"}]},{n:"阳泉",a:[{s:"城区"},{s:"矿区"},{s:"郊区"},{s:"平定县"},{s:"盂县"}]},{n:"长治",a:[{s:"城区"},{s:"郊区"},{s:"长治县"},{s:"襄垣县"},{s:"屯留县"},{s:"平顺县"},{s:"黎城县"},{s:"壶关县"},{s:"长子县"},{s:"武乡县"},{s:"沁县"},{s:"沁源县"},{s:"潞城市"}]},{n:"晋城",a:[{s:"城区"},{s:"沁水县"},{s:"阳城县"},{s:"陵川县"},{s:"泽州县"},{s:"高平市"}]},{n:"朔州",a:[{s:"朔城区"},{s:"平鲁区"},{s:"山阴县"},{s:"应县"},{s:"右玉县"},{s:"怀仁县"}]},{n:"晋中",a:[{s:"榆次区"},{s:"榆社县"},{s:"左权县"},{s:"和顺县"},{s:"昔阳县"},{s:"寿阳县"},{s:"太谷县"},{s:"祁县"},{s:"平遥县"},{s:"灵石县"},{s:"介休市"}]},{n:"运城",a:[{s:"盐湖区"},{s:"临猗县"},{s:"万荣县"},{s:"闻喜县"},{s:"稷山县"},{s:"新绛县"},{s:"绛县"},{s:"垣曲县"},{s:"夏县"},{s:"平陆县"},{s:"芮城县"},{s:"永济市"},{s:"河津市"}]},{n:"忻州",a:[{s:"忻府区"},{s:"定襄县"},{s:"五台县"},{s:"代县"},{s:"繁峙县"},{s:"宁武县"},{s:"静乐县"},{s:"神池县"},{s:"五寨县"},{s:"岢岚县"},{s:"河曲县"},{s:"保德县"},{s:"偏关县"},{s:"原平市"}]},{n:"临汾",a:[{s:"尧都区"},{s:"曲沃县"},{s:"翼城县"},{s:"襄汾县"},{s:"洪洞县"},{s:"古县"},{s:"安泽县"},{s:"浮山县"},{s:"吉县"},{s:"乡宁县"},{s:"大宁县"},{s:"隰县"},{s:"永和县"},{s:"蒲县"},{s:"汾西县"},{s:"侯马市"},{s:"霍州市"}]},{n:"吕梁",a:[{s:"离石区"},{s:"文水县"},{s:"交城县"},{s:"兴县"},{s:"临县"},{s:"柳林县"},{s:"石楼县"},{s:"岚县"},{s:"方山县"},{s:"中阳县"},{s:"交口县"},{s:"孝义市"},{s:"汾阳市"}]}]},{p:"内蒙古",c:[{n:"呼和浩特",a:[{s:"新城区"},{s:"回民区"},{s:"玉泉区"},{s:"玉泉区"},{s:"赛罕区"},{s:"土默特左旗"},{s:"托克托县"},{s:"和林格尔县"},{s:"清水河县"},{s:"武川县"}]},{n:"包头",a:[{s:"东河区"},{s:"昆都仑区"},{s:"青山区"},{s:"石拐区"},{s:"白云矿区"},{s:"九原区"},{s:"土默特右旗"},{s:"固阳县"},{s:"达尔罕茂明安联合旗"}]},{n:"乌海",a:[{s:"海勃湾区"},{s:"海南区"},{s:"乌达区"}]},{n:"赤峰",a:[{s:"红山区"},{s:"元宝山区"},{s:"松山区"},{s:"阿鲁科尔沁旗"},{s:"巴林左旗"},{s:"巴林右旗"},{s:"林西县"},{s:"克什克腾旗"},{s:"翁牛特旗"},{s:"喀喇沁旗"},{s:"宁城县"},{s:"敖汉旗"}]},{n:"通辽",a:[{s:"科尔沁区"},{s:"科尔沁左翼中旗"},{s:"科尔沁左翼后旗"},{s:"开鲁县"},{s:"库伦旗"},{s:"奈曼旗"},{s:"扎鲁特旗"},{s:"霍林郭勒市"}]},{n:"鄂尔多斯",a:[{s:"东胜区"},{s:"达拉特旗"},{s:"准格尔旗"},{s:"鄂托克前旗"},{s:"鄂托克旗"},{s:"杭锦旗"},{s:"乌审旗"},{s:"伊金霍洛旗"}]},{n:"呼伦贝尔",a:[{s:"海拉尔区"},{s:"阿荣旗"},{s:"莫力达瓦达斡尔族自治旗"},{s:"鄂伦春自治旗"},{s:"鄂温克族自治旗"},{s:"陈巴尔虎旗"},{s:"新巴尔虎左旗"},{s:"新巴尔虎右旗"},{s:"满洲里市"},{s:"牙克石市"},{s:"扎兰屯市"},{s:"额尔古纳市"},{s:"根河市"}]},{n:"巴彦淖尔",a:[{s:"临河区"},{s:"五原县"},{s:"磴口县"},{s:"乌拉特前旗"},{s:"乌拉特中旗"},{s:"乌拉特后旗"},{s:"杭锦后旗"}]},{n:"乌兰察布",a:[{s:"集宁区"},{s:"卓资县"},{s:"化德县"},{s:"商都县"},{s:"兴和县"},{s:"凉城县"},{s:"察哈尔右翼前旗"},{s:"察哈尔右翼中旗"},{s:"察哈尔右翼后旗"},{s:"四子王旗"},{s:"丰镇市"}]},{n:"兴安",a:[{s:"乌兰浩特市"},{s:"阿尔山市"},{s:"科尔沁右翼前旗"},{s:"科尔沁右翼中旗"},{s:"扎赉特旗"},{s:"突泉县"}]},{n:"锡林郭勒",a:[{s:"二连浩特市"},{s:"锡林浩特市"},{s:"阿巴嘎旗"},{s:"苏尼特左旗"},{s:"苏尼特右旗"},{s:"东乌珠穆沁旗"},{s:"西乌珠穆沁旗"},{s:"太仆寺旗"},{s:"镶黄旗"},{s:"正镶白旗"},{s:"正蓝旗"},{s:"多伦县"}]},{n:"阿拉善",a:[{s:"阿拉善左旗"},{s:"阿拉善右旗"},{s:"额济纳旗"}]}]},{p:"辽宁",c:[{n:"沈阳",a:[{s:"和平区"},{s:"沈河区"},{s:"大东区"},{s:"皇姑区"},{s:"铁西区"},{s:"苏家屯区"},{s:"东陵区"},{s:"新城子区"},{s:"于洪区"},{s:"辽中县"},{s:"康平县"},{s:"法库县"},{s:"新民市"}]},{n:"大连",a:[{s:"中山区"},{s:"西岗区"},{s:"沙河口区"},{s:"甘井子区"},{s:"旅顺口区"},{s:"金州区"},{s:"长海县"},{s:"瓦房店市"},{s:"普兰店市"},{s:"庄河市"}]},{n:"鞍山",a:[{s:"铁东区"},{s:"铁西区"},{s:"立山区"},{s:"千山区"},{s:"台安县"},{s:"210323"},{s:"海城市"}]},{n:"抚顺",a:[{s:"新抚区"},{s:"东洲区"},{s:"望花区"},{s:"顺城区"},{s:"抚顺县"},{s:"新宾满族自治县"},{s:"清原满族自治县"}]},{n:"本溪",a:[{s:"平山区"},{s:"溪湖区"},{s:"明山区"},{s:"南芬区"},{s:"本溪满族自治县"},{s:"桓仁满族自治县"}]},{n:"丹东",a:[{s:"元宝区"},{s:"振兴区"},{s:"振安区"},{s:"宽甸满族自治县"},{s:"东港市"},{s:"凤城市"}]},{n:"锦州",a:[{s:"古塔区"},{s:"凌河区"},{s:"太和区"},{s:"黑山县"},{s:"义县"},{s:"凌海市"},{s:"北镇市"}]},{n:"营口",a:[{s:"站前区"},{s:"西市区"},{s:"鲅鱼圈区"},{s:"老边区"},{s:"盖州市"},{s:"大石桥市"}]},{n:"阜新",a:[{s:"海州区"},{s:"新邱区"},{s:"太平区"},{s:"清河门区"},{s:"细河区"},{s:"阜新蒙古族自治县"},{s:"彰武县"}]},{n:"辽阳",a:[{s:"白塔区"},{s:"文圣区"},{s:"宏伟区"},{s:"弓长岭区"},{s:"太子河区"},{s:"辽阳县"},{s:"灯塔市"}]},{n:"盘锦",a:[{s:"双台子区"},{s:"兴隆台区"},{s:"大洼县"},{s:"盘山县"}]},{n:"铁岭",a:[{s:"银州区"},{s:"清河区"},{s:"铁岭县"},{s:"西丰县"},{s:"昌图县"},{s:"调兵山市"},{s:"开原市"}]},{n:"朝阳",a:[{s:"双塔区"},{s:"龙城区"},{s:"朝阳县"},{s:"建平县"},{s:"喀喇沁左翼蒙古族自治县"},{s:"北票市"},{s:"凌源市"}]},{n:"葫芦岛",a:[{s:"连山区"},{s:"龙港区"},{s:"南票区"},{s:"绥中县"},{s:"建昌县"},{s:"兴城市"}]}]},{p:"吉林",c:[{n:"长春",a:[{s:"南关区"},{s:"宽城区"},{s:"朝阳区"},{s:"二道区"},{s:"绿园区"},{s:"双阳区"},{s:"农安县"},{s:"九台市"},{s:"榆树市"},{s:"德惠市"}]},{n:"吉林",a:[{s:"昌邑区"},{s:"龙潭区"},{s:"船营区"},{s:"丰满区"},{s:"永吉县"},{s:"蛟河市"},{s:"桦甸市"},{s:"舒兰市"},{s:"磐石市"}]},{n:"四平",a:[{s:"铁西区"},{s:"铁东区"},{s:"梨树县"},{s:"伊通满族自治县"},{s:"公主岭市"},{s:"双辽市"}]},{n:"辽源",a:[{s:"龙山区"},{s:"西安区"},{s:"东丰县"},{s:"东辽县"}]},{n:"通化",a:[{s:"东昌区"},{s:"二道江区"},{s:"通化县"},{s:"辉南县"},{s:"柳河县"},{s:"梅河口市"},{s:"集安市"}]},{n:"白山",a:[{s:"八道江区"},{s:"江源区"},{s:"抚松县"},{s:"靖宇县"},{s:"长白朝鲜族自治县"},{s:"临江市"}]},{n:"松原",a:[{s:"宁江区"},{s:"前郭尔罗斯蒙古族自治县"},{s:"长岭县"},{s:"乾安县"},{s:"扶余县"}]},{n:"白城",a:[{s:"洮北区"},{s:"镇赉县"},{s:"通榆县"},{s:"洮南市"},{s:"大安市"}]},{n:"延边",a:[{s:"延吉市"},{s:"图们市"},{s:"敦化市"},{s:"珲春市"},{s:"龙井市"},{s:"和龙市"},{s:"汪清县"},{s:"安图县"}]}]},{p:"黑龙江",c:[{n:"哈尔滨",a:[{s:"道里区"},{s:"南岗区"},{s:"道外区"},{s:"平房区"},{s:"松北区"},{s:"香坊区"},{s:"呼兰区"},{s:"阿城区"},{s:"依兰县"},{s:"方正县"},{s:"宾县"},{s:"巴彦县"},{s:"木兰县"},{s:"通河县"},{s:"延寿县"},{s:"双城市"},{s:"尚志市"},{s:"五常市"}]},{n:"齐齐哈尔",a:[{s:"龙沙区"},{s:"建华区"},{s:"铁锋区"},{s:"昂昂溪区"},{s:"富拉尔基区"},{s:"碾子山区"},{s:"梅里斯达斡尔族区"},{s:"龙江县"},{s:"依安县"},{s:"泰来县"},{s:"甘南县"},{s:"富裕县"},{s:"克山县"},{s:"克东县"},{s:"拜泉县"},{s:"讷河市"}]},{n:"鸡西",a:[{s:"鸡冠区"},{s:"恒山区"},{s:"滴道区"},{s:"梨树区"},{s:"城子河区"},{s:"麻山区"},{s:"鸡东县"},{s:"虎林市"},{s:"密山市"}]},{n:"鹤岗",a:[{s:"向阳区"},{s:"工农区"},{s:"南山区"},{s:"兴安区"},{s:"东山区"},{s:"兴山区"},{s:"萝北县"},{s:"绥滨县"}]},{n:"双鸭山",a:[{s:"尖山区"},{s:"岭东区"},{s:"四方台区"},{s:"宝山区"},{s:"集贤县"},{s:"友谊县"},{s:"宝清县"},{s:"饶河县"}]},{n:"大庆",a:[{s:"萨尔图区"},{s:"龙凤区"},{s:"让胡路区"},{s:"红岗区"},{s:"大同区"},{s:"肇州县"},{s:"肇源县"},{s:"林甸县"},{s:"杜尔伯特蒙古族自治县"}]},{n:"伊春",a:[{s:"伊春区"},{s:"南岔区"},{s:"友好区"},{s:"西林区"},{s:"翠峦区"},{s:"新青区"},{s:"美溪区"},{s:"金山屯区"},{s:"五营区"},{s:"乌马河区"},{s:"汤旺河区"},{s:"带岭区"},{s:"乌伊岭区"},{s:"红星区"},{s:"上甘岭区"},{s:"嘉荫县"},{s:"铁力市"}]},{n:"佳木斯",a:[{s:"向阳区"},{s:"前进区"},{s:"东风区"},{s:"郊区"},{s:"桦南县"},{s:"桦川县"},{s:"汤原县"},{s:"抚远县"},{s:"同江市"},{s:"富锦市"}]},{n:"七台河",a:[{s:"新兴区"},{s:"桃山区"},{s:"茄子河区"},{s:"勃利县"}]},{n:"牡丹江",a:[{s:"东安区"},{s:"阳明区"},{s:"爱民区"},{s:"西安区"},{s:"东宁县"},{s:"林口县"},{s:"绥芬河市"},{s:"海林市"},{s:"宁安市"},{s:"穆棱市"}]},{n:"黑河",a:[{s:"爱辉区"},{s:"嫩江县"},{s:"逊克县"},{s:"孙吴县"},{s:"北安市"},{s:"五大连池市"}]},{n:"绥化",a:[{s:"北林区"},{s:"望奎县"},{s:"兰西县"},{s:"青冈县"},{s:"庆安县"},{s:"明水县"},{s:"绥棱县"},{s:"安达市"},{s:"肇东市"},{s:"海伦市"}]},{n:"大兴安岭",a:[{s:"加格达奇区"},{s:"松岭区"},{s:"新林区"},{s:"呼中区"},{s:"呼玛县"},{s:"塔河县"},{s:"漠河县"}]}]},{p:"上海",c:[{n:"黄浦区"},{n:"卢湾区"},{n:"徐汇区"},{n:"长宁区"},{n:"静安区"},{n:"普陀区"},{n:"闸北区"},{n:"虹口区"},{n:"杨浦区"},{n:"闵行区"},{n:"宝山区"},{n:"嘉定区"},{n:"浦东新区"},{n:"金山区"},{n:"松江区"},{n:"奉贤区"},{n:"青浦区"},{n:"崇明县"}]},{p:"江苏",c:[{n:"南京",a:[{s:"玄武区"},{s:"白下区"},{s:"秦淮区"},{s:"建邺区"},{s:"鼓楼区"},{s:"下关区"},{s:"浦口区"},{s:"栖霞区"},{s:"雨花台区"},{s:"江宁区"},{s:"六合区"},{s:"溧水县"},{s:"高淳县"}]},{n:"无锡",a:[{s:"崇安区"},{s:"南长区"},{s:"北塘区"},{s:"锡山区"},{s:"惠山区"},{s:"滨湖区"},{s:"江阴市"},{s:"宜兴市"}]},{n:"徐州",a:[{s:"鼓楼区"},{s:"云龙区"},{s:"九里区"},{s:"贾汪区"},{s:"泉山区"},{s:"丰县"},{s:"沛县"},{s:"铜山县"},{s:"睢宁县"},{s:"新沂市"},{s:"邳州市"}]},{n:"常州",a:[{s:"天宁区"},{s:"钟楼区"},{s:"戚墅堰区"},{s:"新北区"},{s:"武进区"},{s:"溧阳市"},{s:"金坛市"}]},{n:"苏州",a:[{s:"沧浪区"},{s:"平江区"},{s:"金阊区"},{s:"虎丘区"},{s:"吴中区"},{s:"相城区"},{s:"常熟市"},{s:"张家港市"},{s:"昆山市"},{s:"吴江市"},{s:"太仓市"}]},{n:"南通",a:[{s:"崇川区"},{s:"港闸区"},{s:"海安县"},{s:"如东县"},{s:"启东市"},{s:"如皋市"},{s:"通州市"},{s:"海门市"}]},{n:"连云港",a:[{s:"连云区"},{s:"新浦区"},{s:"海州区"},{s:"赣榆县"},{s:"东海县"},{s:"灌云县"},{s:"灌南县"}]},{n:"淮安",a:[{s:"清河区"},{s:"楚州区"},{s:"淮阴区"},{s:"清浦区"},{s:"涟水县"},{s:"洪泽县"},{s:"盱眙县"},{s:"金湖县"}]},{n:"盐城",a:[{s:"亭湖区"},{s:"盐都区"},{s:"响水县"},{s:"滨海县"},{s:"阜宁县"},{s:"射阳县"},{s:"建湖县"},{s:"东台市"},{s:"大丰市"}]},{n:"扬州",a:[{s:"广陵区"},{s:"邗江区"},{s:"维扬区"},{s:"宝应县"},{s:"仪征市"},{s:"高邮市"},{s:"江都市"}]},{n:"镇江",a:[{s:"京口区"},{s:"润州区"},{s:"丹徒区"},{s:"丹阳市"},{s:"扬中市"},{s:"句容市"}]},{n:"泰州",a:[{s:"海陵区"},{s:"高港区"},{s:"兴化市"},{s:"靖江市"},{s:"泰兴市"},{s:"姜堰市"}]},{n:"宿迁",a:[{s:"宿城区"},{s:"宿豫区"},{s:"沭阳县"},{s:"泗阳县"},{s:"泗洪县"}]}]},{p:"浙江",c:[{n:"杭州",a:[{s:"上城区"},{s:"下城区"},{s:"江干区"},{s:"拱墅区"},{s:"西湖区"},{s:"滨江区"},{s:"萧山区"},{s:"余杭区"},{s:"桐庐县"},{s:"淳安县"},{s:"建德市"},{s:"富阳市"},{s:"临安市"}]},{n:"宁波",a:[{s:"海曙区"},{s:"江东区"},{s:"江北区"},{s:"北仑区"},{s:"镇海区"},{s:"鄞州区"},{s:"象山县"},{s:"宁海县"},{s:"余姚市"},{s:"慈溪市"},{s:"奉化市"}]},{n:"温州",a:[{s:"鹿城区"},{s:"龙湾区"},{s:"瓯海区"},{s:"洞头县"},{s:"永嘉县"},{s:"平阳县"},{s:"苍南县"},{s:"文成县"},{s:"泰顺县"},{s:"瑞安市"},{s:"乐清市"}]},{n:"嘉兴",a:[{s:"南湖区"},{s:"秀洲区"},{s:"嘉善县"},{s:"海盐县"},{s:"海宁市"},{s:"平湖市"},{s:"桐乡市"}]},{n:"湖州",a:[{s:"吴兴区"},{s:"南浔区"},{s:"德清县"},{s:"长兴县"},{s:"安吉县"}]},{n:"绍兴",a:[{s:"越城区"},{s:"绍兴县"},{s:"新昌县"},{s:"诸暨市"},{s:"上虞市"},{s:"嵊州市"}]},{n:"金华",a:[{s:"婺城区"},{s:"金东区"},{s:"武义县"},{s:"浦江县"},{s:"磐安县"},{s:"兰溪市"},{s:"义乌市"},{s:"东阳市"},{s:"永康市"}]},{n:"衢州",a:[{s:"柯城区"},{s:"衢江区"},{s:"常山县"},{s:"开化县"},{s:"龙游县"},{s:"江山市"}]},{n:"舟山",a:[{s:"定海区"},{s:"普陀区"},{s:"岱山县"},{s:"嵊泗县"}]},{n:"台州",a:[{s:"椒江区"},{s:"黄岩区"},{s:"路桥区"},{s:"玉环县"},{s:"三门县"},{s:"天台县"},{s:"仙居县"},{s:"温岭市"},{s:"临海市"}]},{n:"丽水",a:[{s:"莲都区"},{s:"青田县"},{s:"缙云县"},{s:"遂昌县"},{s:"松阳县"},{s:"云和县"},{s:"庆元县"},{s:"景宁畲族自治县"},{s:"龙泉市"}]}]},{p:"安徽",c:[{n:"合肥",a:[{s:"瑶海区"},{s:"庐阳区"},{s:"蜀山区"},{s:"包河区"},{s:"长丰县"},{s:"肥东县"},{s:"肥西县"}]},{n:"芜湖",a:[{s:"镜湖区"},{s:"弋江区"},{s:"鸠江区"},{s:"三山区"},{s:"芜湖县"},{s:"繁昌县"},{s:"南陵县"}]},{n:"蚌埠",a:[{s:"龙子湖区"},{s:"蚌山区"},{s:"禹会区"},{s:"淮上区"},{s:"怀远县"},{s:"五河县"},{s:"固镇县"}]},{n:"淮南",a:[{s:"大通区"},{s:"田家庵区"},{s:"谢家集区"},{s:"八公山区"},{s:"潘集区"},{s:"凤台县"}]},{n:"马鞍山",a:[{s:"金家庄区"},{s:"花山区"},{s:"雨山区"},{s:"当涂县"}]},{n:"淮北",a:[{s:"杜集区"},{s:"相山区"},{s:"烈山区"},{s:"濉溪县"}]},{n:"铜陵",a:[{s:"铜官山区"},{s:"狮子山区"},{s:"郊区"},{s:"铜陵县"}]},{n:"安庆",a:[{s:"迎江区"},{s:"大观区"},{s:"宜秀区"},{s:"怀宁县"},{s:"枞阳县"},{s:"潜山县"},{s:"太湖县"},{s:"宿松县"},{s:"望江县"},{s:"岳西县"},{s:"桐城市"}]},{n:"黄山",a:[{s:"屯溪区"},{s:"黄山区"},{s:"徽州区"},{s:"歙县"},{s:"休宁县"},{s:"黟县"},{s:"祁门县"}]},{n:"滁州",a:[{s:"琅琊区"},{s:"南谯区"},{s:"来安县"},{s:"全椒县"},{s:"定远县"},{s:"凤阳县"},{s:"天长市"},{s:"明光市"}]},{n:"阜阳",a:[{s:"颍州区"},{s:"颍东区"},{s:"颍泉区"},{s:"临泉县"},{s:"太和县"},{s:"阜南县"},{s:"颍上县"},{s:"界首市"}]},{n:"宿州",a:[{s:"埇桥区"},{s:"砀山县"},{s:"萧县"},{s:"灵璧县"},{s:"泗县"}]},{n:"巢湖",a:[{s:"居巢区"},{s:"庐江县"},{s:"无为县"},{s:"含山县"},{s:"和县"}]},{n:"六安",a:[{s:"金安区"},{s:"裕安区"},{s:"寿县"},{s:"霍邱县"},{s:"舒城县"},{s:"金寨县"},{s:"霍山县"}]},{n:"亳州",a:[{s:"谯城区"},{s:"涡阳县"},{s:"蒙城县"},{s:"利辛县"}]},{n:"池州",a:[{s:"贵池区"},{s:"东至县"},{s:"石台县"},{s:"青阳县"}]},{n:"宣城",a:[{s:"宣州区"},{s:"郎溪县"},{s:"广德县"},{s:"泾县"},{s:"绩溪县"},{s:"旌德县"},{s:"宁国市"}]}]},{p:"福建",c:[{n:"福州",a:[{s:"鼓楼区"},{s:"台江区"},{s:"仓山区"},{s:"马尾区"},{s:"晋安区"},{s:"闽侯县"},{s:"连江县"},{s:"罗源县"},{s:"闽清县"},{s:"永泰县"},{s:"平潭县"},{s:"福清市"},{s:"长乐市"}]},{n:"厦门",a:[{s:"思明区"},{s:"海沧区"},{s:"湖里区"},{s:"集美区"},{s:"同安区"},{s:"翔安区"}]},{n:"莆田",a:[{s:"城厢区"},{s:"涵江区"},{s:"荔城区"},{s:"秀屿区"},{s:"仙游县"}]},{n:"三明",a:[{s:"梅列区"},{s:"三元区"},{s:"明溪县"},{s:"清流县"},{s:"宁化县"},{s:"大田县"},{s:"尤溪县"},{s:"沙县"},{s:"将乐县"},{s:"泰宁县"},{s:"建宁县"},{s:"永安市"}]},{n:"泉州",a:[{s:"鲤城区"},{s:"丰泽区"},{s:"洛江区"},{s:"泉港区"},{s:"惠安县"},{s:"安溪县"},{s:"永春县"},{s:"德化县"},{s:"金门县"},{s:"石狮市"},{s:"晋江市"},{s:"南安市"}]},{n:"漳州",a:[{s:"芗城区"},{s:"龙文区"},{s:"云霄县"},{s:"漳浦县"},{s:"诏安县"},{s:"长泰县"},{s:"东山县"},{s:"南靖县"},{s:"平和县"},{s:"华安县"},{s:"龙海市"}]},{n:"南平",a:[{s:"延平区"},{s:"顺昌县"},{s:"浦城县"},{s:"光泽县"},{s:"松溪县"},{s:"政和县"},{s:"邵武市"},{s:"武夷山市"},{s:"建瓯市"},{s:"建阳市"}]},{n:"龙岩",a:[{s:"新罗区"},{s:"长汀县"},{s:"永定县"},{s:"上杭县"},{s:"武平县"},{s:"连城县"},{s:"漳平市"}]},{n:"宁德",a:[{s:"蕉城区"},{s:"霞浦县"},{s:"古田县"},{s:"屏南县"},{s:"寿宁县"},{s:"周宁县"},{s:"柘荣县"},{s:"福安市"},{s:"福鼎市"}]}]},{p:"江西",c:[{n:"南昌",a:[{s:"东湖区"},{s:"西湖区"},{s:"青云谱区"},{s:"湾里区"},{s:"青山湖区"},{s:"南昌县"},{s:"新建县"},{s:"安义县"},{s:"进贤县"}]},{n:"景德镇",a:[{s:"昌江区"},{s:"珠山区"},{s:"浮梁县"},{s:"乐平市"}]},{n:"萍乡",a:[{s:"安源区"},{s:"湘东区"},{s:"莲花县"},{s:"上栗县"},{s:"芦溪县"}]},{n:"九江",a:[{s:"庐山区"},{s:"浔阳区"},{s:"九江县"},{s:"武宁县"},{s:"修水县"},{s:"永修县"},{s:"德安县"},{s:"星子县"},{s:"都昌县"},{s:"湖口县"},{s:"彭泽县"},{s:"瑞昌市"}]},{n:"新余",a:[{s:"渝水区"},{s:"分宜县"}]},{n:"鹰潭",a:[{s:"月湖区"},{s:"余江县"},{s:"贵溪市"}]},{n:"赣州",a:[{s:"章贡区"},{s:"赣县"},{s:"信丰县"},{s:"大余县"},{s:"上犹县"},{s:"崇义县"},{s:"安远县"},{s:"龙南县"},{s:"定南县"},{s:"全南县"},{s:"宁都县"},{s:"于都县"},{s:"兴国县"},{s:"会昌县"},{s:"寻乌县"},{s:"石城县"},{s:"瑞金市"},{s:"南康市"}]},{n:"吉安",a:[{s:"吉州区"},{s:"青原区"},{s:"吉安县"},{s:"吉水县"},{s:"峡江县"},{s:"新干县"},{s:"永丰县"},{s:"泰和县"},{s:"遂川县"},{s:"万安县"},{s:"安福县"},{s:"永新县"},{s:"井冈山市"}]},{n:"宜春",a:[{s:"袁州区"},{s:"奉新县"},{s:"万载县"},{s:"上高县"},{s:"宜丰县"},{s:"靖安县"},{s:"铜鼓县"},{s:"丰城市"},{s:"樟树市"},{s:"高安市"}]},{n:"抚州",a:[{s:"临川区"},{s:"南城县"},{s:"黎川县"},{s:"南丰县"},{s:"崇仁县"},{s:"乐安县"},{s:"宜黄县"},{s:"金溪县"},{s:"资溪县"},{s:"东乡县"},{s:"广昌县"}]},{n:"上饶",a:[{s:"信州区"},{s:"上饶县"},{s:"广丰县"},{s:"玉山县"},{s:"铅山县"},{s:"横峰县"},{s:"弋阳县"},{s:"余干县"},{s:"鄱阳县"},{s:"万年县"},{s:"婺源县"},{s:"德兴市"}]}]},{p:"山东",c:[{n:"济南",a:[{s:"历下区"},{s:"市中区"},{s:"槐荫区"},{s:"天桥区"},{s:"历城区"},{s:"长清区"},{s:"平阴县"},{s:"济阳县"},{s:"商河县"},{s:"章丘市"}]},{n:"青岛",a:[{s:"市南区"},{s:"市北区"},{s:"四方区"},{s:"黄岛区"},{s:"崂山区"},{s:"李沧区"},{s:"城阳区"},{s:"胶州市"},{s:"即墨市"},{s:"平度市"},{s:"胶南市"},{s:"莱西市"}]},{n:"淄博",a:[{s:"淄川区"},{s:"张店区"},{s:"博山区"},{s:"临淄区"},{s:"周村区"},{s:"桓台县"},{s:"高青县"},{s:"沂源县"}]},{n:"枣庄",a:[{s:"市中区"},{s:"薛城区"},{s:"峄城区"},{s:"台儿庄区"},{s:"山亭区"},{s:"滕州市"}]},{n:"东营",a:[{s:"东营区"},{s:"河口区"},{s:"垦利县"},{s:"利津县"},{s:"广饶县"}]},{n:"烟台",a:[{s:"芝罘区"},{s:"福山区"},{s:"牟平区"},{s:"莱山区"},{s:"长岛县"},{s:"龙口市"},{s:"莱阳市"},{s:"莱州市"},{s:"蓬莱市"},{s:"招远市"},{s:"栖霞市"},{s:"海阳市"}]},{n:"潍坊",a:[{s:"潍城区"},{s:"寒亭区"},{s:"坊子区"},{s:"奎文区"},{s:"临朐县"},{s:"昌乐县"},{s:"青州市"},{s:"诸城市"},{s:"寿光市"},{s:"安丘市"},{s:"高密市"},{s:"昌邑市"}]},{n:"济宁",a:[{s:"市中区"},{s:"任城区"},{s:"微山县"},{s:"鱼台县"},{s:"金乡县"},{s:"嘉祥县"},{s:"汶上县"},{s:"泗水县"},{s:"梁山县"},{s:"曲阜市"},{s:"兖州市"},{s:"邹城市"}]},{n:"泰安",a:[{s:"泰山区"},{s:"岱岳区"},{s:"宁阳县"},{s:"东平县"},{s:"新泰市"},{s:"肥城市"}]},{n:"威海",a:[{s:"环翠区"},{s:"文登市"},{s:"荣成市"},{s:"乳山市"}]},{n:"日照",a:[{s:"东港区"},{s:"岚山区"},{s:"五莲县"},{s:"莒县"}]},{n:"莱芜",a:[{s:"莱城区"},{s:"钢城区"}]},{n:"临沂",a:[{s:"兰山区"},{s:"罗庄区"},{s:"河东区"},{s:"沂南县"},{s:"郯城县"},{s:"沂水县"},{s:"苍山县"},{s:"费县"},{s:"平邑县"},{s:"莒南县"},{s:"蒙阴县"},{s:"临沭县"}]},{n:"德州",a:[{s:"德城区"},{s:"陵县"},{s:"宁津县"},{s:"庆云县"},{s:"临邑县"},{s:"齐河县"},{s:"平原县"},{s:"夏津县"},{s:"武城县"},{s:"乐陵市"},{s:"禹城市"}]},{n:"聊城",a:[{s:"东昌府区"},{s:"阳谷县"},{s:"莘县"},{s:"茌平县"},{s:"东阿县"},{s:"冠县"},{s:"高唐县"},{s:"临清市"}]},{n:"滨州",a:[{s:"滨城区"},{s:"惠民县"},{s:"阳信县"},{s:"无棣县"},{s:"沾化县"},{s:"博兴县"},{s:"邹平县"}]},{n:"菏泽",a:[{s:"牡丹区"},{s:"曹县"},{s:"单县"},{s:"成武县"},{s:"巨野县"},{s:"郓城县"},{s:"鄄城县"},{s:"定陶县"},{s:"东明县"}]}]},{p:"河南",c:[{n:"郑州",a:[{s:"中原区"},{s:"二七区"},{s:"管城回族区"},{s:"金水区"},{s:"上街区"},{s:"惠济区"},{s:"中牟县"},{s:"巩义市"},{s:"荥阳市"},{s:"新密市"},{s:"新郑市"},{s:"登封市"}]},{n:"开封",a:[{s:"龙亭区"},{s:"顺河回族区"},{s:"鼓楼区"},{s:"禹王台区"},{s:"金明区"},{s:"杞县"},{s:"通许县"},{s:"尉氏县"},{s:"开封县"},{s:"兰考县"}]},{n:"洛阳",a:[{s:"老城区"},{s:"西工区"},{s:"廛河回族区"},{s:"涧西区"},{s:"吉利区"},{s:"洛龙区"},{s:"孟津县"},{s:"新安县"},{s:"栾川县"},{s:"嵩县"},{s:"汝阳县"},{s:"宜阳县"},{s:"洛宁县"},{s:"伊川县"},{s:"偃师市"}]},{n:"平顶山",a:[{s:"新华区"},{s:"卫东区"},{s:"石龙区"},{s:"湛河区"},{s:"宝丰县"},{s:"叶县"},{s:"鲁山县"},{s:"郏县"},{s:"舞钢市"},{s:"汝州市"}]},{n:"安阳",a:[{s:"文峰区"},{s:"北关区"},{s:"殷都区"},{s:"龙安区"},{s:"安阳县"},{s:"汤阴县"},{s:"滑县"},{s:"内黄县"},{s:"林州市"}]},{n:"鹤壁",a:[{s:"鹤山区"},{s:"山城区"},{s:"淇滨区"},{s:"浚县"},{s:"淇县"}]},{n:"新乡",a:[{s:"红旗区"},{s:"卫滨区"},{s:"凤泉区"},{s:"牧野区"},{s:"新乡县"},{s:"获嘉县"},{s:"原阳县"},{s:"延津县"},{s:"封丘县"},{s:"长垣县"},{s:"卫辉市"},{s:"辉县市"}]},{n:"焦作",a:[{s:"解放区"},{s:"中站区"},{s:"马村区"},{s:"山阳区"},{s:"修武县"},{s:"博爱县"},{s:"武陟县"},{s:"温县"},{s:"沁阳市"},{s:"孟州市"}]},{n:"濮阳",a:[{s:"华龙区"},{s:"清丰县"},{s:"南乐县"},{s:"范县"},{s:"台前县"},{s:"濮阳县"}]},{n:"许昌",a:[{s:"魏都区"},{s:"许昌县"},{s:"鄢陵县"},{s:"襄城县"},{s:"禹州市"},{s:"长葛市"}]},{n:"漯河",a:[{s:"源汇区"},{s:"郾城区"},{s:"召陵区"},{s:"舞阳县"},{s:"临颍县"}]},{n:"三门峡",a:[{s:"湖滨区"},{s:"渑池县"},{s:"陕县"},{s:"卢氏县"},{s:"义马市"},{s:"灵宝市"}]},{n:"南阳",a:[{s:"宛城区"},{s:"卧龙区"},{s:"南召县"},{s:"方城县"},{s:"西峡县"},{s:"镇平县"},{s:"内乡县"},{s:"淅川县"},{s:"社旗县"},{s:"唐河县"},{s:"新野县"},{s:"桐柏县"},{s:"邓州市"}]},{n:"商丘",a:[{s:"梁园区"},{s:"睢阳区"},{s:"民权县"},{s:"睢县"},{s:"宁陵县"},{s:"柘城县"},{s:"虞城县"},{s:"夏邑县"},{s:"永城市"}]},{n:"信阳",a:[{s:"浉河区"},{s:"平桥区"},{s:"罗山县"},{s:"光山县"},{s:"新县"},{s:"商城县"},{s:"固始县"},{s:"潢川县"},{s:"淮滨县"},{s:"息县"}]},{n:"周口",a:[{s:"川汇区"},{s:"扶沟县"},{s:"西华县"},{s:"商水县"},{s:"沈丘县"},{s:"郸城县"},{s:"淮阳县"},{s:"太康县"},{s:"鹿邑县"},{s:"项城市"}]},{n:"驻马店",a:[{s:"驿城区"},{s:"西平县"},{s:"上蔡县"},{s:"平舆县"},{s:"正阳县"},{s:"确山县"},{s:"泌阳县"},{s:"汝南县"},{s:"遂平县"},{s:"新蔡县"}]},{n:"济源",a:[{s:"济源"}]}]},{p:"湖北",c:[{n:"武汉",a:[{s:"江岸区"},{s:"江汉区"},{s:"硚口区"},{s:"汉阳区"},{s:"武昌区"},{s:"青山区"},{s:"洪山区"},{s:"东西湖区"},{s:"汉南区"},{s:"蔡甸区"},{s:"江夏区"},{s:"黄陂区"},{s:"新洲区"}]},{n:"黄石",a:[{s:"黄石港区"},{s:"西塞山区"},{s:"下陆区"},{s:"铁山区"},{s:"阳新县"},{s:"大冶市"}]},{n:"十堰",a:[{s:"茅箭区"},{s:"张湾区"},{s:"郧县"},{s:"郧西县"},{s:"竹山县"},{s:"竹溪县"},{s:"房县"},{s:"丹江口市"}]},{n:"宜昌",a:[{s:"西陵区"},{s:"伍家岗区"},{s:"点军区"},{s:"猇亭区"},{s:"夷陵区"},{s:"远安县"},{s:"兴山县"},{s:"秭归县"},{s:"长阳土家族自治县"},{s:"五峰土家族自治县"},{s:"宜都市"},{s:"当阳市"},{s:"枝江市"}]},{n:"襄樊",a:[{s:"襄城区"},{s:"樊城区"},{s:"襄阳区"},{s:"南漳县"},{s:"谷城县"},{s:"保康县"},{s:"老河口市"},{s:"枣阳市"},{s:"宜城市"}]},{n:"鄂州",a:[{s:"梁子湖区"},{s:"华容区"},{s:"鄂城区"}]},{n:"荆门",a:[{s:"东宝区"},{s:"掇刀区"},{s:"京山县"},{s:"沙洋县"},{s:"钟祥市"}]},{n:"孝感",a:[{s:"孝南区"},{s:"孝昌县"},{s:"大悟县"},{s:"云梦县"},{s:"应城市"},{s:"安陆市"},{s:"汉川市"}]},{n:"荆州",a:[{s:"沙市区"},{s:"荆州区"},{s:"公安县"},{s:"监利县"},{s:"江陵县"},{s:"石首市"},{s:"洪湖市"},{s:"松滋市"}]},{n:"黄冈",a:[{s:"黄州区"},{s:"团风县"},{s:"红安县"},{s:"罗田县"},{s:"英山县"},{s:"浠水县"},{s:"蕲春县"},{s:"黄梅县"},{s:"麻城市"},{s:"武穴市"}]},{n:"咸宁",a:[{s:"咸安区"},{s:"嘉鱼县"},{s:"通城县"},{s:"崇阳县"},{s:"通山县"},{s:"赤壁市"}]},{n:"随州",a:[{s:"曾都区"},{s:"随县"},{s:"广水市"}]},{n:"恩施",a:[{s:"恩施市"},{s:"利川市"},{s:"建始县"},{s:"巴东县"},{s:"宣恩县"},{s:"咸丰县"},{s:"来凤县"},{s:"鹤峰县"}]},{n:"仙桃",a:[{s:"仙桃"}]},{n:"潜江",a:[{s:"潜江"}]},{n:"天门",
a:[{s:"天门"}]},{n:"神农架",a:[{s:"神农架"}]}]},{p:"湖南",c:[{n:"长沙",a:[{s:"芙蓉区"},{s:"天心区"},{s:"岳麓区"},{s:"开福区"},{s:"雨花区"},{s:"长沙县"},{s:"望城县"},{s:"宁乡县"},{s:"浏阳市"}]},{n:"株洲",a:[{s:"荷塘区"},{s:"芦淞区"},{s:"石峰区"},{s:"天元区"},{s:"株洲县"},{s:"攸县"},{s:"茶陵县"},{s:"炎陵县"},{s:"醴陵市"}]},{n:"湘潭",a:[{s:"雨湖区"},{s:"岳塘区"},{s:"湘潭县"},{s:"湘乡市"},{s:"韶山市"}]},{n:"衡阳",a:[{s:"珠晖区"},{s:"雁峰区"},{s:"石鼓区"},{s:"蒸湘区"},{s:"南岳区"},{s:"衡阳县"},{s:"衡南县"},{s:"衡山县"},{s:"衡东县"},{s:"祁东县"},{s:"耒阳市"},{s:"常宁市"}]},{n:"邵阳",a:[{s:"双清区"},{s:"大祥区"},{s:"北塔区"},{s:"邵东县"},{s:"新邵县"},{s:"邵阳县"},{s:"隆回县"},{s:"洞口县"},{s:"绥宁县"},{s:"新宁县"},{s:"城步苗族自治县"},{s:"武冈市"}]},{n:"岳阳",a:[{s:"岳阳楼区"},{s:"云溪区"},{s:"君山区"},{s:"岳阳县"},{s:"华容县"},{s:"湘阴县"},{s:"平江县"},{s:"汨罗市"},{s:"临湘市"}]},{n:"常德",a:[{s:"武陵区"},{s:"鼎城区"},{s:"安乡县"},{s:"汉寿县"},{s:"澧县"},{s:"临澧县"},{s:"桃源县"},{s:"石门县"},{s:"津市市"}]},{n:"张家界",a:[{s:"永定区"},{s:"武陵源区"},{s:"慈利县"},{s:"桑植县"}]},{n:"益阳",a:[{s:"资阳区"},{s:"赫山区"},{s:"南县"},{s:"桃江县"},{s:"安化县"},{s:"沅江市"}]},{n:"郴州",a:[{s:"北湖区"},{s:"苏仙区"},{s:"桂阳县"},{s:"宜章县"},{s:"永兴县"},{s:"嘉禾县"},{s:"临武县"},{s:"汝城县"},{s:"桂东县"},{s:"安仁县"},{s:"资兴市"}]},{n:"永州",a:[{s:"零陵区"},{s:"冷水滩区"},{s:"祁阳县"},{s:"东安县"},{s:"双牌县"},{s:"道县"},{s:"江永县"},{s:"宁远县"},{s:"蓝山县"},{s:"新田县"},{s:"江华瑶族自治县"}]},{n:"怀化",a:[{s:"鹤城区"},{s:"中方县"},{s:"沅陵县"},{s:"辰溪县"},{s:"溆浦县"},{s:"会同县"},{s:"麻阳苗族自治县"},{s:"新晃侗族自治县"},{s:"芷江侗族自治县"},{s:"靖州苗族侗族自治县"},{s:"通道侗族自治县"},{s:"洪江市"}]},{n:"娄底",a:[{s:"娄星区"},{s:"双峰县"},{s:"新化县"},{s:"冷水江市"},{s:"涟源市"}]},{n:"湘西",a:[{s:"吉首市"},{s:"泸溪县"},{s:"凤凰县"},{s:"花垣县"},{s:"保靖县"},{s:"古丈县"},{s:"永顺县"},{s:"龙山县"}]}]},{p:"广东",c:[{n:"广州",a:[{s:"荔湾区"},{s:"越秀区"},{s:"海珠区"},{s:"天河区"},{s:"白云区"},{s:"黄埔区"},{s:"番禺区"},{s:"花都区"},{s:"南沙区"},{s:"萝岗区"},{s:"增城市"},{s:"从化市"}]},{n:"韶关",a:[{s:"武江区"},{s:"浈江区"},{s:"曲江区"},{s:"始兴县"},{s:"仁化县"},{s:"翁源县"},{s:"乳源瑶族自治县"},{s:"新丰县"},{s:"乐昌市"},{s:"南雄市"}]},{n:"深圳",a:[{s:"罗湖区"},{s:"福田区"},{s:"南山区"},{s:"宝安区"},{s:"龙岗区"},{s:"盐田区"}]},{n:"珠海",a:[{s:"香洲区"},{s:"斗门区"},{s:"金湾区"}]},{n:"汕头",a:[{s:"龙湖区"},{s:"金平区"},{s:"濠江区"},{s:"潮阳区"},{s:"潮南区"},{s:"澄海区"},{s:"南澳县"}]},{n:"佛山",a:[{s:"禅城区"},{s:"南海区"},{s:"顺德区"},{s:"三水区"},{s:"高明区"}]},{n:"江门",a:[{s:"蓬江区"},{s:"江海区"},{s:"新会区"},{s:"台山市"},{s:"开平市"},{s:"鹤山市"},{s:"恩平市"}]},{n:"湛江",a:[{s:"赤坎区"},{s:"霞山区"},{s:"坡头区"},{s:"麻章区"},{s:"遂溪县"},{s:"徐闻县"},{s:"廉江市"},{s:"雷州市"},{s:"吴川市"}]},{n:"茂名",a:[{s:"茂南区"},{s:"茂港区"},{s:"电白县"},{s:"高州市"},{s:"化州市"},{s:"信宜市"}]},{n:"肇庆",a:[{s:"端州区"},{s:"鼎湖区"},{s:"广宁县"},{s:"怀集县"},{s:"封开县"},{s:"德庆县"},{s:"高要市"},{s:"四会市"}]},{n:"惠州",a:[{s:"惠城区"},{s:"惠阳区"},{s:"博罗县"},{s:"惠东县"},{s:"龙门县"}]},{n:"梅州",a:[{s:"梅江区"},{s:"梅县"},{s:"大埔县"},{s:"丰顺县"},{s:"五华县"},{s:"平远县"},{s:"蕉岭县"},{s:"兴宁市"}]},{n:"汕尾",a:[{s:"城区"},{s:"海丰县"},{s:"陆河县"},{s:"陆丰市"}]},{n:"河源",a:[{s:"源城区"},{s:"紫金县"},{s:"龙川县"},{s:"连平县"},{s:"和平县"},{s:"东源县"}]},{n:"阳江",a:[{s:"江城区"},{s:"阳西县"},{s:"阳东县"},{s:"阳春市"}]},{n:"清远",a:[{s:"清城区"},{s:"佛冈县"},{s:"阳山县"},{s:"连山壮族瑶族自治县"},{s:"连南瑶族自治县"},{s:"清新县"},{s:"英德市"},{s:"连州市"}]},{n:"东莞",a:[{s:"东莞市"}]},{n:"中山",a:[{s:"中山市"}]},{n:"潮州",a:[{s:"湘桥区"},{s:"潮安县"},{s:"饶平县"}]},{n:"揭阳",a:[{s:"榕城区"},{s:"揭东县"},{s:"揭西县"},{s:"惠来县"},{s:"普宁市"}]},{n:"云浮",a:[{s:"云城区"},{s:"新兴县"},{s:"郁南县"},{s:"云安县"},{s:"罗定市"}]}]},{p:"广西",c:[{n:"南宁",a:[{s:"兴宁区"},{s:"青秀区"},{s:"江南区"},{s:"西乡塘区"},{s:"良庆区"},{s:"邕宁区"},{s:"武鸣县"},{s:"隆安县"},{s:"马山县"},{s:"上林县"},{s:"宾阳县"},{s:"横县"}]},{n:"柳州",a:[{s:"城中区"},{s:"鱼峰区"},{s:"柳南区"},{s:"柳北区"},{s:"柳江县"},{s:"柳城县"},{s:"鹿寨县"},{s:"融安县"},{s:"融水苗族自治县"},{s:"三江侗族自治县"}]},{n:"桂林",a:[{s:"秀峰区"},{s:"叠彩区"},{s:"象山区"},{s:"七星区"},{s:"雁山区"},{s:"阳朔县"},{s:"临桂县"},{s:"灵川县"},{s:"全州县"},{s:"兴安县"},{s:"永福县"},{s:"灌阳县"},{s:"龙胜各族自治县"},{s:"资源县"},{s:"平乐县"},{s:"荔蒲县"},{s:"恭城瑶族自治县"}]},{n:"梧州",a:[{s:"万秀区"},{s:"蝶山区"},{s:"长洲区"},{s:"苍梧县"},{s:"藤县"},{s:"蒙山县"},{s:"岑溪市"}]},{n:"北海",a:[{s:"海城区"},{s:"银海区"},{s:"铁山港区"},{s:"合浦县"}]},{n:"防城港",a:[{s:"港口区"},{s:"防城区"},{s:"上思县"},{s:"东兴市"}]},{n:"钦州",a:[{s:"钦南区"},{s:"钦北区"},{s:"灵山县"},{s:"浦北县"}]},{n:"贵港",a:[{s:"港北区"},{s:"港南区"},{s:"覃塘区"},{s:"平南县"},{s:"桂平市"}]},{n:"玉林",a:[{s:"玉州区"},{s:"容县"},{s:"陆川县"},{s:"博白县"},{s:"兴业县"},{s:"北流市"}]},{n:"百色",a:[{s:"右江区"},{s:"田阳县"},{s:"田东县"},{s:"平果县"},{s:"德保县"},{s:"靖西县"},{s:"那坡县"},{s:"凌云县"},{s:"乐业县"},{s:"田林县"},{s:"西林县"},{s:"隆林各族自治县"}]},{n:"贺州",a:[{s:"八步区"},{s:"昭平县"},{s:"钟山县"},{s:"富川瑶族自治县"}]},{n:"河池",a:[{s:"金城江区"},{s:"南丹县"},{s:"天峨县"},{s:"凤山县"},{s:"东兰县"},{s:"罗城仫佬族自治县"},{s:"环江毛南族自治县"},{s:"巴马瑶族自治县"},{s:"都安瑶族自治县"},{s:"大化瑶族自治县"},{s:"宜州市"}]},{n:"来宾",a:[{s:"兴宾区"},{s:"忻城县"},{s:"象州县"},{s:"武宣县"},{s:"金秀瑶族自治县"},{s:"合山市"}]},{n:"崇左",a:[{s:"江洲区"},{s:"扶绥县"},{s:"宁明县"},{s:"龙州县"},{s:"大新县"},{s:"天等县"},{s:"凭祥市"}]}]},{p:"海南",c:[{n:"海口",a:[{s:"秀英区"},{s:"龙华区"},{s:"琼山区"},{s:"美兰区"}]},{n:"三亚",a:[{s:"三亚市"}]},{n:"五指山",a:[{s:"五指山"}]},{n:"琼海",a:[{s:"琼海"}]},{n:"儋州",a:[{s:"儋州"}]},{n:"文昌",a:[{s:"文昌"}]},{n:"万宁",a:[{s:"万宁"}]},{n:"东方",a:[{s:"东方"}]}]},{p:"重庆",c:[{n:"万州区"},{n:"涪陵区"},{n:"渝中区"},{n:"大渡口区"},{n:"江北区"},{n:"沙坪坝区"},{n:"九龙坡区"},{n:"南岸区"},{n:"北碚区"},{n:"万盛区"},{n:"双挢区"},{n:"渝北区"},{n:"巴南区"},{n:"长寿区"},{n:"綦江县"},{n:"潼南县"},{n:"铜梁县"},{n:"大足县"},{n:"荣昌县"},{n:"壁山县"},{n:"梁平县"},{n:"城口县"},{n:"丰都县"},{n:"垫江县"},{n:"武隆县"},{n:"忠县"},{n:"开县"},{n:"云阳县"},{n:"奉节县"},{n:"巫山县"},{n:"巫溪县"},{n:"黔江区"},{n:"石柱土家族自治县"},{n:"秀山土家族苗族自治县"},{n:"酉阳土家族苗族自治县"},{n:"彭水苗族土家族自治县"},{n:"江津区"},{n:"合川区"},{n:"永川区"},{n:"南川区"}]},{p:"四川",c:[{n:"成都",a:[{s:"锦江区"},{s:"青羊区"},{s:"金牛区"},{s:"武侯区"},{s:"成华区"},{s:"龙泉驿区"},{s:"青白江区"},{s:"新都区"},{s:"温江区"},{s:"金堂县"},{s:"双流县"},{s:"郫县"},{s:"大邑县"},{s:"蒲江县"},{s:"新津县"},{s:"都江堰市"},{s:"彭州市"},{s:"邛崃市"},{s:"崇州市"}]},{n:"自贡",a:[{s:"自流井区"},{s:"贡井区"},{s:"大安区"},{s:"沿滩区"},{s:"荣县"},{s:"富顺县"}]},{n:"攀枝花",a:[{s:"东区"},{s:"西区"},{s:"仁和区"},{s:"米易县"},{s:"盐边县"}]},{n:"泸州",a:[{s:"江阳区"},{s:"纳溪区"},{s:"龙马潭区"},{s:"泸县"},{s:"合江县"},{s:"叙永县"},{s:"古蔺县"}]},{n:"德阳",a:[{s:"旌阳区"},{s:"中江县"},{s:"罗江县"},{s:"广汉市"},{s:"什邡市"},{s:"绵竹市"}]},{n:"绵阳",a:[{s:"涪城区"},{s:"游仙区"},{s:"三台县"},{s:"盐亭县"},{s:"安县"},{s:"梓潼县"},{s:"北川羌族自治县"},{s:"平武县"},{s:"江油市"}]},{n:"广元",a:[{s:"利州区"},{s:"元坝区"},{s:"朝天区"},{s:"旺苍县"},{s:"青川县"},{s:"剑阁县"},{s:"苍溪县"}]},{n:"遂宁",a:[{s:"船山区"},{s:">安居区"},{s:">蓬溪县"},{s:">射洪县"},{s:">大英县"}]},{n:"内江",a:[{s:"市中区"},{s:"东兴区"},{s:"威远县"},{s:"资中县"},{s:"隆昌县"}]},{n:"乐山",a:[{s:"市中区"},{s:"沙湾区"},{s:"五通桥区"},{s:"金口河区"},{s:"犍为县"},{s:"井研县"},{s:"夹江县"},{s:"沐川县"},{s:"峨边彝族自治县"},{s:"马边彝族自治县"},{s:"峨眉山市"}]},{n:"南充",a:[{s:"顺庆区"},{s:"高坪区"},{s:"嘉陵区"},{s:"南部县"},{s:"营山县"},{s:"蓬安县"},{s:"仪陇县"},{s:"西充县"},{s:"阆中市"}]},{n:"眉山",a:[{s:"东坡区"},{s:"仁寿县"},{s:"彭山县"},{s:"洪雅县"},{s:"丹棱县"},{s:"青神县"}]},{n:"宜宾",a:[{s:"翠屏区"},{s:"宜宾县"},{s:"南溪县"},{s:"江安县"},{s:"长宁县"},{s:"高县"},{s:"珙县"},{s:"筠连县"},{s:"兴文县"},{s:"屏山县"}]},{n:"广安",a:[{s:"广安区"},{s:"岳池县"},{s:"武胜县"},{s:"邻水县"},{s:"华蓥市"}]},{n:"达川",a:[{s:"通川区"},{s:"达县"},{s:"宣汉县"},{s:"开江县"},{s:"大竹县"},{s:"渠县"},{s:"万源市"}]},{n:"雅安",a:[{s:"雨城区"},{s:"名山县"},{s:"荥经县"},{s:"汉源县"},{s:"石棉县"},{s:"天全县"},{s:"芦山县"},{s:"宝兴县"}]},{n:"巴中",a:[{s:"巴州区"},{s:"通江县"},{s:"南江县"},{s:"平昌县"}]},{n:"资阳",a:[{s:"雁江区"},{s:"安岳县"},{s:"乐至县"},{s:"简阳市"}]},{n:"阿坝",a:[{s:"汶川县"},{s:"理县"},{s:"茂县"},{s:"松潘县"},{s:"九寨沟县"},{s:"金川县"},{s:"小金县"},{s:"黑水县"},{s:"马尔康县"},{s:"壤塘县"},{s:"阿坝县"},{s:"若尔盖县"},{s:"红原县"}]},{n:"甘孜",a:[{s:"康定县"},{s:"泸定县"},{s:"丹巴县"},{s:"九龙县"},{s:"雅江县"},{s:"道孚县"},{s:"炉霍县"},{s:"甘孜县"},{s:"新龙县"},{s:"德格县"},{s:"白玉县"},{s:"石渠县"},{s:"色达县"},{s:"理塘县"},{s:"巴塘县"},{s:"乡城县"},{s:"稻城县"},{s:"得荣县"}]},{n:"凉山",a:[{s:"西昌市"},{s:"木里藏族自治县"},{s:"盐源县"},{s:"德昌县"},{s:"会理县"},{s:"会东县"},{s:"宁南县"},{s:"普格县"},{s:"布拖县"},{s:"金阳县"},{s:"昭觉县"},{s:"喜德县"},{s:"冕宁县"},{s:"越西县"},{s:"甘洛县"},{s:"美姑县"},{s:"雷波县"}]}]},{p:"贵州",c:[{n:"贵阳",a:[{s:"南明区"},{s:"云岩区"},{s:"花溪区"},{s:"乌当区"},{s:"白云区"},{s:"小河区"},{s:"开阳县"},{s:"息烽县"},{s:"修文县"},{s:"清镇市"}]},{n:"六盘水",a:[{s:"钟山区"},{s:"六枝特区"},{s:"水城县"},{s:"盘县"}]},{n:"遵义",a:[{s:"红花岗区"},{s:"汇川区"},{s:"遵义县"},{s:"桐梓县"},{s:"绥阳县"},{s:"正安县"},{s:"道真仡佬族苗族自治县"},{s:"务川仡佬族苗族自治县"},{s:"凤冈县"},{s:"湄潭县"},{s:"余庆县"},{s:"习水县"},{s:"赤水市"},{s:"仁怀市"}]},{n:"安顺",a:[{s:"西秀区"},{s:"平坝县"},{s:"普定县"},{s:"镇宁布依族苗族自治县"},{s:"关岭布依族苗族自治县"},{s:"紫云苗族布依族自治县"}]},{n:"铜仁",a:[{s:"铜仁市"},{s:"江口县"},{s:"玉屏侗族自治县"},{s:"石阡县"},{s:"思南县"},{s:"印江土家族苗族自治县"},{s:"德江县"},{s:"沿河土家族自治县"},{s:"松桃苗族自治县"},{s:"万山特区"}]},{n:"黔西南",a:[{s:"兴义市"},{s:"兴仁县"},{s:"普安县"},{s:"晴隆县"},{s:"贞丰县"},{s:"望谟县"},{s:"册亨县"},{s:"安龙县"}]},{n:"毕节",a:[{s:"毕节市"},{s:"大方县"},{s:"黔西县"},{s:"金沙县"},{s:"织金县"},{s:"纳雍县"},{s:"威宁彝族回族苗族自治县"},{s:"赫章县"}]},{n:"黔东南",a:[{s:"凯里市"},{s:"黄平县"},{s:"施秉县"},{s:"三穗县"},{s:"镇远县"},{s:"岑巩县"},{s:"天柱县"},{s:"锦屏县"},{s:"剑河县"},{s:"台江县"},{s:"黎平县"},{s:"榕江县"},{s:"从江县"},{s:"雷山县"},{s:"麻江县"},{s:"丹寨县"}]},{n:"黔南",a:[{s:"都匀市"},{s:"福泉市"},{s:"荔波县"},{s:"贵定县"},{s:"瓮安县"},{s:"独山县"},{s:"平塘县"},{s:"罗甸县"},{s:"长顺县"},{s:"龙里县"},{s:"惠水县"},{s:"三都水族自治县"}]}]},{p:"云南",c:[{n:"昆明",a:[{s:"五华区"},{s:"盘龙区"},{s:"官渡区"},{s:"西山区"},{s:"东川区"},{s:"呈贡县"},{s:"晋宁县"},{s:"富民县"},{s:"宜良县"},{s:"石林彝族自治县"},{s:"嵩明县"},{s:"禄劝彝族苗族自治县"},{s:"寻甸回族彝族自治县"},{s:"安宁市"}]},{n:"曲靖",a:[{s:"麒麟区"},{s:"马龙县"},{s:"陆良县"},{s:"师宗县"},{s:"罗平县"},{s:"富源县"},{s:"会泽县"},{s:"沾益县"},{s:"宣威市"}]},{n:"玉溪",a:[{s:"红塔区"},{s:"江川县"},{s:"澄江县"},{s:"通海县"},{s:"华宁县"},{s:"易门县"},{s:"峨山彝族自治县"},{s:"新平彝族傣族自治县"},{s:"元江哈尼族彝族傣族自治县"}]},{n:"保山",a:[{s:"隆阳区"},{s:"施甸县"},{s:"腾冲县"},{s:"龙陵县"},{s:"昌宁县"}]},{n:"昭通",a:[{s:"昭阳区"},{s:"鲁甸县"},{s:"巧家县"},{s:"盐津县"},{s:"大关县"},{s:"永善县"},{s:"绥江县"},{s:"镇雄县"},{s:"彝良县"},{s:"威信县"},{s:"水富县"}]},{n:"丽江",a:[{s:"古城区"},{s:"玉龙纳西族自治县"},{s:"永胜县"},{s:"华坪县"},{s:"宁蒗彝族自治县"}]},{n:"普洱",a:[{s:"思茅区"},{s:"宁洱镇"},{s:"墨江哈尼族自治县"},{s:"景东彝族自治县"},{s:"景谷傣族彝族自治县"},{s:"镇沅彝族哈尼族拉祜族自治县"},{s:"江城哈尼族彝族自治县"},{s:"孟连傣族拉祜族佤族自治县"},{s:"澜沧拉祜族自治县"},{s:"西盟佤族自治县"}]},{n:"临沧",a:[{s:"临翔区"},{s:"凤庆县"},{s:"云县"},{s:"永德县"},{s:"镇康县"},{s:"双江拉祜族佤族布朗族傣族自治县"},{s:"耿马傣族佤族自治县"},{s:"沧源佤族自治县"}]},{n:"楚雄",a:[{s:"楚雄市"},{s:"双柏县"},{s:"牟定县"},{s:"南华县"},{s:"姚安县"},{s:"大姚县"},{s:"永仁县"},{s:"元谋县"},{s:"武定县"},{s:"禄丰县"}]},{n:"红河",a:[{s:"个旧市"},{s:"开远市"},{s:"蒙自县"},{s:"屏边苗族自治县"},{s:"建水县"},{s:"石屏县"},{s:"弥勒县"},{s:"泸西县"},{s:"元阳县"},{s:"红河县"},{s:"金平苗族瑶族傣族自治县"},{s:"绿春县"},{s:"河口瑶族自治县"}]},{n:"文山",a:[{s:"文山县"},{s:"砚山县"},{s:"西畴县"},{s:"麻栗坡县"},{s:"马关县"},{s:"丘北县"},{s:"广南县"},{s:"富宁县"}]},{n:"西双版纳",a:[{s:"景洪市"},{s:"勐海县"},{s:"勐腊县"}]},{n:"大理",a:[{s:"大理市"},{s:"漾濞彝族自治县"},{s:"祥云县"},{s:"宾川县"},{s:"弥渡县"},{s:"南涧彝族自治县"},{s:"巍山彝族回族自治县"},{s:"永平县"},{s:"云龙县"},{s:"洱源县"},{s:"剑川县"},{s:"鹤庆县"}]},{n:"德宏",a:[{s:"瑞丽市"},{s:"潞西市"},{s:"梁河县"},{s:"盈江县"},{s:"陇川县"}]},{n:"怒江傈",a:[{s:"泸水县"},{s:"福贡县"},{s:"贡山独龙族怒族自治县"},{s:"兰坪白族普米族自治县"}]},{n:"迪庆",a:[{s:"香格里拉县"},{s:"德钦县"},{s:"维西傈僳族自治县"}]}]},{p:"西藏",c:[{n:"拉萨",a:[{s:"城关区"},{s:"林周县"},{s:"当雄县"},{s:"尼木县"},{s:"曲水县"},{s:"堆龙德庆县"},{s:"达孜县"},{s:"墨竹工卡县"}]},{n:"昌都",a:[{s:"昌都县"},{s:"江达县"},{s:"贡觉县"},{s:"类乌齐县"},{s:"丁青县"},{s:"察雅县"},{s:"八宿县"},{s:"左贡县"},{s:"芒康县"},{s:"洛隆县"},{s:"边坝县"}]},{n:"山南",a:[{s:"乃东县"},{s:"扎囊县"},{s:"贡嘎县"},{s:"桑日县"},{s:"琼结县"},{s:"曲松县"},{s:"措美县"},{s:"洛扎县"},{s:"加查县"},{s:"隆子县"},{s:"错那县"},{s:"浪卡子县"}]},{n:"日喀则",a:[{s:"日喀则市"},{s:"南木林县"},{s:"江孜县"},{s:"定日县"},{s:"萨迦县"},{s:"拉孜县"},{s:"昂仁县"},{s:"谢通门县"},{s:"白朗县"},{s:"仁布县"},{s:"康马县"},{s:"定结县"},{s:"仲巴县"},{s:"亚东县"},{s:"吉隆县"},{s:"聂拉木县"},{s:"萨嘎县"},{s:"岗巴县"}]},{n:"那曲",a:[{s:"那曲县"},{s:"嘉黎县"},{s:"比如县"},{s:"聂荣县"},{s:"安多县"},{s:"申扎县"},{s:"索县"},{s:"班戈县"},{s:"巴青县"},{s:"尼玛县"}]},{n:"阿里",a:[{s:"普兰县"},{s:"札达县"},{s:"噶尔县"},{s:"日土县"},{s:"革吉县"},{s:"改则县"},{s:"措勤县"}]},{n:"林芝",a:[{s:"林芝县"},{s:"工布江达县"},{s:"米林县"},{s:"墨脱县"},{s:"波密县"},{s:"察隅县"},{s:"朗县"}]}]},{p:"陕西",c:[{n:"西安",a:[{s:"新城区"},{s:"碑林区"},{s:"莲湖区"},{s:"灞桥区"},{s:"未央区"},{s:"雁塔区"},{s:"阎良区"},{s:"临潼区"},{s:"长安区"},{s:"蓝田县"},{s:"周至县"},{s:"户县"},{s:"高陵县"}]},{n:"铜川",a:[{s:"王益区"},{s:"印台区"},{s:"耀州区"},{s:"宜君县"}]},{n:"宝鸡",a:[{s:"渭滨区"},{s:"金台区"},{s:"陈仓区"},{s:"凤翔县"},{s:"岐山县"},{s:"扶风县"},{s:"眉县"},{s:"陇县"},{s:"千阳县"},{s:"麟游县"},{s:"凤县"},{s:"太白县"}]},{n:"咸阳",a:[{s:"秦都区"},{s:"杨凌区"},{s:"渭城区"},{s:"三原县"},{s:"泾阳县"},{s:"乾县"},{s:"礼泉县"},{s:"永寿县"},{s:"彬县"},{s:"长武县"},{s:"旬邑县"},{s:"淳化县"},{s:"武功县"},{s:"兴平市"}]},{n:"渭南",a:[{s:"临渭区"},{s:"华县"},{s:"潼关县"},{s:"大荔县"},{s:"合阳县"},{s:"澄城县"},{s:"蒲城县"},{s:"白水县"},{s:"富平县"},{s:"韩城市"},{s:"华阴市"}]},{n:"延安",a:[{s:"宝塔区"},{s:"延长县"},{s:"延川县"},{s:"子长县"},{s:"安塞县"},{s:"志丹县"},{s:"吴起县"},{s:"甘泉县"},{s:"富县"},{s:"洛川县"},{s:"宜川县"},{s:"黄龙县"},{s:"黄陵县"}]},{n:"汉中",a:[{s:"汉台区"},{s:"南郑县"},{s:"城固县"},{s:"洋县"},{s:"西乡县"},{s:"勉县"},{s:"宁强县"},{s:"略阳县"},{s:"镇巴县"},{s:"留坝县"},{s:"佛坪县"}]},{n:"榆林",a:[{s:"榆阳区"},{s:"神木县"},{s:"府谷县"},{s:"横山县"},{s:"靖边县"},{s:"定边县"},{s:"绥德县"},{s:"米脂县"},{s:"佳县"},{s:"吴堡县"},{s:"清涧县"},{s:"子洲县"}]},{n:"安康",a:[{s:"汉滨区"},{s:"汉阴县"},{s:"石泉县"},{s:"宁陕县"},{s:"紫阳县"},{s:"岚皋县"},{s:"平利县"},{s:"镇坪县"},{s:"旬阳县"},{s:"白河县"}]},{n:"商洛",a:[{s:"商州区"},{s:"洛南县"},{s:"丹凤县"},{s:"商南县"},{s:"山阳县"},{s:"镇安县"},{s:"柞水县"}]}]},{p:"甘肃",c:[{n:"兰州",a:[{s:"区(县)"},{s:"城关区"},{s:"七里河区"},{s:"西固区"},{s:"安宁区"},{s:"红古区"},{s:"永登县"},{s:"皋兰县"},{s:"榆中县"}]},{n:"嘉峪关",a:[{s:"嘉峪关市"}]},{n:"金昌",a:[{s:"金川区"},{s:"永昌县"}]},{n:"白银",a:[{s:"白银区"},{s:"平川区"},{s:"靖远县"},{s:"会宁县"},{s:"景泰县"}]},{n:"天水",a:[{s:"秦城区"},{s:"麦积区"},{s:"清水县"},{s:"秦安县"},{s:"甘谷县"},{s:"武山县"},{s:"张家川回族自治县"}]},{n:"武威",a:[{s:"凉州区"},{s:"民勤县"},{s:"古浪县"},{s:"天祝藏族自治县"}]},{n:"张掖",a:[{s:"甘州区"},{s:"肃南裕固族自治县"},{s:"民乐县"},{s:"临泽县"},{s:"高台县"},{s:"山丹县"}]},{n:"平凉",a:[{s:"崆峒区"},{s:"泾川县"},{s:"灵台县"},{s:"崇信县"},{s:"华亭县"},{s:"庄浪县"},{s:"静宁县"}]},{n:"酒泉",a:[{s:"肃州区"},{s:"金塔县"},{s:"瓜州县"},{s:"肃北蒙古族自治县"},{s:"阿克塞哈萨克族自治县"},{s:"玉门市"},{s:"敦煌市"}]},{n:"庆阳",a:[{s:"西峰区"},{s:"庆城县"},{s:"环县"},{s:"华池县"},{s:"合水县"},{s:"正宁县"},{s:"宁县"},{s:"镇原县"}]},{n:"定西",a:[{s:"安定区"},{s:"通渭县"},{s:"陇西县"},{s:"渭源县"},{s:"临洮县"},{s:"漳县"},{s:"岷县"}]},{n:"陇南",a:[{s:"武都区"},{s:"成县"},{s:"文县"},{s:"宕昌县"},{s:"康县"},{s:"西和县"},{s:"礼县"},{s:"徽县"},{s:"两当县"}]},{n:"临夏",a:[{s:"临夏市"},{s:"临夏县"},{s:"康乐县"},{s:"永靖县"},{s:"广河县"},{s:"和政县"},{s:"东乡族自治县"},{s:"积石山保安族东乡族撒拉族自治县"}]},{n:"甘南",a:[{s:"合作市"},{s:"临潭县"},{s:"卓尼县"},{s:"舟曲县"},{s:"迭部县"},{s:"玛曲县"},{s:"碌曲县"},{s:"夏河县"}]}]},{p:"青海",c:[{n:"西宁",a:[{s:"城东区"},{s:"城中区"},{s:"城西区"},{s:"城北区"},{s:"大通回族土族自治县"},{s:"湟中县"},{s:"湟源县"}]},{n:"海东",a:[{s:"平安县"},{s:"民和回族土族自治县"},{s:"乐都县"},{s:"互助土族自治县"},{s:"化隆回族自治县"},{s:"循化撒拉族自治县"}]},{n:"海北",a:[{s:"门源回族自治县"},{s:"祁连县"},{s:"海晏县"},{s:"刚察县"}]},{n:"黄南",a:[{s:"同仁县"},{s:"尖扎县"},{s:"泽库县"},{s:"河南蒙古族自治县"}]},{n:"海南",a:[{s:"共和县"},{s:"同德县"},{s:"贵德县"},{s:"兴海县"},{s:"贵南县"}]},{n:"果洛",a:[{s:"玛沁县"},{s:"班玛县"},{s:"甘德县"},{s:"达日县"},{s:"久治县"},{s:"玛多县"}]},{n:"玉树",a:[{s:"玉树县"},{s:"杂多县"},{s:"称多县"},{s:"治多县"},{s:"囊谦县"},{s:"曲麻莱县"}]},{n:"梅西",a:[{s:"格尔木市"},{s:"德令哈市"},{s:"乌兰县"},{s:"都兰县"},{s:"天峻县"}]}]},{p:"宁夏",c:[{n:"银川",a:[{s:"兴庆区"},{s:"西夏区"},{s:"金凤区"},{s:"永宁县"},{s:"贺兰县"},{s:"灵武市"}]},{n:"石嘴山",a:[{s:"大武口区"},{s:"惠农区"},{s:"平罗县"}]},{n:"吴忠",a:[{s:"利通区"},{s:"红寺堡区"},{s:"盐池县"},{s:"同心县"},{s:"青铜峡市"}]},{n:"固原",a:[{s:"原州区"},{s:"西吉县"},{s:"隆德县"},{s:"泾源县"},{s:"彭阳县"}]},{n:"中卫",a:[{s:"沙坡头区"},{s:"中宁县"},{s:"海原县"}]}]},{p:"新疆",c:[{n:"乌鲁木齐",a:[{s:"天山区"},{s:"沙依巴克区"},{s:"新市区"},{s:"水磨沟区"},{s:"头屯河区"},{s:"达坂城区"},{s:"米东区"},{s:"乌鲁木齐县"}]},{n:"克拉玛依",a:[{s:"独山子区"},{s:"克拉玛依区"},{s:"白碱滩区"},{s:"乌尔禾区"}]},{n:"吐鲁番",a:[{s:"吐鲁番市"},{s:"鄯善县"},{s:"托克逊县"}]},{n:"哈密",a:[{s:"哈密市"},{s:"巴里坤哈萨克自治县"},{s:"伊吾县"}]},{n:"昌吉",a:[{s:"昌吉市"},{s:"阜康市"},{s:"呼图壁县"},{s:"玛纳斯县"},{s:"奇台县"},{s:"吉木萨尔县"},{s:"木垒哈萨克自治县"}]},{n:"博尔塔拉",a:[{s:"博乐市"},{s:"精河县"},{s:"温泉县"}]},{n:"巴音郭楞",a:[{s:"库尔勒市"},{s:"轮台县"},{s:"尉犁县"},{s:"若羌县"},{s:"且末县"},{s:"焉耆回族自治县"},{s:"和静县"},{s:"和硕县"},{s:"博湖县"}]},{n:"阿克苏",a:[{s:"阿克苏市"},{s:"温宿县"},{s:"库车县"},{s:"沙雅县"},{s:"新和县"},{s:"拜城县"},{s:"乌什县"},{s:"阿瓦提县"},{s:"柯坪县"}]},{n:"克孜勒苏",a:[{s:"阿图什市"},{s:"阿克陶县"},{s:"阿合奇县"},{s:"乌恰县"}]},{n:"喀什",a:[{s:"喀什市"},{s:"疏附县"},{s:"疏勒县"},{s:"英吉沙县"},{s:"泽普县"},{s:"莎车县"},{s:"叶城县"},{s:"麦盖提县"},{s:"岳普湖县"},{s:"伽师县"},{s:"巴楚县"},{s:"塔什库尔干县塔吉克自治"}]},{n:"和田",a:[{s:"和田市"},{s:"和田县"},{s:"墨玉县"},{s:"皮山县"},{s:"洛浦县"},{s:"策勒县"},{s:"于田县"},{s:"民丰县"}]},{n:"伊犁",a:[{s:"伊宁市"},{s:"奎屯市"},{s:"伊宁县"},{s:"察布查尔锡伯自治县"},{s:"霍城县"},{s:"巩留县"},{s:"新源县"},{s:"昭苏县"},{s:"特克斯县"},{s:"尼勒克县"}]},{n:"塔城",a:[{s:"塔城市"},{s:"乌苏市"},{s:"额敏县"},{s:"沙湾县"},{s:"托里县"},{s:"裕民县"},{s:"和布克赛尔蒙古自治县"}]},{n:"阿勒泰",a:[{s:"阿勒泰市"},{s:"布尔津县"},{s:"富蕴县"},{s:"福海县"},{s:"哈巴河县"},{s:"青河县"},{s:"吉木乃县"}]},{n:"石河子",a:[{s:"石河子"}]},{n:"阿拉尔",a:[{s:"阿拉尔"}]},{n:"图木舒克",a:[{s:"图木舒克"}]},{n:"五家渠",a:[{s:"五家渠"}]}]},{p:"香港",c:[{n:"中西区"},{n:"东区"},{n:"九龙城区"},{n:"观塘区"},{n:"南区"},{n:"深水区"},{n:"湾仔区"},{n:"黄大仙区"},{n:"油尖旺区"},{n:"离岛区"},{n:"葵青区"},{n:"北区"},{n:"西贡区"},{n:"沙田区"},{n:"屯门区"},{n:"大埔区"},{n:"荃湾区"},{n:"元朗区"}]},{p:"澳门",c:[{n:"花地玛堂区"},{n:"圣安多尼堂区"},{n:"大堂区"},{n:"望德堂区"},{n:"风顺堂区"},{n:"嘉模堂区"},{n:"圣方济各堂区"}]},{p:"台湾",c:[{n:"台北市"},{n:"高雄市"},{n:"基隆市"},{n:"台中市"},{n:"台南市"},{n:"新竹市"},{n:"嘉义市"},{n:"台北县"},{n:"宜兰县"},{n:"新竹县"},{n:"桃园县"},{n:"苗栗县"},{n:"台中县"},{n:"彰化县"},{n:"南投县"},{n:"嘉义县"},{n:"云林县"},{n:"台南县"},{n:"高雄县"},{n:"屏东县"},{n:"台东县"},{n:"花莲县"},{n:"澎湖县"}]},{p:"海外",c:[{n:"美国"},{n:"澳大利亚"},{n:"日本"},{n:"加拿大"},{n:"英国"},{n:"印度"},{n:"韩国"},{n:"法国"},{n:"巴西"}]}]}}}]),angular.module("directives").directive("cgFriendlyTime",["$timeout",function(a){function b(c,j,k,l){var m=moment(),n=m-j,o="",p=0;k?o=j.format(k):j.isAfter(m)?o=j.format(i):1e3>n?(o=d,p=1e3):6e4>n?(o=moment.duration(n).seconds()+e,p=1e4-n%1e4):36e5>n?(o=moment.duration(n).minutes()+f,p=6e4-n%6e4):o=j.isAfter(m.startOf("day"))?j.format(g):j.isAfter(m.startOf("year"))?j.format(h):j.format(i),c.text(o),p>0&&(l=a(function(){b(c,j,k,l)},p))}function c(c,d,e,f){d&&(f>0&&a.cancel(f),d=moment(d),c.attr({title:d.format(j)}),b(c,d,e,f))}var d="刚刚",e="秒前",f="分钟前",g="今天 HH:mm",h="MM-DD HH:mm",i="YYYY-MM-DD HH:mm",j="YYYY-MM-DD HH:mm:ss";return{restrict:"A",scope:{time:"=cgFriendlyTime"},link:function(b,d,e){var f,g=e.cgFriendlyTimeFormat;b.$watch("time",function(a,b){c(d,a,g,f)}),c(d,b.time,g,f),b.$on("$destroy",function(){a.cancel(f)})}}}]),angular.module("directives").directive("cgFriendlyDate",["$filter",function(a){var b=function(b,c){return a("date")(b,c)},c={0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},d=function(a,d,e){var f=a.$eval(e.cgFriendlyDate||e.ngModel),g=new Date(f),h=b(f,"MM月dd日"),i=c[g.getDay()],j=(new Date).getTime();h=b(h,"MM:dd")==b(j,"MM月dd日")?"今天（"+h+" "+i+"）":h+" "+i,e.cgFriendlyDate?d.text(h):d.replaceWith(h)};return{restrict:"AE",link:d}}]),angular.module("app").directive("cgMemberSelector",function(){function a(a,b,c){b=b.trim();var d=$(c).data("pinyin"),e=0===b.toUpperCase().indexOf(a.toUpperCase());if(angular.isUndefined(d))return e;var f=d.split("|");return 3!==f.length?e:f[1].indexOf(a)>=0||f[2].indexOf(a)>=0||e}var b=["$scope","$element","Project","Common","$rootScope",function(b,c,d,e,f){function g(a){b.unselected=e.m2u(a);var c=_.find(b.unselected,function(a){return a.global_key===b.USER.global_key});c&&(_.remove(b.unselected,c),b.unselected.unshift(c))}b.USER=f.USER,b.$watch("project",function(a){if(a&&!b.members){var c=d.members({id:a.id});c.then(function(a){g(a.data&&a.data.list||[])})}}),b.$watch("members",function(a){a&&g(a||[])}),b.value="0",b.checkMode=c.hasClass("check-mode"),b.checkToggleMode=c.hasClass("check-toggle-mode"),b.update_scrollbar=e.uuid(),b.options={placeholder:"请选择",width:b.width||"250",formatSelection:function(){return"请选择"},formatResult:function(a){return $(a.element).attr("data-template")||a.text},matcher:a,dropdownCssClass:b.checkMode?"check-mode":void 0},b.show=function(a){return b.checkMode?!0:b.hasSelf||a.global_key!==b.USER.global_key?!_.find(b.selected,function(b){return b.global_key===a.global_key}):!1},b.select=function(){function a(a){if(!a||a.data){var d=e.findOfId(b.selected,c.id);d||b.selected.push(c),b.value="0"}}if("0"!==b.value){var c=_.find(b.unselected,function(a){return a.global_key===b.value});if(b.update_scrollbar=e.uuid(),b.checkMode){var d=_.find(b.selected,function(a){return a.global_key===c.global_key});if(d)return void(b.checkToggleMode&&b.cancel(c))}var f=b.onselect({member:c});return angular.isObject(f)&&angular.isFunction(f.then)?f.then(a):a(),c}},b.cancel=function(a){function c(c){if(!c||c.data){var d=_.find(b.selected,function(b){return b.global_key===a.global_key});_.remove(b.selected,d),b.value="0"}}function d(a){b.value="0"}var e=b.oncancel({member:a});return angular.isObject(e)&&angular.isFunction(e.then)?(e.then(c),e["catch"](d)):c(),a},b.checkModeClass=function(a){if(!b.checkMode)return"";var c=_.find(b.selected,function(b){return b.global_key===a.global_key});return c?"cg-ms-chosen":"cg-ms-notchosen"};var h=$(b.opener);if(h.length){h.css({cursor:"pointer"});var i="click."+e.uuid();h.on(i,function(a){var b=$(a.target);b.is("span")||b.is("i")&&!b.hasClass("add")||b.is("li")||c.find("select").select2("open")}),b.$on("$destroy",function(){h.off(i)})}}];return{scope:{width:"=cgMsWidth",onselect:"&cgMsOnselect",oncancel:"&cgMsOncancel",selected:"=cgMsSelected",hasSelf:"=cgMsHasSelf",opener:"=cgMsOpener",project:"=cgMsProject",members:"=cgMsMembers",popupMenu:"=cgMsPopupMenu"},controller:b,templateUrl:function(a,b){return"common/directives/cgMemberSelector/tpl/"+(b.mode?b.mode:"cgMemberSelector")+".html"}}}),angular.module("directives").directive("cgShare",["Share","$rootScope","Common","$timeout",function(a,b,c,d){return{scope:{share:"=cgShare",object:"=object",type:"=type",suffix:"=?suffix"},link:function(e,f,g){e.RESOURCE_TYPE={ATTACHMENT:0,TOPIC:1,TOPIC_COMMENT:2},e.ACCESS_TYPE={PUBLIC:0},e.suffix=e.suffix||"",f.css({position:"relative"});var h=f.find(".share-popup");f.click(function(a){return a&&h.is(":visible")&&void 0!==$(a.target).attr("cg-share")?void h.hide():(h.show(),void h.css({top:f.outerHeight()+10,left:(f.outerWidth()-h.outerWidth())/2}))});var i="."+c.uuid();$(document).on("click"+i,function(a){a&&0===$(a.target).closest("[cg-share]").length&&h.hide()}),e.$on("$destroy",function(){$(document).off("click"+i)});var j=!1,k=f.find(".ui.checkbox");k.checkbox({onEnable:function(){j||e.create(),j=!1},onDisable:function(){j||e["delete"](),j=!1}}),e.getCopy=function(){return f.find(".share-popup-input").val()};var l;e.doCopy=function(){e.copied=!0,d.cancel(l),l=d(function(){e.copied=!1},2e3)},$(document).on("onShare"),e.loading=!0,e.$watch("share",function(a,b){e.share=a,e.loading=!1,j=!0,k.checkbox(a?"enable":"disable")}),e.$watch("object",function(a,b){e.object=a}),e.create=function(){e.loading=!0;var c;e.type===e.RESOURCE_TYPE.ATTACHMENT?c=e.object.file_id:e.type===e.RESOURCE_TYPE.TOPIC&&(c=e.object.id);var d=a.create({resourceId:c,resourceType:e.type,projectId:b.PROJECT.id,accessType:e.ACCESS_TYPE.PUBLIC});d.then(function(a){0===a.code&&(e.share=a.data)}),d["catch"](function(){e.share=!1,j=!0,k.checkbox("disable")}),d["finally"](function(){e.loading=!1,$(document).trigger("onShare")})},e["delete"]=function(){e.loading=!0;var b=a["delete"]({hash:e.share.hash});b.then(function(a){0===a.code&&(e.share=!1)}),b["catch"](function(){j=!0,k.checkbox("enable")}),b["finally"](function(){e.loading=!1,$(document).trigger("onShare")})}},restrict:"A",transclude:!0,templateUrl:"common/directives/cgShare/tpl/popup.html"}}]),angular.module("directives").directive("cgTab",["$parse",function(a){var b=9;return{compile:function(c,d){var e=a(d.cgTab);return function(a,c,d){c.on("keydown",function(c){c.keyCode==b&&a.$apply(function(){e(a,{$event:c})})})}}}}]);var ngClipboard=angular.module("ngClipboard",[]);ngClipboard.provider("ngClip",function(){var a=this;return this.path="/vendor/zeroclipboard/ZeroClipboard.swf",{setPath:function(b){a.path=b},$get:function(){return{path:a.path}}}}),ngClipboard.run(["ngClip",function(a){ZeroClipboard.config({moviePath:a.path,trustedDomains:["*"],allowScriptAccess:"always",forceHandCursor:!0})}]),ngClipboard.service("flashClip",function(){return function(a,b,c,d){var e=new ZeroClipboard(b);e.on("load",function(e){var f=function(e){e.setText(c),angular.isDefined(d)&&a.$apply(d,{e:b})};e.on("dataRequested",f),a.$on("$destroy",function(){e.off("dataRequested",f),e.unclip(b)})})}}),ngClipboard.service("html5Clip",function(){return function(a,b,c,d,e){var f=function(){var f=new Clipboard(b[0],c);f.on("success",function(b){a.$apply(d,{e:b})}),f.on("error",function(b){a.$apply(e,{e:b})})};f()}}),ngClipboard.directive("clipCopy",["flashClip","html5Clip","$parse",function(a,b,c){return{restrict:"AE",link:function(d,e,f){d.$watch(function(){return d.$eval(f.clipCopy)},function(){var g=d.$eval(f.clipCopy),h=c(f.clipClick),i=c(f.clipError),j={};j.text=function(a){return g&&angular.isString(g)?g:g&&angular.isFunction(g)?d.$apply(g,{trigger:a}):angular.element(a).html()};window.navigator.userAgent.toLowerCase();document.execCommand?b(d,e,j,h,i):a(d,e,g,h)})}}}]),ngClipboard.directive("clipCopyTarget",["flashClip","html5Clip","$parse",function(a,b,c){return{restrict:"AE",link:function(d,e,f){d.$watch(function(){return d.$eval(f.clipCopyTarget)},function(){var g=f.clipCopyTarget,h=c(f.clipClick),i=c(f.clipError),j={};g&&(j.target=function(a){return g?angular.element(g)[0]:a});var k=angular.element(g).html();window.navigator.userAgent.toLowerCase();document.execCommand?b(d,e,j,h,i):a(d,e,k,h)})}}}]),ngClipboard.directive("clipCopyCode",["flashClip","html5Clip","$timeout","$parse",function(a,b,c,d){return{restrict:"AE",link:function(e,f,g){var h=g.clipCopyCode,i=d(g.clipClick),j=d(g.clipError),k=(window.navigator.userAgent.toLowerCase(),angular.element("<span class='copy-action'><i class='icon copy' style='margin-right: 0;'></i></span>"));k.css({position:"absolute",background:"#b2b1ae",color:"#FFF","text-align":"center",cursor:"pointer",height:"30px",width:"30px","line-height":"30px",top:"0",right:"0",display:"none","z-index":"999"}),e.$watch(function(){return f.find(h).length},function(){var d=f.find(h);d.length<=0||d.each(function(d,f){var g=angular.element(f),h=angular.element("<div class='md-code'></div>"),l=k.clone();h.css({position:"relative","min-height":"30px"}),g.wrap(h),g.parent().append(l);var m=g.text(),n={};n.text=function(a){return m},g.parent().hover(function(){g.next(".copy-action").show()},function(){g.next(".copy-action").hide()}),i&&!i()&&(i=function(a){var b=g.next(".copy-action"),d=b.find("i.icon.copy");d.removeClass("copy").addClass("checkmark"),c(function(){d.removeClass("checkmark").addClass("copy")},1e3)}),document.execCommand?b(e,l,n,i,j):a(e,l,m,i)})})}}}]),angular.module("directives").directive("cgCodingCli",["Flash","Setting","ipCookie",function(a,b,c){return{templateUrl:"common/directives/codingCli/tpl/codingCli.html",restrict:"E",replace:!0,link:function(d,e,f){var g=!1,h=0,i=0,j=$("body"),k=e.find(".coding-cli"),l=e.find(".coding-cli-side"),m=e.find(".coding-cli-bar"),n=e.find("i.minus.icon"),o=e.find("i.add.icon"),p=e.find("i.setting.icon"),q=e.find("i.remove.icon"),r=e.find("div.coding-cli-mask"),s=e.find("i.repeat.icon"),t=!1,u=!1,v=!1,w=void 0,x=void 0,y=new Terminal({theme:"default",cols:80,rows:24}),z=33,A=c("coding-cli-font-size")||13,B=c("coding-cli-font-style"),C=function(){if(y.element){if(y.sizeToFit(),e.find(".terminal-container").css("line-height",A+2+"px"),v)k.height("100%"),y.sizeToFit();else{var a=e.find(".terminal-row").length*(A+2)+z,b=$(window).height();a>b-60&&(a=b-60),k.height(a)}y.focus()}},D=function(a){g=!0,h=a.clientY,i=l.parent().height(),j.addClass("draging"),l.parent().addClass("draging")},E=function(){g&&(C(),j.removeClass("draging"),l.parent().removeClass("draging")),g=!1},F=function(a){if(g){var b=i+h-a.clientY,c=$(window).height();if(60>=b||b>c-60)return;l.parent().height(b),y.element&&y.focus()}},G=function(){r.hide(),t=!0,v=!1,u=!1,l.on("mousedown",D),$(document).on("mouseup",E).on("mousemove",F),q.on("click",H),n.on("click",L),o.on("click",K),m.on("click",M),s.on("click",O),k.show(),n.show()},H=function(){t=!1,v=!1,u=!1,l.off("mousedown",D),$(document).off("mouseup",E).off("mousemove",F),q.off("click",H),n.off("click",L),o.off("click",K),m.off("click",M),s.off("click",O),k.hide(),clearInterval(x),J()},I=function(){w=new WebSocket(b.cli_host),w.onopen=function(){a.success().send("已连接到 Coding Cli"),y.open(e.find("#coding-cli-terminal")[0]),A&&Q(A),B&&P(B),k.height(e.find(".terminal-row").length*(A+2)+z),y.on("data",function(b){0==w.readyState||1==w.readyState?w.send(JSON.stringify({type:"data",data:b})):(a.fail().send("Coding Cli 链接断开，请关闭再开"),clearInterval(x),N())}),y.on("resize",function(){w.send(JSON.stringify({type:"resize",data:JSON.stringify({width:y.cols,height:y.rows})}))}),w.onmessage=function(a){y.write(a.data),_.endsWith(encodeURIComponent(a.data.toString()),encodeURIComponent("退出 Coding-cli ...\r\n"))&&(H(),J())},C(),$(window).resize(function(){C()}),x=setInterval(function(){0==w.readyState||1==w.readyState?w.send(JSON.stringify({type:"data",data:""})):(a.fail().send("Coding Cli 链接断开，请关闭再开"),clearInterval(x),N())},1e4)},w.onerror=function(){a.fail().send("Coding Cli 链接错误，请重试"),clearInterval(x),N()}},J=function(){w&&(w.close(),w=void 0),y&&(y.destroy(),y=new Terminal({theme:"default",cols:80,rows:24})),e.find("#coding-cli-terminal").html("")},K=function(){if(v){v=!1,l.show();var a=24*(A+2)+z,b=$(window).height();a>b&&(a="40%"),k.height(a),C()}else v=!0,u=!1,p.show(),n.show(),m.removeClass("min"),l.hide(),k.height("100%"),C()},L=function(){u=!0,v=!1,k.height(30),n.hide(),o.show(),p.hide(),l.hide(),m.addClass("min")},M=function(a){v||a&&$(a.target).is("i")||(n.show(),o.show(),p.show(),l.show(),m.removeClass("min"),u=!1,v=!1,C())},N=function(){r.show(),J()},O=function(){I(),l.show(),r.hide()},P=function(a){B=a,B=a+', Menlo, Monaco, "DejaVu Sans Mono",  Consolas, "Source Code Pro", "Liberation Mono",  Courier, "Courier New", monospace',e.find(".terminal-container").css("font-family",B)},Q=function(a){A=a,e.find("div.terminal").css("font-size",A+"px"),k.height(e.find(".terminal-row").length*(A+2)+z)};e.find("a.inbox.icon.item").on("click",function(){t?M():(G(),I())}),d.$on("coding-cli.setting.change.font-size",function(a,b){Q(b),y.refreshCharacterWidth(),C()}),d.$on("coding-cli.setting.change.font-style",function(a,b){P(b),y.refreshCharacterWidth(),C()}),d.showCodingCliSettingModal=function(){d.$broadcast("coding-cli.setting.modal.show")}}}}]).controller("CodingCliModalCtrl",["$scope","ipCookie",function(a,b){a.fontSize=b("coding-cli-font-size")||13,a.fontStyle=b("coding-cli-font-style")||"Consolas",a.fonts=["Consolas","Courier","Courier New","DejaVu Sans Mono","Liberation Mono","Menlo","Monaco","Monospace","Source Code Pro"];var c=$("#coding-cli-setting-modal").find(".ui.dropdown");a.choiceFontStyle=function(b){a.fontStyle=b,c.dropdown("hide")},c.dropdown(),a.$on("coding-cli.setting.modal.show",function(){$("#coding-cli-setting-modal").modal("show")}),a.submit=function(){b("coding-cli-font-size",a.fontSize),b("coding-cli-font-style",a.fontStyle),$("#coding-cli-setting-modal").modal("hide"),a.$emit("coding-cli.setting.change.font-size",a.fontSize),a.$emit("coding-cli.setting.change.font-style",a.fontStyle)},a.$on("$destroy",function(){$("#coding-cli-setting-modal").remove()})}]);var appDirective=angular.module("directives");appDirective.directive("cgCtrlEnter",["$parse",function(a){var b=13;return{compile:function(c,d){var e=a(d.cgCtrlEnter);return function(a,c,d){c.on("keydown",function(d){d.keyCode===b&&(d.ctrlKey||d.metaKey)&&(c.blur().focus(),a.$apply(function(){e(a,{$event:d})}))})}}}}]),appDirective.directive("cgEnter",["$parse",function(a){var b=13;return{compile:function(c,d){var e=a(d.cgEnter);return function(a,c,d){c.on("keydown",function(c){c.keyCode==b&&a.$apply(function(){e(a,{$event:c})})})}}}}]),appDirective.directive("cgNotClick",["$parse","Common",function(a,b){return{compile:function(c,d){var e=a(d.cgNotClick);return function(a,c,d){var f=!0;a.$watch(d.notClickWhen,function(a){f=!!a});var g=d.notClickClass;d.$observe("notClickClass",function(a){g=a},!0);var h=function(d){var h=$(d.srcElement||d.target);(!g&&!h.is(c)||g&&!h.is(g))&&f&&b.safeApply.call(a,function(){e(a,{$event:d})})};$(document).on("click",h),a.$on("$destroy",function(){$(document).off("click",h)})}}}}]),appDirective.directive("cgBlur",[function(){var a=function(a,b,c){b.on("blur",function(b){a.$eval(c.cgBlur),a.$digest()}),b.on("$destroy",function(){b.off("blur","**")})};return{link:a}}]),appDirective.directive("cgBlurRollback",[function(){var a=function(a,b,c){var d=a.$eval(c.ngModel),e=d.id||(new Date).getTime();a["model_copy_"+e]=angular.copy(d),b.on("blur",function(b){a.$eval(c.cgBlurRollback);var d=c.ngModel+"=model_copy_"+e+";";a.$eval(d),a.$digest()}),b.on("$destroy",function(){b.off("blur","**")})};return{link:a}}]),appDirective.directive("cgTabCircle",["Common",function(a){var b=function(b,c,d){var e=b.$eval(d.cgTabCircle);if(angular.isArray(e)&&c.is("textarea, input")){var f=e.length,g=1;b.$watch(d.cgTabCircle,function(a){angular.isDefined(a)&&(f=a.length)}),$(c).on("keydown",function(d){if(9===d.keyCode&&f>=2){var h=g++%f;return a.safeApply.call(b,e[h]),$(c).focus(),d.preventDefault(),!1}})}};return{link:b}}]),appDirective.directive("cgUpDownCircle",["Common","$parse",function(a,b){var c=function(a,c,d){var e=b(d.onIndexChange),f=b(d.onIndexEnter),g=d.disableUpDown,h=0,i=0,j=0;a.$watch(d.cgUpDownCircle,function(a){h=a||0,i=0}),a.$watch(d.resetStartIndex,function(a){
j=0}),$(c).on("keydown",function(b){var d=38===b.keyCode,k=40===b.keyCode,l=13===b.keyCode;if(d||k){if(a[g]||!h)return;return j=i+(d?-1:1)%h,i+=d?-1:1,j=(j%h+h)%h,a.$apply(function(){e(a,{$index:j})}),$(c).focus(),b.preventDefault(),!1}l&&a.$apply(function(){f(a,{$index:j})})})};return{link:c}}]),appDirective.directive("cgScrollToElement",function(){var a=function(a,b,c){c.$observe("cgScrollToElement",function(a){if(angular.isDefined(a)&&(""+a).length>0){var c=angular.element("#"+a);1===c.length&&b.scrollToElement(c)}})};return{link:a}}),appDirective.directive("cgCmdCtr",function(){var a=-1!=navigator.appVersion.indexOf("Mac");return{link:function(b,c){c.addClass("cmd-ctr").html(a?"⌘":"Ctrl")}}}),appDirective.directive("decimals",["$filter",function(a){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){a.decimalPoint=c.decimalPoint,a.decimals=c.decimals;var e=parseInt(a.decimals)||2,f=a.decimalPoint||".";d.$render=function(){""!=d.$modelValue&&null!=d.$modelValue&&d.$modelValue>=0&&("number"==typeof e?b.val(d.$modelValue.toFixed(e).toString()):b.val(d.$modelValue.toString()))},d.$parsers.unshift(function(a){if("number"==typeof e){var b=parseFloat(a.replace(",","."));return 0===e?parseInt(b):parseFloat(b.toFixed(e))}return parseFloat(a.replace(",","."))}),b.on("change",function(a){var c=parseFloat(b.val().replace(",","."));if(!isNaN(c)&&"number"==typeof e)if(0===e)b.val(parseInt(c));else{var d=c.toFixed(e);b.val(d.replace(".",f))}})}}}]),angular.module("directives").directive("contenteditable",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(){d.$setViewValue(b.html())}d.$render=function(){b.html(d.$viewValue||"")},b.bind("focus blur keydown keypress keyup change",function(){a.$apply(e)})}}}),angular.module("directives").directive("contextMenu",["$rootScope",function(a){return{scope:{module:"=",currentApp:"=",needConfirmEmail:"&",user:"="},restrict:"E",replace:!0,templateUrl:"common/directives/contextMenu/contextMenu.html",link:function(b,c,d){var e=function(){b.isUser="user"==b.currentApp,b.PROJECT=a.PROJECT,b.user=a.USER,b.isProject="project"==b.currentApp,b.confirmEmmail=b.needConfirmEmail()&&b.needConfirmEmail()(),b.showCode=a.isShowCode()};b.$watch("module",function(){e()}),b.$watch("currentApp",function(){e()}),b.$watch("needConfirmEmail",function(){e()})}}}]);var appDirective=angular.module("directives");appDirective.directive("cgDisableScroll",[function(){var a=function(a,b,c){function d(a){a=a||window.event,a.preventDefault&&a.preventDefault(),a.returnValue=!1}function e(a){i.indexOf(+a.keyCode)>0&&!$(a.target).is("textarea, input")&&d(a)}function f(a){var c=0;a=window.event||event,c=event.detail?-40*event.detail:event.wheelDeltaY,c&&(d(a),$(b).scrollTop($(b).scrollTop()-c))}function g(){window.addEventListener&&window.addEventListener("DOMMouseScroll",f,!1),window.onmousewheel=document.onmousewheel=f,document.onkeydown=e}function h(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",f,!1),window.onmousewheel=document.onmousewheel=document.onkeydown=null}var i=[37,38,39,40];b.mouseover(function(){g()}),b.mouseout(function(){h()})};return{link:a}}]),angular.module("directives").directive("cgAtEmoji",["Emoji",function(a){var b=function(b){return{at:":",data:b?a.normal:a.normal.concat(a.monkey),tpl:"<li data-value=':${code}:'>${code} <img src='/static/${image}'  height='20' width='20' /></li>",insert_tpl:":${code}:",start_with_space:!1,search_key:"code"}};return{link:function(a,c,d){var e=a.$eval(d.hasNoMonkey);c.atwho(b(e)),a.$on("$destroy",function(){var a=$(c).data("atwho");a&&(a.close(),$(c).data("atwho",null))})}}}]),angular.module("directives").directive("cgEmotion",["Common","EmojiMap",function(a,b){return{restrict:"AE",scope:{},templateUrl:"common/directives/emoji/emoji_dropdown.html",link:function(c,d,e){if(d[0]!=$("cg-emotion")[0])throw"there should be one cgEmotion directive instance only.";c.emojis=b.emoji,c.coding_emotions=b.coding,c.festival_emojis=b.festival,c.position=function(a){return{"background-position":24*-a+"px 0px"}},c.position_monkey=function(a){return{"background-position":50*-a+"px 0px"}},c.position_festival=function(a){return{"background-position":55*-a+"px 0px"}};var f=d.find(".ui.emotion.dropdown"),g="-100px",h="-100px";f.dropdown({onShow:function(){var a=angular.element("#send-message-modal");g=a.css("margin-top");var b=angular.element("#send-bobble-modal");h=b.css("margin-top")},onHide:function(){angular.element("#send-message-modal").css({"margin-top":g}),angular.element("#send-bobble-modal").css({"margin-top":h})}}),c.tab=0,c.matrix=function(a,b,c){return{x:function(){return a%b},y:function(){return Math.floor(a/c)}}},c.preview=function(a){var b=angular.element(a.target),d=b.parent().next(".emotion-preview"),e=d.find("img"),f=d.find(".emotion-word"),g=b.attr("code-image"),h=b.attr("index"),i=b.attr("code"),j=b.attr("w"),k=b.attr("h"),l=c.matrix(h,j,k),m=l.x(),n=l.y();e.attr("src",g),f.text(i),d.removeClass("right-bottom"),d.removeClass("left-bottom"),d.removeClass("right-top"),d.removeClass("left-top"),j/2>m&&k/2>n?d.addClass("right-bottom"):m>=j/2&&k/2>n?d.addClass("left-bottom"):j/2>m&&n>=k/2?d.addClass("right-top"):m>=j/2&&n>=k/2&&d.addClass("left-top"),d.show()},c.insertEmoji=function(b,d){var e,g=angular.element(b.target);e=d?angular.element(d):angular.element(c.editor);var h=g.attr("code");e[0].insertContent(" :"+h+": ",function(b){a.safeApply.call(c,function(){c.content=b.value,c.onChange&&c.onChange(c.content)}),f.dropdown("remove visible")})},c.hidePreview=function(a){var b=angular.element(a.currentTarget),c=b.find(".emotion-preview");c.hide()},c.setEditor=function(a){c.editor=a},c.setLayout=function(b){_.isObject(b)&&a.safeApply.call(c,function(){angular.extend(c,b)})},c.setBasicEmoji=function(a){c.basicEmoji=a||!1}}}}]).directive("cgEmotionBtn",["$compile","$timeout","Common",function(a,b,c){return{restrict:"AE",scope:{content:"=",onChange:"=",basicEmoji:"="},link:function(b,d,e){var f=e.editor,g=e.tabsBottom||!1;if(_.isEmpty(f)){var h=d.siblings("input[ng-model],textarea[ng-model]")[0];if(!h)throw"cgEmotionBtn must have input or textarea siblings, or specify with a valid attribute named editor.";var i=$(h).attr("id")||c.uuid();$(h).attr("id",i),f="#"+i}if(_.isEmpty($(f)))throw"[cg-emotion-btn]: attr: editor value ['"+f+"'] doesn't exist as a selector";_.isEmpty($("cg-emotion"))&&(b.emoji=$('<cg-emotion tabs-bottom="false"></cg-emotion>'),a(b.emoji)(b),b.emoji.appendTo("body")),$(d).click(function(a){if(a.target==d[0]){b.emoji=$("cg-emotion"),b.dropdownItem||(b.dropdownItem=b.emoji.find(".dropdown.ui.emotion"));var e=b.emoji.data("$isolateScope");if(e)return c.safeApply.call(e,function(){e.setEditor(f),e.setLayout({tabs_bottom:g}),e.setBasicEmoji(b.basicEmoji),b.basicEmoji&&(e.tab=0)}),e.onChange=function(a){b.onChange&&b.onChange(a);var d=$(f).scope();c.safeApply.call(d,function(){for(var b=$(f).attr("ng-model").split("."),c=d,e=0;e<b.length-1;e++)c=c[b[e]];c[b[e]]=a})},_.isEmpty(d.has(b.emoji))?(d.css({opacity:1,zIndex:3}),b.emoji.parent(".icon.smile").css({opacity:""}),b.emoji.appendTo(d),b.dropdownItem.dropdown("show"),!1):(b.dropdownItem.dropdown("is visible")?d.parent(".icon.smile").css({opacity:""}):d.parent(".icon.smile").css({opacity:1,zIndex:3}),void b.dropdownItem.dropdown("toggle"))}})}}}]),angular.module("directives").directive("cgEsc",["$parse","Common",function(a,b){return{link:function(c,d,e){var f=a(e.cgEsc),g=c.$eval(e.when);g="undefined"==typeof g?!0:!1;var h=function(a){var d=a.keyCode;27==d&&g&&b.safeApply.call(c,function(){f(c,{$event:"esc"})})};c.$watch(e.cgEscOff,function(){var a=c.$eval(e.cgEscOff);$(document).off("keydown",h),a||$(document).on("keydown",h)}),c.$on("$destroy",function(){$(document).off("keydown",h)})}}}]),angular.module("directives").directive("cgEscBlur",[function(){return{link:function(a,b,c){b.on("keyup",function(a){var c=27;a.keyCode===c&&b.blur()})}}}]),angular.module("directives").directive("cgExperiment",function(){return{scope:{getExps:"&cgExperiment",onSwitchToggle:"=",onClose:"=",onPassword:"=",checked:"="},link:function(a,b){a.exps=a.getExps(),a.password="",a.onExpClose=function(){angular.isFunction(a.onClose)&&(a.onClose(),b.remove())}},templateUrl:"common/directives/exp/tpl/exp.html",replace:!0}}),angular.module("directives").provider("experiment",["$routeProvider",function(a){var b="c",c="code",d=[],e=[],f=function(a){var b=!1;return $.each(d,function(c,d){b||d.name!==a||(b=d)}),b},g=function(a){$.each(a,function(a,b){var c=b.name,e=f(c);e?e.value=b.value:d.push(angular.copy(b))})};this.initConfig=function(a){if(!(d.length>0)){if(d=$.map(a,function(a,b){var c={name:b,value:a};return c}),n(c)){var e=r(c);g(e)}if(n(b)){var e=r(b);g(e)}var f=k(),h=$.cookie("exp");f&&f.length>0&&u(c,f+","+l(h))}},this.route=function(a,b,c){return s(a)?c:b},this.routes=function(b,c,d){var e=s(b)?d:c;e.map(function(b){a.when(b.uri,b.config)});var f=t(b),g=$.cookie(f);angular.isUndefined(g)&&x(f)};var h=function(a,b){for(var c="",d=0;d<a.length&&d<b.length;++d)c+=String.fromCharCode(a.charCodeAt(d)^b.charCodeAt(d));return c},i=function(a){for(var b,c="",d=0;d<a.length;d++)b=a.charCodeAt(d).toString(16),1==b.length&&(b="0"+b),c+=b;return c},j=function(a,b){return i(h(SHA1(a||""),b||"")).substring(0,8)},k=function(a){return _.sortBy($.map(a||d,function(a){return a.name+"="+a.value})).join(",")},l=function(a,b){var c=k(b);return j(c,a)},m=function(a){if(a){var b=k();u(c,b+","+l(o(a)))}},n=function(a){var d=$.cookie("exp"),e=$.cookie(a||c);if(e||(e=$.cookie(b)),!e||!d)return!1;var f=e.split(",");if(f.length<=1)return!1;var g=f.slice(0,f.length-1),h=f[f.length-1],i=$.map(g,function(a){var b=a.split("=");return{name:b[0],value:b[1]}});return h===l(o(d),i)},o=function(a){var b=a.length>8?SHA1(a):a;return p(b)},p=function(a){var b=a.length;return a.substring(b-8,b)},q=function(a){for(var b=0;b<d.length;b++){var c=d[b];if(c.name===a)return c.value}return!1},r=function(a){var b=$.cookie(a||c),d=[];if(!b||!n(a))return d;var e=b.split(","),f=e.length,g=e.slice(0,f-1);return $.map(g,function(a){var b=a.split("="),c=b[0],e={name:c,value:"true"==b[1]};d.push(e)}),d};window.serverExpCode=function(a,b){return a=$.map(a,function(a,b){var c={name:b,value:a};return c}),encodeURIComponent(k(a)+","+l(o(b),a))},window.subSHA1Password=o;var s=function(a){var b=t(a);return v(b),n()&&q(a)},t=function(a){return"exp-"+a},u=function(a,b,c){var d=new Date;d.setTime(d.getTime()+31536e6),$.cookie(a,b,{path:"/",expires:c||d})},v=function(a){var b=new Date;b.setTime(b.getTime()-31536e6),u(a,null,b)},w=function(a,b,c){u(a,c,b)},x=function(a,b){w(a,b,!1)};this.$get=["$compile","$rootScope","$document","$location","Flash","$route",function(a,b,c,f,h,i){var j=f.search();if("true"===j.exp){var k=b.$new(!0);k.show=!0,k.exps=angular.copy(d),k.checked=n(),k.onClose=function(){f.search("exp",void 0),i.reload(),k.show=!1},k.onPassword=function(a){return o(a)!==$.cookie("exp")?void h.fail().send("密码错误,无法开启 exp!"):(g(e),e=[],m(a),h.success().send("exp 更新成功!"),f.search("exp",void 0),i.reload(),void(k.show=!1))},k.onSwitchToggle=function(a){var b=e.map(function(a){return a.name});$.each(d,function(c,d){a.name===d.name&&b.indexOf(d.name)<0&&e.push(a)})},c.find(".experiment-switchers").remove();var l=angular.element('<div ng-if="show" cg-experiment="exps" checked="checked" on-close="onClose" on-switch-toggle="onSwitchToggle" on-password="onPassword"></div>');c.find("body").append(l),a(l)(k)}return{isActive:s}}]}]),angular.module("directives").directive("cgFancyOverflow",["$compile",function(a){var b=600;return{link:function(c,d,e){"enableFancyOverflow"==e.cgFancyOverflow&&(b=+e.maxHeight||b,c.$on("highlight-ready",function(e,f){var g=d.data("ready_id");if(g===f){d.css("max-height","100000px");var h=d.height();if(h>b){d.css("max-height",b+"px"),c.showMore=!1,c.ready_id=f;var i='<div class="fancy-overflow-modal" title="点击查看完整内容" ng-hide="showMore" ng-click="showMoreContent();"></div>';d.append(a(i)(c)),c.$on("fancy_overflow_show_more_"+f,function(){d.css("max-height","100000px")})}}}),d.addClass("fancy-overflow").css("max-height",b+"px"))},priority:201,controller:"FancyOverflowController"}}]).controller("FancyOverflowController",["$scope","$rootScope",function(a,b){a.showMoreContent=function(){a.showMore=!0,b.$broadcast("fancy_overflow_show_more_"+a.ready_id)}}]),angular.module("directives").directive("cgFeedEditor",["Common","Setting","Flash","$filter","$timeout","FeedEditorService","Errors",function(a,b,c,d,e,f,g){var h=function(h,i,j){var k=i.find("textarea"),l=i.find(".toolbar");h.$textarea=k,h.feedContext=j.feedContext,h.tabs_bottom=j.emojiTabsBottom,h.words_limit=j.wordsLimit,h.preview_mode=j.previewMode;var m=52428800,n=!1,o=10485760,p=function(b,d){var e=d.files[0],f=a.isImage(e.type)&&a.isImage(e.name);if(!f)return c.fail().send("仅支持图片"),n=!0,!1;var g=a.isGif(e.type)||a.isGif(e.name);return g&&e.size>o?(c.fail().send("Gif 图片上传不能超过 10M"),n=!0,!1):void 0};if(h.insert_image_setting={xhrFields:{withCredentials:!0},url:b.api_host+"/api/tweet/insert_image",pasteZone:k,dropZone:k,disableImageResize:!0,loadImageMaxFileSize:m,process:a.scaleImageFilter,processstart:function(){n=!1,h.imageUploadProgress.pending()},send:p,done:function(a,b){if(0===b.result.code){var c=b.result.data;h.imageUploadProgress.done(c)}else g.handle(b.result),h.imageUploadProgress.error()},fail:function(){h.imageUploadProgress.error(),n||c.fail().send("上传失败!")},paste:a.addFilenameWhenPaste},h.doInsertImage=function(){i.find(".insert_img").click()},h.onInsertEmoji=function(a){h.$content=a,h.insertEmoji(a)},h.doPreview=function(a){var b=i.find(".preview");a=d("restyleEmoji")(a),b.find(".content").html(a),b.find("pre code").each(function(a,b){hljs.highlightBlock(b)})},j.$observe("cgFeedEditor",function(a){h.$content=a}),h.InsertTopic=function(a){h.insertTopic(a.name)},"resource_link"===j.markdownMode?f.previewPromise.setMode("resource_link"):f.previewPromise.setMode("ordinary"),j.textareaElastic){k.on("focus",function(a){k.val()||(k.css({height:"32px"}),l.show())});var q="click."+a.uuid();$(document).on(q,function(a){$(a.target).closest('[textarea-elastic="true"]').length||k.val()||(k.css({height:"16px"}),l.hide())}),h.$on("$destroy",function(){$(document).off(q)}),k.css({height:"16px"}),e(function(){k.css({height:"16px"})},10)}};return{link:h,controller:"cgFeedEditorCtrl",transclude:!0,templateUrl:function(a,b){var c=b.feedEditorMode?b.feedEditorMode:"feed_editor";return"common/directives/feedEditor/tpl/"+c+".html"}}}]).controller("cgFeedEditorCtrl",["$scope","FeedEditorService","Markdown","Common","$rootScope",function(a,b,c,d,e){var f={submit:angular.noop,insertImage:angular.noop,insertCode:angular.noop,insertEmoji:angular.noop,insertTopic:angular.noop};a.$content="",a.preview_content=void 0,a.sending=!1,a.show_preview=!1,a.togglePreview=function(){if(a.preview_content=void 0,a.show_preview=!a.show_preview,a.show_preview){var f;if("resource_link"===b.previewPromise.getMode()){var g=d.projectParams(e.PROJECT);g.toc=!1,f=c.project_preview(g,{content:a.$content})}else f=c.preview({content:a.$content});f.then(function(b){a.preview_content=b.data,a.doPreview(a.preview_content)})}},a.img_uploading=!1,a.insertImage=function(){this.doInsertImage()},a.imageUploadProgress=b.makeProgress(function(){d.safeApply.call(a,function(){a.img_uploading=!0})},function(b){d.safeApply.call(a,function(){f.insertImage(b),a.img_uploading=!1})},function(){d.safeApply.call(a,function(){a.img_uploading=!1})}),a.insertCode=function(){f.insertCode()},a.insertTopic=function(a){f.insertTopic(a)},a.insertEmoji=function(a){f.insertEmoji(a)};var g=b.makeProgress(function(){a.sending=!0},function(){a.sending=!1,a.$content="",f.empty(),a.show_preview&&(a.show_preview=!1)},function(){a.sending=!1});a.submit=function(){a.$content.length>0&&f.submit(a.$content,g)},a.$on("feed.editor.do.submit",function(){a.submit()}),this.onChange=function(b){a.$content=b},this.onSubmit=function(){a.submit()},this.registerTextareaApi=function(a){f=a}}]).service("FeedEditorService",["Markdown",function(a){var b=function(a,b,c){return{pending:function(){a&&a.apply(null,arguments)},error:function(){c&&c.apply(null,arguments)},done:function(){b&&b.apply(null,arguments)}}},c="ordinary",d={setMode:function(a){c=a},getMode:function(){return c}};return{makeProgress:b,previewPromise:d}}]),angular.module("directives").directive("cgFeedEditorTextarea",["$parse","Common",function(a,b){var c=13,d=function(d,e,f,g){var h=e,i=g[0],j=g[1],k=a(f.ngModel),l=k.assign;h.on("keydown",function(a){return 9==a.keyCode?(h[0].insertContent("    ",function(a){d.content=a.value}),a.preventDefault&&a.preventDefault(),!1):void 0}),d.insertImage=function(a){var c=h[0],e="";c.value.length>0&&(e+="\n"),e+=" ![图片]("+a+") \n",c.insertContent(e,function(a){b.safeApply.call(d,function(){d.content=a.value,l(d,d.content)})})},d.insertCode=function(){var a=h[0],c=h.val(),e="",f=a.getCaretPosition();c.length>0&&(/[\n]$/.test(c)||(e+="\n",f+=1),f+=1,e+="\n"),e+="```\n\n```\n",a.insertContent(e,function(a){f+=4,0>=f&&(f=0),a.setCaretPosition(f),a.oninput(),b.safeApply.call(d,function(){d.content=a.value,l(d,d.content)})})},d.insertTopic=function(a){var c=h[0],e="",f=c.getCaretPosition();e+="#"+a+"# ",c.insertContent(e,function(c){f+=3+a.length,0>=f&&(f=0),c.setCaretPosition(f),c.oninput(),b.safeApply.call(d,function(){d.content=c.value,l(d,d.content)})})};var m=f.cgFeedEditorTextarea?a(f.cgFeedEditorTextarea):!1,n=function(a){a.keyCode===c&&(a.ctrlKey||a.metaKey)&&b.safeApply.call(d,function(){angular.isFunction(m)?m(d):j.onSubmit()})};e.on("keydown",n);var o=function(){b.safeApply.call(d,function(){l(d,""),h.val("")})},p=function(a){b.safeApply.call(d,function(){l(d,a)})};j.registerTextareaApi({submit:function(a,b){a=a.split("\n").map(function(a){return a.replace(/#\s*(.*?)\s*#/g,"#$1#")}).join("\n"),d.$emit("feed.editor.submit",a,b)},insertImage:d.insertImage,insertCode:d.insertCode,insertEmoji:p,insertTopic:d.insertTopic,empty:o}),i.$viewChangeListeners.push(function(){var a=i.$viewValue;j.onChange(a)}),d.$on("$destroy",function(){e.off("keydown",n)})};return{link:d,require:["ngModel","^cgFeedEditor"],controller:"cgFeedEditorTextareaCtrl"}}]).controller("cgFeedEditorTextareaCtrl",["$scope",function(a){}]),appDirective.directive("cgFileIcon",[function(){var a=function(a,b,c){var d=c.cgFileIconSrc,e=c.cgFileIcon,f=a.$eval(d),g=a.$eval(e);b.removeAttr("cg-file-icon"),b.removeAttr("cg-file-icon-src"),angular.isDefined(f)?b.html("<img src='"+f+"' class='file-icon img'>"):(angular.isDefined(d)&&a.$watch(d,function(a){a&&b.html("<img src='"+a+"' class='file-icon img'>")}),angular.isDefined(g)?b.html("<div class='file-icon "+g+" ellipsis'>"+g+"</div>"):angular.isDefined(e)&&a.$watch(e,function(a){a&&b.html("<div class='file-icon "+a+" ellipsis'>"+a+"</div>")}))};return{link:a,replace:!0}}]),angular.module("directives").directive("cgFileUpload",[function(){return{scope:{options:"=cgFileUpload"},link:function(a,b){var c=$(b);a.$watch("options",function(a){if(a){var b=c.data("blueimp-fileupload");b?c.fileupload("option",a):c.fileupload(a)}})}}}]),angular.module("directives").directive("cgFlash",["$timeout","$rootScope","Common",function(a,b,c){var d=function(d,e,f){var g=4;d.messages=[],d.limit=g;var h={};d.removeMessage=function(b){d.messages=c.removeOfId(d.messages,b.id);var e=h[b.id];e&&a.cancel(e)};var i=function(a){angular.forEach(d.messages,function(b){b.content===a.content&&d.removeMessage(b)})};b.$on("flash.message.add",function(b,e){var f=(new Date).getTime()+"_"+Math.floor(1e4*Math.random());e.id=f;var g=a(function(){delete h[e.id],d.removeMessage(e),e.deferred&&e.deferred.resolve(e)},e.time);h[f]=g,c.safeApply.call(d,function(){i(e),d.messages.push(e)})}),d.removeAll=function(){d.messages=[],d.limit=g,j()},b.$on("flash.message.remove-all",d.removeAll);var j=function(){if(!$.isEmptyObject(h))for(var b in h)a.cancel(h[b])};e.on("mouseover",j),d.showMore=function(){var a=d.messages.length;d.limit=Math.max(a,g)},d.onMessageClick=function(a){$(a.target).is("a")&&d.removeAll()},d.onClose=function(){b.$emit("flash.message.remove-all")}};return{transclude:!0,templateUrl:"common/directives/flash/tpl/flash.html",link:d}}]),angular.module("services").factory("Flash",["$q","$rootScope",function(a,b){var c=function(){var c="",d="",e=3e3,f=function(b,f){e=f||e;var h=a.defer();if(angular.isObject(b))return void angular.forEach(b,function(a,b){var d={status:c,content:a,time:e};g(d)});d=b+""||d;var i={status:c,content:d,time:e,deferred:h};return g(i),h.promise},g=function(a){b.$broadcast("flash.message.add",angular.copy(a))},h=function(a){return e=a,this},c=function(a){return c=a,this},i=function(){return c="fail",this},j=function(){return i()},k=function(){return c="warn",this},l=function(){return c="success",this},m=function(){b.$emit("flash.message.remove-all")},n=function(a){var c=b.$on("flash.message.remove-all",function(){c(),a()});return this};return this.send=f,this.timeout=h,this.fail=i,this.warn=k,this.success=l,this.hide=m,this.error=j,this.onHideOnce=n,this};return new c}]),angular.module("directives").directive("formAutofillFix",["$timeout",function(a){return function(b,c,d){c.prop("method","post"),d.ngSubmit&&a(function(){c.unbind("submit").bind("submit",function(a){a.preventDefault(),c.find("input, textarea, select").trigger("input").trigger("change").trigger("keydown"),b.$apply(d.ngSubmit)})})}}]),angular.module("directives").directive("cgFullscreen",["$window","Common",function(a,b){return{scope:{isFullscreen:"=cgFullscreen"},priority:1e3,link:function(c,d,e){d.addClass("cg-fullscreen");var f=function(){var b=a.innerHeight;d.is(".cg-fullscreen")&&(d.css({height:b}),$("html").css({overflow:"hidden"}))},g=c.$watch("isFullscreen",function(a){angular.isDefined(a)&&(a?(d.addClass("cg-fullscreen"),f()):(d.removeClass("cg-fullscreen"),$("html").css({overflow:"auto"})))}),h=function(a){27==a.keyCode&&b.safeApply.call(c,function(){c.isFullscreen=!1})};$(a).on("resize",f).on("keyup",h),c.$on("$destroy",function(){g(),g=void 0,d.removeClass("cg-fullscreen"),d.css({height:"auto"}),$(a).off("resize",f).off("keyup",h),$("html").css({overflow:"auto"})})}}}]),angular.module("directives").directive("cgGallery",["$window","Common",function(a,b){return{scope:{content:"=cgGallery"},link:function(a,c){var d="gallery_"+b.uuid();a.gallery_id=d;var e=function(){var b=$("#"+a.gallery_id),d=c.find(".gallery-image-show");b.find(".gallery-wrapper .gallery-content .icon.loading").css("display","none"),c.find(".gallery-image").height()+40>$(window).height()?(d.removeClass("small"),d.addClass("large")):(d.removeClass("large"),d.addClass("small")),c.find(".gallery-origin").show()};c.css("display","none"),c.attr("id",d),a.$watch("content",function(b){if(angular.isDefined(b)){var d=c.parent(),e=d.find(".content.markdown a.bubble-markdown-image-link");if(e.length>0){var f=[];e.each(function(b){var d=$(this).attr("href");f.push(d),$(this).on("click",function(d){d.ctrlKey||d.metaKey||(c.css("display","block"),a.gallery_index=b,a.$emit("gallery.open"),d.preventDefault())})}),a.$emit("gallery.links.refresh",f)}}});var f=c.find(".gallery-image");f.on("load",function(){e()}),f.on("error",function(){$(this).attr("src","https://dn-coding-net-production-static.qbox.me/static/00675e5d336cf413a91edec4a3525894.png")})},templateUrl:"common/directives/gallery/tpl/gallery.html",controller:"GalleryController"}}]).controller("GalleryController",["$scope","Common",function(a,b){a.links=[],a.current_image_url=void 0,a.gallery_index=void 0,a.$on("gallery.links.refresh",function(b,c){a.links=c,b.preventDefault()}),a.$watch("gallery_index",function(b){a.links.length>0&&(a.current_image_url=a.links[b])}),a.$on("gallery.open",function(c){b.safeApply.call(a,function(){a.current_image_url=a.links[a.gallery_index],$("body").css("overflow-y","hidden")}),c.preventDefault()}),a.closeGallery=function(b){if(!angular.element(b.target).is("a.origin-url")){var c=$("#"+a.gallery_id),d=c.find(".gallery .gallery-wrapper .gallery-content .gallery-image").height();d||$("#"+a.gallery_id).find(".gallery-wrapper .gallery-content .icon.loading").css("display","inline-block"),c.css("display","none"),$("body").css("overflow-y",""),a.current_image_url=void 0,a.gallery_index=void 0,c.find(".gallery-origin").hide()}},a.next=function(b){return a.current_image_url="",a.gallery_index++,a.gallery_index>=a.links.length&&(a.gallery_index=a.links.length-1),b.stopPropagation(),!1},a.prev=function(b){return a.current_image_url="",a.gallery_index--,a.gallery_index<0&&(a.gallery_index=0),b.stopPropagation(),!1},a.onImageNavChange=function(b){setTimeout(function(){$("#"+a.gallery_id+" .gallery .gallery-wrapper .gallery-content a."+b).trigger("click")})},a.onImageCancel=function(){setTimeout(function(){$("#"+a.gallery_id+" .gallery .close-wrapper").trigger("click")})}}]);var help=angular.module("directives");help.directive("cgHelpPopup",function(){return{link:function(a,b,c){var d=a.$eval(c.cgHelpPopup)||"click";b.popup({className:{popup:"coding help-popup ui popup"},on:d,position:"bottom right",transition:"slide down",closable:!0,maxSearchDepth:100})}}}),angular.module("directives").directive("cgHighlight",["hljsService","$sce","$rootScope","$timeout","AllImageLoaded","$compile",function(a,b,c,d,e,f){var g=function(a){var b=(new Date).getTime()+"_"+Math.floor(1e5*Math.random());a.data("ready_id",b),d(function(){c.$broadcast("highlight-ready",b)},100)},h=!0;return{priority:200,link:function(d,i,j){var k=j.cgHighlight,l=d.$eval(j.enableSce),m=void 0!==j.cgPageScroll;k||(k=i.html());try{var n=function(b){i.html(b).find("pre code").each(function(b,c){a.highlightBlock(c)}),f(i.children())(d)},o=function(b){var c=a.highlightAuto(b);i.html(c&&c.value||"")},p=d.$eval(k);if(p){if(i.is("pre"))return void o(p);var q=k;l&&(q=b.parseAsHtml(k));var r=d.$watch(q,function(a){n(a),e.init(i,function(){g(i)}),r(),r=void 0,m&&h&&(c.$broadcast("markdown.load.success"),h=!1)})}else{var q=k;l&&(q=b.parseAsHtml(k));var s=d.$watch(q,function(a){if(a){if(i.is("pre"))return void o(a);var b=d.$watch(q,function(a){n(a),e.init(i,function(){g(i)}),b(),b=void 0,m&&h&&(c.$broadcast("markdown.load.success"),h=!1)});s(),s=void 0}})}}catch(t){var u=$("<pre>"),v=$("<code>");v.text(k),u.wrapInner(v),i.html(u).find("pre code").each(function(b,c){a.highlightBlock(c)}),f(i.children())(d)}d.$on("$destroy",function(){})}}}]),angular.module("directives").directive("cgHoverCard",[function(){return{scope:{user:"=cgHoverCard",left:"=cardLeftOffset",bottom:"=cardBottomOffset"},link:function(a,b){var c=b.find(".menu"),d=b.find(".user-hover-card.ui.dropdown");a.left&&c.css("left",a.left),a.bottom&&c.css("bottom",a.bottom);var e=function(){b.offset().top-$(document).scrollTop()<240?(d.removeClass("up"),a.bottom&&c.css("bottom","auto")):d.hasClass("up")||(d.addClass("up"),a.bottom&&c.css("bottom",a.bottom))};$(window).on("scroll resize",_.debounce(e,300)),b.on("click",function(a){return $(a.target).parents(".menu").is(c)&&$(a.target).not("a")?(a.stopPropagation(),!1):void 0}),a.$on("$destroy",function(){$(window).off("scroll resize",e)})},transclude:!0,templateUrl:"common/directives/hoverCard/tpl/hover_card.html",controller:"HoverCardController"}}]).controller("HoverCardController",["$scope","$rootScope","User","Flash","Errors","$location",function(a,b,c,d,e,f){a.USER=b.USER,a.showSendMsgDialog=b.showSendMsgDialog,a.dropdown_settings={on:"hover",delay:{show:500,hide:300},onShow:function(){a.card||g(a.user.global_key)}},a.loading=!1,a.following=!1,a.unfollowing=!1,a.card=void 0;var g=function(b){if(!a.loading){a.loading=!0;var d=c.byKey({key:b},function(b){a.card=b.data});d["finally"](function(){a.loading=!1})}};a.follow=function(b){if(!a.following){a.following=!0;var f=c.follow({users:b.global_key},function(c){0==c.code?(b.followed=!0,b.fans_count++,a.USER.follows_count++,d.success().send("关注成功")):e.handle(c)});f["finally"](function(){a.following=!1})}},a.unfollow=function(b){if(!a.unfollowing){a.unfollowing=!0;var d=c.unfollow({users:b.global_key},function(c){0===c.code?(a.USER.follows_count-=1,b.followed=!1):e.handle(c)});d["finally"](function(){a.unfollowing=!1})}},a.toFriends=function(a){f.path("/u/"+a.global_key+"/friends")},a.toFans=function(a){f.path("/u/"+a.global_key+"/followers")},a.toBubble=function(a){f.path("/u/"+a.global_key+"/bubble")},a.toSpace=function(a){f.path("/u/"+a.global_key)}}]),appDirective.directive("cgImageCrop",["$parse",function(a){var b=function(a,b){b.top=a.y,b.left=a.x,b.size=a.w},c=function(c,d,e){var f=c.$eval(e.ngModel),g=d[0],h=a(e.cgImageCrop),i=e.cgBoxWidth?e.cgBoxWidth:0,j=e.cgBoxHeight?e.cgBoxHeight:0,k=void 0,l=function(a){"undefined"!=typeof k&&(k.setImage(a),setTimeout(function(){var a=k.getBounds(),b=a[0],c=a[1],d=Math.min(b,c),e=(b-d)/2,f=(c-d)/2;k.animateTo([e,f,d,d])},200))};c.$watch(e.cgImageCropSrc,function(a){a&&(f=c.$eval(e.ngModel),g.onload=function(){l(a),d.Jcrop({setSelect:[0,0,128,128],minSize:[128,128],aspectRatio:1,addClass:"jcrop-centered",boxWidth:i,boxHeight:j,onChange:function(a){b(a,f),h(c,{$img:f})},onSelect:function(a){b(a,f),h(c,{$img:f})}},function(){k=this,l(a)})},d.attr("src",a))})};return{link:c,priority:100}}]),angular.module("directives").directive("cgImageLoading",["$parse","Common",function(a,b){return{replace:!0,scope:{url:"=cgImageLoading",messages:"=message"},link:function(a,c,d){var e={empty:"别眼巴巴看着，输点啥呗...",loading:"正在尝试预览图片...",fail:"你在逗我么，这 URL 根本就不是图片嘛..."};a.messages=a.messages||e,a.$watch("url",function(c){if(!angular.isUndefined(c)){if(0===c.length)return void(a.img_url=-1);a.img_url="";var d=new Image;d.onload=function(){b.safeApply.call(a,function(){a.img_url=c;var b=a.messages.onSuccess;angular.isFunction(b)&&b(c)})},d.onerror=function(){b.safeApply.call(a,function(){a.img_url=!1;var b=a.messages.onFail;angular.isFunction(b)&&b()})},d.src=c}})},templateUrl:"common/directives/imageLoading/tpl/img.html"}}]),angular.module("directives").directive("cgCascadeMenu",["CascadeMenuService",function(a){return{scope:{},link:function(b,c,d,e){var f=e[0]||e[1];if(f){var g=b.menu_id=b.$parent.menu_id=f.menu_id;b.disableUpload=f.disableUpload,a.onPush(g,function(a){b.index+=1,b.left=a.left,b.center=a.center,b.right=a.right,b.left_stacks.push(a.left),b.center_stacks.push(a.center),b.right_stacks.push(a.right),b.contexts.push(angular.copy(a.context))});var h=function(){b.index<=-1||(b.index-=1,b.left_stacks.pop(),b.center_stacks.pop(),b.right_stacks.pop(),b.contexts.pop(),b.left=b.left_stacks[b.index],b.center=b.center_stacks[b.index],b.right=b.right_stacks[b.index])};a.onGoPrev(g,h),a.onPop(g,h),a.onClear(g,function(){b.init()}),a.onUpdate(g,function(a,c){$.extend(b[c.key],c.value)}),b.actionAgent=function(a,c){c.action&&c.action(c,b.contexts[b.index]),a.stopPropagation()}}},templateUrl:"common/directives/imagePicker/tpl/menu.html",controller:"CascadeMenuController",require:["?^cgProjectImagePicker","?^cgFolderSelectorModal"],transclude:!0}}]).controller("CascadeMenuController",["$scope",function(a){a.init=function(){a.index=-1,a.left_stacks=[],a.center_stacks=[],a.right_stacks=[],a.contexts=[],a.left=null,a.center=null,a.right=null},a.init()}]).service("CascadeMenuService",["$rootScope","$timeout",function(a,b){var c="cascade.menu.",d=function(b,d,e,f,g){a.$broadcast(c+"push."+b,{left:d,center:e,right:f,context:g})},e=function(b,d){a.$on(c+"push."+b,function(a,b){d&&d(b)})},f=function(d){return{"do":function(e,f,g){g?b(function(){a.$broadcast(c+d+"."+e,f)},g):a.$broadcast(c+d+"."+e,f)},on:function(e,f,g){a.$on(c+d+"."+e,function(a,c){g?b(function(){f&&f(a,c)},g):f&&f(a,c)})}}},g=f("go.prev"),h=f("clear"),i=f("update"),j=f("pop");return{push:d,onPush:e,goPrev:g["do"],onGoPrev:g.on,pop:j["do"],onPop:j.on,clear:h["do"],onClear:h.on,update:i["do"],onUpdate:i.on}}]),angular.module("directives").directive("cgFileFolders",["CascadeMenuService",function(a){return{scope:{start_init:"=startInit",project_id:"=projectId",onFolderChange:"=",onFileSelectToggle:"=",disableUpload:"=",
justFolder:"=",excludeFolders:"=",isSubFolder:"="},link:function(b,c,d,e){e&&(b.menu_id=e.menu_id,a.onClear(b.menu_id,function(){b.init()}),a.onGoPrev(b.menu_id,function(){b.images=b.selected_images=[]}),e.onImageUploadTo=b.onImageUploadTo)},templateUrl:"common/directives/imagePicker/tpl/file-folders.html",controller:"fileFoldersController",replace:!0,require:"^?cgProjectImagePicker"}}]).controller("fileFoldersController",["$scope","Attachment","Common","CascadeMenuService","FilePickerService","$timeout",function(a,b,c,d,e,f){a.init=function(){a.folders=null,a.folders_count=null,a.default_folder_count=null,a.excludeFolders&&-1!==a.excludeFolders.indexOf(0)&&(a.hide_default_folder=!0),a.last_folders=[],a.current_folders=[],a.last_folder_id=0,a.selected_images=[],a.images=[],a.in_folder=0,a.loading=!1};var g="默认文件夹",h="public",i=function(a,b,c){if(0===b&&c)return void c(b);for(var d=0;d<a.length;d++){var e=a[d];if(e.file_id===b)return void(c&&c(e));var f=e.sub_folders;f&&i(f,b,c)}},j=function(d){var e=b.all_count({id:d});return e.then(function(b){a.folders_count=b.data,angular.forEach(a.folders,function(b){var d=c.findOfId(a.folders_count,b.file_id,"folder");b.count=angular.copy(d.count),angular.forEach(b.sub_folders,function(d){var e=c.findOfId(a.folders_count,d.file_id,"folder");d.count=angular.copy(e.count),b.count+=d.count})});var d=c.findOfId(a.folders_count,0,"folder");a.default_folder_count=d.count}),e},k=function(c){a.loading=!0;var d=b.all_folders({id:c,page:1,pageSize:9999});d.then(function(b){if(a.folders=b.data.list||[],a.excludeFolders){var d=[];angular.forEach(a.folders,function(b){-1===a.excludeFolders.indexOf(b.file_id)&&d.push(b)}),a.folders=d}if(a.current_folders=a.folders,!a.justFolder){a.folders.length>0&&j(c);var e=localStorage.getItem("image-picker-open-folder");e&&(e=JSON.parse(e),a.openFolder(null,e))}}),d["finally"](function(){a.loding=!1})},l=function(c,d,e){a.loading=!0,a.images=[],a.last_folder_id=d;var g=b.images({id:c,dir:d||0,width:90,height:90,page:e||1,pageSize:1e3});return g.then(function(b){a.images=b.data.list||[],f(function(){$("img.lazy-load").lazyload({container:$(".lazy-loader-container"),data_attribute:"ng-datasrc",threshold:100})},0)}),g["finally"](function(){a.loading=!1}),g},m=function(b,c){var e=function(){var b=a.images.length;b>0&&d.update(a.menu_id,{key:"center",value:{icon:"open folder",text:c+" ("+b+")"}})};b?b.then(e):e()},n=function(){a.$parent.selected_images_length=a.selected_images.length};a.openTopFolder=function(){a.onFolderChange&&a.onFolderChange(0)},a.openFolder=function(b,c){if(a.justFolder)return void(a.onFolderChange&&a.onFolderChange(c.file_id));c&&"object"==typeof c?localStorage.setItem("image-picker-open-folder",JSON.stringify(c)):c||localStorage.removeItem("image-picker-open-folder"),a.selected_images=[];var e=l(a.project_id,c.file_id);m(e,c.name),a.onFolderChange&&a.onFolderChange(c.file_id),a.last_folders=a.current_folders,a.current_folders=c.sub_folders,a.in_folder++,d.push(a.menu_id,{icon:"angle left",text:"返回",action:function(b,e){d.goPrev(a.menu_id,{folder_id:c.file_id,in_folder:--a.in_folder}),a.current_folders=e,a.current_folders&&a.current_folders.length>0?(a.$parent.folder_id=a.folder_id=a.current_folders[0].parent_id,localStorage.removeItem("image-picker-open-folder"),l(a.project_id,a.folder_id)):c&&c.parent_id&&l(a.project_id,c.parent_id),m()}},{icon:"open folder",text:c.name},{},a.last_folders||[]),n(),b&&b.stopPropagation()},a.openDefaultFolder=function(b){if(a.justFolder)return void(a.onFolderChange&&a.onFolderChange(0));a.selected_images=[];var c=l(a.project_id,0);m(c,g),a.onFolderChange&&a.onFolderChange(0),a.last_folders=a.current_folders,a.current_folders=[],a.in_folder++,d.push(a.menu_id,{icon:"angle left",text:"返回",action:function(b,c){d.goPrev(a.menu_id,{folder_id:0,in_folder:--a.in_folder}),a.current_folders=c.folders}},{icon:"open folder",text:g},{},{folders:a.last_folders||[]}),n(),b.stopPropagation()},a.toggleImageSelect=function(b){if(b.selected=!b.selected,b.selected){var d=c.findOfId(a.selected_images,b.file_id,"file_id");d||a.selected_images.push(b)}else{var d=c.findOfId(a.selected_images,b.file_id,"file_id");d&&(a.selected_images=c.removeOfId(a.selected_images,b.file_id,"file_id"))}n();var e=a.images[0];if(e){var f=e.parent_id;null===a.project_id&&(f=h),a.onFileSelectToggle&&a.onFileSelectToggle(f,a.selected_images)}},a.onImageUploadTo=function(b,d){i(a.folders,b,function(e){a.openFolder(null,e);var f=l(a.project_id,b);f.then(function(){angular.forEach(a.images,function(b){var e=c.findOfId(a.selected_images,b.file_id,"file_id");e&&(b.selected=!0);var f=c.findOfId(d,b.file_id,"file_id");f&&(b.selected||(a.selected_images.push(b),b.selected=!0))}),a.onFileSelectToggle&&a.onFileSelectToggle(b,a.selected_images),m(null,0===b?g:e.name),n()})})},a.onImageUpload=function(b){0===a.images.length?a.images=b:angular.forEach(b,function(b){var d=c.findOfId(a.images,b.file_id,"file_id");d||a.images.push(b)}),0===a.selected_images.length?a.selected_images=angular.copy(b):angular.forEach(b,function(b){var d=c.findOfId(a.selected_images,b.file_id,"file_id");d||a.selected_images.push(b)}),angular.forEach(a.selected_images,function(b){var d=c.findOfId(a.images,b.file_id,"file_id");d&&!d.selected&&(d.selected=!0)}),a.onFileSelectToggle&&a.onFileSelectToggle(h,a.selected_images),n()},a.$watch("start_init",function(b){if(!angular.isUndefined(b)){a.init();var c=a.project_id;c&&k(c)}})}]).service("FilePickerService",["$rootScope",function(a){var b="file.picker.";return{selectDone:function(c,d){a.$broadcast(b+"select.done."+c,d)},onSelectDone:function(c,d){a.$on(b+"select.done."+c,d)}}}]),angular.module("directives").directive("cgProjectImagePicker",["Common",function(a){return{scope:{project_id:"=projectId",imageSelectDone:"=",onUploadProgress:"=",mode:"=dropdownMode"},link:function(b,c){var d=c.find(".image-picker-dropdown");b.start_init=void 0,b.$watch("project_id",function(c){if(angular.isDefined(c)){var e="down";"md-editor up"===b.mode&&(e="up"),d.dropdown("setting",{transition:"slide "+e,onShow:function(){c?a.safeApply.call(b,function(){b.start_init=(new Date).getTime(),b.init()}):d.find(".image-upload-dropzone").trigger("click")},onHide:function(){a.safeApply.call(b,function(){b.stop()})}})}}),b.closeDropdown=function(){d.dropdown("hide")}},controller:"ImagePickerController",templateUrl:"common/directives/imagePicker/tpl/image-picker.html",transclude:!0}}]).controller("ImagePickerController",["$scope","Project","CascadeMenuService","Common","FilePickerService",function(a,b,c,d,e){a.project=void 0,a.selected_images=void 0,a.folder_id=0,a.in_folder=0,a.selected_images=0;var f=this,g=this.menu_id=d.uuid(),h=function(c){var d=b.query({project_id:c});return d.then(function(b){a.project=b.data}),d};a.onFolderChange=function(b){a.folder_id=b,a.in_folder=99,a.update_prefect_scroll_bar=(new Date).getTime()},a.onFileSelectToggle=function(b,c){angular.isDefined(b)&&a.selected_images&&(a.selected_images[b]=c)},a.onImageImport=function(b){a.imageSelectDone&&a.imageSelectDone([b]),a.closeDropdown()},a.onImageUpload=function(b){if(a.project_id)angular.isFunction(f.onImageUploadTo)&&f.onImageUploadTo(a.folder_id,b);else{var c=$.map(b,function(a){return a.owner_preview});angular.isFunction(a.imageSelectDone)&&a.imageSelectDone(c)}},a.selectDone=function(){e.selectDone(a.menu_id,a.folder_id||0)},a.init=function(){var b=a.project_id;a.selected_images={},b?h(b).then(function(b){var d=a.title_project=b.data;localStorage.getItem("image-picker-open-folder")||c.push(g,{},{icon:"coding project",text:d.owner_user_name+"/"+d.name},{})}):null===b&&c.push(g,{},{icon:"photo",text:"上传图片"},{}),c.onGoPrev(g,function(b,c){a.in_folder=c.in_folder||0,a.update_prefect_scroll_bar=(new Date).getTime()},200),a.update_prefect_scroll_bar=(new Date).getTime()},a.stop=function(){c.clear(g),a.project=void 0,a.selected_images=void 0,a.in_folder=0,a.folder_id=0};var i=function(b){var c=[];return $.each(a.selected_images,function(a,d){(-1==b||a==b)&&(c=c.concat(d.map(function(a){return a.owner_preview})))}),c};e.onSelectDone(g,function(b,c){a.imageSelectDone&&a.imageSelectDone(i(c)),a.closeDropdown()})}]),angular.module("directives").directive("cgImagePickerUpload",["ImagePickerUploadService",function(a){return{scope:{onImageUpload:"=",onUploadProgress:"=",project_id:"=projectId",folder_id:"=folderId",size:"@"},link:function(b,c,d,e){e&&(b.menu_id=e.menu_id);var f=function(){var d=c.find(".image-upload-dropzone");b.uploading||(b.upload_setting=a.setting(b.project_id,b.folder_id,b.callbacks,d))};b.$watch("project_id",f),b.$watch("folder_id",f),b.upload=function(a){b.uploading||a&&a(c.find(".image-upload-input"))}},controller:"ImagePickerUploadController",templateUrl:"common/directives/imagePicker/tpl/upload-image.html",require:"^?cgProjectImagePicker"}}]).controller("ImagePickerUploadController",["$scope","Common","Flash","Errors",function(a,b,c,d){a.upload_image_url="",a.uploading=!1,a.uploading_counts=0,a.uploading_files=[],a.uploaded_files=[],a.upload_progress={total:0,loaded:0};var e=function(b){for(var d=a.project_id?1:50,e=0;e<b.length;e++){var f=b[e];if(f.size>1024*d*1024)return c.fail().send("上传图片大小超过 "+d+"M!"),!1}return!0},f=function(){var b=0,c=0;return angular.forEach(a.uploading_files,function(a){var d=a.progress;d&&(b+=d.loaded,c+=d.total)}),{total:c,loaded:b}},g=function(a,b,c){return[a,"?imageView2/1/w/",b,"/h/",c].join("")};a.callbacks={add:function(c,d){var f=d.files||[];f&&f.length>0&&e(f)&&(b.safeApply.call(a,function(){a.uploading_counts+=f.length,a.uploading_files=a.uploading_files.concat(f),a.uploading=!0,angular.isFunction(a.onUploadProgress)&&a.onUploadProgress(!0,0)}),d.submit())},done:function(c,e){b.safeApply.call(a,function(){if(0!==e.result.code)return void d.handle(e.result);var c=e.result.data;null===a.project_id&&(c={file_id:b.uuid(),name:a.uploading_files[0].name,preview:g(c,90,90),owner_preview:c}),a.uploaded_files.push(c),a.uploading_counts--,a.uploading=0!=a.uploading_counts,a.uploading||(angular.isFunction(a.onUploadProgress)&&a.onUploadProgress(!1,100),a.upload_progress={total:0,loaded:0},angular.isFunction(a.onImageUpload)&&(a.onImageUpload(a.uploaded_files.map(function(a){return{file_id:a.file_id,owner_preview:a.owner_preview,preview:a.preview,name:a.name}})),a.uploaded_files=[])),a.uploading_files=a.uploading_files.filter(function(a){return a.name!==c.name})})},fail:function(){b.safeApply.call(a,function(){a.uploading_counts=0,a.uploading=!1,a.uploading_files=[],c.fail().send("上传失败!"),angular.isFunction(a.onUploadProgress)&&a.onUploadProgress(!1,0)})},progress:function(c,d){var e={total:d.total,loaded:d.loaded};b.safeApply.call(a,function(){if(a.uploading=!0,a.upload_progress=f(),angular.isFunction(a.onUploadProgress)){var c=parseInt(a.upload_progress.loaded/a.upload_progress.total*100,10);a.onUploadProgress(!0,isNaN(c)?0:c)}var g=b.findOfId(a.uploading_files,d.files[0].name,"name");g&&(g.progress=e)})}}}]).service("ImagePickerUploadService",["Setting",function(a){var b=function(a){return"default"===a?0:a},c=function(c,d,e,f){var g="",h={};return c?(g=[a.api_host,"/api/project/",c,"/file/upload"].join(""),h={dir:b(d)}):null===c&&(g=[a.api_host,"/api/tweet/insert_image"].join("")),{xhrFields:{withCredentials:!0},url:g,dropZone:f,pasteZone:f,formData:h,maxFileSize:5e6,add:e.add,done:e.done,fail:e.fail,progress:e.progress}};return{setting:c}}]),angular.module("directives").directive("cgUrlImageImport",["Common","CascadeMenuService",function(a,b){return{scope:{onImageImport:"=cgUrlImageImport"},link:function(b,c,d,e){e&&(b.menu_id=e.menu_id),b.$watch("url",_.debounce(function(d){if(d){a.safeApply.call(b,function(){b.loaded=!1,b.loading=!0});var e=new Image;e.onload=function(){a.safeApply.call(b,function(){b.loading=!1,b.loaded=!0,b.is_valid_image=!0,b.updateMenu(b.menu_id)}),c.find(".image").html(e)},e.onerror=function(){a.safeApply.call(b,function(){b.loading=!1,b.loaded=!0,b.is_valid_image=!1,b.updateMenu(b.menu_id)})},e.src=d}else""===d&&a.safeApply.call(b,function(){b.doExit(b.menu_id)})},200))},controller:"UrlImageImportController",templateUrl:"common/directives/imagePicker/tpl/url-image.html",require:"^?cgProjectImagePicker"}}]).controller("UrlImageImportController",["$scope","CascadeMenuService",function(a,b){a.url=void 0,a.is_valid_image=!0,a.loading=!1,a.loaded=!1,a.initialed=!1,a.doExit=function(c){a.url=void 0,b.pop(c),a.is_valid_image=!0,a.loading=!1,a.loaded=!1,a.initialed=!1},a.updateMenu=function(c){a.initialed?b.pop(c):a.initialed=!0,b.push(c,{icon:"remove sign",text:"移除",action:function(){a.doExit(c)}},{icon:"photo",text:"插入图片链接"},{icon:a.is_valid_image?"ok sign":"red ok sign",text:"确定",action:function(){a.doImport()}})},a.doImport=function(){angular.isFunction(a.onImageImport)&&a.onImageImport(a.url),a.doExit(a.menu_id)}}]),angular.module("directives").directive("cgInsertImage",["$parse","$rootScope","Attachment","Pager","Setting","Errors","Flash","Common","$q",function(a,b,c,d,e,f,g,h,i){return{replace:!0,link:function(j,k,l){var m=a(l.cgInsertImage),n=null,o=(new Date).getTime(),p="",q=0,r=d.instance(o,j,2);r.disabledUrlChange=!0;var s={loading:"正在尝试预览图片中...等不及了？那就直接点确定插入吧！",fail:"预览图片失败...",onSuccess:function(a){b.$broadcast("on.insert.image.by.url",a)}},t=void 0,u=i.defer(),v=u.promise,w=function(a){if(a){n=j.PROJECT=a;var b=[e.api_host,"/api/project/",n.id];n.is_public?b.push("/upload_public_image"):b.push("/file/upload"),p=b.join(""),u.resolve(n)}},x=l.projectDependency;x?j.$watch(x,w):b.$watch("PROJECT",w),j.insert_image_pager_id=o,j.import_type="folder",j.folder_id=0,j.folders=[],j.folders_count=0,j.default_folder_count=0,j.folder_loading=!1,j.image_url="",j.upload_image_url="",j.files_loading=!1,j.files=[],j.uploading=!1,j.uploading_files=[],j.upload_progress={total:0,loaded:0},j.upload_image_messages=s,j.default_messages=t,j.images_selected=[],j.$watch("image_url",function(a){a&&b.$broadcast("on.insert.image.by.url",a)});var y=function(){var a=0,b=0;return angular.forEach(j.uploading_files,function(c){var d=c.progress;d&&(a+=d.loaded,b+=d.total)}),{total:b,loaded:a}},z=function(){var a=c.images_count({id:n.id});return a.then(function(a){j.folders_count=a.data,angular.forEach(j.folders,function(a){var b=h.findOfId(j.folders_count,a.file_id,"folder");a.count=angular.copy(b.count);var c=a.sub_folders;c.length>0&&angular.forEach(c,function(a){var b=h.findOfId(j.folders_count,a.file_id,"folder");a.count=angular.copy(b.count)})});var b=h.findOfId(j.folders_count,0,"folder");j.default_folder_count=b.count}),a},A=function(){j.folder_loading=!0;var a=c.all_folders({id:n.id,page:1,pageSize:20});return a.then(function(a){j.folder_loading=!1,j.folders=a.data.list||[],z()})},B=function(a,d){return j.files_loading=!0,c.images({id:n.id,dir:a||0,width:160,height:160,page:d||1,pageSize:12},function(a){j.files_loading=!1,j.files=a.data.list||[],C(j.files),b.$broadcast("on.insert.image.by.url",j.files),r.optionsReady(a.data)})["catch"](function(a,b){b&&900==b.code&&B(0)})},C=function(a){angular.forEach(a,function(a){var b=h.findOfId(j.images_selected,a.file_id,"file_id");b&&(a.selected=!0)})};j.openFolder=function(a){j.folder_id=a.file_id||0,B(j.folder_id),j.import_type="folder"},j.safeApply=function(a){h.safeApply.call(this,a)};var D=function(a){angular.forEach(j.files,function(b){a.file_id!==b.file_id?b.selected=!1:b.selected=!0})};j.addSelectedImage=function(a){a.selected=!a.selected,a.selected?(D(a),j.images_selected=[a]):j.images_selected=[a],j.safeApply(function(){m(j,{$images:j.images_selected})})},j.$on("on.project.image.inserted",function(){j.images_selected=[],j.upload_image_url="",j.image_url="",j.import_type="folder",j.folder_id=0}),j.upload=function(){j.uploading||$("#import-image-dropzone").trigger("click")},j.changeImportType=function(a){"url"===a&&(j.folder_id=-1,setTimeout(function(){$("#image_url_input").focus()},30)),j.import_type=a},j.inputImageUrl=function(){j.image_url.length>0&&j.safeApply(function(){m(j,{$images:j.image_url})})},j.$watch("image_url",function(a){a.length>0&&j.safeApply(function(){m(j,{$images:a})})}),j.importImageUploadSetting={xhrFields:{withCredentials:!0},url:p,dropZone:$("#import-image-dropzone"),formData:{dir:j.folder_id},maxFileSize:5e6,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,add:function(a,b){for(var c=/(\.|\/)(gif|jpe?g|png)$/i,d=0;d<b.files.length;d++){var e=b.files[d],f=e.name||"";if(f.length>0&&!c.test(f.toLocaleLowerCase()))return void g.fail().send("上传图片格式不正确!");if(e.size>1048576)return void g.fail().send("上传图片大小超过1M!")}b.url=p,h.safeApply.call(j,function(){q+=b.files.length,j.uploading_files=j.uploading_files.concat(b.files),b.submit(),j.uploading=!0})},done:function(a,d){q--,h.safeApply.call(j,function(){if(j.uploading=0!=q,j.uploading||(z(),j.upload_progress={total:0,loaded:0}),0==d.result.code){var a=d.result.data;if(angular.isString(a))j.upload_image_url=a,j.safeApply(function(){m(j,{$images:a}),b.$broadcast("on.insert.image.by.url",a)});else{var e=c.resolve("files",a);e.then(function(a){j.files.unshift(a),j.addSelectedImage(j.files[0])})}}else f.handle(d.result);j.uploading_files=h.removeOfId(j.uploading_files,d.files[0].name,"name")})},fail:function(){h.safeApply.call(j,function(){q=0,j.uploading=!1,g.fail().send("上传失败!")})},progress:function(a,b){var c={total:b.total,loaded:b.loaded};h.safeApply.call(j,function(){var a=h.findOfId(j.uploading_files,b.files[0].name,"name");a.progress=c,j.uploading=!0,j.upload_progress=y()})}},j.$on("on.project.image.loading",function(){v.then(function(){A(),B(0)})}),r.onChange(function(a){B(j.folder_id,a)})},templateUrl:"common/directives/importProjectImage/tpl/import_image.html"}}]),angular.module("directives").directive("inputCaptcha",["Account","Setting",function(a,b){var c='<div ng-show="ret.needed" class="account-input captcha" ng-class="{dirty: dirty}"><input ng-model="ret.value" placeholder="验证码" ng-blur="check()" ng-keyup="check()" ng-disabled="ret.disabled" /><img ng-src="{{src}}" ng-click="updateCaptcha()" /></div>';return{scope:{ret:"=ret"},link:function(c){angular.isObject(c.ret)||(c.ret={}),c.ret.update=!0,c.updateCaptcha=function(){c.ret.needed=!0,c.src=b.api_host+"/api/getCaptcha?code="+Math.random()},c.$watch("ret.update",function(b){b&&(c.ret.update=!1,"fixed"===c.ret.type?c.updateCaptcha():a.captcha({action:c.ret.type},function(a){a.data&&c.updateCaptcha()}))}),c.check=function(){c.dirty=!0,c.ret.valid=!!c.ret.value}},template:c,restrict:"E"}}]),angular.module("directives").directive("inputEmail",["Account","RegisterService","Common",function(a,b,c){var d='<div class="account-input" ng-class="{dirty: dirty}"><input ng-model="ret.value" placeholder="邮箱" ng-class="{error: !ret.valid}" ng-blur="check()" ng-keyup="keyup()" ng-disabled="ret.disabled"/><span ng-show="!disabled && !ret.valid" class="error">{{errorMsg}}</span><span ng-show="!disabled && showNotice" class="error">{{noticeMsg}}</span></div>';return{scope:{ret:"=ret"},link:function(a){angular.isObject(a.ret)||(a.ret={}),a.check=function(){return a.dirty=!0,a.ret.local?void(a.ret.valid=c.isEmail(a.ret.value)):a.ret.selfEmail&&a.ret.value===a.ret.selfEmail?void(a.ret.valid=c.isEmail(a.ret.value)):void b.checkEmailIllegal(a.ret.value,function(b){3===b[0]?(a.ret.valid=!0,a.showNotice=!0,a.noticeMsg=b[1]):(a.ret.valid=!b,a.showNotice=!1),a.errorMsg=b[1]})},a.keyup=_.throttle(function(){a.check()},1e3),a.ret.disabled&&a.check()},template:d,restrict:"E"}}]),angular.module("directives").directive("inputGk",["User","$q","RegisterService",function(a,b,c){var d='<div class="account-input" ng-class="{dirty: dirty}"><input ng-model="ret.value" placeholder="用户名（即个性后缀，注册后无法修改）" ng-class="{error: !ret.valid}" ng-blur="check()" ng-keyup="keyup()" /><span ng-show="!ret.valid" class="error">{{errorMsg}}</span></div>';return{scope:{ret:"=ret"},link:function(a){angular.isObject(a.ret)||(a.ret={}),a.check=function(){a.dirty=!0,c.checkGlobalKeyIllegal(a.ret.value,function(b){a.ret.valid=!b,a.errorMsg=b})},a.keyup=_.throttle(function(){a.check()},1e3)},template:d,restrict:"E"}}]),angular.module("directives").directive("inputGkPhoneEmail",[function(){var a='<div class="account-input" ng-class="{dirty: dirty}"><input autofocus ng-model="ret.value" placeholder="用户名/手机/邮箱" ng-blur="check()" ng-keyup="check()" name="account" /></div>';return{scope:{ret:"=ret"},link:function(a){angular.isObject(a.ret)||(a.ret={}),a.check=function(){a.dirty=!0,a.ret.valid=!!a.ret.value},a.$watch("ret.value",function(){a.ret.value&&a.check()})},template:a,restrict:"E"}}]),angular.module("directives").directive("inputPassword",["RegisterService",function(a){var b='<div class="account-input" ng-class="{dirty: dirty}"><input type="password" ng-model="ret.value" placeholder="密码" ng-class="{error: !ret.valid}" ng-blur="check()" ng-keyup="check()" name="password" /><span ng-show="!ret.valid" class="error">{{errorMsg}}</span></div>';return{scope:{ret:"=ret",showError:"=?"},link:function(b){angular.isObject(b.ret)||(b.ret={}),b.check=function(){return b.showError===!1?void(b.ret.valid=!0):(b.dirty=!0,void a.checkPasswordIllegal(b.ret.value,function(a){b.ret.valid=!a,b.errorMsg=a}))},b.$watch("ret.value",function(){b.ret.value&&b.check()})},template:b,restrict:"E"}}]),angular.module("directives").directive("inputPasswordConfirm",["RegisterService",function(a){var b='<div class="account-input" ng-class="{dirty: dirty}"><input type="password" ng-model="password.value" placeholder="{{ret.isChangePassword ? \'新密码\' : \'密码\'}}" ng-class="{error: !password.valid}" ng-blur="check()" ng-keyup="check()" ng-disabled="ret.disabled" /><span ng-show="!password.valid" class="error">{{password.errorMsg}}</span></div><div class="account-input" ng-class="{dirty: dirty}"><input type="password" ng-model="confirm.value" placeholder="确认密码" ng-class="{error: !confirm.valid}" ng-blur="check()" ng-keyup="check()" ng-disabled="ret.disabled" /><span ng-show="!confirm.valid" class="error">{{confirm.errorMsg}}</span></div>';return{scope:{ret:"=ret"},link:function(b){angular.isObject(b.ret)||(b.ret={}),b.password={},b.confirm={},b.check=function(){b.dirty=!0,a.checkPasswordIllegal(b.password.value,function(a){b.password.valid=!a,b.password.errorMsg=a}),a.checkConfirmIllegal(b.password.value,b.confirm.value,function(a){b.confirm.valid=!a,b.confirm.errorMsg=a}),b.ret.valid=b.password.valid&&b.confirm.valid,b.ret.password=b.password.value,b.ret.confirm=b.confirm.value}},template:b,restrict:"E"}}]),angular.module("directives").directive("inputPasswordTwofa",["RegisterService","TwoFactorAuth",function(a,b){var c="totp",d="password";return{scope:{ret:"=ret",showError:"=showError"},link:function(e){angular.isObject(e.ret)||(e.ret={}),e.ret.update=!0,e.ret.type="password",e.$watch("ret.update",function(a){a&&(e.ret.update=!1,b.method(function(a){e.ret.type=a.data}))});var f=function(){};e.inputType="text",e.placeholder="",e.$watch("ret.type",function(){e.ret.type===c?(e.inputType="text",e.placeholder="两步验证码",f=a.checkTwofaCodeIllegal):e.ret.type===d&&(e.inputType="password",e.placeholder="密码",f=a.checkPasswordIllegal)}),e.check=function(){e.dirty=!0,f(e.ret.value,function(a){e.ret.valid=!a,e.errorMsg=a})},e.$watch("ret.value",function(){e.ret.value&&e.check()})},templateUrl:"common/directives/input/tpl/password_twofa.html",restrict:"E"}}]),angular.module("directives").directive("inputPhone",["RegisterService","Common","CountryService",function(a,b,c){return{scope:{ret:"=ret"},link:function(d,e,f){d.countries=c.countries,d.currentCountry={country:"China",country_code:"86",iso_code:"cn"},d.currentCountryISOCode="cn",d.$watch("currentCountryISOCode",function(a){d.currentCountry=_.find(d.countries,function(b){return b.iso_code==a}),d.ret.country_code=d.currentCountry.country_code,d.ret.iso_code=d.currentCountry.iso_code}),e.find("input").on("focus",function(){e.find(".current-country-code").css("border-color","#499dd6"),e.find(".countries-selector").css("border-color","#499dd6")}),e.find("input").on("blur",function(){e.find(".current-country-code").css("border-color",""),e.find(".countries-selector").css("border-color","")});var g=function(a){return a.id?"<i class='flag "+a.id+"'></i>"+a.text:a.text},h=e.find("select");h.select2({width:"260px",formatResult:g,formatSelection:g,escapeMarkup:function(a){return a},dropdownCssClass:"countries-selector-select2"}),angular.isObject(d.ret)||(d.ret={}),d.toggleCountriesSelector=function(){h.select2("open")},d.check=function(){return d.dirty=!0,d.ret.selfPhone&&d.ret.value===d.ret.selfPhone?void(d.ret.valid=b.isPhone(d.ret.value,d.ret.iso_code)):void a.checkPhoneIllegal(d.ret.value,d.ret.iso_code,function(a){d.ret.valid=!a,d.errorMsg=a[1]},d.ret.local)},d.keyup=_.throttle(function(){d.check()},1e3),d.ret.disabled&&(d.disabled=!0,d.check()),d.$on("$destroy",function(){h.select2("destroy")})},templateUrl:"common/directives/input/tpl/phone.html",restrict:"E"}}]),angular.module("directives").directive("inputPhoneCode",["RegisterService","Account","Flash","$interval","User",function(a,b,c,d,e){return{scope:{ret:"=ret",phone:"=phone"},link:function(f){angular.isObject(f.ret)||(f.ret={}),angular.isObject(f.phone)||(f.phone={});var g=!1,h=!0;"register"===f.ret.type&&b.phone_code_captcha({action:"register"}).then(function(a){g=a.data}),f.text="发送验证码",f.submit=function(){f.phone.valid&&h&&(g?f.$broadcast("phone.code.captcha.modal.show"):f.sendCode())},f.$on("phone.code.captcha.modal.validate",function(a,b){f.$broadcast("phone.code.captcha.modal.hide"),f.j_captcha=b,f.sendCode()}),f.sendCode=function(){if(f.sending=!0,f.text="......",!f.phone.valid)return f.sending=!1,void(f.text="发送验证码");var a={phoneCountryCode:"+"+f.phone.country_code,phone:f.phone.value,country:f.phone.iso_code};if("register"===f.ret.type){g&&$.extend(a,{j_captcha:f.j_captcha});var i=b.generate_register_code(a)}else if("twofa"===f.ret.type)var i=b.close_twofa_code(a);else if("forget"===f.ret.type)var i=b.forget_password({account:a.phone,phoneCountryCode:a.phoneCountryCode});else if("bind"===f.ret.type||"change"===f.ret.type)var i=e.phone_change_code(a);i.then(function(a){c.success().send("已发送验证码到"+f.phone.value+"，请查收"),f.text="60秒后重发";var b=59,e=d(function(){b>0?(f.text=b+"秒后重发",b--,h=!1):(d.cancel(e),f.sending=!1,h=!0,f.text="发送验证码")},1e3)}),i["catch"](function(a,b){903===b.code&&f.$broadcast("phone.code.captcha.modal.show")}),i["finally"](function(){f.sending=!1,f.text="发送验证码"})},f.check=function(){f.dirty=!0,a.checkCodeIllegal(f.ret.value,function(a){f.ret.valid=!a,f.errorMsg=a[1]})}},templateUrl:"common/directives/input/tpl/phone_code.html",restrict:"E"}}]),angular.module("directives").directive("inputPhoneEmail",["Common",function(a){var b='<div class="account-input" ng-class="{dirty: dirty}"><input ng-model="ret.value" placeholder="手机/邮箱" ng-blur="check()" ng-keyup="check()" /><span ng-show="!ret.valid" class="error">请输入合法的手机或者邮箱</span></div>';return{scope:{ret:"=ret"},link:function(b){angular.isObject(b.ret)||(b.ret={}),b.check=function(){b.dirty=!0;var c=a.isPhone(b.ret.value,"global"),d=a.isEmail(b.ret.value);b.ret.valid=c||d,c?b.ret.type="phone":d&&(b.ret.type="email")}},template:b,restrict:"E"}}]),angular.module("directives").directive("inputRememberMe",[function(){var a='<div class="ui checkbox"><input type="checkbox" ng-checked="ret.value"><label>记住我</label></div>';return{scope:{ret:"=ret"},link:function(a,b){angular.isObject(a.ret)||(a.ret={value:"true"===$.cookie("remember_me")}),$(b).find(".ui.checkbox").checkbox({onChange:function(){a.ret.value=$(this).is(":checked"),$.cookie("remember_me",a.ret.value)}})},template:a,restrict:"E"}}]),angular.module("directives").directive("inputTwofa",["RegisterService",function(a){return{scope:{ret:"=ret"},link:function(a){angular.isObject(a.ret)||(a.ret={}),a.input=function(b){if(a.ret.value||(a.ret.value="",a.ret.valid=!1,a.ret.digits=[]),b.keyCode>=48&&b.keyCode<=57||b.keyCode>=96&&b.keyCode<=105){if(6==a.ret.value.length)return;a.ret.value+=b.keyCode-(b.keyCode>57?96:48)}else{if(8!=b.keyCode)return;if(0==a.ret.value.length)return;a.ret.value=a.ret.value.substr(0,a.ret.value.length-1)}a.ret.digits=a.ret.value.split(""),a.twofaCursorStyle={left:66*Math.min(a.ret.digits.length,5)+"px"},a.ret.valid=6==a.ret.value.length,a.ret.valid&&a.$parent.submit()},a.forceFocus=function(){setTimeout(function(){document.getElementById("twofa-input").focus()},10)}},templateUrl:"common/directives/input/tpl/twofa.html",restrict:"E"}}]),angular.module("directives").directive("cgAutoRefreshHref",["$route",function(a){return{link:function(b,c,d){var e=d.cgAutoRefreshHref||"";if(c.is("a")&&0!==e.length){d.$observe("cgAutoRefreshHref",function(a){angular.isDefined(a)&&c.attr("href",a)}),c.attr("href",e);var f=function(b){if(b.metaKey||b.ctrlKey)return!0;var c=location.pathname;return c===e?(a.reload(),b.preventDefault(),!1):void 0};c.on("click",f),b.$on("$destroy",function(){c.off("click",f)})}},restrict:"A"}}]),angular.module("directives").directive("cgJumpOutAngularHref",["$window",function(a){return{link:function(b,c,d){var e=d.cgJumpOutAngularHref;c.attr("href",e),c.on("click",function(b){return a.location=e,b.preventDefault(),!1})}}}]),angular.module("directives").directive("cgLinkTips",["Setting","LinkTipService",function(a,b){var c=function(c){var d=new URL(a.host),e={type:"outer",url:c.href};if(c.host&&c.host.indexOf(d.host)>=0){var f=c.pathname.match(b.ATTACHMENT_PREVIEW_REG);if(f&&5==f.length){f[3],f[4];e.type="attachment"}else e.type="inner"}return e},d=function(a){var d=(a+"").match(b.LINK_REG),e=[];if(d)for(var f=0;f<d.length;f++){var g=d[f],h="";try{h=new URL(g)}catch(i){continue}e.push(c(h))}return e};return{templateUrl:"common/directives/linkTips/tpl/tips.html",scope:{content:"=cgLinkTips"},link:function(a,b,c){a.tips=[];var e=a.content;e?a.tips=d(e):a.$watch("content",function(b){a.tips=d(b)})}}}]).service("LinkTipService",function(){return{LINK_REG:/([a-zA-z]+:\/\/[^\s^<^>^（^）]*[a-zA-Z0-9&?%=]+)/g,ATTACHMENT_REG:/^\/(u|t)\/([^\/]+)\/p\/([^\/]+)\/attachment\/([^\/]+)/,ATTACHMENT_PREVIEW_REG:/^\/(u|t)\/([^\/]+)\/p\/([^\/]+)\/attachment\/([^\/]+)\/preview\/([^\/]+)/}}),angular.module("directives").directive("cgLoadMore",[function(){var a=function(a,b,c){var d=a.$eval(c.cgLoadMore);a.load_more_id=d};return{link:a,scope:{},priority:999,templateUrl:"common/directives/loadMore/tpl/load_more.html"}}]),angular.module("services").factory("LoadMore",["$q","$rootScope",function(a,b){var c=function(){var c=0,d={};this.instance=function(a,b){c=a,d=b};var e=function(a,b){return d.$on("load.more."+a,b)},f=function(a,c){b.$broadcast("load.more."+a,c)},g=function(b){var c=a.defer();return e("request",b),c.promise},h=function(a,b){f("request",b),a&&a(b)};return this.listen=e,this.broadcast=f,this.onRequest=g,this.sendRequest=h,this};return new c}]);var loadingDirective=angular.module("directives");loadingDirective.directive("cgMonkeyLoading",function(){return{templateUrl:"common/directives/loading/tpl/loading.html",restrict:"E",replace:!0,link:function(a,b,c){a.imageSize=a.$eval(c.imageSize)||24,a.containerMargin=a.$eval(c.containerMargin)||40,a.circlePadding=a.$eval(c.circlePadding)||16;var d=a.circlePadding;a.loadingStyle={width:a.imageSize+d+"px",height:a.imageSize+d+"px"},a.loadingTextStyle={width:a.imageSize+d+"px",height:a.imageSize+d+"px","line-height":a.imageSize+d+"px"},a.show=!0}}}),angular.module("app").controller("InsertImageLightMDController",["$scope","$rootScope",function(a,b){a.insertImages=function(a){b.$broadcast("on.light.md.image.insert",a)}}]),angular.module("directives").directive("cgLightMdEditor",["hljsService","$filter","Common","Setting","Errors","Flash",function(a,b,c,d,e,f){return{scope:{editor_id:"@editorId",ctn:"&ngModel",onSubmit:"=cgLightMdEditor",onChange:"=onChange",onFocus:"=onFocus",onBlur:"=onBlur",onPreview:"=onPreview",at_member:"=atMember",placeholder:"@placeholder",project_dependency:"=projectDependency",mode:"@mode",at_item:"=atItem",at_context_type:"=atContextType",
extra_item:"=extraItem",img_compression:"=imgCompression",show_submit:"=showSubmit",image_picker_mode:"=imagePickerMode",tab_index:"@tabIndex"},link:function(g,h,i){var j=$(h).find("textarea.editor"),k=j[0],l=$(h).find(".editor > .preview > .markdown.content");j.on("keydown",function(a){return 9==a.keyCode?(j[0].insertContent("    ",function(a){g.content=a.value}),a.preventDefault&&a.preventDefault(),!1):void 0}),g.refreshPreview=function(c){l.html(""),c&&0!==c.length&&(c=b("restyleEmoji")(c),l.html(c),l.find("pre code").each(function(b,c){a.highlightBlock(c)}))},g.removePreview=function(){l.html("")},g.focus=function(){j.focus()},g.insertCode=function(){var a=j.val(),b="",d=k.getCaretPosition();a.length>0&&(/[\n]$/.test(a)||(b+="\n",d+=1),d+=1,b+="\n"),b+="```\n\n```\n",k.insertContent(b,function(a){d+=4,0>=d&&(d=0),a.setCaretPosition(d),a.oninput(),c.safeApply.call(g,function(){g.content=a.value})})},g.insertImage=function(a){var b="",d=k.getCaretPosition(),a=a||"这里插入图片地址",e=k.getSelectedText(),f=0===k.value.length;f||(b+="\n"),b+=" ![图片]("+a+") \n";var h=e&&e.length>0;h&&(d=d+e.length+2,k.setCaretPosition(d),b="\n"+b),k.insertContent(b,function(a){a.oninput(),c.safeApply.call(g,function(){g.content=a.value})})},g.imageSelectDone=function(a){angular.forEach(a,function(a){g.insertImage(a)})},g.onFocus&&j.on("focus",function(){c.safeApply.call(g,function(){g.onFocus(g.content)})}),g.onBlur&&j.on("blur",function(){c.safeApply.call(g,function(){g.onBlur(g.content)})}),g.img_uploading=!1,$(document).unbind("dragover"),$(document).bind("drop dragover",function(a){a.preventDefault()}),g.light_md_upload_setting={xhrFields:{withCredentials:!0},url:d.api_host+"/api/tweet/insert_image",pasteZone:j,dropZone:j,disableImageResize:"undefined"==typeof g.img_compression?!1:!g.img_compression,loadImageMaxFileSize:52428800,process:c.scaleImageFilter,processstart:function(){c.safeApply.call(g,function(){g.img_uploading=!0})},done:function(a,b){g.img_uploading=!1,0==b.result.code?g.insertImage(b.result.data):e.handle(b.result)},fail:function(){g.img_uploading=!1,f.fail().send("上传失败!")},paste:c.addFilenameWhenPaste}},templateUrl:"common/directives/markdown/tpl/light.html",controller:"LightMdEditorController",replace:!0}}]).controller("LightMdEditorController",["$scope","Markdown","LightMdEditorService","BubbleCommentFormService","$rootScope","Common","btfModal","ModalService",function(a,b,c,d,e,f,g,h){a.content=a.ctn()||"",a.sending=!1,a.previewing=!1,a.previewed=!1,a.project_id=null,a.upload_progress=null;var i=a.pagedown_help_modal=h.instance("hello-moto-modal");a.toggleHelpModal=function(){i.toggle()},a.sendContent=function(b){if(!a.sending){a.sending=!0;var c=a.onSubmit&&a.onSubmit(b);c?(c.then(function(){a.content=""}),c["finally"](function(){a.sending=!1,a.removePreview(),a.previewed=!1})):(a.sending=!1,a.previewed=!1)}},a.showEnterButton=function(){return!a.mode&&!a.onChange||a.show_submit};var j=function(){if(a.removePreview(),0!=a.content.length){a.previewing=!0;var c=null;if(e.PROJECT){var d=f.projectParams(e.PROJECT);c=b.project_simple_preview(d,{content:a.content})}else c=b.simple_preview({content:a.content});c.then(function(b){var c=b.data||"";a.refreshPreview(c),angular.isFunction(a.onPreview)&&a.onPreview(c)}),c["finally"](function(){a.previewing=!1})}};a.togglePreview=function(){return this.showEmptyInfo()?void(a.previewed=!1):(a.previewed=!a.previewed,void(a.previewed&&j()))};var k=function(b){b&&(a.content=""),a.sending=!1,a.removePreview(),a.previewed=!1};a.onChange&&a.$watch("content",function(b){angular.isDefined(b)&&a.onChange(b,k)}),a.showEmptyInfo=function(){return 0===a.content.length},c.onAtPerson(function(b,c){var e=a.content||"";e=d.atPerson(null,e,c),a.content=e,a.focus()},a.editor_id),a.dropdownMode=function(){return a.image_picker_mode?a.image_picker_mode:a.showEnterButton()?"md-editor up":"md-editor down"},a.onUploadProgress=function(b,c){a.img_uploading=b,b?a.upload_progress=c+"%":a.upload_progress=null},a.$watch("project_dependency",function(b){b&&(a.project_id=b.is_public?null:b.id)})}]).service("LightMdEditorService",["$rootScope","btfModal","Project","ProjectResolver",function(a,b,c,d){var e=function(b,c){a.$broadcast("light.md.editor."+(c||"default")+".at.person",b)},f=function(b,c){a.$on("light.md.editor."+(c||"default")+".at.person",b)};return{atPerson:e,onAtPerson:f}}]),angular.module("directives").directive("cgNewYear",["ipCookie","$timeout","AdBanner",function(a,b,c){return{restrict:"E",controller:"NewYearBannerController",templateUrl:"common/directives/marketing/tpl/marketing-new-year.html",link:function(a,b,c){},replace:!0}}]).controller("NewYearBannerController",["$scope","AdBanner","$q","ipCookie","$timeout",function(a,b,c,d,e){a.ads=[],a.banners={large:{key:"new_year_large"},min:{key:"new_year_min"}};var f=c.defer();f.resolve();var g=f.promise;g.then(function(){var c=b.get({id:a.banners.large.key});c.$promise.then(function(c){0==c.code&&(a.banners.large.ad=c.data,b.get({id:a.banners.min.key},function(b){if(0==b.code){a.banners.min.ad=b.data;var c=d("new-year-banner");a.minShow=!0,a.largeShow=!0,c||(a.minShow=!1,a.largeShow=!1,e(function(){a.largeShow=!0,d("new-year-banner",!0,{path:"/"}),e(function(){a.minShow=!0},500)},5e3))}}))})}),a.expand=function(){a.minShow?(a.minShow=!1,a.largeShow=!1):(a.largeShow=!0,e(function(){a.minShow=!0},1e3))},g["catch"](function(){return a.destory(),!1}),g["finally"](function(){a.loading=!1})}]),angular.module("directives").directive("cgSnowContainer",[function(){return{scope:{open:"@"},restrict:"E",templateUrl:"common/directives/marketing/tpl/marketing-snow.html",link:function(a,b,c){a.open="true"===a.open?!0:!1},replace:!0}}]),angular.module("directives").directive("cgMakeSnow",["$window","$timeout",function(a,b){var c=function(c,d){this.settings=d,this.flakes=[],this.flakeCount=d.count,this.mx=-100,this.my=-100,function(){var c=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){b(a,1e3/60)};a.requestAnimationFrame=c}(),this.init(c)};return c.prototype.init=function(b){this.canvas=b.get(0),this.ctx=this.canvas.getContext("2d"),this.canvas.width=a.innerWidth,this.canvas.height=a.innerHeight,this.flakes=[];for(var c=0;c<this.flakeCount;c++){var d=Math.floor(Math.random()*this.canvas.width),e=Math.floor(Math.random()*this.canvas.height),f=Math.floor(100*Math.random())%this.settings.size+2,g=Math.floor(100*Math.random())%this.settings.speed+Math.random()*f/10+.5,h=.5*Math.random()+this.settings.opacity;this.flakes.push({speed:g,velY:g,velX:0,x:d,y:e,size:f,stepSize:Math.random()/30,step:0,angle:180,opacity:h})}1==this.settings.interaction&&this.canvas.addEventListener("mousemove",function(a){this.mx=a.clientX,this.my=a.client});var i=this;angular.element(a).resize(function(){i.ctx.clearRect(0,0,i.canvas.width,i.canvas.height),i.canvas.width=a.innerWidth,i.canvas.height=a.innerHeight}),this.image=angular.element("<img src='"+this.settings.image+"' style='display: none'>"),this.snow()},c.prototype.snow=function(){var b=this,c=function(){b.ctx.clearRect(0,0,b.canvas.width,b.canvas.height);for(var d=0;d<b.flakeCount;d++){var e=b.flakes[d],f=b.mx,g=b.my,h=100,i=e.x,j=e.y,k=Math.sqrt((i-f)*(i-f)+(j-g)*(j-g));if(h>k){var l=h/(k*k),m=(f-i)/k,n=(g-j)/k,o=l/2;e.velX-=o*m,e.velY-=o*n}else switch(e.velX*=.98,e.velY<=e.speed&&(e.velY=e.speed),b.settings.windPower){case!1:e.velX+=Math.cos(e.step+=.05)*e.stepSize;break;case 0:e.velX+=Math.cos(e.step+=.05)*e.stepSize;break;default:e.velX+=.01+b.settings.windPower/100}if(e.y+=e.velY,e.x+=e.velX,(e.y>=b.canvas.height||e.y<=0)&&b.resetFlake(e),(e.x>=b.canvas.width||e.x<=0)&&b.resetFlake(e),0==b.settings.image){var p=b.ctx.createRadialGradient(e.x,e.y,0,e.x,e.y,e.size-1);p.addColorStop(0,b.settings.startColor),p.addColorStop(1,b.settings.endColor),b.ctx.fillStyle=p,b.ctx.beginPath(),b.ctx.arc(e.x,e.y,e.size,0,2*Math.PI),b.ctx.fill()}else b.ctx.drawImage(b.image.get(0),e.x,e.y,2*e.size,2*e.size)}a.cancelAnimationFrame(c),a.requestAnimationFrame(c)};c()},c.prototype.resetFlake=function(a){if(0==this.settings.windPower||0==this.settings.windPower)a.x=Math.floor(Math.random()*this.canvas.width),a.y=0;else if(this.settings.windPower>0){var b=Array(Math.floor(Math.random()*this.canvas.width),0),c=Array(0,Math.floor(Math.random()*this.canvas.height)),d=Array(b,c),e=d[Math.floor(Math.random()*d.length)];a.x=e[0],a.y=e[1]}else{var b=Array(Math.floor(Math.random()*this.canvas.width),0),c=Array(this.canvas.width,Math.floor(Math.random()*this.canvas.height)),d=Array(b,c),e=d[Math.floor(Math.random()*d.length)];a.x=e[0],a.y=e[1]}a.size=Math.floor(100*Math.random())%this.settings.size+2,a.speed=Math.floor(100*Math.random())%this.settings.speed+Math.random()*a.size/10+.5,a.velY=a.speed,a.velX=0,a.opacity=.5*Math.random()+this.settings.opacity},{scope:{speed:"@",interaction:"@",size:"@",count:"@",opacity:"@",startColor:"@",endColor:"@",windPower:"@",image:"@"},restrict:"A",link:function(a,b,d){a.speed=parseFloat(a.speed),a.size=parseInt(a.size),a.opacity=parseFloat(a.opacity),a.windPower=parseFloat(a.windPower),a.interaction="true"===a.interaction?!0:!1,a.image="false"===a.image?!1:a.image;new c(b,{speed:a.speed||0,interaction:a.interaction||!0,size:a.size||2,count:a.count||200,opacity:a.opacity||1,startColor:a.startColor||"rgba(255,255,255,1)",endColor:a.endColor||"rgba(255,255,255,0)",windPower:a.windPower||0,image:a.image||!1})},replace:!0}}]),angular.module("directives").directive("cgWow",[function(a){return{link:function(a,b,c){angular.element(document).ready(function(){var a=new WOW;a.init()})}}}]),angular.module("directives").directive("cgPageScroll",["$anchorScroll","location","Common",function(a,b,c){var d=!0;return{restrict:"A",scope:{ns:"=?cgPageScrollNamespace"},link:function(e,f,g){if(e.ns||d){var h;h=e.ns?"markdown.load.success."+e.ns:"markdown.load.success";var i=e.$on(h,function(){i(),d=!1;var a=b.hash(),c=f.find('[id="'+a+'"],[name="'+a+'"]');c.length>0&&window.scrollTo(0,c.offset().top-60)})}f.on("click.pageScroll","a",function(d){var h=$(this).attr("href");if(j(h)){d.preventDefault();var i;if("#"==h.charAt(0))i=decodeURIComponent(h.slice(1));else{if(h.substring(0,h.indexOf("#"))!=b.path())return;i=h.substring(h.indexOf("#")+1)}if(c.safeApply.call(e,function(){b.skipReload().hash(i)}),"false"===g.cgPageScroll)a(),c.safeApply.call(e,function(){b.skipReload().hash("")});else{var k=f.find('[id="'+i+'"],[name="'+i+'"],[id="user-content-'+i.toLowerCase()+'"],[id="user-content-'+decodeURIComponent(i)+'"]');k.length>0&&window.scrollTo(0,k.offset().top-60)}}});var j=function(a){return a?0!==a.indexOf("#")?!1:!0:!1}}}}]),angular.module("app").controller("InsertLinkController",["$scope","$rootScope",function(a,b){a.link="",a.$watch("link",function(a){b.$broadcast("on.insert.link.change",a)}),a.$on("on.project.link.inserted",function(){a.link=""}),a.insertNow=function(){var a=$("#insert_link_modal");setTimeout(function(){a.find(".ok.button").trigger("click")},0)}}]),angular.module("app").controller("InsertTableController",["$scope","$rootScope","$timeout",function(a,b,c){"ngInject";function d(){a.row=1,a.col=1,a.align="justify"}function e(){b.$broadcast("on.insert.table.change",{row:a.row,col:a.col,align:a.align})}d(),a.$watch("row",e),a.$watch("col",e),a.$watch("align",e),a.$on("on.table.inserted",c(function(){d()}))}]),angular.module("directives").directive("cgPagedown",["PagedownService","$rootScope","$timeout","$parse","$compile","Setting","Common","Errors","Markdown","Flash",function(a,b,c,d,e,f,g,h,i,j){return{scope:{content:"=ngModel",id:"@",features:"=",minHeight:"@minHeight"},link:function(e,k,l){c(function(){var m=d(l.cgPagedown),n=k.find(".pagedown-editor"),o=k.find(".pagedown-editor textarea"),p=k.find(".pagedown-preview");o.addClass("pagedown-input cg-textarea-editable").attr("id","wmd-input"+e.id);var q=Markdown.getSanitizingConverter(),r=!!o.attr("cg-refer-resource"),s=function(a){a.data&&p.html(a.data),p.find("pre code").each(function(a,b){hljs.highlightBlock(b)})},t=_.throttle(function(a,c){e.button.previewing&&(r&&b.USER&&b.PROJECT?i.project_preview(g.projectParams(b.PROJECT),{content:a}).then(function(a){s(a),angular.isFunction(c)&&c(a)}):i.preview({toc:!0},{content:a}).then(function(a){s(a),angular.isFunction(c)&&c(a)}))},1e3);q.hooks.chain("preConversion",function(a){return t(a),""}),q.hooks.chain("postConversion",function(a){return p.html()}),Markdown.Extra.init(q),e.editor=new Markdown.Editor(q,e.id,a.editor_setting),e.editor.run();var u=a.replaceButtons(e.id);a.autoScroll(o,p),o.on("keydown",function(a){return 9==a.keyCode?(o[0].insertContent("    ",function(a){e.content=a.value}),a.preventDefault&&a.preventDefault(),!1):void 0}),n.TextAreaResizer({minHeight:e.minHeight}),b.$watch("InsertLinkModal",function(a){a&&a.activate()}),b.$watch("InsertTableModal",function(a){a&&a.activate()});var v="";e.editor.hooks.set("insertImageDialog",function(a){if($(".wmd-prompt-background").hide(),e.project_id){var b=k.find(".image-picker-dropdown");b.dropdown("toggle")}else{var d=k.find("#pagedown-upload-input");d.trigger("click")}return e.imageSelectDone=function(b){c(function(){a(b)})},!0}),e.$on("on.insert.link.change",function(a,b){b&&(v=b)}),e.editor.hooks.set("insertLinkDialog",function(a){return $(".wmd-prompt-background").hide(),c(function(){var c=$("#insert_link_modal");c.modal("setting",{onApprove:function(){a(v)},onHide:function(){b.$broadcast("on.project.link.inserted")}}),c.modal("show")}),!0}),e.editor.hooks.set("insertHeadingDialog",function(a){var b=k.find(".pagedown-heading-dropdown");return b.dropdown("show"),b.one("click","li",null,function(){var c=$(this).data("level");b.dropdown("hide"),a(c)}),!0});var w={};e.$on("on.insert.table.change",function(a,b){b&&(w=b)}),e.editor.hooks.set("insertTableDialog",function(a){var c=$("#insert_table_modal");return c.modal("setting",{onApprove:function(){a(w.row,w.col,w.align)},onHide:function(){b.$broadcast("on.table.inserted")}}),c.modal("show"),!0});var x=function(){var a=o.val();e.$apply(function(){e.content=a,m(e,{$content:a})})};e.editor.hooks.chain("onChange",x),e.toggleBodyOverflow=function(a){a?$("body").css("overflow","hidden"):$("body").css("overflow","auto")},e.img_uploading=!1,a.compileImageLoading(u,e),e.insert_image_setting={xhrFields:{withCredentials:!0},url:f.api_host+"/api/tweet/insert_image",pasteZone:o,dropZone:o,disableImageResize:!1,loadImageMaxFileSize:52428800,process:g.scaleImageFilter,processstart:function(){g.safeApply.call(e,function(){e.img_uploading=!0})},done:function(a,b){if(g.safeApply.call(e,function(){e.img_uploading=!1}),0==b.result.code){var c=o[0],d="";c.value.length>0&&(d+="\n"),d+=" ![图片]("+b.result.data+") \n",c.insertContent(d,x),e.editor.refreshPreview()}else h.handle(b.result)},fail:function(){e.img_uploading=!1,j.fail().send("图片上传失败!")},paste:g.addFilenameWhenPaste},k.find(".pagedown-toc-dropdown").dropdown();var y=k.find(".markdown-toc");e.updateToc=function(){i.toc({content:e.content||""}).then(function(a){y.html(a.data)})},y.on("click","a",function(a){e.button.previewing=!0;var b=this;t(o.val(),function(){$(b).trigger("click.pageScroll")})});var z=b.$watch("PROJECT",function(a){if(angular.isDefined(a)){if(a.is_public)return void(e.project_id=null);e.project_id=a.id,z()}})},0)},transclude:!0,templateUrl:"common/directives/pagedown/tpl/pagedown.html",controller:"PagedownController"}}]).controller("PagedownController",["$scope","ModalService",function(a,b){a.button={previewing:!1,full_screen:!1};var c=a.pagedown_help_modal=b.instance("hello-moto-modal");a.togglePreview=function(b){a.button.previewing=angular.isDefined(b)?b:!a.button.previewing,a.editor.refreshPreview()},a.toggleFullscreen=function(){a.button.full_screen=!a.button.full_screen,$("body").toggleClass("pagedown-fullscreen"),a.button.full_screen?this.togglePreview(!0):this.togglePreview(!1),a.toggleBodyOverflow(a.button.full_screen)},a.toggleHelpModal=function(){c.toggle()}}]).service("PagedownService",["$compile","$rootScope",function(a,b){var c={strings:{heading:"标题 <h1>/<h2> Ctrl+H",headingexample:"这里输入标题",bold:"粗体 <strong> Ctrl+B",boldexample:"在此输入文字",italic:"斜体 <em> Ctrl+I",italicexample:"在此输入文字",link:"链接 <a> Ctrl+L",linkdescription:"在此输入链接内容",linkdialog:"<h2>插入链接</h2>",quote:"引用 <blockquote> Ctrl+Q",quoteexample:"这里输入引用文字",code:"代码片段 <pre><code> Ctrl+K",codeexample:"在此输入代码片段",image:"图片 <img> Ctrl+G",imagedescription:"在这里输入图片描述",imagedialog:"<h2>插入图片</h2>",table:"表格 <table>",tabledescription:"在这里输入表格内容",olist:"数字列表 <ol> Ctrl+O",ulist:"符号列表 <ul> Ctrl+U",litem:"列表项",hr:"水平分割线 <hr> Ctrl+R",undo:"撤销 - Ctrl+Z",redo:"重做 - Ctrl+Y",redomac:"重做 - Ctrl+Shift+Z",help:"需要帮助"}},d=function(a){var b=($("#wmd-button-row"+a),$("#wmd-button-bar"+a)),c=b.find("#wmd-button-row"+a+" .wmd-button"),d=new RegExp("wmd\\-(.*)\\-button"+(a?"\\"+a:"")),e={redo:"flipped undo",link:"url",quote:"quote left",image:"photo",olist:"ordered list",ulist:"list",hr:"ellipsis horizontal"};return c.each(function(a,b){var c=$(b),f=c.attr("id").replace("-"+f,"");f=f.match(d),f&&2==f.length&&(f=f[1]),f=e[f]||f;var g='<i class="'+f+' icon"></i>';c.find("span").hide(),c.append(g)}),b},e=function(b,c){var d=b.find("#wmd-image-button-1 .photo.icon");d.attr("ng-class","{photo: !img_uploading, loading: img_uploading}"),a(d)(c)},f=function(a,b){a.on("scroll",function(){a.is(".hovered")&&b.stop().animate({scrollTop:b[0].scrollHeight*(a[0].scrollTop/a[0].scrollHeight)})}).on("mouseenter",function(){a.addClass("hovered")}).on("mouseleave",function(){a.removeClass("hovered")}),b.on("scroll",function(){b.is(".hovered")&&a.stop().animate({scrollTop:a[0].scrollHeight*(b[0].scrollTop/b[0].scrollHeight)})}).on("mouseenter",function(){b.addClass("hovered")}).on("mouseleave",function(){b.removeClass("hovered")})};return{editor_setting:c,replaceButtons:d,autoScroll:f,compileImageLoading:e}}]),angular.module("directives").directive("cgPager",["Pager","Flash",function(a,b){var c=2,d="<",e=">",f=function(a,b){for(var c=[],d=a;b>=d;d++)c.push(d);return c},g=function(a){if(!a)return[];var b=[];if(a.totalRow>a.pageSize){var g=a.page>c?a.page-c:1;1!=g&&b.push(1);var h=g+c+2;h>a.totalPage&&(h=a.totalPage),b=b.concat(f(g,h)),h<a.totalPage&&b.push(a.totalPage),1!=a.page&&b.splice(0,0,d),a.page!=a.totalPage&&b.push(e)}return angular.copy(b)},h=function(a){return!isNaN(a)},i={},j=function(c,f,j){f.addClass("cg pagination-outer clearfix");var k=j.cgPager||!1,l={};if(!k)return void b.fail().send("该页面存在未设置 id 的分页组件！");var m=a.instance(k,c);m.disabledUrlChange=c.disabledUrlChange,i[k]=m;var n=m.onOptionsReady();n.then(null,null,function(a){f.show(),l=a,l.page>l.totalPage&&(l.page=l.totalPage,0!=l.totalRow&&o(m,l.page)),c.current_page=l.page,c.pager_pages=g(l),c.isPageNumber=h}),f.hide(),m.directiveReady();var o=function(a,b){a.changePage(b),a.changeUrl(b)};c.gotoPage=function(a){var b=1;if(a===d)b=+c.current_page-1;else if(a===e)b=+c.current_page+1;else{if(!h(a))return;b=a}var f=i[k];o(f,b)}};return{link:j,templateUrl:"common/directives/pager/tpl/pager.html",scope:{disabledUrlChange:"="}}}]),angular.module("services").factory("Pager",["$q","$rootScope","location",function(a,b,c){var d=function(){var a=c.search();if(!a)return 1;var b="page"+(0==this.index?"":this.index),d=a[b];return+d||1},e=function(a){this.index>=0&&!this.disabledUrlChange&&c.skipReload().search("page"+(0==this.index?"":this.index),1==a?void 0:a)},f={PAGER_HELPER_OPT_READY:1,PAGER_DIRECTIVE_READY:2,PAGER_ALL_READY:3},g=[],h=[],i=function(a){return a?{page:a.page,pageSize:a.pageSize,totalPage:a.totalPage,totalRow:a.totalRow}:void 0},j=function(a){return this.listen("page.changed",a)},k=function(a){this.emit("page.changed",a)},l=function(a){this.pagerOptions(a),this.changeUrl(a.page);var b=this.pagerStatus();if(b==f.PAGER_DIRECTIVE_READY||b==f.PAGER_ALL_READY)this.pagerStatus(f.PAGER_ALL_READY),this.broadcast("options.ready",i(this.pagerOptions()));else{this.pagerStatus(f.PAGER_HELPER_OPT_READY);var c=this,d=this.onDirectiveReady();d.then(null,null,function(){c.broadcast("options.ready",i(c.pagerOptions()))})}},m=function(a){return this.listen("options.ready",a)},n=function(){var a=this.pagerStatus();a==f.PAGER_HELPER_OPT_READY?(this.pagerStatus(f.PAGER_ALL_READY),this.emit("directive.ready")):this.pagerStatus(f.PAGER_DIRECTIVE_READY)},o=function(b,c){var d=a.defer();return this.scope.$on("pager_"+this.pager_id+"."+b,function(a,b){angular.isFunction(c)&&c(b),d.notify(b)}),d.promise},p=function(a,b){this.scope.$emit("pager_"+this.pager_id+"."+a,b)},q=function(a,b){this.scope.$broadcast("pager_"+this.pager_id+"."+a,b)},r=function(b){var c=a.defer();return this.scope.$on("pager_"+this.pager_id+".directive.ready",function(a,d){angular.isFunction(b)&&b(d),c.notify(d)}),c.promise},s=function(){return this.index=0,this.pager_id=null,this.scope=null,this.disabledUrlChange=!1,this.init=function(a,b){this.pager_id=this.pager_id||a,this.scope=this.scope||b},this.instance=function(a,b,c){var d=new s;return d.init.apply(d,arguments),d.index=c||0,d},this.pagerOptions=function(a){var b=g[this.pager_id],b=g[this.pager_id]=a||b;return b},this.pagerStatus=function(a){var b=h[this.pager_id],b=h[this.pager_id]=a||b;return b},this.hide=function(){return $('[cg-pager="'+this.pager_id+'"]').hide()},this.removeUrlPager=function(){this.changeUrl(1)},this.listen=o,this.emit=p,this.broadcast=q,this.onChange=j,this.changePage=k,this.changeUrl=e,this.optionsReady=l,this.onOptionsReady=m,this.directiveReady=n,this.onDirectiveReady=r,this.currentPage=d,this.timeBasedId=function(){return(new Date).getTime()},this};return new s}]),angular.module("directives").directive("cgPartnerLink",[function(){return{restrict:"E",replace:!0,controller:"PartnerLinkController",templateUrl:"common/directives/partnerLink/tpl/partnerLink.html",link:function(a,b,c){}}}]).controller("PartnerLinkController",["$scope","PartnerLink",function(a,b){a.partners=[],b.partners(function(b){0==b.code&&(a.partners=b.data)})}]),angular.module("directives").directive("cgPickmeup",["$parse","Common",function(a,b){var c=function(c,d,e){var f=a(e.cgPickmeup),g=c.$eval(e.pickmeupOptions)||{},h="pickmeup-"+(new Date).getTime(),i=c.$eval(e.ngModel);g=angular.extend({class_name:h,format:"Y-m-d",date:i,change:function(a){b.safeApply.call(c,function(){f(c,{$date:a})})}},{},g),d.pickmeup(g),c.$watch(function(){return c.$eval(e.ngModel)},function(a){angular.isDefined(a)&&""!=a&&d.pickmeup("set_date",a)});var j=$(d).data("pickmeup");j&&c.$on("$destroy",function(){j.remove()})};return{link:c}}]),angular.module("directives").directive("cgPlaceholder",[function(){return{link:function(a,b,c){var d,e=function(a){b.attr("placeholder",a)};d=c.cgPlaceholder?c.cgPlaceholder:"在此输入评论内容";var f="";f=-1!=navigator.userAgent.toLocaleLowerCase().indexOf("mac",0)?d+"（Command+Enter）":d+"（Ctrl+Enter）",e(f)}}}]),appDirective.directive("placeholderAttr",["$timeout","$parse",function(a,b){return{restrict:"A",scope:{placeholderAttr:"=placeholderAttr"},link:function(a,b,c,d){var e=navigator.userAgent.match(/MSIE/),f=navigator.userAgent.match(/Trident\/7\./);e||f||a.$watch("placeholderAttr",function(a){b.attr("placeholder",a)})}}}]),angular.module("directives").directive("cgPrevAndNext",["$parse","Common",function(a,b){return{link:function(c,d,e){var f=a(e.cgPrevAndNext),g=c.$eval(e.when);g="undefined"==typeof g?!0:!1;var h=function(a){var d=a.keyCode;37!=d&&39!=d||!g||b.safeApply.call(c,function(){f(c,{$event:37==d?"prev":"next"})})};c.$watch(e.cgPrevAndNextOff,function(){var a=c.$eval(e.cgPrevAndNextOff);$(document).off("keydown",h),a||$(document).on("keydown",h)}),c.$on("$destroy",function(){$(document).off("keydown",h)})}}}]),angular.module("directives").directive("cgProjectActivity",[function(){var a=["ProjectStar","ProjectTopic","ProjectFile","Depot","Project","ProjectMember","QcTask","Task","ProjectWatcher","PullRequestBean","PullRequestComment","MergeRequestBean","MergeRequestComment","TaskComment","CommitLineNote","ProjectFileComment"];return{scope:{type:"&type",activity:"=cgProjectActivity",showProject:"="},controller:["$scope","$filter","TaskUrgencyService","TaskCommentService","TaskDeadlineService","GitService",function(b,c,d,e,f,g){b.resolve=function(b){return-1===a.indexOf(b)?"Empty":b};var h=b.isComment=function(a){return"comment"===a.action};b.topicTitle=function(a){return h(a)?a.project_topic.parent.title:a.project_topic.title},b.topicPath=function(a){return h(a)?a.project_topic.parent.path:a.project_topic.path},b.topicContent=function(a){var b="";return b=h(a)?a.project_topic.content:a.project_topic.parent.content,e.text(b,!0)};var i=b.isFolder=function(a){return a.action.indexOf("dir")>=0},j=function(a){return a.action.indexOf("history")>=0};b.fileType=function(a){return"rename"===a.action?"修改了文件名称":i(a)?"文件夹":j(a)?"历史版本":"文件"},b.filePath=function(a,b){return-1!==["delete_dir","delete_file"].indexOf(a.action)?[a.project.path,"/attachment"].join(""):b.path},b.shaPath=function(a,b){return[a.depot.path,"/commit/",b.sha].join("")},b.shortSha=function(a){return a.sha.substring(0,7)},b.isQuit=function(a){return"quit"===a.action},b.deadlineMsg=function(a){return a?"更新了任务的截止日期":"移除了任务的截止日期"},b.parseDeadline=function(a){return a?"["+f.format(a).date+"]":""},b.lineNoteUrlWithAnchor=function(a){var b="";return"Commit"==a.line_note.noteable_type?b="#commit-comment-"+a.line_note.id:"MergeRequestBean"==a.line_note.noteable_type?b="#mr-comment-"+a.line_note.id:"PullRequestBean"==a.line_note.noteable_type&&(b="#pr-comment-"+a.line_note.id),a.line_note.noteable_url+b},b.commitLink=g.activityCommitLink,b.priorities=d.priorities,b.commentToText=e.text}],templateUrl:"common/directives/projectActivities/tpl/activity.html",replace:!0}}]),angular.module("directives").directive("cgTimeline",[function(){return{scope:{activities:"=cgTimeline",showSeparator:"=",showProject:"="},link:function(a,b,c){},templateUrl:"common/directives/projectActivities/tpl/timeline.html",controller:"TimelineController"}}]).controller("TimelineController",["$scope","Common","$rootScope","$filter",function(a,b,c,d){var e=c.PROJECT,f=e&&e.un_read_activities_count||0;a.activity_count=0,a.$watch("activities",function(c){c&&(a.activities_of_date=b.orderActivityByDate(a.activities))}),a.timelineDate=function(a){return d("amDateFormat")(a.created_at,"YYYY-M-D ddd")},a.isToday=c.isToday,a.makeCount=function(b){a.activity_count++,b.index=a.activity_count},a.showUnreadSeparator=function(b){return e&&f==b.index&&a.showSeparator}}]).service("TimelineService",[function(){}]),angular.module("directives").directive("cgItemsGroup",[function(){return{scope:{groups:"=cgItemsGroup",items:"=groupItems",selectProject:"=onProjectSelect",itemTemplateUrl:"@itemTemplateUrl",editable:"=editable",loading:"=loading",pinDisabled:"=pinDisabled",cgProjectArchiverEnable:"=cgProjectArchiverEnable",currentType:"="},link:function(a,b,c){},templateUrl:"common/directives/projectGroup/tpl/group.html",transclude:!0,controller:"ItemsGroupController"}}]).controller("ItemsGroupController",["$scope","ItemsGroupService","Project","Flash","Projects","FrequentlyProjectsService","Common","$timeout","location",function(a,b,c,d,e,f,g,h,i){a.itemsInGroup=function(b){var c=[];return angular.forEach(a.items,function(a){a.groupId===b.id&&c.push(a)}),c};var j=function(b){var c=!1;return angular.forEach(a.groups,function(a){a.id!==b.groupId||c||(c=!0)}),c};a.noGroupItems=function(){var b=[];return angular.forEach(a.items,function(a){0!==a.groupId&&j(a)||b.push(a)}),b},a.closeAllGroup=function(){angular.forEach(a.groups,function(a){a.editing=!1})},a.toggleGroup=function(c,d){angular.forEach(a.groups,function(a){a.id!==d.id&&(a.open=!1),a.editing=!1}),d.open=!d.open,b.groupPosition(c),d.open},a.closeGroup=function(a,b){b.open=!1},a.editTitle=function(a,b){b.open&&(b.editing=!0,a.stopPropagation())},a.toggleProjectSelect=function(b,c,d){if(a.editable){var e=c&&c.open;(null===c||e)&&(d.selected=!d.selected,e&&b.stopPropagation());var f=k();a.selectProject&&a.selectProject(f)}},a.groupUnreadCount=function(b){var c=a.itemsInGroup(b),d=0;return angular.forEach(c,function(a){d+=a.un_read_activities_count||0}),d},a.projectPath=function(b){return a.editable?"javascript:void(0);":b.project_path};var k=function(){var b=[];return angular.forEach(a.items,function(a){a.selected&&b.push(a)}),b};a.checkGroupName=function(a,b){(0===a.length||b.copy_name!==b.name)&&(b.copy_name=b.name)},a.updating_name=!1,a.updateGroupName=function(e,f){if(f.name!==e){if("function"==typeof e.trim&&!e.trim())return void d.fail().send("分组名不能为空");a.updating_name=!0;var g=c.updateGroupName({group_id:f.id},{name:e});g.then(function(){f.name=e,d.success().send("分组名更新成功！"),b.groupNameUpdate(f)}),g["catch"](function(){f.new_name=f.name}),g["finally"](function(){a.updating_name=!1})}else f.editing=!1,f.open=!1},a.pin=function(a,b){if(b.pin){var c=e.pinCancel({ids:b.id});c.then(function(){b.pin=!1,f.pin(b.pin)})}else{var c=e.pin({ids:b.id});c.then(function(){b.pin=!0,f.pin(b.pin)})}return a.stopPropagation(),a.preventDefault(),!1},a.pinTitle=function(a){return a.pin?"取消常用":"设置常用"},a.unarchive=function(a,b){e.unarchive({id:b.id})},a.listItemFocus=function(a){h(function(){angular.element(".projects-view  li.projects-item").removeClass("focus")})},a.enterItem=function(a){h(function(){angular.element(a.target).find("a").click()})},a.unarchive=function(a){if(confirm("将该项目解除归档？")){var b=c.unarchive({id:a},{});b.then(function(a){i.path("/user/projects/all")})}},f.onPinCancel(function(b,c){var d=g.findOfId(a.items,c.id);d&&(d.pin=!1)})}]).service("ItemsGroupService",["$rootScope",function(a){var b=function(b){a.$broadcast("on.project.group.name.update.success",b)},c=function(b){a.$on("on.project.group.name.update.success",b)},d=function(a){var b=$(a.target),c=b.parents('[class*="project-group-"]'),d=c.find(".items-wrapper"),e=c.parent(),f=15,g=c.outerWidth()+f,h=c.outerHeight()+f,i=c.index()+1,j=e.innerWidth(),k=e.innerHeight(),l=Math.round(k/h),m=Math.floor(j/g),n=Math.ceil(i/m),o=i-(n-1)*m,p=[];return o===m||o===m-1?p.push("right"):p.push("left"),n===l&&1!==l?p.push("top"):p.push("top"),d.removeClass("left right top bottom"),d.addClass(p.join(" ")),p};return{onGroupNameUpdate:c,groupNameUpdate:b,groupPosition:d}}]),angular.module("app").config(["$routeProvider","$locationProvider","UserResolver","ProjectResolver","GroupResolver","DepotResolver",function(a,b,c,d){b.html5Mode(!0),a.when("/example/items-group",{templateUrl:"common/directives/projectGroup/tpl/example.html",controller:"ItemsGroupExampleController",title:"Items Group Example"})}]),angular.module("app").directive("projectLabel",["$rootScope","$parse",function(a,b){return{scope:{project:"=",onSelected:"&",projectAdmin:"=",team:"=",archived:"="},restrict:"E",replace:!0,templateUrl:"common/directives/projectLabel/projectLabel.html",controller:"ProjectLabelController",link:function(a,b,c){a.selection=a.$eval(c.selection)||!1,a.onCheck=function(){a.project&&(a.project.selected=!a.project.selected,a.onSelected()&&a.onSelected()(a.project))}}}}]).controller("ProjectLabelController",["$scope","$location","$rootScope","Flash","TeamProjectOperationModalService","Team","Project","$routeParams",function(a,b,c,d,e,f,g,h){a.USER=c.USER;var i=function(a){var b=[];return angular.forEach(a.list,function(a,b){var c=["<img class='ui avatar image' src='"+a.user.avatar+"'/><span class='transfer-username ellipsis'>"+a.user.name+"</span>"];this.push({label:c.join(""),value:a.user.global_key})},b),b};a.beforeArchiveProject=function(a,b){return e.loadData({project:b}),e.onReady(function(a,b){k(b)}),e.show("#team-project-archive-modal"),a.stopPropagation(),a.preventDefault(),!1},a.beforeExportProject=function(b,c){var g=f.projectMembers({global_key:a.team.global_key,project_id:c.id});return g.then(function(a){if(0==a.code){var b=a.data;b.totalRow>0?(e.loadData({project:c,members:i(a.data)}),e.onReady(function(a,b,c){l(b,c)}),e.show("#team-project-export-modal")):d.fail().send("团队暂时没有成员,无法迁出项目");
}}),b.stopPropagation(),b.preventDefault(),!1},a.beforeDeleteProject=function(a,b){return e.loadData({project:b}),e.onReady(function(a,b){j(b)}),e.show("#team-project-delete-modal"),a.stopPropagation(),a.preventDefault(),!1},a.beforeUnarchiveProject=function(b,c){if(confirm("将该项目解除归档？")){var e=f.unarchiveProject({global_key:a.team.global_key,project_id:c.id},{});return e.then(function(b){d.success().send("解除归档成功！"),a.$parent.loadProjects()}),b.stopPropagation(),b.preventDefault(),!1}};var j=function(b){a.deleting=!0;var c=f.deleteProject({global_key:a.team.global_key,project_id:b.id},{});c.then(function(){a.$emit("project.remove"),d.success().send("删除成功！"),a.$parent.loadProjects()}),c["finally"](function(){a.deleting=!1})},k=function(b,c){a.archiving=!0;var e=f.archiveProject({global_key:a.team.global_key,project_id:b.id},{});e.then(function(b){d.success().send("归档成功！"),a.$parent.loadProjects()}),e["finally"](function(){a.archiving=!1})},l=function(b,c){if(c&&!a.transferring){a.transferring=!0;var e=f.exportProject({global_key:a.team.global_key,project_id:b.id,user_key:c},{});e.then(function(b){a.$emit("project.transfer"),d.success().send("迁出成功！"),a.$parent.loadProjects()}),e["finally"](function(){a.transferring=!1})}}}]),angular.module("app").directive("projectMemberRoleSelect",["$rootScope","$parse",function(a,b){return{scope:{project:"=",currentMember:"=",loadMembers:"&"},restrict:"E",replace:!0,controller:"ProjectMemberRoleSelectController",templateUrl:"common/directives/projectMemberRoleSelect/projectMemberRoleSelect.html",link:function(a,b,c){}}}]).controller("ProjectMemberRoleSelectController",["$rootScope","$scope","$filter","Project","Flash",function(a,b,c,d,e){var f=b.OWNER=a.OWNER,g=b.ADMIN=a.ADMIN,h=b.MEMBER=a.MEMBER,i=b.MEMBER_NO_CODE=a.MEMBER_NO_CODE;b.options=[{value:f,clazz:"owner",label:"项目所有者"},{value:g,clazz:"admin",label:"项目管理员"},{value:h,clazz:"member",label:"项目成员"},{value:i,clazz:"member-no-code",label:"受限成员"}];var j=function(a){var c={};return angular.forEach(b.options,function(b){b.value==a&&(c=b)}),c};b.project=b.project||a.PROJECT,b.$watch("project",function(){b.project=b.project||a.PROJECT}),b.$watch("currentMember",function(){b.current=j(b.currentMember.type)}),b.isAdminShow=function(){return b.project&&!b.project.is_public&&b.currentMember.type<b.project.current_user_role_id&&c("isRole")(b.project,g)},b.isNormalShow=function(){return!c("isRole")(b.project,g)||b.currentMember.type>=b.project.current_user_role_id&&c("isRole")(b.project,g)},b.isOptionShow=function(a){return a.value<b.project.current_user_role_id},b.isPublic=function(){return b.project&&b.project.is_public},b.updateMemberType=function(a,c){if(a){var f=d.updateMemberType({project_id:b.project.id,global_key:a.user&&a.user.global_key,type:c},{});f.then(function(a){0==a.code?(e.success().send("设置项目成员成功！"),b.loadMembers&&b.loadMembers()):e.success().send("设置项目成员失败,系统异常！")})}}}]),angular.module("app").directive("projectSelection",["Common",function(a){return{scope:{projects:"=",selected:"="},restrict:"E",replace:!0,templateUrl:"common/directives/projectSelection/projectSelection.html",link:function(b,c,d){b.selected=b.selected||[],b.onSelected=function(c){if(c)if(c.selected){var d=!!a.findOfId(b.selected,c.id);d||b.selected.push(c)}else b.selected=a.removeOfId(b.selected,c.id),c.selected=!1},b.remove=function(c){b.selected=a.removeOfId(b.selected,c.id),c.selected=!1}}}}]),angular.module("directives").directive("cgRandomBackground",["$rootScope",function(a){return{link:function(a,b){b.addClass("random-background")},controller:"RandomBackgroundController"}}]).controller("RandomBackgroundController",["$scope","$rootScope","$location","$localStorage","$q","WallPaper","Common","AccountAboutService",function(a,b,c,d,e,f,g,h){a.wall_papers=[];var i=function(){var b=e.defer();if(!$(".random-background").hasClass("account-background")){var c=6048e5;d.wallpapers_saved_time&&d.wall_papers&&(new Date).getTime()-d.wallpapers_saved_time<c?(a.wall_papers=d.wall_papers,b.resolve(j(a.wall_papers))):(d.$reset(),f.wall_paper({type:2,ratio:5},function(c){c.data&&(d.$default({wallpapers_saved_time:(new Date).getTime(),wall_papers:c.data}),a.wall_papers=c.data,b.resolve(j(a.wall_papers)))})),h.setPhotoBy(b.promise)}},j=function(a){var b=Math.round(Math.random()*a.length),c=a[b==a.length?b-1:b];return k(c),{link:c.group.link,author:c.group.author}},k=function(a){if(a){var b=$(".random-background");b.css("margin",0),b.css("padding",0),b.css("background","url("+a.url+") no-repeat center center fixed"),b.css("height","100%"),b.css("background-size","cover")}},l=function(){$(".random-background").attr("style","margin:0; padding:0")};b.$on("$routeChangeSuccess",function(){var a=g.isAccount(c);a?i():l()})}]),angular.module("directives").directive("cgReferResource",["Search","PROJECT","$injector","Common","ReferTaskService","$timeout",function(a,b,c,d,e,f){var g=6;return{link:function(h,i,j){var k=h.$eval(j.cgReferResource),l=b.resolve(c),m=h.$eval(j.onReferResourceSelect)||angular.noop;k&&(l=k.then?k:c.invoke(["$q",function(a){var b=a.defer();return h.$evalAsync(function(){b.resolve(k)}),b.promise}]));var n="refer_resource_modal_"+(new Date).getTime(),o=e.referModal(n);h.$watch(j.cgReferResource,function(a){a&&(l=a.then?a:c.invoke(["$q",function(b){var c=b.defer();return h.$evalAsync(function(){c.resolve(a)}),c.promise}]),o.locals({project:a,Project:l})),l.then(function(){r()})});var p=_.once(function(a){e.onModalSignal(n,"select.resource",function(b,c){f(function(){$("#"+n).modal("hide"),a("#"+c.code)})})}),q={remote_filter:_.debounce(function(b,c){var e=null,f=l.then(function(c){return e=c,a.resource(d.projectParams(c,{keyword:b,pageSize:g}))});f.then(function(a){var b=a.data&&a.data.list||[],f=b.map(function(a){return{code:a.code,title:d.html(a.title),type:a.target_type}});if(a.data.totalRow>g){var h={type:"More",project:e.id};f.push(h)}c(f)})},300),tpl_eval:function(a,b){if("More"===b.type)return'<li class="refer-resource-item more-resource" data-value="'+b.project+'">更多结果</li>';try{var c=['<span class="icon">',e.icons[b.type],"</span>"].join("");return a=['<li class="refer-resource-item popup ellipsis" data-value="#${code}">',c,'<span class="number">#${code}</span> <span class="title">${title}</span></li>'].join(""),a.replace(/\$\{([^\}]*)\}/g,function(a,c,d){return b[c]})}catch(d){return""}},before_insert:function(a,b,c,d){return b.is(".more-resource")?($("#"+n).modal("show"),p(d),void e.sendModalSignal(n,"key",c)):a},sorter:function(a,b){return b}},r=function(){$(i).data("atwho",null),i.atwho({at:"#",start_with_space:!1,limit:10,search_key:"show_content",callbacks:q})};i.on("shown.atwho",function(){m(!0),o.active()||o.activate({Project:l})}).on("hidden.atwho",function(){m(!1)}),h.$on("$destroy",function(){var a=$(i).data("atwho");a&&(a.close(),$(i).data("atwho",null)),o&&o.deactivate()})}}}]).controller("ReferTaskController",["$scope","ReferTaskService","$timeout","Search","Common","Pager",function(a,b,c,d,e,f){a.key=void 0,a.resource_id=0,a.resource_type="Task",a.project=void 0,a.loading=!1,a.loaded=!1,a.resources=[],a.max_count=0,a.cur_index=0,a.pager_id=(new Date).getTime();var g=f.instance(a.pager_id,a,0),h=function(b,c,f){a.loading=!0,a.loaded=!1,a.resources=[];var h=a.Project.then(function(g){a.project=g;var h=e.projectParams(g,{keyword:b,type:c||a.resource_type,pageSize:8,page:f||1});return d.resource(h)});h.then(function(b){a.resources=b.data&&b.data.list||[],a.max_count=a.resources.length,a.loaded=!0,g.optionsReady(b.data)}),h["finally"](function(){a.cur_index=0,a.loading=!1})};b.onModalSignal(a.id,"key",function(b,c){e.safeApply.call(a,function(){a.key=c}),h(c)}),g.onChange(function(b){h(a.key,a.resource_type,b)}),a.$watch("key",_.debounce(function(a){angular.isDefined(a)&&h(a)},300)),a.changeResourceType=function(b){a.resource_type=b,h(a.key,b)},a.chooseResource=function(c,d){return c||(c=a.resources[a.cur_index]),b.sendModalSignal(a.id,"select.resource",c),a.cur_index=0,d?(d.preventDefault(),!1):void 0};var i=function(b){return function(){a.resource_type=b,h(a.key,b)}};a.Project.then(function(b){b&&b.is_public&&(a.resource_type="PullRequest",a.tab_circle_callback=[i("PullRequest")])}),a.tab_circle_callback=[i("Task"),i("ProjectTopic"),i("ProjectFile"),i("MergeRequest")],a.onIndexChange=function(b){a.cur_index=b},a.search=function(){h(a.key,a.resource_type)}}]).service("ReferTaskService",["btfModal","$rootScope",function(a,b){var c=function(a,c,d){b.$on(a+"."+c,d)},d=function(a,c,d){b.$broadcast(a+"."+c,d)},e=function(b){var c={controller:"ReferTaskController",templateUrl:"common/directives/resource/tpl/resource_modal.html",resolve:{id:function(){return b}}},d=a(c);return d},f={Task:'<i class="resource tasks icon"></i>',MergeRequestBean:'<i class="resource coding icon merge-request"></i>',PullRequestBean:'<i class="resource coding icon pull-request"></i>',ProjectTopic:'<i class="resource icon chat"></i>',ProjectFile:'<i class="resource icon file"></i>'};return{referModal:e,sendModalSignal:d,onModalSignal:c,icons:f}}]),angular.module("directives").directive("referResourceLink",["Search","$rootScope","Common","ReferResourceLinkService","ReferTaskService",function(a,b,c,d,e){return{restrict:"C",link:function(b,f){var g=300,h=+f.html().replace(/\#/gi,""),i=f.attr("class").split(" "),j=d.type(i&&i.length>=2?i[1]:""),k=f.attr("href")||"",l=/^.*?\/(?:u|t)\/(.*?)\/p\/(.*?)\/.*$/,m=k.match(l);if(!m||3!==m.length)throw new Error("Can not match project information from refer resource link: "+k);var n={username:m[1],project_name:m[2]},o=_.debounce(function(){var b=$.extend(n,{code:h}),d=a.resourceByCode(b);d.then(function(a){if(a.data){var b=c.htmlToPlaintext(a.data.title),d=a.data.img,g=['<div style="word-break: break-all;line-height: 20px;position: relative;',d?'text-align: center;">':'">',d?'<div><img style="max-width: 100%;" src="'+d+'"/></div>':"",e.icons[j],b,"</div>"].join("");f.data("html",g).data("variation","small"),f.off("mouseenter"),f.is(".refer-resource-hover")?f.popup("show"):f.popup(),f.on("click",function(){f.popup("hide")})}}),d["catch"](function(){f.removeAttr("title"),f.popup("remove")})},g);f.on("mouseleave",function(){f.removeClass("refer-resource-hover")}),f.on("mouseenter",function(){f.addClass("refer-resource-hover"),o()}),b.$on("$destroy",function(){f.popup("remove")})},controller:"ReferResourceLinkController"}}]).controller("ReferResourceLinkController",["$scope","ReferResourceLinkService",function(a,b){}]).service("ReferResourceLinkService",["Common",function(a){var b=function(b){var c={task:"Task","merge-request-bean":"MergeRequestBean",mergerequestbean:"MergeRequestBean","pull-request-bean":"PullRequestBean",pullrequestbean:"PullRequestBean","project-topic":"ProjectTopic",projecttopic:"ProjectTopic","project-file":"ProjectFile",projectfile:"ProjectFile","default":"X"};return a.smartSwitch(c,b)};return{type:b}}]),angular.module("directives").directive("cgResourceReferenceList",["ResourceReference","Search","Common",function(a,b,c){var d=function(a){var b=a.project;return{username:b.owner_user_name,project_name:b.name,code:a.number|a.iid}},e=function(b){function e(){return b.resourceReferences.Task&&b.resourceReferences.Task.length>0||b.resourceReferences.ProjectTopic&&b.resourceReferences.ProjectTopic.length>0||b.resourceReferences.ProjectFile&&b.resourceReferences.ProjectFile.length>0||b.resourceReferences.MergeRequestBean&&b.resourceReferences.MergeRequestBean.length>0}function f(){b.refer_select="",$("#reference_select").select2({placeholder:"请选择",width:"250px",minimumInputLength:0,ajax:{url:"/api/u/"+b.bean.project.owner_user_name+"/p/"+b.bean.project.name+"/resource/search",dataType:"json",delay:250,data:function(a){return"#"==a[0]&&(a=a.substr(1)),{q:a,pageSize:6}},results:function(a){return{results:e(a.data.list)}},cache:!0},formatResult:function(a){var b;return b=[],b.push("<div class='ellipsis'><i class='"+h(a.target_type)+"'>"),b.push("</i><span style='color: #666'>#"+a.code+"</span>"),b.push("<span style='padding-left: 10px;font-weight: bold;' class='ellipsis'>"+a.title+"</span></div>"),b.join("")},formatSelection:function(a){var b;return b=[],b.push("<div class='ellipsis'><i class='"+h(a.target_type)+"'>"),b.push("</i><span style='color: #666'>#"+a.code+"</span>"),b.push("<span style='padding-left: 10px;font-weight: bold;' class='ellipsis'>"+a.title+"</span></div>"),b.join("")},dropdownCssClass:"bigdrop select-refer",escapeMarkup:function(a){return a}}),$("#reference_select").on("change",function(){b.refer_select=$(this).select2("val"),$(this).select2("val","");d(b.bean);a.add({username:b.bean.project.owner_user_name,project_name:b.bean.project.name,code:b.bean.number|b.bean.iid},{iid:0|parseInt(b.refer_select)},function(){g()})});var e=function(a){return a instanceof Array?(b.$parent.task&&(a=$.grep(a,function(a){return"Task"!=a.target_type||a.target_id!=b.$parent.task.id})),$.each(a,function(a,b){return b.id=b.code})):void 0},f="click."+c.uuid(),i=$(".add-refer");i.on(f,function(){return $("#reference_select").select2("open")}),b.$on("$destroy",function(){$("#reference_select").select2("destroy"),i.off(f)})}b.showList=!0,b.showAllResourceReferenceStyle=!1,b.$watch("bean",function(a){_.isEmpty(a)||(g(),f())}),b.$on("task.detail.change",function(){g()});var g=function(){var c=d(b.bean);a.list(c,function(a){b.resourceReferences=a.data,b.showResourceReferences=e()})};b.delReference=function(c){if(c&&b.showAdd&&confirm("确定取消关联："+c.title+" ？")){var f=d(b.bean);a["delete"](angular.extend(f,{iid:c.code}),function(){_.remove(b.resourceReferences.Task,function(a){return a.code==c.code}),_.remove(b.resourceReferences.ProjectTopic,function(a){return a.code==c.code}),_.remove(b.resourceReferences.ProjectFile,function(a){return a.code==c.code}),_.remove(b.resourceReferences.MergeRequestBean,function(a){return a.code==c.code}),b.showResourceReferences=e()})}},b.showAllResourceReference=function(){b.showAllResourceReferenceStyle=!0},b.imgPopup=function(a){return a.img?'<div style="word-break: break-all;line-height: 20px;position: relative;text-align: center;"><div><img style="max-width: 100%;" src="'+a.img+'"/></div></div>':void 0};var h=function(a){var b;return b={Task:function(){return"tasks icon"},ProjectTopic:function(){return"chat icon"},ProjectFile:function(){return"file icon"},MergeRequestBean:function(){return"coding merge-request icon"}},c.smartSwitch(b,a,a)}};return{scope:{bean:"=self",showAdd:"="},restrict:"EA",templateUrl:"common/directives/resourceReferenceList/tpl/resourceReferenceList.html",link:e}}]),angular.module("directives").directive("cgImageRotate",function(){return{restrict:"A",link:function(a,b,c){a.$watch(c.cgImageRotate,function(a){if(a){var c=b[0];c.onload=function(){var a=b.parent().width(),d=$('<div class="rotate-image-wrapper">');d.css({width:a,height:c.height}),b.wrapAll(d);var e=c.width,f=c.height;b.data("height",c.height),b.data("width",c.width),b.data("degrees",0),d.attr("selectstart",function(a){return!1}),b.on("click",function(){var c=+b.data("degrees")+90;b.data("degrees",c);var d=f>e,g=c/90%2!==0,h=b.parents(".rotate-image-wrapper");g?h.addClass("horizon"):h.removeClass("horizon");var i=e/f,j=Math.abs((e-f)/2);d?f>a?(i=a/f,b.css({top:-j*i+"px",left:j*i+"px",height:a})):b.css({}):b.css({top:j+"px",left:-j+"px"});var k="rotate("+c+"deg)";b.css({"-moz-transform":k,"-webkit-transform":k,"-o-transform":k,"-ms-transform":k})})},c.src=a}})}}}),angular.module("directives").directive("cgScrollTo",["$timeout",function(a){function b(a){return function(){var b=angular.element(a.container),c="number"==typeof a.scrollTo?a.scrollTo:angular.element(a.scrollTo),d="number"==typeof c?c:c.offset().top-a.offset;b.animate({scrollTop:d},a.duration,a.easing,function(){"function"==typeof callback&&callback.call(this)})}}return{restrict:"A",link:function(c,d,e){var f=angular.extend({container:"html, body",scrollTo:angular.element("#"+e.cgScrollTo),offset:0,duration:300,easing:"swing"},e);d.on("click",function(){a(b(f))})}}}]),angular.module("directives").directive("cgScrollToTop",[function(){var a={setting:{startline:1,scrollto:0,scrollduration:80,fadeduration:[500,100]},controlHTML:'<img id="scroll-to-top-image" src="https://dn-coding-net-production-static.qbox.me/static/b9e996dc8a17687d1cc968333cc5854b.gif" style="width:50px;" />',controlattrs:{offsetx:45,offsety:165},anchorkeyword:"#top",state:{isvisible:!1,shouldvisible:!1},before:angular.noop,after:angular.noop,flying:!1,scrollup:function(){var a=this;this.flying=!0,this.before&&this.before(),this.cssfixedsupport||this.$control.css({opacity:0});var b=isNaN(this.setting.scrollto)?this.setting.scrollto:parseInt(this.setting.scrollto);b="string"==typeof b&&1==jQuery("#"+b).length?jQuery("#"+b).offset().top:0,this.$body.animate({scrollTop:b},this.setting.scrollduration,function(){a.flying=!1})},keepfixed:function(){var a=jQuery(window),b=a.scrollLeft()+a.width()-this.$control.width()-this.controlattrs.offsetx,c=a.scrollTop()+a.height()-this.$control.height()-this.controlattrs.offsety;this.$control.css({left:b+"px",top:c+"px"})},togglecontrol:function(){var a=jQuery(window).scrollTop();this.cssfixedsupport||this.keepfixed(),this.state.shouldvisible=a>=this.setting.startline?!0:!1,this.state.shouldvisible&&!this.state.isvisible?(this.$control.stop().show(),this.state.isvisible=!0):0==this.state.shouldvisible&&this.state.isvisible&&!this.flying&&this.fadeout()},fadeout:function(){var a=this,b=$(window).height()+100,c=function(){a.$control.stop().hide().css({bottom:a.controlattrs.offsety,right:a.controlattrs.offsetx,opacity:1}),a.state.isvisible=!1,a.after&&a.after()};this.byClick?this.$control.animate({bottom:b+"px",opacity:0},1500,c):c(),this.byClick=!1},offset:function(b,c){a.controlattrs.offsetx=b,a.controlattrs.offsety=c},init:function(){jQuery(document).ready(function(b){var c=a,d=document.all;c.cssfixedsupport=!d||d&&"CSS1Compat"==document.compatMode&&window.XMLHttpRequest,c.$body=b(window.opera?"CSS1Compat"==document.compatMode?"html":"body":"html,body"),c.$control=b('<div id="topcontrol">'+c.controlHTML+"</div>").css({zindex:999,position:c.cssfixedsupport?"fixed":"absolute",bottom:c.controlattrs.offsety,right:c.controlattrs.offsetx,display:"none",cursor:"pointer"}).attr({title:"Coding 超人飞向外太空拯救宇宙！"}).click(function(){return c.byClick=!0,c.scrollup(),!1}).appendTo("body"),document.all&&!window.XMLHttpRequest&&""!=c.$control.text()&&c.$control.css({width:c.$control.width()}),c.togglecontrol(),b('a[href="'+c.anchorkeyword+'"]').click(function(){return c.byClick=!0,c.scrollup(),!1}),b(window).bind("scroll resize",function(a){c.togglecontrol()})})},destroy:function(){this.$control.remove()}};return{link:function(b){a.before=function(){$("#scroll-to-top-image").attr("src","https://dn-coding-net-production-static.qbox.me/static/7d64ac8008464a746b75a83348950ec8.gif")},a.after=function(){$("#scroll-to-top-image").attr("src","https://dn-coding-net-production-static.qbox.me/static/b9e996dc8a17687d1cc968333cc5854b.gif")},a.init(),b.$on("$destroy",function(){a.destroy()})}}}]),angular.module("directives").directive("cgPerfectScrollBar",[function(){return{scope:{update:"=cgPerfectScrollBar"},link:function(a,b){b.perfectScrollbar(),a.$watch("update",function(a){a&&(b[0].scrollTop=0,b[0].scrollLeft=0,b.perfectScrollbar("update"))})}}}]),angular.module("directives").directive("cgAdvanceEsearch",["$document","$window","Common","$timeout",function(a,b,c,d){var e=function(a,e){var f=e.find("input, textarea"),g=e.find(".search-input"),h=e.find(".search-dropdown");a.hover=!1,a.focus=!1,f.attr("autocomplete","off"),e.on("mouseenter",".search-dropdown",function(){c.safeApply.call(a,function(){a.hover=!0})}),e.on("mouseleave",".search-dropdown",function(){c.safeApply.call(a,function(){a.hover=!1})}),f.on("blur",function(){c.safeApply.call(a,function(){a.focus=!1,d(function(){a.prefix&&(a.prefix.hidden=!1),a.groups=[],a.cur_item_id=null,a.search_text=""},300)})}),f.on("focus",function(){c.safeApply.call(a,function(){a.focus=!0})}),$("#quick-search .search-dropdown").on("mousedown",function(a){a.target.href&&(location.href=a.target.href)}),e.on("click",".advance-search-item",function(){c.safeApply.call(a,function(){a.hover=!1,d(function(){a.search_text=""},100)})}),f.on("keydown",function(b){var d=8,e=27;if(b.keyCode===d&&(a.typing=!0),angular.isUndefined(f[0].getCaretPosition))throw new Error("cg-textarea-editable is required on input/textarea!");b.keyCode===d&&0===f[0].getCaretPosition()?c.safeApply.call(a,function(){a.prefix&&(a.prefix.hidden=!0),a.groups=[],a.cur_item_id=null,a.searchNow(a.search_text)}):b.keyCode===e&&f.blur()}).on("keypress",function(b){a.typing=!0});var i=function(){var a=window.innerHeight-80;return a>0?a:100},j=function(){h.css("max-height",i())};$(b).on("resize",j),h.css("max-height",i()),a.$on("$destroy",function(){f.off("focus"),f.off("blur"),e.off("mouseenter"),e.off("mouseleave"),$(b).off("resize",j)}),a.setSearching=function(a){a?g.addClass("searching"):g.removeClass("searching")}};return{link:e,controller:"CgAdvanceESearchController",scope:{search_text:"=ngModel",force_show:"=forceShow"},transclude:!0,replace:!0,restrict:"A",require:"ngModel",templateUrl:"common/directives/search/tpl/search.html"}}]).controller("CgAdvanceESearchController",["$rootScope","$scope","ESearchDropdownService","Common","$timeout","ESearch","ESearchGroupBuilder","$location",function(a,b,c,d,e,f,g,h){var i="/search";b.groups=[],b.items=[],b.start_index=0,b.cur_item_id="",b.loading=!1,b.prefix=!1,b.typing=!1,b.showDropdown=function(){return b.hover&&!b.focus?(b.setSearching(b.groups.length>0&&b.search_text.length>0),!0):(b.setSearching(b.focus&&b.groups.length>0&&b.search_text.length>0),b.focus)};var j=function(){angular.forEach(b.items,function(a){a.active=!1})},k=function(a){j(),0>a||(b.items[a].active=!0)};b.onIndexChange=function(a){a-=1,k(a),0!==b.items.length&&b.items[a]&&(b.cur_item_id=b.items[a].id)};var l=function(){h.search("q",null).search("project",null).search("user",null).search("type",null)};b.onIndexEnter=function(a){if(a-=1,-1===a&&(b.showPrefix()?h.path(i).search("q",b.search_text).search("type","project").search("project",b.prefix.name).search("user",b.prefix.owner_user_name):(l(),h.path(i).search("q",b.search_text).search("type","project")),b.prefix=!1),-1!==a){if(0===b.items.length)return;var c=b.items[a],d=c.url;angular.isFunction(c.action)?c.action.call(c):d&&(h.path(d),l(),j())}b.groups=[],b.cur_item_id=null,b.search_text="",b.hover=!1,b.reset_start_index=(new Date).getTime()},b.showPrefix=function(){return b.prefix&&!b.prefix.hidden},b.submit=function(a){return b.cur_item_id?(a.preventDefault(),!1):void(b.showPrefix()&&(b.prefix.hidden=!0))},b.$watch("groups",function(a){a.length>0&&(b.items=c.items(b.groups),b.items&&b.items[0]&&e(function(){k(-1),b.cur_item_id=b.items[0].id},100))});var m=function(a){var b=0;return angular.forEach(a,function(a){a&&a.resources&&a.resources.totalRow>0&&(b+=a.resources.totalRow)}),0===b},n=function(e,f){var j=void 0;if(/(?:u|t)\/([^\/]+)\/p\/([^\/]+)\/git/.test(h.path())&&a.DEPOT&&a.DEPOT.hasCommits&&a.PROJECT&&_.indexOf(a.PROJECT.test,"code-search")>-1){var k="/search?type=code&project="+b.prefix.name+"&user="+b.prefix.owner_user_name,l=c.itemOfMore(d.uuid(),"代码",k,function(){h.path(i).search("q",b.search_text),h.search("type","code").search("project",b.prefix.name).search("user",b.prefix.owner_user_name)});j=c.group(d.uuid(),"simple","代码",[l])}if(!j&&(!e||m(e))){var n=g.ofType(null,c.ITEM_TYPES.NONE,null);return void(b.groups=[n])}b.groups=[],j&&b.groups.push(j),b.cur_item_id=null,angular.forEach(e,function(a){if(a.resources&&a.resources.totalRow>0){var e,f=a.type;"resourceId"==f&&(e=a.resourceType.list[0],a.resources.list[0].type=e);var j=g.ofType(a.resources,f,a.title);if(c.SUPPORT_MORE_SEARCH_TYPES.indexOf(f)>=0&&"resourceId"!==f){var k=i+"?type="+f;b.showPrefix()&&(k+="&project="+b.prefix.name+"&user="+b.prefix.owner_user_name),j.addItem(c.itemOfMore(d.uuid(),a.title,k,function(){h.path(i).search("q",b.search_text),b.showPrefix()?h.search("project",b.prefix.name).search("user",b.prefix.owner_user_name):h.search("project",null).search("user",null),h.search("type",f),b.prefix=!1}))}b.groups.push(j)}})},o=function(a){var b=[["task","task"],["topic","topic"],["attachment","file"],["member","friend"],["pp","tweet"],["tweet","tweet"],["relationship","friend"],["following","friend"],["merges","mr"],["pulls","pr"]],c=[],d=a.resourceId;d&&(d.resources&&(d.type="resourceId",c.push(d)),delete a.resourceId);for(var e=0,f=b.length;f>e;e++){var g=new RegExp(b[e][0]),i=b[e][1];if(g.test(h.path())&&a[i]){var j=a[i];j.type=i,c.push(j),delete a[i];break}}return angular.forEach(a,function(a,b){a.type=b,c.push(a)}),c};b.searchNow=function(a){if(b.showDropdown(),angular.isDefined(a)&&a.length>0){b.reset_start_index=(new Date).getTime(),b.loading=!0;var c=null;if(h.search().user||b.showPrefix()){var d,e;d=b.showPrefix()?b.prefix.owner_user_name+"/"+b.prefix.name:h.search().user+"/"+h.search().project,e=void 0!==b.force_show&&a.match(/^#\d+$/)?"none":"project_topics,tasks,files,friends,merge_requests,pull_requests",c=f.ofProject({project:d,q:a,types:e,page:1,pageSize:5},function(a){var c={task:{resources:a.data.tasks,title:"任务"},topic:{resources:a.data.project_topics,title:"讨论"},file:{resources:a.data.files,title:"文件"},friend:{resources:a.data.friends,title:"成员"},resourceId:{resources:a.data.resourceId,title:"资源",resourceType:a.data["resourceId:type"]},mr:{resources:a.data.merge_requests,title:"合并请求"},pr:{resources:a.data.pull_requests,title:"PULL请求"}};_.isEmpty(c.resourceId.resources)||(c.resourceId.resources.list[0].project={project_path:b.prefix.project_path}),n(o(c),!0)})}else c=f.all({q:a,types:"projects,project_topics,tasks,tweets,files,friends,merge_requests,pull_requests",page:1,pageSize:5},function(a){var b={project:{resources:a.data.projects,title:"项目"},task:{resources:a.data.tasks,title:"任务"},topic:{resources:a.data.project_topics,title:"讨论"},file:{resources:a.data.files,title:"文件"},tweet:{resources:a.data.tweets,title:"冒泡"},friend:{resources:a.data.friends,title:"用户"},mr:{resources:a.data.merge_requests,title:"合并请求"},pr:{resources:a.data.pull_requests,title:"PULL请求"}};n(o(b))});c["finally"](function(){b.loading=!1,b.typing=!1})}},b.$watch("search_text",_.debounce(b.searchNow,300));var p=a.$watch("PROJECT",function(a){angular.isDefined(a)?b.prefix=angular.copy(a):b.prefix=!1});b.suffix=function(a){return a?a.substring(a.lastIndexOf(".")+1):"???"},b.$on("$destroy",function(){p()})}]).service("ESearchDropdownService",["$rootScope","TaskCommentService","$filter",function(a,b,c){function d(a,b,c,d,e,f,g,h){this.id=a,this.type=b,this.icon=c,this.title=d,this.subtitle=e,this.url=f,this.others=g,this.action=h}function e(a,b,c,d){this.id=a,this.type=b||f.LIST,this.title=c,this.items=d||[]}var f={LIST:"list",SIMPLE:"simple",MORE:"simple:more"},g={SIMPLE:"simple",TOPIC:"topic",PROJECT:"project",TWEET:"tweet",FRIEND:"friend",TASK:"task",MR:"mr",PR:"pr",RESOURCE:"resource",FILE:"file",MORE:"more",NONE:"none",RESOURCE_ID:"resourceId"},h=[g.SIMPLE,g.TOPIC,g.TASK,g.FILE,g.MORE,g.PROJECT,g.TWEET,g.FRIEND,g.MR,g.PR,g.RESOURCE,g.NONE],i=[g.TOPIC,g.TASK,g.FILE,g.PROJECT,g.TWEET,g.FRIEND,g.MR,g.PR,g.RESOURCE];d.prototype.parent=function(a){this.$parent=a},d.prototype.tpl=function(){return h.indexOf(this.type)>=0?"common/directives/search/tpl/items/"+this.type+".html":"common/directives/search/tpl/items/default.html"},d.prototype.clazz=function(){var a=[this.type];return this.active&&a.push("active"),a};var j=function(a,e,f,h,i,j,k,l){if(arguments.length>1&&arguments.length<=8){var h=c("htmlToPlainText")(b.text(h,!0));return e==g.TASK&&2==k.status&&(h="<del>"+h+"</del>"),new d(a,e,f,h,c("htmlToPlainText")(b.text(i,!0)),j,k,l)}if(1===arguments.length)throw new Error("Construct group dropdown item from resource object require resolved!")},k=function(a,b,c,e){return new d(a,g.SIMPLE,"",b,"",c,"",e)};e.prototype.addItem=function(a){a.parent(this),this.items.push(a)},e.prototype.clazz=function(){return this.type.split(":")};var l=function(a,b,c,d){return new e(a,b,c,d)},m=function(a){var b=[];return angular.forEach(a,function(a){b=b.concat(a.items)}),b};return{item:j,itemOfMore:k,items:m,group:l,GROUP_TYPES:f,ITEM_TYPES:g,SUPPORT_MORE_SEARCH_TYPES:i}}]).service("ESearchGroupBuilder",["ESearchDropdownService","Common","$rootScope",function(a,b,c){var d=(c.PROJECT,c.USER,""),e="";c.$watch("PROJECT",function(a){a&&(d=a?a.project_path:"",e=a?a.depot_path:"")});var f={};f[a.ITEM_TYPES.PROJECT]=function(c){var d=a.group(b.uuid(),a.GROUP_TYPES.LIST);return angular.forEach(c.list,function(c){if(c){var e=c.project_path.match(/[ut]\/([^\/]*)\/p/i),f="undefined";e&&2==e.length&&(f=e[1]),d.addItem(a.item(b.uuid(),a.ITEM_TYPES.PROJECT,c.icon,f+"/"+c.name,c.description,c.project_path,c))}}),d},f[a.ITEM_TYPES.TASK]=function(c){var d=a.group(b.uuid(),a.GROUP_TYPES.LIST);return angular.forEach(c.list,function(c){c&&c.project&&d.addItem(a.item(b.uuid(),a.ITEM_TYPES.TASK,"",c.content,c.description&&$.isArray(c.description)&&c.description[0]||"",c.project.project_path+"/task/"+c.id,c))}),d},f[a.ITEM_TYPES.TOPIC]=function(c){var d=a.group(b.uuid(),a.GROUP_TYPES.LIST);return angular.forEach(c.list,function(c){c&&c.project&&d.addItem(a.item(b.uuid(),a.ITEM_TYPES.TOPIC,"",c.title,c.content,c.project.project_path+"/topic/"+c.id,c))}),d},f[a.ITEM_TYPES.TWEET]=function(c){var d=a.group(b.uuid(),a.GROUP_TYPES.LIST);return angular.forEach(c.list,function(c){c&&d.addItem(a.item(b.uuid(),a.ITEM_TYPES.TWEET,"",c.content,"",c.path,c))}),d},f[a.ITEM_TYPES.FRIEND]=function(c){var d=a.group(b.uuid(),a.GROUP_TYPES.LIST);return angular.forEach(c.list,function(c){c&&d.addItem(a.item(b.uuid(),a.ITEM_TYPES.FRIEND,c.avatar,c.name,c.global_key,c.path,c))}),d};var g=function(c,d,f){var g=a.group(b.uuid(),a.GROUP_TYPES.LIST,d);return angular.forEach(c.list,function(c){c&&(c.path||("MR"==d?c.path=[e,"/merge/",c.iid].join(""):"PR"==d&&(c.path=[e,"/pull/",c.iid].join(""))),g.addItem(a.item(b.uuid(),f,"",c.title,"","CANCEL"==c.merge_status?"":c.path,c)))}),g};f[a.ITEM_TYPES.MR]=function(b){return g(b,"MR",a.ITEM_TYPES.MR)},f[a.ITEM_TYPES.PR]=function(b){return g(b,"PR",a.ITEM_TYPES.PR)},f[a.ITEM_TYPES.FILE]=function(c){var e=a.group(b.uuid(),a.GROUP_TYPES.LIST);return angular.forEach(c.list,function(c){c&&(c.path||(c.path=[d,"/attachment",null==c.parent_id||0==c.parent_id?"/default":"/"+c.parent_id,"/preview/"+c.parent_id].join("")),e.addItem(a.item(b.uuid(),a.ITEM_TYPES.FILE,c.preview,c.name,"",c.path,c)))}),e},f[a.ITEM_TYPES.NONE]=function(){var c=a.group(b.uuid(),a.GROUP_TYPES.SIMPLE);return c.addItem(a.item(b.uuid(),a.ITEM_TYPES.NONE)),c},f[a.ITEM_TYPES.RESOURCE_ID]=function(b){var c=null,d={File:a.ITEM_TYPES.FILE,PullRequestBean:a.ITEM_TYPES.PR,MergeRequestBean:a.ITEM_TYPES.MR,ProjectTopic:a.ITEM_TYPES.TOPIC,Task:a.ITEM_TYPES.TASK};if(b&&b.list&&b.list.length){var e=b.list[0];c=(f[d[e.type]]||_.noop)(b)}return c};var h=function(a,c,d){var e=b.smartSwitch(f,c,a);if(e)return d&&(e.title=d),e};return{ofType:h}}]),angular.module("directives").directive("cgSearchFilter",["Common","$timeout",function(a,b){return{scope:{content:"=filter",showSortKey:"=showSortKey",callback:"&"},link:function(c,d,e){c.searchInput="",c.value=c.content.result,c.need_init=!1;var f=$(d).find(".dropdown");b(function(){f.dropdown({selector:{input:'> input[type="hidden"]',item:".menu .item",menu:".menu",text:"> .text"},className:{active:""},onHide:function(){a.safeApply.call(c,function(){c.searchInput=""})},onShow:function(){a.safeApply.call(c,function(){c.need_init=!0})}})}),c.$watch("[content.result, content.order]",function(a,b){var d=a[0],e=a[1];b[0],b[1];d!==c.value&&angular.forEach(c.content.data,function(a){if("sort"===c.content.type)a.selected=a.key===d&&(a.order||"desc")===e;else{var b=d.split(",");b.length>1?a.selected=_.includes(b,a.key):a.selected=a.key===d}}),c.value=d,f.dropdown("hide")}),c.recent=localStorage.getItem("task-center-filter-recent")||"{}",c.recent=JSON.parse(c.recent),c.toggleSelect=function(a){if(a.excluded){for(var b=c.content.data.length-1;b>=0;b--)c.content.data[b].selected=!1;
a.selected=!0,c.content.result=a.key.toString(),"sort"===c.content.type&&("asc"===a.order?c.content.order="asc":c.content.order="desc")}else{if(!c.recent[a.type+"-"+a.key]){var d=[];for(angular.forEach(c.recent,function(a,b){0==b.indexOf(a.type)&&(d.push(a),delete c.recent[b])}),d.push(a);d.length>5;)d.shift();angular.forEach(d,function(a,b){c.recent[a.type+"-"+a.key]=a}),localStorage.setItem("task-center-filter-recent",JSON.stringify(c.recent))}for(var b=c.content.data.length-1;b>=0;b--){var e=c.content.data[b];e.excluded&&(e.selected=!1)}a.selected=!a.selected;for(var f="",b=0,g=c.content.data.length;g>b;b++){var e=c.content.data[b];e.selected&&(f+=e.key.toString()+",")}if(""===f){var e=c.content.data[0];e.selected=!0,c.content.result=e.key.toString()}else c.content.result=f.substring(0,f.length-1)}c.callback.call()}},templateUrl:"common/directives/search/tpl/search_filter.html"}}]),angular.module("directives").directive("cgSearchHighlight",function(){return{scope:{content:"=cgSearchHighlight"},link:function(a,b,c){var d=b.find(".esearch-highlight-wrapper");a.$watch("content",function(a){if(angular.isDefined(a)){var b=d.html();b=b.replace(/&lt;em&gt;/gi,"<em>"),b=b.replace(/&lt;\/em&gt;/gi,"</em>"),b.length>=100&&(b+="..."),d.html(b)}})},template:'<span class="esearch-highlight-wrapper" ng-bind="content"></span>'}}),angular.module("directives").directive("selectMember",["$rootScope",function(a){return{scope:{project:"=",user:"=",selected_users:"=ngModel",max_member:"=maxMember",member_users:"=memberUsers",showButton:"="},restrict:"E",replace:!0,controller:"SelectMemberDirectiveController",templateUrl:"common/directives/selectMember/selectMember.html",link:function(a,b,c){}}}]).controller("SelectMemberDirectiveController",["$scope","$rootScope","Project","Errors","Common","User","InviteFriendService","RegisterService","Flash","Projects",function(a,b,c,d,e,f,g,h,i,j){var k=(a.user,a.project);a.showButton=a.showButton||!1,a.max_member=a.max_member||1e3;var l=function(){a.projects=[],a.loading_projects=!1,a.friends=[],a.selected_users=[],a.key="",a.loading=!1,a.loaded=!1,a.selected_menu=null};l();var m=function(b){return $.map(b,function(b){var c=b;return $.each(a.selected_users,function(a,d){d.id==b.id&&(c.selected=!0)}),c})},n=function(){a.loading_projects=!0,a.projects=[];var b=j.query({page:1,pageSize:100});if(k){var d=c.members({id:k.id});b=d.then(function(b){var c=b.data&&b.data.list||[];return a.member_users=e.m2u(c),j.query({page:1,pageSize:100})})}return b.then(function(b){var c=b.data&&b.data.list||[];a.projects=[],angular.forEach(c,function(b){!k||k&&b.id!==k.id?a.projects.push(b):a.max_member=b.max_member})}),b["finally"](function(){a.loading_projects=!1}),b};n();var o=function(b){var c=!!e.findOfId(a.member_users,b.id);return c?b.is_member=!0:b.is_member=!1,c};a.loadFriend=function(b){b.length>0?(a.selected_menu=null,q(function(){return f.search({key:b})})):(a.friends=[],a.loaded=!1)},a.selectFriend=function(b){if(b.is_member)return void a.removeSelected(b);if(b.selected=!b.selected,b.selected){if(a.member_size<=0)return void(b.selected=!1);a.selected_users.splice(0,0,b),p()}else a.removeSelected(b)};var p=function(){var b=a.max_member-a.selected_users.length-a.member_users.length;a.member_size=0>=b?0:b};a.removeSelected=function(b,c){return b.selected=!1,a.friends=e.replaceWith(a.friends,b),a.selected_users=e.removeOfId(a.selected_users,b.id),p(),c?(c.stopPropagation(),!1):void 0};var q=function(b,c){a.loading=!0,a.loaded=!1,a.friends=[];var d=b&&b();return d&&d.then(function(b){var d=b.data&&angular.isArray(b.data)?b.data:b.data.list||[];d=c&&c(d)||d,angular.forEach(d,function(a){a.is_member=o(a)}),a.friends=m(d||[])})&&d["finally"](function(){a.loaded=!0,a.loading=!1}),d};a.loadFriends=function(b){a.selected_menu="friend",a.key="",q(function(){return f.friends({page:b||1,pageSize:1e3})})},a.loadFollowers=function(b){a.selected_menu="follower",a.key="",q(function(){return f.followers({page:b||1,pageSize:1e3})})},a.loadProjectMembers=function(b){a.selected_menu=b,a.key="",q(function(){return c.members({id:b})},function(a){return e.m2u(a)})},a.selectMenuIs=function(a,b){return"member"===a&&"undefined"==typeof b?!1:isNaN(this.selected_menu)?a===this.selected_menu:"member"===a&&b===this.selected_menu},a.selectUserTitle=function(a){return a.name+(a.is_member?"已加入该项目":"")},a.isEmail=function(b){return h.isEmail(b)&&a.user.email!==b},a.$watch("selected_users",function(){0==a.selected_users.length&&angular.forEach(a.friends,function(a,b){a.selected=!1})}),a.$watch("member_users",function(){angular.forEach(a.friends,function(a,b){o(a)})})}]),appDirective.directive("cgDropdown",["Common","$timeout",function(a,b){return{link:function(c,d,e){var f=e.cgOnChange&&c.$eval(e.cgOnChange)||angular.noop,g=c.$eval(e.dropdownSetting)||{};f&&(g.onChange=function(b){a.safeApply.call(c,function(){f(c,b)})}),e.cgDropdown?c.$watch(e.cgDropdown,function(a){angular.isArray(a)&&0===a.length||angular.isDefined(a)&&b(function(){d.dropdown(g)},300)}):d.dropdown(g),c.$on("$destroy",function(){d.dropdown("hide")})}}}]),appDirective.directive("cgUiDropdown",["Common",function(a){return{scope:{setting:"=cgUiDropdown"},link:function(a,b){b.dropdown(a.setting),a.setting.close=function(){b.dropdown("hide")},a.setting.show=function(){b.dropdown("show")},a.$on("$destroy",function(){b.dropdown("hide")})}}}]),angular.module("directives").directive("cgModal",[function(){return{scope:{instance:"=cgModal"},link:function(a,b){var c=$(b),d=a.instance;d&&(c.attr("id",d.id),d.$$modal_deferred.resolve(c),d.removeModal=function(){a.$emit("ui.modal.remove",d.id),$("#"+d.id).remove()},c.modal("setting",d.setting||{}))}}}]).factory("UIModal",["Common","$q",function(a,b){function c(c,d){this.id=c||"modal-"+a.uuid(),this.setting=d||{},this.handlers={},this.$$modal_deferred=b.defer(),this.$$modal=this.$$modal_deferred.promise}return c.prototype={action:function(){var a=arguments;this.$$modal.then(function(b){b.modal.apply(b,a)})},on:function(b,c){var d="on"+a.capitalize(b),e={};return e[d]=c,this.$$modal.then(function(a){a.modal("setting",e)}),this},off:function(b){var c="on"+a.capitalize(b),d={};return d[c]=angular.noop,this.$$modal.then(function(a){a.modal("setting",d)}),this},toggle:function(){this.$$modal.then(function(a){var b=a.modal("is active");a.modal(b?"hide":"show")})},remove:function(){var a=this;this.$$modal.then(function(){a.removeModal()})}},c}]).service("ModalService",["UIModal","$rootScope",function(a,b){var c={},d=function(){var b,d;2===arguments.length&&(b=arguments[0],d=arguments[1]),1===arguments.length&&(angular.isString(arguments[0])?b=arguments[0]:d=arguments[0]),c[b]&&angular.isFunction(c[b].removeModal)&&c[b].removeModal();var e=new a(b,d);return c[e.id]=e,e},e=function(a){return c[a]},f=function(a){delete c[a]};return b.$on("ui.modal.remove",function(a,b){c[b]&&f(b)}),{get:e,instance:d,remove:f}}]),angular.module("directives").directive("cgSemanticuiModal",[function(){return{scope:{setting:"=cgSemanticuiModal",modal:"=modal"},link:function(a,b){a.modal=$(b),a.$watch("setting",function(){a.modal.modal("setting",a.setting)}),a.$on("$destroy",function(){a.modal.remove()})}}}]),angular.module("directives").directive("cgPopup",["$timeout",function(a){return{scope:{opt:"=cgPopup",on:"=on",id:"@template",position:"@position"},link:function(b,c,d){var e=b.opt,f=b.on;if(e=e||{on:f||"hover"},f&&(e.on=f),b.position&&c.data("position",b.position),b.id){var g=$(b.id).hide();a(function(){c.data("html",g.html())},1500)}c.popup(e),b.$parent&&b.$parent.$on("$destroy",function(){c.popup("remove")})},priority:0}}]),angular.module("directives").directive("cgShowMore",[function(){return{scope:{content:"=cgShowMore",limitTo:"@limitTo",canShowMore:"&canShowMore",clickable:"&clickable"},link:function(a){a.limitTo||(a.limitTo=200),"undefined"==typeof a.canShowMore&&(a.canShowMore=!0),a.show=!1,a.toggleShow=function(){var b=a.clickable();(void 0===b||b)&&(a.show=!a.show)}},templateUrl:"common/directives/showMore/tpl/more.html"}}]),angular.module("directives").directive("cgTagColor",[function(){var a=function(a,b){a.css("background-color",b);var c=a.css("background-color"),d=c.match(/\d+/g),e=d[0],f=d[1],g=d[2];a.css("background","rgb("+[e,f,g].join(",")+")");var h=Math.floor(.299*e+.587*f+.114*g);a.css("color",186>h?"white":"black")};return{scope:{color:"=cgTagColor"},link:function(b,c){b.$watch("color",function(b){angular.isDefined(b)&&a(c,b)})}}}]),angular.module("directives").directive("cgTagDropdown",[function(){return{scope:{items:"=cgTagDropdown",onAdd:"=onTagAdd",onRemove:"=onTagRemove",onCreate:"=onTagCreate",left:"@left"},link:function(a,b){var c=b.find(".ui.dropdown.tag-dropdown"),d=b.find(".search input");c.dropdown({onShow:function(){d.focus()}})},templateUrl:"common/directives/tag/tpl/dropdown.html",controller:"TagDropdownController",transclude:!0}}]).controller("TagDropdownController",["$scope","TagDropdownService","Common","$filter","TopicTagEditorService","$rootScope",function(a,b,c,d,e,f){a.searchTag={name:""},a.cur_index=0,a.random_color=b.randomColor(),a.onSelectIndexChange=function(b){a.cur_index=b||0;var c=d("filter")(a.items,a.searchTag);0===c.length&&(a.cur_index=0)};var g=function(b){c.safeApply.call(a,function(){b.active?a.onAdd(b):a.onRemove(b)})};a.onSelectIndexEnter=function(b,c){if(!isNaN(b)){var h=d("filter")(a.items,a.searchTag);if(0===h.length&&a.searchTag.name.length>0){var i={name:a.searchTag.name,color:a.random_color},j=a.onCreate&&a.onCreate(i)||e.onTagCreate(f.PROJECT,a,i),k=j.then(function(b){var c=b.data||0;return i.id=c,a.onAdd(i)});k.then(function(){a.searchTag.name="",a.changeColor()})}else c[b]&&(c[b].active=!c[b].active,g(c[b]))}},a.$watch("searchTag.name",function(b){angular.isDefined(b)&&(a.cur_index=0)}),a.toggleActive=function(a){a.active=!a.active,g(a)},a.changeColor=function(){a.random_color=b.randomColor()}}]).service("TagDropdownService",[function(){var a=function(){for(var a="0123456789ABCDEF".split(""),b="#",c=0;6>c;c++)b+=a[Math.floor(16*Math.random())];return b};return{randomColor:a}}]),angular.module("directives").directive("cgTagEditor",[function(){return{scope:{current_tags:"=cgTagEditor",tags:"=tags",onAdd:"=onTagAdd",onRemove:"=onTagRemove",onSelect:"=onTagSelect",onCreate:"=onTagCreate"},templateUrl:function(a,b){return"common/directives/tag/tpl/"+(b.mode?b.mode:"editor")+".html"},controller:"TopicTagEditorController",replace:!0}}]).controller("TopicTagEditorController",["$scope","Topic","Common","TopicTagEditorService",function(a,b,c,d){a.tag_editing=!1,a.selected_tags=[],a.update_scrollbar=null,a.all_tags=[],a.updateScrollbar=function(){a.update_scrollbar=(new Date).getTime()};var e=function(b,c){angular.forEach(a.all_tags,function(a){a.name===c.name&&(a.active=b)})},f=function(b,c){var d=$.map(c,function(a){return a.id});angular.forEach(a.all_tags,function(a){-1===d.indexOf(a.id)?a.active=!b:a.active=b})};a.onTagRemove=function(b,d){a.tag_editing=!0;var f=a.onRemove(b,a.selected_tags);return f.then(function(){a.selected_tags=c.removeOfId(a.selected_tags,b.id),e(!1,b)}),f["finally"](function(){a.tag_editing=!1,a.updateScrollbar()}),d&&d.stopPropagation(),f},a.onTagAdd=function(b){a.tag_editing=!0;var c=a.onAdd(b,a.selected_tags);return c.then(function(){a.selected_tags.push(b),e(!0,b)}),c["finally"](function(){a.tag_editing=!1,a.updateScrollbar()}),c},a.onTagCreate=function(b){a.tag_editing=!0;var c=a.onCreate&&a.onCreate(b,a.selected_tags)||d.onTagCreate($rootScope.PROJECT,a,b);return c["finally"](function(){a.tag_editing=!1,a.updateScrollbar()}),c},a.selectTag=function(b){a.onSelect&&a.onSelect(b)},a.$on("project.tag.updated",function(b,d){var e=c.findOfId(a.selected_tags,d.id);e&&(e.color=d.color,e.name=d.name)}),a.$watch("current_tags",function(b){angular.isDefined(b)&&(a.all_tags=angular.copy(a.tags),a.selected_tags=angular.copy(b),f(!0,b))}),a.$watch("tags",function(b){angular.isDefined(b)&&a.selected_tags.length>=0&&(a.all_tags=angular.copy(b),angular.forEach(a.selected_tags,function(b){var d=c.findOfId(a.all_tags,b.id);d&&(d.active=!!d)}))})}]).service("TopicTagEditorService",["$rootScope","Task","Common",function(a,b,c){var d=function(a,d,e){if(e.color&&e.name){var f=c.projectParams(a),g=b.addTag(f,{name:e.name,color:e.color});return g.then(function(a){var b=a.data;e.id=b,d.$emit("project.tag.create",e)}),g}};return{onTagCreate:d}}]),angular.module("directives").directive("cgTaskCommentActivity",function(){return{scope:{activity:"=cgTaskCommentActivity",editor_id:"@editorId",onRemove:"=",anchor:"@",currentHistoryId:"="},link:function(a,b,c){},templateUrl:"common/directives/task/comments/tpl/activity.html",controller:"TaskCommentActivityController",replace:!0}}).controller("TaskCommentActivityController",["$scope","$filter","Common","TaskUrgencyService","Task","LightMdEditorService","TaskDeadlineService","TaskCommentActivityService","$rootScope",function(a,b,c,d,e,f,g,h,i){a.isTaskHistoryExpActive=i.isExpActive("task-history"),a.activity.taskComment&&(a.activity.taskComment.content=b("restyleMarkDownImage")(a.activity.taskComment.content,800,800)),h.squashLabelChanges(a.activity),a.canRemove=function(a,b){return a.global_key===b.global_key},a.doRemove=function(){if(confirm("确认删除该评论？")){var b=a.activity.taskComment,c=a.activity.task,d=e.deleteComment({id:c.id,comment_id:b.id});d.then(function(){a.onRemove(b)})}},a.atPerson=function(b){var c=b.owner.name;f.atPerson(c,a.editor_id)},a.restoreFromHistory=function(b){a.$emit("task.detail.description.load.history",b.id),window.scrollTo(0,0),a.currentHistoryId=b.id},a.resolveType=function(){return"Task"===a.activity.target_type?"commit_refer"===a.activity.action?"commit_refer":"update_label"===a.activity.action?"update_label":"add_watcher"===a.activity.action||"remove_watcher"===a.activity.action?"update_watcher":"create"===a.activity.action||"update_description"===a.activity.action?"history":"action":"MergeRequestBean"===a.activity.target_type?"merge_request":"comment"},a.activityClass=function(){var b="Task"===a.activity.target_type||"MergeRequestBean"===a.activity.target_type;return{comment:!b,action:b}},a.actionMsg=function(b){var e=b||a.activity;if("MergeRequestBean"===e.target_type){var f=[e.action_msg," 合并请求","<a href='",e.merge_request_path,"' target='_blank'>","#",e.merge_request_iid," ",e.merge_request_title,"</a>"].join("");return f}var h={update_priority:function(a){var b=d.priorities,c=["更新了任务优先级为 [",b[a.task.priority],"]"].join("");return c},reassign:function(a){var b=a.task.owner.name;return b=a.task.owner.global_key===a.user.global_key?"自己":b,a.action_msg+"任务给 "+b},update_deadline:function(a){var b=g.format(a.task.deadline);return b.date?a.action_msg+"为"+b.date:"移除了任务的截止日期"},update_description:function(a){return a.action_msg},update_label:function(a){var b=a.action_msg;if(!a.labels)return b;var c="";if(a.labels.length>0){var d=a.labels.map(function(a){return a.name}).join(", ");c="更新了标签为 - "+d}else a.labels_before.length>0&&(c="移除了所有标签");return c||b},add_watcher:function(a){return"添加了关注者"},remove_watcher:function(a){return"删除了关注者"},"default":function(a){return a.action_msg+"任务"}},i=a.activity.action;return c.smartSwitch(h,i,e)},a.labelsMsg=function(a){return $.map(a||[],function(a){return a.name}).join(", ")},a.actionIconClass=function(){var b=a.activity,d={create:"add",update:"edit","delete":"remove",finish:"checkmark",reassign:"user",restore:"circle blank",update_priority:"exclamation",update_deadline:"calendar",update_description:"rotate180 align right"},e=a.activity.action;return c.smartSwitch(d,e,b)},a.shaPath=function(a,b){return[a.commit.depot.depot_path,"/commit/",b.sha].join("")},a.shortSha=function(a){return a.sha.substring(0,7)}}]).service("TaskCommentActivityService",function(){var a=function(a){var b=0;if(a&&"update_label"===a.action&&a.label_histories&&(b=a.label_histories.length)>0){var c=a.label_histories[0],d=a.label_histories[b-1],e=c.labels_before,f=d.labels,g=[],h=[];angular.forEach(e,function(a){_.find(f,{id:a.id})||h.push(a)}),angular.forEach(f,function(a){_.find(e,{id:a.id})||g.push(a)}),d.added=g,d.deleted=h}};return{squashLabelChanges:a}}),angular.module("directives").directive("cgTaskCreator",["Common",function(a){return{scope:{task:"=cgTaskCreator",project_name:"=projectName",username:"=username",members:"=members",multiple:"&multiple",project_dependency:"=projectDependency",insert_image:"=insertImage"},link:function(b,c){b.multiple=b.multiple();var d=c.find("#main-task-input");d.on("focus",function(){a.safeApply.call(b,function(){b.show_description=!0})})},templateUrl:"common/directives/task/tpl/creator.html",controller:"TaskCreatorController",replace:!0}}]).controller("TaskCreatorController",["$scope","TaskCreatorService","Common","Task","TaskItemService","$rootScope",function(a,b,c,d,e,f){var g=angular.noop();a.show_description=!1,a.description_focused=!1,a.$watch("members",function(b){b&&a.task&&(a.task.owner=f.USER)}),a.createTask=function(b){if(b&&b.content&&!a.creating){a.creating=!0;var f={priority:b.priority,content:b.content,owner_id:b.owner.id,deadline:b.deadline||"",description:b.description||""},h=d.create({username:a.username,project_name:a.project_name},f);return h.then(function(b){a.creating=!1;var d=b.data;d.content=c.revertHtml(d.content),e.sendProjectTaskSignal("add",d),a.task.content="",a.task.priority=1,a.task.deadline="",a.task.description="",g(!0)}),h["catch"](function(){a.creating=!1,g(!1)}),h}},a.onDescriptionChange=function(b,c){a.task.description=b,g=c},a.hideDescription=function(){a.show_description=!1},a.onDescriptionSubmit=function(){return a.createTask(a.task)}}]).service("TaskCreatorService",[function(){}]),angular.module("directives").directive("cgTaskDeadline",[function(){return{scope:{task:"=cgTaskDeadline",options:"&",mode:"&",onChange:"=onDeadlineChange"},templateUrl:function(a,b){var c=b.mode;return"common/directives/task/tpl/"+(c?c:"deadline")+".html"},controller:"TaskDeadlineController",replace:!0}}]).controller("TaskDeadlineController",["$scope","TaskDeadlineService",function(a,b){a.options=a.options(),a.options=angular.extend({hide_on_select:!0,quick_button:!0},{},a.options),a.deadline="",a.onDeadlineChange=function(c){(angular.isUndefined(a.task.deadline)||_.isEmpty(a.task.deadline))&&_.isEmpty(c)||(a.task.deadline=c?c:"",a.deadline=b.format(c),angular.isFunction(a.onChange)&&a.onChange(a.deadline))},a.$watch("task.deadline",function(c){angular.isDefined(c)&&(a.deadline=b.format(c))})}]).service("TaskDeadlineService",[function(){var a=function(a){if(!a)return{};var b=function(){return moment().startOf("day")},c=b().add(1,"days"),d=b().add(2,"days"),e=b().subtract(1,"days"),f=b().subtract(2,"days"),g=moment(a).year(),h=moment(b()).year(),i=g===h,j={};if(b().isAfter(a)&&i){moment.lang("zh-cn");var k=moment(a).format("MMMDo");if(e.isSame(a))k="昨天";else if(f.isSame(a))k="前天";else{moment.lang("zh-cn");var l=moment(a).week(),m=b().week();l===m?k=moment(a).format("dddd"):l+1===m&&(k="上周"+moment.langData("zh-cn").weekdaysMin(moment(a)))}j={date:k,clazz:"expired"}}else if(b().isSame(a)&&i)j={date:"今天",clazz:"today"};else if(c.isSame(a)&&i)j={date:"明天",clazz:"tomorrow"};else if(d.isSame(a)&&i)j={date:"后天",clazz:"default"};else{moment.lang("zh-cn");var l=moment(a).week(),m=b().week();if(l===m&&i)k=moment(a).format("dddd");else if(l-1===m&&i)k="下周"+moment.langData("zh-cn").weekdaysMin(moment(a));else{var n=h===g?"MMMDo":"YYYY年MMMDo";k=moment(a).format(n)}j={date:k,clazz:h>g?"expired":"default"}}return j};return{format:a}}]),angular.module("directives").directive("cgTaskDetailActivity",function(){return{scope:{task:"=task",just_show_comment:"=justShowComment",project_path:"=projectPath",onJustShowComment:"=",onCommentRemove:"="},templateUrl:"common/directives/task/detail/tpl/activity.html",controller:"TaskDetailActivityController"}}).controller("TaskDetailActivityController",["$scope","Common","Activity","TaskItemService","$filter",function(a,b,c,d,e){var f=[];a.activities=[],a.loading_activity=!1,a.$on("project.task.detail.modal.hide",function(b,c){a.activities=[],a.loading_activity=!1});var g=function(d,e){a.loading_activity=!0;var f=c.task({id:d,last_id:e||999999999});return f.then(function(c){var d=b.removeNullItem(c.data||[],"id");a.activities=b.squashActivity(d,6e4)}),f["finally"](function(){a.loading_activity=!1}),f};a.showActivity=function(b){return"TaskComment"===b.target_type&&a.just_show_comment||!a.just_show_comment},a.checkIconClass=function(a){return{"checkmark sign done":a,"empty checkbox processing":!a}},a.toggleComments=function(){return a.just_show_comment=!a.just_show_comment,angular.isFunction(a.onJustShowComment)&&a.just_show_comment&&a.onJustShowComment(),!1},a.onRemove=function(){g(a.task_id),a.task.comments-=1};var h=["update.status","update.owner","update.priority","update.content","update.deadline","update.description","activity.refresh","tag.remove","tag.add"];angular.forEach(h,function(a){var b=d.onProjectTaskSignal(a,function(a,b){g(b.id)});f.push(b)}),a.onRemove=function(){g(a.task.id),angular.isFunction(a.onCommentRemove)&&a.onCommentRemove()},a.$on("$destroy",function(){f.map(function(a){angular.isFunction(a)&&a()})}),a.$watch("task",function(a){a&&g(a.id)})}]),angular.module("directives").directive("cgTaskDetail",function(){return{scope:{task_id:"=taskId",project_username:"=projectUsername",project_name:"=projectName",onTaskNoFound:"=",edit_desc:"=editDescription",just_show_comment:"=justShowComment"},link:function(a,b,c,d){angular.isDefined(d)&&(angular.isFunction(a.doInit)&&d.setModalOnShowCallback(function(){a.doInit()}),angular.isFunction(a.doDestroy)&&d.setModalOnHideCallback(function(){a.doDestroy()}))},require:"^?cgTaskDetailModal",controller:"CgTaskDetailController",templateUrl:"common/directives/task/detail/tpl/detail.html"}}).controller("CgTaskDetailController",["$rootScope","$scope","Common","Task","Activity","Project","TaskItemService","$timeout","$q","PageTitle",function(a,b,c,d,e,f,g,h,i,j){var k=!1;b.task=null,b.loading=!1,b.$on("project.task.detail.modal.hide",function(a,c){b.loading=!1,b.task=null,p()});var l=[],m=function(e){b.loading=!0;var f={username:b.project_username,project_name:b.project_name},g=angular.extend(f,{id:e}),i=d.query(g);return i.then(function(d){b.task=d.data,b.task.content=c.revertHtml(b.task.content),b.task.add_description=b.edit_desc,h(function(){a.$broadcast("project.task.description.editor.focus")}),b.edit_desc&&$location.skipReload().search("edit_desc",void 0).replace(),o(b.task)}),i["catch"](function(a,c){c&&1600===c.code&&angular.isFunction(b.onTaskNoFound)&&b.onTaskNoFound()}),i["finally"](function(){b.loading=!1,k=!0}),i},n=window.document.title,o=function(a){var d="任务 - "+c.ellipsisString(b.task.content,20)+" - Coding.net";j.set(d)},p=function(){j.set(n)},q=b.$watch("task_id",function(a){angular.isNumber(a)&&k&&m(a)});l.push(q),b.onComment=function(a){var c=b.task,e=d.comment({id:c.id},{content:a});return e.then(function(){b.task.comments+=1,g.sendProjectTaskSignal("activity.refresh",c),b.$broadcast("task.detail.change",c)}),e},b.onCommentRemove=function(){b.task.comments-=1};l.push(g.onProjectTaskSignal("update.content",function(a,b){o(b)})),b.doInit=function(){m(b.task_id)},b.doDestroy=function(){b.task=null,b.edit_desc=!1,b.just_show_comment=!1},b.$on("task.detail.description.change",function(a){b.$broadcast("task.detail.change",a)}),b.$on("$destroy",function(){l.map(function(a){a()})})}]),angular.module("directives").directive("cgTaskDetailHeader",[function(){return{scope:{task:"=cgTaskDetailHeader",members:"=members",tags:"=tags"},templateUrl:"common/directives/task/detail/tpl/header.html",controller:"TaskItemController",replace:!0}}]),angular.module("directives").directive("cgTaskDetailMenu",function(){return{scope:{task:"="},templateUrl:"common/directives/task/detail/tpl/menu.html",controller:"TaskDetailModalMenuController",replace:"true"}}).controller("TaskDetailModalMenuController",["$rootScope","$scope","TaskUrgencyService","Common","TaskItemService","Task","Project",function(a,b,c,d,e,f,g){b.priorities=c.priorities,b.USER=a.USER,angular.extend(b,{ADMIN:a.ADMIN}),b.form=void 0,b.tags=null,b.members=[],b.$on("project.task.detail.modal.hide",function(a,c){b.form=void 0,b.tags=null,b.members=[]});var h=[],i={owner:function(a){b.task.owner=angular.copy(a)},urgency:function(a){var c=a.value;b.task.priority=c},deadline:function(a){var c=a.form_value||void 0;b.task.deadline=c}};b.$on("task.detail.select",function(a,c){var e=c.name;b.form[e]=c.value,d.smartSwitch(i,e,c.value)}),b.toggleWatch=function(a){a.watching=!0;var b=(a.watch?f.removeWatch:f.watch)({id:a.id},{});b.then(function(){a.watch=!a.watch,e.sendProjectTaskSignal("update.watch",a)}),b["finally"](function(){a.watching=!1})},b.removeTask=function(a){if(!b.updating&&confirm("确认删除该任务？")){b.updating=!0;var c=j();c=angular.extend(c,{id:a.id});var d=f["delete"](c);d.then(function(){e.sendProjectTaskSignal("remove",a),b.updating=!1}),d["catch"](function(){b.updating=!1})}};var j=function(){return e.projectParams(b.task.project)};b.onTagRemove=function(a,c){var g=f.removeTaskTag($.extend({task:b.task.id,label:a.id},j()),{});return g.then(function(){var f=angular.copy(b.task),g=d.removeOfId(c,a.id);f.labels=angular.copy(g),e.sendProjectTaskSignal("tag.remove",f)}),g},b.onTagAdd=function(a,c){var d=f.addTaskTag($.extend({task:b.task.id,label:a.id},j()),{});return d.then(function(){var d=angular.copy(b.task);d.labels=angular.copy(c),d.labels.push(a),e.sendProjectTaskSignal("tag.add",d)}),d},b.onTagCreate=function(a){if(a.color&&a.name){var c=f.addTag(j(),{name:a.name,color:a.color});return c.then(function(c){var d=c.data;a.id=d,b.$emit("project.tag.create",a)}),c}},b.addWatcher=function(a){return f.watch({id:b.task.id,global_key:a.global_key},{}).then(function(){e.sendProjectTaskSignal("watcher.add",b.task)})},b.removeWatcher=function(a){var c=f.removeWatch({id:b.task.id,global_key:a.global_key});return c.then(function(){e.sendProjectTaskSignal("watcher.remove",b.task)}),c};var k=function(){var a=j(),c=g.membersByKey(a);return c.then(function(a){b.members=a.data&&a.data.list||[]}),c},l=function(a){var c=g.tags({id:a});return c.then(function(a){b.tags=a.data||[]}),c},m=function(a){b.loading_watchers=!0;var c=j(),d=f.watchers($.extend({task:a,pageSize:1e3},c));d.then(function(a){b.watchers=a.data&&a.data.list||[]}),d["finally"](function(){b.loading_watchers=!1})},n=["watch","owner"];angular.forEach(n,function(a){var b=e.onProjectTaskSignal("update."+a,function(a,b){m(b.id)});h.push(b)}),b.$watch("task",function(a){angular.isObject(a)&&(b.form={project:a.project,owner:a.owner,urgency:{value:a.priority,text:b.priorities[a.priority]},deadline:a.deadline,labels:a.labels},b.task_copy=angular.copy(a),m(a.id),k(),l(a.project.id))}),b.$on("$destroy",function(){h.map(function(a){angular.isFunction(a)&&a()})})}]),angular.module("app").controller("TaskDetailSelectMemberController",["$scope",function(a){var b="owner";a.owner=void 0,a.$watch("form.owner",function(b){(angular.isUndefined(a.owner)||b&&b.id!==a.owner.id)&&(a.owner=angular.copy(b))}),a.selectMember=function(c){a.$emit("task.detail.select",{name:b,value:c})},a.$watch("owner",function(b){b&&a.form.owner&&b.id!==a.form.owner.id&&a.selectMember(b)})}]),angular.module("app").controller("TaskDetailSelectProjectController",["$scope",function(a){var b="project";a.selectProject=function(c){a.$emit("task.detail.select",{name:b,value:c})}}]),angular.module("app").controller("TaskDetailSelectUrgencyController",["$scope","TaskUrgencyService",function(a,b){var c="urgency";a.selectUrgency=function(b){a.$emit("task.detail.select",{name:c,value:{value:b,text:a.priorities[b]}})}}]),angular.module("directives").directive("cgTagColorPicker",["Common","$document","$parse",function(a,b,c){return{scope:{show:"@cgTagColorPicker",tag:"=ngModel",can_change_color:"=canChangeColor",onColorChange:"="},link:function(c,d){c.$watch("tag.color",function(a){angular.isDefined(a)&&d.css("background-color",a)}),d.on("click",function(b){return $(b.target).is(".tag-color-picker, .tag-color-picker *")?void b.stopPropagation():void a.safeApply.call(c,function(){c.show=!c.show})});var e=function(b){var e=$(b.target);return e.is(".tag-color-picker, .tag-color-picker *")||e.is(d)?!1:void a.safeApply.call(c,function(){c.show=!1})};b.on("click",e),c.$on("$destroy",function(){b.off("click",e)})},templateUrl:"common/directives/task/issues/tpl/tag_color_picker.html",controller:"IssuesTagColorPickerController"}}]).controller("IssuesTagColorPickerController",["$scope","IssuesTagColorPickerService","TagDropdownService",function(a,b,c){a.colors=b.colors,a.changeColor=function(b){a.tag.color=b,a.onColorChange&&a.onColorChange(a.tag)},a.hidePicker=function(){a.show=!1},a.randomColor=function(){a.changeColor(c.randomColor())}}]).service("IssuesTagColorPickerService",[function(){var a=["#1b1c1d","#f2c61f","#5bbd72","#3b83c0","#e07b53","#564f8a","#d95c5c","#00b5ad","#bababb","#fbeebb","#cdebd4","#c4daec","#f6d7cb","#cccadc","#f4cece","#b2e9e6"],b=/^#(?:[0-9a-f]{3}){1,2}$/i;return{colors:a,hex_color_regex:b}}]),angular.module("directives").directive("cgTaskItem",[function(){return{scope:{task:"=cgTaskItem",tags:"=tags",members:"=members",just_show:"=justShow",hide_watch:"=hideWatch"},templateUrl:"common/directives/task/tpl/item.html",controller:"TaskItemController",transclude:!0,replace:!0}}]).controller("TaskItemController",["$scope","TaskItemService",function(a,b){b.init(a),b.bindFeature(a)}]).service("TaskItemService",["Task","Flash","$rootScope","$timeout","Common","$location",function(a,b,c,d,e,f){var g={};return g.sendProjectTaskSignal=function(a,b){var d=angular.copy(b),e="project.task."+a;c.$broadcast(e,d)},g.onProjectTaskSignal=function(a,b){var d="project.task."+a;return c.$on(d,b)},g.ownerChanged=function(a,b){var a=$.makeArray(a),b=$.makeArray(b);if(a.length!==b.length)return!0;var c=[];for(var d in a)c[a[d].id]=1;for(var d in b)if(1!=c[b[d].id])return!0;return!1},g.projectParams=function(a){return{username:a.owner_user_name,project_name:a.name}},g.orderMembers=function(a,b){var c=null,d=[];return angular.forEach(a||[],function(a){a&&(a.user_id==b?c=a:d.push(a))}),d=_.orderBy(d,"created_at"),d.splice(0,0,c),d},g.init=function(d){d.USER=c.USER,d.PROJECT=c.PROJECT,angular.extend(d,{ADMIN:c.ADMIN}),d.project_params={};var e=d.PROJECT||d.task.project;e&&(d.project_params={username:e.owner_user_name,project_name:e.name}),d.STATUS={processing:1,done:2},d.updating=!1,d.task_copy=null,d.project_dependency=null;var f=d.$watch("task",function(a){a&&(d.task=a,d.task.commenting=!1,d.task.show_description=!1,d.task_copy=angular.copy(d.task),d.project_dependency=a.project,f())});d.handleUpdate=function(a,c,e){a.then(function(){var a=angular.copy(c);a.copy=d.task_copy,g.sendProjectTaskSignal("update."+e,a),d.task_copy[e]=angular.copy(c[e]),"owner"===e&&(d.task_copy.owner_id=c.owner_id)}),a["catch"](function(){c[e]=angular.copy(d.task_copy[e]),"owner"===e&&(c.owner_id=d.task_copy.owner_id),b.warn().send("操作失败！")}),a["finally"](function(){d.updating=!1}),d.updating=!0},d.toggleTaskStatus=function(b,c){if(!d.updating){b.status=b.status==d.STATUS.processing?d.STATUS.done:d.STATUS.processing;var e=a.updateStatus({id:b.id},{status:b.status});d.handleUpdate(e,b,"status")}c&&c.stopPropagation()},d.taskClass=function(a){return{done:a.status==d.STATUS.done,editing:a.editable,commenting:a.commenting&&!a.show_description,"show-description":a.show_description&&!a.commenting}},d.checkIconClass=function(a){return{"checkmark sign done":a.status==d.STATUS.done,"empty checkbox processing":a.status==d.STATUS.processing}}},g.bindFeature=function(b){b.removeTask=function(d){if(!b.updating&&confirm("确认删除该任务？")){b.updating=!0;var e=g.projectParams(c.PROJECT||d.project);e=angular.extend(e,{id:d.id});var f=a["delete"](e);f.then(function(){g.sendProjectTaskSignal("remove",d),b.updating=!1}),f["catch"](function(){b.updating=!1})}},b.toggleAddDescription=function(a){
a.add_description=!a.add_description,d(function(){c.$broadcast("project.task.description.editor.focus")})},b.updateTaskContent=function(c,d){if(d.content!==b.task_copy.content&&d.editable&&!b.updating){var e=a.updateContent({id:d.id},{content:d.content});b.handleUpdate(e,d,"content")}return d.editable=!1,c&&c.preventDefault(),!1},b.$watch("task.owner",function(c){if(b.task_copy){var d=g.ownerChanged(c,b.task_copy.owner);if(d&&!b.updating&&b.task.id){var e=b.task;e.owner_id=c.id;var f=a.updateOwner({id:e.id},{owner_id:c.id});b.handleUpdate(f,e,"owner")}}});var h=_.debounce(function(c){if(c!=b.task_copy.priority){var d=b.task,e=a.updatePriority({id:d.id},{priority:c});b.handleUpdate(e,d,"priority")}},200);b.$watch("task.priority",function(a){!b.updating&&b.task.id&&h(a)}),b.$watch("task.deadline",function(c){if(!b.updating&&b.task_copy.deadline!==c&&angular.isDefined(c)){var d=b.task,e=a.updateDeadline({id:d.id},{deadline:c});b.handleUpdate(e,d,"deadline")}}),b.setTaskEditable=function(a,c){$(c.target).is("textarea")&&!b.just_show&&a.status==b.STATUS.processing&&(a.editable=!0)},b.toggleTaskCommenting=function(a){a.commenting=!a.commenting,a.commenting&&(a.show_description=!1)},b.toggleShowDescription=function(a){a.show_description=!a.show_description,a.show_description&&(a.description="",a.commenting=!1)},b.showMark=function(a){return c.USER&&a.owner.id!==c.USER.id},b.watchClass=function(a){return a.watching?"loading":a.watch?"hide":"unhide"},b.watchWords=function(a){return a.watch?"取消关注":"关注"},b.toggleWatch=function(b){b.watching=!0;var d;d=b.watch?a.removeWatch({id:b.id,global_key:c.USER.global_key}):a.watch({id:b.id,global_key:c.USER.global_key},{}),d.then(function(){b.watch=!b.watch,g.sendProjectTaskSignal("update.watch",b)}),d["finally"](function(){b.watching=!1})},b.onTagRemove=function(c){var d=a.removeTaskTag($.extend({task:b.task.id,label:c.id},b.project_params),{});return d.then(function(){b.task.labels=e.removeOfId(b.task.labels,c.id)}),d},b.onTagAdd=function(c){var d=a.addTaskTag($.extend({task:b.task.id,label:c.id},b.project_params),{});return d.then(function(){b.task.labels.push(c),g.sendProjectTaskSignal("update.status",b.task)}),d},b.onTagCreate=function(c){var d=a.addTag(b.project_params,{name:c.name,color:c.color});return d.then(function(a){var d=a.data;c.id=d,b.$emit("project.tag.create",c),g.sendProjectTaskSignal("update.status",b.task)}),d},b.onDetailTagSelect=function(a){f.path(b.task.project.project_path+"/tasks/label/"+a.id)},b.$on("project.tag.updated",function(a,c){var d=e.findOfId(b.task.labels,c.id);d&&(d.color=c.color,d.name=c.name)})},g}]),angular.module("directives").directive("cgTaskSimpleItem",["TaskDeadlineService",function(a){return{scope:{task:"=cgTaskSimpleItem",members:"=members",just_show:"=justShow",hide_watch:"=hideWatch",show_project_name:"=showProjectName"},link:function(b){b.$watch("task",function(c){c&&(b.formated_deadline=a.format(c.deadline))})},templateUrl:"common/directives/task/tpl/item_simple.html",controller:"TaskItemController",replace:!0}}]),angular.module("directives").directive("cgTaskSimpleItemTopmenu",["TaskDeadlineService",function(a){return{scope:{task:"=cgTaskSimpleItemTopmenu"},link:function(b){b.$watch("task",function(c){c&&(b.formated_deadline=a.format(c.deadline))})},templateUrl:"common/directives/task/tpl/item_simple_topmenu.html",controller:"TopmenuTaskItemController",replace:!0}}]).controller("TopmenuTaskItemController",["$scope","TaskItemService",function(a,b){b.init(a)}]),angular.module("directives").directive("cgTaskShow",[function(){return{scope:{task:"=cgTaskShow"},link:function(a){a.just_show=!0},templateUrl:"common/directives/task/tpl/just_show.html",controller:"TaskItemController"}}]),angular.module("directives").directive("cgTaskMemberPicker",["Common","$timeout","$rootScope","TaskItemService",function(a,b,c,d){return{scope:{selected_user:"=cgTaskMemberPicker",members:"=members",multiple:"&multiple",active:"=",direction:"@",mode:"@"},link:function(e,f){e.member_users=[],e.need_init=!1;var g=$(f).find(".dropdown"),h=$(f).find(".member-picker-filter"),i=$(f).find(".members-outer");e.dropdownAllowed=!1,g.one("mouseenter",function(){e.dropdownAllowed=!0,e.$digest()});e.$watch("members",function(b){b&&b.length>0&&(c.USER&&(e.member_users=d.orderMembers(b,c.USER.id)),e.member_users=a.m2u(e.member_users))});e.$watch("active && dropdownAllowed",function(){e.isEnable()&&e.dropdownAllowed?g.dropdown({onShow:function(){a.safeApply.call(e,function(){e.need_init=!0}),h.focus(),e.scrollToSelected(e.selectedIndex())},onHide:function(){a.safeDigest.call(e,function(){e.searchUsers.name=""})}}):g.dropdown("destroy")});var j=38,k=40,l=13;h.on("keydown",function(c){var d=c.keyCode;d===j?(a.safeApply.call(e,function(){e.selectUser("up")}),c.preventDefault()):d===k?(a.safeApply.call(e,function(){e.selectUser("down")}),c.preventDefault()):d===l?e.doQuickSelect&&a.safeApply.call(e,function(){e.doQuickSelect()}):b(function(){e.quick_select_index=0;var a=e.selectedIndex();e.scrollToSelected(a||0)},400)}),e.scrollToSelected=function(a){var b=i.find("a.item:eq(0)").outerHeight();i.scrollTop(a*b),h.focus()},e.hide=function(){g.dropdown("hide")}},templateUrl:function(a,b){var c=b.mode;return"common/directives/task/tpl/"+(c?c:"member_picker")+".html"},controller:"TaskMemberPickerController",replace:!0,transclude:!0}}]).controller("TaskMemberPickerController",["$scope","TaskMemberPickerService","TaskItemService","Common","$timeout","$filter",function(a,b,c,d,e,f){var g=a.isMultiple=a.multiple();a.selected_user=b.initSelectedUser(a.selected_user,g),a.selected_user_copy=angular.copy(a.selected_user),a.searchUsers={name:""},a.quick_select_index=0;var h=function(b){return a.selected_user?g?!!d.findOfId(a.selected_user,b):a.selected_user.id===b:void 0},i=function(b){var c=h(b.id);c?a.selected_user=angular.copy(a.selected_user_copy):a.selected_user=angular.copy(b)},j=function(b){var c=h(b.id);c?a.selected_user.length>1&&(a.selected_user=d.removeOfId(a.selected_user,b.id)):(a.selected_user.push(b),a.selected_user=angular.copy(a.selected_user))},k=function(){var b=f("filter")(a.member_users,a.searchUsers.name);return b},l=function(a){var b=null,c=k();return angular.forEach(c,function(c,d){d===a&&(b=c)}),b};a.selectedIndex=function(){var a=0,b=k();return angular.forEach(b,function(b,c){h(b.id)&&(a=c)}),a},a.doQuickSelect=null,a.doQuickSelect=function(){var b=l(a.quick_select_index);a.toggleSelect(b,!0),a.quick_select_index=0},a.selectUser=function(b){var c=a.quick_select_index,d=k();c>=0&&c<d.length-1&&"down"===b?c+=1:c<=d.length-1&&c>0&&"up"===b&&(c-=1),a.quick_select_index=c,a.scrollToSelected(c)},a.$watch("selected_user",function(b){if(b){var c=a.selectedIndex();a.scrollToSelected(c||0),a.hide()}}),a.toggleSelect=function(b,c){if(b){var d=angular.copy(b);g?j(d):i(d),c||(a.quick_select_index=0)}},a.isActive=function(a){return h(a)},a.isEnable=function(){return"undefined"==typeof a.active?!0:a.active},a.menuDirection=function(){var b="left"===a.direction;return{right:!b,left:b}}}]).service("TaskMemberPickerService",[function(){var a=function(a,b){var c=angular.copy(a);return b?angular.isArray(c)?c:[c]:angular.isArray(c)?c[0]:c};return{initSelectedUser:a}}]),angular.module("directives").directive("cgTaskProjectPicker",["Common","$timeout",function(a,b){return{scope:{selected_project:"=cgTaskProjectPicker",projects:"=projects",active:"=",non_cancelable:"=nonCancelable",direction:"@",mode:"@"},link:function(b,c){var d=$(c).find(".dropdown"),e=$(c).find(".project-picker-filter"),f=$(c).find(".projects-outer");b.$watch("active",function(){b.isEnable()?d.dropdown({onShow:function(){e.focus(),b.scrollToSelected(b.selectedIndex())},onHide:function(){a.safeApply.call(b,function(){b.searchProjects.name="",b.quick_select_index=0})}}):d.dropdown("destroy")});var g=38,h=40,i=13,j=_.debounce(function(){b.quick_select_index=0;var a=b.selectedIndex();b.scrollToSelected(a||0)},200);e.on("keydown",function(c){var d=c.keyCode;d===g?(a.safeApply.call(b,function(){b.selectProject("up")}),c.preventDefault()):d===h?(a.safeApply.call(b,function(){b.selectProject("down")}),c.preventDefault()):d===i?b.doQuickSelect&&a.safeApply.call(b,function(){b.doQuickSelect()}):j()}),b.scrollToSelected=function(a){var b=f.find("a.item:eq(0)").outerHeight();f.scrollTop(a*b),e.focus()},b.hide=function(){d.dropdown("hide")}},templateUrl:function(a,b){var c=b.mode;return"common/directives/task/tpl/"+(c?c:"project_picker")+".html"},controller:"TaskProjectPickerController",replace:!0,transclude:!0}}]).controller("TaskProjectPickerController",["$scope","TaskProjectPickerService","TaskItemService","Common","$timeout","$filter",function(a,b,c,d,e,f){a.selected_project=b.initSelectedProject(a.selected_project),a.selected_project_copy=angular.copy(a.selected_project),a.searchProjects={name:""},a.quick_select_index=0;var g=function(b){return a.selected_project?a.selected_project.id===b:void 0},h=function(b){var c=g(b.id);c&&!a.non_cancelable?a.selected_project=angular.copy(a.selected_project_copy):a.selected_project=angular.copy(b)},i=function(){var b=f("searchString")(a.projects,{key:a.searchProjects.name,region:"name"});return b},j=function(a){var b=null,c=i();return angular.forEach(c,function(c,d){d===a&&(b=c)}),b};a.selectedIndex=function(){var a=0,b=i();return angular.forEach(b,function(b,c){g(b.id)&&(a=c)}),a},a.doQuickSelect=null,a.doQuickSelect=function(){var b=j(a.quick_select_index);a.toggleSelect(b,!0),a.quick_select_index=0},a.selectProject=function(b){var c=a.quick_select_index,d=i();c>=0&&c<d.length-1&&"down"===b?c+=1:c<=d.length-1&&c>0&&"up"===b&&(c-=1),a.quick_select_index=c,a.scrollToSelected(c)},a.$watch("selected_project",function(b){if(b){var c=a.selectedIndex();a.scrollToSelected(c||0),a.hide()}}),a.toggleSelect=function(b,c){if(b){var d=angular.copy(b);h(d),c||(a.quick_select_index=0)}},a.isActive=function(a){return g(a)},a.isEnable=function(){return"undefined"==typeof a.active?!0:a.active},a.menuDirection=function(){var b="left"===a.direction;return{right:!b,left:b}}}]).service("TaskProjectPickerService",[function(){var a=function(a){var b=angular.copy(a);return angular.isArray(b)?b[0]:b};return{initSelectedProject:a}}]),angular.module("directives").directive("cgTaskComment",[function(){return{restrict:"EA",scope:{task:"=ngModel",show:"="},link:function(a,b){var c=b.find(".task-comment-form input");a.focusInput=function(){c.focus()}},templateUrl:"common/directives/task/tpl/comment.html",controller:"TaskCommentController",replace:!0}}]).controller("TaskCommentController",["$rootScope","$scope","Task","Common","BubbleCommentFormService","TaskCommentService","$q",function(a,b,c,d,e,f,g){var h=b.task,i=5;b.comment="",b.commenting=!1,b.comments=[],b.loading=!1,b.loaded=!1;var j=function(){b.comments=[],b.loading=!0,b.loaded=!1;var a=c.comments({id:h.id,pageSize:i});a.then(function(a){b.comments=a.data.list||[],k(b.comments),b.task.comments=a.data.totalRow}),a["finally"](function(){b.loading=!1,b.loaded=!0})},k=function(a){angular.forEach(a,function(a){a.content=f.text(a.content)})};b.doComment=function(a){if(a.length>0&&!b.commenting){b.commenting=!0;var d=c.comment({id:h.id},{content:a});d.then(function(a){var c=a.data;c.content=f.text(c.content),b.comments.splice(0,0,c),b.task.comments++,b.comment=""}),d["finally"](function(){b.commenting=!1})}},b.canRemove=function(a,b){return a&&a.owner.id===b.id},b.remove=function(a){if(a&&confirm("确认删除该评论？")){var e=c.deleteComment({id:h.id,comment_id:a.id});e.then(function(){b.comments=d.removeOfId(b.comments,a.id),b.task.comments--})}},b.atPerson=function(a){b.comment=e.atPerson(null,b.comment,a.owner.name),b.focusInput()},b.$watch("show",function(a){a?j():b.comments=[]}),b.gotoDetail=function(){h.just_show_comment=!0,a.$broadcast("goto.task.detail",h)},b.showDetail=function(){return b.task.comments>b.comments.length&&b.loaded}}]).service("TaskCommentService",["$filter",function(a){var b=function(b,c){var d=function(a,b){return a=encodeURIComponent(a),b=encodeURIComponent(b),["[",a,"@@",b,"]"].join("")},e=function(a,b){return a=decodeURIComponent(a).replace(/</g,"&lt;").replace(/>/g,"&gt;"),b=decodeURIComponent(b),['<a href="',b,'" target="_blank">',a,"</a>"].join("")},f=$("<span>"+b+"</span>");if(f.find("img").each(function(){var a=$(this),b=a.attr("title")||"图片";a.replaceWith("["+b+"]")}),f.find("a").each(function(){var a=$(this),b=a.text();if($.trim(b)){var e=b.text&&b.text()||b;if(!c&&a.attr("href")){var f=a.attr("href");e=d(e,f)}a.replaceWith(e)}else a.remove()}),f.find("code").each(function(){var a=$(this);a.replaceWith("[代码]")}),f=$("<div></div>").html(f).html(),f=a("htmlToPlainText")(f),!c){var g=/\[(\S+?)\@{2}(\S+?)\]/gi;f=f.replace(g,function(a,b,c,d,f){return b&&c?e(b,c):f})}return f};return{text:b}}]),angular.module("directives").directive("cgTaskDescription",["$filter","AllImageLoaded",function(a,b){return{restrict:"EA",scope:{task:"=ngModel",show:"=",can_edit:"=canEdit",project_dependency:"=projectDependency",allLoadingDone:"="},link:function(c,d){var e=c.$watch("task.description",function(b){angular.isDefined(b)&&""!==b&&(e(),c.task.description=a("restyleMarkDownImage")(c.task.description,800,800))});c.$on("project.task.description.editor.focus",function(){var a=d.find("textarea");a.focus()}),c.onImageLoad=function(a){b.init(d.find(".markdown.content"),a)}},templateUrl:"common/directives/task/tpl/description.html",controller:"TaskDescriptionController",replace:!0}}]).controller("TaskDescriptionController",["$scope","$filter","Task","TaskItemService","$rootScope","Flash",function(a,b,c,d,e,f){a.isTaskHistoryExpActive=e.isExpActive("task-history"),a.loading=!1,a.editing=!1,a.loaded=!1,a.markdown="",a.edit_area_dirty=0;var g=function(){a.loading=!0,a.loaded=!1;var b=c.description({id:a.task.id});return b.then(function(b){a.loaded=!0,a.task.description=b.data&&b.data.description||"",a.markdown=b.data&&b.data.markdown||"",a.history=b.data&&b.data.history||{},angular.isFunction(a.allLoadingDone)&&a.onImageLoad(function(){a.allLoadingDone()})}),b["finally"](function(){a.loading=!1}),b},h=function(b){a.loading=!0,a.loaded=!1;var f=c.getDescriptionHistory(angular.extend(d.projectParams(e.PROJECT),{task_id:a.task.id,history_id:b}),{});return f.then(function(b){a.loaded=!0,a.task.description=b.data&&b.data.description||"",a.markdown=b.data&&b.data.markdown||"",a.history=b.data&&b.data.history||{},angular.isFunction(a.allLoadingDone)&&a.onImageLoad(function(){a.allLoadingDone()})}),f["finally"](function(){a.loading=!1}),f};a.$watch("task",function(a){a&&g()}),a.$watch("show",function(b){return angular.isUndefined(b)?void 0:a.task&&a.task.add_description&&a.can_edit?(a.editing=!0,a.loading=!1,void(a.loaded=!0)):void(a.editing=!1)}),a.toggleEditable=function(){if(!a.can_edit)return void(a.editing=!1);if(a.edit_area_dirty){if(!confirm("最新描述还未保存，确认离开？"))return;a.edit_area_dirty=!1}a.editing=!a.editing},a.onDescriptionSubmit=function(g){var h;return a.history&&a.history.data&&a.history.data.description===g?(h=c.restoreFromHistory(angular.extend(d.projectParams(e.PROJECT),{task_id:a.task.id,history_id:a.history.data.id}),{}),h.then(function(){f.success().send("恢复历史版本成功")})):h=c.updateDescription({id:a.task.id},{description:g}),h.then(function(c){a.markdown=c.data&&c.data.markdown,a.task.description=c.data&&c.data.description,a.task.description=b("restyleMarkDownImage")(a.task.description,800,800),a.task.has_description=!a.task.description||a.task.description.length>0,a.history=c.data&&c.data.history||{},a.editing=!1,a.loading=!1,a.loaded=!0,a.edit_area_dirty=!1,d.sendProjectTaskSignal("update.description",a.task),a.$emit("task.detail.description.change",a.task)}),h},a.$on("task.description.need.update",function(){g()}),a.$on("task.detail.description.show.history",function(a,b){h(b)})}]),angular.module("directives").directive("cgTaskUrgency",["TaskUrgencyService","Common",function(a,b){var c=3,d=function(a,d){var e=d.priority;return a&&c>e&&("number"==typeof a?e+=a:e++),!a&&e>0&&e--,b.safeApply.call(d,function(){d.priority=e}),e};return{restrict:"EA",scope:{priority:"=priority",showtooltip:"=?showtooltip"},link:function(a,b){a.priority=void 0===a.priority?1:a.priority,a.showtooltip=void 0===a.showtooltip?1:a.showtooltip;var c=b.siblings("textarea.urgency, input.urgency"),e=38,f=40,g=function(b){var c=0;return b.keyCode===e?(c=d(!0,a),a.onUrgencyChanged(null,c),b.preventDefault(),!1):b.keyCode===f?(c=d(!1,a),a.onUrgencyChanged(null,c),b.preventDefault(),!1):void 0};c.on("keydown",g),a.$on("$destroy",function(){c.off("keydown",g)})},templateUrl:"common/directives/task/tpl/urgency.html",controller:"TaskUrgencyController",replace:!0}}]).controller("TaskUrgencyController",["$scope","TaskUrgencyService",function(a,b){a.onUrgencyChanged=function(b,c){a.priority=c},a.priorities=b.priorities}]).service("TaskUrgencyService",[function(){var a=function(a,b,c){if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,c);else if(a.createTextRange){var d=a.createTextRange();d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d.select()}},b=function(b,c){a(b,c,c)},c=["有空再看","正常处理","优先处理","十万火急"];return{setCaretToPos:b,priorities:c}}]),angular.module("directives").directive("cgTaskUrgencyHead",[function(){return{restrict:"EA",scope:{priority:"=",showtooltip:"=?"},link:function(a,b,c){},templateUrl:"common/directives/task/tpl/urgency_head.html",replace:!0}}]),angular.module("directives").directive("cgTeamSelect",["Common","$document",function(a,b){return{scope:{selected:"="},link:function(a,b){var c=$(b).find(".dropdown");c.dropdown(),a.hide=function(){c.dropdown("hide")}},templateUrl:function(a,b){return"common/directives/teamSelect/tpl/teamSelect.html"},controller:"TeamSelectController",replace:!0}}]).controller("TeamSelectController",["$scope","Common","$rootScope","$filter","$document","Team",function(a,b,c,d,e,f){a.current_user=c.USER,a.selected={avatar:c.USER.avatar,name:c.USER.name,type:"user",globalKey:a.current_user.global_key,joinTeam:"false"};var g=f.joinedTeams();g.then(function(b){0==b.code&&(c.isExpActive("vip")?a.teams=b.data.filter(function(a){return 4===a.owner.vip}):a.teams=b.data)}),a.choseObj=function(b){var c="team",d="true";b.global_key==a.current_user.global_key&&(c="user",d="false"),a.selected={avatar:b.avatar,name:b.name,type:c,globalKey:b.global_key,joinTeam:d},a.hide()}}]),angular.module("directives").directive("cgClickableTextareaLink",["LinkTipService","$location","Setting","Common",function(a,b,c,d){return{link:function(b,c){var e=d.uuid(),f=$('<div class="clickable-textarea-link-tip"></div>');f.attr("id",e);var g=function(b){var c={};return b?(b.replace(a.LINK_REG,function(){if(arguments.length>=2)for(var a=arguments[arguments.length-2],b=arguments[0],d=a;d<a+b.length;d++)c[d]=b}),c):c},h=function(a){var b=g(this.value),d=b[this.selectionStart];if(d&&this.selectionEnd===this.selectionStart)if(a.metaKey)window.open(d);else{var e=$('<a class="gray" href="'+d+'" target="_blank"></a>').html("点击打开链接："+d);f.html(e),c.parent().append(f),f.show()}else i()},i=function(){setTimeout(function(){$("#"+e).fadeOut()},200)};c.on("click",h),c.on("blur",i),b.$on("$destroy",function(){c.off("click",h)})}}}]);var textareaDirective=angular.module("directives");textareaDirective.directive("cgTextareaEditable",function(){var a={getCaretPosition:function(){return this.selectionStart},setCaretPosition:function(a){this.selectionStart=a,this.selectionEnd=a,this.focus()},hasSelection:function(){return this.selectionStart==this.selectionEnd?!1:!0},getSelectedText:function(){return this.value.substring(this.selectionStart,this.selectionEnd)},setSelection:function(a,b){this.selectionStart=a,this.selectionEnd=b,this.focus()},insertContent:function(a,b){var c=this.getCaretPosition()+a.length;this.value=this.value||"",this.value=this.value.substring(0,this.getCaretPosition())+a+this.value.substring(this.getCaretPosition(),this.value.length),this.setCaretPosition(c),b&&b(this)}};return{link:function(b,c,d){angular.extend(c[0].__proto__,a)}}}),textareaDirective.directive("cgFileSelector",function(){}),angular.module("directives").directive("cgTimeoutInput",["$timeout","$parse","Common",function(a,b,c){var d=13,e={},f=function(f,g,h){var i=!!h.enter,j=h.time||300,k=function(a,b){return a.$id+"_"+b[0].outerHTML},l=f.$parent,m=b(h.cgTimeoutInput),n=function(b){var h=k(f,g),n=e[h];n&&(a.cancel(n),delete e[h]),e[h]=n=a(function(){c.safeApply.call(f,function(){m(l)}),delete e[h]},j),i&&b.keyCode==d?(c.safeApply.call(f,function(){m(l)}),a.cancel(n),delete e[h]):b.keyCode==d&&(a.cancel(n),delete e[h])};g.on("keyup",n),f.$on("$destroy",function(){})};return{link:f,scope:{}}}]),angular.module("directives").directive("cgTriggerFormSubmit",["$parse","Common",function(a,b){return{link:function(a,b,c){var d=c.cgTriggerFormSubmit,e=$("#"+d);if(0!==e.length){var f=function(){e.submit()};b.on("click",f),a.$on("$destroy",function(){b.off("click",f),e=void 0,d=void 0})}}}}]),angular.module("directives").directive("cgTriggerUpload",["$parse","Common",function(a,b){return{link:function(c,d,e){var f=a(e.cgTriggerUpload);d.on("click",function(){b.safeApply.call(c,function(){var a=function(a){$(a).trigger("click")};f(c,{$callback:a})})})}}}]),angular.module("directives").directive("uiFloatingDropDown",["$parse",function(a){return{scope:{options:"=",label:"=",model:"=ngModel",args:"=",onChange:"&"},restrict:"E",replace:!0,templateUrl:"common/directives/uiFloatingDropDown/uiFloatingDropDown.html",link:function(a,b,c){b.dropdown(),a.change=function(c){a.model=c.value,a.label=c.label,a.onChange()&&a.onChange()(c,a.args),b.dropdown("hide")}}}}]),angular.module("directives").directive("cgUserActiveness",["User",function(a){return{templateUrl:"common/directives/userActiveness/tpl/userActiveness.html",scope:{currentUser:"=",targetUser:"="},link:function(b,c,d){b.loaded=!1;var e=function(){b.loaded=!1,a.get_activeness_data({global_key:b.targetUser.global_key},function(a){a&&0===a.code&&(b.activeness=a.data,b.loaded=!0)})},f=function(){a.can_show_private_activeness({},function(a){a&&0===a.code&&(b.showPrivate=a.data)})},g=b.$watch("[currentUser,targetUser]",function(){var a=b.currentUser,c=b.targetUser;a&&c&&a.id&&c.id&&a.id===c.id&&(f(),g&&g())},!0),h=b.$watch("targetUser",function(){b.targetUser&&b.targetUser.id&&(e(),h&&h())});b.setActivenessShowPrivate=function(c){b.showPrivate!==c&&a.set_activeness_show_private({showPrivate:c},function(a){a&&0===a.code&&(b.showPrivate=c,e())})}}}}]),angular.module("directives").directive("cgUserActivenessGraph",["$timeout",function(a){return{scope:{cgUserActivenessGraph:"="},link:function(a,b,c){var d=10,e=1,f=!0,g=12,h=["S","M","T","W","T","F","S"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],j=function(a){var b,c=0;for(b=0;b<a.length;b++)a[b].count>c&&(c=a[b].count);return 0==c?function(){return"#eeeeee"}:(c>99&&(c=99),function(a){var b=Math.ceil(100*a/c);return 0==b?"#eeeeee":b>=1&&24>=b?"#d6e685":b>=25&&49>=b?"#8cc665":b>=50&&74>=b?"#44a340":b>=75?"#1e6923":void 0})},k=function(a,b){var c;return c=moment(new Date(a)).format("YYYY 年 MM 月 DD 日"),0==b?c+"没有活动":b>99?c+"的活跃度超过 99 度":c+"的活跃度是 "+b+" 度"},l=function(a){var b,c,f,g,h,i=[];for(f=j(a),b=0;b<a.length;b++)b%7==0&&(c=(d+e)*Math.round(b/7),h=$("<g></g>").attr("transform","translate("+c+", 0)"),i.push(h)),g=$("<rect></rect>").addClass("day").attr("width",d).attr("height",d).attr("y",(d+e)*(b%7)).attr("fill",f(a[b].count)).attr("data-count",a[b].count).attr("data-date",a[b].date).attr("data-content",k(a[b].date,a[b].count)),h.append(g);return i},m=function(a){var b,c,g,j,k=[];for(b=0;b<a.length;b+=7){if(c=moment(new Date(a[b].date)),0===b){if(c.date()>c.endOf("month").date()-14)continue}else if(!(c.date()<=7&&b+7<a.length))continue;g=(d+e)*Math.round(b/7),j=$("<text></text>").attr("x",g).attr("y",-5).addClass("month").text(i[c.month()]),k.push(j)}for(b=0;7>b;b++)j=$("<text></text>").attr("text-anchor","middle").addClass("wday").attr("dx",-8).attr("dy",(d+e)*(b%7+1)-2).text(h[b]),f&&b%2==0&&j.attr("style","display: none;"),k.push(j);return k},n=function(a){var c,f,h;h=Math.floor(a.length/7)+(a.length%7===0?0:1),c=$("<g></g>").attr("transform","translate(13, 16)").append(l(a)).append(m(a)),f=$("<svg></svg>").attr("width",g+3+d*h+e*(h-1)).attr("height",g+5+7*d+6*e).addClass("daily-activeness-graph").append(c),b.empty(),b.append(f[0].outerHTML),$(b).find("rect.day").popup({context:$(b),offset:5,position:"top center"})},o=a.$watch("cgUserActivenessGraph",function(a){a&&a.length&&n(a),o&&o()})}}}]),angular.module("filters").filter("bytes",function(){return function(a,b){if(isNaN(parseFloat(a))||!isFinite(a))return"-";if(0===a)return 0;"undefined"==typeof b&&(b=1);var c=["bytes","KB","MB","GB","TB","PB"],d=Math.floor(Math.log(a)/Math.log(1024));return(a/Math.pow(1024,Math.floor(d))).toFixed(b)+" "+c[d]}}),angular.module("filters").filter("commitsToArray",function(){return function(a){return a instanceof Object?_.map(a,function(a,b){return Object.defineProperty(a,"$key",{__proto__:null,value:b})}):a}}),angular.module("filters").filter("createTimeFilter",["Time",function(a){return function(b){var c=function(){return moment().startOf("day")},d=moment(b).week(),e=c().week(),f=moment(b).year(),g=moment(c()).year(),h=f===g;if(d===e&&h)return a.friendly(b);var f=moment(b).year(),g=moment(c()).year(),i=g===f?"MMMDo":"YYYY年MMMDo";return moment(b).format(i)}}]),angular.module("filters").filter("distance",function(){return function(a,b,c){(!c||1>c)&&(c=3);var d=moment.duration(a,b),e=moment.langData(),f="",g={yy:d.years(),MM:d.months(),dd:d.days(),hh:d.hours(),mm:d.minutes()};if(0==g.mm)f+=e.relativeTime(d.seconds(),!0,"s");else for(b in g){var h=g[b];if(h>0&&(f+=e.relativeTime(h,!0,b),c--),0==c)break}return f}}),angular.module("filters").filter("encodeUri",["$window",function(a){return a.encodeURIComponent}]),angular.module("filters").filter("decodeUri",["$window",function(a){return a.decodeURIComponent}]),angular.module("filters").filter("encodeGitUri",["$window",function(a){return function(b){return a.encodeURIComponent(b).replace(/%2F/g,"/")}}]),angular.module("filters").filter("friendlyNumber",function(){return function(a){return a>=1e3&&99999>=a?Math.floor(a/100)/10+"K":a}}),angular.module("filters").filter("highlight",function(){return function(a,b,c){return a&&(b||angular.isNumber(b))?(a=a.toString(),b=b.toString(),c?a.split(b).join('<span class="highlight-match-text">'+b+"</span>"):a.replace(new RegExp(b,"gi"),'<span class="highlight-match-text">$&</span>')):a}}),angular.module("filters").filter("htmlToPlainText",function(){return function(a){return angular.element("<div>"+a+"</div>").text()}}),angular.module("filters").filter("i18n",["i18nService",function(a){return function(b,c){var d=Array.prototype.slice.call(arguments,2);return a.localize(c,b,d)}}]),angular.module("filters").filter("pathToId",["$window",function(a){return function(a){return a.replace(/[.\/]/g,"_")}}]),angular.module("filters").filter("percent",function(){return function(a,b){return isNaN(parseFloat(a))||!isFinite(a)?"-":0==a?0:("undefined"==typeof b&&(b=2),(100*a).toFixed(b)+"%")}}),angular.module("filters").filter("projectDescription",[function(){return function(a){return a&&0!==$.trim(a).length||(a="&lt;该项目未添加简介&gt;"),a}}]),angular.module("filters").filter("projectType",function(){return function(a,b){var c=[];if(1!=b&&2!=b)return a;var d=!0,e=!1;return angular.forEach(a,function(a){a&&a.group?(e=!0,angular.forEach(a.projects,function(a){a.type==b&&(d=!1)}),d||c.push(a)):a&&a.type==b&&c.push(a)}),c}}),angular.module("filters").filter("restyleEmoji",[function(){var a=function(a){var b=a.find(".emotion.monkey");return 0===b.length?a:(b.each(function(){var a=$(this).attr("title"),b=$(this).attr("src");$(this).replaceWith(["::::",a,"@",b,":::: "].join(""))}),a)},b=function(a){var b=/(\:\:\:\:[^\:\ ]+\@\S+\:\:\:\:)/g,c=a.split(b);if(1===c.length)return c;var d=[];$.each(c,function(a,b){0!==$.trim(b).length&&d.push(b)}),c=d,d=[];for(var e=[],f=0;f<c.length;f++){var g=c[f];g.match(b)?e.push(g):(e.length>0&&(d.push(e),e=[]),d.push(g))}return e.length>0&&d.push(e),d},c=function(a){a=a.substring(4,a.length-4);var b=a.split("@"),c=b[0],d=b[1],e=$("<img>").attr("title",c).attr("src",d).addClass("emotion monkey");return e},d=function(a){var b={1:function(a){return $('<div class="two_wrapper"></div>').wrapInner(a)},2:function(a){return b[1](a)},3:function(a){return $('<div class="three_wrapper"></div>').wrapInner(a)},more:function(a){return b[3](a)}},d=$.map(a,function(a){return c(a)}),e=b[a.length],f=e&&e(d)||b.more(d);return $("<div>").html(f)},e=function(a){var b="";return $.each(a,function(a,c){b+=angular.isArray(c)?d(c).html():c}),b};return function(c){var d=$("<div>").html(c);if(d.text()==c)return c;a(d);var f=b(d.html()),g=e(f);return g}}]),angular.module("filters").filter("restyleMarkDownImage",[function(){return function(a,b,c){b=b?b:500,c=c?c:500;var d=/https\:\/\/(\S+)\.qbox\.me\/(\S+)\.(png|jpg|jpeg|gif)(\?(imageView2|imageMogr2|type))?/g,e=/(http|https)\:\/\/[\w\.\:]+\/api\/project\/(\d+)\/files\/(\d+)\/imagePreview(\?(width|type|height))?/g,f=function(a){if(!a)return!1;var b=a.split("?");return b.length>1},g=function(a,b){var c=a.indexOf(b),d=a.substring(c-6,c);return' src="'!==d&&'href="'!==d},h={};a=a.replace(d,function(d){if(f(d)||g(a,d))return d;var e=d.replace(/.*(png|jpg|jpeg|gif)$/,"$1");e=e!==d?"&imageMogr2/format/"+e+"/ignore-error/1":"";var i="?imageView2/2/w/"+b+"/h/"+c+e,j=d+i;return h[j]=d,j}),a=a.replace(e,function(d){if(f(d)||g(a,d))return d;var e="?type=2&width="+b+"&height="+c,i=d+e;return h[i]=d,i});var i=$("<div>").html(a),j=i.find("a.bubble-markdown-image-link");return j.each(function(a){var b=$(this),c=b.attr("href");h[c]&&b.attr("href",h[c].replace(/&amp;/g,"&"))}),i.html()}}]),angular.module("filters").filter("equalRole",function(){return function(a,b){return a&&a.current_user_role_id&&b?a.current_user_role==b:!1}}).filter("isRole",function(){return function(a,b){return a&&a.current_user_role_id&&b?isNaN(b)?a.current_user_role==b:a.current_user_role_id>=b:!1}}).filter("advanceRole",function(){return function(a,b){return a&&a.current_user_role_id&&!isNaN(b)?a.current_user_role_id>b:!1}}).filter("isOwnerOf",function(){return function(a,b){return a&&b&&(a.user_id||a.id)===(b.owner_id||b.owner&&b.owner.id)}}).filter("isCreatorOf",function(){return function(a,b){return a&&b&&(a.user_id||a.id)===(b.creator_id||b.creator&&b.creator.id)}}).filter("isRoleIn",function(){return function(a,b){return a&&b&&b.indexOf(a)>=0}}),angular.module("filters").filter("searchString",function(){var a=function(a,b){return(b&&a[b]||a||"").toLowerCase()};return function(b,c){var d=(c.key||"").toLowerCase(),e=c.region;return angular.isArray(b)&&d?(b=_.filter(b,function(b){var c=a(b,e);return c.indexOf(d)>=0}),b=_.sortBy(b,function(b){var c=a(b,e);return c.length})):b}}),angular.module("filters").filter("shortCommitId",["$window",function(a){return function(a,b){return isNaN(parseInt(b,10))&&(b=7),a.substring(0,b)}}]),angular.module("filters").filter("testMember",function(){return function(a,b){return"undefined"==typeof a||null===a?!1:"undefined"==typeof b||null===b?!1:_.indexOf(a,b)>=0?!0:!1}}),angular.module("filters").filter("thumbnail",["Common",function(a){return function(b,c){return a.thumbnail(b,c)}}]),angular.module("filters").filter("unreadCount",function(){return function(a,b){return b=b||99,a>b?b+"+":a}}),angular.module("app").controller("QcGuideController",["$scope","$rootScope","$route",function(a,b,c){a.modalVisible=!0,a.close=function(){b.disableGuide("qc"),a.modalVisible=!1,$("body").removeClass("in-guide"),c.reload()},$("body").addClass("in-guide"),setTimeout(function(){var a=document.getElementById("inner-menu-qc-button"),b=document.getElementById("qc-guide-content");if(a&&b){var c=~~a.getBoundingClientRect().top;c-=210,b.setAttribute("style","top: "+c+"px;")}},1e3)}]),angular.module("app").controller("TopMenuGuideController",["$scope","$rootScope","$localStorage","User",function(a,b,c,d){
var e=$(".menu.frequently-projects");a.modalVisible=!1,a.close=function(){b.disableGuide("top-menu"),e.removeClass("always-show"),a.modalVisible=!1};var f=function(){a.$apply(function(){$(".ui.dropdown.userinfo").off("mouseover",f),e.addClass("always-show"),a.modalVisible=!0})};$(".ui.dropdown.userinfo").on("mouseover",f)}]),angular.module("app").controller("TopicGuideController",["$scope","$rootScope","$route","User","$localStorage",function(a,b,c,d,e){a.step=1,a.modalVisible=!0,a.next=function(){switch(1==a.step&&b.PROJECT.is_public?a.step=3:a.step++,a.step){case 1:case 2:window.scrollTo(0,0);break;case 3:case 4:window.scrollTo(0,200);break;case 5:window.scrollTo(0,615)}},a.close=function(){b.disableGuide("topic"),a.modalVisible=!1,$("#project-topic-detail-bottom").removeClass("topic-guide-margin"),$("body").removeClass("in-guide"),c.reload()},$("#project-topic-detail-bottom").addClass("topic-guide-margin"),$("body").addClass("in-guide")}]),angular.module("constants").constant("Locale_enUS",{resources:{top_menu:{projects:"Projects",tasks:"Tasks",teams:"Teams",bubbles:"Bubbles",task:"Task",no_task:"You have no task",show_all_task:"Show all task",friends:"Friends",project:"Project",bubble:"Bubble",help:"Help",nav:"Nav",functions:"Products",git_repo:"Git Repository",project_management:"Project Management",price:"Price",enterprise:"Enterprise",vip:"Vip",upgrade:"Upgrade",blog:"Blog",show_all_tasks:"Show all tasks",show_all_notifications:"Show all notifications",show_all_messages:"Show all messages",notifications:"Notifications",message:"Message",friend:"Friend",no_notification:"You have no notifications",unread_notify:"#{0} unread notifications",no_message:"You have no messages",unread_message:"#{0} unread messages",send_message:"Send message",account:"Account",settings:"Settings",profile:"Profile",logout:"Logout",app_download:"APP",register:"Register",login:"Login",pin_projects:"Pin projects",set_pin_projects:"Set pin projects",set_pin_projects_now:"Set pin projects now",loading:"Loading...",pin_projects_tip:"You have not set any pin projects yet.",hover_to_set_pin:"Set pin projects by hover on the icon and click pin"},context_menu:{projects:"Projects",tasks:"Tasks",teams:"Teams",friends:"Friends",relationship_center:"Relationship Center",notifications:"Notifications",messages:"Messages",account:"Account",file:"Files",setting:"Setting",code:"Code",paas:"PAAS",qc:"QC",topics:"Topics",members:"Members"},user_projects:{projects:"Projects",projects_classify_tip:"Classified by mine, joined, archived.",all_projects:"All projects",created_by_me:"Created by me",joined_projects:"Joined",opened_paas_projects:"Paas opened",archived_projects:"Archived",watched_projects:"Watched",stared_projects:"Stared",projects_square:"Projects square",search_result:"Search result",add_project:"Add project",picked_projects:"(#{0} projects selected)",search_by_name:"Search by name",group_projects:"Group projects",group:"Group",list_view:"List view",icon_view:"Icon view",move_to_new_group:"Move to new group",move_to:"Move to ...",out_of_group:"Out of group",not_created_group:"Not created any groups yet",new_group:"new-group","return":"return",all:"All","private":"Private","public":"Public",unarchive:"Unarchive",loading:"Loading...",no_projects:"No projects",create_one:"Create one",no_projects_current:"No projects yet",go_to_square:"Browse the square",watched:"Watched",stared:"Stared",select_projects_first:"Please pick projects first",group_size_less_9:"Must pick less than 9 projects",select_project_to_move:"Please pick projects in the group",confirm_to_unarchive:"Confirm to unarchive?"},code_menu:{repository:"Git repository",code:"Code",branches:"Branches",tags:"Tags",compare:"Compare",merge_request:"Merge Request",network:"Network",statistic:"Statistics",pages:"Pages",access_repo:"access repo",version_tips:"Support Git 1.8.0 or higher.",copy:"Copy",stared:"Stared",watched:"Watching",fork_confirm:"Comfirm fork to copy this project?",fork_tip:"Forking",release:"Release",code_analysis:"Analysis"},code_navi_bar:{download:"Download",history:"History",branches:"Branches",tags:"Tags"},code_keys:{key_title_label:"Name",key_title_placeholder:"Give a name for the key. Optional.",key_content_label:"Content",key_content_placeholder:"Public key begins with 'ssh-rsa, ssh-dss, ecdsa-sha2-nistp256, ecdsa-sha2-nistp384, ecdsa-sha2-nistp521, ssh-ed25519', such as: ",add_button:"Add",delete_button:"Delete",edit_button:"Edit",save_button:"Save",cancel_button:"Cancel",options:"Options",exist_key_list:"Existed Public Keys",webide_created_at:"WebIDE created at",upload_at:"uploaded at",key_expiration_label:"Expiration",never_expire_label:"Never expired",add_new_key:"Add New Key",no_key_msg:"No keys yet.",key_entry_title:"Name: ",key_entry_finger_print:"Finger Print: ",key_entry_expiration:"Expiration: ",key_entry_added_at:"Added at",key_entry_expired_msg:"Expired! Please reedit the expiration.",option_successfully:"Success!"},code_blame:{link_raw:"Raw",link_blob:"Blob",link_history:"History",blame:"Blame"},code_blob:{commit_at:"committed at",link_edit:"Edit",link_raw:"Raw",link_history:"History",link_blame:"Blame",link_delete:"Delete",not_support_to_preview:"Not support to preview this file",click_to_download:" click me to download",path_not_found:"Path not found"},code_branches:{branch:"Branches",confirm_to_delete_branch:"Confirm to delete #{0}?",delete_successfully:"Delete successfully",open_protected_branch_successfully:"Set protected branch (#{0}) successfully！",close_protected_branch_successfully:"Close protected branch (#{0}) successfully！",option_successfully:"Success!",default_branch:"Default branch",update_button:"Update",branch_header:"Branches",new_branch:"New branch",set_default_branch:"Set default branch",label_default:"Default",button_download:"Download",button_merge_request:"Create merge request",menu_modify_default_branch:"Set default branch",menu_set_protected_branch:"Set protected branch",menu_download_branch:"Download",menu_delete_branch:"Delete",no_branches:"No branches to list",please_commit_to_repo:"Please commit to repo first",create_branch:"Create branch",branch_name:"Branch name",please_enter_branch_name:"Please enter branch name",branch_start_point:"Start point of the branch",please_enter_start_point:"Please enter start point (Branch,Tag,Sha)",button_create:"Create",popup_branch_metric_with_aheads_and_behinds:"#{0} commits ahead, #{1} commits behind default branch",popup_branch_metric_with_aheads_and_one_behind:"#{0} commits ahead, #{1} commit behind default branch",popup_branch_metric_only_with_aheads:"#{0} commits ahead default branch",popup_branch_metric_with_one_ahead_and_behinds:"#{0} commit ahead, #{1} commits behind default branch",popup_branch_metric_with_one_ahead_and_one_behind:"#{0} commit ahead, #{1} commit behind default branch",popup_branch_metric_only_with_one_ahead:"#{0} commit ahead default branch",popup_branch_metric_only_with_behinds:"#{1} commits behind default branch",popup_branch_metric_only_with_one_behind:"#{1} commit behind default branch",popup_branch_metric_without_aheads_and_behinds:"even with default branch",protected_branches:"Protected branches",protected_branches_tip:"Protected branches are limited. Only MR is admitted to update the branch when +1 action is done.",branches_admin:"Branch administrators",branches_admin_tip:"MR need to be grunted to merge when a branch administrator is set.You can make branch administrator push to branch directly by set 'Allow push directly'",remove_branches_admin:"Remove branch administrator",allow_push:"Allow push directly",add_branches_admin:"Add branch administrator",allow_force_push:"Allow force push",force_squash:"Force squash",search_options:"Search options:",keyword:"Keyword:"},code_commit:{link_code:"View code",committed_at:"committed at",option_successfully:"Success!"},code_compare:{compare_title:"Revision Compare",compare_tips:"Select two different branches、tags、or sha1 to compare",base:"Base:",swap:"Swap",compare:"Compare:",commits:"Commits list",file_changes:"File changes",compare_nocommits_tips:"Cannot get commits list, just try to",swap_order:"swap the refs",cannot_get_commits:"Cannot get commits list.",compare_and_see_changes:"Compare and see all changes.",branch_tag_sha_compare:"Branches、tags、sha1 are all ok, you will see all changes."},code_network:{same_day_commit:"Continuous same color indicate the same day commits, ",tag_commit:"indicate that commit is a tag",loading:"Loading...",click_to_load_more:"Clock to load more",all_data_loaded:"All data loaded."},code_commits:{pre:"Previous",next:"Next",history:"History"},code_bread_crumb:{save:"Save",cancel:"Cancel",option_successfully:"Success!"},code_diff_show:{file_count:"files",insertions:"insertions",deletions:"deletions",view_options:"View options",wrap_line_view:"Wrap lines",show_tab:"Show Tabs",ignore_white_space:"Ignore space",inline_diff:"Inline diff",highlight:"Highlight",split_diff:"Split",normal_diff:"Normal",show_all:"Show all",hide_all:"Hide all",diff_large_tips:"Diff is large, cannot view online,",click_to_download_diff:"click to download diff file"},code_release:{tab_release:"Releases",tab_tag:"Tags",new_release:"New Release",no_release:"There is no releases in this project.",view_diff_compared_to:"View diff compared to #{0}",deleted_successfully:"Deleted release successfully.",tag_name:"Tag Name",tag_point:"Tag Point:",title:"Title",description:"Description",put_release_description_here:"Put release description here.",select_release_tag_to_be_compared:"Select a release tag to be compared",create_button:"Create",exit_without_save:"Exit without save?",tag_name_cannot_be_empty:"Tag name can not be empty.",submmit_after_finishing_upload:"Please submit after attachments uploading finishes.",created_successfully:"Created successfully.",clear_selected_resources:"Clear selected resources?"},file_navigator:{download:"Download",branches:"Branches",tags:"Tags",no_branches:"No branches",no_tags:"No tags",history:"History",choose_template:"Choose a template",create_new_file:"Create new file",upload_files:"Upload files",find_file:"Find file"},code_delete:{delete_file_tips:"You will delete file #{0}",commit_message:"Commit message",commit_button:"Commit to branch #{0}",cancel:"Cancel",delete_file:"Delete file",delete_successfully:"Success!"},code_edit:{preview:"Preview",close_preview:"Close Preview",commit_message:"Commit message",commit_to_branch:"Commit to branch #{0}",cancel:"Cancel",confirm_leave:"Confirm to leave without save changes?",edit_file:"Edit file ",new_file:"New file ",option_successfully:"Success!",file_name_invalid:"File name should not contains specific symbols."},code_upload:{upload_to_dir:"Upload files to this dir.",support_format:"Support all files less than 20M.",upload_file_to:"Upload file to ",confirm_leave:"Confirm to leave without save changes?",select_file:"Select file to upload",file_name_invalid:"File name should not contains specific symbols.",input_commit_message:"Please input commit message",total_size_100m:"Total size is limited to 100M",option_successfully:"Success!",ignore_empty_file:"Ignore empty file #{0}",ignore_large_than_20m:"Ignore large than 20m file #{0}"},code_statistics:{statistics_title:"Code statistics"},code_merge:{merge_request:"Merge requests",auto_lint:"Auto lint",auto_lint_tips:"Auto lint code before merge.",new_merge_request:"New merge request",search_options:"Search options:",comments:"comments",reviewer:"Reviewer ",already_reviewed:" reviewed this MR",no_result:"No result.",squash_and_merge:"Squash and Merge",squash_and_merge_tip:"The Squash and Merge option, during merging, will compress new commits comparing to target branch, and append as a normal commit to it.",merge_this_request:"Merge this request",commit_message:"Commit message",delete_src_branch:"Delete original branch",fastforward_merge:"Fast-Forward merge",cancel:"Cancel",merge:"Merge",refuse:"Refuse",merge_status:"Merge status","default":"Default",can_merge:"Can Merge",cannot_auto_merge:"Cannot auto merge",refused:"Refused",merged:"Merged",canceled:"Canceled",granted:"Granted",label:"Label",creator:"Creator",merger:"Merger",sort:"Sort",create_time:"Create time",merge_time:"Merge time",update_time:"Update time",key_word:"Key word",canceled_mr:"Tips：Cannot view a canceled MR",all_people:"All people",unhandled:"Unhandled",handled:"handled",new_mr_tip1:"You can set the reviewers and relat tasks within the project when you create a MR.",new_mr_tip2:"Creator of the MR can edit the MR any time before merged.",src_branch:"Original branch",des_branch:"Target branch",input_mr_title:"Please input MR title",input_mr_description:"Please input MR description(support Markdown)",code_review:"Code review",task_ref:"Task reference",submit:"Submit",auto_new_mr_tip:"You should choose different branches.。Try to auto create MR by push to remote branch mr/master/branch_name !",see_more:"See more",cannot_create_mr:"Cannot create MR, confirm that original branch is ahead of target branch at least one commit.",change_details:"Change details",commits:"Commits",file_changes:"File changes",no_description:"No description, click to add.",code_lint:"Code lint",linting:"Code linting",lint_done:"Code lint completed",review_tip_1:"The name will turn to green, when the reviewer +1.",review_tip_2:"The other's name will show on the list, when they +1. It is a reference information.",review_tip_3:"The creator can merge the MR self when the MR is granted by protected branch administrator.",review_tip_4:"The creator's name will be green when the MR is granted.",grant:"Grant",cancel_grant:"Cancel grant",cancel_plus:"Cancel +1",reference_id:"Reference ID ",no_reviewers:"No reviewers",please_select:"Please select",cannot_merge_tip1:"Coding cannot merge the MR, you should merge it by follow these steps:",cannot_merge_step1:"Step 1：Create a new branch to test the changes",cannot_merge_step2:"Step 2：Merge to target branch and push to Coding.",activities:"activities",squash_commits:"Squash commits",squash_tip_1:"Squash make multi commits to one，never change diff，similar to rebase",squash_tip_2:"Tip：Operation is not reversible",please_input_commit_message:"Please input commit message",option_successfully:"Success!"},code_comment:{comments_only:"Comments only",reply:"Reply","delete":"Delete",show_detail:"Show detail",hide_detail:"Hide detail",comment_diff:"Comments on file changes",comment_outdated_diff:"Comments on outdated file changes",no_comments:"No comments yet",comment_now:"Comment now",loading_comments:"Loading comments..."},code_tag:{tags:"Tags",new_tags:"Create tag",created_at:"created at",no_tags:" No tags",can_user:"Can use",create_tag:"to add a new tag",push_tag:" to push a tag to Coding",tag_name:"Tag name",input_tag_name:"Input new tag name",tag_point:"Tag point",tag_point_tip:"Branches, Tags, sha are all ok.",tag_message:"Tag message",tag_message_tip:"Input tag message",create:"Create"},code_tree:{coding_tip:"Coding tips",coding_tip1:"There is too many files in this dir, we show up to 500 files, you can clone to view all files.",commit_at:"Committed at",readme_recommend:"We recommend to create a ",upload_tip:"Upload file to this dir",support_format:"Support all files less than 20M.",file_path_not_exist:"File path not exist."},code_plot:{network:"Network"},code_find_file:{exit:"Exit",keyboard_help:'Start typing to filter the file list. Use<span class="key-label">↑</span>and<span class="key-label">↓</span>to navigate, <span class="key-label">Enter</span>to view files. Or exit the <i>file finder</i> by<span class="key-label">Esc</span>.',nothing_found:"Nothing found related to '#{0}'"},paas_menu:{paas_platform:"PaaS",repo_paas_platform:"",controller:"Controller",logs:"Logs",filesystem:"FileSystem",environment_variables:"Variable",services:"Services"},paas_controller:{permission_denied:"Premission Denied",permission_denied_tip1:"You will: ",permission_denied_tip2:"look help of PaaS",permission_denied_tip3:"or",permission_denied_tip4:"visit this Application",server:"Server: ",controller:"Controller",runtime:"runtime:",status:"Status",domain:"domain: ",modify_domain:"Modify Domain",updating_status:"Updating status..",go_to:"Go to",memory:"Memory",modify_memory:"Modify memory",disk:"Disk",cpu:"CPU",start:"Start",stop:"Stop",restart:"Restart",remove:"Remove",before_remove_tip:"Reopened after remove will charge 0.01 mart coin",stop_confirm:"Are you sure to stop?",restart_confirm:"Are you sure to restart?",deploy_confirm:"Are you sure to deploy?",compile_and_deploy:"Compile and Deploy",deployment_version:"Version:",deployment_version_placeholder:"Branch name, tag name or commit sha(default value is master)",hide_expert_options:"Hide Expert Options",show_expert_options:"Show Expert Options",expert_options_tip1:"Tips: ",expert_options_tip2:"Please all blank if you don’t understand these meaning. In most cases we don’t neeconfigure these option",source_code_directory:"SourceCode directory",source_code_directory_placeholder:"Deploy directory (optional, relative to the project root directory)",command:"Command",command_placeholder:"Application startup command (optional, executable file or shell script)",buildpack_placeholder:"Custom buildpack path (optional, git repo URL)",choice_runtime:"Runtime",auto_detection:"Auto Detection",auto_deploy:"Auto Deploy",auto_deploy_tip:"Deployment version updated automatically deployed to the demo platform.",deploy:"Deploy",last_deployed:"Last deployed: ",paas_not_avaliable_tip:"PaaS platform is not available",deploying_tip:"Project has been deployed, please wait a moment, status is automatically updated.",version_not_found_tip:"Not for deployment, please check whether the input branch, tag, or commit sha exist!"},task_menu:{},topic_menu:{},common:{enabled:"Enabled",operation_failed:"Operation Failed"}}}),angular.module("constants").constant("Locale_zhCN",{resources:{top_menu:{projects:"项目",tasks:"任务",teams:"团队",bubbles:"冒泡",task:"任务",no_task:"没有未完成的任务",show_all_task:"查看全部任务",friends:"好友",project:"项目",bubble:"冒泡",help:"帮助",nav:"导航",functions:"功能",git_repo:"代码托管",project_management:"项目管理",price:"价格",enterprise:"企业版",vip:"会员",upgrade:"项目升级",blog:"博客",show_all_tasks:"查看全部任务",show_all_notifications:"查看全部通知",show_all_messages:"查看全部私信",notifications:"通知",message:"私信",friend:"好友",no_notification:"你还没有任何通知",unread_notify:"#{0} 未读信息",no_message:"你还没有任何私信",unread_message:"#{0} 未读私信",send_message:"马上发送私信",account:"我的账户",settings:"个人设置",profile:"我的主页",logout:"退出",app_download:"APP 下载",register:"注册",login:"登录",pin_projects:"常用项目",set_pin_projects:"设置常用项目",set_pin_projects_now:"马上去设置",loading:"正在加载...",pin_projects_tip:"你还没有设置常用项目，去项目页面设置？",hover_to_set_pin:"Hover 项目 Logo 就能 Pin 呢！"},context_menu:{projects:"项目",tasks:"任务",teams:"团队",friends:"好友",relationship_center:"关系中心",notifications:"通知",messages:"私信",account:"账户",file:"文件",setting:"设置",code:"代码",paas:"演示",qc:"质量管理",topics:"讨论",members:"成员"},user_projects:{projects:"项目",projects_classify_tip:"按我创建的、参与的和归档的项目分类",all_projects:"所有项目",created_by_me:"我创建的",joined_projects:"我参与的",opened_paas_projects:"已开启演示",archived_projects:"归档项目",watched_projects:"我关注的",stared_projects:"我收藏的",projects_square:"项目广场",search_result:"搜索结果",add_project:"添加项目",picked_projects:"(已选 #{0} 个项目)",search_by_name:"项目名搜索",group_projects:"对项目进行分组",group:"分组",list_view:"列表视图",icon_view:"图标视图",move_to_new_group:"移动至新分组",move_to:"移动至..",out_of_group:"组外",not_created_group:"尚未创建任何分组",new_group:"新分组","return":"返回",all:"所有","private":"私有","public":"公开",unarchive:"解除归档",loading:"加载中...",no_projects:"没有符合条件的项目",create_one:"创建一个",no_projects_current:"尚无任何项目",go_to_square:"去广场看看",watched:"关注",stared:"收藏",select_projects_first:"请先选择项目再进行操作！",group_size_less_9:"每个分组项目数不能超过 9 个！",select_project_to_move:"请在分组内选择需要移出的项目！",confirm_to_unarchive:"将该项目解除归档？"},code_menu:{repository:"Git 仓库",code:"代码",branches:"分支",tags:"标签",compare:"版本对比",merge_request:"合并请求",network:"项目网络",statistic:"项目统计",pages:"Pages 服务",access_repo:"方式访问仓库",version_tips:"建议使用 Git 1.8.0 以上的版本",copy:"复制",stared:"已收藏",watched:"已关注",fork_confirm:"fork将会将此项目复制到您的个人空间，确定要fork吗?",fork_tip:"正在 Fork 稍后会自动跳转",release:"Release",code_analysis:"代码分析"},code_navi_bar:{download:"下载",history:"历史",branches:"分支",tags:"标签"},code_keys:{key_title_label:"公钥名称",key_title_placeholder:"自定义公钥名称，可不填",key_content_label:"公钥内容",key_content_placeholder:"请粘贴以 ssh-rsa, ssh-dss, ecdsa-sha2-nistp256, ecdsa-sha2-nistp384, ecdsa-sha2-nistp521, ssh-ed25519 开头的公钥，例如：",add_button:"添加",delete_button:"删除",edit_button:"编辑",save_button:"保存",cancel_button:"取消",options:"操作",exist_key_list:"已添加的公钥",webide_created_at:"WebIDE 创建于",upload_at:"上传于",key_expiration_label:"公钥有效期至",never_expire_label:"永久有效",add_new_key:"新增公钥",no_key_msg:"您还没有添加公钥。",key_entry_title:"公钥名称：",key_entry_finger_print:"公钥指纹（Finger Print）：",key_entry_expiration:"有效期至：",key_entry_added_at:"添加于",key_entry_expired_msg:"已过期失效，请重新编辑有效期。",option_successfully:"操作成功"},code_blame:{link_raw:"原始数据",link_blob:"查看代码",link_history:"提交历史",blame:"按行查看"},code_blob:{commit_at:"提交于",link_edit:"编辑",link_raw:"原始数据",link_history:"提交历史",link_blame:"按行查看",link_delete:"删除",not_support_to_preview:"不支持预览此文件",click_to_download:" 点此下载",path_not_found:"路径不存在"},code_branches:{branch:"分支",confirm_to_delete_branch:"确定要删除该分支(#{0})么?",delete_successfully:"删除成功",open_protected_branch_successfully:"启用保护分支(#{0})成功！",close_protected_branch_successfully:"关闭保护分支(#{0})成功！",option_successfully:"操作成功",default_branch:"默认分支",update_button:"更新",branch_header:"分支",new_branch:"新建分支",set_default_branch:"设置默认分支",label_default:"默认分支",button_download:"下载",button_merge_request:"新建合并请求",menu_modify_default_branch:"修改默认分支",menu_set_protected_branch:"设置保护分支",menu_download_branch:"下载分支",menu_delete_branch:"删除分支",no_branches:"本项目暂无分支",please_commit_to_repo:"请先提交代码到 Git 仓库",create_branch:"创建分支",branch_name:"分支名称",please_enter_branch_name:"请输入分支名称",branch_start_point:"分支起点",please_enter_start_point:"请输入分支起点，分支、标签、commit Id均可",button_create:"创建",popup_branch_metric_with_aheads_and_behinds:"比默认分支多了 #{0} 个提交，少了 #{1} 个提交",popup_branch_metric_with_aheads_and_one_behind:"比默认分支多了 #{0} 个提交，少了 1 个提交",popup_branch_metric_only_with_aheads:"比默认分支多了 #{0} 个提交",popup_branch_metric_with_one_ahead_and_behinds:"比默认分支多了 1 个提交，少了 #{1} 个提交",popup_branch_metric_with_one_ahead_and_one_behind:"比默认分支多了 1 个提交，少了 1 个提交",popup_branch_metric_only_with_one_ahead:"比默认分支多了 1 个提交",popup_branch_metric_only_with_behinds:"比默认分支少了 #{1} 个提交",popup_branch_metric_only_with_one_behind:"比默认分支少了 1 个提交",popup_branch_metric_without_aheads_and_behinds:"与默认分支一致",protected_branches:"保护分支",protected_branches_tip:"保护分支是受限制的 Git 仓库分支，更新分支需要提交 MR，其他人 +1 后可自行合并。",branches_admin:"分支管理员",branches_admin_tip:"添加分支管理员后，MR 需分支管理员授权，授权后 MR 发起者可自行合并 MR。分支管理员默认需提交 MR，也可设置为允许直接 Push。",remove_branches_admin:"移除分支管理员",allow_push:"允许直接 Push",add_branches_admin:"添加分支管理员",allow_force_push:"允许 Force Push",force_squash:"强制 squash",search_options:"搜索条件:",keyword:"关键字"},code_commit:{link_code:"查看代码",committed_at:"提交于",option_successfully:"操作成功"},code_compare:{compare_title:"版本对比",compare_tips:"选择或输入两个不同的分支、标签、sha1 进行比较",base:"基于:",swap:"交换",compare:"对比:",commits:"提交记录",file_changes:"文件改动",compare_nocommits_tips:"对比中后一个 ref 提交先于前一个 ref，无法获得提交记录，可尝试",swap_order:"交换两个 ref 的次序",cannot_get_commits:"无法获得提交记录",compare_and_see_changes:"对比并查看全部的改动",branch_tag_sha_compare:"分支、标签、sha1 都能进行比较，所有的差异均会被呈现。"},code_network:{same_day_commit:"连续相同颜色代表同一天的 Commit ，",tag_commit:"代表某一个 tag 的 Commit",loading:"正在加载更多数据...",click_to_load_more:"点击加载更多",all_data_loaded:"数据已经全部加载完毕"},code_commits:{pre:"上一页",next:"下一页",history:"提交历史"},code_bread_crumb:{save:"保存",cancel:"取消",option_successfully:"操作成功"},code_diff_show:{file_count:"个文件",insertions:"增加",deletions:"删除",view_options:"显示选项",wrap_line_view:"折行显示",show_tab:"显示制表符",ignore_white_space:"忽略空白",inline_diff:"行内对比",highlight:"代码高亮",split_diff:"左右对比",normal_diff:"普通模式",show_all:"全部展开",hide_all:"全部收起",diff_large_tips:"改动太多，不宜在网页上展示,",click_to_download_diff:"点此下载 diff 文件"},code_release:{tab_release:"Release",tab_tag:"标签",new_release:"新建 Release",no_release:"本项目暂无 Release",view_diff_compared_to:"查看与 #{0} 的对比",deleted_successfully:"删除成功",tag_name:"标签",tag_point:"标记点:",title:"标题",description:"内容描述",put_release_description_here:"在此输入内容描述",select_release_tag_to_be_compared:"选择需要比较的 Release 标签",create_button:"创建",exit_without_save:"确认不保存就离开页面?",tag_name_cannot_be_empty:"标签不能为空",submmit_after_finishing_upload:"正在上传附件,请稍后提交",created_successfully:"创建成功",clear_selected_resources:"要清除之前添加的关联资源吗?"},file_navigator:{download:"下载",branches:"分支",tags:"标签",no_branches:"暂时没有分支",no_tags:"暂时没有标签",history:"提交历史",choose_template:"选择模板",create_new_file:"新建文件",upload_files:"上传文件",find_file:"寻找文件"},code_delete:{delete_file_tips:" 您将删除 #{0} 文件。",commit_message:"提交说明",commit_button:"提交到 #{0} 分支",cancel:"取消",delete_file:"删除文件",delete_successfully:"删除成功"},code_edit:{preview:"预览",close_preview:"关闭预览",commit_message:"提交说明",commit_to_branch:"提交到 #{0} 分支",cancel:"取消",confirm_leave:"确认不保存就离开页面?",edit_file:"编辑 ",new_file:"新建 ",option_successfully:"操作成功",file_name_invalid:"文件名不能含有特殊符号"},code_upload:{upload_to_dir:"将文件上传至此目录！",support_format:"支持所有文件格式，单个文件不超过 20M。",upload_file_to:"上传文件到 ",confirm_leave:"确认不保存就离开页面?",select_file:"请选择要上传的文件",file_name_invalid:"文件名不能含有特殊符号",input_commit_message:"请填写提交说明",total_size_100m:"合计文件大小超出限制（100M）",option_successfully:"操作成功",ignore_empty_file:"忽略空文件#{0}",ignore_large_than_20m:"忽略超过 20M 的文件 #{0}"},code_statistics:{statistics_title:"项目统计"},code_merge:{merge_request:"合并请求",auto_lint:"自动质量分析",auto_lint_tips:"在创建合并请求之后，自动对即将合并的代码进行质量分析。",new_merge_request:"新建合并请求",search_options:"搜索条件:",comments:"条评论",reviewer:"评审者 ",already_reviewed:" 已评审该 MR",no_result:"没有符合条件的内容",squash_and_merge:"合并时压缩提交",squash_and_merge_tip:"合并时压缩提交，会在合并时，将相对目标分支新增的提交进行压缩，并作为一个普通提交追加至目标分支。",merge_this_request:"合并此请求",commit_message:"提交信息",delete_src_branch:"删除源分支",fastforward_merge:"Fast-Forward 模式合并",cancel:"取消",merge:"合并",refuse:"拒绝",merge_status:"合并状态","default":"默认",can_merge:"可合并",cannot_auto_merge:"不可自动合并",refused:"已拒绝",merged:"已合并",canceled:"已取消",granted:"已授权",label:"标签",creator:"发起者",merger:"合并者",sort:"排序",create_time:"创建时间",merge_time:"合并时间",update_time:"更新时间",key_word:"关键词",canceled_mr:"提示：此 MR 已被取消，无法查看",all_people:"所有人",unhandled:"未处理的",handled:"已处理的",new_mr_tip1:"在创建新的合并请求时，可以填写代码评审，并引用项目内任务，进行关联。",new_mr_tip2:"MR发起人可以在该MR被合并前，随时对代码评审和引用任务进行编辑。",src_branch:"源分支",des_branch:"目标分支",input_mr_title:"请输入合并请求标题",input_mr_description:"输入合并请求详细描述(支持 Markdown)",code_review:"代码评审",task_ref:"任务引用",submit:"提交",auto_new_mr_tip:"请选择两个不同的分支发起 MR。为何不试试自动创建 MR？Push 代码到 mr/master/branch_name 轻松创建 MR！",see_more:"了解更多",cannot_create_mr:"无法创建合并请求: 请确认源分支是否至少有一个提交领先于目标分支",change_details:"改动明细",commits:"提交记录",file_changes:"文件改动",no_description:"没有描述,点击添加",code_lint:"质量分析",linting:"质量分析中",lint_done:"质量分析完成",review_tip_1:"当代码评审对 MR +1后，右侧列表对应的名字将变成绿色，并出现图标。",review_tip_2:"当非代码评审对 MR +1 后，将出现在右侧 +1 列表里，作为对合并的参考。",review_tip_3:"当创建的合并请求涉及保护分支时，如果发起人需要自己合并 MR，对该分支有权限的管理者可以对发起人给予授权。",review_tip_4:"授权后，右侧列表发起人的名字将变成绿色，并出现图标代表已获得对此次合并的授权，可以适时自行合并 MR。",grant:"授权",cancel_grant:"取消授权",cancel_plus:"撤销 +1",reference_id:"引用 ID ",no_reviewers:"尚未添加任何评审者",please_select:"请选择",cannot_merge_tip1:"Coding 不能帮你在线自动合并这个合并请求。可参照如下流程使用命令行来完成合并。",cannot_merge_step1:"第一步：从项目仓库中，创建一个新的分支，并测试合并请求中的改动。",cannot_merge_step2:"第二步：合并改动到目标分支，并推送到 Coding",activities:"动态",squash_commits:"合并提交记录",squash_tip_1:"Squash 操作将 MR 中所有提交合并成为一个新的提交，DIFF 保持不变，原理与 git rebase 相同。",squash_tip_2:"注意：该操作不可逆，请谨慎操作。",please_input_commit_message:"请输入提交信息",option_successfully:"操作成功!"},code_comment:{comments_only:"只看评论",reply:"回复","delete":"删除",show_detail:"展开详情",hide_detail:"隐藏详情",comment_diff:"对文件改动发起了讨论",comment_outdated_diff:"对过时的文件改动发起了讨论",no_comments:"还没人评论",comment_now:"立即评论",loading_comments:"正在加载评论..."},code_tag:{tags:"标签",new_tags:"新建标签",created_at:"创建于",no_tags:" 本项目暂无标签",can_user:"可以使用",create_tag:"来添加新标签",push_tag:" 来将标签推送到远程仓库",tag_name:"标签名称",input_tag_name:"请输入新建标签名称",tag_point:"标记点",tag_point_tip:"请输入标记点，分支、标签、commit Id均可",tag_message:"标签说明",tag_message_tip:"请输入标签说明",create:"创建"},code_tree:{coding_tip:"Coding 提示您",coding_tip1:"该目录下文件太多，这里最多显示出 500 个文件，如需要查看所有文件，请 Clone 到本地查看。",commit_at:"提交于",readme_recommend:"我们推荐每个项目都新建一个",upload_tip:"将文件上传至此目录！",support_format:"支持所有文件格式，单个文件不超过 20M。",file_path_not_exist:"文件路径不存在"},code_plot:{network:"项目网络"},code_find_file:{exit:"退出 Esc",keyboard_help:'输入需要寻找的关键字对文件列表进行过滤。使用<span class="key-label">↑</span>和<span class="key-label">↓</span>来选择文件，按<span class="key-label">Enter</span>查看文件内容。或按<span class="key-label">Esc</span>退出寻找文件。',nothing_found:"没有找到与“#{0}”相关的文件"},paas_menu:{paas_platform:"演示平台",repo_paas_platform:"项目演示平台",controller:"控制台",logs:"查看日志",filesystem:"文件系统",environment_variables:"环境变量",services:"服务管理"},paas_controller:{permission_denied:"无操作权限",permission_denied_tip1:"你可以：",permission_denied_tip2:"查看项目演示帮助",permission_denied_tip3:"或者",permission_denied_tip4:"访问此演示",server:"服务器：",controller:"控制台",runtime:"运行环境：",status:"当前状态",domain:"域名：",modify_domain:"修改域名",updating_status:"更新状态..",go_to:"马上访问",memory:"内存",modify_memory:"修改内存",disk:"磁盘",cpu:"CPU",start:"启动",stop:"停止",restart:"重启",remove:"删除",before_remove_tip:"删除后重新开启演示平台会收取 0.01 码币",stop_confirm:"确定停止应用？",restart_confirm:"确定重启应用？",deploy_confirm:"确定执行部署操作？",compile_and_deploy:"编译部署",deployment_version:"部署版本：",deployment_version_placeholder:"分支名、标签名或 commit id（不填默认为 master）",hide_expert_options:"隐藏高级选项",show_expert_options:"显示高级选项",expert_options_tip1:"提醒：",expert_options_tip2:"大多数情况下这些选项不需要配置，如果不了解它们的意义，请全部留空！",source_code_directory:"源码路径",source_code_directory_placeholder:"要部署的目录（可选，相对于项目根目录）",command:"启动命令",command_placeholder:"应用启动命令（可选，可执行文件或 shell 脚本）",buildpack_placeholder:"自定义 buildpack 地址（可选，可以 clone 的 git 仓库地址）",choice_runtime:"运行环境",auto_detection:"自动检测",auto_deploy:"自动部署",auto_deploy_tip:"部署版本更新后会自动部署到演示平台",deploy:"一键部署",last_deployed:"最近一次部署：",paas_not_avaliable_tip:"无法获取项目演示平台状态：服务不可用",deploying_tip:"项目已经在部署，请稍等，状态会自动更新。",version_not_found_tip:"未执行部署，请检查输入的分支、标签或 commit 是否存在!"},task_menu:{},topic_menu:{},common:{enabled:"已启用",operation_failed:"操作失败"}}}),angular.module("services").factory("Account",["$resource","Reference",function(a,b){var c={login:{method:"POST",url:"/api/v2/account/login"},register:{method:"POST",url:"/api/v2/account/register",params:{channel:"coding-web"}},generate_register_code:{method:"POST",url:"/api/account/register/generate_phone_code"},captcha:{method:"GET",url:"/api/captcha/:action"},twofa:{method:"POST",url:"/api/check_two_factor_auth_code"},close_twofa:{method:"POST",url:"/api/twofa/close"},close_twofa_code:{method:"POST",url:"/api/twofa/close/code"},activate_email:{method:"POST",url:"/api/v2/account/email/activate"},activate_gk:{method:"POST",url:"/api/account/global_key/activate"},forget_password:{method:"POST",url:"/api/account/password/forget"},reset_password:{method:"POST",url:"/api/account/password/reset"},before_reset_password:{method:"GET",url:"/api/beforeresetpwd"},phone_code_captcha:{method:"GET",url:"/api/account/phone_code_captcha/:action"},get_phone_iso_code:{method:"GET",url:"/api/account/phone/country_code"}},d=a("",{},c);return b.agentAll(d,{},c)}]),angular.module("services").factory("Agent",["$q","$timeout","Flash","Setting",function(a,b,c,d){var e={500:"服务器内部错误，有人要扣奖金了～",502:"服务器正在更新，请稍后再试。",504:"服务器正在更新，请稍候再试。",400:"服务器/页面接口请求不匹配，前端要扣工资了～",404:"请求的数据接口不存在"},f={502:function(a){}},g=function(a){var d=["[",a.status,"]",a.statusText," - <em>",a.config&&a.config.url||"","</em>"].join("");0!=a.status&&-1!=a.status&&b(function(){c.fail().timeout(5e3).send(e[a.status]||d)},1e3);var g=f[a.status];angular.isFunction(g)&&g(a)},h=function(a,b){b&&angular.isFunction(b)?b.call(null,a)!==!1&&g(a):g(a)},i=function(a,b,c){var d={};return a.data&&angular.forEach(b||{},function(b,e){var f=a.data;c&&(f=angular.isArray(f)?f[0]:a.data.list,f=angular.isArray(f)?f[0]:f),f&&angular.isUndefined(f[e])&&(d[e]=b)}),d},j=function(b,c,d,e,f){if(!b)return void console.error("[Reference] method to be agent does not exist!");
var g=Array.prototype.slice,j=c?c.length:0,k=g.call(c,0,j-1),o=g.call(c,j-1,j)[0];angular.isFunction(o)||(o=void 0);var p=a.defer(),q=p.promise,r={},s=null,t=null,u=null,v=function(a){return a};r.then=function(a,b){return s=a,angular.isFunction(b)&&(t=b),q.then(a,b)},r["catch"]=function(a){return t=a,q.then(null,a)},r["finally"]=function(b){function c(b,c){var d=a.defer();return c?d.resolve(b):d.reject(b),d.promise}function d(a,d){var e=null;try{e=(b||v)()}catch(f){return c(f,!1)}return e&&isFunction(e.then)?e.then(function(){return c(a,d)},function(a){return c(a,!1)}):c(a,d)}return u=b,q.then(function(a){return d(a,!0)},function(a){return d(a,!1)})};var w=b.apply(this,angular.isFunction(o)?k:c),x=l(w);return x["catch"](function(a){return h(a,t)}),x.then(function(a){if(-1!==a.code){if(0!=a.code)return void d(a,null,b,c,s,t,u);if(e=i(a,e,f),$.isEmptyObject(e))return o&&o(a),void p.resolve(a);var g=function(b){a.data.list?a.data.list=b:a.data=b,o&&o(a)},h=f?n(a.data.list||a.data,e,g):m(a.data.list||a.data,e,g);h.then(function(b){a.data.list?a.data.list=b:a.data=b,p.resolve(a)}),h["finally"](function(){u&&u()})}}),r},k=function(b,c,d){var e=a.defer(),f=angular.isArray(c),g=this.methods[b],h=f?n(c,g,d):m(c,g,d);return h.then(function(a){e.resolve(a)}),e.promise},l=function(a){var b={};try{b=a.$promise||a}catch(c){b=a}return b||{}},m=function(c,d,e){var f=a.defer(),g=[],h=angular.copy(c);return c&&!$.isEmptyObject(d)?angular.forEach(d,function(a,b){var d=l(a.call(this,c)),e=b.split("_")[0];d.then?(g.push(d),d.then(function(a){("undefined"==typeof a.code||0==a.code)&&(h[e]=a.data||a)})):h[e]=d}):b(function(){f.resolve(h)},30),a.all(g).then(function(){e&&e(h),f.resolve(h)}),f.promise},n=function(b,c,d){var e=a.defer(),f=[],g=[];return angular.forEach(b,function(a,b){var d=m(a,c);f.push(d),d.then(function(a){g[b]=a})}),a.all(f).then(function(){d&&d(g),e.resolve(g)}),e.promise};return{agent:j,resolve:k,getPromise:l}}]),angular.module("services").service("AllImageLoaded",["$window",function(a){a.image_counters={};var b={},c=function(a,c){var e=a.find("img"),f=(new Date).getTime()+"_"+Math.floor(1e5*Math.random());b[f]||(b[f]=0),e.length>0?d(e,f,c):c&&c()},d=function(c,d,e){var f=function(){++b[d]==c.length&&(e&&e(c),a.image_counters["onload_"+d]=void 0,b[d]=void 0)},g=function(a){a.onload=f,a.onerror=h.bind(null,a)},h=function(a){a.src="https://dn-coding-net-production-static.qbox.me/static/00675e5d336cf413a91edec4a3525894.png",g(a)};angular.forEach(c,g)};return{init:c}}]);var api=angular.module("services");api.factory("User",["$resource","Reference",function(a,b){var c={search:{method:"GET",url:"/api/user/search",params:{key:""}},follow:{method:"POST",url:"/api/user/follow"},unfollow:{method:"POST",url:"/api/user/unfollow"},current:{method:"GET",url:"/api/current_user"},vip_quota:{method:"GET",url:"/api/vip/quota"},friends:{method:"GET",url:"/api/user/friends",params:{page:1,pageSize:10}},followers:{method:"GET",url:"/api/user/followers",params:{page:1,pageSize:10}},relationships:{method:"GET",url:"/api/user/relationships"},sign_up:{method:"POST",url:"/api/register"},sign_up_phone:{method:"POST",url:"/api/account/register/phone"},captcha:{method:"GET",url:"/api/captcha/:action"},request_valid:{method:"POST",url:"/api/request_valid",params:{type:0}},check:{method:"GET",url:"/api/user/check",params:{key:""}},check_phone:{method:"GET",url:"/api/account/check/phone",params:{phone:""}},update_info:{method:"POST",url:"/api/user/updateInfo"},update_passwd:{method:"POST",url:"/api/user/updatePassword"},get_notification:{method:"GET",url:"/api/user/getNotificationSettings"},set_notification:{method:"GET",url:"/api/user/changeNotificationSetting",params:{settingType:"",settingContent:""}},get_avatar:{method:"GET",url:"/api/user/avatar"},get_gravatar:{method:"GET",url:"/api/user/gravatar"},confirm:{method:"POST",url:"/api/activate"},confirm_phone:{method:"POST",url:"/api/account/activate/phone"},set_phone_password:{method:"POST",url:"/api/account/activate/phone/set_password"},send_change_email:{method:"POST",url:"/api/account/email/change/send"},send_register_email:{method:"POST",url:"/api/account/register/email/send"},send_activate:{method:"GET",url:"/api/activate",params:{email:""}},resend_activate:{method:"POST",url:"/api/resendactivate"},send_reset_pwd:{method:"GET",url:"/api/resetPassword",params:{email:""}},reset_pwd:{method:"POST",url:"/api/resetPassword"},phone_reset_pwd:{method:"POST",url:"/api/phone/resetPassword"},sign_in:{method:"POST",url:"/api/login"},sign_in_phone:{method:"POST",url:"/api/account/login/phone"},sign_out:{method:"POST",url:"/api/logout"},byKey:{method:"GET",url:"/api/user/key/:key"},by_key:{method:"GET",url:"/api/user/key/:key/no_cache"},byName:{method:"GET",url:"/api/user/name/:name"},byId:{method:"GET",url:"/api/user/id/:id"},unread_count:{method:"GET",url:"/api/user/unread-count"},unfinished_tasks:{method:"GET",url:"/api/user/unfinished-tasks"},get_at_who:{method:"GET",url:"/api/user/relationships/all"},get_at_who_context:{method:"GET",url:"/api/user/relationships/context"},invite:{method:"POST",url:"/api/invite/user"},inviteMember:{method:"POST",url:"/api/user/:username/project/:project_name/invite"},inviteEmail:{method:"GET",url:"/api/invite/email",params:{key:""}},checkInviteKey:{method:"GET",url:"/api/invite"},inviteNotLimited:{method:"POST",url:"/api/invite/user/not_limited"},open_friends:{method:"GET",url:"/api/user/friends/:global_key",params:{page:1,pageSize:10}},open_followers:{method:"GET",url:"/api/user/followers/:global_key",params:{page:1,pageSize:10}},oauthBind:{method:"POST",url:"/api/oauth/github/binding"},oauthRegister:{method:"POST",url:"/api/oauth/github/supplement"},beforeActivate:{method:"GET",url:"/api/beforeactivate"},beforeReset:{method:"GET",url:"/api/before_reset"},beforeResetPassword:{method:"GET",url:"/api/beforeresetpwd"},oauthActivate:{method:"POST",url:"/api/oauth/github/activate"},search_by_tag:{method:"GET",url:"/api/tags/search/:tag"},refresh_gravatar:{method:"POST",url:"/api/user/refresh_gravatar"},refresh_gravatar_status:{method:"GET",url:"/api/user/refresh_gravatar/status"},generate_code:{method:"POST",url:"/api/user/generate_phone_code"},generate_register_code:{method:"POST",url:"/api/account/register/generate_phone_code"},generate_activate_code:{method:"POST",url:"/api/account/activate/generate_phone_code"},generate_reset_code:{method:"POST",url:"/api/account/reset_password/generate_phone_code"},phone_change_code:{method:"POST",url:"/api/account/phone/change/code"},phone_change:{method:"POST",url:"/api/account/phone/change"},phone_valid:{method:"POST",url:"/api/user/validate_phone_code"},enterprise_plan:{method:"GET",url:"/api/enterprise_plan"},get_activeness_data:{method:"GET",url:"/api/user/activeness/data/:global_key"},can_show_private_activeness:{method:"GET",url:"/api/user/activeness/show-private"},set_activeness_show_private:{method:"POST",url:"/api/user/activeness/show-private"},showDisabledGuide:{method:"GET",url:"/api/user/guide"},disableGuide:{method:"POST",url:"/api/user/guide/:guide_item"}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("Tweet",["$resource","Reference","User",function(a,b,c){var d={create:{method:"POST"},"delete":{method:"DELETE"},update:{method:"PUT"},query:{method:"GET",url:"/api/tweet/:global_key/:tweet_id"},comment:{method:"POST",url:"/api/tweet/:id/comment"},commentOfId:{method:"GET",url:"/api/tweet/comment/:id"},comments:{method:"GET",url:"/api/tweet/:id/comments"},likes:{method:"GET",url:"/api/tweet/:id/likes"},allLikesAndRewards:{method:"GET",url:"/api/tweet/:id/allLikesAndRewards"},delete_comment:{method:"DELETE",url:"/api/tweet/:id/comment/:comment"},public_tweets:{method:"GET",url:"/api/tweet/public_tweets",params:{last_id:999999999,last_time:9999999999999}},user_public:{method:"GET",url:"/api/tweet/user_public",params:{last_id:999999999,user_id:0}},userPublicPaging:{method:"GET",url:"/api/tweet/user-public-paging",params:{page:1,pageSize:10}},like:{method:"POST",url:"/api/tweet/:id/like"},un_like:{method:"POST",url:"/api/tweet/:id/unlike"},hot_user:{method:"GET",url:"/api/tweet/hot_user"},best_user:{method:"GET",url:"/api/tweet/best_user"},last_tweet:{method:"GET",url:"/api/tweet/last",params:{last_id:999999999}},project_tweet:{method:"GET",url:"/api/project/:project_id/tweet/:tweet_id"},project_tweets:{method:"GET",url:"/api/project/:project_id/tweet",params:{last_id:999999999}},project_tweet_create:{method:"POST",url:"/api/project/:project_id/tweet"},project_tweet_delete:{method:"DELETE",url:"/api/project/:project_id/tweet/:tweet_id"},project_tweet_comment:{method:"POST",url:"/api/project/:project_id/tweet/:tweet_id/comment"},project_tweet_comment_delete:{method:"DELETE",url:"/api/project/:project_id/tweet/:tweet_id/comment/:id"},project_tweet_comments:{method:"GET",url:"/api/project/:project_id/tweet/:tweet_id/comments",params:{last_id:999999999}},reward:{method:"POST",url:"/api/tweet/:tweet_id/reward"},prepareReward:{method:"GET",url:"/api/tweet/:tweet_id/preparereward"},pop:{method:"GET",url:"/api/tweet/pop"}},e=a("/api/tweet/:tweet_id",{},d);return b.agentAll(e,{},d)}]),api.factory("Project",["Reference","User","Task","$resource","$rootScope",function(a,b,c,d,e){var f={create:{method:"POST"},"delete":{method:"DELETE"},update:{method:"PUT"},get_project_icon:{method:"GET",url:"/api/project/:id/project_icon"},query:{method:"GET",params:{project_id:0}},queryByName:{method:"GET",url:"/api/user/:username/project/:project_name"},member:{method:"GET",url:"/api/project/member/:member_id"},membersWithType:{method:"GET",url:"/api/project/:project_id/members/:type"},updateMemberType:{method:"POST",url:"/api/project/:project_id/member/:global_key/:type"},add_member:{method:"POST",url:"/api/project/:id/members/gk/add"},update_alias:{method:"POST",url:"/api/project/:id/members/update_alias/:user_id"},members:{method:"GET",url:"/api/project/:id/members",params:{page:1,pageSize:200}},membersByKey:{method:"GET",url:"/api/user/:username/project/:project_name/members",params:{page:1,pageSize:200}},update_visit:{method:"GET",url:"/api/project/:id/update_visit"},activities:{method:"GET",url:"/api/user/:username/project/:project_name/activities"},quit:{method:"POST",url:"/api/project/:id/quit"},kickout:{method:"POST",url:"/api/project/:id/kickout/:user_id"},star:{method:"POST",url:"/api/user/:username/project/:project_name/star"},unstar:{method:"POST",url:"/api/user/:username/project/:project_name/unstar"},watch:{method:"POST",url:"/api/user/:username/project/:project_name/watch"},unwatch:{method:"POST",url:"/api/user/:username/project/:project_name/unwatch"},stared:{method:"POST",url:"/api/user/:username/project/:project_name/stared"},watched:{method:"POST",url:"/api/user/:username/project/:project_name/watched"},stargazers:{method:"GET",url:"/api/user/:username/project/:project_name/stargazers"},watchers:{method:"GET",url:"/api/user/:username/project/:project_name/watchers"},stargazers_paging:{method:"GET",url:"/api/user/:username/project/:project_name/stargazers/paging"},watchers_paging:{method:"GET",url:"/api/user/:username/project/:project_name/watchers/paging"},search_user:{method:"GET",url:"/api/user/:username/project/:project_name/user/search"},createGroup:{method:"POST",url:"/api/project_group"},moveToGroup:{method:"PUT",url:"/api/project_group/:group_id/project"},moveOutGroup:{method:"DELETE",url:"/api/project_group/:group_id/project"},updateGroupName:{method:"PUT",url:"/api/project_group/:group_id"},tags:{method:"GET",url:"/api/project/:id/topic/label"},delTag:{method:"DELETE",url:"/api/project/:id/topic/label/:label_id"},addTag:{method:"POST",url:"/api/project/:id/topic/label"},updateTag:{method:"PUT",url:"/api/project/:id/topic/label/:label_id"},tagged:{method:"GET",url:"/api/project/:id/label/:label_id"},transfer:{method:"PUT",url:"/api/project/:id/transfer_to/:global_key"},archive:{method:"POST",url:"/api/project/:id/archive"},unarchive:{method:"POST",url:"/api/project/:id/unarchive"},count:{method:"GET",url:"/api/project_count"}},g=d("/api/project/:project_id",{},f);return a.agentAll(g,{tags:{copy:function(a){return angular.copy(a)},isArray:!0}},f)}]),api.factory("Projects",["$resource","Reference",function(a,b){var c={query:{method:"GET",params:{page:1,pageSize:4,type:"all"}},"public":{method:"GET",url:"/api/user/:username/public_projects",params:{page:1,pageSize:10,type:"joined"}},"private":{method:"GET",url:"/api/user/projects/private",params:{page:1,pageSize:10,type:"joined"}},hot:{method:"GET",url:"/api/projects/hot"},recommend:{method:"GET",url:"/api/projects/recommend"},pin:{method:"POST",url:"/api/user/projects/pin"},pinCancel:{method:"DELETE",url:"/api/user/projects/pin"},pinProjects:{method:"GET",url:"/api/user/projects/pin"}},d=a("/api/projects",{},c);return b.agentAll(d,null,c)}]),api.factory("Voucher",["$resource","Reference",function(a,b){var c={check:{method:"POST",url:"/api/voucher/check"},captcha:{method:"GET",url:"/api/voucher/captcha"}},d=a("",{},c);return b.agentAll(d,null,c)}]),api.factory("Task",["$resource","Reference","User",function(a,b,c){var d={create:{method:"POST"},creating:{method:"GET",url:"/api/task/creating"},comment:{method:"POST",url:"/api/task/:id/comment"},"delete":{method:"DELETE",url:"/api/user/:username/project/:project_name/task/:id"},query:{method:"GET",url:"/api/user/:username/project/:project_name/task/:id"},description:{method:"GET",url:"/api/task/:id/description"},deleteComment:{method:"DELETE",url:"/api/task/:id/comment/:comment_id"},comments:{method:"GET",url:"/api/task/:id/comments",params:{pageSize:5,page:1}},deleteById:{method:"DELETE",url:"/api/task/:id"},updateContent:{method:"PUT",url:"/api/task/:id/content"},updateStatus:{method:"PUT",url:"/api/task/:id/status"},updateOwner:{method:"PUT",url:"/api/task/:id/owner"},updatePriority:{method:"PUT",url:"/api/task/:id/priority"},updateDeadline:{method:"PUT",url:"/api/task/:id/deadline"},updateDescription:{method:"PUT",url:"/api/task/:id/description"},getDescriptionHistory:{method:"GET",url:"/api/user/:username/project/:project_name/task/:task_id/history/:history_id"},restoreFromHistory:{method:"POST",url:"/api/user/:username/project/:project_name/task/:task_id/history/:history_id"},getCurrentHistoryId:{method:"GET",url:"/api/user/:username/project/:project_name/task/:task_id/history/current"},list:{method:"GET",url:"/api/user/:username/project/:project_name/tasks/:status"},listOfOwner:{method:"GET",url:"/api/user/:username/project/:project_name/tasks/user/:owner/:status"},listOfOwnerSimple:{method:"GET",url:"/api/project/:id/tasks/user/:owner/:status"},countOfUser:{method:"GET",url:"/api/project/:id/task/user/count"},count:{method:"GET",url:"/api/project/:id/task/count"},listOfCurrentUser:{method:"GET",url:"/api/tasks/:status"},listOfCurrentUserInProject:{method:"GET",url:"/api/tasks/project/:project_id/:status"},listOfCurrentUserWithSearch:{method:"GET",url:"/api/tasks/search"},countOfCurrentUser:{method:"GET",url:"/api/tasks/count"},countOfCurrentUserInProject:{method:"GET",url:"/api/tasks/projects/count"},watch:{method:"POST",url:"/api/task/:id/user/:global_key/watch"},removeWatch:{method:"DELETE",url:"/api/task/:id/user/:global_key/watch"},tags:{method:"GET",url:"/api/user/:username/project/:project_name/task/label",params:{withCount:!0}},addTag:{method:"POST",url:"/api/user/:username/project/:project_name/topics/label"},updateTag:{method:"PUT",url:"/api/user/:username/project/:project_name/topics/label/:id"},delTag:{method:"DELETE",url:"/api/user/:username/project/:project_name/topics/label/:id"},addTaskTag:{method:"POST",url:"/api/user/:username/project/:project_name/task/:task/label/:label"},removeTaskTag:{method:"DELETE",url:"/api/user/:username/project/:project_name/task/:task/label/:label"},listOfTag:{method:"GET",url:"/api/user/:username/project/:project_name/tasks/label/:label"},watchers:{method:"GET",url:"/api/user/:username/project/:project_name/task/:task/watchers"},searchFilters:{method:"GET",url:"/api/v2/tasks/search_filters"}},e=a("/api/user/:username/project/:project_name/task/:id",{},d);return b.agentAll(e,{tags:{copy:function(a){return angular.copy(a)},isArray:!0}},d)}]),api.factory("Group",["Reference","User","$resource",function(a,b,c){var d={create:{method:"POST"},"delete":{method:"DELETE"},update:{method:"PUT"},query:{method:"GET",params:{group_id:0}},member:{method:"GET",url:"/api/group/member/:member_id"},members:{method:"GET",url:"/api/group/:group_id/members",refer:["user_id","inviter_id"]}},e=c("/api/group/:group_id",{},d);return a.agentAll(e,{},d)}]),api.factory("Groups",["$resource","Reference",function(a,b){var c={query:{method:"GET",params:{page:1,pageSize:4}}},d=a("/api/groups",{},c);return b.agentAll(d,null,c)}]),api.factory("Activity",["Reference","$resource","Group","Project","User","Tweet","Flash",function(a,b,c,d,e,f,g){var h={last:{method:"GET",url:"/api/activities/last",params:{type:"all",last_id:""}},user_tweet:{method:"GET",url:"/api/activities/user_tweet",params:{last_id:""}},tweet_last:{method:"GET",url:"/api/activities/tweet_last",params:{last_id:999999999}},projects_last:{method:"GET",url:"/api/activities/projects_last",params:{last_id:""}},watched_projects_last:{method:"GET",url:"/api/activities/watched_projects_last",params:{last_id:""}},following:{method:"GET",url:"/api/activity/following",params:{last_id:""}},"delete":{method:"DELETE",url:"/api/activity/:id"},projectOfUser:{method:"GET",url:"/api/project/:project_id/activities/user/:user_id"},project:{method:"GET",url:"/api/project/:project_id/activities"},user_public:{method:"GET",url:"/api/user/:username/activities_public",params:{last_id:""}},group_last:{method:"GET",url:"/api/group/:group_id/activities/last"},task:{method:"GET",url:"/api/activity/task/:id"},project_file:{method:"GET",url:"/api/project/:project_id/file/:file_id/activities"}},i=b("",{},h);return a.agentAll(i,{},h)}]),api.factory("Attachment",["$resource","Reference","User",function(a,b,c){var d={create:{method:"POST",url:"/api/project/:id/files/:dir/create",params:{dir:0}},view:{method:"GET",url:"/api/project/:id/files/:file/view",params:{file:0}},edit:{method:"POST",url:"/api/project/:id/files/:file/edit",params:{file:0}},files:{method:"GET",url:"/api/project/:id/files/:dir",params:{dir:0}},shared_files:{method:"GET",url:"/api/project/:id/shared_files"},"delete":{method:"DELETE",url:"/api/project/:id/file/delete",params:{fileIds:"0"}},folders:{method:"GET",url:"/api/project/:id/folders"},all_folders:{method:"GET",url:"/api/project/:id/all_folders"},mkdir:{method:"POST",url:"/api/project/:id/mkdir",params:{name:"新建文件夹"}},update_name:{method:"PUT",url:"/api/project/:id/dir/:dir/name/:name"},rmdir:{method:"DELETE",url:"/api/project/:id/rmdir/:dir"},pdf:{method:"GET",url:"/api/project/:id/files/:file/pdfPreview",params:{page:1}},count:{method:"GET",url:"/api/project/:id/folders/filecount"},all_count:{method:"GET",url:"/api/project/:id/folders/all_file_count"},allCountWithShare:{method:"GET",url:"/api/project/:id/folders/all-file-count-with-share"},move:{method:"PUT",url:"/api/project/:id/files/moveto/:folder"},moveFolder:{method:"PUT",url:"/api/user/:user/project/:project/folder/:sourceFolderId/move-to/:targetFolderId"},images:{method:"GET",url:"/api/project/:id/files/:dir/images"},image:{method:"GET",url:"/api/project/:id/files/image/:file",params:{folderId:0,orderByDesc:!0,type:"all"}},images_count:{method:"GET",url:"/api/project/:id/folders/image_count"},download_url:{method:"GET",url:"/api/project/:id/files/:file_id/download_url"},deleteComment:{method:"DELETE",url:"/api/project/:id/files/:file_id/comment/:comment_id"},comment:{method:"POST",url:"/api/project/:id/files/:file_id/comment"},histories:{method:"GET",url:"/api/project/:id/files/:file_id/histories"},deleteHistory:{method:"DELETE",url:"/api/project/:id/files/histories/:history_id"},is_existed:{method:"GET",url:"/api/project/:id/dir/:dir/files/existed"},updateRemark:{method:"POST",url:"/api/project/:id/files/:file_id/histories/:history_id/remark"},rename:{method:"PUT",url:"/api/project/:id/files/:file_id/rename"},view_history:{method:"GET",url:"/api/project/:id/files/histories/:history_id/view"},fileStatus:{method:"GET",url:"/api/project/:id/files/histories/:history_id/status"},history_download_url:{method:"GET",url:"/api/project/:id/files/histories/:history_id/download/url"},zipDownloadAsync:{method:"GET",url:"/api/user/:user/project/:project/files/download/async"},zipDownloadNeedAsync:{method:"GET",url:"/api/user/:user/project/:project/files/download/need-async"},zipDownloadFolderAsync:{method:"GET",url:"/api/user/:user/project/:project/folder/:folder/download/async"},zipDownloadFolderNeedAsync:{method:"GET",url:"/api/user/:user/project/:project/folder/:folder/download/need-async"}},e=a("",{},d);return b.agentAll(e,{folders:{copy:function(a){return angular.copy(a)},isArray:!0},all_folders:{copy:function(a){return angular.copy(a)},isArray:!0},mkdir:{copy:function(a){return angular.copy(a)}}},d)}]),api.factory("Topic",["$resource","Reference","User","Markdown",function(a,b,c,d){var e={create:{method:"POST",url:"/api/project/:id/topic",params:{parent:0}},comment:{method:"POST",url:"/api/project/:project_id/topic/:topic_id/comment"},update:{method:"PUT",url:"/api/topic/:id"},"delete":{method:"DELETE",url:"/api/topic/:id"},deleteComment:{method:"DELETE",url:"/api/project/:project_id/topic/:topic_id/comment/:comment_id"},list:{method:"GET",url:"/api/project/:id/topics"},mine:{method:"GET",url:"/api/project/:id/topics/me"},count:{method:"GET",url:"/api/project/:id/topic/count"},detail:{method:"GET",url:"/api/topic/:id",params:{type:0}},comments:{method:"GET",url:"/api/topic/:id/comments",params:{type:0}},commentComments:{method:"GET",url:"/api/project/:project_id/topic/:topic_id/comment/:comment_id/comments",params:{pageSize:99999,page:1}},delTag:{method:"DELETE",url:"/api/topic/:id/label/:label_id"},addTag:{method:"POST",url:"/api/topic/:id/label/:label_id"},watch:{method:"POST",url:"/api/project/:project/topic/:topic/watch"},watchers:{method:"GET",url:"/api/project/:project/topic/:topic/watchers"},list_watch:{method:"GET",url:"/api/project/:project/topic/watching"},addWatcher:{method:"POST",url:"/api/topic/:id/user/:global_key/watch"},removeWatcher:{method:"DELETE",url:"/api/topic/:id/user/:global_key/watch"},setAsRecommend:{method:"POST",url:"/api/project/:project_id/topic/:topic_id/comment/:comment_id/recommend"},cancelRecommend:{method:"DELETE",url:"/api//project/:project_id/topic/:topic_id/comment/:comment_id/recommend"},upVote:{method:"POST",url:"/api/project/:project_id/topic/:topic_id/comment/:comment_id/upvote"},cancelUpVote:{method:"DELETE",url:"/api/project/:project_id/topic/:topic_id/comment/:comment_id/upvote"}},f=a("",{},e);return b.agentAll(f,{},e)}]),api.factory("Markdown",["$resource","Reference",function(a,b){var c={preview:{method:"POST",url:"/api/markdown/preview",params:{toc:!1}},simple_preview:{method:"POST",url:"/api/markdown/previewNoAt"},project_preview:{method:"POST",url:"/api/user/:username/project/:project_name/markdown",params:{toc:!0}},project_simple_preview:{method:"POST",url:"/api/user/:username/project/:project_name/markdownNoAt"},toc:{method:"POST",url:"/api/markdown/toc"}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("Notifications",["$resource",function(a){var b={all:{method:"GET",url:"/api/notification"},unread:{method:"GET",url:"/api/notification/unread-list"},mark_read:{method:"POST",url:"/api/notification/mark-read"},unread_count:{method:"GET",url:"/api/notification/unread-count"}};return a({},{},b)}]),api.factory("Messages",["$resource","Reference",function(a,b){var c={conversations:{method:"GET",url:"/api/message/conversations"},conversation:{method:"GET",url:"/api/message/conversations/:user_key"},del_conversation:{method:"DELETE",url:"/api/message/conversations/:id"},read_conversation:{method:"POST",url:"/api/message/conversations/:user_key/read"},send_message:{method:"POST",url:"/api/message/send"},del_message:{method:"DELETE",url:"/api/message/:id"},clear_all:{method:"DELETE",url:"/api/message"},unread_count:{method:"GET",url:"/api/message/unread-count"},last:{method:"GET",url:"/api/message/conversations/:user_key/last",params:{id:0}}},d=a({},{},c);return b.agentAll(d,{},c)}]),api.factory("Options",["$resource",function(a){var b={jobs:{method:"GET",url:"/api/options/jobs"}};return a({},{},b)}]),api.factory("Tags",["$resource","Reference",function(a,b){var c={user_tag_list:{method:"GET",url:"/api/tagging/user_tag_list"}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("Degrees",["$resource","Reference",function(a,b){var c={fetch:{method:"GET",url:"/api/options/degrees"}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("Schools",["$resource","Reference",function(a,b){var c={fetch:{method:"GET",url:"/api/options/schools"}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("Skills",["$resource","Reference",function(a,b){var c={fetch:{method:"GET",url:"/api/options/skills"}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("Search",["$resource","Reference",function(a,b){var c={quick:{method:"GET",url:"/api/search/quick"},ofProject:{method:"GET",url:"/api/u/:username/p/:project_name/search"},moreProjects:{method:"GET",url:"/api/search/quick/projects"},moreProjectTopics:{method:"GET",url:"/api/search/quick/project_topics"},moreTasks:{method:"GET",url:"/api/search/quick/tasks"},moreTweets:{method:"GET",url:"/api/search/quick/tweets"},moreFriends:{method:"GET",url:"/api/search/quick/friends"},resource:{method:"GET",url:"/api/u/:username/p/:project_name/resource/search"},resourceByTypes:{method:"GET",url:"/api/u/:username/p/:project_name/resource/search-with-types"},resourceByCode:{method:"GET",url:"/api/u/:username/p/:project_name/resource/:code"}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("ESearch",["$resource","Reference",function(a,b){var c={ofProject:{method:"GET",url:"/api/esearch/in-project?q=:q+project::project&types=:types",params:{q:"",project:""}},all:{method:"GET",url:"/api/esearch/all?q=:q&types=:types",params:{q:""}},moreProjects:{method:"GET",url:"/api/esearch/project?q=:q",params:{q:""}},moreTopics:{method:"GET",url:"/api/esearch/topic?q=:q",params:{q:""}},moreTasks:{method:"GET",url:"/api/esearch/task?q=:q",params:{q:""}},moreTweets:{method:"GET",url:"/api/esearch/tweet?q=:q",params:{q:""}},moreFiles:{method:"GET",url:"/api/esearch/file?q=:q",params:{q:""}},moreCodes:{method:"GET",url:"/api/esearch/code?q=:q",params:{q:""}},moreMRs:{method:"GET",url:"/api/esearch/mr?q=:q",params:{q:""}},morePRs:{method:"GET",url:"/api/esearch/pr?q=:q",params:{q:""}},moreFriends:{method:"GET",url:"/api/esearch/user?q=:q",params:{q:""}}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("PublicProjects",["$resource",function(a){var b={public_projects:{method:"GET",url:"/api/public/all"}};return a({},{},b)}]),api.factory("AdBanner",["$resource","Reference",function(a,b){var c={get:{method:"GET",url:"/api/banner/:id"}},d=a("",{},c);return d}]),api.factory("OAuth",["$resource","Reference",function(a,b){var c={github_email:{method:"GET",url:"/api/oauth/github/callback"},platforms:{method:"GET",url:"/api/oauth/user/platforms"},unbind:{method:"POST",url:"/api/oauth/:platform/unbind"}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("Customer",["$resource","Reference",function(a,b){var c={list:{method:"GET",url:"/api/oauth/applications",params:{pageSize:9999}},save:{method:"POST",url:"/api/oauth/applications"},info:{method:"GET",url:"/api/oauth/applications/:application_id"},update:{method:"PUT",url:"/api/oauth/applications/:application_id"},"delete":{method:"DELETE",url:"/api/oauth/applications/:application_id"},user_count:{method:"GET",url:"/api/oauth/applications/:application_id/user_count"},reset_secret:{method:"PUT",url:"/api/oauth/applications/:application_id/key"},revoke_users:{method:"DELETE",url:"/api//oauth/applications/:application_id/tokens/revoke"},authorized:{method:"GET",url:"/api/oauth/applications/authorized"},revoke:{method:"POST",url:"/api/oauth/applications/:application_id/access/revoke"}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("WallPaper",["$resource","Reference",function(a,b){var c={groups:{method:"GET",url:"/api/wallpaper/groups",params:{page:1,pageSize:999}},wall_paper:{method:"GET",url:"/api/wallpaper/wallpapers",params:{page:1,pageSize:999}}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("Email",["$resource","Reference",function(a,b){var c={check_email:{method:"POST",url:"/api/email/check"},activate_email:{method:"POST",url:"/api/email/activate"},reset_email:{method:"PUT",url:"/api/email/reset"}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("TweetTopic",["$resource","Reference",function(a,b){var c={hot_topic:{method:"GET",url:"/api/tweet_topic/hot"},marketing_ad:{method:"GET",url:"/api/tweet_topic/marketing_ad"},joined:{method:"GET",url:"/api/user/:global_key/tweet_topic/joined"},detail:{method:"GET",url:"/api/tweet_topic/:id"},tweets:{method:"GET",url:"/api/public_tweets/topic/:id"},hot_joined:{method:"GET",url:"/api/tweet_topic/:id/hot_joined"},joins:{method:"GET",url:"/api/tweet_topic/:id/joined"},top_tweet:{method:"GET",url:"/api/public_tweets/topic/:id/top"},auto_complete:{method:"GET",url:"/api/tweet_topic/topic/auto_complete"},default_topics:{method:"GET",url:"/api/tweet_topic/defaults"}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("PartnerLink",["$resource","Reference",function(a,b){var c={partners:{method:"GET",url:"/api/partner/link",params:{page:1,pageSize:999}}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("TwoFactorAuth",["$resource","Reference",function(a,b){var c={method:{method:"GET",url:"/api/user/2fa/method"},new_totp_info:{method:"GET",url:"/api/user/2fa/totp"},verify_2fa_info:{method:"GET",url:"/api/user/2fa/verify"},open_totp:{method:"POST",url:"/api/user/2fa/totp"},close_two_factor_auth:{method:"DELETE",url:"/api/user/2fa"},check_two_factor_auth_code:{method:"POST",url:"/api/check_two_factor_auth_code"}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("SecretQuestion",["$resource","Reference",function(a,b){var c={get_secret_question:{method:"GET",url:"/api/secret_question"},setting_secret_question:{method:"POST",url:"/api/secret_question"},count_secret_question:{method:"GET",url:"/api/count_secret_question"}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("Share",["$resource","Reference",function(a,b){var c={get:{method:"GET",url:"/api/share/:hash"},query:{method:"GET",url:"/api/share/query",params:{resourceId:0,resourceType:0,accessType:0}},create:{method:"POST",url:"/api/share/create"},"delete":{method:"DELETE",url:"/api/share/:hash"},image:{method:"GET",url:"/api/share/image/:hash"},download:{method:"GET",url:"/api/share/download/:hash"},download_url:{method:"GET",url:"/api/share/download_url/:hash"},pdf:{method:"GET",url:"/api/share/pdf/:hash",params:{page:1}},markdown:{method:"GET",url:"/api/share/markdown/:hash"},comments:{method:"GET",url:"/api/share/topic/:hash/comments",params:{page:1,pageSize:10}},commentComments:{method:"GET",url:"/api/share/topic/:hash/comment/:comment_id/comments",params:{pageSize:99999,page:1}}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("ResourceReference",["$resource","Reference",function(a,b){var c={list:{method:"GET",url:"/api/user/:username/project/:project_name/resource_reference/:code"},add:{method:"POST",url:"/api/user/:username/project/:project_name/resource_reference/:code"},"delete":{method:"DELETE",url:"/api/user/:username/project/:project_name/resource_reference/:code"}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("Team",["$resource","Reference",function(a,b){var c={get:{method:"GET",url:"/api/team/:global_key/get"},update:{method:"POST",url:"/api/team/:global_key/update"},createTeam:{method:"POST",url:"/api/team/create"},joinedTeams:{method:"GET",url:"/api/team/joined"},joinedProjects:{method:"GET",url:"/api/team/:global_key/projects/joined"},unjoinedProjects:{method:"GET",url:"/api/team/:global_key/projects/unjoined"
},archivedProjects:{method:"GET",url:"/api/team/:global_key/projects/archived"},importProjects:{method:"POST",url:"/api/team/:global_key/projects/import"},archiveProject:{method:"POST",url:"/api/team/:global_key/project/:project_id/archive"},unarchiveProject:{method:"POST",url:"/api/team/:global_key/project/:project_id/unarchive"},deleteProject:{method:"POST",url:"/api/team/:global_key/project/:project_id/delete"},exportProject:{method:"POST",url:"/api/team/:global_key/project/:project_id/member/:user_key/export"},projectMembers:{method:"GET",url:"/api/team/:global_key/project/:project_id/members",params:{page:1,pageSize:200}},notImportedProjects:{method:"GET",url:"/api/team/:global_key/not/imported/projects"},members:{method:"GET",url:"/api/team/:global_key/members"},otherMembers:{method:"GET",url:"/api/team/:global_key/other_members"},removeMember:{method:"DELETE",url:"/api/team/:team_key/member/:user_key"},memberRole:{method:"POST",url:"/api/team/:team_key/member/:user_key/role/:role"},batchAddMember:{method:"POST",url:"/api/team/:team_key/members/batch"},transferTeam:{method:"POST",url:"/api/team/:team_key/transfer/:user_key"},dismissTeam:{method:"POST",url:"/api/team/:team_key/dismiss"},quitTeam:{method:"POST",url:"/api/team/:team_key/quit"},getProjectsRole:{method:"GET",url:"/api/team/:team_key/member/:user_key/projects/role"},updateProjectsRole:{method:"POST",url:"/api/team/:team_key/member/:user_key/projects/role"},isTeam:{method:"GET",url:"/api/team/:team_key/is"},lastTeam:{method:"GET",url:"/api/team/last"},setTeamMemberAlias:{method:"POST",url:"/api/team/:team_key/member/:user_key/alias"}},d=a("",{},c);return b.agentAll(d,{},c)}]),api.factory("LogAPI",["$resource","Reference",function(a,b){var c={error:{method:"POST",url:"/api/log/error"},info:{method:"POST",url:"/api/log/info"},warn:{method:"POST",url:"/api/log/warn"}},d=a("",{},c);return b.agentAll(d,null,c)}]),angular.module("services").factory("At",["$q","$rootScope","User","Common",function(a,b,c,d){var e={},f=function(a,b){e[a]||(e[a]={loading:!0,promise:null}),e[a].loading=b},g=function(a){return e[a]&&e[a].loading},h=function(a){return e[a]&&e[a].promise},i=function(a,b){e[a]||(e[a]={loading:!0,promise:null}),e[a].promise=b},j=function(a){var d="ATWHOS_PROJECT_"+a;return f(d,g(d)||!1),o(d,function(e){return f(d,!0),c.get_at_who({project_id:a},function(a){b[d]=[];var c=a.data;$.map(c,function(a){b[d].push({key:a.global_key,name:a.name,name_pinyin:a.name_pinyin.split("|")[1],name_pinyin_short:a.name_pinyin.split("|")[2],avatar:a.avatar})}),e.resolve(b[d])})["catch"](function(){return e.reject(),!1})})},k=function(c){var e=a.defer(),f="ATWHOS_TWEET_COMMENT_"+c.id;b[f]=[],angular.forEach(c.comment_list,function(a){var c=d.findOfId(b[f],a.owner.global_key,"key");c||b[f].push({key:a.owner.global_key,name:a.owner.name,name_pinyin:a.owner.name_pinyin.split("|")[1],name_pinyin_short:a.owner.name_pinyin.split("|")[2],avatar:a.owner.avatar})});var g=d.findOfId(b[f],c.owner.global_key,"key");return g||b[f].push({key:c.owner.global_key,name:c.owner.name,name_pinyin:c.owner.name_pinyin.split("|")[1],name_pinyin_short:c.owner.name_pinyin.split("|")[2],avatar:c.owner.avatar}),b.ATWHOS?(b[f]=b[f].concat(l(b[f],b.ATWHOS)),e.resolve(b[f]),e.promise):m().then(function(){return b[f]=b[f].concat(l(b[f],b.ATWHOS)),e.resolve(b[f]),e.promise})},l=function(a,b){var c=[];return angular.forEach(b,function(b){var e=d.findOfId(a,b.key,"key");e||c.push(b)}),c},m=function(){var a="ATWHOS";return f(a,g(a)||!1),o(a,function(d){return f(a,!0),c.get_at_who(function(a){b.ATWHOS=[];var c=a.data;$.map(c,function(a){b.ATWHOS.push({key:a.global_key,name:a.name,name_pinyin:a.name_pinyin.split("|")[1],name_pinyin_short:a.name_pinyin.split("|")[2],avatar:a.avatar})}),d.resolve(b.ATWHOS)})["catch"](function(){return d.reject(),!1})})},n=function(a,d,e){return e&&(a=a+"_"+e),f(a,g(a)||!1),o(a,function(g){return f(a,!0),c.get_at_who_context({context_type:d,item_id:e},function(c){b[a]=[];var d=c.data;$.map(d,function(c){c.name_pinyin&&b[a].push({key:c.global_key,name:c.name,name_pinyin:c.name_pinyin.split("|")[1],name_pinyin_short:c.name_pinyin.split("|")[2],avatar:c.avatar})}),g.resolve(b[a])})["catch"](function(){return g.reject(),!1})})},o=function(c,d){var e=a.defer(),f=function(){e.resolve(b[c])},j=function(){e.reject()};if(b[c])b.$evalAsync(f);else if(void 0===b[c])if(g(c)){var k=h(c);k&&k.then(function(){f()})}else{var k=d&&d(e);i(c,k)}else b.$evalAsync(j);return e.promise};return{ofProject:j,ofFriend:m,ofTweetComment:k,getAts:n}}]);var appService=angular.module("services");appService.factory("Cookies",[function(){var a=function(a,b,c){if("undefined"==typeof b){var d=null;if(document.cookie&&""!=document.cookie)for(var e=document.cookie.split(";"),f=0;f<e.length;f++){var g=jQuery.trim(e[f]);if(g.substring(0,a.length+1)==a+"="){d=decodeURIComponent(g.substring(a.length+1));break}}return d}c=c||{},null===b&&(b="",c.expires=-1);var h="";if(c.expires&&("number"==typeof c.expires||c.expires.toUTCString)){var i;"number"==typeof c.expires?(i=new Date,i.setTime(i.getTime()+24*c.expires*60*60*1e3)):i=c.expires,h="; expires="+i.toUTCString()}var j=c.path?"; path="+c.path:"",k=c.domain?"; domain="+c.domain:"",l=c.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(b),h,j,k,l].join("")};return{get:function(b){return a(b)},remove:function(b){return a(b,null)},set:function(b,c,d){return a(b,c,d||{expires:1,path:"/"})},login_redirect:function(){var a=this.get("return_url");return USER&&a?(this.remove("return_url"),void(location.href=a)):void 0}}}]),appService.factory("location",["$location","$route","$rootScope","$timeout",function(a,b,c,d){return a.skipReload=function(){var e=b.current,f=c.$on("$locationChangeSuccess",function(){b.current=e});return d(function(){f()},30),a},a}]),appService.factory("TreeTools",[function(){return{getShortSHA:function(a){return a.substr(0,7)}}}]),appService.factory("Common",["$rootScope","$filter","$timeout","User","location","experiment","$localStorage","$window","Notifications",function(a,b,c,d,e,f,g,h,i){var j=function(a,b){return a?$.map(a,function(a){return!b&&a||b&&a[b]?a:void 0}):[]},k=function(a){var b=new Date(a);return b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0),b.getTime()},l=a.orderActivityByDate=function(a){a=j(a);var b=[],c=[];return angular.forEach(a,function(a,d){if(a){var e=k(a.created_at),f=b[e];f||(f=b[e]=[]),-1===c.indexOf(e)&&c.push(e),f.push(a)}}),{activities:b,timeline:c}},m=a.unifyActivity=function(a,b,c){function d(a){if(!angular.isArray(b))return a;for(var c=b.length-1;c>=0;c--)a[b[c]]=null;return a}for(var e,f,g,h,i=angular.copy(a),j=0,k=1;j<i.length&&!(k>=i.length);)g=angular.copy(i[j]).created_at,h=angular.copy(i[k]).created_at,e=d(angular.copy(i[j])),f=d(angular.copy(i[k])),Math.abs(g-h)<18e5&&angular.equals(e,f)?i.splice(k,1):(j++,k++);return n(i)},n=a.squashActivity=function(a,b){function c(a){angular.isObject(a)&&("rename"===a.action&&(a.file.new_name=a.new_name,a.file.old_name=a.old_name),"ProjectFile"!==a.target_type||angular.isArray(a.files)||(a.files=[a.file]),"ProjectMember"!==a.target_type||angular.isArray(a.target_users)||(a.target_users=[a.target_user]),"Task"!==a.target_type||"update_label"!==a.action||a.label_histories||(a.label_histories=[a]),"Task"!==a.target_type&&"ProjectTopic"!==a.target_type||"add_watcher"!==a.action&&"remove_watcher"!==a.action||a.watchers||(a.watchers=[a.watcher]))}function d(a,b,c,d){if(!angular.isObject(b)||!angular.isObject(c)||b.target_type!==c.target_type||!angular.equals(b.user,c.user)||Math.abs(b.created_at-c.created_at)>(d||3e5))return a+1;if("ProjectFile"===b.target_type)return"move_dir"===b.action&&"move_dir"===c.action?a+1:b.action===c.action?(b.files.push(c.file),a):"update_dir"===b.action&&"create_dir"===c.action&&b.file.path===c.file.path?(b.action="create_dir",b.action_msg="新建了",a-1):a+1;if("ProjectMember"===b.target_type&&b.action===c.action&&b.project.path===c.project.path)return b.target_users.push(c.target_user),a;if("Task"===b.target_type){if("update_label"===b.action&&b.action===c.action&&b.task.path===c.task.path)return b.label_histories.push(c),a;if(("add_watcher"===b.action||"remove_watcher"===b.action)&&b.action===c.action&&b.task.path===c.task.path)return b.watchers.push(c.watcher),a}return"ProjectTopic"!==b.target_type||"add_watcher"!==b.action&&"remove_watcher"!==b.action||b.action!==c.action||b.project_topic.path!==c.project_topic.path?a+1:(b.watchers.push(c.watcher),a)}for(var e=angular.copy(a),f=0;f<e.length;){c(e[f]),c(e[f+1]);var g=d(f,e[f],e[f+1],b);f>=g&&e.splice(f+1,1),f=g}return e};a.isToday=function(a){var b=new Date(a),c=new Date;return b.getFullYear()==c.getFullYear()&&b.getMonth()==c.getMonth()&&b.getDate()==c.getDate()};var o=function(a,b,c){var d=[];if(!a)return d;for(var e=0;e<a.length;e++){var f=a[e];f[c?c:"id"]!=b&&d.push(f)}return d},p=function(a,b,c){var d=[];if(!a)return d;for(var e=0;e<a.length;e++){var f=a[e];f[c?c:"id"]!=b[c?c:"id"]?d.push(f):d.push(b)}return d},q=function(a,b,c){if(!a)return null;for(var d=0;d<a.length;d++){var e=a[d];if(e[c?c:"id"]==b)return e}return null},r=function(a,b,c){if(!a)return-1;for(var d=a.length-1;d>=0;d--)if(a[d][c]===b[c])return d},s=function(a,b){return a.splice(0,0,b),a},t=function(a){return(a||"").replace(/&lt;/g,"<").replace(/&gt;/g,">")},u=function(a){return(a||"").replace(/</g,"&lt;").replace(/>/g,"&gt;")},v=function(a){var b=null;try{b=this.$root.$$phase}catch(c){return}"$apply"==b||"$digest"==b?a&&"function"==typeof a&&a():this.$apply(a)},w=function(a){var b=null;try{b=this.$root.$$phase}catch(c){return}"$apply"==b||"$digest"==b?a&&"function"==typeof a&&a():this.$digest(a)},x=function(a){for(var b=a.path(),c=["/login","/twofa","/register","/activate","/password"],d=!1,e=c.length-1;e>=0;e--)d=d||0===b.indexOf(c[e]);return d},y=function(a,b){var c={tweet:{id:a.id,content:a.content,comments_count:a.comments_count,path:a.path,comment_list:[]},target_type:"Tweet",id:a.activity_id,user:{path:b.path,avatar:b.avatar,name:b.name,global_key:b.global_key},created_at:a.created_at};return angular.copy(c)},z=a.htmlToPlaintext=function(a){return String(a).replace(/<[^>]+>/gm,"")},A=a.htmlToPlaintextForProject=function(a){return String(a).replace(/<[^>]+>/gm,function(a){var b=$(a);return b.is(".emotion")?"[表情:"+b.attr("title")+"]":b.is("img")?"[图片]":""})},B=function(a){return angular.isArray(a)?a[0]&&void 0!==a[0].user_id?$.map(a,function(a){return a.user||a}):a:a.user||a},C=a.randomEventIndex=function(a){var b=(new Date).getDate();return b%(a||3)};a.restyleEmoji=function(a){return b("restyleEmoji")(a)};var D=/https\:\/\/(\S+)\.qbox\.me\/(\S+)\.(png|jpg|jpeg|gif)/,E=/(\S+)(\?imageMogr2\/auto-orient\/format\/\S+\/crop\/\!\d+x\d+a\d+a\d+)/,F=/^(https\:\/\/www.gravatar.com\/avatar\/\S+?s=)(\d+)/,G=/\/static\/fruit_avatar\/Fruit\-(\d+)\.png/,H="https://dn-coding-net-production-avatar.qbox.me/Fruit-$0.png",I={},J=function(a,b){var c=I[a];return c&&(b=b>c?b:c),I[a]=b,b},K=function(a,b){if(!a)return a;if(b=b||200,f=a.match(E),f&&3===f.length){var c=f[1],d=f[2],e=J(c,b);return[c,d,"/thumbnail/",e].join("")}var f=a.match(D);if(f&&4===f.length){var g=f[1],h=f[2],i=f[3],j=["https://",g,".qbox.me/",h,".",i].join(""),e=J(j,b);return[j,"?imageMogr2/thumbnail/",e].join("")}if(f=a.match(F),f&&f.length>0){var e=J(a,b);return a.replace(F,"$1"+e)}if(f=a.match(G),f&&2===f.length){var k=f[1],l=H.replace("$0",k),e=J(l,b);return l+"?imageMogr2/thumbnail/"+e}return a},L=function(a,b,c){var a=a||{},d=a["default"],e=a[b];return e||(e=d),angular.isFunction(e)?e.call(a,c):e},M=function(a,b){return a?angular.extend({username:a.owner_user_name,project_name:a.name},b||{}):{}},N=function(a,b){$.each(b,function(a,b){b.length>0&&$.each(b,function(c,d){if(!d.name){var e=(new Date).getTime()+"_"+a+"_"+c;b[c].name=e+"."+b[c].type.split("/")[1]}})})},O=function(a,b){var c=b.files[b.index];b.processQueue&&angular.isArray(b.processQueue)&&b.processQueue.length>=3&&c.size<=1048576&&(b.processQueue[2].maxHeight=5e7,b.processQueue[2].maxWidth=5e7)},P=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},Q=function(a){return a?a.replace(/([^\W_]+[^\s-]*) */g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}):""},R=function(){var a=e.$$search.return_url;/^https:\/\/(.+\.)?coding\.net/.test(a)?window.location.href=a:/^\/.+/.test(a)?e.path(a).search("return_url",void 0).replace():e.path("/user")},S=function(a){return/[\w!#$%&'*+\/=?^_`{|}~-]+(?:\.[\w!#$%&'*+\/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/.test(a)},T=function(a){return/^[\w!#$%&'*+\/=?^_`{|}~-]+(?:\.[\w!#$%&'*+\/=?^_`{|}~-]+)*@([163\.com|126\.com|yeah\.net])+[\w]$/.test(a)},U=function(a){return/^[a-zA-Z]{1}[a-zA-Z0-9_-]{2,31}$/.test(a)},V=function(a,b){return b&&"cn"!=b?"global"==b?/^\d{9,12}$/.test(a):/^\d+$/.test(a):/^1[0-9]{10}$/.test(a)},W=function(a){return/^\d+$/.test(a)},X=function(a){return/(\.|\/)(gif|bmp|png|jpeg|jpg)$/i.test(a)},Y=function(a){return/(\.|\/)gif$/i.test(a)},Z=function(a,b){return a.length<=b?a:a.slice(0,b)+"..."},_=function(){a.check_unread_timer_delay=0;var b=function(){if(a.USER){var e=d.unread_count({},function(d){0==d.code&&(a.updateUnreadList(d),a.unread=d.data,a.USER.prj_update_count=d.data.project_update_count,ba(d.data.notifications),c.cancel(a.check_unread_timer),a.check_unread_timer=c(b,6e4))});e["catch"](function(){c.cancel(a.check_unread_timer),a.check_unread_timer_delay+=1e4,a.check_unread_timer=c(b,a.check_unread_timer_delay)})}else c.cancel(a.check_unread_timer)};b()};h.addEventListener("load",function(){if(window.Notification&&window.localStorage&&a.USER){var b="DesktopNotifySettingNotification";d.get_notification(function(a){angular.forEach(a.data,function(a){a.notification_key==b&&(g["desktop-notification-switch"]=a.notification_value,"true"==a.notification_value&&aa())})})}}),a.$on("desktop.notification.setting",function(a,b){window.Notification&&window.localStorage&&(1==b?(g["desktop-notification-switch"]="true",aa()):g["desktop-notification-switch"]="false")});var aa=function(){"granted"!==Notification.permission&&Notification.requestPermission(function(a){Notification.permission!==a&&(Notification.permission=a)})},ba=function(b){if(window.Notification&&window.localStorage&&"true"==g["desktop-notification-switch"]){if("true"==g["desktop-notification-unreadable"])return;g["desktop-notification-unreadable"]="true",i.unread({page:1,pageSize:b},function(b){var c=g["desktop-notification"],d=b.data.list,e={},f=[];if(angular.forEach(d,function(a){if(e[a.id]=a.content,g["desktop-notification"]){if(!c[a.id]){var b={id:a.id,content:a.content.replace(/<[^>]+>/g,"").replace(" ","")};f[f.length]=b}}else{var b={id:a.id,content:a.content.replace(/<[^>]+>/g,"").replace(" ","")};f[f.length]=b}}),g["desktop-notification"]=e,f.length>0){var h="";angular.forEach(f,function(a){h+=a.content+"\n"}),ca(a.USER.name+", 您在 Coding 有未读消息",h)}g["desktop-notification-unreadable"]="false"})}},ca=function(b,d){var f=new Notification(b,{icon:a.USER.avatar,body:d});f.onshow=function(){c(f.close.bind(f),8e3)},f.onclick=function(a){e.path("user/notifications/unread"),f.close()}};return{removeNullItem:j,orderActivityByDate:l,unifyActivity:m,squashActivity:n,removeOfId:o,replaceWith:p,findOfId:q,findIndex:r,prepend:s,html:u,revertHtml:t,safeApply:v,safeDigest:w,isAccount:x,wrapperTweetIntoActivity:y,htmlToPlaintext:z,m2u:B,randomEventIndex:C,thumbnail:K,htmlToPlaintextForProject:A,smartSwitch:L,projectParams:M,addFilenameWhenPaste:N,scaleImageFilter:O,uuid:P,capitalize:Q,loginRedirect:R,isEmail:S,isMagicEmail:T,isGlobalKey:U,isPhone:V,isCode:W,isImage:X,isGif:Y,ellipsisString:Z,startCheckUnreadMessage:_}}]),angular.module("services").factory("CountryService",function(){var a=[{country:"Afghanistan",country_code:"93",iso_code:"af"},{country:"Albania",country_code:"355",iso_code:"al"},{country:"Algeria",country_code:"213",iso_code:"dz"},{country:"American Samoa",country_code:"1",iso_code:"as"},{country:"Andorra",country_code:"376",iso_code:"ad"},{country:"Angola",country_code:"244",iso_code:"ao"},{country:"Anguilla",country_code:"1",iso_code:"ai"},{country:"Antigua and Barbuda",country_code:"1",iso_code:"ag"},{country:"Argentina",country_code:"54",iso_code:"ar"},{country:"Armenia",country_code:"374",iso_code:"am"},{country:"Aruba",country_code:"297",iso_code:"aw"},{country:"Australia",country_code:"61",iso_code:"au"},{country:"Austria",country_code:"43",iso_code:"at"},{country:"Azerbaijan",country_code:"994",iso_code:"az"},{country:"Bahamas",country_code:"1",iso_code:"bs"},{country:"Bahrain",country_code:"973",iso_code:"bh"},{country:"Bangladesh",country_code:"880",iso_code:"bd"},{country:"Barbados",country_code:"1",iso_code:"bb"},{country:"Belarus",country_code:"375",iso_code:"by"},{country:"Belgium",country_code:"32",iso_code:"be"},{country:"Belize",country_code:"501",iso_code:"bz"},{country:"Benin",country_code:"229",iso_code:"bj"},{country:"Bermuda",country_code:"1",iso_code:"bm"},{country:"Bhutan",country_code:"975",iso_code:"bt"},{country:"Bolivia",country_code:"591",iso_code:"bo"},{country:"Bosnia and Herzegovina",country_code:"387",iso_code:"ba"},{country:"Botswana",country_code:"267",iso_code:"bw"},{country:"Brazil",country_code:"55",iso_code:"br"},{country:"British Indian Ocean Territory",country_code:"246",iso_code:"io"},{country:"British Virgin Islands",country_code:"1",iso_code:"vg"},{country:"Brunei",country_code:"673",iso_code:"bn"},{country:"Bulgaria",country_code:"359",iso_code:"bg"},{country:"Burkina Faso",country_code:"226",iso_code:"bf"},{country:"Burundi",country_code:"257",iso_code:"bi"},{country:"Cambodia",country_code:"855",iso_code:"kh"},{country:"Cameroon",country_code:"237",iso_code:"cm"},{country:"Canada",country_code:"1",iso_code:"ca"},{country:"Cape Verde",country_code:"238",iso_code:"cv"},{country:"Cayman Islands",country_code:"1",iso_code:"ky"},{country:"Central African Republic",country_code:"236",iso_code:"cf"},{country:"Chad",country_code:"235",iso_code:"td"},{country:"Chile",country_code:"56",iso_code:"cl"},{country:"China",country_code:"86",iso_code:"cn"},{country:"Christmas Island",country_code:"61",iso_code:"cx"},{country:"Cocos Islands",country_code:"61",iso_code:"cc"},{country:"Colombia",country_code:"57",iso_code:"co"},{country:"Comoros",country_code:"269",iso_code:"km"},{country:"Cook Islands",country_code:"682",iso_code:"ck"},{country:"Costa Rica",country_code:"506",iso_code:"cr"},{country:"Croatia",country_code:"385",iso_code:"hr"},{country:"Cuba",country_code:"53",iso_code:"cu"},{country:"Cyprus",country_code:"357",iso_code:"cy"},{country:"Czech Republic",country_code:"420",iso_code:"cz"},{country:"Democratic Republic of the Congo",country_code:"243",iso_code:"cd"},{country:"Denmark",country_code:"45",iso_code:"dk"},{country:"Djibouti",country_code:"253",iso_code:"dj"},{country:"Dominica",country_code:"1",iso_code:"dm"},{country:"Dominican Republic",country_code:"1",iso_code:"do"},{country:"East Timor",country_code:"670",iso_code:"tl"},{country:"Ecuador",country_code:"593",iso_code:"ec"},{country:"Egypt",country_code:"20",iso_code:"eg"},{country:"El Salvador",country_code:"503",iso_code:"sv"},{country:"Equatorial Guinea",country_code:"240",iso_code:"gq"},{country:"Eritrea",country_code:"291",iso_code:"er"},{country:"Estonia",country_code:"372",iso_code:"ee"},{country:"Ethiopia",country_code:"251",iso_code:"et"},{country:"Falkland Islands",country_code:"500",iso_code:"fk"},{country:"Faroe Islands",country_code:"298",iso_code:"fo"},{country:"Fiji",country_code:"679",iso_code:"fj"},{country:"Finland",country_code:"358",iso_code:"fi"},{country:"France",country_code:"33",iso_code:"fr"},{country:"French Polynesia",country_code:"689",iso_code:"pf"},{country:"Gabon",country_code:"241",iso_code:"ga"},{country:"Gambia",country_code:"220",iso_code:"gm"},{country:"Georgia",country_code:"995",iso_code:"ge"},{country:"Germany",country_code:"49",iso_code:"de"},{country:"Ghana",country_code:"233",iso_code:"gh"},{country:"Gibraltar",country_code:"350",iso_code:"gi"},{country:"Greece",country_code:"30",iso_code:"gr"},{country:"Greenland",country_code:"299",iso_code:"gl"},{country:"Grenada",country_code:"1",iso_code:"gd"},{country:"Guam",country_code:"1",iso_code:"gu"},{country:"Guatemala",country_code:"502",iso_code:"gt"},{country:"Guernsey",country_code:"44",iso_code:"gg"},{country:"Guinea",country_code:"224",iso_code:"gn"},{country:"Guinea-Bissau",country_code:"245",iso_code:"gw"},{country:"Guyana",country_code:"592",iso_code:"gy"},{country:"Haiti",country_code:"509",iso_code:"ht"},{country:"Honduras",country_code:"504",iso_code:"hn"},{country:"Hong Kong",country_code:"852",iso_code:"hk"},{country:"Hungary",country_code:"36",iso_code:"hu"},{country:"Iceland",country_code:"354",iso_code:"is"},{country:"India",country_code:"91",iso_code:"in"},{country:"Indonesia",country_code:"62",iso_code:"id"},{country:"Iran",country_code:"98",iso_code:"ir"},{country:"Iraq",country_code:"964",iso_code:"iq"},{country:"Ireland",country_code:"353",iso_code:"ie"},{country:"Isle of Man",country_code:"44",iso_code:"im"},{country:"Israel",country_code:"972",iso_code:"il"},{country:"Italy",country_code:"39",iso_code:"it"},{country:"Ivory Coast",country_code:"225",iso_code:"ci"},{country:"Jamaica",country_code:"1",iso_code:"jm"},{country:"Japan",country_code:"81",iso_code:"jp"},{country:"Jersey",country_code:"44",iso_code:"je"},{country:"Jordan",country_code:"962",iso_code:"jo"},{country:"Kazakhstan",country_code:"7",iso_code:"kz"},{country:"Kenya",country_code:"254",iso_code:"ke"},{country:"Kiribati",country_code:"686",iso_code:"ki"},{country:"Kuwait",country_code:"965",iso_code:"kw"},{country:"Kyrgyzstan",country_code:"996",iso_code:"kg"},{country:"Laos",country_code:"856",iso_code:"la"},{country:"Latvia",country_code:"371",iso_code:"lv"},{country:"Lebanon",country_code:"961",iso_code:"lb"},{country:"Lesotho",country_code:"266",iso_code:"ls"},{country:"Liberia",country_code:"231",iso_code:"lr"},{country:"Libya",country_code:"218",iso_code:"ly"},{country:"Liechtenstein",country_code:"423",iso_code:"li"},{country:"Lithuania",country_code:"370",iso_code:"lt"},{country:"Luxembourg",country_code:"352",iso_code:"lu"},{country:"Macao",country_code:"853",iso_code:"mo"},{country:"Macedonia",country_code:"389",iso_code:"mk"},{country:"Madagascar",country_code:"261",iso_code:"mg"},{country:"Malawi",country_code:"265",iso_code:"mw"},{country:"Malaysia",country_code:"60",iso_code:"my"},{country:"Maldives",country_code:"960",iso_code:"mv"},{country:"Mali",country_code:"223",iso_code:"ml"},{country:"Malta",country_code:"356",iso_code:"mt"},{country:"Marshall Islands",country_code:"692",iso_code:"mh"},{country:"Mauritania",country_code:"222",iso_code:"mr"},{country:"Mauritius",country_code:"230",iso_code:"mu"},{country:"Mayotte",country_code:"262",iso_code:"yt"},{country:"Mexico",country_code:"52",iso_code:"mx"},{country:"Micronesia",country_code:"691",iso_code:"fm"},{country:"Moldova",country_code:"373",iso_code:"md"},{country:"Monaco",country_code:"377",iso_code:"mc"},{country:"Mongolia",country_code:"976",iso_code:"mn"},{country:"Montenegro",country_code:"382",iso_code:"me"},{country:"Montserrat",country_code:"1",iso_code:"ms"},{country:"Morocco",country_code:"212",iso_code:"ma"},{country:"Mozambique",country_code:"258",iso_code:"mz"},{country:"Myanmar",country_code:"95",iso_code:"mm"},{country:"Namibia",country_code:"264",iso_code:"na"},{country:"Nauru",country_code:"674",iso_code:"nr"},{country:"Nepal",country_code:"977",iso_code:"np"},{country:"Netherlands",country_code:"31",iso_code:"nl"},{country:"Netherlands Antilles",country_code:"599",iso_code:"an"},{country:"New Caledonia",country_code:"687",iso_code:"nc"},{country:"New Zealand",country_code:"64",iso_code:"nz"},{country:"Nicaragua",country_code:"505",iso_code:"ni"},{country:"Niger",country_code:"227",iso_code:"ne"},{country:"Nigeria",country_code:"234",iso_code:"ng"},{country:"Niue",country_code:"683",iso_code:"nu"},{country:"North Korea",country_code:"850",iso_code:"kp"},{country:"Northern Mariana Islands",country_code:"1",iso_code:"mp"},{country:"Norway",country_code:"47",iso_code:"no"},{country:"Oman",country_code:"968",iso_code:"om"},{country:"Pakistan",country_code:"92",iso_code:"pk"},{country:"Palau",country_code:"680",iso_code:"pw"},{country:"Palestine",country_code:"970",iso_code:"ps"},{country:"Panama",country_code:"507",iso_code:"pa"},{country:"Papua New Guinea",country_code:"675",iso_code:"pg"},{country:"Paraguay",country_code:"595",iso_code:"py"},{country:"Peru",country_code:"51",iso_code:"pe"},{country:"Philippines",country_code:"63",iso_code:"ph"},{country:"Pitcairn",country_code:"64",iso_code:"pn"},{country:"Poland",country_code:"48",iso_code:"pl"},{country:"Portugal",country_code:"351",iso_code:"pt"},{country:"Puerto Rico",country_code:"1",iso_code:"pr"},{country:"Qatar",country_code:"974",iso_code:"qa"},{country:"Republic of the Congo",country_code:"242",iso_code:"cg"},{country:"Reunion",country_code:"262",iso_code:"re"},{country:"Romania",country_code:"40",iso_code:"ro"},{country:"Russia",country_code:"7",iso_code:"ru"},{country:"Rwanda",country_code:"250",iso_code:"rw"},{country:"Saint Barthelemy",country_code:"590",iso_code:"bl"},{country:"Saint Helena",country_code:"290",iso_code:"sh"},{country:"Saint Kitts and Nevis",country_code:"1",iso_code:"kn"},{country:"Saint Lucia",country_code:"1",iso_code:"lc"},{country:"Saint Martin",country_code:"590",iso_code:"mf"},{country:"Saint Pierre and Miquelon",country_code:"508",iso_code:"pm"},{country:"Saint Vincent and the Grenadines",country_code:"1",iso_code:"vc"},{country:"Samoa",country_code:"685",iso_code:"ws"},{country:"San Marino",country_code:"378",iso_code:"sm"},{country:"Sao Tome and Principe",country_code:"239",iso_code:"st"},{country:"Saudi Arabia",country_code:"966",iso_code:"sa"},{country:"Senegal",country_code:"221",iso_code:"sn"},{country:"Serbia",country_code:"381",iso_code:"rs"},{country:"Seychelles",country_code:"248",iso_code:"sc"},{country:"Sierra Leone",country_code:"232",iso_code:"sl"},{country:"Singapore",country_code:"65",iso_code:"sg"},{country:"Sint Maarten",country_code:"1",iso_code:"sx"},{country:"Slovakia",country_code:"421",iso_code:"sk"},{country:"Slovenia",country_code:"386",iso_code:"si"},{country:"Solomon Islands",country_code:"677",iso_code:"sb"},{country:"Somalia",country_code:"252",iso_code:"so"},{country:"South Africa",country_code:"27",iso_code:"za"},{country:"South Korea",country_code:"82",iso_code:"kr"},{country:"South Sudan",country_code:"211",iso_code:"ss"},{country:"Spain",country_code:"34",iso_code:"es"},{country:"Sri Lanka",country_code:"94",iso_code:"lk"},{country:"Sudan",country_code:"249",iso_code:"sd"},{country:"Suriname",country_code:"597",iso_code:"sr"},{country:"Svalbard and Jan Mayen",country_code:"47",iso_code:"sj"},{country:"Swaziland",country_code:"268",iso_code:"sz"},{country:"Sweden",country_code:"46",iso_code:"se"},{country:"Switzerland",country_code:"41",iso_code:"ch"},{country:"Syria",country_code:"963",iso_code:"sy"},{country:"Taiwan",country_code:"886",iso_code:"tw"},{country:"Tajikistan",country_code:"992",iso_code:"tj"},{country:"Tanzania",country_code:"255",iso_code:"tz"},{country:"Thailand",country_code:"66",iso_code:"th"},{country:"Togo",country_code:"228",iso_code:"tg"},{country:"Tokelau",country_code:"690",iso_code:"tk"},{country:"Tonga",country_code:"676",iso_code:"to"},{country:"Trinidad and Tobago",country_code:"1",iso_code:"tt"},{country:"Tunisia",country_code:"216",iso_code:"tn"},{country:"Turkey",country_code:"90",iso_code:"tr"},{country:"Turkmenistan",country_code:"993",iso_code:"tm"},{country:"Turks and Caicos Islands",country_code:"1",iso_code:"tc"},{country:"Tuvalu",country_code:"688",iso_code:"tv"},{country:"U.S. Virgin Islands",country_code:"1",iso_code:"vi"},{country:"Uganda",country_code:"256",iso_code:"ug"},{country:"Ukraine",country_code:"380",iso_code:"ua"},{country:"United Arab Emirates",country_code:"971",iso_code:"ae"},{country:"United Kingdom",country_code:"44",iso_code:"gb"},{country:"United States",country_code:"1",iso_code:"us"},{country:"Uruguay",country_code:"598",iso_code:"uy"},{country:"Uzbekistan",country_code:"998",iso_code:"uz"},{country:"Vanuatu",country_code:"678",iso_code:"vu"},{country:"Vatican",country_code:"379",iso_code:"va"},{country:"Venezuela",country_code:"58",iso_code:"ve"},{country:"Vietnam",country_code:"84",iso_code:"vn"},{country:"Wallis and Futuna",country_code:"681",iso_code:"wf"},{country:"Western Sahara",country_code:"212",iso_code:"eh"},{country:"Yemen",country_code:"967",iso_code:"ye"},{country:"Zambia",country_code:"260",iso_code:"zm"},{country:"Zimbabwe",country_code:"263",iso_code:"zw"}];return{countries:a}});var depotService=angular.module("services");depotService.factory("Depot",["$resource","Reference",function(a,b){var c={query:{method:"GET"},depot:{method:"GET",url:"/api/user/:username/project/:project_name/git"},tree:{method:"GET",url:"/api/user/:username/project/:project_name/git/tree/:region"},treeInfo:{method:"GET",url:"/api/user/:username/project/:project_name/git/treeinfo/:region"},commits:{method:"GET",url:"/api/user/:username/project/:project_name/git/commits/:region"},commit:{method:"GET",url:"/api/user/:username/project/:project_name/git/commit/:region"},commit_diff_partial:{method:"GET",url:"/api/user/:username/project/:project_name/git/commit/:region/diff_partial"},blob_expand:{method:"GET",url:"/api/user/:username/project/:project_name/git/blob_expand/:region"},add_line_note:{method:"POST",url:"/api/user/:username/project/:project_name/git/line_notes"},del_line_note:{method:"DELETE",url:"/api/user/:username/project/:project_name/git/line_notes/:id"},blob:{method:"GET",url:"/api/user/:username/project/:project_name/git/blob/:region"},blame:{method:"GET",url:"/api/user/:username/project/:project_name/git/blame/:region"},edit_tree:{method:"GET",url:"/api/user/:username/project/:project_name/git/edit/:region"},new_tree:{method:"GET",url:"/api/user/:username/project/:project_name/git/new/:region"},upload_tree:{method:"GET",url:"/api/user/:username/project/:project_name/git/upload/:region"},delete_tree:{method:"GET",url:"/api/user/:username/project/:project_name/git/delete/:region"},update_tree:{method:"POST",url:"/api/user/:username/project/:project_name/git/edit/:region"},create_tree:{method:"POST",url:"/api/user/:username/project/:project_name/git/new/:region"},do_upload_tree:{method:"POST",url:"/api/user/:username/project/:project_name/git/upload/:region"},do_delete_tree:{method:"POST",url:"/api/user/:username/project/:project_name/git/delete/:region"},do_rename_tree:{method:"POST",url:"/api/user/:username/project/:project_name/git/rename/:region"},branches:{method:"GET",url:"/api/user/:username/project/:project_name/git/branches"},delete_branch:{method:"POST",url:"/api/user/:username/project/:project_name/git/branches/delete"},create_branch:{method:"POST",url:"/api/user/:username/project/:project_name/git/branches/create"},branches_search:{method:"GET",url:"/api/user/:username/project/:project_name/git/list_branches/?prefix=:prefix"},branches_filter:{method:"GET",url:"/api/user/:username/project/:project_name/git/branches/filter"},branches_names:{method:"GET",url:"/api/user/:username/project/:project_name/git/branches/names/:name"},tags:{method:"GET",url:"/api/user/:username/project/:project_name/git/tags"},delete_tag:{method:"POST",url:"/api/user/:username/project/:project_name/git/tags/delete"},create_tag:{method:"POST",url:"/api/user/:username/project/:project_name/git/tags/create"},tags_search:{method:"GET",url:"/api/user/:username/project/:project_name/git/list_tags/?prefix=:prefix"},compare:{method:"GET",url:"/api/user/:username/project/:project_name/git/compare/:region"},pull_request_create:{method:"GET",url:"/api/user/:username/project/:project_name/git/pull/create"
},pull_request_show:{method:"GET",url:"/api/user/:username/project/:project_name/git/pull/:iid"},pull_request_submit:{method:"POST",url:"/api/user/:username/project/:project_name/git/pull"},pull_request_merge:{method:"POST",url:"/api/user/:username/project/:project_name/git/pull/:iid/merge"},pull_request_refuse:{method:"POST",url:"/api/user/:username/project/:project_name/git/pull/:iid/refuse"},pull_request_cancel:{method:"POST",url:"/api/user/:username/project/:project_name/git/pull/:iid/cancel"},pull_request_list:{method:"GET",url:"/api/user/:username/project/:project_name/git/pulls/:region"},pull_request_comments_list:{method:"GET",url:"/api/user/:username/project/:project_name/git/pull/:iid/comments"},pull_request_comment_create:{method:"POST",url:"/api/user/:username/project/:project_name/git/pull/:iid/comment"},pull_request_comment_delete:{method:"DELETE",url:"/api/user/:username/project/:project_name/git/pull/:iid/comment/:id"},merge_request_create:{method:"GET",url:"/api/user/:username/project/:project_name/git/merge/create"},merge_request_show:{method:"GET",url:"/api/user/:username/project/:project_name/git/merge/:iid"},merge_request_commit_diff_content:{method:"GET",url:"/api/user/:username/project/:project_name/git/merge/:iid/commitDiffContent"},merge_request_update:{method:"PUT",url:"/api/user/:username/project/:project_name/git/merge/:iid"},merge_request_update_title:{method:"PUT",url:"/api/user/:username/project/:project_name/git/merge/:iid/update-title"},merge_request_update_content:{method:"PUT",url:"/api/user/:username/project/:project_name/git/merge/:iid/update-content"},merge_request_submit:{method:"POST",url:"/api/user/:username/project/:project_name/git/merge"},merge_request_merge:{method:"POST",url:"/api/user/:username/project/:project_name/git/merge/:iid/merge"},merge_request_refuse:{method:"POST",url:"/api/user/:username/project/:project_name/git/merge/:iid/refuse"},merge_request_cancel:{method:"POST",url:"/api/user/:username/project/:project_name/git/merge/:iid/cancel"},merge_request_squash:{method:"PUT",url:"/api/user/:username/project/:project_name/git/merge/:iid/squash"},merge_request_list:{method:"GET",url:"/api/user/:username/project/:project_name/git/merges/list/:region"},merge_request_list_type:{method:"GET",url:"/api/user/:username/project/:project_name/git/merges/list_type"},merge_request_filter:{method:"GET",url:"/api/user/:username/project/:project_name/git/merges/filter"},merge_request_comments_list:{method:"GET",url:"/api/user/:username/project/:project_name/git/merge/:iid/comments"},merge_request_comment_create:{method:"POST",url:"/api/user/:username/project/:project_name/git/merge/:iid/comment"},merge_request_comment_delete:{method:"DELETE",url:"/api/user/:username/project/:project_name/git/merge/:iid/comment/:id"},merge_request_reviewer_good:{method:"POST",url:"/api/user/:username/project/:project_name/git/merge/:iid/review_good"},merge_request_reviewer_good_undo:{method:"DELETE",url:"/api/user/:username/project/:project_name/git/merge/:iid/review_good"},merge_request_list_reviewer:{method:"GET",url:"/api/user/:username/project/:project_name/git/merge/:iid/reviewers"},merge_request_add_reviewer:{method:"POST",url:"/api/user/:username/project/:project_name/git/merge/:iid/add_reviewer"},merge_request_del_reviewer:{method:"DELETE",url:"/api/user/:username/project/:project_name/git/merge/:iid/del_reviewer"},merge_request_grant:{method:"POST",url:"/api/user/:username/project/:project_name/git/merge/:iid/grant"},merge_request_grant_undo:{method:"DELETE",url:"/api/user/:username/project/:project_name/git/merge/:iid/grant"},merge_request_activities_list:{method:"GET",url:"/api/user/:username/project/:project_name/git/merge/:iid/activities"},merge_request_add_label:{method:"POST",url:"/api/user/:username/project/:project_name/git/merge/:iid/labels"},merge_request_del_label:{method:"DELETE",url:"/api/user/:username/project/:project_name/git/merge/:iid/labels"},getGraph:{method:"GET",url:"/api/user/:username/project/:project_name/git/graph/:region"},key_verify:{method:"GET",url:"/api/user/:username/keys/verify"},key_create:{method:"POST",url:"/api/user/:username/keys"},key_list:{method:"GET",url:"/api/user/:username/keys",params:{withIDEKey:!1}},key_edit:{method:"POST",url:"/api/user/:username/key/:key_id/edit"},key_delete:{method:"POST",url:"/api/user/:username/key/:key_id/delete",params:{}},plot:{method:"GET",url:"/api/user/:username/project/:project_name/git/plot/data"},fork:{method:"POST",url:"/api/user/:username/project/:project_name/git/fork"},forks:{method:"GET",url:"/api/user/:username/project/:project_name/git/forks"},forks_paging:{method:"GET",url:"/api/user/:username/project/:project_name/git/forks/paging"},webHooks:{method:"GET",url:"/api/user/:username/project/:project_name/git/hooks"},webHookLogs:{method:"GET",url:"/api/user/:username/project/:project_name/git/webhook_logs"},createWebHook:{method:"POST",url:"/api/user/:username/project/:project_name/git/hook"},getWebHook:{method:"GET",url:"/api/user/:username/project/:project_name/git/hook/:id"},editWebHook:{method:"PUT",url:"/api/user/:username/project/:project_name/git/hook/:id"},deleteWebHook:{method:"DELETE",url:"/api/user/:username/project/:project_name/git/hook/:id"},testWebHook:{method:"POST",url:"/api/user/:username/project/:project_name/git/hook/:id/test"},queryDepolyKeys:{method:"GET",url:"/api/user/:username/project/:project_name/git/deploy_keys"},saveDeployKey:{method:"POST",url:"/api/user/:username/project/:project_name/git/deploy_key"},deleteDeployKey:{method:"DELETE",url:"/api/user/:username/project/:project_name/git/deploy_key/:id"},bindDeployKey:{method:"POST",url:"/api/user/:username/project/:project_name/git/bind_deploy_key/:id"},unBindDeployKey:{method:"POST",url:"/api/user/:username/project/:project_name/git/unbind_deploy_key/:id"},enableDenyForcePushBranch:{method:"POST",url:"/api/user/:username/project/:project_name/git/branches/deny_force_push/enable",params:{}},disableDenyForcePushBranch:{method:"POST",url:"/api/user/:username/project/:project_name/git/branches/deny_force_push/disable",params:{}},enableForceSquashBranch:{method:"POST",url:"/api/user/:username/project/:project_name/git/branches/force_squash/enable",params:{}},disableForceSquashBranch:{method:"POST",url:"/api/user/:username/project/:project_name/git/branches/force_squash/disable",params:{}},enableProtectedBranch:{method:"POST",url:"/api/user/:username/project/:project_name/git/branches/protected_branch/enable",params:{}},disableProtectedBranch:{method:"POST",url:"/api/user/:username/project/:project_name/git/branches/protected_branch/disable",params:{}},addProtectedBranchMember:{method:"POST",url:"/api/user/:username/project/:project_name/git/branches/protected_branch/add_member",params:{}},removeProtectedBranchMember:{method:"POST",url:"/api/user/:username/project/:project_name/git/branches/protected_branch/remove_member",params:{}},enableProtectedBranchMemberPush:{method:"POST",url:"/api/user/:username/project/:project_name/git/branches/protected_branch/enable_member_push",params:{}},listProtectedBranchMember:{method:"GET",url:"/api/user/:username/project/:project_name/git/branches/protected_branch/members",params:{}},listBranches:{method:"GET",url:"/api/user/:username/project/:project_name/git/list_branches"},listTags:{method:"GET",url:"/api/user/:username/project/:project_name/git/list_tags"},getLicense:{method:"GET",url:"/api/git/license",params:{}},getGitIgnore:{method:"GET",url:"/api/git/gitignore",params:{}},checkImport:{method:"POST",url:"/api/user/:username/project/:project_name/git/check_import"},blobPreview:{method:"POST",url:"/api/user/:username/project/:project_name/git/blob-preview/:region"},setDefaultBranch:{method:"POST",url:"/api/user/:username/project/:project_name/git/branch/default"},initDepot:{method:"POST",url:"/api/user/:username/project/:project_name/git/init"},resetDepot:{method:"POST",url:"/api/user/:username/project/:project_name/git/reset"},toggleSvn:{method:"POST",url:"/api/user/:username/project/:project_name/git/toggle_svn"},getBranchMetrics:{method:"GET",url:"/api/user/:username/project/:project_name/git/branch_metrics"},resolveRef:{method:"GET",url:"/api/user/:username/project/:project_name/git/resolve-ref"},getPagesStatus:{method:"GET",url:"/api/user/:username/project/:project_name/git/pages/status"},getPagesDeployStatus:{method:"GET",url:"api/user/:username/project/:project_name/git/pages/deploy-status"},openPages:{method:"POST",url:"/api/user/:username/project/:project_name/git/pages/open"},deletePages:{method:"POST",url:"/api/user/:username/project/:project_name/git/pages/delete"},redeployPages:{method:"POST",url:"/api/user/:username/project/:project_name/git/pages/redeploy"},addPagesDomain:{method:"POST",url:"/api/user/:username/project/:project_name/git/pages/add-domain"},deletePagesDomain:{method:"POST",url:"/api/user/:username/project/:project_name/git/pages/delete-domain"},listPagesDomain:{method:"GET",url:"/api/user/:username/project/:project_name/git/pages/domains"},applyCert:{method:"POST",url:"/api/user/:username/project/:project_name/git/pages/applyCert"},setForceSsl:{method:"POST",url:"/api/user/:username/project/:project_name/git/pages/set-force-ssl"},savePagesDeploySource:{method:"POST",url:"/api/user/:username/project/:project_name/git/pages/save-deploy-source"},setPrimaryDomain:{method:"POST",url:"/api/user/:username/project/:project_name/git/pages/set-primary-domain"},reapplySSLCert:{method:"POST",url:"/api/user/:username/project/:project_name/git/pages/reapply-ssl-certificate"},authenticateDomainOwnership:{method:"POST",url:"/api/user/:username/project/:project_name/git/pages/authenticate-domain-ownership"},setDomainToPrimary:{method:"POST",url:"/api/user/:username/project/:project_name/git/pages/set-domain-to-primary"},treeList:{method:"GET",url:"/api/user/:username/project/:project_name/git/treelist/:ref"},releases:{method:"GET",url:"/api/user/:username/project/:project_name/git/releases"},listReleaseTagNames:{method:"GET",url:"/api/user/:username/project/:project_name/git/releases/list-tag-names"},createRelease:{method:"POST",url:"/api/user/:username/project/:project_name/git/releases/create"},updateRelease:{method:"POST",url:"/api/user/:username/project/:project_name/git/releases/update/:tag_name"},deleteRelease:{method:"POST",url:"/api/user/:username/project/:project_name/git/releases/delete/:tag_name"},uploadReleaseAttachment:{method:"POST",url:"/api/user/:username/project/:project_name/git/releases/attachments/upload"},deleteReleaseAttachment:{method:"POST",url:"/api/user/:username/project/:project_name/git/releases/attachments/delete"},findRelatedResourcesForRelease:{method:"POST",url:"/api/user/:username/project/:project_name/git/releases/find-related-resources"}},d=a("/api/user/:username/project/:project_name/git",{},c);return b.agentAll(d,null,c)}]),angular.module("services").service("ElementResizeListener",function(){function a(a){var b=a.target||a.srcElement;b.__resizeRAF__&&f(b.__resizeRAF__),b.__resizeRAF__=e(function(){var c=b.__resizeTrigger__;(c.__preWidth__!=c.offsetWidth||c.__preHeight__!=c.offsetHeight)&&(c.__resizeListeners__.forEach(function(b){b.call(c,a)}),c.__preWidth__=c.offsetWidth,c.__preHeight__=c.offsetHeight)})}function b(){this.contentDocument&&this.contentDocument.defaultView&&(this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",a))}var c=document.attachEvent,d=navigator.userAgent.match(/Trident/),e=function(){var a=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(a){return window.setTimeout(a,20)};return function(b){return a(b)}}(),f=function(){var a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(b){return a(b)}}(),g=function(e,f){if(!e.__resizeListeners__)if(e.__resizeListeners__=[],c)e.__resizeTrigger__=e,e.attachEvent("onresize",a);else{"static"==getComputedStyle(e).position&&(e.style.position="relative");var g=e.__resizeTrigger__=document.createElement("object");g.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),g.__resizeElement__=e,g.onload=b,g.type="text/html",d&&e.appendChild(g),g.data="about:blank",d||e.appendChild(g)}e.__preWidth__=0,e.__preHeight__=0,e.__resizeListeners__.push(f)},h=function(b,d){b.__resizeListeners__.splice(b.__resizeListeners__.indexOf(d),1),b.__resizeListeners__.length||(c?b.detachEvent("onresize",a):b.__resizeTrigger__.contentDocument&&b.__resizeTrigger__.contentDocument.defaultView&&(b.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",a),b.__resizeTrigger__=!b.removeChild(b.__resizeTrigger__)))};return{on:g,off:h}}),angular.module("services").factory("Errors",["$q","$location","ipCookie","Flash","ErrorCode","PasswordValidateService","Agent",function(a,b,c,d,e,f,g){var h={1e7:function(){c("return_url",location.href)},1009:function(){b.path("/")}},i=function(a){if(a){var b=[];for(var c in a){var e=a[c];b.push(e)}d.fail().send(b.join("<br/>"))}},j=function(a,b,c,d,e,h){var i=function(){"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},j=i();f.onPasswordReady(function(a,f,i,l){if(!f||!i||l!==j)return angular.isFunction(e)&&e(null,null),void(angular.isFunction(h)&&h());c[0].two_factor_code=f;var m=g.agent(b,c,k);m.then(d),m["catch"](e),m["finally"](h)}),f.require(null,a,j,700)},k=function(a,b,c,f,g,k,l){var m=a.code;if(0==m)return void(angular.isFunction(l)&&l());if(1==m)d.fail().send(a.msg||"操作失败！");else{if(m==e.TWO_FACTOR_CODE_REQUIRED)return j("totp",c,f,g,k,l);if(m==e.TWO_FACTOR_PASSWORD_REQUIRED)return j("password",c,f,g,k,l)}var n;if(angular.isFunction(k)&&(n=k(null,a),n===!1))return void(angular.isFunction(l)&&l());var o=h[m];o?o.call(this,a,b):n!==!1&&1!==m&&a.msg&&i(a.msg),b&&b(a),angular.isFunction(l)&&l()};return{handle:k}}]);var HelpsResouces=angular.module("services");HelpsResouces.factory("Helps",["$resource","Reference",function(a,b){var c={docs:{method:"GET",url:"api/help/doc/category/:code/docs"},root_category:{method:"GET",url:"api/help/doc/category/root"},search:{method:"GET",url:"api/help/doc/search"}},d=a("",{},c);return b.agentAll(d,{},c)}]),angular.module("services").factory("i18nService",["$rootScope","Locale_enUS","Locale_zhCN",function(a,b,c){var d={"zh-cn":c.resources,"en-us":b.resources},e=(a.language||"en-us").toLowerCase(),f=function(a,b,c){return d[e].hasOwnProperty(a)&&d[e][a].hasOwnProperty(b)?c&&c.length>0?d[e][a][b].replace(/#{(\d+)}/g,function(a,b,d,e){return c[b]}):d[e][a][b]:b};return{localize:f}}]),angular.module("services").factory("Lint",["$resource","Flash",function(a,b){var c={get_mr_lint_task:{method:"GET",url:"/api/user/:username/project/:project_name/lint/mr/:iid/task"},create_mr_lint_task:{method:"POST",url:"/api/user/:username/project/:project_name/lint/mr/:iid/task/create"},restart_mr_lint_task:{method:"POST",url:"/api/user/:username/project/:project_name/lint/mr/:iid/task/restart"},get_lint_settings:{method:"GET",url:"/api/user/:username/project/:project_name/lint/settings"},set_lint_settings:{method:"POST",url:"/api/user/:username/project/:project_name/lint/settings"}},d=function(a){return a.data&&a.data.message&&b.fail().send(a.data.message),a};return angular.forEach(c,function(a,b){"GET"!==b&&(a.interceptor={responseError:d})}),a("/api/user/:username/project/:project_name/lint",{},c)}]);var appService=angular.module("services");appService.factory("Log",["LogAPI","$location",function(a,b){var c=(newLog(),function(){var a=$.cookie("frontlog_sample_rate"),b=Number(a);return _.isNaN(b)&&(b=0),Math.random()<b});return{error:function(b){_.isEmpty(b)||shoudLog()&&a.error(b)},info:function(b){_.isEmpty(b)||c()&&a.info(b)},warn:function(b){_.isEmpty(b)||c()&&a.warn(b)}}}]),angular.module("btford.modal",[]).factory("btfModal",["$animate","$compile","$injector","$rootScope","$controller","$q","$http","$templateCache",function(a,b,c,d,e,f,g,h){return function(i){function j(a){return n()?void 0:o.then(function(b){u||l(b,a)})}function k(a){if(p&&a)for(var b in a)p[b]=a[b]}function l(g,h){if(u=angular.element(g),0===u.length)throw new Error("The template contains no elements; you need to wrap text nodes");if(a.enter(u,s),p=d.$new(),h)for(var i in h)p[i]=h[i];angular.forEach(t,function(a,b){t[b]=angular.isString(a)?c.get(a):angular.isFunction(a)?c.invoke(a):a});var j=function(){var a=e(q,{$scope:p});r&&(p[r]=a),b(u)(p)};t?f.all(t).then(function(){p=angular.extend(p,arguments[0]),j()}):j()}function m(){var b=f.defer();return u?(a.leave(u,function(){p.$destroy(),b.resolve()}),u=null):b.resolve(),b.promise}function n(){return!!u}if(!(!i.template^!i.templateUrl))throw new Error("Expected modal to have exactly one of either `template` or `templateUrl`");var o,p,q=(i.template,i.controller||angular.noop),r=i.controllerAs,s=angular.element(i.container||document.body),t=i.resolve,u=null;if(i.template){var v=f.defer();v.resolve(i.template),o=v.promise}else o=g.get(i.templateUrl,{cache:h}).then(function(a){return a.data});return{activate:j,deactivate:m,active:n,locals:k}}}]),angular.module("services").factory("Paas",["$resource","Flash",function(a,b){var c={servers:{method:"GET",url:"/api/paas/servers"},get:{method:"GET",url:"/api/paas/:username/:project_name/cf_app"},"delete":{method:"DELETE",url:"/api/paas/:username/:project_name/cf_app"},update:{method:"PUT",url:"/api/paas/:username/:project_name/cf_app"},detect:{method:"POST",url:"/api/user/:username/project/:project_name/paas/detect"},check:{method:"POST",url:"/api/paas/:username/:project_name/check"},health:{method:"GET",url:"/api/paas/:username/:project_name/cf_app/health"},stats:{method:"GET",url:"/api/paas/:username/:project_name/cf_app/stats",isArray:!0},start:{method:"POST",url:"/api/paas/:username/:project_name/cf_app/start"},stop:{method:"POST",url:"/api/paas/:username/:project_name/cf_app/stop"},restart:{method:"POST",url:"/api/paas/:username/:project_name/cf_app/restart"},deploy:{method:"POST",url:"/api/paas/:username/:project_name/cf_app/deploy"},scale:{method:"POST",url:"/api/paas/:username/:project_name/cf_app/scale"},logs:{method:"GET",url:"/api/paas/:username/:project_name/cf_app/logs",isArray:!0},files:{method:"GET",url:"/api/paas/:username/:project_name/cf_app/files"},vars:{method:"GET",url:"/api/paas/:username/:project_name/cf_app/vars"},set_var:{method:"POST",url:"/api/paas/:username/:project_name/cf_app/vars"},del_var:{method:"DELETE",url:"/api/paas/:username/:project_name/cf_app/vars/:key"},avaliable_services:{method:"GET",url:"/api/paas/:username/:project_name/cf_services/avaliable",isArray:!0},service_bindings:{method:"GET",url:"/api/paas/:username/:project_name/cf_services/:service_id/bindings",isArray:!0},app_services:{method:"GET",url:"/api/paas/:username/:project_name/cf_services",isArray:!0},bind_service:{method:"POST",url:"/api/paas/:username/:project_name/cf_services/:service_id/bind",isArray:!0},unbind_service:{method:"POST",url:"/api/paas/:username/:project_name/cf_services/:service_id/unbind",isArray:!0},marketplace:{method:"GET",url:"/api/paas/:username/:project_name/marketplace",isArray:!0},add_service:{method:"POST",url:"/api/paas/:username/:project_name/cf_services"},del_service:{method:"DELETE",url:"/api/paas/:username/:project_name/cf_services/:service_id"},service_info:{method:"GET",url:"/api/paas/:username/:project_name/cf_services/:service_id"},console_cmd:{method:"POST",url:"/api/paas/:username/:project_name/cf_services/:service_id/console"},service_credentials:{method:"GET",url:"/api/paas/:username/:project_name/cf_services/:service_id/credentials"}},d=function(a){return a.data&&a.data.message&&b.fail().send(a.data.message),a};return angular.forEach(c,function(a,b){"get"!==b&&(a.interceptor={responseError:d})}),a("",{},c)}]),angular.module("services").factory("PaasAPI",["$resource","Reference",function(a,b){var c={get:{method:"GET",url:"/api/user/:username/project/:project_name/paas"},"delete":{method:"DELETE",url:"/api/user/:username/project/:project_name/paas"},update:{method:"PUT",url:"/api/user/:username/project/:project_name/paas"},detect:{method:"POST",url:"/api/user/:username/project/:project_name/paas/detect"},health:{method:"GET",url:"/api/user/:username/project/:project_name/paas/health"},stats:{method:"GET",url:"/api/user/:username/project/:project_name/paas/stats",isArray:!0},start:{method:"POST",url:"/api/user/:username/project/:project_name/paas/start"},stop:{method:"POST",url:"/api/user/:username/project/:project_name/paas/stop"},restart:{method:"POST",url:"/api/user/:username/project/:project_name/paas/restart"},deploy:{method:"POST",url:"/api/user/:username/project/:project_name/paas/deploy"},avaliable_services:{method:"GET",url:"/api/user/:username/project/:project_name/paas/services/avaliable"},service_bindings:{method:"GET",url:"/api/user/:username/project/:project_name/paas/services/:service_id/bindings"},app_services:{method:"GET",url:"/api/user/:username/project/:project_name/paas/services"},bind_service:{method:"POST",url:"/api/user/:username/project/:project_name/paas/services/:service_id/bind"},unbind_service:{method:"POST",url:"/api/user/:username/project/:project_name/paas/services/:service_id/unbind"},marketplace:{method:"GET",url:"/api/user/:username/project/:project_name/paas/services/marketplace"},add_service:{method:"POST",url:"/api/user/:username/project/:project_name/paas/services"},del_service:{method:"DELETE",url:"/api/user/:username/project/:project_name/paas/services/:service_id"},service_info:{method:"GET",url:"/api/user/:username/project/:project_name/paas/services/:service_id"},console_cmd:{method:"POST",url:"/api/user/:username/project/:project_name/paas/services/:service_id/console"},service_credentials:{method:"GET",url:"/api/user/:username/project/:project_name/paas/services/:service_id/credentials"},vars:{method:"GET",url:"/api/user/:username/project/:project_name/paas/vars"},set_var:{method:"POST",url:"/api/user/:username/project/:project_name/paas/vars"},del_var:{method:"DELETE",url:"/api/user/:username/project/:project_name/paas/vars/:key"},update_domain:{method:"POST",url:"/api/user/:username/project/:project_name/paas/domain"}},d=a("/api/user/:username/project/:project_name/paas",{},c);return b.agentAll(d,null,c)}]),angular.module("services").service("PageTitle",["$window",function(a){this.set=function(){var b,c=arguments.length>0?Array.prototype.slice.call(arguments,0):arguments[0];b=null===c||void 0===c||c===!1?["Coding"]:"string"==typeof c?[c]:c.slice(0);var d=b.join(" - ");d=d.replace(/&lt;/g,"<").replace(/&gt;/g,">"),a.document.title=d}}]),angular.module("services").factory("Payment",["$resource","Reference",function(a,b){var c={charge:{method:"POST",url:"/api/payment/charge"},charge_log:{method:"GET",url:"/api/payment/charge"},pay_log:{method:"GET",url:"/api/payment/consume"},close:{method:"PUT",url:"/api/payment/charge/:id/close"},url:{method:"POST",url:"/api/payment/charge/:id/url"},get:{method:"GET",url:"/api/payment/charge/:id"},balance:{method:"GET",url:"/api/payment/balance"},upgrade:{method:"POST",url:"/api/user/:username/project/:project_name/upgrade"},upgradePro:{method:"POST",url:"/api/user/:username/project/:project_name/dev_upgrade_premium"},upgradePrice:{method:"GET",url:"/api/user/:username/project/:project_name/dev_upgrade_premium",params:{month:"1,6,12"}},projectPlan:{method:"GET",url:"/api/user/:username/project/:project_name/project_plan"},updateRenewal:{method:"PUT",url:"/api/user/:username/project/:project_name/project_plan"},projects:{method:"GET",url:"/api/payment/project"},summary:{method:"GET",url:"/api/user/service_info"},invoice_price:{method:"GET",url:"/api/invoice/price"},invoices:{method:"GET",url:"/api/invoice"},invoice:{method:"POST",url:"/api/invoice"},update_invoice:{method:"PUT",url:"/api/invoice"},remove_invoice:{method:"DELETE",url:"/api/invoice/:id"},sign_invoice:{method:"POST",url:"/api/invoice/sign_for_express/:id"},project_summary:{method:"GET",url:"/api/user/:username/project/:project_name/service_info"},tickets:{method:"GET",url:"/api/user/:username/project/:project_name/agent/request_list"},ticket:{method:"POST",url:"/api/user/:username/project/:project_name/agent/requests"},get_ticket:{method:"POST",url:"/api/user/:username/project/:project_name/agent?url=requests/:id.json",params:{method:"GET"}},ticket_comments:{method:"POST",url:"/api/user/:username/project/:project_name/agent?url=requests/:id/comments.json",params:{method:"GET"}},ticket_comment:{method:"POST",url:"/api/user/:username/project/:project_name/agent/requests/:id",params:{method:"PUT"}},ticket_fields:{method:"GET",url:"/api/user/:username/project/:project_name/agent/ticket_fields/active"},users:{method:"GET",url:"/api/user/:username/project/:project_name/agent/users/show_many"},"export":{method:"GET",url:"/api/user/:username/project/:project_name/export"},exports:{method:"POST",url:"/api/user/:username/project/:project_name/export"},renewal_plan:{method:"GET",url:"/api/user/:username/project/:project_name/renew"},renew:{method:"POST",url:"/api/user/:username/project/:project_name/renew"},exchange_balance:{method:"GET",url:"/api/point/balance"},exchange_point:{method:"POST",url:"/api/point/point_exchange"},generate_weixin_qr:{method:"POST",url:"/api/payment/generate_weixin_qr"},get_weixin_qr:{method:"GET",url:"/api/payment/charge/:charge_id/qr"},vip_upgrade:{method:"POST",url:"/api/vip/upgrade"},vip_upgrade_info:{method:"GET",url:"/api/vip/:uplevel/info"},check_payed:{method:"GET",url:"/api/pay/order/:orderid/payed"},get_order_list:{method:"GET",url:"/api/pay/order"},get_upgrade_history:{method:"GET",url:"/api/vip/upgrade"},cancel_vip_order:{method:"PUT",url:"/api/pay/order/:orderid/cancel"}},d=a("",{},c);return b.agentAll(d,{},c)}]),angular.module("services").factory("Point",["$resource","Reference",function(a,b){var c={record:{method:"GET",url:"/api/point/records",params:{page:1,pageSize:10}},points:{method:"GET",url:"/api/point/points"},gifts:{method:"GET",url:"/api/gifts"},exchange:{method:"POST",url:"/api/point/exchange"}},d=a("",{},c);return b.agentAll(d,{},c)}]),angular.module("services").factory("PrivateToken",["$resource","Reference",function(a,b){var c={get:{method:"GET",url:"/api/user/private-token"},open:{method:"POST",url:"/api/user/private-token/open"},close:{method:"POST",url:"/api/user/private-token/close"},refresh:{method:"POST",url:"/api/user/private-token/refresh"}},d=a("",{},c);return b.agentAll(d,{},c)}]),angular.module("services").factory("Reference",["$q","$timeout","Flash","Errors","Agent",function(a,b,c,d,e){var f=function(a,b,c){var f={methods:b,resolve:e.resolve},g=angular.copy(c);return $.isEmptyObject(b)||angular.forEach(b,function(b,c){g&&g[c]&&delete g[c];var h=angular.copy(b.isArray);"undefined"!=typeof h&&delete b.isArray;var i=angular.copy(a[c]);f[c]=function(){var a=e.agent(i,arguments,d.handle,b,h);return a}}),g&&angular.forEach(g,function(b,c){var g=angular.copy(a[c]);f[c]=function(){return e.agent(g,arguments,d.handle)}}),angular.extend(a,f)};return{agent:e.agent,agentAll:f,resolve:e.resolve,getPromise:e.getPromise}}]),angular.module("services").service("TextService",["TaskCommentService",function(a){return{text:a.text}}]),angular.module("services").factory("Time",function(){return{friendly:function(a,b){return moment(a).fromNow(b)}}}),angular.module("services").provider("UserTeamRouter",["$routeProvider",function(a){var b=this;return this.when=function(c,d){var e=/^\/(?:u|t)\/([^\/]+)\/p\/([^\/]+)/;c.match(e)||new Error("UserTeamRouter only support url like /u/{xxx}/p/{xxx}/*** or /t/{xxx}/p/{xxx}/*** , current url is "+c);var f=c.replace(/^\/u\//g,"/t/");return a.when(c,d),a.when(f,d),b},this.$get=["",function(){}],this}]),function(){angular.module("app").controller("CiController",["$scope","$routeParams","$location",function(a,b,c){a.inner_menu="ci",a.tag_menu="ci",a.loaded=!0,a.USER||c.path(a.PROJECT.project_path),a.USER.test&&_.indexOf(a.USER.test,"ci")<0&&c.path(a.PROJECT.project_path)}])}.call(this),function(){angular.module("app").controller("UserKeysSettingController",["$rootScope","$scope","Depot","Common","Flash","ErrorCode","$filter",function(a,b,c,d,e,f,g){var h,i,j,k,l,m;return c.key_list({username:b.USER.global_key,withIDEKey:!0},function(a){return b.keys=a.data}),i=function(){return moment().add(3,"months").format("YYYY-MM-DD")},m=function(a){return moment(new Date(moment().format("YYYY-MM-DD"))).isAfter(new Date(a))},l=function(){return b.key_title="",b.key_content="",b.key_never_expired=!1,b.key_expiration=i(),b.key_expired=m(b.key_expiration)},l(),b.pickmeup_style={},b.pickmeup_opts={max:"9999-12-31"},b.onDateChange=function(a){return b.key_expiration=a,b.key_expired=m(a)},b.showPasswordWithCreateKey=function(a,d,e,f){return b.key_title=a,b.key_content=d,c.key_verify({username:b.USER.global_key,title:b.key_title,content:b.key_content},function(b){return h(a,d,e,f)})},b.showPasswordWithDeleteKey=function(a){return j(a)},b.showPasswordWithEditKey=function(a){return k(a)},b.split=function(a){var c;return null===a||null!==b.key_title&&""!==b.key_title||(c=a.split(" "),3!==c.length)?void 0:b.key_title=c[2]},h=function(a,d,h,i){return c.key_create({username:b.USER.global_key},{title:a,content:d,expiration:i?null:h},function(a){return e.success().send(g("i18n")("option_successfully","code_keys")),b.keys.push(a.data),l()})["catch"](function(c,e){e&&e.code===f.PASSWORD_ERROR&&b.showPasswordWithCreateKey(a,d,h,i)})},j=function(a){return c.key_delete({username:b.USER.global_key,key_id:a.id},{},function(c){return e.success().send(g("i18n")("option_successfully","code_keys")),b.keys=d.removeOfId(b.keys,a.id)})["catch"](function(c,d){d&&d.code===f.PASSWORD_ERROR&&b.showPasswordWithDeleteKey(a)})},k=function(a){return c.key_edit({username:b.USER.global_key,key_id:a.id},{title:a.form.title,expiration:a.form.key_never_expired?null:a.form.key_expiration},function(c){return e.success().send(g("i18n")("option_successfully","code_keys")),a.title=a.form.title,a.expire_at=a.form.key_never_expired?null:a.form.key_expiration,a.has_expired=null!=a.expire_at&&m(a.expire_at),b.hideEditForm(a)})["catch"](function(c,d){d&&d.code===f.PASSWORD_ERROR&&b.showPasswordWithEditKey(a)})},b.showEditForm=function(a){var c,d,e,f;for(f=b.keys,d=0,e=f.length;e>d;d++)c=f[d],c.id!==a.id&&b.hideEditForm(c);return null==a.form&&(a.form={show:!0,title:a.title,key_never_expired:!a.expire_at,key_expiration:a.expire_at||i(),key_expired:null!=a.expire_at&&m(a.expire_at)}),a.form.onDateChange=function(b){return a.form.key_expiration=b,a.form.key_expired=m(b)}},b.hideEditForm=function(a){return a.form?delete a.form:void 0}}])}.call(this),function(){angular.module("app").controller("ProjectTitleController",["$scope","$routeParams","Project","Depot","$location","$timeout","$filter",function(a,b,c,d,e,f,g){var h,i;return a.cur_clone_type="https",a.copied=!1,a.stared_msg=g("i18n")("stared","code_menu"),a.watched_msg=g("i18n")("watched","code_menu"),a.PROJECT||(a.PROJECT={}),a.PROJECT.cur_push_url=a.PROJECT.https_url,a.cur_clone_url=a.PROJECT.https_url,a.createDepotType="new",a.USER&&a.PROJECT.id&&c.members({id:a.PROJECT.id},function(b){return $(b.data).each(function(b,c){c.user_id===a.USER.id&&(a.is_project_member=!0)})}),h=function(){e.search("return_url",e.path()),e.path("login")},$("#project-clone-url").dropdown(),a.changeCloneUrl=function(b){"ssh"===b?(a.cur_clone_url=a.PROJECT.ssh_url,a.PROJECT.cur_push_url=a.PROJECT.ssh_url,a.cur_clone_type="ssh"):"git"===b?(a.cur_clone_url=a.PROJECT.git_url,a.cur_clone_type="git"):(a.cur_clone_url=a.PROJECT.https_url,a.PROJECT.cur_push_url=a.PROJECT.https_url,a.cur_clone_type="https")},a.star=function(){return a.USER?a.PROJECT.stared_loading?void 0:(a.PROJECT.stared_loading=!0,
c.star({username:a.PROJECT.owner_user_name,project_name:a.PROJECT.name},{},function(b){return a.PROJECT.star_count+=1,a.PROJECT.stared=!0,a.PROJECT.stared_loading=!1})):h()},a.unstar=function(){return a.PROJECT.stared_loading?void 0:(a.PROJECT.stared_loading=!0,c.unstar({username:a.PROJECT.owner_user_name,project_name:a.PROJECT.name},{},function(b){return a.PROJECT.star_count-=1,a.PROJECT.stared=!1,a.PROJECT.stared_loading=!1}))},a.watch=function(){return a.USER?a.PROJECT.watched_loading?void 0:(a.PROJECT.watched_loading=!0,c.watch({username:a.PROJECT.owner_user_name,project_name:a.PROJECT.name},{},function(b){return a.PROJECT.watch_count+=1,a.PROJECT.watched=!0,a.PROJECT.watched_loading=!1})):h()},a.unwatch=function(){return a.PROJECT.watched_loading?void 0:(a.PROJECT.watched_loading=!0,c.unwatch({username:a.PROJECT.owner_user_name,project_name:a.PROJECT.name},{},function(b){return a.PROJECT.watch_count-=1,a.PROJECT.watched=!1,a.PROJECT.watched_loading=!1}))},a.fork=function(){return a.USER?confirm(g("i18n")("fork_confirm","code_menu"))?($(".public-project-view").hide(),$(".wrapper").append('<div class="ui public-project-view forking coding aligned center"><i class="loading icon" style="font-size:50px;"></i><p>'+g("i18n")("fork_tip","code_menu")+"</p></div>"),d.fork({username:b.username,project_name:b.project_name},{},function(a){return e.path(a.data.depot_path)})["catch"](function(a,b){$(".forking").remove(),$(".public-project-view").show()})):void 0:h()},a.$watch("cur_clone_url",function(b){return a.newDepotCommondLine="mkdir "+a.PROJECT.name+"\n"+("cd "+a.PROJECT.name+"\n")+"git init\n"+('echo "# '+a.PROJECT.name+'" >> README.md\ngit add README.md\n')+'git commit -m "first commit"\n'+("git remote add origin "+b+"\n")+"git push -u origin master",a.existingDepotCommondLine="git remote add origin "+b+"\ngit push -u origin master"}),a.changeCreateDepotType=function(b){return a.createDepotType=b},a.copyCommondLine=function(){return"new"===a.createDepotType?a.newDepotCommondLine:"existing"===a.createDepotType?a.existingDepotCommondLine:""},a.copiedCopyCommondLine=!1,a.doClickCopyCommondLine=function(){return a.copiedCopyCommondLine=!0,f(function(){return a.copiedCopyCommondLine=!1},2e3)},i=0,a.do_click=function(){return a.copied=!0,f.cancel(i),i=f(function(){return a.copied=!1},2e3)}}])}.call(this),function(){angular.module("app").controller("ImportStatusController",["$scope","$rootScope","$routeParams","$location","Depot","Flash","$route",function(a,b,c,d,e,f,g){var h,i;i=!1,a.import_status=1,(h=function(){i?e.checkImport({username:a.PROJECT.owner_user_name,project_name:a.PROJECT.name},{},function(b){0===b.code&&(2===b.data.status?a.load_auto_refresh=setTimeout(function(){h()},5e3):3===b.data.status?(f.success().send("导入成功"),a.DEPOT.status=3,location.reload()):1===b.data.status&&(f.fail().send("导入失败，请查看通知"),a.DEPOT.status=1,g.reload()))}):(a.load_auto_refresh=setTimeout(function(){h()},5e3),i=!0)})()}])}.call(this),function(){angular.module("app").controller("InitDepotController",["$scope","$rootScope","$routeParams","$location","Depot","Flash","$route",function(a,b,c,d,e,f,g){return a.showScaffoldForm=!1,a.initDepotForm={type:"init",gitReadmeEnabled:!1,gitIgnore:"no",gitLicense:"no",vcsType:"git",importFrom:""},a.canSubmit=!1,a.$watchCollection("initDepotForm",function(b){return"init"===b.type&&(b.gitReadmeEnabled===!1&&"no"===b.gitIgnore&&"no"===b.gitLicense?a.canSubmit=!1:a.canSubmit=!0),"import"===b.type?b.importFrom?a.canSubmit=!0:a.canSubmit=!1:void 0}),a.initDepot=function(){return a.canSubmit===!0?e.initDepot({username:a.PROJECT.owner_user_name,project_name:a.PROJECT.name},a.initDepotForm,function(a){return g.reload()}):void 0}}])}.call(this),function(){angular.module("app").controller("publicProjectViewController",["$scope","USER",function(a,b){return a.showClonePanel=!1,a.showClone=function(){return a.showClonePanel=!a.showClonePanel}}])}.call(this),function(){angular.module("app").service("GitService",["$rootScope","$routeParams",function(a,b){var c,d,e;return e=function(a){var b;return b=document.createElement("div"),b.appendChild(document.createTextNode(a)),b.innerHTML},c=function(a){var b,c,d;return"commit_refer"!==a.action?"":""+(null!=(b=a.commit)&&null!=(c=b.depot)?c.depot_path:void 0)+"/commit/"+(null!=(d=a.commit)?d.sha:void 0)},d=function(a){return _.groupBy(a,function(a){return moment(a.commitTime).format("ll")})},{htmlEncode:e,activityCommitLink:c,commitsGroupByDate:d}}])}.call(this),function(){angular.module("app").controller("EditProjectIconController",["$scope","$rootScope","Project","ProjectResolver","Errors","Flash","Setting","$http","$location","$q",function(a,b,c,d,e,f,g,h,i,j){var k,l,m;l=b.USER,k=b.PROJECT,$("#edit-project-icon-modal").modal("setting",{closable:!1}),a.project_icon={},c.get_project_icon({id:k.id},function(b){return 0===b.code?a.project_icon=b.data:void 0}),m=[g.api_host,"/api/project/"+k.id+"/project_icon"].join(""),a.uploadSetting={xhrFields:{withCredentials:!0},url:m,dropZone:null,add:function(b,c){c.submit(),a.uploading=!0},done:function(c,d){0===d.result.code?(a.PROJECT=d.result.data,b.PROJECT=a.PROJECT,a.project_icon=d.result.data.icon,b.$broadcast("project.icon.update",d.result.data.icon),f.success().send("上传成功!")):e.handle(d.result)},fail:function(){f.fail().send("上传失败!")}}}])}.call(this),function(){angular.module("app").controller("EditAvatarController",["$scope","$rootScope","User","Errors","Flash","Setting","$http",function(a,b,c,d,e,f,g){var h,i;h=b.USER,$("#edit-avatar-modal").modal("setting",{closable:!1}),a.avatar=!1,a.img={src:"",top:"",left:"",size:""},i=[f.api_host,"/api/user/avatar"].join(""),a.uploadSetting={xhrFields:{withCredentials:!0},url:i,dropZone:$("#avatar-upload-zone"),add:function(a,b){b.submit()},done:function(b,c){0===c.result.code?(a.avatar=c.result.data,a.img.src=c.result.data,e.success().send("上传成功!")):d.handle(c.result)},fail:function(){e.fail().send("上传失败!")}},a.doImageCrop=function(a){g.get("/api/user/avatarCrop?url="+a.src+"&top="+a.top+"&left="+a.left+"&size="+a.size).success(function(a){return 0===a.code?e.success().send("OK"):void 0})}}])}.call(this),function(){angular.module("app").controller("UserNotificationSettingController",["$scope","$rootScope","User","Errors","Flash","$http",function(a,b,c,d,e,f){var g,h,i;a.settings={},a.showMore=!1,a.activitySetting={},g="ProjectActivityCountSettingNotification",a.desktopSetting={},h="DesktopNotifySettingNotification",i=function(b){var c;return c={},$.each(b,function(b,d){c[d.email_key]="true"===d.email_value,c[d.notification_key]="true"===d.notification_value,d.notification_key===g&&(a.activitySetting=d),d.notification_key===h&&(a.desktopSetting=d)}),c},c.get_notification(function(b){var c;c=b.data,a.settings=i(c),a.sets=c}),a.submit=function(a,d){a===h&&b.$broadcast("desktop.notification.setting",d),c.set_notification({settingType:a,settingContent:d},function(a){return 0===a.code?e.success().send("修改成功"):e.fail().send("修改失败")})},a.changeShowMore=function(){a.showMore=!a.showMore}}])}.call(this),function(){angular.module("directives").directive("cgAnchor",[function(){return{link:function(a,b,c){return b.bind("click",function(a){var b;a.stopPropagation(),b=angular.element("[name="+c.cgAnchor+"],[id="+c.cgAnchor+"]"),b.length>0&&window.scrollTo(0,b.offset().top-80)})}}}])}.call(this),function(){angular.module("directives").directive("cgBindHtml",[function(){return{priority:10,link:function(a,b,c){var d,e;e=a.$eval(c.cgBindHtml),d=$("<span>"+e+"</span>"),b.is("a")&&d.find("a").length>0?(d.contents().filter(function(){return 3===this.nodeType}).wrap('<a href="'+c.ngHref+'"></a>'),b.replaceWith(d)):b.html(e)}}}])}.call(this),function(){angular.module("directives").directive("cgBlameHighlight",["hljsService","$location","location","$window",function(a,b,c,d){var e;return e=-1,$.fn.blameHighlight=function(d){var f,g,h,i,j,k,l,m,n;g={lang:"java",anchor:!0},d=$.extend(d,g),l=$(this),i=[],l.each(function(){i.push($(this).text())}),i=i.join(""),m=i,k=d.lang,h=function(){var b;return k=a.getLanguage(k)?k:g.lang,b=void 0,k&&0!==k.length||(b=a.highlightAuto(m)),k=k||b.language||g.lang},n=null,l.each(function(){var b,c;c=$(this).text(),b=a.highlight(k,c,!0,n),$(this).html(b.value)}),f=function(){$(".line-num").on("click",function(){var a,d,f,g,h,i,j;if(i=$(this),f=i.attr("num"),a=$("#CL"+f),$(".line-data").css({"background-color":"rgb(255, 255, 255)"}),0>e&&(e=f),event.shiftKey){if(e>0){for(j=0,d=0,h=j=Math.min(e,f),g=d=Math.max(e,f);d>=j;)a=$("#CL"+j),j++,a.css({"background-color":"rgb(255, 255, 204)"});b.hash("L"+h+"-L"+g),c.skipReload().path(b.$$path),e=Math.min(f,e)}}else b.hash("L"+f),c.skipReload().path(b.$$path),a.css({"background-color":"rgb(255, 255, 204)"}),e=f})},j=function(){var a,b,c,d,e,f,g;if(g=window.location.hash,g&&(f=/\#L(\d+)(?:\-L?(\d+))?/g.exec(g),f&&3===f.length))for(a=f[1]||-1,b=f[3]||a,e=Math.min(a,b),d=Math.max(a,b);d>=e;)c=$("#CL"+e),c.css({"background-color":"rgb(255, 255, 204)"}),e++},d.anchor&&(j(),f())},{link:function(a,b,c){var d,e,f,g;f=a.$eval(c.cgBlameLang),d=a.$eval(c.cgBlameHighlight),g=a.$eval(c.cgLineLength)||0,e=a.$eval(c.cgLineIndex)||0,b.text(d),e===g-1&&b.closest("table").find("pre").blameHighlight({lang:f})}}}])}.call(this),function(){angular.module("directives").directive("cgBlobMarkdown",["$http",function(a){var b;return b=function(b,c,d){var e,f;return e=b.$eval(d.cgBlobMarkdown),"markdown"!==e.lang?void c.html(e.data):(f="/api/markdown/preview",a.post(f,e.data).success(function(a){return c.html(a)}))},{link:b}}])}.call(this),function(){angular.module("directives").directive("cgCodeView",["hljsService","$location","location",function(a,b,c){var d,e,f,g,h,i,j,k;return d={lang:"java",anchor:!0},k=-1,h=function(a){var b;return b=document.createElement("div"),b.appendChild(document.createTextNode(a)),b.innerHTML},g=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.innerHTML},e=function(b,c){var e,f;return e=a.getLanguage(c)?c:d.lang,f=void 0,e&&0!==e.length||(f=a.highlightAuto(b)),e=e||f.language||d.lang},i=function(){var a,b,c,d,e,f,g;if(""!==window.location.hash&&(e=window.location.hash.match(/\#L(\d+)(?:\-L?(\d+))?/),c=parseInt(null!=e?e[1]:void 0),d=parseInt(null!=e?e[2]:void 0),!isNaN(c))){for(isNaN(d)&&(d=c),f=Math.max(d,c),b=g=Math.min(d,c);f>=g;)a=$("#CL"+g),a.css({"background-color":"rgb(255, 255, 204)"}),g++;a=$("#CL"+b),window.scroll(0,a.offset().top-60+36)}},f=function(a){return a.find("span.num").on("click",function(){var a,d,e,f,g,h,i;if(h=$(this),e=h.attr("num"),a=$("#CL"+e),$(".line").css({"background-color":"rgb(255, 255, 255)"}),0>k&&(k=e),event.shiftKey){if(k>0){for(i=0,d=0,g=i=Math.min(k,e),f=d=Math.max(k,e);d>=i;)$("#CL"+i).css({"background-color":"rgb(255, 255, 204)"}),i++;b.hash("L"+g+"-L"+f),c.skipReload().path(b.$$path),k=Math.min(e,k),window.scroll(0,$("#CL"+k).offset().top-60)}}else b.hash("L"+e),c.skipReload().path(b.$$path),a.css({"background-color":"rgb(255, 255, 204)"}),window.scroll(0,a.offset().top-60),k=e})},j=function(b,c,d){var e,g,j,k,l,m,n,o,p,q;g=b.$eval(d.cgCodeView),c.removeAttr("cg-code-view"),l=b.$eval(d.cgCodeLang),c.removeAttr("cg-code-lang"),q=null,k=$('<code class="'+l+'">'+h(g)+"</code>"),a.highlightBlock(k[0]),j=k.html(),n=j.split("\n"),0===n[n.length-1].length&&n.splice(n.length-1,1),m=[],e=[],o="",n.forEach(function(a,b){var c;c=b+1,a.match(/<span class="([^<]*)">((?!<\/span>).)*$/)?(o=a.match(/<span class="([^<]*)">((?!<\/span>).)*$/)[1],a+="</span>"):a.match(/<\/span>/)&&""!==o?(a="<span class='"+o+"'>"+a+"</span>",o=""):a.match(/<span/)||""===o?o="":a="<span class='"+o+"'>"+a+"</span>",m.push('<span class="num" num="'+c+'">'+c+"</span>"),e.push('<div class="line" id="CL'+c+'">'+a+"</div>")}),p=[],p.push('<table class="blob-code-view blob-code-diff">'),p.push('<tbody><tr class="blob-line">'),p.push('<td class="blob-nums">'),p.push(m.join("")),p.push('</td><td class="blob-code">'),p.push('<div class="blob-code-body"><div class="blob-body highlight"><pre>'),p.push(e.join("")),p.push("</pre></div></div>"),p.push("</td></tr>"),p.push("</tbody>"),p.push("</table>"),c.html(p.join("")),i(),f(c)},{link:j}}])}.call(this),function(){angular.module("directives").directive("cgDiffstat",function(){return{scope:{diffstat:"="},restrict:"A",replace:!0,templateUrl:"common/directives/gitDirectives/diffstat/tpl/diffstat.html"}})}.call(this),function(){angular.module("directives").directive("cgFilePath",[function(){var a,b;return b=function(b,c,d){var e,f,g,h,i,j,k;e=b.$eval(d.cgFilePath),h=b.PROJECT.project_path,j=b.$eval(d.cgRef),g="","tree"===e.mode?(g="tree",e.flatten_path&&e.flatten_path!==e.name?-1===e.path.indexOf("/")?c.attr("href",""+h+"/git/"+g+"/"+j+"/"+encodeURIComponent(e.flatten_path).replace(/%2F/g,"/")):(i=e.path.split("/"),i.pop(),c.attr("href",""+h+"/git/"+g+"/"+j+"/"+encodeURIComponent(i.join("/")+"/"+e.flatten_path).replace(/%2F/g,"/"))):c.attr("href",""+h+"/git/"+g+"/"+j+"/"+encodeURIComponent(e.path))):"git_link"===e.mode?c.attr("href",""):(g="blob",c.attr("href",""+h+"/git/"+g+"/"+j+"/"+encodeURIComponent(e.path))),c.removeAttr("cg-file-path"),c.removeAttr("cg-path"),e.flatten_path&&e.flatten_path!==e.name?(k=e.flatten_path.split("/"),f=k.pop(),c.append('<span class="flatten-path">'+a(k.join("/"))+"/</span>"+a(f)),c.attr("title",e.flatten_path)):(c.append(document.createTextNode(e.name)),c.attr("title",e.name))},a=function(a){var b;return b=document.createElement("div"),b.appendChild(document.createTextNode(a)),b.innerHTML},{link:b}}])}.call(this),function(){angular.module("directives").directive("cgRefSelectorDropdown",[function(){return{link:function(a,b,c){var d,e;return d=c.cgRefSelectorDropdown,e=c.cgSearchFocus,b.on("click",function(){$(d).dropdown("toggle"),$(e).focus(),event.stopImmediatePropagation()})}}}])}.call(this),function(){angular.module("directives").directive("cgRefsSearch",["$routeParams","Project","location","Depot",function(a,b,c,d){return{link:function(b,c,e){var f;return f=b.PROJECT,c.on("keyup",function(){var c,e,g,h;return g=$(this),h=g.val(),e=b.tab,1===e?(c=d.branches_search({username:a.username,project_name:f.name,prefix:h}),c.then(function(a){b.branches=a.data})):(c=d.tags_search({username:a.username,project_name:f.name,prefix:h}),c.then(function(a){b.tags=a.data}))})}}}])}.call(this),function(){angular.module("directives").directive("cgShowStat",[function(){return{link:function(a,b,c){var d;d=c.cgShowStat,b.on("click",function(){var a;a=b.attr("is-show")||"false","false"!==a&&a?($("."+d).slideUp(),b.attr("is-show","false")):($("."+d).slideDown(),b.attr("is-show","true"))})}}}])}.call(this),function(){angular.module("directives").directive("cgTimeAgo",[function(){var a;return a=function(a,b,c){var d,e,f,g,h;return h=new Date(a.$eval(c.cgTimeAgo)),e=new Date,d=864e5,g=e.getTime()-3*d,f=h>g?moment(h).fromNow():moment(h).format("YYYY年M月D日 h时mm分"),b.text(f),b.attr("title",moment(h).format("YYYY-M-D h:mm:ss"))},{link:a}}]),angular.module("directives").directive("cgTimeAgoDay",[function(){return{scope:{time:"=cgTimeAgoDay",showYear:"=cgTimeAgoDayWithYear"},link:function(a,b,c){var d,e,f,g,h,i;if(h=new Date(a.time),e=new Date,i=e.setHours(0,0,0,0),d=864e5,f=e.getTime()-d,h>i)g="NOW";else if(h>f)g="昨天";else{if(a.showYear)return g=moment(h).format("YYYY年<br/>M月D日"),void b.html(g);g=moment(h).format("M月D日")}return b.text(g)}}}])}.call(this),function(){angular.module("directives").directive("cgToggleMoreCommitMessage",[function(){return{link:function(a,b,c){b.click(function(){var a,c;a=b.attr("cg-toggle-more-commit-message"),c=b.attr("is-show"),"false"===c?($("#"+a).removeClass("hide").addClass("show"),b.attr("is-show","true")):($("#"+a).removeClass("show").addClass("hide"),b.attr("is-show","false"))})}}}])}.call(this),function(){angular.module("directives").directive("cgTreeInfo",["md5","Depot","$routeParams",function(a,b,c){return{link:function(d,e,f){var g,h;return d.tree_url=d.$eval(f.cgTreeInfo),d.treeinfo_url=d.tree_url.replace("/git/tree/","/git/treeinfo/"),h=d.treeinfo_url,g=h.substring(h.search("/git/treeinfo/")+14,h.length),b.treeInfo({username:c.username,project_name:c.project_name,region:encodeURIComponent(g)},function(b){return angular.forEach(b.data.infos,function(b){var c,e,f,g,h,i,j,k;e=a.createHash(b.path),j=$("#tr_"+e),b.lastCommitter?(i=j.find(".age span"),i.text(moment(new Date(b.lastCommitDate)).fromNow()),i.attr("datetime",b.lastCommitDate),i.attr("title",moment(new Date(b.lastCommitDate)).format("YYYY-M-D h:mm:ss")),k=j.find(".committer span a"),k.attr("href",b.lastCommitter.link),k.html('<img class="author-gravatar" src="'+b.lastCommitter.avatar+'" title="'+b.lastCommitter.name+'" width="20" height="20" />'),g=j.find(".message span a"),h=j.find(".name span a"),h.attr("href",b.lastCommitter.link),h.html(b.lastCommitter.name),f=d.$parent.$parent.PROJECT.project_path+"/git/commit/"+b.lastCommitId,g.attr("href",f),g.html(b.lastCommitMessage),g.find("a").length>0&&(g.contents().filter(function(){return 3===this.nodeType}).wrap('<a href="'+g.attr("href")+'"></a>'),g.parent().html(g.html())),j.find(".committer i").remove()):(0===b.submoduleUrl.length?(j.find(".content span a").remove(),j.find(".content span").html(b.name)):j.find(".content .truncate a").attr("href",b.submoduleLink),c=j.find(".committer"),0!==b.lastCommitId.length&&c.html("<code>"+b.lastCommitId.substring(0,7)+"</code>"),j.find(".message span a").text(b.submoduleUrl),j.find(".committer span i").remove())})})}}}])}.call(this),function(){angular.module("directives").directive("cgUploadFiles",["$rootScope","$routeParams","$timeout","Depot","$compile",function(a,b,c,d,e){return{restrict:"A",replace:!0,templateUrl:"common/directives/gitDirectives/uploadFiles/tpl/uploadFiles.html",link:function(a,b,c){return b.find("#upload-zone").bind("click",function(a){return b.find("#upload-files")[0].click()}),b.find("#upload-files").bind("change",function(b){var c,d,e,f,g;for(g=b.target.files,d=function(b){return a.addDroppedFile(b.name,b)},e=0,f=g.length;f>e;e++)c=g[e],d(c);return a.$apply()})}}}])}.call(this),angular.module("app").run(["$templateCache",function(a){a.put("app/about/about.html",'<div id="about_us">\n    <div class="content">\n        <section class="intro">\n            <p>CODING 是国内专业的一站式云端软件服务平台，成立于 2014 年 2 月，总部位于深圳，并于北京、上海、成都、西雅图设立分部，已获得了 IDG 和光速的两轮投资共计 1500 万美元。旗下自主研发运营 Coding.net 云端开发协作平台，累积 25 万开发者，37 万个项目。在云计算时代，把代码托管、产品演示、WebIDE 等开发工具集成到浏览器中，免除繁杂的开发环境部署，节省成本，帮助软件开发者提高生产效率，并实现 “Coding Anytime Anywhere” 的愿景。</p>\n\n            <p>2015 年 10 月，基于 Coding.net 的工具平台，CODING 推出基于云技术的软件外包平台“码市”，旨在通过云端协作以及云端外包方式的方式提高软件交付的效率，帮助软件开发行业实现高效的资源匹配。</p>\n\n            <p>Coding, 让开发更简单！</p>\n        </section>\n        <section class="contact">\n            <div class="title">\n                <span>联系我们</span>\n            </div>\n            <div>\n                <div class="link">\n                    <p><label>公司：</label>深圳市扣钉网络科技有限公司</p>\n\n                    <p><label>电话：</label>0755-23985255</p>\n\n                    <p><label>E-mail：</label><img src="https://dn-coding-net-production-static.qbox.me/static/22ca3ff299956d20b419d50ec7c29614.png"\n                                                  style="height: 20px;vertical-align: middle;opacity: 0.89;"/></p>\n\n                    <p><label>地址：</label>深圳市 · 南山区 · 科技南十二路 · 迈瑞大厦 D 座 6A</p>\n\n                    <p><label>微博：</label><a\n                            href="http://weibo.com/p/1006065153943878/home?from=page_100606&mod=TAB#place"\n                            target="_blank">Coding</a></p>\n\n                    <p><label>微信：</label><span title="扫一扫右侧二维码，关注 Coding 微信公众号">扣钉Coding</span></p>\n                </div>\n                <div class="qrcode">\n                    <img src="https://dn-coding-net-production-static.qbox.me/static/fcdf6ecd90f6022d143a5e06fbe391b8.jpg"/>\n\n                    <p>扫一扫，关注 Coding 微信公众号</p>\n                </div>\n            </div>\n        </section>\n        <section class="icons">\n            <div class="title">\n                <span>Logo & 墙纸下载</span>\n            </div>\n            <div>\n                <div class="items" ng-init="show_log = 0">\n                    <div class="thumb-box">\n                        <img src="https://dn-coding-net-production-static.qbox.me/static/d257631f59976b1fa0845c5aac413147.png" ng-mouseenter="show_log = 1"\n                             ng-mouseleave="show_log = 0" class="thumb"/>\n\n                        <div class="ui popup logo show box right center transition" ng-class="{visible:show_log==1}">\n                            <img src="https://dn-coding-net-production-static.qbox.me/static/d257631f59976b1fa0845c5aac413147.png">\n                        </div>\n                    </div>\n                    <p class="dlink">\n                        <span><a href="https://dn-coding-net-production-static.qbox.me/static/161a7eb09df0fad36b19e63c95f98f4b.jpg" target="_blank">jpg</a></span>\n                        <span><a href="https://dn-coding-net-production-static.qbox.me/static/d257631f59976b1fa0845c5aac413147.png" target="_blank">png</a></span>\n                        <span><a href="https://dn-coding-net-production-static.qbox.me/static/b15c8d25d3974704bc9d372019c48e21.svg" target="_blank">svg</a></span>\n                    </p>\n                </div>\n                <div class="items">\n                    <div class="thumb-box">\n                        <img src="https://dn-coding-net-production-static.qbox.me/static/ffc14b7be26b20b829b5c51985b07d8d.png" ng-mouseenter="show_log = 2"\n                             ng-mouseleave="show_log = 0" class="thumb"/>\n\n                        <div class="ui popup logo show box right center transition" ng-class="{visible:show_log==2}">\n                            <img src="https://dn-coding-net-production-static.qbox.me/static/ffc14b7be26b20b829b5c51985b07d8d.png">\n                        </div>\n                    </div>\n                    <p class="dlink">\n                        <span><a href="https://dn-coding-net-production-static.qbox.me/static/d0aa9dd75e2500930b9e6ef61d9bcfa0.jpg" target="_blank">jpg</a></span>\n                        <span><a href="https://dn-coding-net-production-static.qbox.me/static/ffc14b7be26b20b829b5c51985b07d8d.png" target="_blank">png</a></span>\n                        <span><a href="https://dn-coding-net-production-static.qbox.me/static/3d2b36ddcba9a90cf96e49e650bb1f26.svg" target="_blank">svg</a></span>\n                    </p>\n                </div>\n                <div class="items">\n                    <div class="thumb-box">\n                        <img src="https://dn-coding-net-production-static.qbox.me/static/7a51352fa766f4176d7c4543339e0e98.png" ng-mouseenter="show_log = 3"\n                             ng-mouseleave="show_log = 0" class="thumb"/>\n\n                        <div class="ui popup logo show box right center transition" ng-class="{visible:show_log==3}">\n                            <img src="https://dn-coding-net-production-static.qbox.me/static/7a51352fa766f4176d7c4543339e0e98.png">\n                        </div>\n                    </div>\n                    <p class="dlink">\n                        <span><a href="https://dn-coding-net-production-static.qbox.me/static/a3b9e4a7672c20f29e664f41ee8e5c71.jpg" target="_blank">jpg</a></span>\n                        <span><a href="https://dn-coding-net-production-static.qbox.me/static/7a51352fa766f4176d7c4543339e0e98.png" target="_blank">png</a></span>\n                        <span><a href="https://dn-coding-net-production-static.qbox.me/static/cb75498a0ffd36e2c694da62f1bdb86c.svg" target="_blank">svg</a></span>\n                    </p>\n                </div>\n                <div class="items">\n                    <div class="thumb-box">\n                        <img src="https://dn-coding-net-production-static.qbox.me/static/adddcfb37896b41779bc0976326cd798.png" ng-mouseenter="show_log = 4"\n                             ng-mouseleave="show_log = 0" class="thumb"/>\n\n                        <div class="ui popup logo show box right center transition" ng-class="{visible:show_log==4}">\n                            <img src="https://dn-coding-net-production-static.qbox.me/static/adddcfb37896b41779bc0976326cd798.png">\n                        </div>\n                    </div>\n                    <p class="dlink">\n                        <span><a href="https://dn-coding-net-production-static.qbox.me/static/adddcfb37896b41779bc0976326cd798.png" target="_blank">png</a></span>\n                    </p>\n                </div>\n                <div class="items">\n                    <div class="thumb-box">\n                        <img ng-src="https://dn-coding-net-production-static.qbox.me/static/459df4064623519470d2d898c2c4bc11.jpg" ng-mouseenter="show_log = 16"\n                             ng-mouseleave="show_log = 0"\n                             class="thumb"/>\n\n                        <div class="ui popup logo show box right center transition" ng-class="{visible:show_log == 16}">\n                            <img ng-src="https://dn-coding-net-production-static.qbox.me/static/459df4064623519470d2d898c2c4bc11.jpg">\n                        </div>\n                    </div>\n                    <p class="dlink">\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/d6c0b7dda1419858a04dc6637cdcba99.jpg" target="_blank">2560*1600</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/2af094a6ecc19e0577febb3537209b8e.jpg" target="_blank">2560*1440</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/343c8c11c3ce2add194a915130e4c3e2.jpg" target="_blank">1920*1200</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/bb765c69f17f318bf6d66463a243888f.jpg" target="_blank">1920*1080</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/001a685c42cb06e0c0dba7b214a05814.jpg"\n                                 target="_blank">1366*768</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/459df4064623519470d2d898c2c4bc11.jpg"\n                                 target="_blank">1280*800</a></span>\n                    </p>\n                </div>\n\n                <div class="items">\n                    <div class="thumb-box">\n                        <img ng-src="https://dn-coding-net-production-static.qbox.me/static/d579bb9f67109e915795df7bb7dcb5ee.jpg" ng-mouseenter="show_log = 17"\n                             ng-mouseleave="show_log = 0"\n                             class="thumb"/>\n\n                        <div class="ui popup logo show box right center transition" ng-class="{visible:show_log == 17}">\n                            <img ng-src="https://dn-coding-net-production-static.qbox.me/static/d579bb9f67109e915795df7bb7dcb5ee.jpg">\n                        </div>\n                    </div>\n                    <p class="dlink">\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/1dda49c12324744df9ee1984abacf66b.jpg" target="_blank">2560*1600</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/6dc8cb7de502b9cffefb75f2efa3db07.jpg" target="_blank">2560*1440</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/966a2634854051aab1e3997b51600bf1.jpg" target="_blank">1920*1200</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/d028449d191ee865bf6f173ca10c332e.jpg" target="_blank">1920*1080</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/0949c8544b691f5d807e015d85e31d0a.jpg"\n                                 target="_blank">1366*768</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/d579bb9f67109e915795df7bb7dcb5ee.jpg"\n                                 target="_blank">1280*800</a></span>\n                    </p>\n                </div>\n\n                <div class="items">\n                    <div class="thumb-box">\n                        <img ng-src="https://dn-coding-net-production-static.qbox.me/static/f832083fc2615145cf9dd98390b2b003.jpg" ng-mouseenter="show_log = 18"\n                             ng-mouseleave="show_log = 0"\n                             class="thumb"/>\n\n                        <div class="ui popup logo show box right center transition" ng-class="{visible:show_log == 18}">\n                            <img ng-src="https://dn-coding-net-production-static.qbox.me/static/f832083fc2615145cf9dd98390b2b003.jpg">\n                        </div>\n                    </div>\n                    <p class="dlink">\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/ad1e558142f8d91e522208dbe967ac70.jpg" target="_blank">2560*1600</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/abf28bf979b974e2cf2e8ac62a0757e5.jpg" target="_blank">2560*1440</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/cebc577118617649d4eb724b743342a7.jpg" target="_blank">1920*1200</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/06788eb756e0436e9f64fa2546be86b1.jpg" target="_blank">1920*1080</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/50f483057e9e51c74e85119ac69fd3a9.jpg"\n                                 target="_blank">1366*768</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/f832083fc2615145cf9dd98390b2b003.jpg"\n                                 target="_blank">1280*800</a></span>\n                    </p>\n                </div>\n\n                <div class="items">\n                    <div class="thumb-box">\n                        <img ng-src="https://dn-coding-net-production-static.qbox.me/static/122994249dec6a64db0ec9a2559247be.jpg" ng-mouseenter="show_log = 19"\n                             ng-mouseleave="show_log = 0"\n                             class="thumb"/>\n\n                        <div class="ui popup logo show box right center transition" ng-class="{visible:show_log == 19}">\n                            <img ng-src="https://dn-coding-net-production-static.qbox.me/static/122994249dec6a64db0ec9a2559247be.jpg">\n                        </div>\n                    </div>\n                    <p class="dlink">\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/2539b335cbfe58bbcc19322564ec6636.jpg" target="_blank">2560*1600</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/33ae7ec37010871fc30d779fe9038199.jpg" target="_blank">2560*1440</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/46570ad58ffe713ba4e0ecac858e9821.jpg" target="_blank">1920*1200</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/4a052565ff8dc48b58446dbb777a71b9.jpg" target="_blank">1920*1080</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/4fd1b272163e577dff6b59475267f06c.jpg"\n                                 target="_blank">1366*768</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/122994249dec6a64db0ec9a2559247be.jpg"\n                                 target="_blank">1280*800</a></span>\n                    </p>\n                </div>\n\n                <div class="items">\n                    <div class="thumb-box">\n                        <img ng-src="https://dn-coding-net-production-static.qbox.me/static/b299625a87f31f35b9c7a2c581ba1d4c.jpg" ng-mouseenter="show_log = 20"\n                             ng-mouseleave="show_log = 0"\n                             class="thumb"/>\n\n                        <div class="ui popup logo show box right center transition" ng-class="{visible:show_log == 20}">\n                            <img ng-src="https://dn-coding-net-production-static.qbox.me/static/b299625a87f31f35b9c7a2c581ba1d4c.jpg">\n                        </div>\n                    </div>\n                    <p class="dlink">\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/5c348ee8b733fde963d946c60f39c10b.jpg" target="_blank">2560*1600</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/5b16fd92d840ade30c8baab9a7ba0ed3.jpg" target="_blank">2560*1440</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/f850ad4268b8f3c48fe6acde66c4aab4.jpg" target="_blank">1920*1200</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/fdc2eaeceea6bc0c57df9ab715cdf96f.jpg" target="_blank">1920*1080</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/a214023622e24c918ee912926682e4b5.jpg"\n                                 target="_blank">1366*768</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/static/b299625a87f31f35b9c7a2c581ba1d4c.jpg"\n                                 target="_blank">1280*800</a></span>\n                    </p>\n                </div>\n\n                <div class="items">\n                    <div class="thumb-box">\n                        <img ng-src="https://dn-coding-net-production-static.qbox.me/Merry%20Christmas1280x800.png" ng-mouseenter="show_log = 21"\n                             ng-mouseleave="show_log = 0"\n                             class="thumb"/>\n\n                        <div class="ui popup logo show box right center transition" ng-class="{visible:show_log == 21}">\n                            <img ng-src="https://dn-coding-net-production-static.qbox.me/Merry%20Christmas1280x800.png">\n                        </div>\n                    </div>\n                    <p class="dlink">\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/Merry%20Christmas%202560x1600.png" target="_blank">2560*1600</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/Merry%20Christmas%202560x1440.png" target="_blank">2560*1440</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/Merry%20Christmas1920x1200.png" target="_blank">1920*1200</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/Merry%20Christmas1920x1080.png" target="_blank">1920*1080</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/Merry%20Christmas1366x768.png"\n                                 target="_blank">1366*768</a></span>\n                        <span><a ng-href="https://dn-coding-net-production-static.qbox.me/Merry%20Christmas1280x800.png"\n                                 target="_blank">1280*800</a></span>\n                    </p>\n                </div>\n            </div>\n        </section>\n        <cg-partner-link></cg-partner-link>\n        <section class="partners">\n            <div class="title">\n                <span>合作孵化器</span>\n            </div>\n            <div class="wrapper">\n                <span class="partner">\n                    <a href="http://www.people-squared.com/" target="_blank">\n                        <img ng-src="https://dn-coding-net-production-pp.qbox.me/210be33a-870b-4dbc-8add-b06f9e503ba8.png"\n                             alt="联合创业办公社">\n                    </a>\n                </span>\n                 <span class="partner">\n                    <a href="http://www.juzilab.com/" target="_blank">\n                        <img ng-src="https://dn-coding-net-production-pp.qbox.me/d4b7e695-59f5-45a4-b90b-ec5255ffff0d.jpg"\n                             alt="橘子空间">\n                    </a>\n                </span>\n                <span class="partner">\n                    <a href="http://www.3wnb.com/" target="_blank">\n                        <img ng-src="https://dn-coding-net-production-pp.qbox.me/8f724760-ec51-4e14-b5c6-fbf65ab3c482.png"\n                             alt="3W空间">\n                    </a>\n                </span>\n            </div>\n        </section>\n    </div>\n</div>\n<div ng-include="\'app/layout/global_footer/global_footer.html\'"></div>\n'),
a.put("app/about/gitsla.html",'<div id="gitsla">\n    <h1>Git 代码托管服务等级协议（SLA）</h1>\n    <hr />\n    <ol>\n        <li>\n            <strong>服务范围</strong>\n            <p>\n                Coding.net 网站（以下简称 Coding ）是由深圳市希云科技有限公司（以下简称“本公司”）\n            </p>\n            <p>\n                向付费合约期内的用户提供的 Git 代码托管业务遵从以下服务等级协议（以下简称 SLA ）：\n            </p>\n        </li>\n        <li>\n            <strong>服务等级定义</strong>\n            <ol>\n                <li>\n                    <strong>服务可用性</strong>\n                    <p>\n                        服务可用性按照服务周期统计，一个服务周期为一个自然月，如不满一个月则按一个月计算。\n                    </p>\n                    <p>\n                        可用性计算公式为：每服务周期服务的所有可用时间 /（每服务周期服务的所有可用时间＋每服务周期服务的所有不可用时间）。\n                    </p>\n                    <p>\n                        不可用时间，连续 5 分钟或更长时间不可使用服务方记为不可用时间，不可用实际低于 5 分钟的不计入不可用时间。\n                    </p>\n                    <p>\n                        Coding 承诺企业版服务的可用时间不低于 99.9% ，也就是每月的不可用时间不超过 45 分钟。\n                    </p>\n                </li>\n                <li>\n                    <strong>数据私密性</strong>\n                    <p>\n                        用户使用 Git 托管在 Coding 上的代码，文件数据，均需用户直接授权（ 密码，Oauth等 ) 方可访问，最大程度保障用户数据的私密性。Coding 运维和技术人员有权查看系统，文件操作日志，以进行异常错误的排查。 所有涉及用户隐私敏感信息的操作都会记录日志供审查。\n                    </p>\n                </li>\n                <li>\n                    <strong>数据可销毁性</strong>\n                    <p>\n                        在用户主动删除数据或用户服务期满后需要销毁数据的，Coding 将会自动清除对应服务器上的磁盘和内存数据，使得数据无法恢复。\n                    </p>\n                </li>\n                <li>\n                    <strong>数据可审查性</strong>\n                    <p>\n                        Coding 存储的数据遵守当地法律法规，用户对此有知情权。\n                    </p>\n                    <p>\n                        依据现行法律法规或政府监管部门监管、安全合规、审计或取证调查等原因需要，在符合流程和手续完备的情况下，Coding 可以提供用户所使用的服务相关信息，包括关键组件的运行日志，运维人员操作记录、用户操作记录等信息。\n                    </p>\n                </li>\n                <li>\n                    <strong>数据可靠性</strong>\n                    <p>\n                        Coding 托管的代码文件，保证每个文件都有 2 份以上的副本存储在北京、香港机房的不同服务器上，保障用户数据的可靠。\n                    </p>\n                </li>\n                <li>\n                    <strong>服务故障恢复能力</strong>\n                    <p>\n                        所有企业版的用户，均享有 9x6 的人工服务时间，响应时间不超过 5 分钟。\n                    </p>\n                    <p>\n                        我们提供在线工单和电话保障两种渠道的技术支持方式，具备完善的故障监控、自动告警、快速定位、快速恢复等一系列故障应急响应机制。\n                    </p>\n                </li>\n                <li>\n                    <strong>其它相关说明</strong>\n                    <p>\n                        其它相关说明请参照 Coding.net 主站<a href="/terms" target="_blank">《服务条款》</a>\n                    </p>\n                </li>\n            </ol>\n        </li>\n        <li>\n            <strong>服务赔偿</strong>\n            <ol>\n                <li>\n                    <strong>赔偿范围</strong>\n                    <p>\n                        若因 Coding 设计缺陷或操作不当导致用户所购买的服务无法正常使用，未能达到所承诺的服务可用性，用户有权获得赔付。\n                    </p>\n                    <p>\n                        但不包括以下原因所导致的服务不可用：\n                    </p>\n                    <article>\n                        <ul>\n                            <li>1）Coding 预先通知用户后进行的维护所引起的，包括割接、维修升级和模拟故障演练；</li>\n                            <li>2）所依赖的第三方电脑软件、系统、硬件和通讯线路出现故障；</li>\n                            <li>3）不受 Coding 直接控制的网络问题，如 DNS 服务；</li>\n                            <li>4）受到计算机病毒、木马、黑客攻击；</li>\n                            <li>5）用户或由用户授权的不当、疏忽操作所引起的；</li>\n                            <li>6）不可抗力、战争、罢工、电讯不可以用，无法得到 SLA 所提供的服务；</li>\n                            <li>7）其它非 Coding 过错、无法控制或合理预见的情况；</li>\n                        </ul>\n                    </article>\n                </li>\n                <li>\n                    <strong>赔偿方案</strong>\n                    <p>\n                        每个付费账户按照不可用时间 100 倍赔偿，赔偿仅限服务时长的补偿，且赔偿总额不超过用户支付的单个账户的费用总额。\n                    </p>\n                    <article>\n                        <ul>\n                            <li>a）Coding 将按照服务不可用时间的 100 倍赔偿，即 赔付的金额 ＝ 发生故障前一个自然日的平均每 5 分钟费用 × 服务不可用时间（每 5 分钟为一个单位）× 100 倍。</li>\n                            <li>b）服务不可用时间 ＝ 故障开始时间 - 故障结束时间，不可用时间按照每 5 分钟为单位计算，不足 5 分钟的以 5 分钟计算。</li>\n                            <li>c）赔偿只针对已购买 Coding 企业版并且在合约期内用的用户。</li>\n                            <li>d）赔偿方式 Coding 将以充值到用户账户和抵用券形式赔偿。</li>\n                            <li>e）如果用户没有使用到 24 小时，按照实际使用时长计算平均每 5 分钟的费用。</li>\n                        </ul>\n                    </article>\n                </li>\n            </ol>\n        </li>\n        <li>\n            <strong>其他</strong>\n            <p>Coding 有权根据变化适时对本服务等级协议部分服务指标作出调整，并及时在 Coding 官网发布公告或发送邮件或书面通知向用户提示修改内容。</p>\n        </li>\n    </ol>\n    <hr />\n    <p class="bottom">最后更新：2016 年 1 月 20 日</p>\n</div>\n<div ng-include="\'app/layout/global_footer/global_footer.html\'"></div>'),a.put("app/about/jobs.html",'<div id="join_us">\n    <div class="content">\n        <div class="title">Hello Coding! Hello World!</div>\n        <section>\n            <div class="describtion">\n                <p>Coding 简称“猴厂”！哦，不！其实我们是 anytime、anywhere 都抱着猴子敲代码的团队啦！</p>\n                <p>既然你在这里发现我，那一定是 Coding.net 的忠实用户吧！</p>\n                <p>先给你朵小红花，再让我向你娓娓道来我们需要怎样的你！</p>\n            </div>\n        </section>\n\n        <section>\n            <img src="https://dn-coding-net-production-static.qbox.me/static/ce5c8a52ebf3c1e5f929f55f4bce42bb.png" class="coding-emoji">\n        </section>\n\n        <section>\n            <div class="detail">\n                <div class="introduction">\n                    <img src="https://dn-coding-net-production-static.qbox.me/static/433cf1d56f27d84e546e9d63903709db.png" class="coding-office">\n\n                    <p>\n                        首先，我们的团队人手一只小猴子，就是这么任性。<br/>\n\n                        我们有宽阔、整洁、大气、上档次的办公室。<br/>\n\n                        我们有芳香四溢的咖啡、酸甜可口的各式水果、甜甜脆脆的零食，没办法，养了那么多只猴子，粮食一定是要大大的充足的。<br/>\n\n                        我们有平台、有空间，我们崇尚自由、开放，当然我们也崇尚分享，我们分享成果、分享快乐，当然还有 Money! Money! Money!<br/>\n\n                        我们也会带着猴子一起去看世界。<br/>\n\n                        我还想偷偷地告诉你，我们是男女比例最平衡的技术公司！<br/>\n\n                        <a class="pink"\n                           href=" http://mp.weixin.qq.com/s?__biz=MzA3ODUxMjMyMw==&mid=206269163&idx=1&sn=4510fb03ca3903349ebc70f0ff8b2ecf"\n                           target="_blank">「在\n                            Coding.net 工作是一番怎样的体验」</a><span class="author"> —— @wangziying</span>\n                    </p>\n\n                </div>\n\n                <div class="invite">\n                    <p class="invite-title">\n                        我们是有梦想的团队，我们是有情怀的团队，我们更是有技术的团队。\n                    </p>\n\n                    <p>\n                        猴子军团团长发话了！\n                    </p>\n\n                    <p>\n                        现招募大批小猴子！壮大队伍，一起走向 Global !\n                    </p>\n\n                    <p>\n                        表再犹豫，下面的职位总有一款适合你！\n                    </p>\n\n                    <p class="last-line">\n                        那就给她 <i class="pink">hr@coding.net</i> 发个简历呗！\n                    </p>\n                </div>\n            </div>\n        </section>\n\n        <section>\n            <div class="hiring">\n                <p class="hiring-title">正在招募</p>\n\n                <div id="job-locations">\n\n                </div>\n            </div>\n        </section>\n\n\n        <section>\n            <div class="job-area">\n                <div id="job-kinds">\n\n                </div>\n\n                <div id="job-content">\n\n                </div>\n\n            </div>\n        </section>\n    </div>\n</div>\n<div ng-include="\'app/layout/global_footer/global_footer.html\'"></div>\n\n<script type="text/javascript">\n"use strict";\n\n    var jobData = [{\n'+"        'id': 'full-stack',\n        'name': '全栈工程师',\n        'salary': '10k-20k，接受远程工作',\n        'position': 'tech',\n        'city': ['shenzhen'],\n    }, {\n        'id': 'data-scientist',\n        'name': '数据科学家',\n        'salary': '20k-30k',\n        'position': 'tech',\n        'city': ['beijing'],\n    }, {\n        'id': 'back-end',\n        'name': '后端开发工程师',\n        'salary': '20k-30k',\n        'position': 'tech',\n        'city': ['beijing'],\n    }, {\n        'id': 'android',\n        'name': 'Android 开发工程师',\n        'salary': '15-25k',\n        'position': 'tech',\n        'city': ['shenzhen'],\n    }, {\n        'id': 'mobile',\n        'name': '移动端高级开发工程师',\n        'salary': '20-35k',\n        'position': 'tech',\n        'city': ['shenzhen'],\n    }, {\n        'id': 'project-manager',\n        'name': '项目经理',\n        'salary': '6k-12k',\n        'position': 'tech',\n        'city': ['shenzhen'],\n    }, {\n        'id': 'advanced-project-manager',\n        'name': '高级项目经理',\n        'salary': '15k-25k，加项目提成，公司期权',\n        'position': 'tech',\n        'city': ['shenzhen', 'beijing', 'shanghai'],\n    }, {\n        'id': 'senior-delivery-manager',\n        'name': '资深交付经理',\n        'salary': '15k-30k，加项目提成，公司期权',\n        'position': 'tech',\n        'city': ['shenzhen'],\n    }, {\n        'id': 'seo-sem',\n        'name': 'SEO/SEM 经理',\n        'salary': '10k-20k',\n        'position': 'busi',\n        'city': ['shenzhen', 'shanghai', 'beijing', 'chengdu'],\n    }, {\n        'id': 'senior-sales-manager',\n        'name': '高级销售经理',\n        'salary': '15k-25k，加项目提成，公司期权',\n        'position': 'busi',\n        'city': ['shanghai', 'beijing'],\n    }, {\n        'id': 'product-director',\n        'name': '产品总监',\n        'salary': '20k-40k',\n        'position': 'prod',\n        'city': ['shenzhen'],\n    }, {\n        'id': 'operation-specialist',\n        'name': '运营专员',\n        'salary': '4k-6k',\n        'position': 'busi',\n        'city': ['shenzhen', 'chengdu'],\n    }];\n\n    var API = (function (window, $) {\n\n        var positionKey = {\n            'tech': '技术类岗位',\n            'prod': '产品类岗位',\n            'busi': '运营类岗位',\n        };\n\n        var positionOrder = {\n            'tech': 0,\n            'prod': 1,\n            'busi': 2,\n        };\n\n        var cityKey = {\n            'shenzhen': '深圳',\n            'shanghai': '上海',\n            'beijing': '北京',\n            'chengdu': '成都',\n        };\n\n        var positions = {};\n        jobData.forEach(function (job) {\n            job.city.forEach(function (city) {\n                if (!positions[city]) {\n                    positions[city] = [job.position];\n                } else if (positions[city].indexOf(job.position) < 0) {\n                    positions[city].push(job.position);\n                }\n            });\n        });\n        for (var city in positions) {\n            positions[city].sort(function (x, y) {\n                return positionOrder[x] > positionOrder[y];\n            });\n        };\n\n        var jobTpl = [\n            '<div>',\n                '<p class=\"job-title\">',\n                    '<span class=\"job-title-name\">{name}</span>',\n                    '<span class=\"job-title-salary\">{city} {salary}</span>',\n                '</p>',\n                '<div class=\"job-describtion\">{desc}</div>',\n                '<div class=\"hr-email\">',\n                    '<br/>请发简历到： <span class=\"pink\">hr@coding.net</span>',\n                '</div>',\n            '</div>',\n        ].join('');\n\n        var buildCityTab = function (selectedCity) {\n            var items = $('<div></div>');\n            for (var city in positions) {\n                var clazz = 'hiring-locations-label';\n                if (selectedCity === city) {\n                    clazz += ' selected';\n                }\n                var html = [\n                    '<div class=\"' + clazz + '\">',\n                        '<label>',\n                            cityKey[city],\n                        '</label>',\n                    '</div>'\n                ].join('');\n                var item = $(html);\n                item.data('city', city);\n                items.append(item);\n            };\n            return items.children();\n        };\n\n        var buildPositionsTab = function (city, currentPosition) {\n            var items = $('<div></div>');\n            $.each(positions[city], function (i, position) {\n                var clazz = 'job-kinds-label';\n                if (position === currentPosition) {\n                    clazz += ' selected';\n                }\n                var html = [\n                    '<div class=\"' + clazz + '\">',\n                        '<label>',\n                            positionKey[position],\n                        '</label>',\n                    '</div>'\n                ].join('\\n');\n                var item = $(html);\n                item.data('position', position);\n                items.append(item);\n            });\n            return items.children();\n        };\n\n        var generateJobContent = function (city, position) {\n            return jobData.filter(function (job) {\n                return job.position === position && job.city.indexOf(city) >= 0;\n            }).map(function (job) {\n                var tpl = jobTpl;\n                tpl = tpl.replace('{name}', job.name);\n                tpl = tpl.replace('{city}', cityKey[city]);\n                tpl = tpl.replace('{salary}', job.salary);\n                tpl = tpl.replace('{desc}', $('#data-' + job.id).html());\n                return tpl;\n            }).join('');\n        };\n\n        var fixCurrentPosition = function (position, city) {\n            return positions[city].indexOf(position) >= 0\n                ? position\n                : positions[city][0];\n        };\n\n        var api = {\n            buildCityTab: buildCityTab,\n            buildPositionsTab: buildPositionsTab,\n            generateJobContent: generateJobContent,\n            fixCurrentPosition: fixCurrentPosition,\n        };\n\n        return api;\n    })(window, $);\n\n    $(function () {\n\n        var $locations = $('#job-locations'),\n            $positions = $('#job-kinds'),\n            $content = $('#job-content');\n\n        var currentCity = 'shenzhen',\n            currentPosition = 'tech';\n\n        var renderCityTab = function () {\n            var cities = API.buildCityTab(currentCity);\n            $locations.html(cities);\n        };\n\n        var renderPositionTab = function () {\n            var domains = API.buildPositionsTab(currentCity, currentPosition);\n            $positions.html(domains);\n            var content = API.generateJobContent(currentCity, currentPosition);\n            $content.html(content);\n        };\n\n        renderCityTab();\n        renderPositionTab();\n\n        //events handler\n        $locations.on('click', '.hiring-locations-label', function () {\n            var self = $(this);\n            currentCity = self.data('city');\n            currentPosition = API.fixCurrentPosition(currentPosition, currentCity);\n            renderCityTab();\n            renderPositionTab();\n        });\n\n        $positions.on('click', '.job-kinds-label', function () {\n            var self = $(this);\n            currentPosition = self.data('position');\n            renderPositionTab();\n        });\n    });\n</script>\n\n<!-- html templates begin-->\n\n<script type=\"text/tpl\" id=\"data-full-stack\">\n    <div>本科，计算机相关专业，工作经验两年及以上；</div>\n    <div>熟悉 Java 常用框架，例如：Spring MVC；</div>\n    <div>熟悉基本的数据库优化策略；</div>\n    <div>熟悉基本的数据缓存技术；</div>\n    <div>有良好的编写测试用例习惯；</div>\n    <div>熟悉 React，Angular JS 或者 Vue.js 其中任何一种应用框架，并有相关大型应用开发经验；</div>\n    <div>有良好的编程习惯，对代码有一定洁癖；</div>\n    <div>拥有良好的独立解决问题的能力，同时又能很好与人协作；</div>\n    <div>熟练掌握 Git 版本控制，有良好的 Code Review 习惯；</div>\n    <div>有多人参与的开源项目维护经验者优先。</div>\n</script>\n\n<script type=\"text/tpl\" id=\"data-project-manager\">\n    <p>CODING—码市平台需要你：</p>\n    <div>评估和分析码市平台上（https://mart.coding.net）的项目需求，编写和整理项目相关文档并给出执行建议；</div>\n    <div>熟悉软件项目的开发流程、开发周期等所需资源等；</div>\n    <div>能够协调各方资源独立负责软件项目的过程，包括协调各方资源、管理项目进度；</div>\n    <div>善于总结工作中的各类问题并提出可执行的改进方案；</div>\n    <div>具有团队协作能力，与团队成员共同冲击目标。</div>\n    <p>我们希望你是：</p>\n    <div>了解并认同码市平台；</div>\n    <div>计算机或者相关专业，本科及以上学历，但学历不是一切，能力决定高度；</div>\n    <div>一年互联网行业工作经验或有互联网公司实习经验；</div>\n    <div>英语可作为日常办公语言；</div>\n    <div>喜欢与人交流，善于处理各类沟通事宜；</div>\n    <div>独立思考，自我驱动。</div>\n    <p>加入我们，你将拥有：</p>\n    <div>与一群心怀梦想的优秀小伙伴们共事，共同进步共同成长；</div>\n    <div>宽广自由的发展空间与职业规划；</div>\n    <div>愉快的工作氛围，互联网企业中绝无仅有的人文关怀；</div>\n    <div>友爱的大家庭，一起窝在沙发上吃 Lunch 看电视的温暖；</div>\n    <div>零食，团建，健身，免息小额贷款以及各种意想不到的福利。</div>\n</script>\n\n<script type=\"text/tpl\" id=\"data-advanced-project-manager\">\n    <p>岗位职责：</p>\n    <div>通过码市平台实施对外项目，具体职责如下：</div>\n    <div>评估项目前期技术实施方案；</div>\n    <div>组织与招募外部开发资源，制定项目计划；</div>\n    <div>管理开发团队与保障交付，跟踪项目风险与解决项目问题。</div>\n    <p>岗位要求：</p>\n    <div>本科以上学历，5 年以上代码编写与软件开发经验，3 年以上独立开发项目管理经验；</div>\n    <div>熟悉并精通至少一种主流开发语言框架，与主流数据库知识；</div>\n    <div>具有清晰的逻辑思维能力；</div>\n    <div>良好的沟通能力和合作精神，能适应并管理远程团队开展项目；</div>\n    <div>具备移动互联网、O2O 应用类开发项目经验优先。</div>\n</script>\n\n<script type=\"text/tpl\" id=\"data-senior-delivery-manager\">\n    <p>岗位职责：</p>\n    <div>通过码市平台为外部客户交付与管理项目，具体职责如下：</div>\n    <div>负责项目的独立接洽及拓展，维持所担当项目的客户关系；</div>\n    <div>引导与分析用户需求，制定方案与合同商务洽谈；</div>\n    <div>管理指定项目，包括但不限于：撰写项目相关文档、把控项目进度与范围，控制风险与变更。</div>\n    <div>跟踪项目执行过程，搜集过程数据，分析数据并改进项目管理流程与规范；</div>\n    <div>优化并根据项目需要调配资源，在保障质量的前提下提高项目成本效益；</div>\n    <div>协助项目经理共同完成项目相关开发任务。</div>\n    <p>岗位要求：</p>\n    <div>本科以上学历，6 年及以上 IT 外包软件行业经验；</div>\n    <div>具有需求分析、售前销售或项目管理领域 3 年以上经验；</div>\n    <div>具备良好的团队管理与协调能力，问题解决能力强；</div>\n    <div>优秀的文档撰写能力与流程导向能力，细节控制力强；</div>\n    <div>拥有 PMP 资质优先考虑。</div>\n</script>\n\n<script type=\"text/tpl\" id=\"data-product-director\">\n    <p>岗位职责：</p>\n    <div>负责 Coding 企业级产品前后台的功能设计及流程优化；</div>\n    <div>参与公司产品目标规划，负责项目产品团队的管理及运营工作，挖掘用户需求，优化用户体验，持续提升产品的产品价值和用户体验；</div>\n    <div>协调组织设计、开发、数据等各部门人员各类资源达成产品目标；</div>\n    <div>负责产品相关的跨部门、跨公司的日常沟通工作；</div>\n    <div>产品运营数据分析、配合运营、市场活动策划与执行。</div>\n    <p>岗位要求：</p>\n    <div>本科及以上学历，5 年以上大型互联网产品项目经验，2 年以上团队管理的经验，有知名项目产品经理经验者优先；</div>\n    <div>熟悉互联网、Web 端、移动客户端产品整体实现过程，包括从需求分析到产品发布，经历整个产品周期；</div>\n    <div>熟悉企业级产品流程，企业管理流程和需求；</div>\n    <div>有软件开发相关背景优先。</div>\n</script>\n\n<script type=\"text/tpl\" id=\"data-operation-specialist\">\n    <p>岗位职责：</p>\n    <div>主动熟悉公司产品，结合产品功能和用户场景，协助产品指引、帮助文档、客户培训等材料的设计撰写；</div>\n    <div>负责产品运营数据统计，为各类数据分析提供基础；</div>\n    <div>协助在线客服的运营，从客户的反馈意见中给产品提供改进建议；</div>\n    <div>产品运营活动的策划和文案撰写。</div>\n    <p>岗位要求：</p>\n    <div>对互联网平台有浓厚兴趣；</div>\n    <div>较好的文案策划能力、表达能力、逻辑思维能力；</div>\n    <div>具有跨团队沟通和协调能力，执行力强；</div>\n    <div>本科或以上学历，应届毕业生或实习生。</div>\n    <p>加入我们，你将拥有：</p>\n    <div>与一群心怀梦想的优秀小伙伴们共事，共同进步共同成长；</div>\n    <div>宽广自由的发展空间与职业规划；</div>\n    <div>愉快的工作氛围，互联网企业中绝无仅有的人文关怀；</div>\n    <div>友爱的大家庭，一起窝在沙发上吃 Lunch 看电视的温暖；</div>\n    <div>零食，团建，健身，免息小额贷款以及各种意想不到的福利。</div>\n</script>\n\n<script type=\"text/tpl\" id=\"data-seo-sem\">\n    <p>岗位职责：</p>\n    <div>负责公司产品广告投放计划制定以及日常投放，实现产品在不同推广阶段下激活量、活跃度、营收等数据指标；</div>\n    <div>负责推广相关数据分析，提取广告数据报表，分析投放效果并不断优化，定制有效的投放策略；</div>\n    <div>负责广告素材文案策划、跟进美术设计及后续优化工作；</div>\n    <div>控制账户消费金额，通过合理使用账户内资金达到预期广告效果；</div>\n    <div>优化网站内容，提升公司相关网站的排名。</div>\n    <p>岗位要求：</p>\n    <div>本科以上学历，英语四级以上；</div>\n    <div>一年以上 SEO/SEM 经验；</div>\n    <div>思路清晰，有一定的数据分析能力；</div>\n    <div>熟悉主流渠道和广告投放平台。</div>\n</script>\n\n<script type=\"text/tpl\" id=\"data-data-scientist\">\n    <div>这是一个软件行业意义深远的项目，这是个非常创新的项目，这是一个颇具挑战的项目，现在亟待数据科学家的加入！</div>\n    <div>在这里，你将会接触海量的数据，通过采集、清洗、加工以及机器学习算法，来发掘出数据的特征和商业价值！</div>\n    <p>岗位职责：</p>\n    <div>负责项目数据流的开发，包括：数据的抽取、清洗、计算以及制作报表；</div>\n    <div>参与机器学习的数学模型的开发。</div>\n    <p>岗位要求：</p>\n    <div>计算机，统计等相关专业本科及以上学历；对数据挖掘领域兴趣浓厚，能够不断的自我学习；对统计学和数据挖掘算法原理有较为深刻的理解；</div>\n    <div>熟练使用 R / SAS EM / Python 等数据挖掘工具；</div>\n    <div>熟悉 MySQL 等数据库，精通 SQL 语言；</div>\n    <div>熟悉 Kettle 等 ETL 工具；</div>\n    <div>熟悉 Linux 操作系统。</div>\n</script>\n\n<script type=\"text/tpl\" id=\"data-back-end\">\n    <p>岗位职责：</p>\n    <div>网站和平台的后台开发，负责需求分析和设计，核心代码开发和单元测试，对代码质量和进度负责；</div>\n    <div>数据管理平台的后台开发。</div>\n    <p>岗位要求：</p>\n    <div>计算机软件或相关专业，本科以上学历，5 年以上工作经验；3 年以上基于 Java 的 Web 项目开发经验，有互联网产品开发管理经验；</div>\n    <div>Java 基础扎实，良好的代码风格，重度代码洁癖。理解 Java 常用的设计模式，熟悉基于 J2EE 的相关开源技术以及框架（Spring，Struts2，ibatis，Hibernate，jsp，CXF），熟练使用 Junit (或者其他) 进行测试代码的编写；</div>\n    <div>熟悉 MySQL 数据库的开发，配置，管理，调试，熟练掌握 SQL 查询优化；</div>\n    <div>熟悉 Linux 环境以及操作，Git 的使用，熟悉 Tomcat，Apache，Nginx 等开源的服务器；</div>\n    <div>有数据挖掘、数据分析工作经验优先考虑。</div>\n</script>\n\n<script type=\"text/tpl\" id=\"data-senior-sales-manager\">\n    <p>岗位职责：</p>\n    <div>负责本区域 IT 服务业务销售（非 BPO 或人力外包）；</div>\n    <div>负责对区域内市场营销环境进行分析，制定并适时调整营销策略，确保完成任务目标；</div>\n    <div>挖掘大客户，与行业渠道销售机会，完善客户需求分析，研制可行性方案满足客户需求；</div>\n    <div>全面掌握公司产品业务与内部交付操作流程，协助交付团队完成回款，保证服务款项及时到账；</div>\n    <div>定期制定工作计划并及时回顾计划完成情况。</div>\n    <p>岗位要求：</p>\n    <div>具有 5 年以上 IT 服务（非 BPO 或人力外包）销售工作经验；</div>\n    <div>对 IT 外包服务行业领域（非 BPO 或人力外包）有深刻理解；</div>\n    <div>思维活跃，视野开阔，较强的沟通表达能力，能承受高压力的工作；</div>\n    <div>具有资深 IT 外包服务行业资源，与大客户资源者优先考虑。</div>\n</script>\n\n<script type=\"text/tpl\" id=\"data-android\">\n    <p>岗位职责：</p>\n    <div>负责码市 Android 移动端应用的开发工作；</div>\n    <p>岗位要求：</p>\n    <div>本科及以上学历，计算机或相关专业毕业，英语四级以上，精通 Java 语言；</div>\n    <div>具有 2 年以上 Android 系统开发经验，熟悉 Android 平台的架构，熟悉 Android SDK；</div>\n    <div>良好的代码阅读能力和英文阅读能力，能阅读并理解英文资料；</div>\n    <div>能够承受工作压力，较强的团队协作意识；</div>\n    <div>有 Android Market 上线应用者优先，熟悉 OpenGL ES 者优先。</div>\n</script>\n\n<script type=\"text/tpl\" id=\"data-mobile\">\n    <p>岗位职责：</p>\n    <div>负责码市移动端应用的开发工作；</div>\n    <p>岗位要求：</p>\n    <div>计算机或相关专业，本科及以上学历，英语四级以上，能熟练阅读英文文档；</div>\n    <div>具有 2 年以上 iOS/Mac 开发经验,掌握 iOS SDK 相关技术开发及应用；熟练掌握 Objective-C、Xcode 等相关技术，或者具有 2 年以上 Android 系统开发经验，熟悉 Android 平台的架构，熟悉 Android SDK；</div>\n    <div>有良好的编码习惯及对程序结构能有较好的理解；</div>\n    <div>有责任心，好学，具有团队合作精神，能承担较大工作压力；</div>\n    <div>有 App store 和 Android Market 应用上线者优先。</div>\n</script>\n\n<!-- html teplates end-->\n"),a.put("app/about/privacy.html",'<style>\n  #piracy {\n    padding: 0 40px;\n    line-height: 200%;\n    background-color: #fff;\n    width: 70%;\n    margin: 0 auto;\n  }\n  #piracy .bottom {\n    padding-bottom: 20px;\n  }\n  #piracy hr {\n    border:none;border-top:1px solid #ccc;\n  }\n  #piracy h3 {\n    text-align: center;\n    margin: 0 auto;\n    padding: 20px 0;\n    font-size: 24px;\n    line-height: 36px;\n    margin-top: 20px;\n  }\n  #piracy .first {\n    padding: 0 20px;\n  }\n  #piracy p {\n    margin: 12px 0;\n    text-indent:35px;\n    font-size: 14px;\n  }\n  #piracy ol > li {\n    font-size: 18px;\n  }\n  #piracy strong {\n    font-size: 18px;\n  }\n  #piracy ol > li > ul {\n    background-color: #f8f6f2;\n    list-style-type: none;\n    padding: 10px;\n    margin: 20px 40px;\n  }\n  #piracy ol > li > .small > li {\n    font-weight: normal;\n  }\n  #piracy ol > li > ul > li {\n    font-size: 12px;\n    font-weight: bold;\n  }\n  #piracy ol > li > ul > li > p {\n    font-size: 12px;\n    line-height: 18px;\n    font-weight: normal;\n  }\n</style>\n<div id="piracy">\n  <h3>隐私策略</h3>\n\n  <hr>\n\n  <p class="first">\n    欢迎使用 Coding —— 云端软件开发平台，包括代码托管，运行空间，质量控制，项目管理等等。Coding 由深圳市扣钉网络科技有限公司（以下简称“扣钉网络”）开发运营。\n  </p>\n\n  <p class="first">\n    我们非常重视您的隐私，专门制定了 Coding 隐私保护制度以保护您的隐私。此隐私策略适用于 Coding 所有显示此隐私策略的网站、移动应用、产品和服务收集的信息（包括可能由 Coding 离线提供的产品和服务）。此隐私策略适用于扣钉网络当前提供的所有 Coding 产品和服务。\n  </p>\n\n  <p class="first">\n    访问 Coding 的网站，或者使用或购买 Coding 提供的产品和服务，即表示您接受此隐私策略所述惯例，并同意 Coding 按照此隐私策略所述方式使用您的信息。在您使用 Coding 提供的服务前，请您仔细阅读以下声明：\n  </p>\n\n  <ol>\n    <li>\n      <strong>Coding收集的信息</strong>\n      <p>\n        Coding 可能向您收集有关您的身份、您在 Coding 上创建/加入的项目信息，以及您对 Coding 产品的个人喜好方面的信息。我们通常可能收集的身份信息包括：姓名、电子邮件地址、电话号码、IP 地址；项目信息包括：项目名称、Logo（或商标、企业标识）、项目介绍、项目相关文件、服务使用状态的相关信息，以及您在购买过程中可能会涉及到的账户信息。\n      </p>\n      <p>\n        Coding 可能会采用多种不同方式来接收和收集您的个人信息。这些方式可能包括：\n      </p>\n      <p>\n        <ul>\n          <li>\n            - 来自您的信件\n            <p>\n              您给我们发送电子邮件或写信时，可能会在邮件中提供您的项目信息、您的姓名、联系详细信息以及其他个人信息。\n            </p>\n          </li>\n          <li>\n            - 用户支持\n            <p>\n              您在打电话或发电子邮件给我们请求产品方面的技术帮助或索取有关我们产品的信息时，可能向我们提供项目和个人信息。\n            </p>\n          </li>\n          <li>\n            - 产品注册\n            <p>\n              注册 Coding 产品时，系统会要求您提供信息，以便我们将您记录为 Coding 产品的所有者，从而有助于我们为您提供服务和信息。\n            </p>\n          </li>\n          <li>\n            - 购买\n            <p>\n              如果您希望通过我们的在线支付系统订购 Coding 产品，我们将需要足够的信息才能完成您的订购，这些信息包括您企业/团队的银行账户信息，个人的信用卡信息，或者其他电子支付手段的信息。\n            </p>\n          </li>\n          <li>\n            - 简历\n            <p>\n              您为应聘 Coding 工作岗位并为此提交简历时，我们将获得您的个人信息，但我们只会将这些信息用于评估您是否有能力成为 Coding 的员工。\n            </p>\n          </li>\n        </ul>\n      </p>\n    </li>\n    <li>\n      <strong>Coding 收集信息的用途</strong>\n      <p>Coding 可能将您的个人信息用于以下用途：</p>\n      <p>\n        <ul>\n          <li>\n            - 产品注册\n            <p>\n              您注册时所提供的信息将用于创建您的 Coding 账户和项目，并且在您联系Coding 用户服务部门时， 这些信息还将协助 Coding 为您提供支持。Coding 还将使用这些信息来通知您有关您可能感兴趣的任何升级、新产品、促销或其他信息。\n            </p>\n          </li>\n          <li>\n            - 产品的使用\n            <p>\n              Coding 可能将产品使用中收集的信息用于：定期验证您对产品的使用权利；向您发送新产品/新功能升级的通知前，确认您是否正在使用该产品/功能的较早版本或者是否会对您使用 Coding 有所帮助；以及接收您从 Coding 请求获取的产品内部消息。\n            </p>\n          </li>\n          <li>\n            - 产品购买\n            <p>\n              如果您通过 Coding 的在线支付系统购买产品，Coding 将使用您的信息来处理付款并将产品购买信息发送给您。\n            </p>\n          </li>\n          <li>\n            - 内部分析\n            <p>\n              我们可能会使用您提供给我们的信息进行内部统计和分析，从而评估并增强您对Coding 网站的体验，包括通过识别您的喜好和购买意向，进行营销以及与运营和开发相关的活动。\n            </p>\n          </li>\n        </ul>\n      </p>\n    </li>\n    <li>\n      <strong>自动收集的信息</strong>\n      <p>\n        Coding 允许您存储、发送、接收、编辑、同步、共享或者以其他方式组织或管理文件和文件夹 （包括这些文件夹中存储的任何信息或数据）（以下统称“用户文件”）。 我们可能获得您在 Coding 上储存的所有用户文件的大小，因为我们需要了解您对 Coding 的实际使用情况， 但我们绝不会共享您的任何私有项目文件，也不会有针对性地备份/复制您的私有项目的任何信息和文件。\n      </p>\n    </li>\n    <li>\n      <strong>用户文件</strong>\n      <p>\n        Coding 允许您存储、发送、接收、编辑、同步、共享或者以其他方式组织或管理文件和文件夹 （包括这些文件夹中存储的任何信息或数据）（以下统称“用户文件”）。 我们可能获得您在 Coding 上储存的所有用户文件的大小，因为我们需要了解您对 Coding 的实际使用情况， 但我们绝不会共享您的任何私有项目文件，也不会有针对性地备份/复制您的私有项目的任何信息和文件。\n      </p>\n    </li>\n    <li>\n      <strong>与第三方共享信息</strong>\n      <p>\n        除非第 5 节、第 6 节另有特别规定，否则未经您同意，Coding 不会与第三方共享任何个人信息（例如，通过登录您的用户帐户并选择某选项）。\n      </p>\n      <p>\n        <ul>\n          <li>\n            - 内部运营\n            <p>\n              我们可能与独立审计师共享您向我们提供的信息，实现与我们的内部业务运营相关的收入审计目的，前提是此类审计公司必须遵守此隐私策略。\n            </p>\n          </li>\n          <li>\n            - 服务提供商\n            <p>\n              我们有时会雇用其他公司代表我们提供服务，比如处理交易、邮件的处理和寄送、提供用户支持、托管网站或者针对我们的产品或服务进行统计分析。我们有时需要将您企业/团队和个人的信息与其他公司共享，以便这些公司能够提供适用的服务。我们仅向这些公司提供其向您提供服务所需的信息，但未授权这些公司将您的信息用于Coding 之外的任何其他用途。\n            </p>\n          </li>\n        </ul>\n      </p>\n    </li>\n    <li>\n      <strong>法定披露</strong>\n      <p>\n        虽然我们会尽最大努力保护用户隐私，但当我们有理由相信只有公开个人信息才能遵循现行司法程序、法院指令或其他法律程序或者保护 Coding、Coding 用户或第三方的权利、财产或安全时，我们可能披露个人信息。\n      </p>\n    </li>\n    <li>\n      <strong>安全</strong>\n      <p>\n        我们会采取合理的实际及电子手段以及规程保障措施来保护您的企业/团队和个人信息。虽然通过因特网信息传输数据并非 100% 安全，但我们已经采取并将继续采取商业范畴内合理的努力来确保您的个人信息得到保护。\n      </p>\n    </li>\n    <li>\n      <strong>加密</strong>\n      <p>\n        Coding所有的数据都基于 SSL/HTTPS 传输，保证数据畅通且安全。严格的数据备份制度，保证每小时、每天和每周都会执行严格的数据备份工作。\n      </p>\n    </li>\n    <li>\n      <strong>COOKIE</strong>\n      <p>\n        Cookie是仅限文本的信息字符串，网站会将这些字符串传输到计算机硬盘上浏览器的 Cookie 文件中，以便网站能够记住您的身份信息以及其他详细信息。Cookie 可能由网站设置或来源自第三方，比如广告商。Cookie 本身不用于或意图用于从用户的计算机读取任何信息（Cookie 本身的内容除外）。Cookie 只是网站所使用的最初将其放置在您硬盘上的标识符。同一台服务器可以检索到 Cookie 信息的实际内容，从而标识计算机并进而根据主服务器上存储的信息自定义、跟踪或控制站点的使用情况。\n      </p>\n      <p>\n        我们可能会在 Coding 网站上使用 Cookie 。使用 Cookie，我们便能进行自动访问和使用我们网站的数据输入功能，以及在网站（如果有）上根据您的喜好或兴趣定制网站，或者自定义促销或营销活动时，关联您所进行的购买活动的在线订购信息。此外，我们还可以通过 Cookie 跟踪我们网站的使用情况，从而确定哪些功能有用或受欢迎，哪些功能并不能帮助我们有效地改进和更新我们的服务。大多数网络浏览器都会向您发出有关使用 Cookie 的提醒，或者完全拒绝接受 Cookie。您可以通过修改浏览器设置， 接受或拒绝 Cookie。但是，如果禁用 Cookie，您就不能使用此网站的各项交互功能。\n      </p>\n    </li>\n    <li>\n      <strong>链接</strong>\n      <p>\n        我们网站上可能会提供某些链接，这些链接可能指向我们选择的提供共同品牌产品的第三方或者我们认为有助于您更好地使用 Coding 服务的其他网站。 第三方网站不受此隐私策略的约束，Coding 不对这些网站处理您的个人信息的相关做法进行任何说明。建议您在开始访问这些网站之前查阅其隐私策略，确定其隐私保护惯例。\n      </p>\n    </li>\n    <li>\n      <strong>有害信息的过滤和删除</strong>\n      <p>Coding禁止用户创建和储存一切有害信息，包括：</p>\n      <ul class="small">\n        <li>（1） 违反中国宪法确定的基本原则的；</li>\n        <li>（2） 危害国家安全，泄露国家秘密，颠覆国家政权，破坏国家统一的；</li>\n        <li>（3） 损害国家荣誉和利益，攻击党和政府的；</li>\n        <li>（4） 煽动民族仇恨、民族歧视，破坏民族团结的；</li>\n        <li>（5） 破坏国家、地区间友好关系的；</li>\n        <li>（6） 违背中华民族传统美德、社会公德、论理道德、以及社会主义精神文明的；</li>\n        <li>（7） 破坏国家宗教政策，宣扬邪教和封建迷信的；</li>\n        <li>（8） 散布谣言或不实消息，扰乱社会秩序 ，破坏社会稳定的；</li>\n        <li>（9） 煽动、组织、教唆恐怖活动、非法集会、结社、游行、示威、聚众扰乱社会秩序的；</li>\n        <li>（10） 散布淫秽、色情、赌博、暴力、恐怖或者教唆犯罪的；</li>\n        <li>（11） 侮辱或诽谤他人，侵害他人合法权益的；</li>\n        <li>（12） 侵犯他人肖像权、姓名权、名誉权、隐私权或其他人身权利的；</li>\n        <li>（13） 使用漫骂、辱骂、中伤、恐吓、诅咒等不文明语言的；</li>\n        <li>（14） 以非法民间组织名义活动的；</li>\n        <li>（15） 侵犯他人著作权、信息网络传播权等合法权益的；</li>\n        <li>（16） 含有法律、行政法规禁止的其他内容的。</li>\n      </ul>\n      <p>\n        扣钉网络将针对以上信息制定过滤和屏蔽机制，如用户在 Coding 创建项目，发布信息或储存文件时不能履行和遵守协议中的规定，扣钉网络有权对违反协议的用户做出关闭账户处理，同时保留依法追究当事人法律责任的权利。此外，扣钉网络在采取移除等相应措施后不为此向原发布人承担违约责任或其他法律责任。扣钉网络依据本协议约定获得处理违法违规内容的权利，该权利不构成扣钉网络的义务或承诺，扣钉网络不能保证及时发现违法行为或进行相应处理。\n      </p>\n    </li>\n    <li>\n      <strong>信息的访问、修改和准确性</strong>\n      <p>\n        我们采取了一些合理步骤来确保我们从您那里收到的信息正确无误且始终为最新。您有权访问您的公司/团队和个人信息，来验证其准确性，并纠正不准确的信息。您可以使用电子邮件地址和密码通过Coding网站登录您的帐户并单击“个人设置”， 随时更改您的信息。您也可以通过 <img src="https://dn-coding-net-production-static.qbox.me/static/c07397bfc519f4b688852ffb2df6e618.png" style="height: 16px;vertical-align: middle;opacity: 0.89;"/> 与我们联系，访问并纠正个人信息中的错误。如果您不想获得有关产品、服务或营销计划的信息，或者希望从任何直接营销计划、企业调查、电话营销、直邮或电子邮件列表中删除您的信息，或者想限制我们对您的个人信息的使用或披露，请通过 <img src="https://dn-coding-net-production-static.qbox.me/static/c07397bfc519f4b688852ffb2df6e618.png" style="height: 16px;vertical-align: middle;opacity: 0.89;"/> 与我们联系。\n      </p>\n    </li>\n    <li>\n      <strong>业务转让</strong>\n      <p>\n        Coding收集的信息将被视作一项资产。如果 Coding、任何附属公司、部门或部分资产被另一家公司收购，则此类信息可能成为被转让资产之一。如果情况如此，收购方公司只能按照此隐私策略（或者向您收集信息时有效的任何后续策略）使用您的信息。 请注意，转让后提交或收集的信息可能必须遵守收购方公司所采用的新隐私策略。\n      </p>\n    </li>\n    <li>\n      <strong>国际传输</strong>\n      <p>\n        您的信息可能被传送到或存储在您所在国家/地区、省/市/自治区或其他政府管辖区域以外的地方，这些地方的隐私法律对您的个人信息的保护程度可能低于您所在的管辖区域。如果您位于中华人民共和国以外，您应知悉，Coding 可能将您的个人信息传输到中国并在中国进行处理。提交此类信息，即表示您同意此隐私策略，进而表示您同意进行此类传输。\n      </p>\n      <p>\n        我们始终致力于改善我们的业务和运营。因此，我们的策略将不断完善。鉴于此，Coding 保留不时修改此隐私策略的权利。对此策略的更改将发布在 Coding.net 网站上。我们欢迎您不时访问我们的隐私策略页面，来查看最新隐私策略。如果我们对此隐私策略进行实质性更改，扩展了我们使用您的公司/团队和个人信息的权利，我们将通过电子邮件或者在我们网站上的显著位置告知您并征求您的同意。\n      </p>\n    </li>\n    <li>\n      <strong>与我们联系</strong>\n      <p>\n        请将您对您的信息的任何访问请求、信息修改请求或有关此策略的问题发送至以下电子邮件地址：<img src="https://dn-coding-net-production-static.qbox.me/static/c07397bfc519f4b688852ffb2df6e618.png" style="height: 16px;vertical-align: middle;opacity: 0.89;"/>\n      </p>\n    </li>\n  </ol>\n  <hr>\n  <p class="bottom">最后更新：2014 年 6 月1日</p>\n</div>\n<div ng-include="\'app/layout/global_footer/global_footer.html\'"></div>'),a.put("app/about/security.html",'<div id="security_description">\n    <h1>Coding.net 服务安全性说明</h1>\n    <hr />\n    <p>Coding.net 是一个面向开发者和软件开发团队的专业云端开发平台（以下简称 Coding）。用户数据的安全性和隐私性是我们的核心责任。为此我们采取了以下措施保障用户数据的安全性和隐私性：\n    </p>\n    <ol>\n        <li>\n            <strong>管理制度</strong>\n            <p>Coding 通过严格的管理制度，规范产品的研发、运维、运营：</p>\n            <article>\n                <ul>\n                    <li>1）Coding 所有能接触到用户数据的相关人员均签订了符合业界标准的《保密协议》；</li>\n                    <li>2）Coding 所有人员的招聘均通过背景调查；</li>\n                    <li>3）Coding 平台拥有严格的权限管理， 私有项目内容仅限项目成员，平台不存在超级用户；</li>\n                    <li>4）Coding 所有能接触到用户数据的相关人员均接受过安全培训和考核；</li>\n                    <li>5）Coding 严格区分产品、研发、运维与运营，并拥有标准的业务流程，不存在一人身兼数职；</li>\n                    <li>6）Coding 数据库访问权限仅限于极少数核心人员，并且每次数据库以及数据文件操作均需要备案；</li>\n                    <li>7）Coding 所有服务器相关的密码至少每月更换一次，并且使用 16 位以上超复杂密码；</li>\n                    <li>8）Coding 内部有独立的安全小组，负责全面检查 Coding 系统的安全性问题，包括系统功能、服务器部署、客户端消息处理等等，每次生产系统的更新都需要经过安全小组的审查，并且记录更新内容；</li>\n                    <li>9）Coding 定期聘请外部安全专家，对 Coding 整个系统进行检查，保证系统整体的安全性；</li>\n                    <li>10）Coding 会对每次业务中断或者安全性事故出具详细的问题分析报告并提出整改措施；</li>\n                </ul>\n            </article>\n        </li>\n\n        <li>\n            <strong>加密与备份</strong>\n            <p>Coding 通过一系列加密与备份技术保障用户数据的安全性：</p>\n            <article>\n                <ul>\n                    <li>1）整站 SSL 加密，Coding 的所有内容都必须通过 SSL 加密的方式才能访问，包括与 CDN、云存储等等供用商之间的通信；</li>\n                    <li>2）数据实时备份，在同一机房，Coding 的数据库和文件都有实时热备机制，同步时间不超过 1 分钟；</li>\n                    <li>3）异地数据备份，为了防止机房故障导致的数据丢失，Coding 采取了定时异地备份 ，同步时间不超过 1 小时；</li>\n                    <li>4）对于用户要求删除的数据我们会保留 7 天后清除，Coding 不会私自保存用户的数据；</li>\n                </ul>\n            </article>\n        </li>\n\n        <li>\n            <strong>监控与响应</strong>\n            <p>Coding 拥有完备的监控和报警体系，及时发现并解决问题：</p>\n            <article>\n                <ul>\n                    <li>1）Coding 运维团队对 Coding 的所有 IT 设施进行 24x7 的监控，并且人工轮班响应；</li>\n                    <li>2）Coding 的全自动监控工具监控的内容包括：</li>\n                    <li>\n                        <ul>\n                            <li>服务器 CPU、内存、硬盘以及网络等硬件资源，报警阈值 90%；</li>\n                            <li>系统服务响应时间，包括页面访问、代码拉取和推送，报警阈值 5 秒；</li>\n                            <li>邮件、短信、推送，报警阈值 10 分钟；</li>\n                            <li>分布全国 100 个节点的连通性，报警阈值 20 分钟；</li>\n                        </ul>\n                    </li>\n                    <li>3）Coding 的服务均拥有多个实例，包括 HTTP 服务、Git 服务、邮件、短信、APP 推送、消息队列，当一个实例不可用，系统会自动启用备用实例；</li>\n                    <li>4）Coding 监控系统会通过 APP 推送、短信、邮件、电话四种方式逐级通知运维人员；</li>\n                    <li>5）Coding 监控系统的的警报不能得到及时处理时会自动对问题升级并通知更高级别的运维人员；</li>\n                </ul>\n            </article>\n        </li>\n\n        <li>\n            <strong>供应商审查</strong>\n            <p>Coding 选用的云服务商均满足以下标准：</p>\n            <article>\n                <ul>\n                    <li>1）云基础架构，数据中经过 TIA-942 标准认证；</li>\n                    <li>2）数据中心 24x7 物理隔离，并且有物理安全管控；</li>\n                    <li>3）拥有灾难恢复计划并且经过灾难恢复演示；</li>\n                    <li>4）拥有完备的防火墙和防病毒设置；</li>\n                    <li>5）拥有完备的故障报警机制，并且提供业务专员处理故障；</li>\n                    <li>6）签订正规的服务合同；</li>\n                </ul>\n            </article>\n        </li>\n\n        <li>\n            <strong>可用性承诺</strong>\n            <p>Coding 拥有完整的 SLA 服务承诺，详情请参见 <a href="https://coding.net/gitsla">https://coding.net/gitsla</a> 。</p>\n        </li>\n\n        <li>\n            <strong>违约与赔偿</strong>\n            <p>针对由于 Coding 原因造成的服务不可用或者其他违约情况，Coding 会按照以下标准赔偿：</p>\n            <article>\n                <ul>\n                    <li>1）对于 SLA 相关的赔偿请参见 <a href="https://coding.net/gitsla">https://coding.net/gitsla</a> ；</li>\n                    <li>2）对于法律法规明确包含惩罚标准的违约，Coding 会按照法律法规规定的最高标准向用户赔偿；</li>\n                    <li>3）其余违约按照双方认可的实际损失数额予以赔偿；</li>\n                </ul>\n            </article>\n        </li>\n    </ol>\n    <hr />\n    <p class="bottom">最后更新：2016 年 1 月 20 日</p>\n</div>\n<div ng-include="\'app/layout/global_footer/global_footer.html\'"></div>'),
a.put("app/about/terms.html",'<style>\n  #terms {\n    padding: 0 40px;\n    line-height: 200%;\n    background-color: #fff;\n    width: 70%;\n    margin: 0 auto;\n  }\n  #terms .bottom {\n    padding-bottom: 20px;\n  }\n  #terms hr {\n    border:none;border-top:1px solid #ccc;\n  }\n  #terms h3 {\n    text-align: center;\n    margin: 0 auto;\n    padding: 20px 0;\n    font-size: 24px;\n    line-height: 36px;\n    margin-top: 20px;\n  }\n  #terms .first {\n    padding: 0 20px;\n  }\n  #terms p {\n    margin: 12px 0;\n    text-indent:35px;\n    font-size: 14px;\n  }\n  #terms ol > li {\n    font-size: 18px;\n  }\n  #terms strong {\n    font-size: 18px;\n  }\n  #terms ol > li > ul {\n    background-color: #f8f6f2;\n    list-style-type: none;\n    padding: 10px;\n    margin: 20px 40px;\n  }\n  #terms ol > li > ul > li {\n    font-size: 12px;\n  }\n</style>\n<div id="terms">\n  <h3>服务条款</h3>\n  <hr>\n\n  <p class="first">\n    欢迎使用 Coding —— 云端软件开发平台，包括代码托管，运行空间，质量控制，项目管理等等。Coding 由深圳市扣钉网络科技有限公司（以下简称“扣钉网络”）开发运营。本服务条款是您与扣钉网络之间的协议，并在必要的时候进行修订，且无需另行通知。修订后的条款一旦在网页上公布即有效代替原来的服务条款。\n  </p>\n\n  <ol>\n    <li>\n      <strong>本网站的使用</strong>\n      <p>\n        扣钉网络许可您在您的计算机设备上浏览（使用）本网站展示的内容。您在使用 Coding 之前需要注册 Coding 的账户，同时您需要仔细阅读 Coding的《隐私策略》和《服务条款》，并在充分阅读和理解了相关协议的约定后提交必要的个人及企业/团队信息完成注册。 扣钉网络因此获取的与您个人及您企业/团队相关的任何信息均将依照《隐私策略》中的相关条款安全使用。\n  使用 Coding 是免费的，但不包括我们推出的高级/付费功能。\n      </p>\n      <p>\n        如果您有意愿使用 Coding 的某些付费服务，这将表示您同意支付其中的所有费用。在您提交使用付费产品的申请后，扣钉网络将提供经我们认可的第三方在线服务机构的支付方式，并要求您支付相关费用。成功支付后，表明您已经获得使用付费服务的权利并且已经达成此项交易，除非因扣钉网络的原因导致服务无法正常提供，否则我们将不退还您已经支付的服务费。\n      </p>\n      <p>\n        此外，由于您违反了《隐私策略》或者《服务条款》的相关规定而导致账户不可用，扣钉网络将不会退还付费产品的服务费。\n      </p>\n      <p>\n        以下行为是我们坚决反对和禁止的：\n      </p>\n      <ul>\n        <li>\n          （1） 使用Coding的通信功能发送垃圾信息、频繁骚扰其他用户和造成用户反感的行为。\n        </li>\n        <li>\n          （2） 对网站服务器进行恶意攻击， 或者采取恶意手段使用 Coding，造成服务器异常。\n        </li>\n        <li>\n          （3） 使用 Coding 从事非法活动或者为非法活动提供帮助。\n        </li>\n      </ul>\n      <p>\n        如果您采取了上述行为，我们有权终止/暂停您使用 Coding 的权利，并将视该行为引起后果的严重性追究责任，并保留通过法律途径追偿合理损失的权利。\n      </p>\n    </li>\n    <li>\n      <strong>知识产权声明</strong>\n      <p>\n        本网站，包括(但不仅限于) 文字，内容，软件，录像，音乐，声音，图形，照片，图表，美术设计，图片，名称，标识，商标和/或服务标志（包括已注册和未注册的），以及其他资料（以下简称网站内容）都受到版权法，商标法和一切知识产权公约的保护。未经扣钉网络、用户或相关权利人书面许可， 任何人不得以任何形式进行使用或创造相关衍生作品。本网站内容包括扣钉网络所有或控制下的内容和第三方所有或控制下，并授权扣钉网络使用的内容。所有代码，文章，讨论等一切构成本网站的元素都可能是受版权保护的作品。您同意遵守所有适用本网站的版权保护法律法规，以及所有本网站包含的补充性的版权说明或限制。本网站的内容均由相应的机构/个人上传、维护。对于本站内容的任何使用请遵守内容所附带的授权协议。如不清楚相应的授权协议请询问上传该内容的机构/个人。\n      </p>\n      <p>\n        任何在 Coding 上注册的账号上传的内容的版权均归上传者所有，上传者承担所有被上传内容的版权责任。扣钉网络有权在其拥有的网站上，展示上传者上传到本网站公共区域的内容。\n      </p>\n    </li>\n    <li>\n      <strong>个人信息的保护</strong>\n      <p>\n        扣钉网络尊重访问本网站的任何个人的隐私信息。当您访问本网站的时候可能被要求提供您个人的基本资料(如姓名、电子邮件、电话号码等)，您可以自行选择是否提供。对于您提供的个人信息，扣钉网络将根据中华人民共和国相关法律进行保密并严格保管，不会将这些信息以任何方式提供或展示给任何第三方，但下述情况除外：\n      </p>\n      <ul>\n        <li>\n          （一） 当司法机关或行政机关依照法定程序和法定职权要求本网站披露个人资料时，我们将依法提供相关资料。对于此情况下的任何披露，本网站均得免责；\n        </li>\n        <li>\n          （二） 对于任何由黑客攻击、计算机病毒侵入或发作、或政府管制而造成的暂时性关闭等影响网站正常运营的不可抗力事件所造成的个人资料的泄露、丢失、被盗用或被篡改等，本网站均得免责；\n        </li>\n        <li>\n          （三） 对于用户将个人密码告知他人或与他人共享注册帐号所导致的任何个人资料泄露，丢失、被盗用或被篡改等,本网站不负任何责任；\n        </li>\n        <li>\n          （四） 对于与本网站链接的任何其它网站的个人资料泄露，丢失、被盗用或被篡改等事件，本网站不负任何责任。\n        </li>\n      </ul>\n    </li>\n    <li>\n      <strong>不可抗力及免责</strong>\n      <p>\n        您理解并同意，在使用本服务的过程中，可能会遇到不可抗力等风险因素，使本服务发生中断。 不可抗力是指不能预见、不能克服并不能避免且对一方或双方造成重大影响的客观事件，包括但不限于自然灾害如洪水、地震、瘟疫流行和风暴等以及社会事件如战争、动乱、政府行为等。出现上述情况时，扣钉网络将努力在第一时间与相关单位配合，及时进行修复，但是由此给您造成的损失，扣钉网络在法律允许的范围内免责。\n      </p>\n      <p>\n        在法律允许的范围内，扣钉网络对以下情形导致的服务中断或受阻不承担责任：\n      </p>\n      <ul>\n        <li>\n          （1）受到计算机病毒、木马或其他恶意程序、黑客攻击的破坏；\n        </li>\n        <li>\n          （2）用户或扣钉网络的电脑软件、系统、硬件和通信线路出现故障\n        </li>\n        <li>\n          （3）用户操作不当\n        </li>\n        <li>\n          （4）用户通过非扣钉网络授权的方式使用本服务\n        </li>\n        <li>\n          （5）其他扣钉网络无法控制或合理预见的情形\n        </li>\n      </ul>\n      <p>\n        您理解并同意，本服务并非为某些特定目的而设计，包括但不限于核设施、军事用途、 医疗设施、交通通讯等重要领域。如果因为软件或服务的原因导致上述操作失败而带来的人员伤亡、财产损失和环境破坏等， 扣钉网络不承担法律责任。\n      </p>\n    </li>\n    <li>\n      <strong>生效与终止</strong>\n      <p>\n        使用扣钉网络的服务即视为您已阅读本协议并接受本协议的约束。扣钉网络有权在必要时修改本协议条款，您可以在相关服务页面查阅最新版本的协议条款。本协议条款变更后，如果您继续使用扣钉网络提供的软件或服务，即视为您已接受修改后的协议。 如果您不接受修改后的协议，应当停止使用扣钉网络提供的软件或服务。扣钉网络可能会对服务内容进行变更，也可能会中断、中止或终止服务。\n      </p>\n      <p>\n        如发生下列任何一种情形，扣钉网络有权不经通知而中断或终止向您提供的服务：\n      </p>\n      <ul>\n        <li>\n          （1）根据法律规定您应提交真实信息，而您提供的个人资料不真实、或与注册时信息不一致又未能提供合理证明；\n        </li>\n        <li>\n          （2）您违反相关法律法规或本协议的约定；\n        </li>\n        <li>\n          （3）按照法律规定或主管部门的要求；\n        </li>\n        <li>\n          （4）出于安全的原因或其他必要的情形。\n        </li>\n        </ul>\n      <p>\n        若您使用了扣钉网络提供的付费服务，但您未按时足额付费，扣钉网络有权中断、中止或终止提供相关服务。\n      </p>\n    </li>\n    <li>\n      <strong>准据法和管辖权</strong>\n      <p>\n        本网站内容及本使用条款的解释和适用均适用中华人民共和国法律，由于使用本网站而产生的一切纠纷，除另有约定，均由中华人民共和国(扣钉网络所在地)人民法院管辖。如果本使用条款中的部分条款被有关机关认定为无效，则此无效部分并不影响本使用条款其他部分的效力，其他部分仍然有效。\n      </p>\n    </li>\n    <li>\n      <strong>其他</strong>\n      <p>\n        如果您对本协议或本服务有意见或建议，可与扣钉网络客户服务部门联系，联系方式为：<img src="https://dn-coding-net-production-static.qbox.me/static/c07397bfc519f4b688852ffb2df6e618.png" style="height: 16px;vertical-align: middle;opacity: 0.89;"/> ，我们会给予您必要的帮助。\n      </p>\n    </li>\n  </ol>\n  <hr>\n  <p class="bottom">最后更新：2014年6月1日</p>\n</div>\n<div ng-include="\'app/layout/global_footer/global_footer.html\'"></div>'),a.put("app/about/vip.html",'<div id="vip" class="vip-container">\n    <h2 class="vip-title">Coding 会员  —— 为专业的独立开发者服务</h2>\n    <div class="vip-summary">\n        Coding 公开项目不限制项目数量，所有公开项目相关功能将继续免费。\n    </div>\n    <div class="vip-panels">\n        <div class="vip-panel">\n            <div class="vip-panel-title">普通会员</div>\n            <div class="vip-panel-brand">\n                <img src="https://dn-coding-net-production-static.qbox.me/static/d11def3f0f2ae45c466cdc9537ef9f81.png" alt="普通会员" width="80" />\n            </div>\n            <ul class="vip-features">\n                <li>\n                    <i class="check icon"></i>\n                    2 个私有项目数\n                    <a class="vip-footnote-anchor" href="#footnote"><sup>1</sup></a>\n                </li>\n                <li>\n                    <i class="check icon"></i>\n                    128M Git 仓库容量\n                </li>\n            </ul>\n            <div class="vip-panel-footer">\n                <div class="vip-cost">免费</div>\n                <a ng-href="/user">\n                    <button class="ui blue button">马上使用</button>\n                </a>\n            </div>\n        </div>\n        <div class="vip-panel">\n            <div class="vip-panel-title">银牌会员</div>\n            <div class="vip-panel-brand">\n                <img src="https://dn-coding-net-production-static.qbox.me/static/c200dd0ba894c2ba188fc4d1e0e898ce.png" alt="银牌会员" width="80" />\n            </div>\n            <ul class="vip-features">\n                <li>\n                    <i class="check icon"></i>\n                    5 个私有项目数\n                </li>\n                <li>\n                    <i class="check icon"></i>\n                    256M Git 仓库容量\n                </li>\n                <li>\n                    <i class="check icon"></i>\n                    Pages 自定义域名\n                    <a class="vip-footnote-anchor" href="#footnote"><sup>2</sup></a>\n                </li>\n            </ul>\n            <div class="vip-panel-footer">\n                <div class="vip-cost-message">只需完善个人信息</div>\n                <div class="vip-cost">免费</div>\n                <a ng-href="/user/account/setting">\n                    <button class="ui green button">马上升级</button>\n                </a>\n            </div>\n        </div>\n        <div class="vip-panel">\n            <div class="vip-panel-title">金牌会员</div>\n            <div class="vip-panel-brand">\n                <img src="https://dn-coding-net-production-static.qbox.me/static/c9d0438d421735fb98ae66c50db6a5ae.png" alt="金牌会员" width="80" />\n            </div>\n            <ul class="vip-features">\n                <li>\n                    <i class="check icon"></i>\n                    100 个私有项目数\n                </li>\n                <li>\n                    <i class="check icon"></i>\n                    1G Git 仓库容量\n                </li>\n                <li>\n                    <i class="check icon"></i>\n                    免费 Pages 自定义域名\n                </li>\n                <li>\n                    <i class="check icon"></i>\n                    独立代码区\n                    <a class="vip-footnote-anchor" href="#footnote"><sup>3</sup></a>\n                </li>\n            </ul>\n            <div class="vip-panel-footer">\n                <div class="vip-cost">\n                    <sup>&yen;</sup>199<sub>/年</sub>\n                </div>\n                <a class="ui green button" ng-href="/user/account/upgrade">马上升级</a>\n            </div>\n        </div>\n        <div class="vip-panel">\n            <div class="vip-panel-title">钻石会员</div>\n            <div class="vip-panel-brand">\n                <img src="https://dn-coding-net-production-static.qbox.me/static/18527ec33fc9d70c263f9a9c2bca60ad.png" alt="钻石会员" width="80" />\n            </div>\n            <ul class="vip-features">\n                <li>\n                    <i class="check icon"></i>\n                    无上限私有项目数\n                </li>\n                <li>\n                    <i class="check icon"></i>\n                    5G Git 仓库容量\n                </li>\n                <li>\n                    <i class="check icon"></i>\n                    免费 Pages 自定义域名\n                </li>\n                <li>\n                    <i class="check icon"></i>\n                    独立代码区\n                </li>\n                <li>\n                    <i class="check icon"></i>\n                    团队功能\n                </li>\n            </ul>\n            <div class="vip-panel-footer">\n                <div class="vip-cost"><sup>&yen;</sup>699<sub>/年</sub></div>\n                <a class="ui green button" ng-href="/user/account/upgrade">马上升级</a>\n            </div>\n        </div>\n    </div>\n\n    <div class="enterprise-ad">\n        <div class="enterprise-ad-title">\n            如果您的项目人数或团队人数超过 20 人，欢迎试用\n            <a class="enterprise-entry" href="https://e.coding.net/">Coding 企业版</a>\n        </div>\n        <div class="enterprise-features">\n            <div>\n                <div>\n                    <i class="check icon"></i>\n                    无上限项目数\n                </div>\n                <div>\n                    <i class="check icon"></i>\n                    无上限存储空间\n                </div>\n            </div>\n            <div>\n                <div>\n                    <i class="check icon"></i>\n                    专享高速独立带宽\n                </div>\n                <div>\n                    <i class="check icon"></i>\n                    无需专人部署和维护的云端服务\n                </div>\n            </div>\n            <div>\n                <div>\n                    <i class="check icon"></i>\n                    一对一工程师培训服务\n                </div>\n                <div>\n                    <i class="check icon"></i>\n                    按需物理介质安全备份配送\n                </div>\n            </div>\n        </div>\n        <div class="enterprise-price"><sup>&yen;</sup>365<sub>/人/年</sub></div>\n        <a href="https://e.coding.net/">\n            <button class="ui blue button">开始免费试用</button>\n        </a>\n    </div>\n\n    <div id="footnote" class="vip-footnote">\n        <div>注：</div>\n        <div>\n            <div>\n                1. 私有项目数量超出限额后，无法再新建私有项目，已有项目依旧可用。\n            </div>\n            <div>\n                2. 银牌会员 的 Pages 自定义域名，可通过 Hosted on Coding Pages 免费获得。\n            </div>\n            <div>\n                3. 金牌会员和钻石会员的代码仓库将托管在独立、高速、稳定的服务器上。\n            </div>\n        </div>\n    </div>\n</div>\n<div ng-include="\'app/layout/global_footer/global_footer.html\'"></div>\n'),a.put("app/attachment/attachment.html",'<style type="text/css">\n#inner-menu{width:240px;}\n#inner-menu .count{position: absolute;right: 28px;}\n#inner-menu > .no-defaults > .folder.no-default.editing .count{display:none;}\n#inner-menu > .no-defaults > .folder.item i.action.icon{cursor:pointer;margin:0 0 0 3px;display:none;}\n#inner-menu >  .no-defaults > .folder.active.item:hover i.action.icon{display:inline;}\n#inner-menu >  .no-defaults > .folder.active.item i.action.edit.icon:hover{color:cornflowerblue;}\n#inner-menu > .no-defaults > .sub_folders > .folder.item.sub_item.editing > .count{display: none}\n#inner-menu > .no-defaults > .folder.no-default.editing .count{display:none;}\n#inner-menu > .no-defaults > .folder.item i.action.icon{cursor:pointer;margin:0 0 0 3px;display:none;}\n#inner-menu >  .no-defaults > .folder.active.item:hover i.action.icon{display:inline;}\n#inner-menu >  .no-defaults > .folder.active.item i.action.edit.icon:hover{color:cornflowerblue;}\n#inner-menu > .no-defaults > .sub_folders > .folder.item i.action.icon{cursor:pointer;margin:0 0 0 3px;display:none;}\n#inner-menu > .no-defaults > .sub_folders > .folder.item.sub_item:hover i.action.icon{display:inline}\n#inner-menu > .no-defaults > .sub_folders > .folder.item.sub_item:hover i.action.edit.icon:hover{color:cornflowerblue;}\n#inner-menu .folder .folder-editor{\n    width: 130px;\n    position: absolute;\n    top: -6px;\n    left: 18px;\n    outline: none;\n    border: 1px solid #ddd;\n    padding: 3px;\n}\n#inner-menu .sub_folders {\n    background: rgba(0,0,0,.03);\n}\n#inner-menu .item {\n    margin: 0;\n    padding: 11px 8px 11px 22px;\n    cursor: pointer;\n    position: static;\n    font-size: 14px;\n    line-height: 1.2em;\n}\n#inner-menu .item.active {\n    box-shadow: none;\n}\n#inner-menu > .folder.item.default-folder > i {\n    float:none;\n    margin:0px 4px 0px 0px;\n}\n#inner-menu > .no-defaults > .sub_folders > a.item.sub_item {\n    margin:6% 14%;\n    padding:3% 16%;\n    border:1px dashed #CCC;\n    background: #fff;\n    font-size:12px;\n    display: inline-block;\n    text-align: center;\n    width: 74%;\n}\n#inner-menu .edit_mode {\n    position: relative;\n    display: inline-block;\n    height: 16px;\n}\n#inner-menu > .folder.item.shared > i {\n    float:none;\n    margin:0px 4px 0px 0px;\n    opacity: 1;\n}\n#inner-menu .item.shared {\n    font-size: 15px;\n}\n.header-icon {\n    opacity: 1;\n}\n.ui.divider {\n    margin: 12px 0;\n}\n#inner-menu > .no-defaults > .sub_folders > .folder.item.sub_item.open{color:#000;}\n</style>\n<div class="ui secondary vertical fixed menu active" id="inner-menu">\n    <header class="header item">\n        <span ng-if="current_app == \'project\'">项目文件</span>\n        <span ng-if="current_app == \'group\'">群组文件</span>\n    </header>\n    <div class="folder item shared" href="javascript:void(0);" ng-click="loadSharedFiles()" style="border-radius:0" ng-class="{active: folder_id == \'shared_files\'}">\n        <i class="coding coding-share icon green header-icon"></i>分享中\n        <span class="count">({{shared_files_count || 0}})</span>\n    </div>\n    <div class="ui divider"></div>\n    <div class="folder item default-folder" href="javascript:void(0);" ng-click="openFolder(0, $event);" ng-class="{active: folder_id == \'default\'}" style="border-radius:0">\n        <i class="folder icon" ng-class="{open: folder_id == \'default\'}"></i>默认文件夹\n        <span class="count">({{default_folder_count || 0}})</span>\n    </div>\n    <div ng-repeat="folder in folders" class="no-defaults">\n        <div class="folder item no-default"\n           id="edit-folder-{{folder.file_id}}"\n           ng-class="{active: current_folder.file_id == folder.file_id, editing: !!folder.editing}"\n           ng-click="openFolder(folder, $event);"\n           cg-not-click="folder.editing && updateFolderName(folder);"\n           not-click-class="#edit-folder-{{folder.file_id}}, #edit-folder-{{folder.file_id}} *"\n           not-click-when="folder.editing">\n            <span ng-show="!folder.editing"\n                  class="ellipsis"\n                  style="width: 156px;display: inline-block;">\n                <i class="folder icon"\n                   ng-class="{open: current_folder.file_id == folder.file_id}"\n                   data-position="top center"\n                   data-variation="inverted"\n                   data-html="{{folder.name}}"\n                   cg-popup></i>\n                <span ng-bind-html="folder.name"></span>\n            </span>\n            <span ng-show="folder.editing" class="edit_mode">\n                <i class="folder icon" ng-class="{open: folder_id == folder.file_id}" style="margin-right:0;"></i>\n                <input id="folder-editor-{{folder.file_id}}" ng-model="folder.name" class="ui input folder-editor" cg-enter="updateFolderName(folder);"/>\n            </span>\n            <i ng-hide="!folder.editing" class="action red trash icon" ng-click="removeFolder($event, folder);"></i>\n            <i ng-hide="folder.editing" class="action edit icon" ng-click="setFolderEditable($event, folder);" data-position="top center" data-variation="inverted" data-html="编辑文件夹" cg-popup></i>\n            <span class="count">({{folder.count || 0}})</span>\n        </div>\n        <div class="sub_folders" ng-if="current_folder.file_id == folder.file_id && folder.show_sub !== false">\n            <span class="folder item sub_item" ng-repeat="sub_folder in folder.sub_folders"\n                  id="edit-folder-{{sub_folder.file_id}}"\n                    ng-class="{editing: !! sub_folder.editing, open: current_sub_folder.file_id == sub_folder.file_id}"\n                    ng-click="openFolder(sub_folder, $event, true)"\n                    cg-not-click="sub_folder.editing && updateFolderName(sub_folder)"\n                    not-click-class="#edit-folder-{{sub_folder.file_id}}, #edit-folder-{{sub_folder.file_id}} *"\n                    not-click-when="sub_folder.editing">\n                <span ng-show="!sub_folder.editing"\n                      style="margin-left:8px;">\n                    <i class="folder icon"\n                       ng-class="{open: current_sub_folder.file_id == sub_folder.file_id}"\n                       data-position="top center"\n                       data-variation="inverted"\n                       data-html="{{sub_folder.name}}"\n                       cg-popup></i>\n                    <span class="ellipsis" style="display:inline-block;width:120px;">{{sub_folder.name}}</span>\n                </span>\n                <span ng-show="sub_folder.editing" class="edit_mode" style="margin-left:8px;">\n                    <i class="folder icon" ng-class="{open: current_sub_folder.file_id == sub_folder.file_id}" style="margin-right:0;"></i>\n                    <input id="folder-editor-{{sub_folder.file_id}}" ng-model="sub_folder.name" style="width: 122px;"\n                           class="ui input folder-editor" cg-enter="updateFolderName(sub_folder);"/>\n                </span>\n                <i ng-hide="!sub_folder.editing" class="action red trash icon" ng-click="removeFolder($event, sub_folder, true);"></i>\n                <i ng-hide="sub_folder.editing" class="action edit icon" ng-click="setFolderEditable($event, sub_folder);"></i>\n                <span class="count">({{sub_folder.count || 0}})</span>\n            </span>\n            <a class="item sub_item" ng-show="!editing && current_folder.file_id == folder.file_id"\n               ng-click="createFolder(folder.file_id);">\n                <i class="add icon"></i>添加子文件夹\n            </a>\n        </div>\n    </div>\n    <a class="item" ng-if="folder_loading">\n        <i class="loading icon"></i>正在加载文件夹...\n    </a>\n    <a class="item" id="create_folder" ng-show="!editing" ng-click="createFolder(0);" style="margin: 10px 23px;">\n        <i class="add icon"></i>添加文件夹\n    </a>\n    <div class="scroll-holder"></div>\n</div>\n\n<div class="container" id="attachment" ng-include="current_template">\n</div>\n<div class="ui page dimmer" id="attachment_dragenter">\n    <div class="content" style="box-sizing: border-box; padding: 50px">\n        <div class="content" style="border: 2px dashed #fff;">\n            <div class="center">\n                <span style="font-size: 24px;;line-height: 40px;"><i class="upload cloud icon"></i><span>将文件上传至此目录！</span><br/><span>支持所有文件格式，单个文件不超过300M。</span></span>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("app/attachment/create.html",'<cg-file-editor\n        cg-file-editor-project-id="PROJECT.id"\n        cg-file-editor-file-id="file_id"\n        cg-file-editor-view="detail"\n        cg-file-editor-type="editor_type"\n        cg-file-editor-action="action">\n</cg-file-editor>'),a.put("app/attachment/list.html",'<div class="coding ui dividing header">\n    <div class="actions" id="edit_action">\n        <div>\n            <a class="ui default green button" href="javascript:void(0);" id="upload-attachment" cg-trigger-upload="upload($callback)">\n                <i class="icon" ng-class="{loading: uploading, \'cloud upload\': !uploading}"></i>上传\n            </a>\n            <div class="ui simple dropdown item add">\n                <div class="menu" ng-init="project_path = PROJECT.project_path">\n                    <a class="item" ng-href="{{project_path}}/attachment/{{folder_id}}/create/txt">TXT</a>\n                    <a class="item" ng-href="{{project_path}}/attachment/{{folder_id}}/create/md">Markdown</a>\n                </div>\n                <a class="ui default blue button item">\n                    <i class="add icon"></i>创建...\n                </a>\n            </div>\n        </div>\n    </div>\n    <div>\n        <span ng-bind-html="current_folder.name && !in_sub ? current_folder.name : current_sub_folder.name ? current_sub_folder.name : \'默认文件夹\'"></span>\n        <span style="font-size:14px;color:#333;" ng-show="hasSelected()">（已选 {{selected_file_count}} 个文件）</span>\n    </div>\n</div>\n<form file-upload="projectAttachmentZoneUploadSetting">\n    <table class="ui basic table project-attachments">\n        <thead>\n            <tr class="attachment" ng-if="!hasSelected()">\n                <td class="checkbox" ng-click="checkAll()">\n                    <i class="icon" ng-class="{\'empty checkbox\': !check_all, \'checkmark sign\': check_all}"></i>\n                </td>\n                <td>文件名</td>\n                <td>文件ID</td>\n                <td>大小</td>\n                <td>创建者</td>\n                <td>更新时间</td>\n            </tr>\n            <tr class="attachment" ng-if="hasSelected()">\n                <td class="checkbox">\n                    <span ng-click="checkAll()">\n                        <i class="icon" ng-class="{\'empty checkbox\': !check_all, \'checkmark sign\': check_all}"></i>\n                    </span>\n                </td>\n                <td colspan="6">\n                    <div class="ui dropdown item add" id="move-folder" cg-dropdown ng-show="folders.length>0">\n                        <div class="menu" style="width:210px;height:350px!important;overflow-y: auto;">\n                            <div class="item" href="javascript:void(0);" ng-click="moveFileTo(0);" ng-show="folder_id !== \'default\' && folder_id != 0">\n                                <i class="folder icon"></i>默认文件夹\n                            </div>\n                            <div class="no-defaults" ng-repeat="folder in folders">\n                                <div class="item" ng-class="{current:current_folder.file_id == folder.file_id && !in_sub}"\n                                     ng-click="moveFileTo(folder.file_id);">\n                                    <span><i class="folder icon"></i>{{folder.name}}</span>\n                                </div>\n                                <div class="item sub_item" ng-class="{current:current_sub_folder.file_id == sub_folder.file_id && in_sub}"\n                                     ng-repeat="sub_folder in folder.sub_folders"\n                                     ng-click="moveFileTo(sub_folder.file_id);">\n                                    <span><i class="folder icon"></i>{{sub_folder.name}}</span>\n                                </div>\n                            </div>\n                        </div>\n                        <a class="ui default white button item">\n                            <i class="folder icon"></i>移动到...\n                        </a>\n                    </div>\n                    <a class="ui default white button item"\n                       ng-if="isExpActive(\'zip-download\', false)"\n                       ng-click="zipDownload();">\n                        <i class="cloud download icon"></i>打包下载\n                    </a>\n                    <a class="ui default red button" href="javascript:void(0);" ng-click="deleteSelected();">\n                        <i class="trash icon"></i>删除\n                    </a>\n                </td>\n            </tr>\n        </thead>\n        <tbody>\n            <tr class="attachment uploading" ng-repeat="file in uploading_files">\n                <td class="checkbox"></td>\n                <td class="filename ellipsis" width="300px">\n                    <a cg-file-icon-src="file.preview" cg-file-icon="suffix(file.name)"></a>\n                    <span class="ellipsis" title="{{file.name}}">{{showFilenameEllipsis(file)}}</span>\n                </td>\n                <td class="id">#{{file.number}}</td>\n                <td class="size">{{file.size | bytes:2}}</td>\n                <td class="uploader ellipsis">\n                    <img class="ui circular image" ng-src="{{USER.avatar}}" width="32" height="32"/>{{USER.name}}\n                </td>\n                <td class="time">\n                    几秒前\n                </td>\n                <td class="process">\n                    <div ng-show="!file.fail" file-upload-progress="file.progress" style="font-size:12px;">\n                        <i class="loading icon"></i>{{num}}%\n                    </div>\n                    <a ng-show=\'file.fail\' class="red">上传失败！</a>\n                </td>\n            </tr>\n            <tr class="attachment" ng-repeat="file in files" ng-class="{white: file.editing, canWhiteSelect: hasSelected()}">\n                <td class="checkbox">\n                    <i class="icon" ng-class="{\'empty checkbox\': !file.editing, \'checkmark sign\': file.editing}" ng-click="selectFile(file)"></i>\n                </td>\n                <td class="filename ellipsis" width="300px" ng-click="hasSelected() && selectFile(file)">\n                    <a cg-file-icon-src="file.preview" cg-file-icon="file.fileType" ng-click="previewFile(file, $event)"></a>\n                    <span class="ellipsis" title="{{file.name}}" ng-click="previewFile(file, $event)">{{showFilenameEllipsis(file)}}</span>\n                </td>\n                <td class="id" ng-click="hasSelected() && selectFile(file)">#{{file.number}}</td>\n                <td class="size" ng-click="hasSelected() && selectFile(file)">{{file.size | bytes:2}}</td>\n                <td class="uploader ellipsis" ng-click="hasSelected() && selectFile(file)">\n                    <a ng-href="{{file.owner.path}}">\n                        <img class="ui circular image" ng-src="{{file.owner.avatar}}" width="32" height="32"/>{{file.owner.name}}\n                    </a>\n                </td>\n                <td class="time" ng-click="hasSelected() && selectFile(file)">\n                    <span cg-friendly-time="file.updated_at"></span>\n                </td>\n                <td class="action" ng-click="hasSelected() && selectFile(file)">\n                    <a href="/api/project/{{PROJECT.id}}/files/{{file.file_id}}/download" target="_self"><i class="cloud download icon" data-position="top center" data-variation="inverted" data-html="下载" cg-popup></i></a>\n                    <a ng-href="{{ detailPath(PROJECT, file) }}"><i class="external url icon" data-position="top center" data-variation="inverted" data-html="查看详情" cg-popup></i></a>\n                    <a class="tool-button gray" href="javascript:void(0)"><i id="shared_icon" class="coding coding-share icon" cg-share="file.share" object="file" type="0" ng-class="{green: file.share}"></i></a>\n                    <a href="javascript:void(0);" ng-click="editFile(file);" ng-if="editable(file)"><i class="cloud edit icon" data-position="top center" data-variation="inverted" data-html="编辑文件" cg-popup></i></a>\n                    <a href="javascript:void(0);" ng-click="deleteFile(file);" ng-if="(USER | isOwnerOf: file) || (file | isRole: ADMIN)"><i class="remove-file red minus sign alternate icon" data-position="top center" data-variation="inverted" data-html="删除文件" cg-popup></i></a>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n    <div class="empty center list" ng-if="files_loading">\n        <i class="loading icon"></i>正在加载文件列表...\n    </div>\n    <div class="center" cg-pager="{{attachment_pager_id}}"></div>\n    <input id="upload-zone" type="file" name="file" multiple>\n    <div class="empty center list file-upload-zone"  cg-trigger-upload="upload($callback);">\n        <span ng-show="!uploading">\n            <span style="font-size:16px;line-height: 40px;"><i class="upload cloud icon"></i><span ng-if="files.length==0">还未上传任何文件，</span><span>点击或将文件拖拽至此页面上传！</span><br/></span><span>支持所有文件格式，单个文件不超过300M。</span>\n        </span>\n        <span ng-show="uploading">\n            <span file-upload-progress="upload_progress">\n                <i class="loading icon"></i>正在上传（{{num}}%）!\n            </span>\n        </span>\n    </div>\n</form>\n\n<div class="ui large modal attachment-preview-modal"\n     style="width: 1100px;\n            position: absolute;\n            left: 50%;\n            margin-left: -550px"\n     ng-controller="AttachmentPreviewModal"\n     cg-modal="attachment_preview_modal"\n     ng-include="\'app/attachment/modal/tpl/attachment-preview-modal.html\'">\n</div>\n'),a.put("app/attachment/modal/tpl/attachment-preview-modal.html",'<i class="icon close"></i>\n<div>\n    <div class="flex-box project-file-viewer" ng-class="{\'editing\': mode === \'edit\' && editable(current_file)}">\n        <div class="modal-preview-button" cg-prev-and-next="onImageNavChange($event);">\n            <a class="prev" href="javascript:void(0)" ng-if="image_preview.prevId>0 && mode != \'edit\'" ng-click="changeFileId(image_preview.prevId);"><i class="angle left icon"></i></a>\n            <a class="next" href="javascript:void(0)" ng-if="image_preview.nextId>0 && mode != \'edit\'" ng-click="changeFileId(image_preview.nextId);"><i class="angle right icon"></i></a>\n        </div>\n\n        <div style="width: 780px;"  ng-if="mode == \'preview\' || mode == \'edit\' && !editable(current_file)">\n            <div class="current-file-name" ng-if="!file_name_editing" title="{{current_file.name}}">{{current_file.name}}</div>\n            <div class="ui small action input attachment-modal-rename" ng-if="file_name_editing">\n                <input type="text" ng-model="current_file.readName"\n                        id="modal-edit-file-name-{{current_file.file_id}}"\n                        cg-not-click="file_name_editing && renameFile(current_file)"\n                        not-click-class="#modal-edit-file-name-{{current_file.file_id}}, #modal-edit-file-name-{{current_file.file_id}} *"\n                        not-click-when="file_name_editing"\n                        cg-enter="renameFile(current_file)"/>\n                <a class="ui green small button" style="cursor: default">.{{current_file.fileType}}</a>\n            </div>\n            <cg-file-previewer cg-disable-scroll\n                   class="attachment-preview-modal-previewer"\n                   ng-class="{\'preview-image-background\': getFileType(current_file) == \'image\' || getFileType(current_file) == \'text\'}"\n                               ng-if="mode == \'preview\' || mode == \'edit\' && !editable(current_file)"\n                   cg-file-previewer-project-id="file_info.project.id"\n                   cg-file-previewer-file-id="file_info.file_id"\n                   cg-file-previewer-view="modal"></cg-file-previewer>\n        </div>\n        <cg-file-editor style="width: 780px" ng-if="mode == \'edit\' && editable(current_file)"\n                cg-file-editor-project-id="file_info.project.id"\n                cg-file-editor-file-id="file_info.file_id"\n                cg-file-editor-view="modal"\n                cg-file-editor-type="editor_type"\n                cg-file-editor-mode="mode"\n                class="attachment-preview-modal-editor"></cg-file-editor>\n        <div class="file-pane" style="width: 320px;">\n            <cg-file-toolbar\n                cg-file-toolbar-mode="mode"\n                cg-file-toolbar-file="current_file"\n                cg-file-toolbar-folder-id="file_info.folder_id"\n                cg-file-toolbar-project="file_info.project"></cg-file-toolbar>\n            <div class="file-inner-pane">\n                <div class="ui tabular menu">\n                    <a class="item"\n                       ng-class="{\'active\': inner_menu == \'activity\'}"\n                       ng-click="switchInnerMenu(\'activity\')">\n                        <i class="chat outline icon"></i>动态</a>\n                    <a class="item"\n                       ng-class="{\'active\': inner_menu == \'history\'}"\n                       ng-click="switchInnerMenu(\'history\')">\n                        <i class="undo icon"></i>历史版本</a>\n                </div>\n                <cg-file-activities ng-if="inner_menu === \'activity\'"\n                    cg-file-activities-project="file_info.project"\n                    cg-file-activities-user="USER"\n                    cg-file-activities-file-id="file_info.file_id"\n                    cg-file-activities-file="current_file"\n                    cg-file-activities-view="modal"></cg-file-activities>\n                <cg-file-histories ng-if="inner_menu === \'history\'"\n                   cg-file-histories-project="file_info.project"\n                   cg-file-histories-file="current_file"\n                   cg-file-histories-view="modal"></cg-file-histories>\n            </div>\n        </div>\n    </div>\n</div>\n'),
a.put("app/attachment/preview.html",'<style type="text/css">\n    #preview-image{max-width: 90%;}\n    #preview-icon{position:relative;width:200px;height:200px;cursor:pointer;margin: 100px auto;}\n    #preview-icon:hover i.icon{color: rgba(255,255,255,1);}\n    #preview-icon i.icon{font-size:60px;position: absolute;color: rgba(255,255,255,0);bottom: 5px;right: 5px;margin: 0;}\n    #preview-icon .file-icon{width:200px;height:200px;font-size:30px;font-size: 80px;line-height: 170px;}\n\n    #pdf-preview, #image-preview{position: relative;}\n    #pdf-preview.loaded{display: inline-block;}\n    #pdf-preview .button:hover{background: rgba(0,0,0,0.1);cursor: pointer;}\n    #pdf-preview .prev,#pdf-preview .next{ position: absolute;width:50%;height: 100%;z-index: 2; font-size: 50px;}\n    #pdf-preview .button i.icon{display:none;position: absolute;top:50%;margin-top:-25px;color:#FFF;}\n    #pdf-preview .button:hover i.icon{display: inline;}\n    #pdf-preview .prev{left:0;}\n    #pdf-preview .prev > i.icon{left:20px;}\n    #pdf-preview .next{right:0;}\n    #pdf-preview .next > i.icon{right:20px;}\n    #pdf-preview .count{border-radius:3px;position: absolute;bottom: 5px;left:50%;margin-left:-40px;width:100px;font-size:16px;color:#FFF;background: rgba(0,0,0,0.3);text-align: center;}\n    #pdf-preview > .resize{background: rgba(0,0,0,0.1);cursor: pointer;display: none;position: absolute;top:5px;right:5px;width:50px;height:50px;z-index: 3;color:#FFF;text-align: center;line-height: 55px;cursor: pointer;}\n    #pdf-preview:hover > .resize{display: inline; border-radius: 3px;}\n    #pdf-preview > .resize i.resize.icon{margin:0;font-size:25px;}\n\n    /* fullscreen pdf preview */\n    /* #pdf-preview-wrapper.full{width: 100%;height: 100%;position:absolute;left: 0;top: 0;} */\n\n    #preview-image-loading{\n        position: absolute;\n        z-index: 3;\n        width: 140px;\n        font-size: 14px;\n        top: 50px;\n        left: 50%;\n        background: rgba(0,0,0,0.8);\n        color: #FFF;\n        padding: 2px 3px;\n        border-radius: 3px;\n        margin-left: -70px;\n    }\n\n    .preview-button{margin-bottom: 20px;}\n    .preview-button a{font-size:14px; background: #fff; color: #333; padding: 4px 5px;border-radius: 3px;}\n    .preview-button a:hover{background: #EEE; color: #000; }\n    .preview-button a:first-child{margin-right: 20px; padding-left: 0; margin-left: 0;}\n    .preview-button a:last-child{margin-right: 0.5em; padding-right: 0;}\n    .preview-button a i{ font-size: 12px; }\n    .preview-button .prev{display:inline-block;float:left;margin-left:10px;}\n    .preview-button .next{display:inline-block;float:right;margin-right:10px;}\n\n    #text-preview pre{\n        padding:10px;\n        background: #FFF;\n        white-space: pre-wrap; /* CSS3 */\n        white-space: -moz-pre-wrap; /* Mozilla, post millennium */\n        white-space: -pre-wrap; /* Opera 4-6 */\n        white-space: -o-pre-wrap; /* Opera 7 */\n        word-wrap: break-word; /* Internet Explorer 5.5+ */\n    }\n\n    .file-info-wrapper {\n        display: table;\n    }\n\n    .file_info_word {\n        height: 32px;\n        font-size: 15px;\n        display: table-row;\n    }\n\n    .file-info-left {\n        display: table-cell;\n        width: 60px;\n        font-weight: 700;\n        text-align: right;\n        padding-right: 10px;\n    }\n\n    .file-info-right {\n        display: table-cell;\n    }\n\n    .white-block {\n        padding: 10px;border-radius:3px;background: #fff;\n    }\n\n\n    #actions i{\n        margin-right: 0;\n        padding-right: 0;\n        color: #666666;\n        font-size: 20px;\n    }\n\n    #attachment .ui.tabular.menu .item {\n        padding: 10px 15px;\n        font-size: 14px;\n    }\n    #attachment .ui.tabular.menu .item.active {\n        background: none !important;\n        border-bottom: 1px solid #F7F6F2 !important;\n    }\n\n    #attachment .ui.tabular .item .ui.circular.label {\n        padding: 1px 4px!important;\n        background-color: rgba(0,0,0,.15)!important;\n        color: #000;\n        font-size: 12px;\n        font-weight: 700;\n    }\n    .ui.popup {\n        max-width: 300px;\n    }\n    .ui.popup.inverted.top.center {\n        height: 22px;\n        font-size: 12px;\n        line-height: 22px;\n        color: #fff;\n    }\n\n    #share-button {\n        cursor: pointer;\n        color: #444;\n    }\n    #share-button:hover {\n        color: #000;\n    }\n\n    #attachment-preview {\n        min-width: 800px;\n    }\n\n    #attachement-preview-container {\n        background-color: #FFF;\n        padding: 30px;\n    }\n\n    @media only screen and (min-width: 1340px) {\n      #attachment-preview {\n        width: 70%;\n        max-width: 1280px;\n      }\n    }\n</style>\n<div id="attachment-preview">\n    <div id="attachement-preview-container">\n        <div class="ui dividing header">\n            <div class="actions" id="actions" style="margin-top: 0">\n                <a class="ui default" style="margin-right: 0.25em;" href="javascript:void(0);" ng-click="setFileNameEditable($event);" ng-if="\'text\' != getFileType(current_file) && current_file" data-position="top center" data-variation="inverted" data-html="重命名" cg-popup><i class="cloud edit icon"></i></a>\n                <a class="ui default" style="margin-right: 0.25em;" href="javascript:void(0);" ng-click="editFile(current_file);" ng-if="\'text\' == getFileType(current_file) && current_file" data-position="top center" data-variation="inverted" data-html="编辑" cg-popup><i class="cloud edit icon"></i></a>\n                <a class="ui default" style="margin-right: 0.25em;" href="javascript:void(0);" ng-click="uploadNewVersion();" data-position="top center" data-variation="inverted" data-html="上传新版本" cg-popup><i class="cloud upload icon"></i></a>\n                <a class="ui default" style="margin-right: 0.25em;" href="javascript:void(0);" ng-click="downloadFile(current_file);" data-position="top center" data-variation="inverted" data-html="下载" cg-popup><i class="cloud download icon"></i></a>\n                <span style="margin-right: 0.25em;" id="share-button" href="javascript:void(0);">\n                    <i class="coding coding-share icon" style="margin-right: 0em; padding-right: 0; opacity: 1; font-size: 0.9em; z-index: 999;" cg-share="share" object="current_file" type="0" ng-class="{green: share}"></i>\n                </span>\n                <a data-position="top center" style="margin-right: 0.25em;" data-variation="inverted" data-html="文件信息" cg-popup href="javascript:void(0);">\n                    <i class="info icon" style="margin-right: 0em; padding-right: 0; opacity: 1;" cg-popup="{on: \'click\', position: \'bottom center\'}" template="#file-info-tpl"></i>\n                </a>\n                <a class="ui default" href="javascript:void(0);"\n                   ng-click="deleteFile(current_file, true);"\n                   ng-if="(USER | isOwnerOf: current_file) || (current_file | isRole: ADMIN)"\n                   data-position="top center"\n                   data-variation="inverted"\n                   data-html="删除" cg-popup>\n                    <i class="cloud trash red icon"></i>\n                </a>\n            </div>\n            <div class="title" style="min-height: 31px;">\n                <span class="gray">\n                    <span ng-if="file_loading">加载中...</span>\n                    <span ng-bind-html="current_file.name" ng-if="!file_loading && !file_name_editing" class="word-break-all"></span>\n                    <div class="ui small action input" ng-if="file_name_editing">\n                        <input type="text" ng-model="current_file.readName"\n                           id="edit-file-name-{{current_file.file_id}}"\n                           cg-not-click="file_name_editing && renameFile(current_file)"\n                           not-click-class="#edit-file-name-{{current_file.file_id}}, #edit-file-name-{{current_file.file_id}} *"\n                           not-click-when="file_name_editing"\n                           cg-enter="renameFile(current_file)"\n                           style="width: 300px;"/>\n                        <a class="ui green small button" style="cursor: default">.{{current_file.fileType}}</a>\n                    </div>\n                </span>\n                <span id="file-info-tpl">\n                    <div class="file-info-wrapper">\n                        <div class="file-info-title file_info_word" style="\n                            font-size: 15px;\n                            height: 25px;\n                            font-weight: inherit;\n                            display: table-row;\n                            width: 40%;\n                            text-align: right;">\n                            <span class="file-info-left" style="padding-bottom:10px;">文件信息</span>\n                        </div>\n                        <div class="file_info_word" ng-if="current_file.number">\n                            <span class="file-info-left">引用编号</span>\n                            <span class="file-info-right">#{{current_file.number}}</span>\n                        </div>\n                        <div class="file_info_word">\n                            <span class="file-info-left">文件类型</span>\n                            <span class="file-info-right">{{current_file.type}}</span>\n                        </div>\n                        <div class="file_info_word">\n                            <span class="file-info-left">文件大小</span>\n                            <span class="file-info-right">{{current_file.size | bytes}}</span>\n                        </div>\n                        <div class="file_info_word file-image-info">\n                            <span class="file-info-left">文件尺寸</span>\n                            <span class="file-info-right"></span>\n                        </div>\n                        <div class="file_info_word">\n                            <span class="file-info-left">创建时间</span>\n                            <span class="file-info-right" cg-friendly-time=\'current_file.created_at\'></span>\n                        </div>\n                        <div class="file_info_word">\n                            <span class="file-info-left">最近更新</span>\n                            <span class="file-info-right" cg-friendly-time=\'current_file.updated_at\'></span>\n                        </div>\n                        <div class="file_info_word">\n                            <span class="file-info-left">创建人</span>\n                            <span class="file-info-right ellipsis" style="max-width: 100px">{{current_file.owner.name}}</span>\n                        </div>\n                    </div>\n                </span>\n\n            </div>\n        </div>\n        <div class="empty center list" ng-show="file_loading && image_preview.prevId == -1 && image_preview.nextId == -1">\n            <i class="loading icon"></i>加载文件预览中...\n        </div>\n\n        <div class="preview-button" cg-prev-and-next="onImageNavChange($event);" style="height:27px;">\n            <a class="prev" href="javascript:void(0);" ng-if="image_preview.prevId>0" ng-click="previewImage(image_preview.prevId);" title="{{image_preview.prevName}}" style="max-width: 45%;">\n                <i class="arrow left icon" style="margin-top: 5px; float: left;"></i>\n                <span class="ellipsis" style="max-width: 90%; display: inline-block; float: left;">{{image_preview.prevName}}</span>\n            </a>\n            <a class="next" href="javascript:void(0);" ng-if="image_preview.nextId>0" ng-click="previewImage(image_preview.nextId);" title="{{image_preview.nextName}}" style="max-width: 45%;">\n                <i class="arrow right icon" style="margin-top: 5px; float: right;"></i>\n                <span class="ellipsis" style="max-width: 90%; display: inline-block; float: right;">{{image_preview.nextName}}</span>\n            </a>\n        </div>\n        <cg-file-previewer\n             cg-file-previewer-project-id="PROJECT.id"\n             cg-file-previewer-file-id="file_id"\n             cg-file-previewer-view="detail">\n            </cg-file-previewer>\n    </div>\n    <div class="ui tabular menu">\n        <a class="item" ng-class="{active: detail_mode === \'activity\'}" href="javascript:void(0)" ng-click="switchDetailMode(\'activity\')">\n            <span>动态</span>\n            <span class="ui circular label" ng-if="current_file.activity_count">{{current_file.activity_count}}</span>\n        </a>\n        <a class="item" ng-class="{active: detail_mode === \'history\'}" href="javascript:void(0)" ng-click="switchDetailMode(\'history\')">\n            <span>历史版本</span>\n            <span class="ui circular label" ng-if="current_file.history_count">{{current_file.history_count}}</span>\n        </a>\n    </div>\n    <cg-file-activities\n        ng-if="detail_mode === \'activity\'"\n        cg-file-activities-project="PROJECT"\n        cg-file-activities-user="USER"\n        cg-file-activities-file-id="file_id"\n        cg-file-activities-file="current_file"\n        cg-file-activities-view="detail"\n        style="margin-bottom: 100px">\n        </cg-file-activities>\n        <cg-file-histories\n            ng-if="detail_mode === \'history\'"\n            cg-file-histories-project="PROJECT"\n            cg-file-histories-file="current_file"\n            cg-file-histories-view="detail">\n            </cg-file-histories>\n</div>\n'),a.put("app/attachment/shared_list.html",'<div class="coding ui dividing header">\n    <div>\n        <i class="coding coding-share icon green"></i>正在分享的文件\n    </div>\n</div>\n<div class="empty center list" ng-if="files_loading">\n    <i class="loading icon"></i>正在加载文件列表...\n</div>\n\n<table class="ui basic table project-attachments">\n    <tbody>\n    <tr class="attachment" ng-repeat="file in files">\n        <td class="checkbox" ng-class="{\'editing\': editable_mode}" ng-show="editable_mode" ng-click="selectFile(file)">\n            <i class="icon" ng-class="{\'empty checkbox\': !file.editing, \'checkmark sign\': file.editing}"></i>\n        </td>\n        <td class="filename ellipsis" ng-click="previewFile(file, $event);" width="300px">\n            <a cg-file-icon-src="file.preview" cg-file-icon="file.fileType"></a>\n            <span class="ellipsis" title="{{file.name}}">{{file.name.substring(0,25)}}{{file.name.length>25 ? \'...\' : \'\'}}</span>\n        </td>\n        <td class="id">#{{file.file_id}}</td>\n        <td class="size">{{file.size | bytes:2}}</td>\n        <td class="uploader ellipsis">\n            <a ng-href="{{file.owner.path}}">\n                <img class="ui circular image" ng-src="{{file.owner.avatar}}" width="32" height="32"/>{{file.owner.name}}\n            </a>\n        </td>\n        <td class="time">\n            <span cg-friendly-time="file.updated_at"></span>\n        </td>\n        <td class="action">\n            <a href="/api/project/{{PROJECT.id}}/files/{{file.file_id}}/download" target="_self"><i class="cloud download icon" data-position="top center" data-variation="inverted" data-html="下载" cg-popup></i></a>\n            <a ng-href="{{ detailPath(PROJECT, file) }}"><i class="external url icon" data-position="top center" data-variation="inverted" data-html="查看详情" cg-popup></i></a>\n            <a class="tool-button gray" href="javascript:void(0)">\n                <i id="shared_icon" class="coding coding-share icon" cg-share="file.share" object="file" type="0" ng-class="{green: file.share}"></i>\n            </a>\n            <a href="javascript:void(0);" ng-click="editFile(file);" ng-if="editable(file)"><i class="cloud edit icon"></i></a>\n            <a href="javascript:void(0);" ng-click="deleteFile(file);" ng-if="(USER | isOwnerOf: file) || (USER | isOwnerOf: PROJECT)"><i class="remove-file red minus sign alternate icon" data-position="top center" data-variation="inverted" data-html="编辑文件" cg-popup></i></a>\n        </td>\n    </tr>\n    </tbody>\n</table>\n<div class="center" cg-pager="{{attachment_pager_id}}"></div>\n'),a.put("app/ci/ci.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'" class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container" ng-if="!loaded">\n            <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n    </div>\n    <div ng-show="loaded" class="container">\n        <div>\n            <h4 ng-if="!PROJECT.is_public" class="header">持续集成</h4>\n        </div>\n        <div>\n            <a class="ui default green button" ng-href="{{PROJECT.project_path}}/ci" target="_blank">去体验</a>\n        </div>\n    </div>\n</div>\n\n'),a.put("app/git/key/keys.html",'<div ng-controller="UserKeysSettingController" class="public-key-container">\n    <h4>{{\'add_new_key\' | i18n:\'code_keys\'}}</h4>\n    <div class="add-key-form">\n        <form method="post">\n            <div class="ui form">\n                <div class="field">\n                    <label>{{\'key_title_label\' | i18n:\'code_keys\'}}</label>\n                    <input placeholder="{{\'key_title_placeholder\' | i18n:\'code_keys\'}}" type="text" name="title" ng-model="key_title">\n                </div>\n                <div class="field">\n                    <label>{{\'key_content_label\' | i18n:\'code_keys\'}}</label>\n                    <textarea placeholder="{{\'key_content_placeholder\' | i18n:\'code_keys\'}}ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDHI6/Zs8DVJduqR0DHO8s5JDT4SpnXS+jvLJkAuji2G3nBYTdtjfvMx6i6ei6Lxv3MMecogYyujhIx/k9111+8ZqFpJAywNTfNuw/JiLaH989QLdM7F2NaJi3OHV8484Z6KKvBXyO99HIG/oCNYDYp/78kd0kz8b0ghlXG3M8YRHd5udV6VErKS5qQHH9WTsEaF2VZjrEPalYULHXJ7pikuKmwZ8CVlyqhPxCbHG4wdKprATpdpiax1i5mmH/+pt0vzK01RgZ/ibhVkFaAmxOCWxTSNstqAlYd+z01/688IUIIWqfbzMe7FSp4CLezlIn8UIowb8xw+yRcYMl2Lqon coding@MBP" name="content" ng-model="key_content" ng-change="split(key_content)"></textarea>\n                </div>\n                <div class="field">\n                    <label ng-style="{\'color\': key_expired && !key_never_expired ? \'#d95c5c\' : \'#555\'}">{{\'key_expiration_label\' | i18n:\'code_keys\'}}</label>\n                    <div class="inline field">\n                        <input type="text"\n                               ng-disabled="key_never_expired"\n                               ng-model="key_expiration"\n                               cg-pickmeup="onDateChange($date)"\n                               pickmeup-options="pickmeup_opts"\n                               ng-style="{\'border-color\': key_expired && !key_never_expired ? \'#d95c5c\' : \'rgba(0, 0, 0, 0.14902)\'}">\n                        <div class="ui checkbox">\n                            <input type="checkbox" id="never-expire-checkbox" ng-model="key_never_expired">\n                            <label for="never-expire-checkbox">{{\'never_expire_label\' | i18n:\'code_keys\'}}</label>\n                        </div>\n                    </div>\n                </div>\n                <a class="ui dark gray submit button" type="submit"\n                   ng-click="showPasswordWithCreateKey(key_title, key_content, key_expiration, key_never_expired)">{{\'add_button\' | i18n:\'code_keys\'}}</a>\n            </div>\n        </form>\n    </div>\n\n    <h4 style="margin-top: 60px;">{{\'exist_key_list\' | i18n:\'code_keys\'}}</h4>\n    <div class="no-key-cell" ng-if="!keys || !keys.length">\n        <p class="no-key-msg">{{\'no_key_msg\' | i18n:\'code_keys\'}}</p>\n    </div>\n    <div class="key-list" ng-if="keys && keys.length">\n        <table class="key-list-table">\n            <tr ng-repeat="key in keys">\n                <td class="key-info" ng-if="!key.form.show">\n                    <p class="info-entry" ng-class="key.has_expired && \'expired\'">\n                        <strong>{{\'key_entry_title\' | i18n:\'code_keys\'}}</strong>{{key.title}}<span ng-if="key.has_expired" class="expired-msg">{{\'key_entry_expired_msg\' | i18n:\'code_keys\'}}</span>\n                    </p>\n                    <p class="info-entry">\n                        <strong>{{\'key_entry_finger_print\' | i18n:\'code_keys\'}}</strong>{{key.finger_print}}\n                    </p>\n                    <p class="info-entry" ng-if="key.expire_at">\n                        <strong>{{\'key_entry_expiration\' | i18n:\'code_keys\'}}</strong>{{key.expire_at}}\n                    </p>\n                    <p class="info-entry">\n                        {{\'key_entry_added_at\' | i18n:\'code_keys\'}} <span cg-friendly-time="key.created_at"></span>\n                    </p>\n                </td>\n                <td class="key-operator" ng-if="!key.form.show">\n                    <a class="ui small white button" ng-click="showEditForm(key)">{{\'edit_button\' | i18n:\'code_keys\'}}</a>\n                    <a class="ui small white button delete" ng-click="showPasswordWithDeleteKey(key);">{{\'delete_button\' | i18n:\'code_keys\'}}</a>\n                </td>\n                <td class="key-edit-form" ng-if="key.form.show" colspan="2">\n                    <div class="ui form">\n                        <div class="field">\n                            <label>{{\'key_title_label\' | i18n:\'code_keys\'}}</label>\n                            <input type="text" ng-model="key.form.title">\n                        </div>\n                        <div class="field">\n                            <label ng-style="{\'color\': key.form.key_expired && !key.form.key_never_expired ? \'#d95c5c\' : \'#555\'}">\n                                {{\'key_expiration_label\' | i18n:\'code_keys\'}}\n                            </label>\n                            <div class="inline field">\n                                <input type="text"\n                                       ng-disabled="key.form.key_never_expired"\n                                       ng-model="key.form.key_expiration"\n                                       cg-pickmeup="key.form.onDateChange($date)"\n                                       pickmeup-options="pickmeup_opts"\n                                       ng-style="{\'border-color\': key.form.key_expired && !key.form.key_never_expired ? \'#d95c5c\' : \'rgba(0, 0, 0, 0.14902)\'}">\n                                <div class="ui checkbox">\n                                    <input type="checkbox" id="never-expire-checkbox-{{key.id}}" ng-model="key.form.key_never_expired">\n                                    <label for="never-expire-checkbox-{{key.id}}">{{\'never_expire_label\' | i18n:\'code_keys\'}}</label>\n                                </div>\n                            </div>\n                        </div>\n                        <a class="ui green button" ng-click="showPasswordWithEditKey(key)">{{\'save_button\' | i18n:\'code_keys\'}}</a>\n                        <a class="ui white button cancel" ng-click="hideEditForm(key)">{{\'cancel_button\' | i18n:\'code_keys\'}}</a>\n                    </div>\n                </td>\n            </tr>\n        </table>\n    <div>\n</div>\n'),a.put("app/git/partial/_back-monkey.html",'<div class="back-monkey" style="text-align: center;">\n    <img src="https://dn-coding-net-production-static.qbox.me/static/4f771334f89c521df6a4b42fe4a69999.png" height="65" alt="">\n</div>\n'),a.put("app/git/partial/_comment.html",'<div class="merge-request-activity-filter" ng-if="tag_menu === \'merge\'">\n    <a class="gray" href="javascript:void(0);" ng-click="toggleMergeRequestActivity()">\n        <i ng-class="getShowMergeRequestActivityIcon(showMergeRequestActivity)"></i>{{\'comments_only\' | i18n:\'code_comment\'}}\n    </a>\n</div>\n<div class="comments" ng-class="{\'git-comments\': comments && comments.length > 0}">\n    <div class="diff-notes-wrapper" ng-repeat="discussion in comments">\n        <div ng-show="discussion[0].action && showMergeRequestActivity" class="activity">\n            <div class="icon activity" ng-class="discussion[0].action">\n                <i class="icon" ng-class="getActivityIcon(discussion[0].action)"></i>\n            </div>\n            <div class="detail">\n                <a class="gray" ng-href="{{::discussion[0].author.path}}">{{::discussion[0].author.name}}</a>\n                <span>{{getActivityHuman(discussion[0].action)}}</span>\n                <a class="gray" ng-href="{{::discussion[0].comment.reviewer.path}}">{{::discussion[0].comment.reviewer.name}}</a>\n                -\n                <span cg-friendly-time="discussion[0].created_at"></span>\n                <div ng-if="discussion[0].comment" class="commits">\n                    <div ng-repeat="commit in discussion[0].comment.commits">\n                        <div class="commit" ng-init="show_commit_message = false;">\n                            <i class="icon code"></i>\n                            <a ng-href="{{::commit.committer.link}}">{{::commit.committer.name}}</a> :\n                            <a class="monospaced-font" ng-href="{{PROJECT.project_path}}/git/commit/{{::commit.commitId}}">[{{::commit.commitId | shortCommitId}}]</a>\n                            <a class="gray" ng-href="{{PROJECT.project_path}}/git/commit/{{::commit.commitId}}" ng-bind-html="::commit.shortMessage"></a>\n                            <span class="hidden-text-expander" ng-show="commit.allMessage">\n                                <a class="gray" href="javascript:void(0);"\n                                   ng-click="show_commit_message = !show_commit_message">...</a>\n                            </span>\n                            <div class="all-message" ng-if="show_commit_message">\n                                <a class="gray" ng-href="{{PROJECT.project_path}}/git/commit/{{::commit.sha}}" ng-bind-html="::commit.allMessage"></a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="comment" ng-if="!discussion[0].commitId && !discussion[0].action" ng-repeat="item in discussion">\n            <a name="mr-comment-{{::item.id}}" ng-if="::item.noteable_type == \'MergeRequestBean\'"></a>\n            <a name="pr-comment-{{::item.id}}" ng-if="::item.noteable_type == \'PullRequestBean\'"></a>\n            <a class="commont-avatar" ng-href="{{::item.author.path}}">\n                <img class="ui avatar image" width="36" ng-src="{{::item.author.avatar}}"/>\n            </a>\n            <div class="content-wrapper">\n                <div class="content markdown" clip-copy-code="pre"  cg-highlight="item.content">\n                </div>\n                <div class="time">\n                    <span class="mr10">\n                        <a class="gray" ng-href="{{::item.author.path}}" >{{::item.author.name}}</a>\n                    </span>\n                    <span class="mr10">\n                        <i class="time icon"></i><span cg-friendly-time="item.created_at"></span>\n                    </span>\n                    <span class="mr10" ng-if="USER">\n                        <a class="gray reply" href="javascript:void(0);"\n                           ng-click="replyMerges(item);"\n                           cg-scroll-to scroll-to="#merges-comment-editor">\n                            <i class="chat outline icon"></i>{{\'reply\' | i18n:\'code_comment\'}}\n                        </a>\n                    </span>\n                    <span class="mr10" ng-if="USER.id == item.author.id || (PROJECT | isRole:OWNER)">\n                        <a class="gray remove" href="javascript:void(0);" ng-click="delComment(item);">\n                            <i class="remove icon"></i>{{\'delete\' | i18n:\'code_comment\'}}\n                        </a>\n                    </span>\n                </div>\n            </div>\n        </div>\n        <div class="diff-notes-wrapper" ng-class="{outdated: hideDiff}"  ng-if="discussion[0].commitId && !discussion[0].action" ng-init="inline = true; diffHtml = discussion[0].diff_html; diffStat = {paths: []}; diffComments = discussion; hideDiff = discussion[0].outdated">\n            <div class="activity code">\n                <div class="button toggle-diff" ng-click="hideDiff = !hideDiff">\n                    <i class="icon" ng-class="{expand: hideDiff, collapse: !hideDiff}"></i>\n                    {{hideDiff ? (\'show_detail\' | i18n:\'code_comment\') : (\'hide_detail\' | i18n:\'code_comment\')}}\n                </div>\n                <div class="icon activity">\n                    <i class="icon" ng-class="{code: !discussion[0].outdated, close: discussion[0].outdated}"></i>\n                </div>\n                <div class="detail">\n                    <a class="gray" ng-href="{{::discussion[0].author.path}}">{{::discussion[0].author.name}}</a>\n                    <span>{{discussion[0].outdated ? (\'comment_outdated_diff\' | i18n:\'code_comment\') : (\'comment_diff\' | i18n:\'code_comment\')}}</span>\n                    -\n                    <span cg-friendly-time="discussion[0].created_at"></span>\n                </div>\n            </div>\n            <div class="comment-commit-diff commit-diff" cg-diff ng-init="notesParams = undefined"></div>\n            <div cg-diff-notes ng-init="commitId = discussion[0].commitId; noteable_type = discussion[0].noteable_type; noteable_id = discussion[0].noteable_id; path = discussion[0].path; position = discussion[0].position; line = discussion[0].line; anchor = discussion[0].anchor"></div>\n        </div>\n    </div>\n    <div class="empty list" ng-if="comments_loaded && comments.length == 0"><i class="coffee icon"></i>{{\'no_comments\' | i18n:\'code_comment\'}}<span ng-if="USER">{{\'comment_now\' | i18n:\'code_comment\'}}</span></div>\n    <div class="empty list" ng-if="comments_loading"><i class="loading icon"></i>{{\'loading_comments\' | i18n:\'code_comment\'}}</div>\n    <!-- <div cg-pager="{{topic_detail_pager_id}}"></div> -->\n</div>\n\n<form id="merges-comment-form" ng-if="USER">\n    <div id="merges-comment-editor"\n        editor-id="merges-comment-editor"\n        cg-light-md-editor="addComment"\n        data-ng-model="comment.content"\n        on-change="onCommentChange"\n        at-item="atConfig.target"\n        at-context-type="atConfig.type"\n        extra-item="atConfig.extra"\n        show-submit="true"\n        img-compression="false"\n        project_dependency="PROJECT">\n    </div>\n</form>\n'),a.put("app/git/partial/_empty.html",'<div class="git-empty" ng-controller="ProjectTitleController">\n    <div ng-if="DEPOT.status != 2">\n        <div ng-if="USER.id==PROJECT.owner_id">\n            <div ng-include="\'app/git/partial/_back-monkey.html\'"></div>\n            <h2>当前项目没有代码</h2>\n            <p>使用 HTTPS 协议或者 SSH 协议地址 Push 代码或者按如下命令新建 Git 仓库</p>\n            <a class="about-git" href="/help/faq/git/git.html"  target="_blank" >不懂如何上传代码到 coding？ 请点击我 ></a>\n            <p>\n            我们建议所有的git仓库都有一个\n            <code><a ng-href="{{PROJECT.project_path}}/git/new/master?filename=README.md">README</a></code> ，\n            <code><a ng-href="{{PROJECT.project_path}}/git/new/master?filename=LICENSE">LICENSE</a></code> 和\n            <code><a ng-href="{{PROJECT.project_path}}/git/new/master?filename=.gitignore">.gitignore</a></code> 文件。\n            </p>\n\n            <div class="ui action input proto-url" >\n                <div class="proto-switch" ng-style="{background:cur_clone_type==\'https\'?\'#EEE\':\'#FFF\'}" ng-click="changeCloneUrl(\'https\')">HTTPS</div>\n                <div class="proto-switch" ng-style="{background:cur_clone_type==\'ssh\'?\'#EEE\':\'#FFF\'}" ng-click="changeCloneUrl(\'ssh\')">SSH</div>\n                <input type="text" ng-model="cur_clone_url" style="height: 35px; border-radius: 0" readonly="readonly" onclick="this.select();">\n                <div class="ui right icon button mini copy-btn" clip-copy="cur_clone_url" clip-click="do_click()" style="line-height:10px;width:30px"><i class="icon" ng-class="{\'green checkmark\':copied,\'paste\':!copied}"></i></div>\n                <a class="git tab-btn" style="margin-left: 5px;top: 0;background-color: transparent;padding: 7px 5px;" href="/help/doc/git/ssh-key.html" target="_blank"><i class="help circle icon" style="color: rgba(51, 51, 51, 0.6);"></i></a>\n            </div>\n\n\n            <div ng-controller="InitDepotController">\n\n                <div class="scaffold-link" ng-click="showScaffoldForm = !showScaffoldForm">点击这里快速初始化仓库</div>\n\n                <div class="scaffold-form" ng-show="showScaffoldForm">\n                    <div class="git tab-bar">\n                        <a class="git tab-bar item" ng-class="{ active : initDepotForm.type === \'init\' }" ng-click="initDepotForm.type = \'init\'">初始化仓库</a>\n                        <a class="git tab-bar item" ng-class="{ active : initDepotForm.type === \'import\' }" ng-class="" ng-click="initDepotForm.type = \'import\'">导入仓库</a>\n                    </div>\n                    <div class="git tab-content" ng-class="{ active : initDepotForm.type === \'init\' }" >\n                        <div class="field" style="margin: 1.2em 0;">\n                            <div>\n                                <div class="ui checkbox">\n                                    <input type="checkbox"  ng-model="initDepotForm.gitReadmeEnabled" id="git-readme-enabled"/>\n                                    <label for="git-readme-enabled">启用README.md文件初始化项目</label>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="git select2">\n                            <select ui-select2="{width: \'240px\'}" ng-model="initDepotForm.gitLicense" id="git-license-enabled" ng-include="\'app/user/license.html\'" ></select>\n                            <select ui-select2="{width: \'240px\'}" ng-model="initDepotForm.gitIgnore" id="git-ignore-enabled" ng-include="\'app/user/gitignore.html\'" ></select>\n                        </div>\n                    </div>\n                    <div class="git tab-content" ng-class="{ active : initDepotForm.type === \'import\' }" >\n                        <div class="field">\n                            <div class="ui radio checkbox" style="margin-right: 1em;">\n                                <input id="git_vcs_type" type="radio" value="git" name="vcsType" ng-change="" ng-model="initDepotForm.vcsType">\n                                <label for="git_vcs_type" style="padding-left: 1.5em;">Git</label>\n                            </div>\n\n                            <div class="ui radio checkbox" style="margin-right: 1em;">\n                                <input id="svn_vcs_type" type="radio" value="svn" ng-model="initDepotForm.vcsType" name="vcsType">\n                                <label for="svn_vcs_type" style="padding-left: 1.5em;">SVN/Subversion</label>\n                            </div>\n\n                            <div class="ui radio checkbox" style="margin-right: 1em;">\n                                <input id="hg_vcs_type" type="radio" name="vcsType" ng-model="initDepotForm.vcsType" value="hg" >\n                                <label for="hg_vcs_type" style="padding-left: 1.5em;">Hg/Mercurial</label>\n                            </div>\n\n\n                            <i class="icon help tip" style="cursor: pointer;"\n                                                     data-html="<div class=\'content\'>Coding.net 支持用户在创建项目的时候，导入外部的公开仓库（不需要提供认证的）。目前支持 Git 、SVN、Hg 三种类型仓库的导入。注意：为防止滥用，我们对单个仓库的导入时间做了限制，另外导入过程中请不要 Push 到远程仓库，导入结果会发送相关通知告知您。</div>"\n                                                     cg-help-popup=""\n                                                     ></i>\n                        </div>\n                        <div class="field">\n                            <div class="ui fluid input" style="display:block;margin-top:20px;">\n                                <input type="text" ng-model="initDepotForm.importFrom" placeholder="导入公开项目地址" style="padding: .65em 1em;">\n                            </div>\n                        </div>\n                    </div>\n                    <a ng-click="initDepot()" class="git tab-btn" ng-class="{ disabled : canSubmit === false }">创<br />建</a>\n                </div>\n            </div>\n\n            <div class="quick-setup">\n                <div class="git tab-bar">\n                    <a class="git tab-bar item" ng-class="{ active : createDepotType === \'new\' }" ng-click="changeCreateDepotType(\'new\')">在命令行中创建 Git 仓库</a>\n                    <a class="git tab-bar item" ng-class="{ active : createDepotType === \'existing\' }" ng-click="changeCreateDepotType(\'existing\')">已有项目</a>\n                </div>\n                <div class="git tab-content" ng-class="{ active : createDepotType === \'new\' }">\n                    <pre>\n<code>{{newDepotCommondLine}}</code>\n                    </pre>\n                </div>\n                <div class="git tab-content" ng-class="{ active : createDepotType === \'existing\' }">\n                    <pre>\n<code>{{existingDepotCommondLine}}</code>\n                    </pre>\n                </div>\n                <a class="git tab-btn" clip-copy="copyCommondLine()" clip-click="doClickCopyCommondLine()"><i class="icon" style="margin: 0;" ng-class="{\'green checkmark\':copiedCopyCommondLine,\'paste\':!copiedCopyCommondLine}"></i></a>\n            </div>\n\n        </div>\n        <div ng-if="USER.id !== PROJECT.owner_id" class="ui coding aligned center">\n            <p>此项目的 Git 仓库为空。</p>\n        </div>\n    </div>\n</div>\n<div ng-if="!DEPOT.default_branch && DEPOT.status == 2 && USER.id === PROJECT.owner_id"\n     class="ui coding aligned center" ng-controller="ImportStatusController">\n    <div class="container" ng-include="\'app/git/partial/_loading.html\'"></div>\n    代码仓库正在从外部仓库 ({{DEPOT.origin_url}}) 导入中，稍后会自动刷新。\n</div>\n<div ng-if="!DEPOT.default_branch && DEPOT.status == 2 && USER.id !== PROJECT.owner_id"\n     class="ui coding aligned center">\n    <p>此项目的 Git 仓库为空。</p>\n</div>\n'),
a.put("app/git/partial/_loading.html",'<div class="git-loading-container">\n    <div class="git-loading monkey"></div>\n    <div id="git-loading-text"><img src="https://dn-coding-net-production-static.qbox.me/static/9025e7ebf3f2073858a74b2a2e6245a4.png" width="40" height="40"/></div>\n</div>\n'),a.put("app/git/partial/inner_menu.html",'<style type="text/css">\n\n    #inner-menu .clone-panel {\n        font-size: 18px;\n        padding-left: 14px;\n        padding-right: 14px;\n    }\n\n    #inner-menu .clone-panel article {\n        margin: 5px 0px;\n        font-size: 12px;\n        font-weight: normal;\n        line-height: 16px;\n        color: #666;\n    }\n\n    .switch-btn,.fork-btn{\n        font-size: 11px;\n        cursor: pointer;\n    }\n    .switch-btn.disabled {\n        color: black;\n        font-weight: bold;\n    }\n    .switch-btn.disabled:hover {\n        text-decoration: none;\n    }\n    .switch-btn:hover {\n        text-decoration: underline;\n    }\n    #inner-menu .clone-panel .copied-tips{\n        font-size: 14px;\n        margin: 10px 0px;\n    }\n    #inner-menu .git-version-tips {\n        font-size: 10px;\n        margin-top: 10px;\n        color: #333;\n    }\n</style>\n<header class="header item">\n    {{\'repository\' | i18n:\'code_menu\'}}\n    <article>\n        {{PROJECT.description}}\n    </article>\n</header>\n<a class="item" ng-href="{{PROJECT.project_path}}/git" ng-class="{active:inner_menu == \'basic\'}">\n    <i class="code icon"></i>{{\'code\' | i18n:\'code_menu\'}}\n</a>\n<a class="item" ng-href="{{PROJECT.project_path}}/git/branches" ng-class="{active:inner_menu == \'branch\'}">\n    <i class="fork code icon"></i>{{\'branches\' | i18n:\'code_menu\'}}\n</a>\n<a class="item" ng-href="{{PROJECT.project_path}}/git/tags" ng-class="{active:inner_menu == \'tag\'}">\n    <i class="tags icon"></i>{{\'tags\' | i18n:\'code_menu\'}}\n</a>\n<a class="item" ng-href="{{PROJECT.project_path}}/git/releases" ng-class="{active:inner_menu == \'release\'}" ng-if="isExpActive(\'release\')">\n    <i class="archive icon"></i>{{\'release\' | i18n:\'code_menu\'}}\n</a>\n<a class="item" ng-href="{{PROJECT.project_path}}/git/compare" ng-class="{active:inner_menu == \'compare\'}">\n    <i class="coding icon coding-compare"></i>{{\'compare\' | i18n:\'code_menu\'}}\n</a>\n<a class="item" ng-href="{{PROJECT.project_path}}/git/merges" ng-class="{active:inner_menu == \'merge\'}">\n    <i class="coding icon merge-request"></i>{{\'merge_request\' | i18n:\'code_menu\'}}\n</a>\n<a class="item" ng-href="{{PROJECT.project_path}}/git/plot" ng-if="DEPOT.hasCommits" ng-class="{active:inner_menu == \'plot\'}">\n    <i class="basic globe icon"></i>{{\'network\' | i18n:\'code_menu\'}}\n</a>\n<a class="item" ng-href="{{PROJECT.project_path}}/git/graph" ng-if="DEPOT.hasCommits" ng-class="{active:inner_menu == \'stat\'}">\n    <i class="chart basic icon"></i>{{\'statistic\' | i18n:\'code_menu\'}}\n</a>\n<a class="item" ng-href="{{PROJECT.project_path}}/git/pages" ng-class="{active:inner_menu == \'pages\'}" ng-if="PROJECT.current_user_role === \'owner\' || PROJECT.current_user_role === \'admin\'">\n    <i class="globe icon"></i>{{\'pages\' | i18n:\'code_menu\'}}\n</a>\n<a ng-if="isExpActive(\'qc-v2\')" class="item" id="inner-menu-qc-button" ng-href="{{PROJECT.project_path}}/git/qc" ng-class="{active:inner_menu == \'qc\'}">\n    <i class="certificate icon"></i>{{\'code_analysis\' | i18n:\'code_menu\'}}\n</a>\n\n<div class="sep"></div>\n\n<div class="clone-panel" ng-controller="ProjectTitleController" style="font-size: 14px;">\n    <div style="margin-right: -5px;">\n        <a ng-click="changeCloneUrl(\'https\')" class="switch-btn" ng-class="{disabled:cur_clone_type==\'https\'}">HTTPS</a>\n        <a ng-click="changeCloneUrl(\'ssh\')" class="switch-btn" ng-class="{disabled:cur_clone_type==\'ssh\'}">SSH</a>\n        <span style="margin-right: -5px;">{{\'access_repo\' | i18n:\'code_menu\'}}</span>\n        <a href="/help/doc/git/ssh-key.html" target="_blank"><i class="help circle icon" style="color: rgba(51, 51, 51, 0.6);"></i></a>\n    </div>\n    <div class="ui action small input" style="font-size:12px; margin-top: 10px;">\n        <input type="text" id="clone-url-input" ng-model="cur_clone_url" style="height: 35px;" readonly="readonly" onclick="this.select();">\n        <div class="ui right icon button mini copy-btn" clip-copy="cur_clone_url" clip-click="do_click()" style="line-height:10px;"><i class="icon" ng-class="{\'green checkmark\':copied,\'paste\':!copied}" data-position="top center" data-variation="inverted" data-html="{{\'copy\' | i18n:\'code_menu\'}}" cg-popup></i></div>\n    </div>\n    <div class="git-version-tips">\n        {{\'version_tips\' | i18n:\'code_menu\'}}\n    </div>\n</div>\n<a class="scroll-holder" style="height: 90px"></a>\n'),a.put("app/git/public_view/inner_menu.html",'<style>\n    #project-clone-url {\n        display: inline-block;\n        border: 1px solid #d8d8d8;\n        border-right: none;\n        height: 25px;\n        padding: 0 5px;\n        line-height: 27px;\n        border-radius: 2px 0 0 2px;\n\n    }\n</style>\n\n<div ng-controller="ProjectTitleController" class="public-project-view-top" style="height:60px;">\n\n    <div class="project-title ui coding">\n        <img class="project-logo" ng-src="{{PROJECT.icon}}" alt="项目logo" width="48px" height="48px"/>\n\n        <div class="project-name">\n            <span ng-bind-html="PROJECT.owner_user_home"></span>/<a ng-href="{{PROJECT.project_path}}/git">{{PROJECT.name}}</a>\n            <span ng-if="PROJECT.recommended >= 1" style="font-size: 22px;position: relative;top:4px;"><i\n                                                   class="ui coding icon coding-recommended red"></i></span>\n\n            <div class="watch-panel ui coding floated right">\n                <a ng-href="{{PROJECT.depot_path}}/pull/create" ng-if="PROJECT.forked && PROJECT.owner_id == USER.id">\n                    <span class="watch button pulls"><i class="coding icon pull-request"></i>\n                        Pull Request\n                    </span>\n                </a>\n\n                <span ng-if="!PROJECT.stared" ng-click="star()">\n                    <a class="watch button" title="点击收藏此项目"><i class="star icon"></i> 收藏</a>\n                </span>\n                <span ng-if="PROJECT.stared" ng-click="unstar()">\n                    <a class="watch button" title="点击取消收藏">\n                        <i class="green checkmark icon"></i>\n                        {{stared_msg}}\n                    </a>\n                </span>\n                <span class="watch count">\n                    <a ng-href="{{PROJECT.project_path}}/stargazers">\n                        {{PROJECT.star_count}}\n                    </a>\n                </span>\n\n                <span ng-if="!PROJECT.watched" ng-click="watch()">\n                    <a class="watch button" title="点击关注此项目"><i class="unhide icon"></i> 关注</a>\n                </span>\n                <span ng-if="PROJECT.watched" ng-click="unwatch()">\n                    <a class="watch button" title="点击取消关注"><i class="green checkmark icon"></i>\n                        {{watched_msg}}\n                    </a>\n                </span>\n                <span class="watch count">\n                    <a ng-href="{{PROJECT.project_path}}/watchers">\n                        {{PROJECT.watch_count}}\n                    </a>\n                </span>\n\n                <span ng-show="PROJECT.owner_id == USER.id">\n                    <a class="watch button"><i class="coding icon fork"></i>Fork</a>\n                </span>\n                <span ng-show="PROJECT.owner_id != USER.id" ng-click="fork()">\n                    <a class="watch button"><i class="coding icon fork"></i>Fork</a>\n                </span>\n                <span class="watch count">\n                    <a ng-href="{{PROJECT.depot_path}}/forks">\n                        {{PROJECT.fork_count}}\n                    </a>\n                </span>\n\n            </div>\n        </div>\n        <span class="project-fork" ng-if="PROJECT.forked && DEPOT.parent.depot_path">Fork 自\n            <a ng-href="{{DEPOT.parent.depot_path}}">{{PROJECT.parent_depot_path}}</a>\n        </span>\n    </div>\n\n    <div class="public-project-view-third ui coding clearfix">\n        <div style="width:900px;display:inline-block;float:left;word-break: break-all;" ng-if="PROJECT.is_public && PROJECT.description"\n             cg-show-more="PROJECT.description"\n             limit-to="200"></div>\n        <div style="width:900px;display:inline-block;float:left;" ng-if="!(PROJECT.is_public && PROJECT.description)">\n            暂无描述\n\n        </div>\n        <div class="clone-panel coding ui floated right">\n            <div class="ui action input mini">\n                <div id="project-clone-url" class="ui dropdown project-clone-url-button coding floated left">\n                    <div class="text" style="line-height:27px">HTTPS</div>\n                    <i class="dropdown icon" style="margin: 0;"></i>\n\n                    <div class="menu">\n                        <div ng-click="changeCloneUrl(\'https\');" class="item">HTTPS</div>\n                        <div ng-click="changeCloneUrl(\'ssh\')" class="item">SSH</div>\n                        <div ng-click="changeCloneUrl(\'git\')" class="item">GIT(只读)</div>\n                    </div>\n                </div>\n                <input type="text" ng-model="cur_clone_url" readonly="readonly" onclick="this.select();"\n                       style="border-radius:0;height: 27px; width: 150px;padding: 0.5em 0.5em;">\n\n                <div class="ui right icon button mini copy-btn" clip-copy="cur_clone_url" clip-click="do_click()" style="padding:0 10px;border:1px solid #ddd;box-shadow:none;position: relative;left:-1px;line-height:10px">\n                    <i class="icon" ng-class="{\'green checkmark\':copied,\'paste\':!copied}" data-position="top center" data-variation="inverted" data-html="复制" cg-popup></i>\n                </div>\n\n                <a style="margin-left: 10px;" href="/help/doc/git/ssh-key.html" target="_blank"><i class="help circle icon" style="color: rgba(51, 51, 51, 0.6);"></i></a>\n            </div>\n        </div>\n    </div>\n\n</div>\n<div class="ui coding clearfix"></div>\n\n<div ng-if="tag_menu != \'forks\' || tag_menu != \'watchers\' || tag_menu != \'stargazers\'"\n     ng-controller="publicProjectViewController" class="public-project-view-second">\n    <div class="public-project-view-second ui tabular menu" ng-init="project_path = PROJECT.project_path;">\n        <a class="item" ng-class="{active:tag_menu == \'basic\'}" ng-href="{{project_path}}/git">{{\'code\' | i18n:\'code_menu\'}}</a>\n        <a class="item" ng-class="{active:tag_menu == \'branch\'}" ng-href="{{project_path}}/git/branches">{{\'branches\' | i18n:\'code_menu\'}}</a>\n        <a class="item" ng-class="{active:tag_menu == \'tag\'}" ng-href="{{project_path}}/git/tags">{{\'tags\' | i18n:\'code_menu\'}}</a>\n        <a class="item" ng-class="{active:tag_menu == \'compare\'}" ng-href="{{project_path}}/git/compare">{{\'compare\' | i18n:\'code_menu\'}}</a>\n        <a class="item" ng-class="{active:tag_menu == \'pulls\'}" ng-href="{{PROJECT.depot_path}}/pulls">Pull Request<span class="ui circular label" ng-show="tag_menu == \'pulls\'">{{data.totalRow}}</span></a>\n        <a class="item" ng-class="{active:tag_menu == \'plot\'}" ng-if="DEPOT.hasCommits" ng-href="{{project_path}}/git/plot">{{\'network\' | i18n:\'code_menu\'}}</a>\n        <a class="item" ng-class="{active:tag_menu == \'stat\'}" ng-if="DEPOT.hasCommits"\n           ng-href="{{project_path}}/git/graph">{{\'statistic\' | i18n:\'code_menu\'}}</a>\n        <a class="item" ng-class="{active:tag_menu == \'pages\'}" ng-if="PROJECT.current_user_role === \'owner\' || PROJECT.current_user_role === \'admin\'"\n           ng-href="{{project_path}}/git/pages">{{\'pages\' | i18n:\'code_menu\'}}</a>\n        <a class="item" ng-class="{active:tag_menu == \'ci\'}" ng-if="(USER.test | testMember: \'ci\') && (PROJECT.current_user_role === \'owner\' || PROJECT.current_user_role === \'member\')"\n           ng-href="{{project_path}}/continuousIntegration">持续集成</a>\n        <a class="item" ng-class="{active:tag_menu == \'topic\'}" ng-href="{{project_path}}/topic">讨论</a>\n        <a class="item" ng-if="!isExpActive(\'qc-v2\')" ng-class="{active:tag_menu == \'qc\'}" ng-href="{{project_path}}/qc">质量管理</a>\n        <a class="item" ng-if="isExpActive(\'qc-v2\')" ng-class="{active:tag_menu == \'qc\'}" ng-href="{{project_path}}/git/qc">代码分析</a>\n        <a class="item" ng-class="{active:tag_menu == \'setting\'}" ng-if="USER.id == PROJECT.owner_id"\n           ng-href="{{project_path}}/setting">设置</a>\n        <a class="item" ng-class="{active:tag_menu == \'members\'}"\n           ng-if="PROJECT | isRole:MEMBER"\n           ng-href="{{project_path}}/members">项目成员</a>\n    </div>\n</div>\n'),a.put("app/help/content.html",'<div class="help box">\n    <div class="title">\n        {{current_root_category.name}}\n    </div>\n    <div class="ui divider"></div>\n    <div class="content">\n        <div class="text">\n            <div ng-repeat="faq in faqs" class="faqs">\n                <p class="faq title" ng-if="faq.name">{{faq.name}}</p>\n\n                <div class="questions" ng-repeat="q in faq.questions" ng-class="{active:q.code == question}"\n                     ng-if="q.status == 1">\n                    <p class="question"><i class="angle  icon"\n                                           ng-class="{down:q.code == question,right:q.code != question}"></i>\n                        <a><span\n                                ng-click="openQA(q.code)"\n                                ng-class="{active:q.code == question}">{{q.question}}</span></a>\n                    </p>\n                    <a name="{{q.code}}"></a>\n\n                    <p class="answer" cg-bind-html="q.answer" ng-if="q.code == question"></p>\n                </div>\n            </div>\n            <cg-monkey-loading image-size="30" container-margin="120"\n                               ng-if="load_question || loading_category"></cg-monkey-loading>\n        </div>\n    </div>\n</div>\n'),a.put("app/help/help.html",'<div id="help">\n    <div class="ui grid help">\n        <div class="row">\n            <div class="four wide column">\n                <div ng-include="\'app/help/menu.html\'"></div>\n            </div>\n            <div class="twelve  wide column">\n                <div class="column">\n                    <div ng-include="\'app/help/content.html\'"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div ng-include="\'app/layout/global_footer/global_footer.html\'"></div>\n'),a.put("app/help/index.html",'<div id="help">\n    <div class="help index">\n        <section>\n            <div class="search">\n                <div class="ui  fluid action input medium">\n                    <input type="text" placeholder="输入关键字，寻找你要的答案" ng-model="key" cg-enter="search(key)">\n\n                    <div class="ui default dark gray button" ng-click="search(key)">搜索</div>\n                </div>\n                <a class="ui default blue button floated right" style="margin-top: 30px" href="/u/coding/p/Coding-Feedback/topic"><i class="umbrella icon"></i>在线反馈</a>\n            </div>\n        </section>\n\n        <section>\n            <div class="commons">\n                <div class="title">常见问题</div>\n                <div class="ui grid">\n                    <div class="eight wide column">\n                        <ul>\n                            <li><i class="icon right angle"></i> <a\n                                    href="/help/about_coding/what_can_i_do_on_coding_net">我能在 Coding.net 上做些什么？ </a>\n                            </li>\n                            <li><i class=" icon right angle"></i> <a\n                                    href="/help/about_users/third_party_account_login">是否可以通过第三方账号登录？ </a>\n                            </li>\n                            <li><i class=" icon right angle"></i> <a\n                                    href="/help/about_users/what_is_bubbling">什么是冒泡？ </a>\n                            </li>\n                            <li><i class=" icon right angle"></i> <a\n                                    href="/help/about_users/how_to_send_private_messages">如何发送私信？ </a></li>\n                        </ul>\n                    </div>\n                    <div class="eight wide column">\n                        <ul>\n                            <li><i class=" icon right angle"></i><a\n                                    href="/help/project_manage/how_many_projects_an_account_can_create">一个账号可以创建多少个项目？</a>\n                            </li>\n                            <li><i class=" icon right angle"></i> <a\n                                    href="/help/about_git/how_to_access_git_depository">如何访问 git 仓库？</a></li>\n                            <li><i class=" icon right angle"></i> <a href="/help/project_demos/what_is_demo_platform">什么是演示平台？ </a>\n                            </li>\n                            <li><i class=" icon right angle"></i> <a href="/help/about_qc/what_is_the_quality_analysis">什么是质量分析？ </a>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </section>\n        <section>\n            <div class="quick">\n                <ul>\n                    <a href="/help/about_coding">\n                        <li>\n                            <div>\n                                <div>\n                                    <i class="coding icon monkey"></i>\n                                </div>\n                                <div class="title">Coding 入门</div>\n                                <div class="desc">\n                                    了解 Coding 是什么<br/>以及我们能利用 Coding 做些什么\n                                </div>\n                            </div>\n                        </li>\n                    </a>\n                    <a href="/help/about_users">\n                        <li>\n                            <div>\n                                <div>\n                                    <i class="icon user"></i>\n                                </div>\n                                <div class="title">账户&社交</div>\n                                <div class="desc">\n                                    了解如何加入 Coding 社区<br/>享受更多互动乐趣\n                                </div>\n                            </div>\n                        </li>\n                    </a>\n                    <a href="/help/project_manage">\n                        <li>\n                            <div>\n                                <div>\n                                    <i class="coding icon project"></i>\n                                </div>\n                                <div class="title">项目管理</div>\n                                <div class="desc">\n                                    了解如何使用讨论、任务、文件等<br/>功能进行项目管理\n                                </div>\n                            </div>\n                        </li>\n                    </a>\n                </ul>\n                <ul>\n                    <a href="/help/about_git">\n                        <li>\n                            <div>\n                                <div>\n                                    <i class="icon code"></i>\n                                </div>\n                                <div class="title">代码托管</div>\n                                <div class="desc">\n                                    利用Git仓库进行<br/>代码托管的简易说明\n                                </div>\n                            </div>\n                        </li>\n                    </a>\n                    <a href="/help/webide">\n                        <li>\n                            <div>\n                                <div>\n                                    <i class="edit icon"></i>\n                                </div>\n                                <div class="title">WebIDE</div>\n                                <div class="desc">\n                                    在线编辑代码<br/>在线集成开发环境\n                                </div>\n                            </div>\n                        </li>\n                    </a>\n                    <a href="/help/project_demos">\n                        <li>\n                            <div>\n                                <div>\n                                    <i class="icon cloud"></i>\n                                </div>\n                                <div class="title">项目辅助功能</div>\n                                <div class="desc">\n                                    在线演示平台<br/>在线生成质量分析报告\n                                </div>\n                            </div>\n                        </li>\n                    </a>\n\n                </ul>\n            </div>\n        </section>\n    </div>\n</div>\n<div ng-include="\'app/layout/global_footer/global_footer.html\'"></div>\n'),a.put("app/help/menu.html",'<div class="help menu">\n    <div class="title">\n        帮助中心\n    </div>\n\n    <div class="ui divider"></div>\n    <div class="help search">\n        <div class="ui action input default">\n            <input type="text" placeholder="请输入关键词" ng-model="key" ng-keypress="search(key)">\n\n            <div class="ui default dark gray button" ng-click="search(key)">搜索</div>\n        </div>\n    </div>\n    <div class="help list">\n        <ul class="list" ng-if="root_category.length > 0">\n            <li ng-class="{active:current_root_category.code==category.code}" ng-repeat="category in root_category"\n                ng-click="loadQuestions(category)">{{category.name}}<i\n                    ng-if="current_root_category.code==category.code" class="double angle right icon"></i></li>\n        </ul>\n        <cg-monkey-loading image-size="30" ng-if="loading_category"></cg-monkey-loading>\n    </div>\n    <div class="ui divider"></div>\n    <div class="help support">\n        <p>技术支持 & 问题建议</p>\n\n        <p><i class="icon mail circular inverted "></i><img src="https://dn-coding-net-production-static.qbox.me/static/c07397bfc519f4b688852ffb2df6e618.png"\n                                                            style="height: 16px;vertical-align: middle;opacity: 0.89;"/>\n        </p>\n\n        <p><i class="icon help circular inverted "></i><a class="support-text" href="/u/coding/p/Coding-Feedback/topic">在线反馈</a>\n        </p>\n    </div>\n</div>\n'),a.put("app/layout/footer_old.html",'<div id="footer" ng-controller="FooterController">\n    <div class="footer">\n        <div class="us">\n            <ul>\n                <li><a href="//coding.net/?redirect=false" target="_self">首页</a></li>\n                <li><a href="//coding.net/about">关于 CODING</a></li>\n                <li><a href="//coding.net/jobs">招贤纳士</a></li>\n                <li><a href="//coding.net/terms">服务条款</a></li>\n                <li><a href="//coding.net/privacy">隐私策略</a></li>\n                <li><a href="//coding.net/security">安全策略</a></li>\n                <li><a href="//coding.net/event" target="_self">CODING 活动</a></li>\n                <li><a href="//blog.coding.net/">Blog</a></li>\n                <li><a href="//coding.net/app">App</a></li>\n                <li><a href="//coding.net/shop" target="_self">Shop</a></li>\n                <li><a href="//open.coding.net">API</a></li>\n                <li><a href="https://mart.coding.net" style="font-weight: bold;">码市</a></li>\n                <li ng-show="isExpActive(\'i18n\')"><a ng-click="changeLanguage(\'zh-CN\')" style="font-weight: bold;cursor: pointer;">中文</a></li>\n                <li ng-show="isExpActive(\'i18n\')"><a ng-click="changeLanguage(\'en-US\')" style="font-weight: bold;cursor: pointer;">English</a></li>\n\n            </ul>\n            <p>\n                Copyright&nbsp;&nbsp;&copy;&nbsp;2017&nbsp;Coding.net&nbsp;&nbsp;\n                <a href="http://www.miitbeian.gov.cn/" target="_blank" style="color:#999;text-decoration:none;">粤ICP备14029750号-1</a>&nbsp;&nbsp;\n                粤B-20140247&nbsp;&nbsp;\n                <a href="http://www.gdgs.gov.cn/" style="color:#999;text-decoration:none;">广东省工商行政管理局</a>\n            </p>\n        </div>\n        <div class="share">\n            <div class="weixin">\n                <img class="share-img" src="https://dn-coding-net-production-static.qbox.me/static/f16717708cd0f2f090ad7a68cdfa7b33.jpg" ng-init="show_qrcode=false" ng-click="clickPop($event)"/>\n                <div class="dropdown up">\n                    <img src="https://coding.net/static/fcdf6ecd90f6022d143a5e06fbe391b8.jpg" alt="Coding 微信公众号二维码"/>\n                </div>\n            </div>\n            <a href="http://weibo.com/p/1006065153943878/home?from=page_100606&mod=TAB#place" target="_blank">\n                <img class="share-img" src="https://dn-coding-net-production-static.qbox.me/static/807caa78420d2e20a8dc6b61bb620527.jpg"/>\n            </a>\n            <a href="http://zhuanlan.zhihu.com/coding-net" target="_blank">\n                <img class="share-img" src="https://dn-coding-net-production-pp.qbox.me/5e216900-f543-4d33-9324-3fefb210f8a1.png">\n            </a>\n            <a href="mailto:support@coding.net">\n                <img class="share-img" src="https://dn-coding-net-production-static.qbox.me/static/0b941854e5d05120d662e402b72cd1bc.jpg"/>\n            </a>\n        </div>\n    </div>\n</div>\n'),a.put("app/layout/global_footer/global_footer.html",'<footer id="global_footer" class="section fp-auto-height">\n    <div class="footer">\n        <ul class="us">\n            <li>\n                <h3>产品</h3>\n                <ul class="list">\n                    <li><a href="/git" target="_blank">代码托管</a></li>\n                    <li><a href="/pm" target="_blank">项目管理</a></li>\n                    <li><a href="/webide" target="_blank">WebIDE</a></li>\n                    <li><a href="/app" target="_blank">App 下载</a></li>\n                    <li><a href="https://blog.coding.net/update/blogs" target="_blank">更新日志</a></li>\n                </ul>\n            </li>\n            <li>\n                <h3>公司</h3>\n                <ul class="list">\n                    <li><a href="/about" target="_blank">关于 Coding</a></li>\n                    <li><a href="/event" target="_blank">Coding 活动</a></li>\n                    <li><a href="https://coding.net/shop" target="_blank">Coding 商城</a></li>\n                    <li><a href="/jobs" target="_blank">加入我们</a></li>\n                    <li><a href="/about#partners" target="_blank">合作伙伴</a></li>\n                </ul>\n            </li>\n            <li>\n                <h3>支持</h3>\n                <ul class="list">\n                    <li><a href="https://coding.net/help" target="_blank">帮助中心</a></li>\n                    <li><a href="https://status.coding.net" target="_blank">服务状态</a></li>\n                    <li><a href="/feedback" target="_blank">在线反馈</a></li>\n                    <li><a href="https://open.coding.net" target="_blank">API</a></li>\n                    <li><a href="https://blog.coding.net/" target="_blank">博客</a></li>\n                </ul>\n            </li>\n            <li>\n                <h3>联系我们</h3>\n                <ul class="list">\n                    <li><a href="tel:4000263464">400-026-3464</a></li>\n                    <li><a href="mailto:support@coding.net">support@coding.net</a></li>\n                    <li>深圳 | 上海 | 北京 | 成都 | 西雅图</li>\n                    <li>\n                        <div class="share" style="padding-top: 15px;">\n                            <div class="weixin">\n                                <img class="share-img" id="wechat" src="https://dn-coding-net-production-static.qbox.me/static/66e6c7fa419f064ad521e645f1d9e399.png"/>\n                                <div class="dropdown up">\n                                    <img src="https://dn-coding-net-production-static.qbox.me/static/fcdf6ecd90f6022d143a5e06fbe391b8.jpg" alt="Coding 微信公众号二维码">\n                                </div>\n                            </div>\n                            <a href="http://weibo.com/n/coding" target="_blank" style="padding-left: 20px;">\n                                <img class="share-img" src="https://dn-coding-net-production-static.qbox.me/static/1ce58933cb197c1f0d08eaa090469895.png"/>\n                            </a>\n                            <a href="https://zhuanlan.zhihu.com/coding-net" target="_blank" style="padding-left: 20px;">\n                                <img class="share-img" src="https://dn-coding-net-production-static.qbox.me/static/28e7a2c538b7f16521900d7a0be57995.png"/>\n                            </a>\n                        </div>\n                    </li>\n                </ul>\n            </li>\n        </ul>\n    </div>\n    <!-- TODO: 国际化 -->\n    <!-- <div class="language">\n        <a href="javascript:void(0);" onclick="changeE()" id="lan_e"><i class="globe icon"></i>切换到：<span>English</span></a>\n        <a href="javascript:void(0);" onclick="changeC()" id="lan_c" style="display: none"><i class="globe icon"></i> Switch to：<span>中文版</span></a>\n    </div>\n    <script>\n        /*\n        function changeE() {\n            document.getElementById("lan_e").style.display = "none";\n            document.getElementById("lan_c").style.display = "inline";\n        }\n        function changeC() {\n            document.getElementById("lan_e").style.display = "inline";\n            document.getElementById("lan_c").style.display = "none";\n        }\n        */\n    </script> -->\n    <div class="record">\n        <div class="record_img_info">\n            <a href="/index"><img src="https://dn-coding-net-production-static.qbox.me/static/47572b5d56a0c76fa79c25c0a08776e2.png" height="36" width="353" style="position: absolute;"></a>\n            <div class="record_info">\n            <p>\n                <a href="/privacy" target="_blank">隐私策略</a> |\n                <a href="/terms" target="_blank">服务条款</a> |\n                <a href="/security" target="_blank">安全策略</a>\n            </p>\n            <p>\n                <a href="/index">© 2017 Coding.net</a> |\n                <a href="http://www.miitbeian.gov.cn/" target="_blank" >粤ICP备14029750号-1</a>\n            </p>\n        </div>\n        </div>\n    </div>\n</footer>'),a.put("app/layout/top_menu.html",'<a class="left logo item" ng-if="USER" cg-jump-out-angular-href="/user" target="_self" style="left: 1px;">\n    <img src="https://dn-coding-net-production-static.qbox.me/static/7a51352fa766f4176d7c4543339e0e98.png" height="60"/>\n</a>\n<a class="left logo item" ng-if="USER === false" cg-jump-out-angular-href="/" target="_self" style="padding: 8px 2px;">\n    <img src="https://dn-coding-net-production-static.qbox.me/static/5ee8025c9dc63a6ff53153705d0e7ce8.png" height="45"/>\n</a>\n<div class="left menu" data-ng-controller="QuickSearchController" ng-style="{\'left\':USER === false ? \'40px\':\'75px\'}">\n    <div id="quick-search" style="margin: 9px 15px;"\n         cg-advance-esearch\n         ng-model="form.search_text"\n         ng-if="USER">\n        <div class="ui icon small input search-input" style="z-index: 899;">\n            <input data-ng-model="form.search_text" name="q" class="search" type="text" placeholder="Search..." cg-textarea-editable>\n        </div>\n    </div>\n    <!--登录后-->\n    <div class="public-pages" ng-if="USER">\n        <div class="normal">\n            <a cg-auto-refresh-href="https://e.coding.net/" target="_blank" rel="noopener noreferrer" class="item">{{\'enterprise\' | i18n:\'top_menu\'}}</a>\n            <a ng-if="isExpActive(\'vip\')" cg-auto-refresh-href="/vip" class="item vip-menu-item">{{\'vip\' | i18n:\'top_menu\'}}</a>\n            <a class="item" href="/webide" target="_blank" rel="noopener noreferrer">IDE</a>\n            <a cg-auto-refresh-href="/pp" class="item">{{\'bubbles\' | i18n:\'top_menu\'}}</a>\n        </div>\n        <div class="folded">\n            <div class="ui simple pointing dropdown" style="padding: 0;line-height: normal;">\n                <a href="javascript:void(0);" class="item">{{\'nav\' | i18n:\'top_menu\'}}</a>\n                <div class="menu" style="padding: 2px;left: -10px;">\n                    <a class="item func-item" cg-auto-refresh-href="https://e.coding.net/" target="_blank" rel="noopener noreferrer" class="item">{{\'enterprise\' | i18n:\'top_menu\'}}</a>\n                    <a class="item func-item" href="/webide" target="_blank" rel="noopener noreferrer">IDE</a>\n                    <a class="item func-item" cg-auto-refresh-href="/pp">{{\'bubbles\' | i18n:\'top_menu\'}}</a>\n                </div>\n            </div>\n        </div>\n    </div>\n    <!--未登录-->\n    <div class="public-pages" ng-if="USER === false" style="width: 352px;">\n        <div class="normal not-login-menu">\n            <div class="ui simple dropdown">\n                <a href="javascript:void(0);" class="item no-arrow">{{\'functions\' | i18n:\'top_menu\'}}</a>\n                <div class="menu">\n                    <a class="item func-item" href="/git" target="_blank" rel="noopener noreferrer">{{\'git_repo\' | i18n:\'top_menu\'}}</a>\n                    <a class="item func-item" href="/pm" target="_blank" rel="noopener noreferrer">{{\'project_management\' | i18n:\'top_menu\'}}</a>\n                    <a class="item func-item" href="/webide" target="_blank" rel="noopener noreferrer">WebIDE</a>\n                    <a class="item func-item" href="/app" target="_blank" rel="noopener noreferrer">APP</a>\n                </div>\n            </div>\n            <a cg-auto-refresh-href="https://e.coding.net/" target="_blank" rel="noopener noreferrer" class="item">{{\'enterprise\' | i18n:\'top_menu\'}}</a>\n            <a cg-auto-refresh-href="/pp" class="item">{{\'bubbles\' | i18n:\'top_menu\'}}</a>\n            <a cg-auto-refresh-href="http://blog.coding.net/" target="_blank" rel="noopener noreferrer" class="item">{{\'blog\' | i18n:\'top_menu\'}}</a>\n            <a class="item func-item" href="/help" target="_blank" rel="noopener noreferrer">{{\'help\' | i18n:\'top_menu\'}}</a>\n        </div>\n        <div class="folded">\n            <div class="ui simple pointing dropdown" style="padding: 0;line-height: normal;">\n                <a href="javascript:void(0);" class="item">{{\'nav\' | i18n:\'top_menu\'}}</a>\n                <div class="menu" style="padding: 2px;left: -10px;">\n                    <a class="item func-item" href="/git" target="_blank" rel="noopener noreferrer">{{\'git_repo\' | i18n:\'top_menu\'}}</a>\n                    <a class="item func-item" href="/pm" target="_blank" rel="noopener noreferrer">{{\'project_management\' | i18n:\'top_menu\'}}</a>\n                    <a class="item func-item" href="/webide" target="_blank" rel="noopener noreferrer">WebIDE</a>\n                    <a class="item func-item" href="/app" target="_blank" rel="noopener noreferrer">APP</a>\n                    <a class="item func-item" cg-auto-refresh-href="/upgrade">{{\'upgrade\' | i18n:\'top_menu\'}}</a>\n                    <a class="item func-item" cg-auto-refresh-href="/pp">{{\'bubbles\' | i18n:\'top_menu\'}}</a>\n                    <a class="item func-item" cg-auto-refresh-href="http://blog.coding.net/" target="_blank">{{\'blog\' | i18n:\'top_menu\'}}</a>\n                    <a class="item func-item" href="/help" target="_blank" rel="noopener noreferrer">{{\'help\' | i18n:\'top_menu\'}}</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="header" ng-include="\'app/layout/top_menu/\' + (top_menu_tpl ? top_menu_tpl : \'title\') + \'.html\'"></div>\n\n<div class="right menu" ng-if="USER">\n    <div class="ui item mart-logo">\n        <a class="icon item" href="https://mart.coding.net" target="_blank">\n            <img src="https://dn-coding-net-production-static.qbox.me/static/d96b3b8192d6abefb2585d80fa81e56b.png" />\n        </a>\n        <span class="vertical-line"></span>\n    </div>\n\n    <cg-coding-cli ng-if="isExpActive(\'coding-cli\')" ></cg-coding-cli>\n\n    <!-- 添加 -->\n    <div class="ui simple pointing dropdown item add" style="padding: 0;">\n        <div class="menu">\n            <a class="item" ng-click="createTask()" ng-if="USER"><i class="tasks icon"></i>{{\'task\' | i18n:\'top_menu\'}}</a>\n            <a class="item" href="/user/projects/create"><i class="coding project icon"></i>{{\'project\' | i18n:\'top_menu\'}}</a>\n            <a class="item" href="/team/create"><i class="coding team icon"></i>{{\'teams\' | i18n:\'top_menu\'}}</a>\n            <a class="item" ng-click="makeBubble()"><i class="coding bubble icon"></i>{{\'bubble\' | i18n:\'top_menu\'}}</a>\n            <a class="item" ng-click="showSendMsgDialog()"><i class="mail icon"></i>{{\'message\' | i18n:\'top_menu\'}}</a>\n            <a class="item" ng-click="addFriend()"><i class="user icon"></i>{{\'friend\' | i18n:\'top_menu\'}}</a>\n        </div>\n        <a class="add-project icon item"><i class="add icon"></i></a>\n    </div>\n    <a class="icon item inbox"\n       cg-auto-refresh-href="/user/projects">\n        <i class="big coding project icon"></i>\n    </a>\n    <!-- 任务 -->\n    <div class="ui simple pointing dropdown item add" style="padding: 0;">\n        <div class="menu task-menu" ng-class="{\'wide\': tasks.length > 0}">\n            <div class="top-menu-tasks tasks">\n                <div ng-repeat="task in tasks track by task.id" cg-task-simple-item-topmenu="task"></div>\n                <div class="empty center list" ng-if="tasks_loaded && tasks.length == 0">{{\'no_task\' | i18n:\'top_menu\'}}</div>\n                <div class="empty center list" ng-if="!tasks_loaded && tasks.length == 0">\n                    <span><i class="loading icon"></i>{{\'loading\' | i18n:\'top_menu\'}}</span>\n                </div>\n                <div class="task" ng-if="tasks.length > 0">\n                    <a cg-auto-refresh-href="/user/tasks?owner={{USER.id}}">{{\'show_all_tasks\' | i18n:\'top_menu\'}}<i class="angle double right icon"></i></a>\n                </div>\n            </div>\n        </div>\n        <a class="icon item inbox"\n           ng-class="{\'message\': $root.unread.task_notify}"\n           cg-auto-refresh-href="/user/tasks?owner={{USER.id}}">\n            <i class="tasks icon"></i>\n        </a>\n    </div>\n    <!-- 通知 -->\n    <div class="ui simple pointing dropdown item add" style="padding: 0;">\n        <div class="menu wide message-menu">\n            <div class="tabs flex-box">\n                <div class="tab flex-auto-justify " ng-class="{\'active\': messageTab == 1}" ng-click="tabClick(1)">\n                    {{\'notifications\' | i18n:\'top_menu\'}} <span ng-if="$root.unread.notifications > 0" ng-bind="$root.unread.notifications"></span>\n                </div>\n                <div class="tab flex-auto-justify " ng-class="{\'active\': messageTab == 2}" ng-click="tabClick(2)">\n                    {{\'message\' | i18n:\'top_menu\'}} <span ng-if="$root.unread.messages > 0" ng-bind="$root.unread.messages"></span>\n                </div>\n            </div>\n            <div class="frames">\n                <div class="frame" ng-if="messageTab == 1">\n                    <div class="list-wrapper">\n                        <div infinite-scroll="loadData(\'Notifications\', true)" infinite-scroll-distance="1" infinite-scroll-parent="true">\n                            <div class="notification list"\n                                 ng-repeat="noty in $root.NotificationsList track by noty.id"\n                                 ng-class="{\'oneline\': noty.line == 1, \'twoline\': noty.line == 2, \'unread\': noty.status == \'0\'}"\n                                 ng-click="markRead(noty)">\n                                 <div ng-bind-html="noty.content" class="ellipsis-2"></div>\n                            </div>\n                            <div class="list" ng-if="$root.lastPage.Notifications >= 0 || $root.NotificationsList.length == 0" ng-class="{\'empty\': $root.NotificationsList.length == 0}">\n                                <div ng-if="$root.lastPage.Notifications < 0 && $root.NotificationsList.length == 0">\n                                    <div>{{\'no_notification\' | i18n:\'top_menu\'}}</div>\n                                </div>\n                                <div ng-if="$root.lastPage.Notifications >= 0" class="loading block">\n                                    <span><i class="icon loading"></i>{{\'loading\' | i18n:\'top_menu\'}}</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <a class="show-all-link" ng-if="$root.NotificationsList.length != 0" cg-auto-refresh-href="/user/notifications/basic">\n                        {{\'show_all_notifications\' | i18n:\'top_menu\'}} <i class="double right angle icon"></i>\n                    </a>\n                </div>\n                <div class="frame" ng-if="messageTab == 2">\n                    <div class="list-wrapper">\n                        <div infinite-scroll="loadData(\'Messages\')" infinite-scroll-distance="1" infinite-scroll-parent="true">\n                            <a class="message list"\n                               ng-repeat="message in $root.MessagesList  track by message.id"\n                               ng-class="{\'unread\': message.status == \'0\', \'replied\': message.sender.id == USER.id}"\n                               ng-href="/user/messages/history/{{message.friend.global_key}}">\n                                <img ng-src="{{message.friend.avatar}}">\n                                <div class="message-friend ellipsis" ng-bind="message.friend.name"></div>\n                                <div class="message-content ellipsis">\n                                    <i class="reply mail icon"></i>\n                                    <span ng-bind-html="message.content"></span>\n                                </div>\n                            </a>\n                            <div class="list empty" ng-if="$root.lastPage.Messages >= 0 || $root.MessagesList.length == 0">\n                                <div ng-if="$root.lastPage.Messages < 0 && $root.MessagesList.length == 0">\n                                    <div>{{\'no_message\' | i18n:\'top_menu\'}}</div>\n                                    <span class="ui small white button" ng-click="showSendMsgDialog()">{{\'send_message\' | i18n:\'top_menu\'}}</span>\n                                </div>\n                                <div ng-if="$root.lastPage.Messages >= 0" class="loading block">\n                                    <span><i class="icon loading"></i>{{\'loading\' | i18n:\'top_menu\'}}</span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <a class="show-all-link" ng-if="$root.MessagesList.length != 0" cg-auto-refresh-href="/user/messages">\n                        {{\'show_all_messages\' | i18n:\'top_menu\'}} <i class="double right angle icon"></i>\n                    </a>\n                </div>\n            </div>\n        </div>\n        <a class="inbox icon item message"\n           ng-if="$root.unread.notifications > 0"\n           cg-auto-refresh-href="/user/notifications/unread">\n            <i class="bell icon"></i>\n        </a>\n        <a class="inbox icon item message"\n           ng-if="$root.unread.messages > 0 && $root.unread.notifications <= 0"\n           cg-auto-refresh-href="/user/messages">\n            <i class="bell icon"></i>\n        </a>\n        <a class="inbox icon item"\n           ng-if="$root.unread.messages + $root.unread.notifications <= 0"\n           cg-auto-refresh-href="/user/notifications/basic">\n            <i class="bell icon"></i>\n        </a>\n    </div>\n    <!-- 下拉框 -->\n    <div class="ui dropdown item userinfo" ng-controller="UserDropdownController" cg-dropdown dropdown-setting="dropdown_settings">\n        <div class="menu frequently-projects">\n            <div class="frequently-used-projects"\n                 ng-include="\'app/layout/top_menu/frequently_used_projects.html\'">\n            </div>\n            <div class="menu-item-wrapper">\n                <div ng-if="isExpActive(\'vip\')" class="item with-border-bottom" ng-switch="USER.vip">\n                    <div class="dropdown-vip-menu-item" ng-switch-default>\n                        <a ng-href="/user/account/upgrade">\n                            <img src="https://dn-coding-net-production-static.qbox.me/static/f2fe88eaca3b889f88f1402c1920a36d.png" />\n                            <span>\n                                <span>普通会员</span>\n                                <span class="upgrade-entry">马上升级</span>\n                            </span>\n                        </a>\n                    </div>\n                    <div class="dropdown-vip-menu-item" ng-switch-when="2">\n                        <a ng-href="/user/account/upgrade">\n                            <img src="https://dn-coding-net-production-static.qbox.me/static/d1367cb84f851d1955b29623a74b1555.png" />\n                            <span>\n                                <span>银牌会员</span>\n                                <span class="upgrade-entry">马上升级</span>\n                            </span>\n                        </a>\n                    </div>\n                    <div class="dropdown-vip-menu-item" ng-switch-when="3" ng-href="/user/account/upgrade">\n                        <a ng-href="/user/account/upgrade">\n                            <img src="https://dn-coding-net-production-static.qbox.me/static/8dfd755c860d1ecdfba837138cacde9b.png" />\n                            <span>\n                                <span>金牌会员</span>\n                                <span class="upgrade-entry">续费 / 升级</span>\n                            </span>\n                        </a>\n                    </div>\n                    <div class="dropdown-vip-menu-item" ng-switch-when="4">\n                        <a ng-href="/user/account/upgrade?renew=true">\n                            <img src="https://dn-coding-net-production-static.qbox.me/static/653eea1961de3d573f9c329b0af613c3.png" />\n                            <span>\n                                <span>钻石会员</span>\n                                <span class="upgrade-entry">续费</span>\n                            </span>\n                        </a>\n                    </div>\n                </div>\n                <a class="item" ng-href="/user/account"><i class="dashboard icon"></i>{{\'account\' | i18n:\'top_menu\'}}</a>\n                <a class="item" ng-href="/user/account/setting/basic"><i class="user icon"></i>{{\'settings\' | i18n:\'top_menu\'}}</a>\n                <a class="item with-border-bottom" ng-href="/u/{{USER.global_key}}"><i class="magic icon"></i>{{\'profile\' | i18n:\'top_menu\'}}</a>\n                <a class="item with-border-bottom" ng-if="!isExpActive(\'vip\')" ng-href="/upgrade"><i class="circle up icon"></i>{{\'upgrade\' | i18n:\'top_menu\'}}</a>\n                <a class="item" ng-href="https://blog.coding.net" target="_blank"><i class="lightbulb icon"></i>{{\'blog\' | i18n:\'top_menu\'}}</a>\n                <a class="item" ng-href="https://coding.net/help" target="_blank"><i class="help icon"></i>{{\'help\' | i18n:\'top_menu\'}}</a>\n                <a class="item with-border-bottom" ng-href="/app"><i class="download disk icon"></i>{{\'app_download\' | i18n:\'top_menu\'}}</a>\n                <a class="item with-border-bottom" ng-href="javascript:void(0)" ng-click="logout()""><i class="sign out icon"></i>{{\'logout\' | i18n:\'top_menu\'}}</a>\n            </div>\n        </div>\n        <a cg-auto-refresh-href="/user" class="ui avatar image" ng-class="{\'message-breath\' : USER.prj_update_count > 0 || prj_update_count > 0}" title="{{USER.name}}">\n            <img ng-src="{{USER.avatar}}"/>\n        </a>\n        <i class="dropdown icon" id="dropdown-icon"></i>\n        <div class="guide-modal-shadow" id="top-menu-guide" ng-controller="TopMenuGuideController" ng-if="$root.canShowGuide(\'top-menu\')">\n            <div ng-show="modalVisible">\n                <div class="step-1">\n                    <div class="close" ng-click="close()">我知道了</div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="right menu" ng-if="USER === false">\n    <div class="ui item mart-logo">\n        <a class="icon item" href="https://mart.coding.net" target="_blank">\n            <img src="https://dn-coding-net-production-static.qbox.me/static/d96b3b8192d6abefb2585d80fa81e56b.png" />\n        </a>\n        <span class="vertical-line"></span>\n    </div>\n    <a class="ui coding register button" cg-auto-refresh-href="/register">{{\'register\' | i18n:\'top_menu\'}}</a>\n    <a class="ui coding white login button" cg-auto-refresh-href="/login">{{\'login\' | i18n:\'top_menu\'}}</a>\n</div>\n'),
a.put("app/layout/top_menu/empty.html","<span></span>\n"),a.put("app/layout/top_menu/frequently_used_projects.html",'<div class="projects-wrapper" ng-controller="FrequentlyProjectsController">\n    <div class="title clearfix">\n        <span class="coding floated left">\n            <i class="pin icon rotate30"></i>{{\'pin_projects\' | i18n:\'top_menu\'}}\n        </span>\n        <span class="coding floated right">\n            <a class="gray" href="/user/projects">\n                <i class="setting icon"\n                   data-position="top center"\n                   data-variation="inverted"\n                   data-html="{{\'pin_projects\' | i18n:\'top_menu\'}}"\n                   cg-popup></i>\n            </a>\n        </span>\n    </div>\n    <div class="content">\n        <div class="empty-list coding aligned center" ng-if="projects.length === 0 && loaded">\n            <p>\n                <i class="coffee icon"></i>\n                <span style="color: #666; line-height: 23px;">\n                    {{\'pin_projects_tip\' | i18n:\'top_menu\'}}<br/>\n                    {{\'hover_to_set_pin\' | i18n:\'top_menu\'}}\n                </span>\n            </p>\n            <a href="/user/projects" class="ui button">{{\'set_pin_projects_now\' | i18n:\'top_menu\'}}</a>\n        </div>\n        <div class="empty-list coding aligned center" ng-if="projects.length === 0 && loading && !loaded">\n            <p style="padding-top: 50px;">\n                <i class="loading icon"></i> {{\'loading\' | i18n:\'top_menu\'}}\n            </p>\n        </div>\n        <div class="">\n            <ul class="frequent-project-list clearfix">\n                <li ng-repeat="item in projects track by $index">\n                    <a class="pin-logo-wrapper" cg-auto-refresh-href="{{item.project_path}}">\n                        <img ng-src="{{item.icon}}" title="{{item.name}}"/>\n                    </a>\n                    <div class="title icon ellipsis" title="{{item.name}}" ng-class="{public: item.is_public}"\n                         ng-bind="item.name"></div>\n                    <i class="message-tip"\n                       ng-show="item.un_read_activities_count && !item.selected"\n                       ng-bind="item.un_read_activities_count"></i>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>'),a.put("app/layout/top_menu/group.html","<span>{{GROUP.name}}</span>"),a.put("app/layout/top_menu/project.html",'<style type="text/css">\n    #project_title_dropdown{min-width: 120px;height: 30px;}\n    #public-project-title{display: inline-block;padding: 10px 0;}\n    #project_title_dropdown .menu{font-size: 14px; width: 300px;}\n    #project_title_dropdown .menu .search.icon {padding-top: 6px;}\n    #project_title_dropdown .project-picker.wide .projects-outer .text {width: 210px!important;}\n    #project_title_dropdown i.triangle.icon {float: right; margin-top: 12px;}\n    @media only screen and (max-width: 1360px) {\n        #public-project-title{max-width: 200px;}\n    }\n    @media only screen and (min-width: 1361px) and (max-width: 1500px) {\n        #public-project-title{max-width: 300px;}\n    }\n    @media only screen and (min-width: 1500px) {\n        #public-project-title{max-width: none;}\n    }\n</style>\n<div ng-if="!PROJECT[\'is_public\']" id="project_title_dropdown" ng-controller="TopMenuProjectTitleController">\n    <div cg-task-project-picker="current_project"\n         non-cancelable="true"\n         projects="projects"\n         active="true">\n        <div id="public-project-title" class="text ellipsis">\n            <i ng-if="!current_project[\'is_public\'] && showTitle" class="lock icon"></i><span ng-if="showTitle" ng-bind="current_project.name"></span>\n        </div>\n        <i class="triangle down icon" ng-if="projects.length>1 && showTitle"></i>\n    </div>\n</div>\n\n'),a.put("app/layout/top_menu/team.html",'<span ng-bind="TEAM.name" class="top-user-name ellipsis" title="{{TEAM.name}}"></span>\n'),a.put("app/layout/top_menu/title.html",'<span class="top-menu-title" ng-controller="TopMenuTitleController" ng-bind="top_menu_title">\n</span>\n'),a.put("app/layout/top_menu/user.html",'<span ng-bind="USER.name" class="top-user-name ellipsis" title="{{USER.name}}"></span>\n'),a.put("app/project/edit_project_icon_modal.html",'<style type="text/css">\n    #edit-project-icon .project-icon {\n        height: 200px;\n        display: inline-flex;\n    }\n    #edit-project-icon .project-icon-show{\n        width: 128px;\n        height: 128px;\n    }\n    #edit-project-icon input[type="file"] {\n        display: block;\n        position: absolute;\n        margin: 0;\n        opacity: 0;\n        -ms-filter: \'alpha(opacity=0)\';\n        direction: ltr;\n        cursor: pointer;\n        z-index:999;\n        width: 98px;\n        height: 28px;\n        margin-top: -20px;\n        margin-left: -10px;\n    }\n</style>\n<div class="ui tiny40 modal" id="edit-project-icon-modal">\n\n</div>\n'),a.put("app/project/exp/attachment.html",'<style type="text/css">\n#inner-menu{width:240px;}\n#inner-menu .count{position: absolute;right: 28px;}\n#inner-menu > .no-defaults > .folder.no-default.editing .count{display:none;}\n#inner-menu > .no-defaults > .folder.item i.action.icon{cursor:pointer;margin:0 0 0 3px;display:none;}\n#inner-menu >  .no-defaults > .folder.active.item:hover i.action.icon{display:inline;}\n#inner-menu >  .no-defaults > .folder.active.item i.action.edit.icon:hover{color:cornflowerblue;}\n#inner-menu > .no-defaults > .sub_folders > .folder.item.sub_item.editing > .count{display: none}\n#inner-menu > .no-defaults > .folder.no-default.editing .count{display:none;}\n#inner-menu > .no-defaults > .folder.item i.action.icon{cursor:pointer;margin:0 0 0 3px;display:none;}\n#inner-menu > .no-defaults > .folder.item .menu.visible ~ i.action.icon,\n#inner-menu >  .no-defaults > .folder.active.item:hover i.action.icon{display:inline;}\n#inner-menu >  .no-defaults > .folder.active.item i.action.edit.icon:hover{color:cornflowerblue;}\n#inner-menu > .no-defaults > .sub_folders > .folder.item i.action.icon{cursor:pointer;margin:0 0 0 3px;display:none;}\n#inner-menu > .no-defaults > .sub_folders > .folder.item.sub_item:hover i.action.icon{display:inline}\n#inner-menu > .no-defaults > .sub_folders > .folder.item.sub_item:hover i.action.edit.icon:hover{color:cornflowerblue;}\n#inner-menu .folder { position: relative; }\n#inner-menu .folder .folder-editor{\n    width: 130px;\n    position: absolute;\n    top: -6px;\n    left: 18px;\n    outline: none;\n    border: 1px solid #ddd;\n    padding: 3px;\n}\n#inner-menu .sub_folders {\n    background: rgba(0,0,0,.03);\n}\n#inner-menu .item {\n    margin: 0;\n    padding: 11px 8px 11px 22px;\n    cursor: pointer;\n    position: relative;\n    font-size: 14px;\n    line-height: 1.2em;\n}\n#inner-menu .item.active {\n    box-shadow: none;\n}\n#inner-menu > .folder.item.default-folder > i {\n    float:none;\n    margin:0px 4px 0px 0px;\n}\n#inner-menu > .no-defaults > .sub_folders > a.item.sub_item {\n    margin:6% 14%;\n    padding:3% 16%;\n    border:1px dashed #CCC;\n    background: #fff;\n    font-size:12px;\n    display: inline-block;\n    text-align: center;\n    width: 74%;\n}\n#inner-menu .edit_mode {\n    position: relative;\n    display: inline-block;\n    height: 16px;\n}\n#inner-menu > .folder.item.shared > i {\n    float:none;\n    margin:0px 4px 0px 0px;\n    opacity: 1;\n}\n#inner-menu .item.shared {\n    font-size: 15px;\n}\n.header-icon {\n    opacity: 1;\n}\n.ui.divider {\n    margin: 12px 0;\n}\n#inner-menu > .no-defaults > .sub_folders > .folder.item.sub_item.open{color:#000;}\n#inner-menu .folder.item:before {\n    background: none!important;\n}\n#inner-menu .folder-dropdown {\n    position: absolute;\n    right: 6px;\n    padding: 0;\n    top: 13px;\n}\n.ui.vertical.menu .folder-dropdown.dropdown .menu {\n    left: auto;\n    top: 28px!important;\n    right: 0;\n}\n</style>\n<div class="ui secondary vertical fixed menu active" id="inner-menu">\n    <header class="header item">\n        <span ng-if="current_app == \'project\'">项目文件</span>\n        <span ng-if="current_app == \'group\'">群组文件</span>\n    </header>\n    <div class="folder item shared" href="javascript:void(0);" ng-click="loadSharedFiles()" style="border-radius:0" ng-class="{active: folder_id == \'shared_files\'}">\n        <i class="coding coding-share icon green header-icon"></i>分享中\n        <span class="count">({{shared_files_count || 0}})</span>\n    </div>\n    <div class="ui divider"></div>\n    <div class="folder item default-folder" href="javascript:void(0);" ng-click="openFolder(0, $event);" ng-class="{active: folder_id == \'default\'}" style="border-radius:0">\n        <i class="folder icon" ng-class="{open: folder_id == \'default\'}"></i>默认文件夹\n        <span class="count">({{default_folder_count || 0}})</span>\n    </div>\n    <div ng-repeat="folder in folders" class="no-defaults">\n        <div class="folder item no-default"\n           id="edit-folder-{{folder.file_id}}"\n           ng-class="{active: current_folder.file_id == folder.file_id, editing: !!folder.editing}"\n           ng-click="openFolder(folder, $event);"\n           cg-not-click="folder.editing && updateFolderName(folder);"\n           not-click-class="#edit-folder-{{folder.file_id}}, #edit-folder-{{folder.file_id}} *"\n           not-click-when="folder.editing">\n            <span ng-show="!folder.editing"\n                  class="ellipsis"\n                  style="width: 156px;display: inline-block;">\n                <i class="folder icon"\n                   ng-class="{open: current_folder.file_id == folder.file_id}"\n                   data-position="top center"\n                   data-variation="inverted"\n                   data-html="{{folder.name}}"\n                   cg-popup></i>\n                <span ng-bind-html="folder.name"></span>\n            </span>\n            <span ng-show="folder.editing" class="edit_mode">\n                <i class="folder icon" ng-class="{open: folder_id == folder.file_id}" style="margin-right:0;"></i>\n                <input id="folder-editor-{{folder.file_id}}" ng-model="folder.name" class="ui input folder-editor" cg-enter="updateFolderName(folder);"/>\n            </span>\n            <cg-folder-dropdown\n                ng-if="current_folder.file_id == folder.file_id"\n                folder="folder"\n                is-sub-folder="false"\n                has-target-folders="folders.length >= 2"\n                on-move-success="onMoveSuccess"\n                on-remove="removeFolder"\n                on-rename="setFolderEditable">\n                <i class="action arrow sign down icon"></i>\n            </cg-folder-dropdown>\n            <span class="count">({{folder.count || 0}})</span>\n        </div>\n        <div class="sub_folders" ng-if="current_folder.file_id == folder.file_id && folder.show_sub !== false">\n            <span class="folder item sub_item" ng-repeat="sub_folder in folder.sub_folders"\n                  id="edit-folder-{{sub_folder.file_id}}"\n                    ng-class="{editing: !! sub_folder.editing, open: current_sub_folder.file_id == sub_folder.file_id}"\n                    ng-click="openFolder(sub_folder, $event, true)"\n                    cg-not-click="sub_folder.editing && updateFolderName(sub_folder)"\n                    not-click-class="#edit-folder-{{sub_folder.file_id}}, #edit-folder-{{sub_folder.file_id}} *"\n                    not-click-when="sub_folder.editing">\n                <span ng-show="!sub_folder.editing"\n                      style="margin-left:8px;">\n                    <i class="folder icon"\n                       ng-class="{open: current_sub_folder.file_id == sub_folder.file_id}"\n                       data-position="top center"\n                       data-variation="inverted"\n                       data-html="{{sub_folder.name}}"\n                       cg-popup></i>\n                    <span class="ellipsis" style="display:inline-block;width:120px;">{{sub_folder.name}}</span>\n                </span>\n                <span ng-show="sub_folder.editing" class="edit_mode" style="margin-left:8px;">\n                    <i class="folder icon" ng-class="{open: current_sub_folder.file_id == sub_folder.file_id}" style="margin-right:0;"></i>\n                    <input id="folder-editor-{{sub_folder.file_id}}" ng-model="sub_folder.name" style="width: 122px;"\n                           class="ui input folder-editor" cg-enter="updateFolderName(sub_folder);"/>\n                </span>\n                <cg-folder-dropdown\n                    ng-if="current_folder.file_id == folder.file_id"\n                    folder="sub_folder"\n                    is-sub-folder="true"\n                    has-target-folders="true"\n                    on-remove="removeFolder"\n                    on-move-success="onMoveSuccess"\n                    on-rename="setFolderEditable">\n                    <i class="action arrow sign down icon"></i>\n                </cg-folder-dropdown>\n                <span class="count">({{sub_folder.count || 0}})</span>\n            </span>\n            <a class="item sub_item" ng-show="!editing && current_folder.file_id == folder.file_id"\n               ng-click="createFolder(folder.file_id);">\n                <i class="add icon"></i>添加子文件夹\n            </a>\n        </div>\n    </div>\n    <a class="item" ng-if="folder_loading">\n        <i class="loading icon"></i>正在加载文件夹...\n    </a>\n    <a class="item" id="create_folder" ng-show="!editing" ng-click="createFolder(0);" style="margin: 10px 23px;">\n        <i class="add icon"></i>添加文件夹\n    </a>\n    <div class="scroll-holder"></div>\n</div>\n\n<div class="container" id="attachment" ng-include="current_template">\n</div>\n<div class="ui page dimmer" id="attachment_dragenter">\n    <div class="content" style="box-sizing: border-box; padding: 50px">\n        <div class="content" style="border: 2px dashed #fff;">\n            <div class="center">\n                <span style="font-size: 24px;;line-height: 40px;"><i class="upload cloud icon"></i><span>将文件上传至此目录！</span><br/><span>支持所有文件格式，单个文件不超过300M。</span></span>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("app/project/exp/list.html",'<div class="coding ui dividing header">\n    <div class="actions" id="edit_action">\n        <div>\n            <a class="ui default green button" href="javascript:void(0);" id="upload-attachment" cg-trigger-upload="upload($callback)">\n                <i class="icon" ng-class="{loading: uploading, \'cloud upload\': !uploading}"></i>上传\n            </a>\n            <div class="ui simple dropdown item add">\n                <div class="menu" ng-init="project_path = PROJECT.project_path">\n                    <a class="item" ng-href="{{project_path}}/attachment/{{folder_id}}/create/txt">TXT</a>\n                    <a class="item" ng-href="{{project_path}}/attachment/{{folder_id}}/create/md">Markdown</a>\n                </div>\n                <a class="ui default blue button item">\n                    <i class="add icon"></i>创建...\n                </a>\n            </div>\n        </div>\n    </div>\n    <div>\n        <span ng-bind-html="current_folder.name && !in_sub ? current_folder.name : current_sub_folder.name ? current_sub_folder.name : \'默认文件夹\'"></span>\n    </div>\n</div>\n<form id="zipDownloadForm"\n      action="{{ zipDownloadUrl }}"\n      target="_blank"\n      style="display: none;">\n    <input type="hidden" name="ids" value="{{ zipDownloadFileIds }}"/>\n</form>\n<form file-upload="projectAttachmentZoneUploadSetting">\n    <table class="ui basic table project-attachments">\n        <thead>\n            <tr class="attachment" ng-if="!hasSelected()">\n                <td class="checkbox" ng-click="toggleCheckAll()">\n                    <i class="icon" ng-class="{\n                        \'empty checkbox\': !allChecked(),\n                        \'checkmark sign\': allChecked()\n                    }"></i>\n                </td>\n                <td>文件名</td>\n                <td>文件ID</td>\n                <td>大小</td>\n                <td>创建者</td>\n                <td>更新时间</td>\n            </tr>\n            <tr class="attachment" ng-if="hasSelected()">\n                <td class="checkbox">\n                    <span ng-click="toggleCheckAll()">\n                        <i class="icon" ng-class="{\n                            \'empty checkbox\': !allChecked(),\n                            \'checkmark sign\': allChecked()}\n                        "></i>\n                    </span>\n                </td>\n                <td colspan="6">\n                    <span style="font-size:14px;color:#333;margin-right: 1em;"\n                          ng-show="hasSelected()">\n                        已选择 {{selected_file_count}} 个文件\n                    </span>\n                    <div class="ui dropdown item add" id="move-folder" cg-dropdown ng-show="folders.length>0">\n                        <div class="menu" style="width:210px;height:350px!important;overflow-y: auto;">\n                            <div class="item" href="javascript:void(0);" ng-click="moveFileTo(0);" ng-show="folder_id !== \'default\' && folder_id != 0">\n                                <i class="folder icon"></i>默认文件夹\n                            </div>\n                            <div class="no-defaults" ng-repeat="folder in folders">\n                                <div class="item" ng-class="{current:current_folder.file_id == folder.file_id && !in_sub}"\n                                     ng-click="moveFileTo(folder.file_id);">\n                                    <span><i class="folder icon"></i>{{folder.name}}</span>\n                                </div>\n                                <div class="item sub_item" ng-class="{current:current_sub_folder.file_id == sub_folder.file_id && in_sub}"\n                                     ng-repeat="sub_folder in folder.sub_folders"\n                                     ng-click="moveFileTo(sub_folder.file_id);">\n                                    <span><i class="folder icon"></i>{{sub_folder.name}}</span>\n                                </div>\n                            </div>\n                        </div>\n                        <a class="ui default white button item">\n                            <i class="folder icon"></i>移动到...\n                        </a>\n                    </div>\n                    <a class="ui default white button item"\n                       ng-if="isExpActive(\'zip-download\', false)"\n                       ng-click="zipDownload();">\n                        <i class="cloud download icon"></i>打包下载\n                    </a>\n                    <a class="ui default red button" href="javascript:void(0);" ng-click="deleteSelected();">\n                        <i class="trash icon"></i>删除\n                    </a>\n                </td>\n            </tr>\n        </thead>\n        <tbody>\n            <tr class="attachment uploading" ng-repeat="file in uploading_files">\n                <td class="checkbox"></td>\n                <td class="filename ellipsis" width="300px">\n                    <a cg-file-icon-src="file.preview" cg-file-icon="suffix(file.name)"></a>\n                    <span class="ellipsis" title="{{file.name}}">{{showFilenameEllipsis(file)}}</span>\n                </td>\n                <td class="size">{{file.size | bytes:2}}</td>\n                <td class="uploader ellipsis">\n                    <img class="ui circular image" ng-src="{{USER.avatar}}" width="32" height="32"/>{{USER.name}}\n                </td>\n                <td class="time">\n                    几秒前\n                </td>\n                <td class="process">\n                    <div ng-show="!file.fail" file-upload-progress="file.progress" style="font-size:12px;">\n                        <i class="loading icon"></i>{{num}}%\n                    </div>\n                    <a ng-show=\'file.fail\' class="red">上传失败！</a>\n                </td>\n            </tr>\n            <tr class="attachment"\n                ng-repeat="file in files"\n                ng-class="{white: fileSelected(file), canWhiteSelect: hasSelected()}">\n                <td class="checkbox">\n                    <i class="icon"\n                       ng-class="{\'empty checkbox\': !fileSelected(file), \'checkmark sign\': fileSelected(file)}"\n                       ng-click="selectFile(file)"></i>\n                </td>\n                <td class="filename ellipsis" width="300px" ng-click="hasSelected() && selectFile(file)">\n                    <a cg-file-icon-src="file.preview" cg-file-icon="file.fileType" ng-click="previewFile(file, $event)"></a>\n                    <span class="ellipsis" title="{{file.name}}" ng-click="previewFile(file, $event)">{{showFilenameEllipsis(file)}}</span>\n                </td>\n                <td class="id" ng-click="hasSelected() && selectFile(file)">#{{file.number}}</td>\n                <td class="size" ng-click="hasSelected() && selectFile(file)">{{file.size | bytes:2}}</td>\n                <td class="uploader ellipsis" ng-click="hasSelected() && selectFile(file)">\n                    <a ng-href="{{file.owner.path}}">\n                        <img class="ui circular image" ng-src="{{file.owner.avatar}}" width="32" height="32"/>{{file.owner.name}}\n                    </a>\n                </td>\n                <td class="time" ng-click="hasSelected() && selectFile(file)">\n                    <span cg-friendly-time="file.updated_at"></span>\n                </td>\n                <td class="action" ng-click="hasSelected() && selectFile(file)">\n                    <a href="/api/project/{{PROJECT.id}}/files/{{file.file_id}}/download" target="_self"><i class="cloud download icon" data-position="top center" data-variation="inverted" data-html="下载" cg-popup></i></a>\n                    <a ng-href="{{ detailPath(PROJECT, file) }}"><i class="external url icon" data-position="top center" data-variation="inverted" data-html="查看详情" cg-popup></i></a>\n                    <a class="tool-button gray" href="javascript:void(0)"><i id="shared_icon" class="coding coding-share icon" cg-share="file.share" object="file" type="0" ng-class="{green: file.share}"></i></a>\n                    <a href="javascript:void(0);" ng-click="editFile(file);" ng-if="editable(file)"><i class="cloud edit icon" data-position="top center" data-variation="inverted" data-html="编辑文件" cg-popup></i></a>\n                    <a href="javascript:void(0);" ng-click="deleteFile(file);" ng-if="(USER | isOwnerOf: file) || (file | isRole: ADMIN)"><i class="remove-file red minus sign alternate icon" data-position="top center" data-variation="inverted" data-html="删除文件" cg-popup></i></a>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n    <div class="empty center list" ng-if="files_loading">\n        <i class="loading icon"></i>正在加载文件列表...\n    </div>\n    <div class="center" cg-pager="{{attachment_pager_id}}"></div>\n    <input id="upload-zone" type="file" name="file" multiple>\n    <div class="empty center list file-upload-zone"  cg-trigger-upload="upload($callback);">\n        <span ng-show="!uploading">\n            <span style="font-size:16px;line-height: 40px;"><i class="upload cloud icon"></i><span ng-if="files.length==0">还未上传任何文件，</span><span>点击或将文件拖拽至此页面上传！</span><br/></span><span>支持所有文件格式，单个文件不超过300M。</span>\n        </span>\n        <span ng-show="uploading">\n            <span file-upload-progress="upload_progress">\n                <i class="loading icon"></i>正在上传（{{num}}%）!\n            </span>\n        </span>\n    </div>\n</form>\n\n<div class="ui large modal attachment-preview-modal"\n     style="width: 1100px;\n            position: absolute;\n            left: 50%;\n            margin-left: -550px"\n     ng-controller="AttachmentPreviewModal"\n     cg-modal="attachment_preview_modal"\n     ng-include="\'app/attachment/modal/tpl/attachment-preview-modal.html\'">\n</div>\n'),a.put("app/project/member_picker.html",'<div class="ui center top simple dropdown">\n    <img class="ui avatar image" ng-src="{{current_user.avatar}}"/>\n    <div class="menu">\n        <a class="item"><img class="ui avatar image" ng-src="{{current_user.avatar}}" style="width: 32px;height:32px;"/></a>\n        <a class="item"><img class="ui avatar image" ng-src="{{current_user.avatar}}" style="width: 32px;height:32px;"/></a>\n        <a class="item"><img class="ui avatar image" ng-src="{{current_user.avatar}}" style="width: 32px;height:32px;"/></a>\n        <a class="item"><img class="ui avatar image" ng-src="{{current_user.avatar}}" style="width: 32px;height:32px;"/></a>\n        <a class="item"><img class="ui avatar image" ng-src="{{current_user.avatar}}" style="width: 32px;height:32px;"/></a>\n    </div>\n</div>\n'),a.put("app/project/password_validate_modal.html",'<div class="ui tiny40 modal" id="password-validate-modal">\n    <i class="close icon"></i>\n    <div class="header">需要{{method_message}}\n        <sup ng-hide="method === \'password\'">\n            <a title="点击查看两步验证帮助文档" class="gray" target="_blank" href="/help/doc/account/2fa.html"  target="_blank" >\n                <i class="help icon" style="color: #666;font-size: 12px"></i>\n            </a>\n        </sup>\n    </div>\n    <div class="content">\n        <div class="ui red message" ng-bind="words"></div>\n        <div class="ui small form" ng-class="{loading: deleting}" style="font-size: 1.125em;">\n            <div class="ui fluid action medium input">\n                <input type="password" ng-show="method === \'password\'" placeholder="请输入{{method_message}}" style="display: initial;" ng-model="two_factor_code" cg-enter="passwordValidate();">\n                <input type="text" ng-hide="method === \'password\'" placeholder="请输入{{method_message}}" style="display: initial;" ng-model="two_factor_code" cg-enter="passwordValidate();">\n                <div class="ui red button" ng-click="passwordValidate();">确认</div>\n            </div>\n        </div>\n    </div>\n    <div class="actions">\n        <div class="ui cancel button">取消</div>\n    </div>\n</div>\n'),a.put("app/project/setting/deploy_key/index.html",'<div ng-controller="ProjectDeployKeyIndexController">\n    <div class="git-main-content">\n        <div class="ui secondary inverted inverted segment">\n            <p>\n                部署公钥用以部署项目，只<span style="font-size:20px;font-weight:bold;color:#f00;">针对本项目</span>，可设置拥有只读或者读写权限（默认为<span style="font-size:20px;font-weight:bold;color:#f00;">只读</span>）。不能跟个人公钥通用，如需要设置个人公钥，请<a href="/user/account/setting/keys">点击这里</a>。\n                <a href="/help/doc/git/ssh-key.html#部署ssh公钥" target="_blank" ><i class="icon help tip"></i></a>\n            </p>\n        </div>\n        <div class="clearfix" style="padding-bottom: 12px;">\n            <a class="ui small white button floated right" ng-href="{{PROJECT.project_path}}/setting/deploy_key/new">新建部署公钥</a>\n        </div>\n        <div class="deploy-key-text"><span>已在此项目启用的部署公钥</span></div>\n        <div class="deploy-key-title">\n            <table>\n                <tr>\n                    <td class="deploy-key-title content">key内容(Finger Print)</td>\n                    <td class="deploy-key-title title">标题</td>\n                    <td class="deploy-key-title time"></td>\n                    <td class="deploy-key-title role">权限</td>\n                    <td class="deploy-key-title oper">操作</td>\n                </tr>\n            </table>\n        </div>\n        <div ng-repeat="key in project_keys">\n            <div class="deploy-key">\n                <table>\n                    <tr>\n                        <td class="deploy-key content">{{key.finger_print}}</td>\n                        <td class="deploy-key title">{{key.title || \'\'}}</td>\n                        <td class="deploy-key time">添加于 <time cg-friendly-time="key.created_at"></time></td>\n                        <td class="deploy-key role">\n                            {{key.allow_write ? \'读、写\' : \'只读\'}}\n                        </td>\n                        <td class="deploy-key oper">\n                            <a class="ui small white button floated left" href="javascript:void(0);"\n                               ng-click="showUnbindPassword(key.id)">删除</a>\n                    </tr>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("app/project/setting/deploy_key/new.html",'<div ng-controller="ProjectDeployKeyNewController">\n    <div class="git-main-form">\n        <div class="keys">\n        <div class="ui secondary inverted inverted segment">\n            <p>\n                部署公钥用以部署项目，只拥有<span style="font-size:20px;font-weight:bold;color:#f00;">只读</span>权限，且不能跟个人公钥通用，如需要设置个人公钥，请<a href="/user/account/setting/keys">点击这里</a>。\n                <a href="/help/doc/git/ssh-key.html#部署ssh公钥" target="_blank"><i class="icon help tip"></i></a>\n            </p>\n        </div>\n            <form method="post">\n                <div class="ui form">\n                    <div class="field">\n                        <label>公钥名称</label>\n                        <input placeholder="自定义公钥名称，可不填" type="text" name="title" ng-model="key.title">\n                    </div>\n                    <div class="field">\n                        <label>SSH-RSA公钥内容</label>\n                        <textarea placeholder="请粘贴形如这样的格式的 ssh-rsa 公钥：ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDHI6/Zs8DVJduqR0DHO8s5JDT4SpnXS+jvLJkAuji2G3nBYTdtjfvMx6i6ei6Lxv3MMecogYyujhIx/k9111+8ZqFpJAywNTfNuw/JiLaH989QLdM7F2NaJi3OHV8484Z6KKvBXyO99HIG/oCNYDYp/78kd0kz8b0ghlXG3M8YRHd5udV6VErKS5qQHH9WTsEaF2VZjrEPalYULHXJ7pikuKmwZ8CVlyqhPxCbHG4wdKprATpdpiax1i5mmH/+pt0vzK01RgZ/ibhVkFaAmxOCWxTSNstqAlYd+z01/688IUIIWqfbzMe7FSp4CLezlIn8UIowb8xw+yRcYMl2Lqon coding@MBP" name="content" ng-model="key.content" ng-change="split(key.content)"></textarea>\n                    </div>\n                    <div class="field">\n                        <div class="ui checkbox">\n                            <input type="checkbox" ng-model="key.allowWriteAccess" id="allow-write-access" class="ng-pristine ng-untouched ng-valid">\n                            <label for="allow-write-access">授予推送权限</label>\n                        </div>\n                    </div>\n                    <a ng-show="!submit_loading" class="ui dark gray medium submit button" type="submit"\n                       ng-click="showPasswordWithCreateKey(key);">添加</a>\n\n                    <div ng-show="submit_loading" class="ui dark gray medium submit button" style="width: 90px"><i\n                        class="loading icon" style="margin:0;"></i></div>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n'),a.put("app/project/setting/depot/index.html",'<style>\n    #depot-advance-setting > .ui.segment {max-width: 800px; -webkit-box-shadow: none; box-shadow: none; padding: 1.5em;}\n    #depot-advance-setting > .ui.segment > .ui.warning.message > strong {color: #D95C5C;}\n</style>\n<div id="depot-advance-setting" ng-controller="ProjectDepotIndexController">\n    <section ng-show="(PROJECT | isRole:ADMIN)" class="ui segment">\n        <h4 class="ui teal header">SVN 服务</h4>\n        <div ng-show="svn_enabled !== undefined" class="ui info message">\n            <p>开启 SVN 服务后，你将可以通过 1.8 以上版本的 <a href="https://subversion.apache.org" target="_blank">subversion</a> 客户端来访问此仓库</p>\n            <div class="ui toggle checkbox">\n                <input type="checkbox" ng-model="svn_enabled" id="svn-toggler" ng-change="toggleSvn(svn_enabled)">\n                <label for="svn-toggler">开启 SVN 服务<span style="color: #96904D;">（{{svn_enabled ? \'已开启\' : \'已关闭\'}}）</span></label>\n            </div>\n            <div ng-show="svn_enabled" style="margin-top: 20px;">\n                SVN 仓库地址：\n                <div class="ui action small input" style="display: inline-table; font-size: 13px;">\n                    <input type="text" id="clone-url-input" ng-model="svn_url" style="min-width: 350px; height: 30px;" readonly="readonly" onclick="this.select();">\n                    <div class="ui right icon button mini copy-btn" clip-copy="svn_url" clip-click="do_copy()" style="line-height:10px;">\n                        <i class="icon" ng-class="{\'green checkmark\':copied,\'paste\':!copied}"></i>\n                    </div>\n                </div>\n                <p><strong>注意：</strong>git 仓库的分支和标签按照如下规则映射到 svn 路径：</p>\n                <ul style="font-size: 14px;">\n                    <li>master -&gt; /trunk，即：<code>svn checkout &lt;仓库地址&gt;/trunk</code> 可以检出 master 分支</li>\n                    <li>分支 -&gt; /branches/分支，例如：<code>svn checkout &lt;仓库地址&gt;/branches/test</code> 可以检出 test 分支</li>\n                    <li>标签 -&gt; /tags/标签，例如：<code>svn checkout &lt;仓库地址&gt;/tags/v1.0</code> 可以检出 v1.0 标签</li>\n                    <li>暂不支持分支标签的创建删除和合并，git submodule 检出为空目录</li>\n                </ul>\n                <p style="color: #D95C5C; font-weight: bold;">\n                    <strong>提示：</strong>本功能目前处于测试阶段，尚未实现完整 SVN 功能，如使用上遇到问题请向我们\n                    <a style="text-decoration: underline;" href="https://coding.net/u/coding/p/Coding-Feedback/topic/create">提交反馈</a>。\n                </p>\n            </div>\n        </div>\n    </section>\n    <section ng-if="(PROJECT | isRole:ADMIN)" class="ui segment">\n        <h4 class="ui red header">清空仓库</h4>\n        <div class="ui warning message">\n            清空仓库将会清空所有代码, MR, PR, Pages 和历史记录，然后生成一个空的新仓库<br><br>\n            <strong>此操作无法恢复!</strong>\n        </div>\n        <div class="ui red default button"\n             ng-if="!repo_deleting"\n             ng-click="beforeResetRepo();">清空仓库\n        </div>\n        <div class="ui red default button disabled"\n             ng-if="repo_deleting">\n            <i class="loading icon" style="margin-right: 5px;"></i>清空中...\n        </div>\n    </section>\n</div>\n'),
a.put("app/project/setting/general/advance.html",'<style>\n    #project-advance-setting > .ui.segment {max-width: 800px; -webkit-box-shadow: none; box-shadow: none; padding: 1.5em;}\n    #project-advance-setting > .ui.segment > .ui.warning.message > strong {color: #D95C5C;}\n    #project-advance-setting > .ui.segment > .paas-enabled {margin-bottom:20px;color:#D95C5C;}\n    #project-advance-setting > .ui.segment > .paas-enabled > a {color:#D95C5C;text-decoration:underline}\n    #project-advance-setting > .ui.segment > .transfer-warning {margin-bottom:20px;}\n    #transfer-member {padding:8px;}\n    #transfer-member > .ui.simple.dropdown.item {width:200px;}\n    #transfer-member > .ui.simple.dropdown.item > img {width: 24px;height:24px;margin-top: -4px;}\n    #transfer-member > .ui.simple.dropdown.item > i {float:right}\n    #transfer-member > .menu > .search {padding:7px;background-color: rgba(0, 0, 0, 0.06);}\n    #transfer-member > .menu > .empty.list {font-size:12px;}\n    #transfer-member > .menu > .member-list {max-height:260px;overflow-y:auto}\n    #transfer-member > .menu > .member-list > .item {height:36px}\n    #transfer-member > .menu > .member-list > .item > img {width: 24px;height:24px;margin-top: -4px;}\n    #transfer-member > .menu > .no-members > .item > span {font-size:16px;color: rgba(0, 0, 0, 0.2);}\n    #transfer-member .transfer-username {display: inline-block; max-width: 120px}\n</style>\n<div id="project-advance-setting" ng-controller="ProjectSettingAdvanceController">\n    <section ng-if="PROJECT.owner_id === USER.id" class="ui segment">\n        <h4 class="ui green header"><span style="color:#32bc77">归档项目</span></h4>\n\n        <div class="ui warning message">\n            <strong>注意：</strong>\n            项目归档后，该项目将会移到“项目所有者”的归档项目中，并且不能对该项目做任何操作，直到解除归档。同时该项目将从所有项目成员的项目列表中移除。“项目所有者”可以在项目->归档项目中进行解除归档操作，解除归档后，项目成员仍保留。\n        </div>\n\n        <div class="ui green default button"\n             ng-if="!archiving"\n             ng-click="beforeArchiveProject()">归档项目\n        </div>\n        <div class="ui green default button disabled"\n             ng-if="archiving">\n            <i class="loading icon" style="margin-right: 5px;"></i>归档中...\n        </div>\n    </section>\n\n    <section ng-if="PROJECT.owner_id === USER.id" class="ui segment">\n        <h4 class="ui green header"><span style="color:#32bc77">转让项目</span></h4>\n\n        <div class="ui warning message">\n            <strong>注意：</strong>\n            <span ng-if="!isExpActive(\'vip\') || PROJECT.type === 1">\n                项目转让后，你将不再是“项目所有者”，你将失去某些管理权限（如添加成员、开启 pages、删除项目等）。同时，项目转让后，项目的git 仓库访问路径会发生变化，例如：用户 Coding 将项目转给用户 Demo 后， git 仓库访问路径将由 https://git.coding.net/coding/test.git 变成 https://git.coding.net/demo/test.git。\n            </span>\n            <span ng-if="isExpActive(\'vip\') && PROJECT.type === 2">\n                项目转让后，你将不再是“项目所有者”，你将失去某些管理权限（如添加成员、删除项目等）。同时，项目转让后，项目的 git 仓库访问路径会发生变化，并且仓库容量可能随接收者的会员等级而变小，导致项目仓库不可用。该操作无法撤消，请谨慎。\n            </span>\n        </div>\n        <div class="paas-enabled" ng-if="paas_enabled">您已开启演示，请 <a href="{{paas_url}}">删除演示</a> 后，再进行转让！</div>\n        <div class="transfer-warning">\n            <span>转让成员：</span>\n            <div class="ui dropdown selection" cg-dropdown dropdown-setting="dropDownSetting" id="transfer-member" ng-class="{\'disabled\': paas_enabled}">\n                <div class="ui simple dropdown item" ng-if="!selected_member">\n                    请选择<i class="dropdown icon" style="float:right"></i>\n                </div>\n                <div class="ui simple dropdown item" ng-if="selected_member">\n                    <img class="ui avatar image" src="{{selected_member.avatar}}"/>\n                    <span class="transfer-username ellipsis">{{selected_member.name}}</span>\n                    <i class="dropdown icon"></i>\n                </div>\n                <div class="menu">\n                    <div class="search" ng-if="members.length > 10">\n                        <div class="ui icon input">\n                            <input type="text" class="search-member" placeholder="Search..." ng-model="searchMember.name">\n                            <i class="search icon"></i>\n                        </div>\n                    </div>\n                    <div class="empty list" ng-if="member_loading">\n                        <i class="loading icon"></i>正在加载成员列表...\n                    </div>\n                    <div class="member-list" ng-if="!member_loading && members.length != 0">\n                        <a class="item" ng-repeat="member in members | filter: searchMember"\n                           ng-click="selectMember(member)">\n                            <img class="ui avatar image" ng-src="{{::member.avatar}}"/>\n                            <span class="transfer-username ellipsis">{{member.name}}</span>\n                        </a>\n                    </div>\n                    <div class="no-members" ng-if="!member_loading && members.length === 0">\n                        <div class="item"><span>无其他成员</span></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="ui green default button"\n             ng-if="!transferring"\n             ng-click="beforeTransferProject()"\n             ng-class="{\'disabled\': !selected_member}">转让项目\n        </div>\n        <div class="ui green default button disabled"\n             ng-if="transferring">\n            <i class="loading icon" style="margin-right: 5px;"></i>转让中...\n        </div>\n    </section>\n\n    <section ng-if="PROJECT.owner_id === USER.id" class="ui segment">\n        <h4 class="ui red header">删除项目</h4>\n        <div class="ui warning message">\n            删除项目将会连同其相关的所有数据（包括 讨论，pull requests，动态 等在内）一起删除<br><br>\n            <strong>此操作无法恢复!</strong>\n        </div>\n        <div class="ui red default button"\n             ng-if="!deleting"\n             ng-click="beforeDeleteProject();">删除项目\n        </div>\n        <div class="ui red default button disabled"\n             ng-if="deleting">\n            <i class="loading icon" style="margin-right: 5px;"></i>删除中...\n        </div>\n    </section>\n\n    <section ng-if="PROJECT.owner_id !== USER.id" class="ui segment">\n        <h4 class="ui header" style="color: #38BF7D">退出项目</h4>\n        <div class="ui warning message">\n            <strong>注意：</strong>\n            退出项目后，你将不能查看任何关于该项目的信息。如果想重新加入，请联系项目管理员。\n        </div>\n        <div class="ui red default button"\n             ng-if="!quiting"\n             ng-click="quit()">退出项目\n        </div>\n        <div class="ui red default button disabled"\n             ng-if="quiting">\n            <i class="loading icon" style="margin-right: 5px;"></i>退出中...\n        </div>\n    </section>\n</div>\n'),a.put("app/project/setting/general/basic.html",'<style>\n    #project-setting .project-icon {\n        position: absolute;\n        width: 128px;\n        height:128px;\n    }\n    #project-setting .project-icon-loading {\n        position: absolute;\n        width: 128px;\n        height:128px;\n        background: #fff;\n        opacity: 0.6;\n    }\n    #project-setting .ui.form.segment.setting {\n        max-width: 800px;\n        margin-left: 190px;\n        -webkit-box-shadow: none;\n        box-shadow: none;\n        padding: 1.5em;\n    }\n    #project-setting .private-label {\n        text-align: center;\n        background: #eee;\n        margin-top: 20px;\n        padding: 5px;\n        border-radius: 5px;\n        width: 118px;\n        position: absolute;\n        top: 120px;\n        font-size: 14px;\n        color: #666;\n    }\n    #project-setting .project-icon i {\n        float:right;\n        position: absolute;\n        width: 128px;\n        height: 128px;\n        background: rgba(0,0,0,.7);\n        webkit-border-radius: 128px;\n        -moz-border-radius: 128px;\n        -ms-border-radius: 128px;\n        -o-border-radius: 128px;\n        display: table;\n        z-index: 99;\n        color: #fff;\n        opacity: 0;\n        -webkit-transition: all 0.5s ease-out;\n        -moz-transition: all 0.5s ease-out;\n        -o-transition: all 0.5s ease-out;\n        -ms-transition: all 0.5s ease-out;\n        transition: all 0.5s ease-out;\n    }\n    #project-setting .project-icon:hover i {\n        webkit-transition: all 0.5s ease-out;\n        -moz-transition: all 0.5s ease-out;\n        -o-transition: all 0.5s ease-out;\n        -ms-transition: all 0.5s ease-out;\n        transition: all 0.5s ease-out;\n        opacity: 1;\n    }\n    #project-setting .project-icon i:before {\n        display: table-cell;\n        vertical-align: middle;\n    }\n    #project-setting input[type="file"] {\n        display: block;\n        position: absolute;\n        margin: 0;\n        opacity: 0;\n        -ms-filter: \'alpha(opacity=0)\';\n        direction: ltr;\n        cursor: pointer;\n        z-index:999;\n        width: 128px;\n        height: 128px;\n    }\n    #project-setting .select2-container .select2-choice{\n      border: 1px solid rgba(0, 0, 0, 0.15);\n      padding: 0.4em 1em;\n    }\n    #project-setting .select2-container .select2-choice .select2-arrow{\n      border-left: 1px solid #ddd;\n      background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #eeeeee), color-stop(0.6, #ffffff));\n      background-image: -webkit-linear-gradient(center bottom, #eeeeee 0%, #ffffff 60%);\n      background-image: -moz-linear-gradient(center bottom, #eeeeee 0%, #ffffff 60%);\n      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = \'#ffffff\', endColorstr = \'#eeeeee\', GradientType = 0);\n      background-image: linear-gradient(to top, #eeeeee 0%, #ffffff 60%);\n    }\n    #project-setting .select2-container .select2-choice .select2-arrow b{\n      background: url("https://dn-coding-net-production-static.qbox.me/static/2ca61b76e22053571dd8611e5aac4900.png") no-repeat 0 7px;\n    }\n    #project-setting .ui.checkbox .box, #project-setting .ui.checkbox label{\n      padding-left: 1.5em;\n    }\n</style>\n<div ng-if="PROJECT" id="project-setting" style="position:relative;" ng-controller="ProjectSettingBasicController">\n    <div class="ui inverted dimmer" ng-class="{active : updating}"><i class="icon loading"></i></div>\n    <div class="ui success message" ng-if="update_success">\n        <div class="header">\n            更新成功!\n        </div>\n    </div>\n    <div style="position: absolute; width: 152px; height:131px;">\n        <div ng-show="uploading" class="project-icon-loading">\n            <i class="loading icon" style="font-size:50px;position: absolute;margin:0;left:35px;top:40px;"></i>\n        </div>\n        <div ng-show="!uploading" class="project-icon">\n            <input type="file" name="file" cg-file-upload="uploadSetting" />\n            <div ng-if="PROJECT.icon">\n                <i class="edit sign icon" style="position:absolute; right: 0; margin: 0;"></i>\n                <img ng-src="{{PROJECT.icon}}" width="128px" height="128px">\n            </div>\n        </div>\n        <div ng-if="!PROJECT.is_public" class="private-label">私有项目<i class="lock icon"></i></div>\n    </div>\n    <div class="ui warning message" style="margin-left:190px;">\n      <p><strong>注意：</strong>修改项目名将导致项目的访问 URL（包含 Git 仓库的 URL）将会改变，在此之前的 URL 地址将失效。Git 仓库地址修改办法 <code>git remote set-url origin [NEW_URL]</code></p>\n    </div>\n    <form class="ui form segment setting" ng-class="{loading:group_creating}">\n\n        <input type="hidden" ng-model="project.id"/>\n        <div class="field">\n          <label>项目名称</label>\n          <input type="text" ng-model="project.name" placeholder="项目名称">\n        </div>\n\n        <div class="field">\n          <label>项目描述</label>\n          <textarea ng-model="project.description" placeholder="项目描述"></textarea>\n        </div>\n\n        <div>\n            <input type="submit" value="更新" class="ui dark gray medium submit button" ng-click="updateProject(project);"/>\n        </div>\n\n    </form>\n</div>\n'),a.put("app/project/setting/index.html",'<style>\n    .public-project-view #inner-menu {\n        float: left;\n        border: 0 !important;\n        margin: 0;\n        position: absolute;\n        min-height: 500px !important;\n        z-index: 0;\n    }\n\n    .public-project-view #project-setting-content {\n        border-left: 1px solid #DDD;\n        min-height: 500px;\n    }\n</style>\n<div ng-class="{\'public-project-view\': PROJECT.is_public}" ng-style="{\'display\':PROJECT.is_public?\'block\':\'initial\'}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div class="ui secondary vertical fixed menu active" id="inner-menu">\n        <header class="header item">\n            项目设置\n            <article>\n                在此可以更新项目基本信息，以及删除项目。\n            </article>\n        </header>\n        <a class="item"\n           ng-if="!PROJECT.is_public && !isExpActive(\'vip\')"\n           ng-href="{{PROJECT.project_path}}/setting/summary"\n           ng-class="{active:inner_menu == \'summary\'}">\n            <i class="info icon"></i>项目概览\n        </a>\n        <a class="item"\n           ng-if="isProjectAdmin()"\n           ng-href="{{PROJECT.project_path}}/setting/basic"\n           ng-class="{active:inner_menu == \'basic\'}">\n            <i class="wrench icon"></i>基本设置\n        </a>\n        <a class="item"\n           ng-if="isProjectAdmin()"\n           ng-href="{{PROJECT.project_path}}/setting/webhook"\n           ng-class="{active:inner_menu == \'webhook\'}">\n            <i class="anchor icon"></i>WebHook\n        </a>\n        <a class="item"\n           ng-if="isProjectAdmin()"\n           ng-href="{{PROJECT.project_path}}/setting/deploy_key"\n           ng-class="{active:inner_menu == \'deploy_key\'}">\n            <i class="key icon"></i>部署公钥\n        </a>\n        <a class="item"\n           ng-if="isProjectAdmin()"\n           ng-href="{{PROJECT.project_path}}/setting/depot"\n           ng-class="{active:inner_menu == \'depot\'}">\n            <i class="code icon"></i>仓库设置\n        </a>\n        <a class="item"\n           ng-if="isProjectAdmin() || !PROJECT.is_public"\n           ng-href="{{PROJECT.project_path}}/setting/advance"\n           ng-class="{active:inner_menu == \'advance\'}">\n            <i class="coding advanced-setting icon"></i>高级设置\n        </a>\n\n        <div class="sep" ng-if="PROJECT.plan > 1"></div>\n        <a class="item"  style="cursor: pointer!important;font-size: 12px;padding: 2px 25px;opacity: 1;cursor: default;"\n           ng-if="PROJECT.plan > 1"\n           ng-href="{{PROJECT.project_path}}/setting/support"\n           ng-class="{active:inner_menu == \'support\'}">\n            <i class="circular doctor icon inverted"\n               style="background-color: #df5a5a;color:#FFF;opacity: 1;"></i>\n            客服工单\n        </a>\n        <a class="item" style="cursor: pointer!important;font-size: 12px;padding: 2px 25px;opacity: 1;cursor: default;"\n           href="mailto:support@coding.net?Subject=%5B%E6%8A%80%E6%9C%AF%E6%94%AF%E6%8C%81%5D"\n           target="_blank"\n            ng-if="PROJECT.plan > 1">\n            <i class="circular mail icon inverted"\n               style="background-color: #eb935d!important;color:#FFF;opacity: 1;"></i>\n            support@coding.net\n        </a>\n        <a class="item" style="cursor: pointer!important;font-size: 12px;padding: 2px 25px;opacity: 1;cursor: default;"\n           target="_blank"\n           href="http://wpa.qq.com/msgrd?v=3&uin=2847276903&site=qq&menu=yes"\n           ng-if="PROJECT.plan === 3">\n            <i class="circular icon user inverted"\n               style="background-color: #527D9D!important;color:#FFF;opacity: 1;position: relative;">\n                <img src="https://dn-coding-net-production-static.qbox.me/static/6808e0ed2d33f08031025908056304b2.png" style="width: 18px;position: absolute;left: 3px;top: 3px;"/>\n            </i> 2847276903\n        </a>\n        <a class="item" style="cursor: pointer!important;font-size: 12px;padding: 2px 25px;opacity: 1;cursor: default;"\n           href="tel:400263464"\n           ng-if="PROJECT.plan === 3">\n            <i class="circular phone icon inverted"\n               style="background-color: #38BF7D;color:#FFF;opacity: 1;"></i>\n            400-026-3464\n        </a>\n    </div>\n    <div class="container" id="project-setting-content" ng-include="keysPath()">\n    </div>\n</div>\n'),a.put("app/project/setting/summary/index.html",'<div class="project-upgrade-wrapper">\n\n    <div class="project-upgraded" ng-controller="ProjectSummaryController">\n\n        <section class="summary">\n\n            <h1>\n                <span ng-bind="PROJECT.name"></span>\n                <em ng-style="projectVersionBg()">\n                    <i class="icon" ng-class="project_version.icon"></i>\n                    <span ng-if="!service_info.expired_plan" ng-bind="project_version.name"></span>\n                    <span ng-if="service_info.expired_plan" ng-bind="expired_project_version.name"></span>\n                </em>\n                <a class="ui green button small"\n                   ng-href="{{PROJECT.project_path}}/setting/summary/upgrade"\n                   ng-if="version === \'free\' && !service_info.expired_plan && isProjectAdmin()">\n                    马上升级\n                </a>\n                <a href="javascript:void(0);"\n                   ng-if="version === \'dev\' && checkRoleAndAutoRenew()"\n                   ng-click="upgradePro();">\n                    升级为高级版<i class="red icon triangle right"></i>\n                </a>\n            </h1>\n\n            <div class="ui three column stackable grid">\n                <div class="row">\n                    <div class="column">\n                        <div class="inner">\n                            <div class="title">\n                                <strong><i class="time big icon"></i>服务期</strong>\n                                <em ng-if="service_info.expired_plan > 1">已到期</em>\n                                <a class="ui green button small"\n                                   ng-if="service_info.expired_plan > 1 && isProjectAdmin()"\n                                   ng-href="{{PROJECT.project_path}}/setting/summary/upgrade"\n                                    >重新升级</a>\n                                <a href="javascript:void(0);" class="ui green button small"\n                                   ng-click="renewalManually()"\n                                   ng-if="version !== \'free\' && !service_info.expired_plan && checkRoleAndAutoRenew()">手动续费</a>\n                            </div>\n                            <div class="progress">\n                                <div class="progress-bar">\n                                    <!-- show rate when plan expired or not free -->\n                                    <div class="progress"\n                                         ng-if="version !== \'free\' || !!service_info.expired_plan"\n                                         ng-style="{\n                                            width: rate(service_info.used_day, service_info.cycle),\n                                            background: progressColor(service_info.used_day, service_info.cycle)\n                                         }">\n                                    </div>\n                                    <!-- show not limit when plan free -->\n                                    <div class="progress" ng-if="version === \'free\'" style="width: 0;"></div>\n                                </div>\n                                <div>\n                                    <span class="rate" ng-if="version !== \'free\' || !!service_info.expired_plan">\n                                        <em ng-bind="service_info.used_day"></em> / <span\n                                        ng-bind="service_info.cycle"></span>\n                                    </span>\n                                    <span class="rate" ng-if="version == \'free\' && !service_info.expired_plan">\n                                        <em ng-bind="service_info.used_day + \'天\'"></em> / 不限\n                                    </span>\n                                    <span class="renewal-setting" ng-if="!isTeamProject() && !service_info.expired_plan && version !== \'free\'">\n                                        <span ng-if="!project_plan.auto">未开启自动续费</span>\n                                        <span ng-if="project_plan.auto">已开启自动续费</span>\n                                        <a href="javascript:void(0);" ng-click="renewal();"\n                                           ng-if="is_project_owner">设置</a>\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="column">\n                        <div class="inner">\n                            <div class="title">\n                                <strong><i class="users big icon"></i>项目成员数</strong>\n                            </div>\n                            <div class="progress">\n                                <div class="progress-bar">\n                                    <div class="progress"\n                                         ng-style="{\n                                            width: rate(service_info.member, service_info.max_member),\n                                            background: progressColor(service_info.member, service_info.max_member)\n                                         }">\n                                    </div>\n                                </div>\n                                <div>\n                                <span class="rate">\n                                    <em ng-bind="service_info.member"></em> /\n                                    <span ng-bind="service_info.max_member"></span>\n                                </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="column">\n                        <div class="inner">\n                            <div class="title">\n                                <strong><i class="code big icon"></i>Git 仓库使用情况</strong>\n                            </div>\n                            <div class="progress">\n                                <div class="blue progress-bar">\n                                    <div class="progress" ng-style="{\n                                        width: rate(service_info.git_memory, service_info.max_git_memory),\n                                        background: progressColor(service_info.git_memory, service_info.max_git_memory)\n                                        }">\n                                    </div>\n                                </div>\n                                <div>\n                                <span class="rate">\n                                    <em ng-bind="service_info.git_memory * 1024 | bytes: 2"></em> /\n                                    <span ng-bind="project_version.limits.git"></span>\n                                </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </section>\n\n        <div ng-if="version !== \'free\' && !service_info.expired_plan && isProjectAdmin()">\n            <p class="package">\n                数据打包下载：\n                <a class="ui blue button" href="javascript:void(0);"\n                   ng-click="exportProject();" ng-if="!seconds">马上打包</a>\n                <a href="javascript:void(0);" class="ui blue button disabled" ng-if="seconds">\n                    {{ exportEnableTime(seconds) }} 后可再次打包\n                </a>\n                <span class="tips" ng-if="!(loaded_export && !export_info.created_at)">最后一次打包时间:\n                    <i class="icon" ng-class="{loading: loading_export, time: !loading_export}"></i>\n                    <span ng-if="loading_export">正在查询上一次时间...</span>\n                    <a class="gray" target="_blank"\n                       ng-if="loaded_export && export_info.created_at"\n                       ng-bind="export_info.created_at | date : \'yyyy-MM-dd HH:mm:ss\'"\n                       ng-href="{{ export_info.url + \'?download/export_\' + PROJECT.name + \'_\' + export_info.created_at +\'.json\' }}"></a>\n                </span>\n            </p>\n\n            <article>\n                * 打包内容包括任务、讨论、成员等，但不包括代码和历史（用户可通过 Git 自行获取）<br/>\n                * 数据打包成功后，我们将会发送下载链接到您的注册邮箱，请耐心等待。\n            </article>\n        </div>\n\n        <div class="ui modal account-charge-modal"\n             ng-if="version === \'dev\'"\n             ng-controller="ProjectUpgradeProModalCtrl"\n             cg-modal="upgrade_pro_modal"\n             ng-include="\'app/project/setting/summary/modal/upgrade_pro_modal.html\'"></div>\n\n        <div class="ui modal account-charge-modal"\n             ng-controller="ProjectUpgradeRenewalModalCtrl"\n             cg-modal="upgrade_renewal_modal"\n             ng-include="\'app/project/setting/summary/modal/renewal_modal.html\'"></div>\n\n        <div class="ui tiny40 modal account-charge-modal"\n             ng-controller="ProjectRenewalManuallyModalCtrl"\n             cg-modal="renewal_manually_modal"\n             ng-include="\'app/project/setting/summary/modal/renewal_manually_modal.html\'"></div>\n\n        <div class="ui modal account-charge-modal"\n             ng-if="upgraded"\n             ng-controller="ProjectUpgradeJustRenewalModalCtrl"\n             cg-modal="upgrade_just_renewal_modal"\n             ng-include="\'app/project/setting/summary/modal/just_renewal_modal.html\'"></div>\n\n    </div>\n\n</div>\n'),a.put("app/project/setting/summary/modal/just_renewal_modal.html",'<div class="header">项目续费</div>\n<div class="content project-upgrade-form">\n    <form class="ui form" method="POST">\n        <div class="field version-description">\n            <i class="inverted circular icon" ng-class="upgrade_version.icon"></i>\n            <article>\n                <h3>\n                    <span ng-bind="upgrade_version.name"></span>\n                    <a href="#">查看项目 免费版、开发版 和 高级版 对比详情 &raquo;</a>\n                </h3>\n                <p ng-bind="version_description"></p>\n            </article>\n        </div>\n        <div class="inline fields payment-period" style="padding: 75px 0 0 110px;">\n            <div class="field" ng-if="upgrade_prices.month > 0">\n                <div class="ui radio checkbox">\n                    <input name="type" id="price-{{ id }}-1" type="radio" value="month" ng-model="form.period"/>\n                    <label for="price-{{ id }}-1"><em ng-bind="upgrade_period.month"></em>/月</label>\n                </div>\n            </div>\n            <div class="field" ng-if="upgrade_prices.half_year > 0">\n                <div class="ui radio checkbox">\n                    <input name="type" id="price-{{ id }}-2" type="radio" value="half_year" ng-model="form.period"/>\n                    <label for="price-{{ id }}-2"><em ng-bind="upgrade_period.half_year"></em>/半年</label>\n                </div>\n            </div>\n            <div class="field" ng-if="upgrade_prices.full_year > 0">\n                <div class="ui radio checkbox">\n                    <input name="type" id="price-{{ id }}-3" type="radio" value="full_year" ng-model="form.period"/>\n                    <label for="price-{{ id }}-3"><em ng-bind="upgrade_period.full_year"></em>/一年</label>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<div class="actions">\n    <a class="ui cancel borderless button">取消</a>\n    <a class="ui ok button green" ng-click="renewal(form);">马上续费</a>\n</div>\n\n<div class="ui modal account-charge-modal"\n     ng-controller="ProjectUpgradeChargeModalCtrl"\n     cg-modal="upgrade_charge_modal"\n     ng-include="\'app/project/setting/summary/modal/upgrade_charge_modal.html\'"></div>\n\n<div class="ui modal account-result-modal"\n     cg-modal="renewal_result_modal"\n     ng-include="\'app/project/setting/summary/modal/renewal_result_modal.html\'"></div>\n'),a.put("app/project/setting/summary/modal/password_required_modal.html",'<i class="close icon"></i>\n<div class="header">需要{{method_message}}\n    <sup ng-hide="method === \'password\'">\n        <a title="点击查看两步验证帮助文档" class="gray" target="_blank" href="/help/doc/account/2fa.html">\n            <i class="help icon" style="color: #666;font-size: 12px"></i>\n        </a>\n    </sup>\n</div>\n<div class="content">\n    <div class="ui red message" ng-bind="password_words + \'需要\' + method_message"></div>\n    <div class="ui small form" style="font-size: 1.125em;">\n        <div class="ui fluid action medium input">\n            <input type="password" ng-if="method === \'password\'" placeholder="请输入{{method_message}}"\n                   ng-model="form.password" cg-enter="confirm(form.password);">\n            <input type="text" ng-hide="method === \'password\'" placeholder="请输入{{method_message}}"\n                   ng-model="form.password" cg-enter="confirm(form.password);">\n\n            <div class="ui red button" ng-click="confirm(form.password);">确认</div>\n        </div>\n    </div>\n</div>\n<div class="actions">\n    <div class="ui cancel button">取消</div>\n</div>\n'),a.put("app/project/setting/summary/modal/renewal_manually_modal.html",'<div class="header">手动续费</div>\n<div class="content project-upgrade-form">\n    <form class="ui form">\n        <div class="field version-description">\n            <i class="inverted circular icon" ng-class="current_versions.icon"></i>\n            <article>\n                <h3>\n                    <span ng-bind="current_versions.name"></span>\n                    <a href="/upgrade" target="_blank">查看项目 免费版、开发版 和 高级版 对比详情 &raquo;</a>\n                </h3>\n                <p ng-bind="version_description"></p>\n            </article>\n        </div>\n        <div class="inline fields payment-period" style="margin-top: 60px;">\n            <div class="field" ng-if="available_plan >= 1">\n                <div class="ui radio checkbox">\n                    <input name="type" id="price-{{ id }}-1" type="radio" value="month" ng-model="form.period" checked="checked"/>\n                    <label for="price-{{ id }}-1">\n                        <em ng-bind="upgrade_periods[version].month">29</em>/月\n                    </label>\n                </div>\n            </div>\n            <div class="field" ng-if="available_plan >= 6">\n                <div class="ui radio checkbox">\n                    <input name="type" id="price-{{ id }}-2" type="radio" value="half_year" ng-model="form.period"/>\n                    <label for="price-{{ id }}-2">\n                        <em ng-bind="upgrade_periods[version].half_year">149</em>/半年\n                        <strong>买5个月送1个月</strong>\n                    </label>\n                </div>\n            </div>\n            <div class="field" ng-if="available_plan >= 12">\n                <div class="ui radio checkbox">\n                    <input name="type" id="price-{{ id }}-3" type="radio" value="full_year" ng-model="form.period"/>\n                    <label for="price-{{ id }}-3">\n                        <em ng-bind="upgrade_periods[version].full_year">269</em>/一年\n                        <strong>买9个月送3个月</strong>\n                    </label>\n                </div>\n            </div>\n        </div>\n        <div class="project-upgrade-wrapper" ng-include="\'app/project/setting/summary/voucher/voucher.html\'" ng-show="available_plan > 0"></div>\n        <div class="ui warning message" style="display: block;" ng-if="available_plan === 0">付费项目已达到最大周期（24个月）。</div>\n    </form>\n</div>\n<div class="actions" ng-show="available_plan > 0">\n    <span style="float:left;" ng-if="version_price >= 0">\n        实付款：<span style="color:#666;">￥</span><strong class="red" style="font-size: 25px;" ng-bind="version_price"></strong>\n    </span>\n    <a class="ui cancel borderless button">取消</a>\n    <a class="ui ok button green" ng-click="renewalNow();">确认续费</a>\n</div>\n<div class="ui modal account-charge-modal"\n     ng-controller="ProjectUpgradeChargeModalCtrl"\n     cg-modal="upgrade_charge_modal"\n     ng-include="\'app/project/setting/summary/modal/upgrade_charge_modal.html\'"></div>\n<div class="ui modal account-charge-modal"\n     ng-controller="PasswordRequiredModalCtrl"\n     cg-modal="password_required_modal"\n     ng-include="\'app/project/setting/summary/modal/password_required_modal.html\'"></div>\n'),
a.put("app/project/setting/summary/modal/renewal_modal.html",'<div class="header">续费设置</div>\n<div class="content project-upgrade-form">\n    <form class="ui form" method="POST">\n        <div class="inline fields payment-period" style="margin-top: 20px;">\n            <div class="field" style="margin-right: 0.5em!important;">\n                <label>续费方式：</label>\n            </div>\n            <div class="field" ng-if="upgrade_prices.month > 0">\n                <div class="ui radio checkbox">\n                    <input name="type" id="price-{{ id }}-1" type="radio" value="month" ng-model="form.period"/>\n                    <label for="price-{{ id }}-1"><em ng-bind="upgrade_period.month"></em>/月</label>\n                </div>\n            </div>\n            <div class="field" ng-if="upgrade_prices.half_year > 0">\n                <div class="ui radio checkbox">\n                    <input name="type" id="price-{{ id }}-2" type="radio" value="half_year" ng-model="form.period"/>\n                    <label for="price-{{ id }}-2"><em ng-bind="upgrade_period.half_year"></em>/半年</label>\n                </div>\n            </div>\n            <div class="field" ng-if="upgrade_prices.full_year > 0">\n                <div class="ui radio checkbox">\n                    <input name="type" id="price-{{ id }}-3" type="radio" value="full_year" ng-model="form.period"/>\n                    <label for="price-{{ id }}-3"><em ng-bind="upgrade_period.full_year"></em>/一年</label>\n                </div>\n            </div>\n        </div>\n        <div class="inline fields" style="margin-bottom: 15px;">\n            <div class="field">\n                <label>自动续费：</label>\n            </div>\n            <div class="field">\n                <div class="ui toggle checkbox">\n                    <input id="{{ id }}-renewal" type="checkbox" ng-model="form.renewal"/>\n                    <label for="{{ id }}-renewal"></label>\n                </div>\n            </div>\n            <div class="field">\n                <p class="green tips" ng-if="form.renewal">自动从账户余额中扣费为项目续费</p>\n                <p class="red tips" ng-if="!form.renewal">到期后，该项目将会降级为普通项目</p>\n            </div>\n        </div>\n        <div class="field">\n            <p class="tips">\n                * 确认修改后，自下个续费期生效。\n            </p>\n        </div>\n    </form>\n</div>\n<div class="actions">\n    <a class="ui cancel borderless button">取消</a>\n    <a class="ui ok button green" ng-click="renewal(form);">确认修改</a>\n</div>\n<div class="ui modal account-charge-modal"\n     ng-controller="ProjectUpgradeChargeModalCtrl"\n     cg-modal="upgrade_charge_modal"\n     ng-include="\'app/project/setting/summary/modal/upgrade_charge_modal.html\'"></div>\n'),a.put("app/project/setting/summary/modal/renewal_result_modal.html",'<div class="content">\n    <h2 class="green" style="margin-top: 30px;">\n        续费成功！\n    </h2>\n    <p>\n        到期时间：2015-12-11 12:01\n    </p>\n</div>'),a.put("app/project/setting/summary/modal/upgrade_charge_modal.html",'<form id="upgrade-charge-modal-form" class="top-up-form ui small form" action="/api/payment/charge" target="_blank"\n      method="POST" ng-submit="charge($event, form)">\n    <div class="header">账户充值</div>\n    <div class="content">\n        <div class="field message" ng-if="insufficient">\n            账户余额不足，马上充值！\n        </div>\n        <div class="field balance">\n            <label>账户余额：<em ng-bind="balance"></em> 元</label>\n        </div>\n        <div class="inline field">\n            <label>充值金额：</label>\n            <input type="text" name="price" ng-model="form.price" decimals="2" decimal-point="."\n                   style="width: 100px;margin-right: 5px;">元\n        </div>\n        <div class="inline field">\n            <label>充值方式：</label>\n            <input type="radio" name="platform" id="top-up-method-{{ id }}-alipay" value="alipay"\n                   ng-model="form.platform"\n                   placeholder="" checked>\n            <label for="top-up-method-{{ id }}-alipay">\n                <img class="top-up-method-img" src="https://dn-coding-net-production-static.qbox.me/static/baf1cf414bd43a036b8b15c589e66694.gif" alt="alipay"/>\n            </label>\n            <input type="radio" name="platform" id="top-up-method-{{ id }}-weixin" value="weixin"\n                   ng-model="form.platform"\n                   placeholder="" style="margin-left: 30px;">\n            <label for="top-up-method-{{ id }}-weixin">\n                <img class="top-up-method-img" src="https://dn-coding-net-production-static.qbox.me/static/5965fe18cd6c1951fe15884b2f3e54a6.jpg" style="height: 37px;" alt="weixin"/>\n            </label>\n        </div>\n    </div>\n    <div class="action-buttons">\n        <a class="ui cancel borderless button" ng-click="closeChargeModal()">取消</a>\n        <button type="submit" class="ui ok button green">马上充值</button>\n    </div>\n</form>\n\n<div class="ui modal top-up-modal"\n     cg-modal="top_up_modal"\n     ng-include="\'app/user/account_setting/account/modal/top-up-modal.html\'"></div>\n'),a.put("app/project/setting/summary/modal/upgrade_pro_modal.html",'<div class="header">升级为高级版</div>\n<div class="content project-upgrade-form">\n    <form class="ui form" method="POST">\n        <div class="field version-description">\n            <i class="inverted circular icon" ng-class="pro_version.icon"></i>\n            <article>\n                <h3>\n                    <span ng-bind="pro_version.name"></span>\n                    <a href="/upgrade" target="_blank">查看项目 免费版、开发版 和 高级版 对比详情 &raquo;</a>\n                </h3>\n                <p ng-bind="version_description"></p>\n            </article>\n        </div>\n        <div class="inline fields payment-period pl10">\n            <div class="field" ng-if="upgrade_prices.month > 0">\n                <div class="ui radio checkbox">\n                    <input name="type" id="price-{{ id }}-1" type="radio" value="month" ng-model="form.period" checked/>\n                    <label for="price-{{ id }}-1">\n                        <em ng-bind="upgrade_period.month">29</em>/月\n                    </label>\n                </div>\n            </div>\n            <div class="field" ng-if="upgrade_prices.half_year > 0">\n                <div class="ui radio checkbox">\n                    <input name="type" id="price-{{ id }}-2" type="radio" value="half_year" ng-model="form.period" ng-checked="upgrade_prices.month <= 0"/>\n                    <label for="price-{{ id }}-2">\n                        <em ng-bind="upgrade_period.half_year">149</em>/半年\n                        <strong>买5个月送1个月</strong>\n                    </label>\n                </div>\n            </div>\n            <div class="field" ng-if="upgrade_prices.full_year > 0">\n                <div class="ui radio checkbox">\n                    <input name="type" id="price-{{ id }}-3" type="radio" value="full_year" ng-model="form.period" ng-checked="upgrade_prices.half_year <= 0"/>\n                    <label for="price-{{ id }}-3">\n                        <em ng-bind="upgrade_period.full_year">269</em>/一年\n                        <strong>买9个月送3个月</strong>\n                    </label>\n                </div>\n            </div>\n        </div>\n        <div ng-include="\'app/project/setting/summary/voucher/voucher.html\'"></div>\n        <div class="field pl10" style="margin-bottom: 0px;">\n            <p class="tips">\n                * 升级为高级版后不能降级为开发版。\n            </p>\n            <p ng-if="upgrade_prices.remain > 0">\n                <span class="payment-discount-info">\n                    升级优惠金额：<span style="color:#666;">￥</span><span style="font-size: 20px;" ng-bind="upgrade_prices.remain"></span>\n                    <sup style="font-size: 12px;color:#666;">\n                        <i class="icon help"\n                           data-html="<div class=\'content\'>此金额是根据您付费购买的当前开发版剩余天数折现的：<br>优惠金额 ＝（当前版本每月单价 / 30 ）* （当前剩余天数 - 赠送天数）</div>"\n                           cg-popup="coupon_popup_opt"></i>\n                    </sup>\n                </span>\n            </p>\n        </div>\n    </form>\n</div>\n<div class="actions">\n    <span style="float:left;" ng-if="upgrade_prices.remain >= 0">\n        实付款：<span style="color:#666;">￥</span><strong class="red" style="font-size: 25px;" ng-bind="version_price"></strong>\n    </span>\n    <a class="ui cancel borderless button">取消</a>\n    <a class="ui ok button green" ng-click="upgrade(form);">确认升级</a>\n</div>\n<div class="ui modal account-charge-modal"\n     ng-controller="ProjectUpgradeChargeModalCtrl"\n     cg-modal="upgrade_charge_modal"\n     ng-include="\'app/project/setting/summary/modal/upgrade_charge_modal.html\'"></div>\n<div class="ui modal account-charge-modal"\n     ng-controller="PasswordRequiredModalCtrl"\n     cg-modal="password_required_modal"\n     ng-include="\'app/project/setting/summary/modal/password_required_modal.html\'"></div>\n'),a.put("app/project/setting/summary/upgrade.html",'<div class="project-upgrade-wrapper">\n    <div class="project-upgrade-form" ng-controller="ProjectUpgradeFormController">\n        <header class="ui dividing header">升级项目</header>\n\n        <p class="description">\n            Coding 升级项目可选择 “开发版” 和 “高级版”，使你的项目拥有更多的功能、更少的限制。<br/>\n            <a href="/upgrade">查看项目 免费版、开发版 和 高级版 对比详情 &raquo; </a>\n        </p>\n\n        <form class="ui form">\n            <div class="field choose-field">\n                <label class="version">选择升级版本：</label>\n                <ul class="versions clearfix">\n                    <li>\n                        <input name="version" type="radio"\n                               id="version-{{ project_versions.dev.id }}"\n                               value="{{ project_versions.dev.id }}"\n                               ng-model="form.version"\n                               checked/>\n                        <label for="version-{{ project_versions.dev.id }}">\n                            <a class="ui right green corner label">\n                                <i class="checkmark icon"></i>\n                            </a>\n                            <i class="circular inverted icon" ng-class="project_versions.dev.icon"></i>\n\n                            <h2 ng-bind="project_versions.dev.name"></h2>\n\n                            <p ng-bind-html="upgrade_version_desc.dev">\n                            </p>\n                        </label>\n                    </li>\n                    <li>\n                        <input name="version" type="radio"\n                               id="version-{{ project_versions.pro.id }}"\n                               value="{{ project_versions.pro.id }}"\n                               ng-model="form.version"/>\n                        <label for="version-{{ project_versions.pro.id }}">\n                            <a class="ui right green corner label">\n                                <i class="checkmark icon"></i>\n                            </a>\n                            <i class="circular inverted icon" ng-class="project_versions.pro.icon"></i>\n\n                            <h2 ng-bind="project_versions.pro.name"></h2>\n\n                            <p ng-bind-html="upgrade_version_desc.pro"></p>\n                        </label>\n                    </li>\n                </ul>\n            </div>\n            <div class="inline fields payment-period">\n                <div class="field">\n                    <div class="ui radio checkbox">\n                        <input name="type" id="price-1" type="radio" value="month" ng-model="form.period" checked/>\n                        <label for="price-1">\n                            <em ng-bind="upgrade_periods[form.version].month"></em>/月\n                        </label>\n                    </div>\n                </div>\n                <div class="field">\n                    <div class="ui radio checkbox">\n                        <input name="type" id="price-2" type="radio" value="half_year" ng-model="form.period"/>\n                        <label for="price-2">\n                            <em ng-bind="upgrade_periods[form.version].half_year"></em>/半年\n                            <strong>买5个月送1个月</strong>\n                        </label>\n                    </div>\n                </div>\n                <div class="field">\n                    <div class="ui radio checkbox">\n                        <input name="type" id="price-3" type="radio" value="full_year" ng-model="form.period"/>\n                        <label for="price-3">\n                            <em ng-bind="upgrade_periods[form.version].full_year"></em>/一年\n                            <strong>买9个月送3个月</strong>\n                        </label>\n                    </div>\n                </div>\n            </div>\n            <div ng-include="\'app/project/setting/summary/voucher/voucher.html\'"></div>\n            <div class="field money">\n                <span>实付款：￥</span> <span>{{version_price}}</span>\n            </div>\n            <div class="field">\n                <button class="ui green medium button" ng-click="upgrade(form);">\n                    马上升级\n                </button>\n                <p class="tips">\n                    注意：升级项目仅会升级当前项目，其他项目不会享受高级项目的权利。\n                </p>\n            </div>\n        </form>\n\n        <div class="ui modal account-charge-modal"\n             ng-controller="ProjectUpgradeChargeModalCtrl"\n             cg-modal="upgrade_charge_modal"\n             ng-include="\'app/project/setting/summary/modal/upgrade_charge_modal.html\'"></div>\n\n        <div class="ui modal account-charge-modal"\n             ng-controller="PasswordRequiredModalCtrl"\n             cg-modal="password_required_modal"\n             ng-include="\'app/project/setting/summary/modal/password_required_modal.html\'"></div>\n    </div>\n</div>\n'),a.put("app/project/setting/summary/voucher/voucher.html",'<div class="field voucher-form" ng-controller="VoucherController">\n    <p>\n        <i class="triangle icon" ng-class="{\'right\': !showVoucher, \'down\': showVoucher}" ng-click="showHideVoucher()"></i>\n        <span ng-click="showHideVoucher()">使用代金券</span>\n    </p>\n    <div class="inline fields" ng-show="!voucher && showVoucher">\n        <div class="ui default input">\n            <input type="text" placeholder="请输入代金券" ng-model="voucherCode" cg-enter="submitVoucher(voucherCode, captchaCode, $event)"/>\n        </div>\n        <div ng-show="showCaptcha" class="ui default input" style="width:100px!important; margin-left: 10px;">\n            <input type="text" placeholder="验证码" ng-model="captchaCode" cg-enter="submitVoucher(voucherCode, captchaCode, $event)"/>\n        </div>\n        <img ng-show="showCaptcha" ng-src="{{captcha}}" alt="验证码" ng-click="refreshCaptcha()" class="captcha-img" />\n        <div class="voucher-form-submit">\n            <a class="ui default green button" ng-click="submitVoucher(voucherCode, captchaCode)" ng-show="!loadingVoucher">使用</a>\n            <a class="ui default green button" style="width: 70px;" ng-show="loadingVoucher"><i class="loading icon" style="margin: 0;"></i></a>\n        </div>\n    </div>\n    <div class="voucher-code-show" ng-show="voucher && showVoucher">\n        <div>\n            代金券优惠金额：<span style="color: #666;">￥</span> <span style="font-size: 20px;color: #E88964;opacity:1;">{{voucher.money}}</span>\n            <p>过期时间：{{voucher.endDate | amDateFormat:\'YYYY-M-D HH:mm:ss\'}}</p>\n        </div>\n        <i class="remove icon red" ng-click="unuseVoucher()"></i>\n    </div>\n</div>\n'),a.put("app/project/setting/support/create.html",'<div class="project-support-create-wrapper" ng-controller="ProjectSupportCtrl">\n\n    <header class="ui dividing header">提交工单</header>\n\n    <form class="ui small form">\n        <div class="field">\n            <label>问题类型</label>\n            <div class="ui selection dropdown" cg-dropdown="types" cg-on-change="onTypeChange">\n                <input type="hidden" name="type" ng-model="ticket.type">\n                <div class="default text" >请选择</div>\n                <!--<div class="default text" ng-if="ticket.type.length !== 0" ng-bind="types[ticket.type-1].key"></div>-->\n                <i class="dropdown icon"></i>\n                <div class="menu">\n                    <div class="item"\n                         ng-repeat="type in types"\n                         data-value="{{ type.value }}"\n                         ng-bind="type.key"></div>\n                </div>\n            </div>\n        </div>\n        <div class="field fullscreen-title">\n            <label>标题</label>\n            <input type="text" ng-model="ticket.title"/>\n        </div>\n        <div class="field">\n            <label>详细描述</label>\n            <div cg-pagedown="contentUpdate($content)" min-height="200" id="-1" ng-model="ticket.content">\n                <textarea placeholder="工单内容"\n                          ng-model="ticket.content"\n                          cg-at-emoji\n                          cg-textarea-editable></textarea>\n            </div>\n        </div>\n        <div class="field fullscreen-title-right-buttons">\n            <button class="ui blue button" ng-class="{loading: creating}" ng-click="submit()">提交工单</button>\n        </div>\n    </form>\n\n</div>'),a.put("app/project/setting/support/index.html",'<div class="project-support-wrapper" ng-controller="CustomerTicketsCtrl">\n\n    <header class="ui dividing header">技术支持</header>\n\n    <section class="qa">\n        <h2>常见问题</h2>\n        <ul class="clearfix">\n            <li>\n                <a href="/help/faq/account/user.html#怎么修改邮箱，个性后缀，昵称？" target="_blank" >怎么修改邮箱，个性后缀，昵称？ </a>\n            </li>\n            <li>\n                <a href="/help/faq/paas/deploy.html#项目一键部署失败？" target="_blank" >项目一键部署失败？</a>\n            </li>\n            <li>\n                <a href="/help/faq/paas/deploy.html#支持-push-代码后自动更新部署演示吗？" target="_blank" >/支持 push 代码后自动更新部署演示吗？ </a>\n            </li>\n            <li>\n                <a href="/help/faq/paas/deploy.html#演示平台部署的网站支持-https-吗？" target="_blank" >演示平台部署的网站支持-https 吗？ </a>\n            </li>\n            <li>\n                <a href="/help/faq/git/repository.html#用户可以建多少个仓库？" target="_blank" >一个账号可以创建多少个项目？</a>\n            </li>\n            <li>\n                <a href="/help/faq/webide/ide.html#运行程序后，生成的-access-url-报502，404-是怎么回事？" target="_blank" >运行程序后，生成的 access-url 报502，404-是怎么回事？</a>\n            </li>\n            <li>\n                <a href="/help/faq/webide/ide.html#webide-可以安装数据库吗？" target="_blank" >webide 可以安装数据库吗？ </a>\n            </li>\n            <li>\n                <a href="/help/faq/git/git.html#代码-push-不了，报-ssl-abort，ssl-protocol-error，或者-connection-timeout-怎么办？" target="_blank" >代码 push 不了，报 SSL Abort，SSL protocol error，或者 Connection Timeout 怎么办？ </a>\n            </li>\n        </ul>\n    </section>\n\n    <section class="support">\n        <h2>工单列表 <span ng-if="total_count > 0">({{ total_count }})</span><a class="ui blue button" ng-href="{{PROJECT.project_path}}/setting/support/create">提交工单</a></h2>\n        <article class="markdown content">\n            <table class="text-align-left-th">\n                <thead>\n                <tr>\n                    <th>工单 ID</th>\n                    <th>标题</th>\n                    <th>提交者</th>\n                    <th>提交时间</th>\n                    <th>状态</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr ng-repeat="ticket in tickets">\n                    <td>{{::ticket.id}}</td>\n                    <td>\n                        <a ng-href="{{PROJECT.project_path}}/setting/support/ticket/{{::ticket.id}}">\n                            {{::ticket.title}}\n                        </a>\n                    </td>\n                    <td><a ng-href="{{::ticket.owner.path}}">{{::ticket.owner.name}}</a></td>\n                    <td>{{::ticket.created_at}}</td>\n                    <td>{{::ticket_status[ticket.status]}}</td>\n                </tr>\n                <tr ng-if="tickets.length === 0">\n                    <td colspan="5" align="center">\n                    <span ng-if="loaded">\n                        尚未提交任何工单\n                    </span>\n                    <span ng-if="loading">\n                        <i class="loading icon"></i>正在加载数据...\n                    </span>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n            <div class="center" cg-pager="{{ticket_pager_id}}"></div>\n        </article>\n    </section>\n\n</div>'),a.put("app/project/setting/support/ticket.html",'<style type="text/css">\n\n    #ticket-comments .comment{position: relative;padding:10px 0;}\n    #ticket-comments .comment img.avatar{position: absolute;top:22px;left:0;}\n    #ticket-comments .comment .content-wrapper{\n        margin-left: 45px;\n        padding: 15px;\n        position: relative;\n        border: 1px solid #EEE;\n        background: #FFF;\n        border-radius: 3px;\n    }\n    #ticket-comments .comment .content-wrapper:before{\n        margin-top: -11px;\n        bottom: auto;\n        right: auto;\n        top: 30px;\n        left: -6px;\n        position: absolute;\n        content: "";\n        width: .6em;\n        height: .6em;\n        -webkit-transform: rotate(45deg);\n        -moz-transform: rotate(45deg);\n        -ms-transform: rotate(45deg);\n        transform: rotate(45deg);\n        z-index: 2;\n        -webkit-transition: background .1s linear;\n        -moz-transition: background .1s linear;\n        transition: background .1s linear;\n        background-color: #FFF;\n        border-left: 1px solid #EEE;\n        border-bottom: 1px solid #EEE;\n    }\n    #ticket-comments .comment .content{line-height:23px;font-size:14px;margin-bottom: 10px;}\n    #ticket-comments .comment .content img.monkey.emotion{width: 64px;}\n    #ticket-comments .comment .time{font-size:12px;color:#999;}\n    #ticket-comments .comment .time a.remove,\n    #ticket-comments .comment .time a.reply{display: none;}\n    #ticket-comments .comment .time .mr10{\n        margin-right: 10px;\n    }\n    #ticket-comments .comment:hover .time a.remove,\n    #ticket-comments .comment:hover .time a.reply{display: inline;}\n\n    #comment-form{margin:20px 10px 50px 10px;}\n\n    #topic-detail .dividing.header > a.button{margin-top: 10px;}\n    #topic-detail .dividing.header img.avatar{margin-right: 15px;}\n\n    #topic-comment-editor.light-md-editor .editor > textarea{\n        min-height: 0;\n        max-height: none;\n    }\n\n    #project-ticket-detail{\n        position: relative;\n    }\n\n    #project-ticket-detail .topic-title{\n        position: relative;\n        padding-bottom: 15px;\n        margin-bottom: 20px;\n        border-bottom: 1px solid #CCC;\n    }\n\n    #project-ticket-detail .topic-title .avatar{\n        position: absolute;\n        display: inline-block;\n        width: 42px;\n        height: 42px;\n        left: 0;\n        top: 0;\n    }\n\n    #project-ticket-detail .topic-title h2{\n        font-size: 24px;\n        font-weight: normal;\n        color: #000;\n        margin: 0 0 3px 0;\n    }\n\n    #project-ticket-detail .topic-title .toolbar{\n        font-size: 12px;\n        color: #666;\n        line-height: 20px;\n    }\n\n    #project-ticket-detail .topic-title .toolbar .mr10{\n        margin-right: 10px;\n    }\n\n    #project-ticket-detail .topic-title .tags-show span.tag{\n        font-size: 12px;\n        font-weight: normal;\n        color: #FFF;\n        -webkit-border-radius: 3px;\n        -moz-border-radius: 3px;\n        border-radius: 3px;\n        padding: 2px 3px;\n        margin-right: 5px;\n        word-break: break-all;\n        vertical-align: top;\n    }\n\n    #project-ticket-detail .topic-content{\n        margin: 0 5px;\n    }\n\n    .public-project-view #project-ticket-detail-wrapper{\n        width: 818px;\n    }\n\n    #project-ticket-detail .ticket-comments-header{\n        margin: 20px 0;\n        padding-bottom: 10px;\n        border-bottom: 1px solid #CCC;\n        font-size: 16px;\n        color: #333;\n    }\n\n    #project-ticket-detail .ticket-comments-header .dropdown{\n        font-size: 14px;\n        padding-bottom: 5px;\n    }\n\n    #project-ticket-detail .ticket-comments-header .dropdown .menu .item{\n        padding: 8px!important;\n    }\n\n    #project-ticket-detail .ticket-comments-header .dropdown .menu .item .checkmark.icon{\n        opacity: 0;\n        margin-right: 0;\n    }\n\n    #project-ticket-detail .ticket-comments-header .dropdown .menu .item.active .checkmark.icon{\n        opacity: 1;\n    }\n\n    #project-ticket-detail .mr10 i.icon{\n        margin-right: 0;\n    }\n\n</style>\n\n<div class="project-ticket-wrapper" ng-controller="ProjectSupportTicketCtrl">\n\n    <div id="project-ticket-detail">\n        <div class="topic-title">\n            <h2 class="title" ng-bind-html="::(\'[\' + ticket_status[ticket.status] + \'] \' + ticket.title)"></h2>\n\n            <div class="toolbar">\n                <span class="mr10">{{::(\'#\'+ticket.id)}}</span>\n                <span class="mr10 owner"><a class="gray" ng-href="{{ USER.path }}"\n                                            ng-bind="USER.name"></a></span>\n                <span class="mr10 time"><i class="time icon"></i><span\n                    cg-friendly-time="ticket.created_at"></span></span>\n                <span class="mr10 comment"><i class="chat outline icon"></i><span\n                    ng-bind="ticket.child_count + \'条回复\'"></span></span>\n                <!--<span class="mr10 action" ng-if="canEdit()">\n                    <a class="gray" ng-href="{{PROJECT.project_path}}/topic/{{ticket.id}}/edit"><i class="edit icon"></i>编辑</a>\n                </span>\n                <span class="mr10 action">-->\n                    <!--<a class="gray" href="javascript:void(0);">-->\n                        <!--<i class="remove icon"></i>关闭工单</a>-->\n                <!--</span>-->\n            </div>\n        </div>\n        <div class="topic-content">\n            <div class="markdown content" cg-highlight="ticket.description" ng-if="ticket.description"></div>\n            <div class="empty list" ng-if="detail_loading"><i class="loading icon"></i>正在加载讨论内容...</div>\n        </div>\n        <div class="ticket-comments-header">\n            评论<span ng-if="!detail_loading">（<span ng-bind="ticket.child_count"></span>）</span>\n\n            <a href="javascript:void(0);" ng-click="refreshComments()" class="coding floated right"><i class="refresh icon"></i></a>\n            <!--<div class="ui simple dropdown coding floated right" ng-if="comments.length > 0">-->\n                <!--排序-->\n                <!--<i class="dropdown icon" style="margin-left: 5px;"></i>-->\n\n                <!--<div class="menu" style="left: -40px;">-->\n                    <!--<a class="item" href="javascript:void(0);"-->\n                       <!--ng-class="{active: comment_type === 0}"-->\n                       <!--ng-click="loadCommentsOfType(0);">-->\n                        <!--<i class="checkmark icon"></i>-->\n                        <!--最旧评论-->\n                    <!--</a>-->\n                    <!--<a class="item" href="javascript:void(0);"-->\n                       <!--ng-class="{active: comment_type === 1}"-->\n                       <!--ng-click="loadCommentsOfType(1);">-->\n                        <!--<i class="checkmark icon"></i>-->\n                        <!--最新评论-->\n                    <!--</a>-->\n                <!--</div>-->\n            <!--</div>-->\n        </div>\n    </div>\n\n    <div class="comments" id="ticket-comments">\n        <div class="comment" ng-repeat="item in comments">\n            <a>\n                <img class="ui avatar image" height="32" ng-if="item.author.photo" ng-src="{{ item.author.photo }}"/>\n            </a>\n\n            <div class="content-wrapper">\n                <div class="content markdown" cg-highlight="item.html_content">\n                </div>\n                <div class="time">\n                    <span class="mr10">\n                        <a class="gray" ng-if="item.author.email !== USER.email" title="客服：{{ item.author.agent_display_name }}" ng-bind="item.author.agent_display_name || item.author.name"></a>\n                        <a class="gray" ng-if="item.author.email === USER.email" ng-href="{{ USER.path }}" ng-bind="USER.name"></a>\n                    </span>\n                    <span class="mr10">\n                        <i class="time icon"></i><span cg-friendly-time="item.created_at"></span>\n                    </span>\n                    <span class="mr10" ng-if="USER">\n                        <a class="gray reply" href="javascript:void(0);"\n                           ng-click="replyTopic(item);"\n                           cg-scroll-to="topic-comment-editor">\n                            <!--<i class="chat outline icon"></i>回复-->\n                        </a>\n                    </span>\n                    <!--<span class="mr10" ng-if="false">-->\n                        <!--<a class="gray remove" href="javascript:void(0);" ng-click="deleteComment(item);">-->\n                            <!--<i class="remove icon"></i>删除-->\n                        <!--</a>-->\n                    <!--</span>-->\n                </div>\n            </div>\n        </div>\n        <div class="empty list" ng-if="comments_loaded && comments.length == 0"><i class="coffee icon"></i>还没人评论<span\n            ng-if="USER">，来一发？</span></div>\n        <div class="empty list" ng-if="comments_loading && comments.length === 0"><i class="loading icon"></i>正在加载评论~</div>\n        <!--<div cg-pager="{{topic_detail_pager_id}}"></div>-->\n    </div>\n\n    <form id="comment-form" ng-if="USER">\n        <div id="ticket-comment-editor"\n             cg-light-md-editor="commentTicket"\n             data-ng-model="ticket_comment"\n             at-member="PROJECT.id"\n             project_dependency="PROJECT">\n        </div>\n    </form>\n\n</div>\n'),a.put("app/project/setting/webhook/edit.html",'<div class="webhooks" ng-controller="ProjectWebHookEditController">\n    <div class="git-main-form">\n        <form class="ui form setting" ng-submit="submit(hook)">\n            <div class="field">\n                <div class="input">\n                    <input type="text" ng-model="hook.hook_url" name="hook_url" placeholder="url">\n                </div>\n            </div>\n            <div class="field">\n                <div class="input">\n                    <input type="text" ng-model="hook.token" name="token" placeholder="token(非必填)">\n                </div>\n            </div>\n            <div class="field">\n                <table style="color: #666;">\n                    <tr>\n                        <td><div class="ui toggle checkbox"><input type="checkbox" ng-model="hook.type_push" id="type_push"><label for="type_push">Push</label></div></td>\n                        <td><div class="ui toggle checkbox"><input type="checkbox" ng-model="hook.type_mr_pr" id="type_mr_pr"><label for="type_mr_pr">MR/PR</label></div></td>\n                        <td><div class="ui toggle checkbox"><input type="checkbox" ng-model="hook.type_topic" id="type_topic"><label for="type_topic">Topic</label></div></td>\n                    </tr>\n                    <tr>\n                        <td><div class="ui toggle checkbox"><input type="checkbox" ng-model="hook.type_member" id="type_member"><label for="type_member">Member</label></div></td>\n                        <td><div class="ui toggle checkbox"><input type="checkbox" ng-model="hook.type_document" id="type_document"><label for="type_document">Document</label></div></td>\n                        <td><div class="ui toggle checkbox"><input type="checkbox" ng-model="hook.type_task" id="type_task"><label for="type_task">Task</label></div></td>\n                    </tr>\n                    <tr>\n                        <td><div class="ui toggle checkbox"><input type="checkbox" ng-model="hook.type_watch" id="type_watch"><label for="type_watch">Watch</label></div></td>\n                        <td><div class="ui toggle checkbox"><input type="checkbox" ng-model="hook.type_star" id="type_star"><label for="type_star">Star</label></div></td>\n                    </tr>\n                </table>\n            </div>\n            <div>\n                <input ng-show="!submit_loading" type="submit" value="确定" class="ui dark gray medium submit button"/>\n\n                <div ng-show="submit_loading" class="ui dark gray medium submit button" style="width: 90px"><i\n                    class="loading icon" style="margin:0;"></i></div>\n            </div>\n        </form>\n    </div>\n</div>\n'),
a.put("app/project/setting/webhook/index.html",'<div class="webhooks" ng-controller="ProjectWebHookIndexController">\n    <div class="clearfix" style="padding-bottom: 12px;max-width:800px;min-width:800px;">\n        <a href="/help/doc/git/webhook.html" target="_blank" style="float: right"><i class="icon help tip"></i></a>\n        <a class="ui small white button floated right" ng-href="{{PROJECT.project_path}}/setting/webhook/new">新建 Hook</a>\n    </div>\n    <div class="webhook-title">\n        <table>\n            <tr>\n                <td class="webhook-title url">地址</td>\n                <td class="webhook-title token">令牌</td>\n                <td class="webhook-title status">状态</td>\n                <td class="webhook-title oper">操作</td>\n            </tr>\n        </table>\n    </div>\n    <div ng-if="webHooks.length == 0">\n      <span style="font-size:12px;color:#333;">\n        还未添加 WebHook 。<a ng-href="{{PROJECT.project_path}}/setting/webhook/new">点击添加</a>\n      </span>\n    </div>\n    <div ng-if="webHooks.length != 0" ng-repeat="hook in webHooks">\n        <div class="webhook">\n            <table>\n                <tr>\n                    <td class="webhook url">{{hook.hook_url}}</td>\n                    <td class="webhook token">{{hook.token || \'\'}}</td>\n                    <td class="webhook status">\n                        <i ng-if="hook.status == 1" class="checkmark green icon"></i>\n                        <i ng-if="hook.status != 1" class="remove red icon"></i>\n                    </td>\n                    <td class="webhook oper">\n                        <a class="ui small white button"\n                           ng-href="{{PROJECT.project_path}}/setting/webhook/edit/{{hook.id}}">修改</a>\n                        <a class="ui small white button"\n                           href="javascript:void(0);" ng-click="testWebhook(hook.id)">测试</a>\n                        <a href="javascript:void(0);" class="ui small white button"\n                           ng-click="deleteWebhook(hook.id)">删除</a>\n                    </td>\n                </tr>\n            </table>\n        </div>\n    </div>\n\n    <div style="margin-top:30px;margin-bottom:10px;">发送记录</div>\n    <div class="webhook-title">\n        <table>\n            <tr>\n                <td class="webhook-title send-time">发送时间</td>\n                <td class="webhook-title reason">触发原因</td>\n                <td class="webhook-title result">结果信息</td>\n                <td class="webhook-title url">地址</td>\n                <td class="webhook-title content">内容</td>\n            </tr>\n        </table>\n    </div>\n    <div ng-if="webHookLogs.length == 0">\n      <span style="font-size:12px;color:#333;">\n        暂无发送记录\n      </span>\n    </div>\n    <div ng-if="webHookLogs.length != 0" ng-repeat="log in webHookLogs">\n        <div class="webhook">\n        <table>\n            <tr>\n                <td class="webhook send-time">\n                    <i ng-if="log.status == 1" class="checkmark green icon"></i>\n                    <i ng-if="log.status == 0" class="time yellow icon"></i>\n                    <i ng-if="log.status == -1" class="remove red icon"></i>\n                <time ng-if="log.status != 0" cg-friendly-time="log.send_at"></time>\n                <span ng-if="log.status == 0">待发送</span>\n                </td>\n                <td class="webhook reason">{{log.reason}}</td>\n                <td class="webhook result">{{log.result_msg}}</td>\n                <td class="webhook url">\n                <span ng-if="log.webhook_url">{{log.webhook_url}}</span>\n                <span ng-if="!log.webhook_url">WebHook 已删除</span>\n                </td>\n                <td class="webhook content">{{log.content}}</td>\n            </tr>\n        </table>\n        </div>\n    </div>\n</div>\n'),a.put("app/project/setting/webhook/new.html",'<div class="webhooks" ng-controller="ProjectWebHookNewController">\n    <div class="git-main-form">\n        <form class="ui form setting" ng-submit="submit(hook)">\n            <div class="field">\n                <div class="input">\n                    <input type="text" ng-model="hook.hook_url" name="hook_url" placeholder="url">\n                </div>\n            </div>\n            <div class="field">\n                <div class="input">\n                    <input type="text" ng-model="hook.token" name="token" placeholder="token(非必填)">\n                </div>\n            </div>\n            <div class="field">\n                <table style="color: #666;">\n                    <tr>\n                        <td><div class="ui toggle checkbox"><input type="checkbox" ng-model="hook.type_push" id="type_push"><label for="type_push">Push</label></div></td>\n                        <td><div class="ui toggle checkbox"><input type="checkbox" ng-model="hook.type_mr_pr" id="type_mr_pr"><label for="type_mr_pr">MR/PR</label></div></td>\n                        <td><div class="ui toggle checkbox"><input type="checkbox" ng-model="hook.type_topic" id="type_topic"><label for="type_topic">Topic</label></div></td>\n                    </tr>\n                    <tr>\n                        <td><div class="ui toggle checkbox"><input type="checkbox" ng-model="hook.type_member" id="type_member"><label for="type_member">Member</label></div></td>\n                        <td><div class="ui toggle checkbox"><input type="checkbox" ng-model="hook.type_document" id="type_document"><label for="type_document">Document</label></div></td>\n                        <td><div class="ui toggle checkbox"><input type="checkbox" ng-model="hook.type_task" id="type_task"><label for="type_task">Task</label></div></td>\n                    </tr>\n                    <tr>\n                        <td><div class="ui toggle checkbox"><input type="checkbox" ng-model="hook.type_watch" id="type_watch"><label for="type_watch">Watch</label></div></td>\n                        <td><div class="ui toggle checkbox"><input type="checkbox" ng-model="hook.type_star" id="type_star"><label for="type_star">Star</label></div></td>\n                    </tr>\n                </table>\n            </div>\n            <div>\n                <input ng-show="!submit_loading" type="submit" value="确定" class="ui dark gray medium submit button"/>\n\n                <div ng-show="submit_loading" class="ui dark gray medium submit button" style="width: 90px"><i\n                    class="loading icon" style="margin:0;"></i></div>\n            </div>\n        </form>\n    </div>\n</div>\n'),a.put("app/project/standalone_password_validate_modal.html",'<div class="ui tiny40 modal" id="standalone-password-validate-modal">\n    <i class="close icon"></i>\n    <div class="header">需要{{method_message}}\n        <sup ng-hide="method === \'password\'">\n            <a title="点击查看两步验证帮助文档" class="gray" target="_blank" href="/help/doc/account/2fa.html"  target="_blank" >\n                <i class="help icon" style="color: #666;font-size: 12px"></i>\n            </a>\n        </sup>\n    </div>\n    <div class="content">\n        <div class="ui red message" ng-bind="words"></div>\n        <div class="ui small form" ng-class="{loading: deleting}" style="font-size: 1.125em;">\n            <div class="ui fluid action medium input">\n                <input type="password" ng-show="method === \'password\'" placeholder="请输入{{method_message}}" style="display: initial;" ng-model="two_factor_code" cg-enter="passwordValidate();">\n                <input type="text" ng-hide="method === \'password\'" placeholder="请输入{{method_message}}" style="display: initial;" ng-model="two_factor_code" cg-enter="passwordValidate();">\n                <div class="ui red button" ng-click="passwordValidate();">确认</div>\n            </div>\n        </div>\n    </div>\n    <div class="actions">\n        <div class="ui cancel button">取消</div>\n    </div>\n</div>\n'),a.put("app/task/detail.html",'<div ng-controller="TaskDetailController">\n    <!-- 任务简单头部 -->\n    <div class="task-detail-header" style="min-width: 750px;" ng-if="task">\n        <div cg-task-detail-header="task"\n             members="members"\n             tags="tags"></div>\n    </div>\n    <div class="layout-content-right-menu" id="task-detail-menu" style="min-width: 830px;">\n        <div class="layout-content">\n            <!-- 任务详情 -->\n            <div class="task-detail-description" style="min-width: 600px;" ng-if="task">\n                <div class="icon">\n                    <i class="icon align right rotate180"></i>\n                </div>\n                <div class="detail">\n                    <cg-task-description\n                        class="task-description"\n                        ng-model="task"\n                        can-edit="true"\n                        show="!!task">\n                    </cg-task-description>\n                </div>\n            </div>\n            <!-- 关联资源 -->\n            <cg-resource-reference-list\n                self="task"\n                show-add="true">\n            </cg-resource-reference-list>\n            <!-- 动态筛选 -->\n            <div class="task-activity-filter">\n                <a class="gray" href="javascript:void(0);"\n                   ng-click="toggleTaskDetailUrl();">\n                    <i class="icon check-icon" ng-class="checkIconClass(just_show_comment)"></i>只看评论\n                </a>\n            </div>\n            <!-- 动态列表（包含评论）-->\n            <div class="task-detail-activity" ng-show="activities.length > 0"\n                 cg-page-scroll cg-page-scroll-namespace="cgPageScroll.namespace">\n                <div class="task-activity"\n                     ng-repeat="activity in activities"\n                     ng-if="showActivity(activity);"\n                     cg-task-comment-activity="activity"\n                     data-anchor=".task-comment-creator"\n                     editor-id="project-task-comment-editor"\n                     on-remove="onRemove"\n                     current-history-id="task.history_id"\n                ></div>\n            </div>\n            <!-- 评论框 -->\n            <div class="task-comment-creator" id="task-comment-creator">\n                <div cg-light-md-editor="onComment"\n                     editor-id="project-task-comment-editor"\n                     at-item="task"\n                     at-context-type="\'task_comment\'"\n                     data-ng-model="content"\n                     img-compression="false"\n                     project_dependency="task.project"></div>\n            </div>\n        </div>\n        <!-- 右侧各种任务参数更新操作 -->\n        <div class="layout-menu" ng-controller="TaskDetailMenuController" style="width: 150px;">\n            <div class="task-create-menu" ng-if="form">\n                <div class="task-menu-item">\n                    <header>引用 ID</header>\n                    <span class="selected-content" ng-bind="\'#\' + task.number"></span>\n                </div>\n                <div class="task-menu-item">\n                    <div ng-include="\'app/task/modal/snippets/detail/select_project.html\'"></div>\n                </div>\n                <div class="task-menu-item">\n                    <div ng-include="\'app/task/modal/snippets/detail/select_member.html\'"></div>\n                </div>\n                <div class="task-menu-item">\n                    <div ng-include="\'app/task/modal/snippets/detail/select_urgency.html\'"></div>\n                </div>\n                <div class="task-menu-item">\n                    <div ng-include="\'app/task/modal/snippets/detail/select_deadline.html\'"></div>\n                </div>\n                <div class="task-menu-item with-top-separator" style="margin-bottom: 5px;">\n                    <div ng-include="\'app/task/modal/snippets/detail/select_label.html\'"></div>\n                </div>\n                <div class="task-menu-item with-top-separator task-detail-watchlist" id="task-member-selector" style="margin-bottom: 5px;">\n                    <div ng-include="\'app/task/modal/snippets/detail/select_watcher.html\'"></div>\n                </div>\n                <div class="task-menu-item with-top-separator" style="padding-top: 10px; margin-top: 10px;"\n                     ng-if="(USER | isCreatorOf: task) || (task | isRole: ADMIN)">\n                    <a ng-click="removeTask(task)"\n                       href="javascript:void(0);"\n                       class="ui small red button">删除任务</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("app/task/edit_tag.html",'<div id="tags-all" ng-controller="ProjectTaskEditTagController">\n    <header ng-click="toggleShowTags($event)" ng-class="{active: tagActive()}">\n        <i class="icon triangle down" ng-if="just_show"></i>\n        <i class="icon triangle right" ng-if="!just_show"></i>\n        所有标签\n        <span ng-if="tags.length > 0" ng-bind="\'(\' + tags.length + \')\'"></span>\n    </header>\n    <i class="icon add" ng-click="toggleAddTag()"\n       data-html="添加新标签"\n       data-position="top center"\n       data-variation="inverted"\n       cg-popup>\n    </i>\n    <div class="new-tag ui popup bottom left" ng-class="{visible: show_add_tag}">\n        <div class="tag">\n            <div class="ui input">\n                <input type="text" placeholder="回车新增标签" ng-model="new_tag.name" cg-enter="addTaskTag(new_tag)">\n            </div>\n            <div class="tag-color" ng-model="new_tag" cg-tag-color-picker can-change-color="true"></div>\n            <i class="loading icon tag-icon" ng-if="new_tag.saving"></i>\n        </div>\n    </div>\n    <div class="tag-list" ng-show="just_show">\n        <div id="tag-search" class="search item">\n            <div class="ui icon input">\n                <input type="text" class="search-tags" placeholder="Search..." ng-model="searchTags">\n                <i class="search icon"></i>\n            </div>\n        </div>\n        <span class="loading-label" ng-if="loading_label">\n            <i class="loading icon"></i>正在加载数据...\n        </span>\n        <div class="tag-item"\n           ng-if="just_show"\n           ng-repeat="tag in tags | orderBy:\'name\' | filter:{name:searchTags}"\n           ng-class="{active: tag.id == task_label_id, \'no-highlight\': tag_editable[tag.id]}">\n            <div ng-if="!tag_editable[tag.id]">\n                <div class="tag">\n                    <i class="tag icon" ng-style="{color: tag.color}"></i>\n                </div>\n                <div class="tag-description" ng-bind-html="tagName(tag)" title="标签 (未完成/全部任务)" ng-click="selectTag(tag)"></div>\n                <i class="pencil icon"\n                   ng-click="enableTagEditable(tag.id, $event)"\n                   data-position="top center"\n                   data-variation="inverted"\n                   data-html="编辑标签"\n                   cg-popup>\n                </i>\n            </div>\n            <div ng-if="tag_editable[tag.id]">\n                <div class="ui input">\n                    <input type="text" ng-model="tag.reverted_name" cg-enter="updateTag(tag)">\n                    <i class="level down icon"\n                       ng-click="updateTag(tag)"\n                       title="回车完成编辑">\n                    </i>\n                </div>\n                <div class="tag-color" ng-model="tag"\n                     cg-tag-color-picker\n                     can-change-color="true"\n                     on-color-change="onColorChange">\n                </div>\n                <i class="icon"\n                   ng-class="{\'red remove\': !tag.updating, \'loading\': tag.updating}"\n                   ng-click="removeTag(tag, $event)"\n                   data-position="top center"\n                   data-variation="inverted"\n                   data-html="删除标签"\n                   cg-popup>\n                </i>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("app/task/index.html",'<style type="text/css">\n#inner-menu {\n    width: 250px;\n    z-index: 4;\n    background: #F7F6F2;\n}\n\n#inner-menu ~ .container {\n    margin-left: 250px !important;\n}\n\n#members {\n    margin-top: 8px;\n    position: relative;\n    border-top: 1px solid #DDD;\n}\n\n#members > .header {\n    margin: 18px 20px 10px;\n    font-size: 16px;\n    opacity: 0.8;\n}\n\n#members .member {\n    position: relative;\n    display: block;\n    height: auto;\n    width: 100%;\n    cursor: pointer;\n    margin: 0;\n    padding: 3px 8px!important;\n}\n\n#members .member div.avatar {\n    position: absolute;\n    left: 20px;\n    top: 50%;\n    width: 32px;\n    height: 32px;\n    margin-top: -16px;\n}\n\n#members .member img.avatar {\n    width: 32px;\n    height: 32px;\n    margin: 0;\n}\n\n#members .member .name {\n    padding: 0 50px 0 60px;\n    line-height: 40px;\n    height: 40px;\n    width: 88px;\n    font-size: 14px;\n}\n\n#members .member .rate{\n    position: absolute;\n    right: 15px;\n}\n\n.project.tasks {\n    position: relative;\n    margin:20px 0;\n}\n\n#member-search {\n    padding: 0 20px 5px;\n    font-size: 12px;\n    margin: 0;\n}\n\n#member-search .input{\n    padding-top: 0;\n    width: 100%;\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n}\n\n#member-search .input input{\n    background-color: #FFFFFF;\n    border: 1px solid rgba(0, 0, 0, 0.15);\n    width: 100%;\n}\n\n#member-search .ui.input.icon > .icon{\n    padding-top: 9px;\n}\n</style>\n\n<div class="ui secondary vertical fixed menu active" id="inner-menu">\n    <header class="header item">\n        任务列表\n        <article>\n            在此可以查看项目所有的任务，以及某成员的任务。\n        </article>\n    </header>\n    <a class="item" ng-click="loadTasks(\'all\')" ng-class="{active:isActive(\'all\')}">\n        <i class="tasks icon"></i>所有任务\n        (<span ng-bind="tasks_count.done + tasks_count.processing"></span>)\n    </a>\n    <a class="item" ng-click="loadTasks(\'processing\')" ng-class="{active:isActive(\'processing\')}">\n        <i class="time icon"></i>正在进行\n        (<span ng-bind="tasks_count.processing"></span>)\n    </a>\n    <a class="item" ng-click="loadTasks(\'done\')" ng-class="{active:isActive(\'done\')}">\n      <i class="green ok circle icon"></i>已完成\n      (<span ng-bind="tasks_count.done"></span>)\n    </a>\n    <a class="item" ng-click="loadTasks(\'watch\')" ng-class="{active:isActive(\'watch\')}">\n      <i class="unhide icon"></i>我关注的\n      (<span ng-bind="tasks_count.watch || 0"></span>)\n    </a>\n    <a class="item" ng-click="loadTasks(\'create\')" ng-class="{active:isActive(\'create\')}">\n      <i class="add sign icon"></i>我创建的\n      (<span ng-bind="tasks_count.create || 0"></span>)\n    </a>\n    <div ng-include="\'app/task/edit_tag.html\'"></div>\n    <div id="members" class="menu">\n        <div class="header">所有成员</div>\n        <div id="member-search" class="search item">\n            <div class="ui icon input">\n                <input type="text" class="search-member" placeholder="Search..." ng-model="searchMember">\n                <i class="search icon"></i>\n            </div>\n        </div>\n        <a class="member item" ng-repeat="member in members | filter:searchMember"\n           ng-click="loadTasks(\'user\',member.user.global_key,\'all\')"\n           ng-class="{active:shouldMemberActive && task_user == member.user.global_key && view === \'list\'}">\n            <div class="avatar"><img class="ui avatar32 image" ng-src="{{::member.user.avatar}}"/></div>\n            <div class="name ellipsis">\n                <!-- 有备注名则显示备注名，否则显示昵称 -->\n                <span ng-if="member.alias">{{member.alias}}</span>\n                <span ng-if="!member.alias">{{member.user.name}}</span>\n                <span class="rate" title="未完成/全部任务">\n                    {{member.count.processing || 0}}/{{(member.count.processing || 0) + (member.count.done || 0)}}\n                </span>\n            </div>\n        </a>\n        <div class="scroll-holder"></div>\n    </div>\n</div>\n<div class="container" ng-include="\'app/task/\' + view + \'.html\'"></div>\n'),a.put("app/task/list.html",'<div id="task-list" ng-controller="TaskListController">\n\n  <div id="related-task-tips" class="hide">\n        <span class="title-desc">\n          我 “创建” 的以及我 “指派” 给其他成员的任务，让你从此不错过任何一个管理的任务。\n        </span>\n  </div>\n\n  <div class="ui dividing header">\n        <span ng-bind-html="task_header_title"></span><i ng-if="inner_menu === \'related\'"class="help icon task-title" cg-popup template="#related-task-tips"></i>（{{tasks_total_count || 0}}）\n        <div ng-if="inner_menu==\'user\'" class="ui simple dropdown filter-select select-title">\n            <div class="owner-task-title" ng-if="user_task_status == \'all\'">全部任务</div>\n            <div class="owner-task-title" ng-if="user_task_status == \'done\'">已完成</div>\n          <div class="owner-task-title" ng-if="user_task_status == \'processing\'">正在进行</div>\n          <div class="owner-task-title" ng-if="user_task_status == \'related\'">与我相关</div>\n            <i class="dropdown icon dropdown-icon"></i>\n            <div class="menu menu-option">\n                <a class="item" ng-class="{active: user_task_status == \'all\'}" ng-click="changeOwnerStatus(\'all\');">全部任务</a>\n                <a class="item" ng-class="{active: user_task_status == \'done\'}" ng-click="changeOwnerStatus(\'done\');">已完成</a>\n                <a class="item" ng-class="{active: user_task_status == \'processing\'}" ng-click="changeOwnerStatus(\'processing\');">正在进行</a>\n            </div>\n        </div>\n          <div class="ui simple dropdown filter-select">\n              <div class="owner-task-title" ng-if="sort_order == \'0\'">默认排序</div>\n              <div class="owner-task-title" ng-if="sort_order == \'1\'">按更新时间倒序</div>\n              <div class="owner-task-title" ng-if="sort_order == \'2\'">按更新时间正序</div>\n              <div class="owner-task-title" ng-if="sort_order == \'3\'">按发布时间倒序</div>\n              <div class="owner-task-title" ng-if="sort_order == \'4\'">按发布时间正序</div>\n              <i class="dropdown icon dropdown-icon"></i>\n              <div class="menu menu-option">\n                  <a class="item" ng-class="{active: sort_order == \'0\'}" ng-click="changeSortOrder(\'0\');">默认排序</a>\n                  <a class="item" ng-class="{active: sort_order == \'1\'}" ng-click="changeSortOrder(\'1\');">按更新时间倒序</a>\n                  <a class="item" ng-class="{active: sort_order == \'2\'}" ng-click="changeSortOrder(\'2\');">按更新时间正序</a>\n                  <a class="item" ng-class="{active: sort_order == \'3\'}" ng-click="changeSortOrder(\'3\');">按发布时间倒序</a>\n                  <a class="item" ng-class="{active: sort_order == \'4\'}" ng-click="changeSortOrder(\'4\');">按发布时间正序</a>\n              </div>\n          </div>\n    </div>\n    <div ng-if="inner_menu != \'done\'"\n         cg-task-creator="task"\n         project-dependency="PROJECT"\n         multiple="false"\n         username="username"\n         project_name="project_name"\n         members="members"\n         insert-image="true"></div>\n    <div class="project tasks">\n        <div ng-repeat="task in tasks" cg-task-item="task" tags="tags" hide-watch="inner_menu === \'watch\'" members="members">\n            <cg-task-comment ng-model="task" show="task.commenting" class="comment-list"></cg-task-comment>\n            <cg-task-description class="task-description"\n                ng-if="task.show_description"\n                ng-model="task"\n                show="task.show_description"\n                can-edit="false"\n                project-dependency="PROJECT">\n            </cg-task-description>\n            <div cg-task-member-picker="task.owner" members="members" multiple="false" active="task.status === 1"></div>\n        </div>\n        <div class="empty center list" ng-switch="inner_menu" ng-if="tasks.length == 0 && tasks_loaded">\n            <span ng-switch-when="done">还没有完成任何任务，加勒个油！</span>\n            <span ng-switch-when="processing"><i class="coffee icon"></i>没有正在处理的任务，喝杯茶休息下！</span>\n            <span ng-switch-when="related"><i class="coffee icon"></i>你这是还没开始协作吧？速速给别人创建个任务吧！</span>\n            <span ng-switch-when="all">没有任务的项目稍显寥落，别让这空着哦！</span>\n            <span ng-switch-when="user">为何你这么叼，一个任务都没有！</span>\n            <span ng-switch-when="project">为何你这么叼，一个任务都没有！</span>\n        </div>\n        <div class="empty center list" ng-if="tasks_loading">\n            <span><i class="loading icon"></i>正在加载数据...</span>\n        </div>\n        <div cg-pager="{{task_pager_id}}" class="center"></div>\n    </div>\n</div>\n'),a.put("app/task/modal/create_task_modal.html",'<div class="ui tiny modal" id="create-task-modal">\n    <i class="close icon"></i>\n    <div class="header">创建任务</div>\n    <div class="content flex-box flex-direction-row">\n        <form class="ui form" method="POST" ng-if="projects.length > 0">\n            <div class="layout-content-right-menu ">\n                <div class="layout-content flex-auto-justify">\n                    <div class="field">\n                        <label>任务内容<i class="icon asterisk red"></i></label>\n\n                        <div class="ui medium input fluid">\n                            <input type="text" name="name"\n                                   cg-auto-focus tabindex="1001" placeholder="添加任务内容"\n                                   ng-model="form.content"\n                                   cg-ctrl-enter="createTask(task)"/>\n                        </div>\n                    </div>\n                    <div class="field">\n                        <label>任务描述</label>\n                        <div class="ui input fluid">\n                            <div cg-light-md-editor="onSubmit"\n                                 editor-id="project-task-create-modal"\n                                 placeholder="添加任务描述（支持 Markdown）"\n                                 on-change="onDescriptionChange"\n                                 at-item="form.project"\n                                 at-context-type="\'task_description\'"\n                                 project-dependency="form.project"\n                                 img-compression="false"\n                                 image-picker-mode="\'md-editor up\'"\n                                 tab-index="1002"></div>\n                        </div>\n                    </div>\n                </div>\n                <div class="layout-menu flex-none">\n                    <div class="task-create-menu">\n                        <div class="task-menu-item">\n                            <div ng-include="\'app/task/modal/snippets/select/select_project.html\'"></div>\n                        </div>\n                        <div class="task-menu-item">\n                            <div ng-include="\'app/task/modal/snippets/select/select_member.html\'"></div>\n                        </div>\n                        <div class="task-menu-item">\n                            <div ng-include="\'app/task/modal/snippets/select/select_urgency.html\'"></div>\n                        </div>\n                        <div class="task-menu-item">\n                            <div ng-include="\'app/task/modal/snippets/select/select_deadline.html\'"></div>\n                        </div>\n                        <div class="task-menu-item with-top-separator">\n                            <div ng-include="\'app/task/modal/snippets/select/select_label.html\'"></div>\n                        </div>\n                        <div class="task-menu-item with-top-separator" id="task-create-member-select">\n                            <div ng-include="\'app/task/modal/snippets/select/select_watcher.html\'"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </form>\n        <div class="without-projects" ng-if="projects.length === 0" style="text-align: center;padding: 100px 0;">\n            <div ng-if="supplies_loading">\n                <i class="loading icon"></i>加载数据中...\n            </div>\n            <div ng-if="!supplies_loading">\n                <p><i class="coffee icon"></i>尚未创建或参与任何项目</p>\n                <article>\n                    <p><a href="/user/projects/create" class="ui green medium button" ng-click="hideModal()">创建一个项目</a></p>\n                </article>\n            </div>\n        </div>\n    </div>\n    <div class="action-buttons">\n        <a class="ui cancel borderless button" ng-click="hideModal()">取消</a>\n        <a class="ui ok button green" ng-click="createTask(form);">\n            <i class="loading icon" ng-if="creating"></i>创建\n        </a>\n    </div>\n</div>\n'),a.put("app/task/modal/snippets/detail/select_deadline.html",'<header>\n    <div cg-task-deadline="task"\n         options="{class_name: \'task-creating-select-deadline\', offset: {left: -80, top: 3}}"\n         mode="deadline_creating_task">\n    </div>\n</header>'),a.put("app/task/modal/snippets/detail/select_label.html",'<header class="select-label-dropdown" ng-controller="TaskDetailSelectLabelController">\n    <div class="task-detail-tags"\n         cg-tag-editor="task.labels"\n         mode="task-description-tags"\n         tags="tags"\n         on-tag-add="onTagAdd"\n         on-tag-remove="onTagRemove"\n         on-tag-create="onTagCreate"\n         on-tag-select="onDetailTagSelect">\n    </div>\n</header>\n'),a.put("app/task/modal/snippets/detail/select_member.html",'<div class="select-member-dropdown" ng-controller="TaskDetailSelectMemberController">\n    <div cg-task-member-picker="owner"\n         mode="member_picker_header"\n         members="members"\n         active="true">\n        <header>\n            执行者\n            <i class="triangle down icon"></i>\n        </header>\n        <div ng-if="form.owner">\n            <div class="task-select-member selected-content" title="{{ form.owner.name }}">\n                <img ng-src="{{ form.owner.avatar }}"/>\n                <span class="ellipsis" style="font-size: 14px;" ng-bind="form.owner.name"></span>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("app/task/modal/snippets/detail/select_project.html",'<div class="select-project-dropdown" cg-dropdown="projects"\n     ng-controller="TaskDetailSelectProjectController">\n    <header style="padding-top: 0;">\n        所属项目\n    </header>\n    <div style="width: 160px;" ng-if="form.project">\n        <div class="task-select-project selected-content" title="{{ form.project[\'owner_user_name\'] + \'/\' + form.project.name }}">\n            <img ng-src="{{ form.project.icon }}"/>\n            <span class="ellipsis" style="font-size: 14px;"\n                  ng-bind="form.project[\'owner_user_name\'] + \'/\' + form.project.name"></span>\n        </div>\n    </div>\n</div>'),a.put("app/task/modal/snippets/detail/select_urgency.html",'<div class="ui dropdown" cg-dropdown="priorities" ng-controller="TaskDetailSelectUrgencyController">\n    <header>\n        紧急程度 <i class="triangle down icon"></i>\n    </header>\n    <div class="task-select-urgency selected-content" ng-if="form.urgency">\n        <cg-task-urgency-head priority="form.urgency.value"></cg-task-urgency-head>\n        <span style="font-size: 14px;" ng-bind="form.urgency.text"></span>\n    </div>\n    <div class="menu">\n        <div class="item"\n             ng-repeat="priority in priorities"\n             ng-click="selectUrgency($index)">\n            <div class="task-select-urgency">\n                <cg-task-urgency-head priority="$index"></cg-task-urgency-head>\n                <span>{{::priority}}</span>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("app/task/modal/snippets/detail/select_watcher.html",'<div style="margin-bottom: 0.5em;">\n    关注者 (<span ng-bind="watchers.length"></span>)\n    <i class="icon add sign" style="float: right;"></i>\n</div>\n<div cg-member-selector\n     cg-ms-selected="watchers"\n     cg-ms-onselect="addWatcher(member)"\n     cg-ms-oncancel="removeWatcher(member)"\n     cg-ms-width="140"\n     cg-ms-has-self="true"\n     cg-ms-opener="\'#task-member-selector\'"\n     cg-ms-project="task.project"\n     class="hover-remove check-mode check-toggle-mode no-dropdown"\n    ></div>'),
a.put("app/task/modal/snippets/select/select_deadline.html",'<header ng-controller="CreateTaskSelectDeadlineController" style="padding-bottom: 0;">\n    <div cg-task-deadline="task"\n         on-deadline-change="onDeadlineChange"\n         options="{class_name: \'task-detail-select-deadline\', offset: {left: -115, top: 0}}"\n         mode="deadline_creating_task">\n    </div>\n</header>\n'),a.put("app/task/modal/snippets/select/select_label.html",'<header ng-show="labels.length >= 0" class="select-label-dropdown" ng-controller="CreateTaskSelectLabelController">\n    <div class="task-detail-tags"\n         cg-tag-editor="form.labels"\n         mode="task-creating-tags"\n         tags="labels"\n         on-tag-add="onTagAdd"\n         on-tag-remove="onTagRemove"\n         on-tag-create="onTagCreate">\n    </div>\n</header>\n'),a.put("app/task/modal/snippets/select/select_member.html",'<div class="select-member-dropdown" ng-controller="CreateTaskSelectMemberController">\n    <div cg-task-member-picker="form.owner"\n         mode="member_picker_header"\n         members="members"\n         active="true">\n        <header>\n            执行者<i class="icon asterisk red"></i>\n            <i class="triangle down icon"></i>\n        </header>\n        <div ng-if="form.owner">\n            <div class="task-select-member" title="{{ form.owner.name }}">\n                <img ng-src="{{ form.owner.avatar }}"/>\n                <span class="ellipsis" style="font-size: 14px;" ng-bind="form.owner.name"></span>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("app/task/modal/snippets/select/select_project.html",'<div class="select-project-dropdown" cg-dropdown="projects"\n     ng-controller="CreateTaskSelectProjectController">\n    <div cg-task-project-picker="form.project"\n         projects="projects"\n         active="true">\n        <header style="padding-top: 0;">\n            所属项目<i class="icon asterisk red"></i>\n            <i class="triangle down icon"></i>\n        </header>\n        <div style="width: 160px;" ng-if="form.project">\n            <div class="task-select-project" title="{{ form.project[\'owner_user_name\'] + \'/\' + form.project.name }}">\n                <img ng-src="{{ form.project.icon }}"/>\n            <span class="ellipsis" style="font-size: 14px;"\n                  ng-bind="form.project[\'owner_user_name\'] + \'/\' + form.project.name"></span>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("app/task/modal/snippets/select/select_urgency.html",'<div class="ui dropdown" cg-dropdown="priorities" ng-controller="CreateTaskSelectUrgencyController">\n    <header>\n        紧急程度 <i class="triangle down icon"></i>\n    </header>\n    <div class="task-select-urgency" ng-if="form.urgency">\n        <cg-task-urgency-head priority="form.urgency.value"></cg-task-urgency-head>\n        <span style="font-size: 14px;" ng-bind="form.urgency.text"></span>\n    </div>\n    <div class="menu">\n        <div class="item"\n             ng-repeat="priority in priorities"\n             ng-click="selectUrgency($index)">\n            <div class="task-select-urgency">\n                <cg-task-urgency-head priority="$index"></cg-task-urgency-head>\n                <span>{{::priority}}</span>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("app/task/modal/snippets/select/select_watcher.html",'<div class="task-detail-watchlist" ng-controller="CreateTaskSelectWatcherController">\n    <div style="margin-bottom: 0.5em;" id="task-detail-member-select">\n        关注者 (<span ng-bind="watchers.length"></span>)\n        <i class="icon add sign" style="float: right;"></i>\n    </div>\n    <div cg-member-selector\n         cg-ms-selected="watchers"\n         cg-ms-members="members"\n         cg-ms-onselect="addWatcher(member)"\n         cg-ms-oncancel="removeWatcher(member)"\n         cg-ms-width="140"\n         cg-ms-has-self="true"\n         cg-ms-opener="\'#task-create-member-select\'"\n         mode="task-creating-watchers"\n         class="hover-remove check-mode check-toggle-mode no-dropdown"\n        ></div>\n</div>'),a.put("app/task/modal/snippets/select_member.html",'<div class="select-member-dropdown" ng-controller="CreateTaskSelectMemberController">\n    <div cg-task-member-picker="form.owner"\n         mode="member_picker_header"\n         members="members"\n         active="true">\n        <header>\n            执行者<i class="icon asterisk red"></i>\n            <i class="triangle down icon"></i>\n        </header>\n        <div ng-if="form.owner">\n            <div class="task-select-member" title="{{ form.owner.name }}">\n                <img ng-src="{{ form.owner.avatar }}"/>\n                <span class="ellipsis" style="font-size: 14px;" ng-bind="form.owner.name"></span>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("app/task/modal/snippets/select_project.html",'<div class="select-project-dropdown" cg-dropdown="projects"\n     ng-controller="CreateTaskSelectProjectController">\n    <div cg-task-project-picker="form.project"\n         projects="projects"\n         active="true">\n        <header style="padding-top: 0;">\n            所属项目<i class="icon asterisk red"></i>\n            <i class="triangle down icon"></i>\n        </header>\n        <div style="width: 160px;" ng-if="form.project">\n            <div class="task-select-project" title="{{ form.project[\'owner_user_name\'] + \'/\' + form.project.name }}">\n                <img ng-src="{{ form.project.icon }}"/>\n            <span class="ellipsis" style="font-size: 14px;"\n                  ng-bind="form.project[\'owner_user_name\'] + \'/\' + form.project.name"></span>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("app/topic/insert_image_modal.html",'<div class="ui tiny40 responsive modal" id="insert_image_modal">\n    <i class="close icon"></i>\n    <div class="header">插入图片</div>\n    <div class="content" style="padding: 0 1.2em;">\n        <div cg-insert-image=\'insertImages($images);\' style="height: 100%;"></div>\n    </div>\n    <div class="actions">\n        <div class="ui cancel button">取消</div>\n        <div class="ui dark gray ok button">确认</div>\n    </div>\n</div>\n'),a.put("app/tweet/project_tweet.html",'<style>\n    #project-tweet > .header { border-bottom: none !important; }\n    #project-tweet .tweets-wrapper { margin-top: 30px; }\n    #project-tweet .tweets-wrapper .header { margin-bottom: 0; }\n    #project-tweet .header > i { float: right; }\n    #project-tweet .header .back { cursor: pointer; }\n    #project-tweet .header .back i.left { margin-right: 0; }\n    #project-tweet .tweets-wrapper .refresh { cursor: pointer; }\n    #project-tweet .dimmer i.icon.loading { position: absolute; top: 50%; margin: -11px; }\n    #project-tweet .tweets-content { position: relative; }\n    #project-tweet .tweet-item { margin-bottom: 30px; margin-right: 2px; box-shadow: 1px 1px 0 0 #EEE; border-radius: 3px; border: 1px solid #EEE; }\n    #project-tweet .tweet-item-content { padding: 20px 20px 0 20px;}\n    #project-tweet .tweet-item .avatar { display: inline-block; float: left; margin-right: 10px; }\n    #project-tweet .tweet-item .avatar img { height: 42px; width :42px; border-radius: 42px; }\n    #project-tweet .tweet-item .avatar-name { font-size: 14px; font-weight: bold; color: 2d87cc; margin-bottom: 5px; margin-top: 2px;}\n    #project-tweet .tweet-item .avatar-name a { padding-left: 3px; }\n    #project-tweet .tweet-item .avatar-stat { font-size: 12px; color: 999999; }\n    #project-tweet .tweet-item .avatar-stat i { margin: 0; }\n    #project-tweet .tweet-item .item-content { color: #000; margin-top: 20px; margin-bottom: 20px; font-size: 14px; word-wrap: break-word; }\n\n    #project-tweet .tweet-item img.bubble-markdown-image,\n    #project-tweet .preview-content img.bubble-markdown-image\n    { width: 120px; padding: 8px; border: 1px solid #EEE; border-radius: 3px; margin-top: 5px; margin-bottom: 5px; }\n\n    #project-tweet .tweet-item-comment { background-color: #fdfcfa; border-top: 1px solid #EEE; padding: 10px 20px 10px 20px; font-size: 12px; color: 999999; }\n    #project-tweet .comment-avatar { position: relative; }\n    #project-tweet .comment-avatar img { position: relative; top: 4px; width: 18px; height: 18x; border-radius: 18px; }\n    #project-tweet .comment-content { margin-bottom: 10px; word-wrap: break-word; }\n    #project-tweet .more-comment { background-color: #fdfcfa; padding: 5px 0 15px 0; text-align: center; }\n    #project-tweet .more-comment a { font-size: 12px; }\n    #project-tweet .more-comment a.more { cursor: pointer; padding-top: 4px; }\n    #project-tweet .tweet-comment-form { width: 100%; border-top: 1px solid #EEE; }\n    #project-tweet .tweet-comment-input { border: none !important; font-size: 12px !important; border-radius: 0 !important; }\n    #project-tweet .comment-button { padding-top: 10px !important; cursor: pointer !important; }\n    #project-tweet .more-pp { text-align: center; padding-bottom: 20px; }\n    #project-tweet .preview-content { border: 1px solid #eee; padding: 7px; border-radius: 3px; }\n\n</style>\n<div id="project-tweet" ng-controller="ProjectTweetController">\n    <div class="ui dividing header">\n        项目内冒泡\n    </div>\n\n    <!--发表冒泡输入框-->\n    <div cg-feed-editor="{{ feed_editor_config.content }}" feed-editor-mode="project_tweet" textarea-elastic="true" markdown-mode="resource_link" feed-context="#project-tweet" >\n        <textarea ng-show="!one"\n                  cg-feed-editor-textarea\n                  ng-model="feed_editor_config.content"\n                  cg-at-emoji\n                  cg-refer-resource="PROJECT"\n                  cg-at-context\n                  at-context-type="\'project_member\'"\n                  at-item="PROJECT"\n                  placeholder="来，在项目里冒个泡吧~"\n                  cg-textarea-editable\n                  msd-elastic="\\n">\n        </textarea>\n    </div>\n\n    <div class="tweets-wrapper">\n        <!--顶部title和刷新按钮-->\n        <div class="ui dividing header">\n            <span ng-show="!one">全部冒泡</span>\n            <span ng-show="one" ng-click="back()" class="back"><i class="left icon"></i>返回全部冒泡</span>\n            <i class="refresh icon" ng-click="refresh()"></i>\n        </div>\n\n        <!--没有冒泡-->\n        <div ng-show="!loading && (!tweets || tweets.length <= 0)" class="empty list center" style="padding-top: 30px; padding-left: 0;">\n            暂时还没有冒泡哦...赶紧说点什么吧~\n        </div>\n\n        <!--冒泡内容-->\n        <div class="tweets-content" ng-show="tweets.length != 0">\n            <div class="tweet-item" ng-repeat="tweet in tweets" ng-init="tweet._id = rand(); tweet.commentMore = tweet.comments > 5">\n\n                <!-- 头像等内容 -->\n                <div class="tweet-item-content" ng-mouseenter="tweet.hovering = true;" ng-mouseleave="tweet.hovering = false;">\n                    <a class="avatar" ng-href="{{::tweet.owner.path}}">\n                        <img ng-src="{{::tweet.owner.avatar}}" title="{{::tweet.owner.name}}">\n                    </a>\n                    <div class="avatar-name">\n                        <a ng-href="{{::tweet.owner.path}}">\n                            {{tweet.owner.name}}\n                        </a>\n                    </div>\n                    <div class="avatar-stat">\n                        <a class="gray" href="javascript:void(0);" ng-click="detail(tweet)">\n                            <i class="icon time"></i>\n                            <span cg-friendly-time="tweet.created_at"></span>\n                        </a>\n                        <span>\n                            <i class="icon chat outline" style="margin-left: 8px;"></i>\n                            {{tweet.comments}}\n                        </span>\n                        <!--冒泡的所有者才限制删除按钮-->\n                        <a ng-show="tweet.hovering && tweet.owner_id === USER.id"\n                           ng-click="delete(tweet)"\n                           class="coding floated right"\n                           href="javascript:void(0);">\n                            <i class="red icon delete" style="margin: 0 0 0 10px;"></i>\n                            <span>删除</span>\n                        </a>\n                    </div>\n                    <div class="item-content content markdown" cg-highlight="tweet.content"></div>\n                    <div cg-gallery="tweet.content"></div>\n                </div>\n\n                <!--发表评论-->\n                <form class="tweet-comment-form ui large form input icon">\n                    <div class="ui inverted dimmer" ng-class="{active: tweet.sending}" style="margin-top: -8px;">\n                        <i class="loading icon"></i>\n                    </div>\n                    <input class="tweet-comment-input"\n                        type="text"\n                        cg-at-emoji\n                        cg-refer-resource="PROJECT"\n                        cg-at-context\n                        at-context-type="\'project_member\'"\n                        at-item="PROJECT"\n                        cg-placeholder\n                        ng-model="tweet.comment_content"\n                        cg-ctrl-enter="comment(tweet)">\n                    <i class="right icon comment-button" ng-click="comment(tweet);"></i>\n                </form>\n\n                <!--评论-->\n                <div class="tweet-item-comment" ng-repeat="comment in tweet.comment_list" ng-init="comment._id = rand()">\n                    <div class="comment-item" ng-mouseenter="comment.hovering = true;" ng-mouseleave="comment.hovering = false;">\n                        <div class="comment-content" ng-bind-html="::comment.content"></div>\n                        <div>\n                            <!--头像-->\n                            <a class="comment-avatar" ng-href="{{::comment.owner.path}}">\n                                <img ng-src="{{::comment.owner.avatar}}">\n                                <span>{{comment.owner.name}}</span>\n                            </a>\n\n                            <!--时间-->\n                            <span class="gray">\n                                <i class="icon time" style="margin: 0 0 0 5px;"></i>\n                                <span cg-friendly-time="comment.created_at"></span>\n                            </span>\n\n                            <!--删除回复按钮-->\n                            <span ng-show="comment.hovering" class="coding floated right" style="margin-top: 7px;">\n                                <a ng-if="comment.owner_id !== USER.id"\n                                   ng-click="reply(comment, tweet, $event)"\n                                   href="javascript:void(0);">\n                                    <i class="blue icon edit"></i>\n                                    <span>回复</span>\n                                </a>\n\n                                <a ng-if="tweet.owner_id === USER.id"\n                                   ng-click="deleteComment(comment, tweet)"\n                                   href="javascript:void(0);">\n                                    <i class="red icon delete" style="margin: 0 0 0 5px;"></i>\n                                    <span>删除</span>\n                                </a>\n                            </span>\n                        </div>\n                    </div>\n                </div>\n\n                <!--更多评论按钮-->\n                <div class="more-comment" ng-show="tweet.commentMore">\n                    <a ng-show="!tweet.commentLoading" ng-click="comments(tweet)" class="gray center down more">\n                        显示全部评论\n                    </a>\n                    <a ng-show="tweet.commentLoading" class="gray center">\n                        <i class="loading icon"></i>\n                        正在刷新\n                    </a>\n                </div>\n\n            </div>\n\n            <!--更多冒泡-->\n            <div class="more-pp" ng-show="!loading && !one && tweets.length != 0">\n                <a ng-show="tweets.length >= PAGE_SIZE && show_more"\n                   ng-click="more(tweets[tweets.length-1].id)"\n                   class="icon down more"\n                   href="javascript:void(0);">\n                    更多冒泡\n                </a>\n\n                <span ng-show="tweets.length < PAGE_SIZE || !show_more" class="empty list">没有更多泡泡了</span>\n            </div>\n        </div>\n\n        <!--loading-->\n        <div ng-show="loading" class="empty list center" style="margin-top: 1em;">\n            <i class="icon loading"></i>\n            正在努力刷新...\n        </div>\n\n    </div>\n</div>\n'),a.put("app/user/account/about.html",'<div class="account-about" ng-controller="AccountAboutController">\n    <span>Copyright&nbsp;&nbsp;&copy;&nbsp;2017&nbsp;Coding.net&nbsp;&nbsp;</span>\n    <a href="/">首页</a>\n    <a href="/about">关于 Coding</a>\n    <a href="/jobs">招贤纳士</a>\n    <a href="/terms">服务条款</a>\n    <a href="/privacy">隐私策略</a>\n    <a href="help">帮助中心</a>\n    <a href="https://blog.coding.net/">Blog</a>\n    <a href="/app">App</a>\n    <a cg-jump-out-angular-href="/shop">Shop</a>\n    <a href="https://mart.coding.net" style="font-weight: bold;">码市</a>\n    <a class="photo-by" ng-href="{{photo_by.link}}" target="_blank">Photo by {{photo_by.author}}</a>\n</div>\n'),a.put("app/user/account/modal/phoneCodeCaptcha.html",'<div ng-controller="PhoneCodeCaptchaModalCtrl">\n    <div class="ui modal tiny40 phone-code-captcha"\n         cg-semanticui-modal="setting" modal="$modal"\n         style="max-width: 445px;display: flex;display: -webkit-flex;">\n        <div class="ui medium input" style="margin:20px;display: flex;display: -webkit-flex;">\n            <input type="text" ng-model="j_captcha" style="width: 215px" cg-enter="submitCaptcha()"/>\n            <img class="captcha" ng-src="{{captcha}}" ng-click="refreshCaptcha()" style="width: 80px; height: 36px; cursor: pointer;"/>\n        </div>\n        <a class="ui coding button medium" style="margin-top: 23px;" ng-click="submitCaptcha()" >确定</a>\n    </div>\n</div>\n'),a.put("app/user/account/sink.html",""),a.put("app/user/account_setting/account/account.html",'<div class="user-account-wrapper">\n    <section class="summary" ng-controller="AccountSummaryCtrl">\n        <img class="ui image avatar96" ng-src="{{ USER.lavatar }}"/>\n        <article>\n            <h2 ng-bind="USER.name" ng-if="!isExpActive(\'vip\')"></h2>\n            <div class="detail" ng-if="!isExpActive(\'vip\')">\n                <div class="ui two column stackable grid">\n                    <div class="row">\n                        <div class="column" style="border-right: 1px solid #EEE;">\n                            <div class="inner-item">\n                                <i class="archive icon"></i>\n                                <a class="none-color-link" href="/user/projects/created">拥有项目：</a><span>{{::(summary.private + summary.public)}}</span>\n                                （公开 <span>{{::summary.public}}</span>/私有 <span>{{::summary.private}}</span>）\n                            </div>\n                            <div class="inner-item">\n                                <i class="big sitemap icon"></i>\n                                <a class="none-color-link" href="/team">拥有团队：</a><span>{{::summary.team}}</span>\n                            </div>\n                        </div>\n                        <div class="column" style="padding-left: 50px;">\n                            <div class="inner-item">\n                                <i class="us dollar icon"></i><a class="none-color-link" href="/user/account/top-up">余额：</a><em>{{::summary.balance}}</em> 元\n                                <a class="ui small green button" href="/user/account/top-up">充值</a>\n                            </div>\n                            <div class="inner-item">\n                                <i class="ui coding icon coding-gold"></i><a class="none-color-link" href="/user/account/credit">码币</a>\n                                <sup>\n                                    <a class="gray" href="/help/doc/account/shop.html" target="_blank" >\n                                        <i class="help icon" style="color: #666;font-size: 12px;"></i>\n                                    </a>\n                                </sup>\n                                ：<a href="/user/account/credit"><em style="vertical-align: middle">{{::summary.point_left}}</em></a>\n                                <a href="javascript:void(0)" class="ui small green button" ng-click="exchangeCoin()">购买码币</a>\n                                <div class="ui tiny40 modal account-exchange-coin-modal"\n                                    ng-controller="AccountExchangeCoinCtrl"\n                                    cg-modal="exchange_coin_modal"\n                                    ng-include="\'app/user/account_setting/account/modal/exchange-coin-modal.html\'"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="detail" ng-if="isExpActive(\'vip\')">\n                <div class="account-row">\n                    <div class="account-name" ng-bind="USER.name"></div>\n                    <div class="account-level" ng-switch="USER.vip">\n                        <span ng-switch-when="1">\n                            <img src="https://dn-coding-net-production-static.qbox.me/static/f2fe88eaca3b889f88f1402c1920a36d.png" />\n                            <span class="account-level-label">普通会员</span>\n                        </span>\n                        <span ng-switch-when="2">\n                            <img src="https://dn-coding-net-production-static.qbox.me/static/d1367cb84f851d1955b29623a74b1555.png" />\n                            <span class="account-level-label">银牌会员</span>\n                        </span>\n                        <span ng-switch-when="3">\n                            <img src="https://dn-coding-net-production-static.qbox.me/static/8dfd755c860d1ecdfba837138cacde9b.png" />\n                            <span class="account-level-label">金牌会员</span>\n                        </span>\n                        <span ng-switch-when="4">\n                            <img src="https://dn-coding-net-production-static.qbox.me/static/653eea1961de3d573f9c329b0af613c3.png" />\n                            <span class="account-level-label">钻石会员</span>\n                        </span>\n                    </div>\n                    <div class="account-expire" ng-if="USER.vip === 3 || USER.vip === 4">\n                        到期时间：{{USER.vip_expired_at | date: \'yyyy-MM-dd\'}}\n                    </div>\n                </div>\n                <div class="account-row">\n                    <span class="private-project">私有项目：{{::summary.private}} / {{quota_private}}</span>\n                    <span class="public-project">公有项目：{{::summary.public}}／无限</span>\n                </div>\n                <div class="account-row">\n                    <span class="mb-remain">码币余额：{{::summary.point_left}} 码币</span>\n                </div>\n                <div class="account-actions" ng-switch="USER.vip">\n                    <div ng-switch-when="1">\n                        <a class="ui green button" ng-href="/user/account/upgrade">免费升级获取更多特权</a>\n                        <a class="upgrade-history" ng-href="/user/account/upgrade-history">升级记录</a>\n                    </div>\n                    <div ng-switch-when="2">\n                        <a class="ui green button" ng-href="/user/account/upgrade">升级获取更多特权</a>\n                        <a class="upgrade-history" ng-href="/user/account/upgrade-history">升级记录</a>\n                    </div>\n                    <div ng-switch-when="3">\n                        <a class="ui green button" ng-href="/user/account/upgrade">升级／续费</a>\n                        <a class="upgrade-history" ng-href="/user/account/upgrade-history">升级记录</a>\n                    </div>\n                    <div ng-switch-when="4">\n                        <a class="ui green button" ng-href="/user/account/upgrade?renew=true">续费</a>\n                        <a class="upgrade-history" ng-href="/user/account/upgrade-history">升级记录</a>\n                    </div>\n                </div>\n            </div>\n        </article>\n    </section>\n    <section ng-if="isExpActive(\'vip\')">\n        <div class="account-page-title">近期订单</div>\n        <div ng-include="\'app/user/account_setting/account/order-list.html\'"></div>\n    </section>\n    <section ng-if="!isExpActive(\'vip\')" class="projects" ng-controller="UserPayedProjectGeneralController">\n        <h3>\n            <a class="gray" href="{{ PROJECT.project_path + \'/user/account/payed-project\' }}">\n                最近付费项目（<span ng-bind="projects.length"></span> / <span ng-bind="total_size"></span>）\n            </a>\n        </h3>\n        <article class="markdown content">\n            <table class="text-align-left-th">\n                <thead>\n                <tr>\n                    <th width="20%">项目名</th>\n                    <th width="20%">类型</th>\n                    <th width="20%">剩余天数</th>\n                    <th width="20%">续费</th>\n                    <th width="20%">操作</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr ng-repeat="project in projects">\n                    <td><a ng-href="{{::project.project_path}}">{{::project.name}}</a></td>\n                    <td ng-if="project.expired_plan">\n                        <span>{{::versions[project.expired_plan].name}}</span>\n                        <em class="project-expired-label">已到期</em>\n                    </td>\n                    <td ng-if="!project.expired_plan">{{::versions[project.plan].name}}</td>\n                    <td>{{::project.remain_day || 0}}</td>\n                    <td>{{::renewalStatus(project)}}</td>\n                    <td>\n                        <a ng-if="!project.expired_plan" ng-href="{{::project.project_path}}/setting/summary">设置</a>\n                        <a ng-if="project.expired_plan" class="ui small button green" ng-href="{{::project.project_path}}/setting/summary/upgrade">重新升级</a>\n                    </td>\n                </tr>\n                <tr ng-if="projects.length === 0">\n                    <td colspan="6" align="center">\n                    <span ng-if="loaded">\n                        尚无付费项目 <a class="ui small green button" style="margin-left: 10px;"\n                                  href="/upgrade">马上升级</a>\n                    </span>\n                    <span ng-if="loading">\n                        <i class="loading icon"></i>正在加载数据...\n                    </span>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </article>\n    </section>\n    <section ng-if="!isExpActive(\'vip\')" class="history" ng-controller="AccountPaymentHistoryGeneralController">\n        <h3>\n            <a class="gray" href="{{ PROJECT.project_path + \'/user/account/payment-history/pay\' }}">\n                最近消费记录（ <span ng-bind="pay_logs.length"></span> / <span ng-bind="total_size.pay"></span>）\n            </a>\n        </h3>\n        <article class="markdown content">\n            <table class="text-align-left-th">\n                <thead>\n                <tr>\n                    <th width="10%">消费编号</th>\n                    <th width="40%">消费内容</th>\n                    <th width="20%">消费金额</th>\n                    <th width="30%">消费时间</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr ng-repeat="log in pay_logs">\n                    <td>{{::log.id}}</td>\n                    <td ng-bind-html="::log.remark"></td>\n                    <td>{{::(\'￥\' + log.price)}}</td>\n                    <td>{{::log.created_at | date : \'yyyy-MM-dd HH:mm:ss\'}}</td>\n                </tr>\n                </tbody>\n                <tr ng-if="pay_logs.length === 0">\n                    <td colspan="4" align="center">\n                    <span ng-if="load.pay.loaded">\n                        尚无消费记录\n                    </span>\n                    <span ng-if="load.pay.loading">\n                        <i class="loading icon"></i>正在加载数据...\n                    </span>\n                    </td>\n                </tr>\n            </table>\n        </article>\n    </section>\n</div>\n'),a.put("app/user/account_setting/account/credit.html",'<div class="score-wrapper" ng-controller="AccountPointCtrl">\n    <div ng-if="tab !== \'gift\'">\n        <section class="summary">\n            <div class="ui three column divided grid">\n                <div class="row">\n                    <div class="column">\n                        <h4>码币余额</h4>\n                        <strong ng-if="points_loading"><i class="icon loading"></i></strong>\n                        <strong class="green" ng-if="!points_loading">{{points.points_left}}</strong>\n                    </div>\n                    <div class="column consume">\n                        <a class="ui green button" href="javascript:void(0)" ng-click="exchangeCoin()">购买码币</a>\n                        <a class="ui red button" href="/shop" target="_blank">商城</a>\n                    </div>\n                </div>\n            </div>\n        </section>\n        <section class="detail">\n            <article class="markdown content">\n                <div class="tips">\n                    <span ng-if="loading"><i class="icon loading"></i>正在加载。。。</span>\n                    <span ng-if="!loading && point_records.length <= 0">无记录。</span>\n                </div>\n                <table ng-if="point_records.length > 0">\n                    <thead>\n                    <tr>\n                        <th class="time">时间</th>\n                        <th class="change">交易</th>\n                        <th class="left">余额</th>\n                        <th class="comments">备注</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr ng-repeat="record in point_records">\n                        <td class="time">{{record.created_at | date: \'yyyy-MM-dd HH:mm:ss\'}}</td>\n\n                        <td class="change">\n                            <span ng-if="record.action === 1">+</span>\n                            <span ng-if="record.action === 2">-</span>\n                            {{record.points_change}}\n                        </td>\n                        <td class="left">\n                            {{record.points_left}}\n                        </td>\n                        <td class="comments">\n                            <span class="usage" ng-bind-html="record.usage"></span>\n                            <span class="remark" ng-if="record.remark.length > 0" ng-bind-html="\'(\' + record.remark + \')\'"></span>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n            </article>\n        </section>\n        <div cg-pager="{{pager_id}}" class="center"></div>\n    </div>\n    <div ng-if="tab === \'gift\' && !gift_id">\n        <div class="gift-wrapper">\n            <div class="title">\n                <span>购买码币</span>\n                <span class="points-left">（码币余额：{{points.points_left}}）</span>\n            </div>\n            <div class="gift-item" ng-repeat="gift in gifts">\n                <div class="content">\n                    <img ng-src="{{gift.image}}"/>\n                    <span class="gift-name">{{gift.name}}</span>\n                    <span class="gift-cost">{{gift.points_cost}} 码币</span>\n                    <span></span>\n                </div>\n                <div class="action">\n                    <a href="javascript:void(0)" ng-click="exchange(gift.id)" class="ui button medium exchange">立即兑换</a>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div ng-if="gift_id" ng-include="\'app/user/account_setting/account/gift-exchange.html\'"></div>\n    <div class="ui tiny40 modal account-exchange-coin-modal"\n         ng-controller="AccountExchangeCoinCtrl"\n         cg-modal="exchange_coin_modal"\n         ng-include="\'app/user/account_setting/account/modal/exchange-coin-modal.html\'"></div>\n</div>\n'),
a.put("app/user/account_setting/account/gift-exchange.html",'<div  ng-controller="GiftExchangeController">\n    <div class="exchange-wrapper">\n        <div class="header">\n            <span>兑换确认</span>\n        </div>\n        <div class="gift-info">\n            <span class="title">兑换商品</span>\n            <img ng-src="{{gift.image}}" width="100"/>\n            <span style="margin-bottom: 20px;color: #333;">{{gift.name}}</span>\n        </div>\n        <div class="exchange-info">\n            <span class="title">收件信息</span>\n            <form>\n                <div class="field">\n                    <label>收件人：</label>\n                    <div class="ui small input" style="text-indent: 15px;">\n                        <input type="text" ng-model="exchange_user.name"/>\n                    </div>\n                </div>\n                <div class="field">\n                <label>收件地址：</label>\n                    <div class="ui small input">\n                        <input type="text" ng-model="exchange_user.address"/>\n                    </div>\n                </div>\n                <div class="field">\n                    <label>手机号码：</label>\n                    <div class="ui small input">\n                        <input type="text" ng-model="exchange_user.phone"/>\n                    </div>\n                </div>\n            </form>\n        </div>\n        <div class="confirm">\n            <span class="title">输入用户密码以确认兑换</span>\n            <form>\n                <div class="field" style="margin-bottom:20px">\n                    <label>用户密码：</label>\n                    <div class="ui small input">\n                        <input type="password" ng-model="exchange_user.password"/>\n                    </div>\n                </div>\n                <a href="javascript:void(0)" class="ui default green button" ng-click="submit(exchange_user)">\n                    <i class="icon loading" ng-if="submitting || sending"></i>确认兑换</a>\n                <a href="/user/account/score/gift" class="gray">取消</a>\n            </form>\n            <span class="exchange-tip">* 确认兑换后，你的兑换信息将私信给 Coding</span>\n        </div>\n    </div>\n</div>'),a.put("app/user/account_setting/account/invoice.html",'<div class="invoice-wrapper" ng-controller="AccountInvoiceCtrl">\n    <header class="ui dividing header">发票管理</header>\n    <div class="invoice-available">\n        可开发票总额：<em ng-bind="available_invoice_price"></em> 元\n    </div>\n    <form class="invoice-form ui small form" method="POST">\n        <div class="inline field">\n            <label>发票金额：</label>\n            <input type="text" ng-model="invoice_price" style="width: 100px;margin-right: 5px;">\n            元 <span class="tips">* 开票金额最小额度 100 元</span>\n        </div>\n        <div class="field">\n            <button class="ui green button" ng-click="createInvoice();">\n                开具发票\n            </button>\n        </div>\n    </form>\n    <section class="invoice-list">\n        <h2>已开具发票列表</h2>\n        <article class="markdown content">\n            <table class="text-align-left-th">\n                <thead>\n                <tr>\n                    <th>发票金额(元)</th>\n                    <th>发票抬头</th>\n                    <th>配送地址</th>\n                    <th>申请时间</th>\n                    <th>状态</th>\n                    <th>快递公司/单号</th>\n                    <th>操作</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr ng-repeat="invoice in invoices">\n                    <td>{{::invoice.price}}</td>\n                    <td>{{::invoice.title}}</td>\n                    <td>{{::invoice.receiver_address}}</td>\n                    <td>{{::invoice.created_at | date : \'yyyy-MM-dd HH:mm:ss\'}}</td>\n                    <td>{{::invoice_status[invoice.status]}}</td>\n                    <td>\n                        <a ng-if="::invoice.express_order_id.length > 0"\n                           ng-href="http://www.baidu.com/s?wd={{::invoice.express_company}}+{{::invoice.express_order_id}}"\n                           target="_blank">\n                            {{::expressInfo(invoice)}}\n                        </a>\n                        <span ng-if="::invoice.express_order_id.length === 0">{{::expressInfo(invoice)}}</span>\n                    </td>\n                    <td ng-switch="::invoice.status">\n                        <span ng-switch-when="1">\n                            <a href="javascript:void(0);" ng-click="editInvoice(invoice);">编辑</a> |\n                            <a href="javascript:void(0);" ng-click="removeInvoice(invoice);">删除</a>\n                        </span>\n                        <span ng-switch-when="3">\n                            <a href="javascript:void(0);" ng-click="signInvoice(invoice);">签收</a>\n                        </span>\n                    </td>\n                </tr>\n                <tr ng-if="invoices.length === 0">\n                    <td colspan="7" align="center">\n                    <span ng-if="loaded">\n                        尚未开具发票\n                        <span ng-if="available_invoice_price > 100">\n                            ，现在马上\n                            <a class="ui small green button"\n                               style="margin-left: 10px;"\n                               href="javascript:void(0);"\n                               ng-click="createInvoice();">开具发票</a>\n                        </span>\n                    </span>\n                    <span ng-if="loading">\n                        <i class="loading icon"></i>正在加载数据...\n                    </span>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n            <div cg-pager="{{ invoice_pager_id }}" class="center"></div>\n        </article>\n    </section>\n    <div class="ui modal account-invoice-modal"\n         ng-controller="AccountAddInvoiceCtrl"\n         cg-modal="invoice_modal"\n         ng-include="\'app/user/account_setting/account/modal/invoice-modal.html\'"></div>\n</div>'),a.put("app/user/account_setting/account/modal/exchange-coin-modal.html",'<i class="close icon"></i>\n<div class="header">\n    购买码币\n</div>\n<div class="content">\n    <div class="field summary">\n        <div class="item">\n            <span class="title">账户余额：</span>\n            <em>{{summary.balance}}</em> 元\n        </div>\n        <div class="item">\n            <span class="title">码币余额：</span>\n            <em>{{summary.point_left}}</em>\n        </div>\n    </div>\n    <form class="ui small form" autocomplete="off">\n        <div class="inline field exchange-rate">\n            <span class="summary">{{summary.exchange_message}}</span>\n        </div>\n        <div class="inline field">\n            <label>码币金额</label>\n            <input type="number" placeholder="{{available}}" min="0.01" step="0.01" decimals="2" decimal-point="." cg-enter="exchange()" ng-model="form.num"/>\n        </div>\n        <div class="inline field password">\n            <label>用户密码</label>\n            <input type="password" cg-enter="exchange()" ng-model="form.password"/>\n        </div>\n    </form>\n</div>\n<div class="action-buttons">\n    <span ng-show="form.num * rmb > 0">需要支付：<em>{{(form.num * rmb).toFixed(2)}}</em>&nbsp;元</span>\n    <a class="ui green button" ng-click="exchange()">确认购买\n        <i class="icon loading" ng-if="exchanging"></i></a>\n</div>'),a.put("app/user/account_setting/account/modal/invoice-modal.html",'<div class="header" ng-switch="invoice_edit_type">\n    <span ng-switch-when="add">开具发票</span>\n    <span ng-switch-when="update">更新发票</span>\n</div>\n<div class="content">\n    <form class="ui small form" ng-class="{loading: saving}">\n        <div class="field">\n            <h4>发票信息</h4>\n        </div>\n        <div class="inline field">\n            <label>发票金额：</label>\n            <em class="invoice-price"\n                ng-if="invoice_edit_type === \'add\'"\n                ng-bind="form.price"></em>\n            <input type="text"\n                   style="width: 15%;margin-right: 10px;"\n                   ng-if="invoice_edit_type === \'update\'"\n                   ng-model="form.price"/> 元\n            <span ng-if="invoice_edit_type === \'update\'">\n                <span class="tips">\n                    * 开票金额最小额度 100 元\n                    <span ng-if="available_invoice_price">，当前可开发票总额：<em ng-bind="current_available_invoice_price"></em> 元</span>\n                </span>\n            </span>\n        </div>\n        <div class="inline field">\n            <label>发票抬头：</label>\n            <input type="text" name="title" ng-model="form.title"/>\n        </div>\n        <div class="field">\n            <h4>配送信息</h4>\n        </div>\n        <div class="inline field">\n            <label>收件人：</label>\n            <input type="text" name="receiver" ng-model="form.receiver"/>\n        </div>\n        <div class="inline field">\n            <label>收件地址：</label>\n            <input type="text" name="receiver_address" ng-model="form.receiver_address"/>\n        </div>\n        <div class="inline field">\n            <label>手机号码：</label>\n            <input type="text" name="receiver_phone" ng-model="form.receiver_phone"/>\n        </div>\n    </form>\n</div>\n<div class="action-buttons">\n    <a class="ui button borderless close">取消</a>\n    <a class="ui green button" ng-if="invoice_edit_type === \'add\'" ng-click="addInvoice(form);">开具发票</a>\n    <a class="ui green button" ng-if="invoice_edit_type === \'update\'" ng-click="updateInvoice(form);">更新发票</a>\n</div>'),a.put("app/user/account_setting/account/modal/top-up-modal.html",'<div class="header">网上支付提示</div>\n<div class="content">\n    <article>\n        <p>\n            支付完成前，请不要关闭此支付窗口。<br>\n            支付完成后，请根据支付情况点击下面的按钮。\n        </p>\n        <div>\n            <div class="ui button cancel" ng-click="payError();">支付遇到问题</div>\n            <div class="ui green button ok" ng-click="paySuccess();">支付成功</div>\n        </div>\n    </article>\n</div>'),a.put("app/user/account_setting/account/modal/top-up-result-modal.html",'<div class="header">网上支付提示</div>\n<div class="content">\n    <h2 class="green" ng-if="chargeResult.result">\n        充值成功！（<span ng-bind="chargeResult.price + \'元\'"></span>）\n    </h2>\n</div>'),a.put("app/user/account_setting/account/order-list.html",'<div ng-controller="OrderListController" class="account-page">\n    <table class="ui celled striped table order-list-table">\n        <thead>\n            <tr>\n                <th style="width: 22%">订单编号</th>\n                <th style="width: 16%">订单时间</th>\n                <th>订单内容</th>\n                <th style="width: 10%">实付金额</th>\n                <th style="width: 10%">状态</th>\n                <th style="width: 22%">操作</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr ng-if="!loading && orderList.length === 0">\n                <td colspan="6" style="padding: 10px">尚无订单记录</td>\n            </tr>\n            <tr ng-repeat="item in orderList">\n                <td style="font-family:arial;word-wrap:break-word">{{item.orderId}}</td>\n                <td style="font-family:arial">{{ item.createdAt | date: \'yyyy-MM-dd HH:mm\' }}</td>\n                <td>{{item.content}}</td>\n                <td>&yen;{{item.total}}</td>\n                <td class="status-waiting">{{item.status}}</td>\n                <td>\n                    <div ng-if="item.status == \'等待支付\'">\n                        <a class="ui green button" ng-class="{unvisible: !item.showPendingBtn}" ng-href="/api/pay/order/{{item.orderId}}/pay-url-redirect" target="_blank">\n                            支付\n                        </a>\n                        <a class="ui button" ng-click="cancelOrder(item.orderId)">\n                            取消\n                        </a>\n                    </div>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n    <div class="pager" cg-pager="{{ order_pager_id }}"></div>\n</div>\n'),a.put("app/user/account_setting/account/order.html",'<div id="order-manager" class="account-page">\n    <div class="account-page-title">订单管理</div>\n    <div ng-include="\'app/user/account_setting/account/order-list.html\'"></div>\n</div>\n'),a.put("app/user/account_setting/account/payed-project.html",'<div class="payed-project-wrapper" ng-controller="UserPayedProjectController">\n    <header class="ui dividing header">我的付费项目（<span ng-bind="total_size"></span>）</header>\n    <article class="markdown content">\n        <table class="text-align-left-th">\n            <thead>\n            <tr>\n                <th width="20%">项目名</th>\n                <th width="20%">类型</th>\n                <th width="20%">剩余天数</th>\n                <th width="20%">续费</th>\n                <th width="20%">操作</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="project in projects">\n                <td><a ng-href="{{::project.project_path}}">{{::project.name}}</a></td>\n                <td ng-if="project.expired_plan">\n                    <span>{{::versions[project.expired_plan].name}}</span>\n                    <em class="project-expired-label">已到期</em>\n                </td>\n                <td ng-if="!project.expired_plan">{{::versions[project.plan].name}}</td>\n                <td>{{::project.remain_day || 0}}</td>\n                <td>{{::renewalStatus(project)}}</td>\n                <td>\n                    <a ng-if="!project.expired_plan" ng-href="{{::project.project_path}}/setting/summary">设置</a>\n                    <a ng-if="project.expired_plan" class="ui small button green" ng-href="{{::project.project_path}}/setting/summary/upgrade">重新升级</a>\n                </td>\n            </tr>\n            <tr ng-if="projects.length === 0">\n                <td colspan="6" align="center">\n                    <span ng-if="loaded">\n                        尚无付费项目，<a class="ui small green button" style="margin-left: 10px;" href="/upgrade">马上升级</a> 付费项目\n                    </span>\n                    <span ng-if="loading">\n                        <i class="loading icon"></i>正在加载数据...\n                    </span>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n\n    </article>\n    <div cg-pager="{{ pager_id }}" class="center"></div>\n</div>\n'),a.put("app/user/account_setting/account/payment-history.html",'<div class="payment-history-wrapper" ng-controller="AccountPaymentHistoryController">\n    <div class="ui tabular menu">\n        <a class="item" ng-class="{active: tab === \'pay\'}" href="/user/account/payment-history/pay">\n            消费记录 <span class="ui circular label"\n                       ng-if="load.pay.loaded"\n                       ng-bind="total_size.pay"></span>\n        </a>\n        <a class="item" ng-class="{active: tab === \'top-up\'}" href="/user/account/payment-history/top-up">\n            充值记录<span class="ui circular label"\n                      ng-if="load.top_up.loaded"\n                      ng-bind="total_size.top_up"></span>\n        </a>\n    </div>\n    <article class="markdown content" ng-if="tab === \'pay\'" style="overflow: inherit;">\n        <table class="text-align-left-th">\n            <thead>\n            <tr>\n                <th width="10%">消费编号</th>\n                <th width="40%">消费内容</th>\n                <th width="20%">消费金额</th>\n                <th width="30%">消费时间</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="log in pay_logs">\n                <td>{{::log.id}}</td>\n                <td ng-bind-html="::log.remark"></td>\n                <td>{{::(\'￥\' + log.price)}}</td>\n                <td>{{::log.created_at | date : \'yyyy-MM-dd HH:mm:ss\'}}</td>\n            </tr>\n            </tbody>\n            <tr ng-if="pay_logs.length === 0">\n                <td colspan="4" align="center">\n                    <span ng-if="load.pay.loaded">\n                        尚无消费记录\n                    </span>\n                    <span ng-if="load.pay.loading">\n                        <i class="loading icon"></i>正在加载数据...\n                    </span>\n                </td>\n            </tr>\n        </table>\n        <div cg-pager="{{ payment_pager_id }}" class="center"></div>\n    </article>\n    <article class="markdown content" ng-if="tab === \'top-up\'" style="overflow: inherit;">\n        <table class="text-align-left-th">\n            <thead>\n            <tr>\n                <th width="15%">流水号</th>\n                <th>充值时间</th>\n                <th width="15%">充值金额</th>\n                <th width="15%">充值渠道</th>\n                <th width="15%">状态</th>\n                <th width="15%">操作</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="log in charge_logs">\n                <td>{{::log.id}}</td>\n                <td>{{::log.created_at | date : \'yyyy-MM-dd HH:mm:ss\'}}</td>\n                <td>{{::(\'￥\' + log.price)}}</td>\n                <td>{{::payment_platforms[log.platform]}}</td>\n                <td>{{::payment_status[log.status]}}</td>\n                <td>\n                    <div class="ui simple dropdown" ng-if="::log.status === 0">\n                        <a class="ui small button" ng-href="{{\'/api/payment/charge/\' + log.id + \'/url\' }}" target="_blank"\n                           ng-click="goPay(log)">继续支付</a>\n                        <i class="dropdown icon"></i>\n\n                        <div class="menu">\n                            <div class="item" ng-click="cancelPay(log.id, log.price)"><i class="off icon"></i>取消支付</div>\n                        </div>\n                    </div>\n                </td>\n            </tr>\n            <tr ng-if="charge_logs.length === 0">\n                <td colspan="6" align="center">\n                    <span ng-if="load.top_up.loaded">\n                        尚无充值记录 <a class="ui small green button" style="margin-left: 10px;" href="/user/account/top-up">马上充值</a>\n                    </span>\n                    <span ng-if="load.top_up.loading">\n                        <i class="loading icon"></i>正在加载数据...\n                    </span>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n        <div cg-pager="{{ charge_pager_id }}" class="center"></div>\n        <div class="ui modal top-up-modal"\n             cg-modal="top_up_modal"\n             ng-include="\'app/user/account_setting/account/modal/top-up-modal.html\'"></div>\n    </article>\n</div>\n'),a.put("app/user/account_setting/account/top-up.html",'<div class="top-up-wrapper" ng-controller="AccountTopUpCtrl">\n    <header class="ui dividing header">账户充值</header>\n    <div class="description">\n        <p>用户充值后不仅能升级项目，而且能购买 Coding 的其他服务和产品。</p>\n        <p class="ui warning message">\n            <b style="color: #D95C5C;">注意：</b>\n            充值到此账户的金额不可用于支付码市项目。如果需要支付码市项目的<b>项目订金</b>、<b>项目阶段款</b>，请前往码市\n            <a href="https://mart.coding.net/user/mpay/account"><b>开发宝</b></a>\n            充值。\n        </p>\n    </div>\n    <div class="balance">\n        账户余额：<em ng-bind="balance"></em> 元\n    </div>\n    <form class="top-up-form ui small form" action="/api/payment/charge" target="_blank" method="POST" ng-submit="topUp($event, form)">\n        <div class="inline field">\n            <label>充值金额：</label>\n            <input type="text" name="price" ng-model="form.price" decimals="2" decimal-point="." style="width: 100px;margin-right: 5px;" cg-auto-focus>\n            元 <!--<span class="tips">* 最少充值金额 100 元</span>-->\n        </div>\n        <div class="inline field">\n            <label>充值方式：</label>\n            <input type="radio" id="top-up-method-alipay" value="alipay" name="platform" ng-model="form.platform"\n                   placeholder="" checked>\n            <label for="top-up-method-alipay">\n                <img class="top-up-method-img" src="https://dn-coding-net-production-static.qbox.me/static/baf1cf414bd43a036b8b15c589e66694.gif" alt="alipay"/>\n            </label>\n            <input type="radio" id="top-up-method-weixin" value="weixin" name="platform" ng-model="form.platform"\n                   placeholder="" style="margin-left: 30px;">\n            <label for="top-up-method-weixin">\n                <img class="top-up-method-img" src="https://dn-coding-net-production-static.qbox.me/static/5965fe18cd6c1951fe15884b2f3e54a6.jpg" style="height: 37px;" alt="weixin"/>\n            </label>\n        </div>\n        <div class="field">\n            <input class="ui green button" type="submit" value="马上充值"/>\n        </div>\n    </form>\n    <div class="ui modal top-up-modal"\n         cg-modal="top_up_modal"\n         ng-include="\'app/user/account_setting/account/modal/top-up-modal.html\'"></div>\n    <div ng-if="chargeResult.result" class="ui modal top-up-result-modal"\n         cg-modal="result_modal"\n         ng-include="\'app/user/account_setting/account/modal/top-up-result-modal.html\'"></div>\n</div>\n'),a.put("app/user/account_setting/account/upgrade-history.html",'<div id="vip-upgrade-history" class="account-page" ng-controller="UpgradeHistoryController">\n    <div class="account-page-title">升级记录</div>\n    <table class="ui celled striped table">\n        <thead>\n            <tr>\n                <th>编号</th>\n                <th>升级类型</th>\n                <th>升级日期</th>\n                <th>有效日期</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr ng-if="!loading && historyList.length === 0">\n                <td colspan="4" style="padding: 10px">尚无升级记录</td>\n            </tr>\n            <tr ng-repeat="item in historyList">\n                <td>{{item.orderId}}</td>\n                <td>{{item.title}}</td>\n                <td>{{item.updatedAt}}</td>\n                <td>{{item.startedAt}} 至 {{item.expiredAt}}</td>\n            </tr>\n        </tbody>\n    </table>\n    <div class="pager" cg-pager="{{ upgrade_history_pager_id }}"></div>\n</div>\n'),a.put("app/user/account_setting/account/upgrade.html",'<div id="vip-upgrade" class="vip-container">\n    <div class="account-page-title">会员升级</div>\n    <div class="vip-panels">\n        <div class="vip-panel" ng-class="{\n            \'current\': USER.vip === 1,\n            \'disabled\': USER.vip >= 1,\n        }">\n            <div class="vip-panel-title">普通会员</div>\n            <div class="vip-panel-brand">\n                <img src="https://dn-coding-net-production-static.qbox.me/static/d11def3f0f2ae45c466cdc9537ef9f81.png" alt="普通会员" width="80" />\n            </div>\n            <ul class="vip-features">\n                <li>\n                    2 个私有项目数\n                </li>\n                <li>\n                    128M Git 仓库容量\n                </li>\n            </ul>\n            <div class="vip-panel-footer">\n                <div class="vip-cost">免费</div>\n            </div>\n        </div>\n        <div class="vip-panel" ng-click="selectUpgrade($event, 2)" ng-class="{\n            \'current\': USER.vip === 2,\n            \'active\': selectLevel === 2,\n            \'disabled\': USER.vip >= 2,\n        }">\n            <div class="vip-panel-title">银牌会员</div>\n            <div class="vip-panel-brand">\n                <img src="https://dn-coding-net-production-static.qbox.me/static/c200dd0ba894c2ba188fc4d1e0e898ce.png" alt="银牌会员" width="80" />\n            </div>\n            <ul class="vip-features">\n                <li>\n                    5 个私有项目数\n                </li>\n                <li>\n                    256M Git 仓库容量\n                </li>\n                <li>\n                    Pages 自定义域名\n                </li>\n            </ul>\n            <div class="vip-panel-footer">\n                <div class="vip-cost">免费</div>\n            </div>\n        </div>\n        <div class="vip-panel" ng-click="selectUpgrade($event, 3)" ng-class="{\n            \'current\': USER.vip === 3,\n            \'active\': selectLevel === 3,\n            \'disabled\': USER.vip > 3,\n        }">\n            <div class="vip-panel-title">金牌会员</div>\n            <div class="vip-panel-brand">\n                <img src="https://dn-coding-net-production-static.qbox.me/static/c9d0438d421735fb98ae66c50db6a5ae.png" alt="金牌会员" width="80" />\n            </div>\n            <ul class="vip-features">\n                <li>\n                    100 个私有项目数\n                </li>\n                <li>\n                    1G Git 仓库容量\n                </li>\n                <li>\n                    免费 Pages 自定义域名\n                </li>\n                <li>\n                    独立代码区\n                </li>\n            </ul>\n            <div class="vip-panel-footer">\n                <div class="vip-cost">\n                    <sup>&yen;</sup>199<sub>/年</sub>\n                </div>\n            </div>\n        </div>\n        <div class="vip-panel" ng-click="selectUpgrade($event, 4)" ng-class="{\n            \'current\': USER.vip === 4,\n            \'active\': selectLevel === 4,\n        }">\n            <div class="vip-panel-title">钻石会员</div>\n            <div class="vip-panel-brand">\n                <img src="https://dn-coding-net-production-static.qbox.me/static/18527ec33fc9d70c263f9a9c2bca60ad.png" alt="钻石会员" width="80" />\n            </div>\n            <ul class="vip-features">\n                <li>\n                    无上限私有项目数\n                </li>\n                <li>\n                    5G Git 仓库容量\n                </li>\n                <li>\n                    免费 Pages 自定义域名\n                </li>\n                <li>\n                    独立代码区\n                </li>\n                <li>\n                    团队功能\n                </li>\n            </ul>\n            <div class="vip-panel-footer">\n                <div class="vip-cost"><sup>&yen;</sup>699<sub>/年</sub></div>\n            </div>\n        </div>\n    </div>\n    <div ng-show="selectLevel <= 2 && USER.vip === 1">\n        <a class="ui green button" ng-href="/user/account/setting">去完善个人信息</a>\n    </div>\n    <div class="payment" ng-show="USER.vip > 1 || selectLevel > 2">\n        <div class="vip-duration">\n            服务期：一年\n            <span class="duration">（{{startAt}} 至 {{expiredAt}}）</span>\n        </div>\n        <div class="discount" ng-show="hasDiscount">\n            优惠金额：\n            <span class="discount-price">&yen;{{discount}}</span>\n            <span class="discount-note">（该金额为金牌会员所剩天数的折算金额）</span>\n        </div>\n        <form class="ui form" action="/api/vip/upgrade/pay-redirect" method="post" target="_blank" ng-submit="submitPay($event)">\n            <input type="hidden" name="vip" value="{{selectLevel}}" />\n            <div class="center-inline input-fields" ng-if="USER.points_left > 0">\n                <input id="mabi" type="checkbox" ng-model="payform.useMb" ng-true-value="true" ng-false-value="false" ng-change="toggleUseMb()" />\n                <label for="mabi">码币抵扣：</label>\n                <input class="price-input" name="point" type="number" step="any" min="0" max="{{USER.points_left}}"\n                    ng-model="payform.mb"\n                    ng-change="mbChange()"\n                    ng-disabled="!payform.useMb"\n                />\n                码币\n                <span class="remain">（我的码币余额：{{USER.points_left}}码币，1码币 = 50人民币）</span>\n            </div>\n            <div class="center-inline">\n                <label>实付款：</label>\n                <span class="price">&yen;{{total}}</span>\n            </div>\n            <div class="center-inline">\n                <label>支付方式：</label>\n                <input id="method-alipay" type="radio" name="platform" ng-model="payform.platform" value="Alipay" />\n                <label class="pay-method" for="method-alipay">\n                    <img class="method-img" src="https://dn-coding-net-production-static.qbox.me/static/e64ea34316640c8c7d81de3cf66c260b.png" alt="alipay"/>\n                </label>\n                <input id="method-weixin" type="radio" name="platform" ng-model="payform.platform" value="Weixin" />\n                <label class="pay-method" for="method-weixin">\n                    <img class="method-img" src="https://dn-coding-net-production-static.qbox.me/static/8753149272850cbf2188d69274a1b02e.png" alt="weixin"/>\n                </label>\n            </div>\n            <button class="ui green button pay-btn"\n                ng-class="{disabled: paying}"\n                ng-click="pay()"\n            >\n                马上支付\n            </button>\n        </form>\n    </div>\n\n    <div class="ui dimmer page" ng-class="{\'visible\': showWeixinModal, \'active\': showWeixinModal}">\n        <div class="ui modal weixin-modal" ng-class="{\'visible\': showWeixinModal, \'active\': showWeixinModal}">\n            <i class="close icon" ng-click="closeWeixinModal()"></i>\n            <div class="header">微信支付</div>\n            <div class="content">\n                <div>\n                    <img src="{{weixinQR}}" alt="qrcode" />\n                </div>\n                <div class="ui large label">请使用微信扫一扫进行扫码支付</div>\n            </div>\n            <div class="actions">\n                <div class="ui button" ng-click="closeWeixinModal()">取消</div>\n            </div>\n        </div>\n    </div>\n\n    <div class="ui dimmer page" ng-class="{\'visible\': showAlipayModal, \'active\': showAlipayModal}">\n        <div class="ui modal alipay-modal" ng-class="{\'visible\': showAlipayModal, \'active\': showAlipayModal}">\n            <i class="close icon" ng-click="closeAlipayModal()"></i>\n            <div class="header">网上支付提示</div>\n            <div class="content">\n                <p>\n                    支付完成前，请不要关闭此支付窗口\n                </p>\n                <p>\n                    支付完成后，请根据支付情况点击下面的按钮。\n                </p>\n            </div>\n            <div class="actions">\n                <a class="ui green button" ng-href="/user/account" ng-click="closeAlipayModal()">支付成功</a>\n                <a class="ui button" ng-href="/user/account" ng-click="closeAlipayModal()">支付遇到问题</a>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("app/user/account_setting/index.html",'<div class="ui secondary vertical fixed menu active" id="inner-menu">\n    <header class="header item">\n        账户\n        <article>\n            包括用户账户、码币以及个人设置信息\n        </article>\n    </header>\n    <a class="item"\n       ng-href="/user/account"\n       ng-class="{active:[\'account\', \'upgrade\', \'upgrade-history\'].indexOf(inner_menu) > -1}">\n        <i class="dashboard icon"></i>概览\n    </a>\n    <a class="item"\n       ng-if="isExpActive(\'vip\')"\n       ng-href="/user/account/order"\n       ng-class="{active:inner_menu == \'order\'}">\n        <i class="unordered list icon"></i>订单管理\n    </a>\n    <a class="item"\n       ng-if="!isExpActive(\'vip\')"\n       ng-href="/user/account/top-up"\n       ng-class="{active:inner_menu == \'top-up\'}">\n        <i class="japanese yen icon"></i>账户充值\n    </a>\n    <a class="item"\n       ng-if="!isExpActive(\'vip\')"\n       ng-href="/user/account/payed-project"\n       ng-class="{active:inner_menu == \'payed-project\'}">\n        <i class="coding project icon"></i>付费项目\n    </a>\n    <a class="item"\n       ng-if="!isExpActive(\'vip\')"\n       ng-href="/user/account/payment-history"\n       ng-class="{active:inner_menu == \'payment-history\'}">\n        <i class="unordered list icon"></i>充值/消费记录\n    </a>\n    <a class="item"\n       ng-href="/user/account/invoice"\n       ng-class="{active:inner_menu == \'invoice\'}">\n        <i class="us dollar icon"></i>发票管理\n    </a>\n    <a class="item"\n       ng-href="/user/account/credit"\n       ng-class="{active:inner_menu == \'credit\'}">\n        <i class="ui coding icon coding-gold"></i>码币\n    </a>\n    <div class="sep"></div>\n    <a class="item"\n       ng-href="/user/account/setting/basic"\n       ng-class="{active:tab == \'basic\'}">\n        <i class="user icon"></i>个人设置\n    </a>\n    <a class="item" ng-href="/user/account/setting/keys"\n       ng-class="{active:tab == \'keys\'}"\n       ng-if="USER.status == 1">\n        <i class="key icon"></i>SSH 公钥\n    </a>\n    <a class="item" ng-href="/user/account/setting/access-token"\n       ng-class="{active:tab == \'access-token\'}"\n       ng-if="USER.status == 1 && isExpActive(\'access-token\')">\n        <i class="ticket icon"></i>访问令牌\n    </a>\n    <a class="item"\n       ng-href="/user/account/setting/two_factor_authentication"\n       ng-class="{active:tab == \'two_factor_authentication\'}"\n       ng-if="USER.status == 1">\n        <i class="shield icon"></i>两步验证\n    </a>\n    <a class="item"\n       ng-href="/user/account/setting/notification"\n       ng-class="{active:tab == \'notification\'}"\n       ng-if="USER.status == 1">\n        <i class="bell icon"></i>提醒设置\n    </a>\n    <a class="item"\n       ng-href="/user/account/setting/oauth"\n       ng-class="{active:tab == \'oauth\'}"\n       ng-if="USER.status == 1">\n        <i class="url icon"></i>绑定设置\n    </a>\n    <a class="item"\n       ng-href="/user/account/setting/applications"\n       ng-class="{active:tab == \'applications\'}"\n       ng-if="USER.status == 1">\n        <i class="briefcase icon"></i>应用管理\n    </a>\n    <div class="scroll-holder"></div>\n</div>\n<div class="container" id="user-setting" ng-include="keysPath()">\n</div>\n'),
a.put("app/user/account_setting/setting/access-token.html",'<div class="top-up-wrapper" ng-controller="PrivateTokenController">\n    <header class="ui dividing header">访问令牌</header>\n    <div class="description">\n        <p>访问令牌用于非登陆和非认证情况下的操作。例如：给 CI 系统评论提交或合并请求。</p>\n    </div>\n    <div class="private-token loading" ng-show="loading">\n        <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n    </div>\n    <div class="ui form" ng-show="!loading">\n        <div class="inline field">\n            <label for="allow-access-token">\n                开启访问令牌\n            </label>\n            <div class="ui toggle checkbox">\n                <input type="checkbox" ng-model="privateToken.active" id="allow-access-token" ng-change="change()">\n                <label for="allow-access-token"></label>\n            </div>\n        </div>\n        <div class="inline field">\n            <label>\n                访问令牌\n            </label>\n            <div class="ui default input">\n                <input type="text" ng-model="privateToken.token" disabled="disabled">\n            </div>\n        </div>\n        <div class="ui blue button" ng-click="refresh()">刷新访问令牌</div>\n    </div>\n</div>\n'),a.put("app/user/account_setting/setting/advance.html",'<style>\n    .two.fields .field.email {\n        position: relative;\n    }\n    .two.fields .field.email a.button {\n        position: absolute;\n        top: 36px;\n        right: 10px;\n        padding-left: 10px;\n        padding-right: 10px;\n    }\n</style>\n<div ng-controller="BasicSettingAdvanceSetting" class="ui form segment setting">\n    <div class="two fields">\n        <div class="field">\n            <label>个性后缀（Global Key）</label>\n            <input type="text" ng-model="USER.global_key" disabled="disabled" />\n        </div>\n        <div class="field" style="height:0">\n            <label>\n                <span class="required">手机</span>\n                <span class="item-passed" ng-if="USER.phone && USER.phone_validation">已验证</span>\n                <span class="item-notpassed" ng-if="USER.phone && !USER.phone_validation">未验证</span>\n\n                <a href="javascript:void(0)" style="font-size: 14px;float:right;"\n                    ng-if="!USER.phone" ng-click="showBindPhoneModal()">绑定手机</a>\n                <a href="javascript:void(0)" style="font-size: 14px;float:right;"\n                    ng-if="USER.phone" ng-click="showChangePhoneModal()">修改手机</a>\n            </label>\n            <input type="text" ng-model="phoneNoWithCountryCode" placeholder="未绑定" disabled="disabled" />\n        </div>\n    </div>\n    <div class="two fields">\n        <div class="field email">\n            <label>\n                <span class="required">邮箱</span>\n                <span class="item-passed" ng-if="USER.email && USER.email_validation">已验证</span>\n                <span class="item-notpassed" ng-if="USER.email && !USER.email_validation">未验证</span>\n\n                <a href="javascript:void(0)" style="font-size: 14px;float:right;"\n                    ng-if="!USER.email" ng-click="showBindEmailModal()">绑定邮箱</a>\n                <a href="javascript:void(0)" style="font-size: 14px;float:right;"\n                    ng-if="USER.email" ng-click="showChangeEmailModal()">修改邮箱</a>\n            </label>\n            <input type="text" ng-model="USER.email" placeholder="未绑定" disabled="disabled"\n                style="{{USER.email && !USER.email_validation ? \'padding-right: 100px\' : \'\'}}"/>\n            <a ng-if="USER.email && !USER.email_validation" ng-click="resendEmail()" class="ui button small">重发激活邮件</a>\n        </div>\n        <div class="field">\n            <label>\n                <span>账号密码</span>\n                <a href="javascript:void(0)" style="font-size: 14px;float:right;"\n                    ng-click="showChangePasswordModal()">修改密码</a>\n            </label>\n            <input type="password" placeholder="******" disabled="disabled" />\n        </div>\n    </div>\n\n    <!--modals-->\n    <ng-include src="\'app/user/account_setting/setting/modal/bind_email.html\'"></ng-include>\n    <ng-include src="\'app/user/account_setting/setting/modal/change_email.html\'"></ng-include>\n    <ng-include src="\'app/user/account_setting/setting/modal/bind_phone.html\'"></ng-include>\n    <ng-include src="\'app/user/account_setting/setting/modal/change_phone.html\'"></ng-include>\n    <ng-include src="\'app/user/account_setting/setting/modal/change_password.html\'"></ng-include>\n</div>\n'),a.put("app/user/account_setting/setting/applications.html",'<style>\n    #app-setting .fields .field input {margin-bottom:10px}\n    #app-setting .button {margin-right:10px}\n    #app-setting .actions {\n        float:right;\n    }\n    #app-setting .actions a span {\n        color: #df5a5a!important;\n    }\n    #app-setting .actions {\n        margin-top: 20px\n    }\n    #app-setting input[type="file"] {\n        display: inline-block;\n        position: absolute;\n        margin: 0;\n        opacity: 0;\n        direction: ltr;\n        cursor: pointer;\n        z-index: 999;\n        width: 140px;\n        height: 140px;\n    }\n    #app-setting .form {\n        box-shadow: none;\n    }\n    #app-setting .list {\n\n    }\n    #app-setting .list .tips {\n        text-align:center;\n        color: #999;\n    }\n    #app-setting .list article.markdown.content table {\n        table-layout: fixed;\n    }\n    #app-setting .list article.markdown.content table th {\n        color: #666;\n        text-align: left;\n    }\n    #app-setting .list article.markdown.content table th.name,\n    #app-setting .list article.markdown.content table th.homepage,\n    #app-setting .list article.markdown.content table th.callback {\n        width: 20%;\n    }\n    #app-setting .list article.markdown.content table td {\n        border: none !important;\n        vertical-align: top;\n    }\n    #app-setting .list article.markdown.content table td.name {\n        color: #333;\n        line-height: 23px;\n    }\n    #app-setting .list article.markdown.content table tbody {\n        border: 1px solid #CCC;\n    }\n    #app-setting .list article.markdown.content table tbody {\n        border: 1px solid #DDD;\n    }\n    #app-setting .list article.markdown.content table tbody .auth-app img {\n        padding: 0;\n    }\n    #app-setting .list article.markdown.content table th.auth-app,\n    #app-setting .list article.markdown.content table th.scope,\n    #app-setting .list article.markdown.content table th.operation {\n        width: 20%;\n    }\n    #app-setting .list article.markdown.content table td.operation .ui.mini {\n        color: #df5a5a!important\n    }\n    #app-setting .list article.markdown.content table td.scope,\n    #app-setting .list article.markdown.content table td.last-used{\n        color: #999\n    }\n    #app-setting .list.auth-app-list {\n        margin-top: 20px\n    }\n    #app-setting .list article.markdown.content table.authorized-applications td {\n        vertical-align: middle;\n    }\n</style>\n\n<div class="container" id="app-setting" ng-controller="ApplicationController">\n    <div ng-if="type === \'list\' && !current_app_id" class="list">\n        <article class="markdown content">\n            <table>\n                <thead>\n                    <tr>\n                        <th class="name">\n                            我的应用\n                            <i class="icon help tip" style="cursor: pointer;"\n                                data-html="<div class=\'content\'>Coding-OpenAPI 采用 OAuth2 协议对第三方平台进行授权，安全而开放。与以往的授权方式不同之处是 OAuth 的授权不会使第三方触及到用户的帐号信息（如用户名与密码），因此 OAuth 是安全的。同时，任何第三方都可以使用 OAuth 认证服务，任何服务提供商都可以实现自身的 OAuth 认证服务，因而 OAuth 是开放的。<br/><a href=\'/help/doc/account/oauth.html\' target=\'_blank\' >更多帮助<i class=\'icon double angle right\'></i></a></div>"\n                                cg-help-popup=""></i>\n                        </th>\n                        <th class="homepage">主页</th>\n                        <th class="callback">回调地址</th>\n                        <th class="description">描述</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="app in app_list" ng-if="!loading && app_list.length > 0">\n                        <td class="name"><a ng-href="/user/account/setting/applications/{{app.id}}">{{app.name}}</a></td>\n                        <td class="homepage">{{app.homepage_url}}</td>\n                        <td class="callback">{{app.callback_url}}</td>\n                        <td class="description">{{app.description}}</td>\n                    </tr>\n                    <tr ng-if="!loading && app_list.length > 0">\n                        <td colspan="4" style="text-align: center">\n                            <span style="font-size:14px;color:#999;">\n                                <a href="javascript:void(0)"\n                                   ng-click="switch(\'create\')"\n                                   class="ui button dark gray default">添加应用</a>\n                            </span>\n                        </td>\n                    </tr>\n                    <tr ng-if="!loading && app_list.length === 0" >\n                        <td colspan="4">\n                            <div style="text-align: center;margin-top:10px">\n                                <span style="font-size:14px;color:#999">\n                                    <i class="coffee icon"></i>没有应用？赶紧\n                                    <a style="text-decoration: underline" href="javascript:void(0)" ng-click="switch(\'create\')">创建</a>一个。\n                                </span>\n                            </div>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </article>\n        <div class="tips" ng-if="loading">\n            <span><i class="icon loading"></i>正在加载。。。</span>\n        </div>\n    </div>\n    <div class="list auth-app-list" ng-if="type === \'list\' && !current_app_id">\n        <article class="markdown content" ng-if="!authorized_loading && authorized_list.length > 0">\n            <table class="authorized-applications">\n                <thead>\n                <tr>\n                    <th class="auth-app">已授权的应用</th>\n                    <th class="scope">权限</th>\n                    <th class="last-used">最后使用时间</th>\n                    <th class="operation">操作</th>\n                </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="authorized in authorized_list">\n                        <td class="auth-app">\n                            <a ng-href="{{::authorized.homepage_url}}">\n                                <img width="20" height="20" ng-src="{{::authorized.icon}}"></a>\n                            <a ng-href="{{::authorized.homepage_url}}"\n                               class="ellipsis"\n                               style="max-width: 70%;display: inline-block;">{{::authorized.name}}</a>\n                        </td>\n                        <td class="scope"><div ng-repeat="scope in authorized.scopes">{{::scope}}</div></td>\n                        <td class="last-used"><span>{{::authorized.last_activity_at | date:\'yyyy-MM-dd\'}}</span></td>\n                        <td class="operation">\n                            <a href="javascript:void(0)"\n                               ng-click="revokeAuthorized(authorized)"\n                               class="ui button mini"><i class="icon loading" ng-if="authorized.revoking"></i>撤销权限</a>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </article>\n    </div>\n\n    <div ng-if="(type === \'list\' && !!current_app_id) || type === \'create\'">\n        <div class="ui form segment setting" ng-if="!!current_app_id">\n            <div class="two fields column">\n                <div class="field" style="padding: 15px;">\n                    <span style="font-size: 40px;">{{current_app.user_count}}</span> 用户数\n                </div>\n                <div class="field">\n                    <label>Client ID</label>\n                    <input type="text" ng-model="current_app.client_id" disabled="disabled" />\n                    <label>Client Secret</label>\n                    <input type="text" ng-model="current_app.secret_key" disabled="disabled" />\n                    <div class="actions">\n                        <a href="javascript:void(0)" class="ui button default"\n                           ng-click="revokeAllUsers(current_app)">\n                            <i class="icon loading" ng-if="revoking"></i><span>撤销所有授权用户的 Token</span></a>\n                        <a href="javascript:void(0)" class="ui button default"\n                           ng-click="resetSecretKey(current_app)"\n                           style="margin-right: 0">\n                            <i class="icon loading" ng-if="reseting"></i><span>重置密钥</span></a>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="ui form segment setting">\n            <div class="two fields column">\n                <div class="field three column">\n                    <label>应用名称</label>\n                    <input type="text" ng-model="current_app.name"/>\n                    <label>应用主页</label>\n                    <input type="text" ng-model="current_app.homepage_url"/>\n                    <label>回调地址</label>\n                    <input type="text" ng-model="current_app.callback_url"/>\n                </div>\n                <div class="field" style="text-align:center;margin-top:45px">\n                    <i ng-if="uploading" class="icon loading" style="position:absolute;margin:60px;"></i>\n                    <input id="application-icon" ng-show="!uploading" type="file" name="file" cg-file-upload="uploadSetting">\n                    <img ng-src="{{current_app.icon}}" style="width:140px;height:140px" ng-if="current_app.icon">\n                    <div style="width:140px;height:140px;background:#EDEDED;display:inline-block;color: #989898;" ng-if="!current_app.icon">\n                        <div style="margin-top: 54px;"><i class="icon upload"></i>上传图标</div>\n                    </div>\n                </div>\n            </div>\n            <div class="field">\n                <label>应用描述</label>\n                <textarea ng-model="current_app.description"></textarea>\n            </div>\n            <div class="field">\n                <div class="ui gray dark default button"\n                     ng-click="updateApplication(current_app)"\n                     ng-if="type === \'list\'">\n                    <i class="icon loading" ng-if="updating"></i>更新信息</div>\n                <div class="ui gray dark default button"\n                     ng-click="createApplication(current_app)"\n                     ng-if="type === \'create\'">\n                    <i class="icon loading" ng-if="creating"></i>创建应用</div>\n                <a href="javascript:void(0)" class="gray" ng-click="switch(\'list\')">取消</a>\n                <div class="ui button default"\n                     ng-click="deleteApplication(current_app)"\n                     ng-if="type === \'list\'"\n                     style="float:right;margin-right:0">\n                     <i class="icon loading" ng-if="deleting"></i>\n                    <span style="color:#df5a5a!important;">删除应用</span></i>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("app/user/account_setting/setting/avatar.html",'<style>\n    #edit-avatar {\n        min-width: 900px;\n        max-width: 900px;\n    }\n\n    #edit-avatar input[type="file"] {\n        display: block;\n        position: absolute;\n        margin: 0;\n        opacity: 0;\n        -ms-filter: \'alpha(opacity=0)\';\n        direction: ltr;\n        cursor: pointer;\n        z-index: 999;\n        width: 570px;\n        height: 55px;\n    }\n\n    #edit-avatar .avatar {\n        border: 1px solid #F7F6F2;\n        width: 80px;\n        height: 80px;\n        display: inline-block;\n        margin: 2px;\n        position: relative;\n    }\n\n    #edit-avatar .avatar:hover {\n        border: 1px solid #ddd;\n        cursor: pointer;\n    }\n\n    #edit-avatar .avatar > img {\n        margin: 0;\n    }\n\n    #edit-avatar .avatar.active {\n        border: 1px solid red;\n    }\n\n    #edit-avatar .info {\n        display: inline;\n        font-size: 10px;\n        color: #333;\n    }\n\n    #edit-avatar .avatar-preview {\n        width: 200px;\n        position: absolute;\n    }\n\n    #edit-avatar .avatar-preview > .ui.default.dark.gray.button {\n        position: absolute;\n        top: 254px;\n        left: 54px;\n    }\n\n    #edit-avatar .avatar-preview > .gray {\n        position: absolute;\n        top: 294px;\n        left: 90px;\n        font-size: 14px;\n    }\n\n    #edit-avatar .avatar-preview > h3 {\n        position: initial;\n        text-align: center;\n    }\n\n    #edit-avatar .avatar-preview img {\n        width: 200px;\n    }\n\n    #edit-avatar .system-avatar {\n        margin-left: 250px;\n    }\n\n    #edit-avatar .system-avatar .avatar-title {\n        font-size: 18px;\n        font-weight: normal;\n        margin: 10px\n    }\n\n    #edit-avatar .avatar-upload-zone {\n        border: 2px dashed #ccc;\n        margin-left: 250px;\n        border-radius: 15px;\n        line-height: 100px;\n        cursor: pointer;\n        width: 570px;\n    }\n\n    #edit-avatar .avatar-upload-zone p {\n        line-height: 25px;\n    }\n\n    #edit-avatar .system-avatar .ui.small .loading.icon {\n        position:absolute;\n        left:620px;\n        top:590px;\n        color: #fff;\n        z-index: 99;\n    }\n\n    #edit-avatar .system-avatar .ui.small .cover {\n        width: 80px;\n        height: 80px;\n        background: rgba(0, 0, 0, .5);\n        position: absolute;\n    }\n\n    #avatar-upload-zone {\n\n    }\n</style>\n<div ng-controller="UserAvatarSettingController" id="edit-avatar">\n    <div class="avatar-preview">\n        <div style="font-size: 18px;font-weight: normal;margin: 10px;text-align: center;">当前头像</div>\n        <div class="avatar-preview preview">\n            <img ng-src="{{current_avatar}}">\n        </div>\n        <div class="ui default dark gray button" ng-click="changeAvatar()">\n            <i class="loading icon" ng-if="changing"></i><span ng-if="!changing">保存修改</span></div>\n        <a href="/user/account/setting" class="gray">取消</a>\n    </div>\n    <div id="avatar-upload-zone">\n        <div class="empty center list avatar-upload-zone">\n            <input ng-show="!uploading" type="file" name="file" cg-file-upload="uploadSetting"/>\n\n            <div ng-show="!uploading">\n                <p><i class="upload cloud icon"></i>点击或将图片拖拽至此上传！</p>\n            </div>\n            <div ng-show="uploading">\n                <i class="loading icon"></i>正在上传！\n            </div>\n        </div>\n    </div>\n    <div class="system-avatar">\n        <div class="avatar-title">使用水果头像</div>\n        <div class="ui small images">\n            <div class="avatar" ng-repeat="n in array" ng-click="choiceAvatar(n)" id="{{n}}"\n                 ng-class="{active:selected==n}">\n                <img ng-src="/static/fruit_avatar/Fruit-{{n}}.png">\n                <a ng-if="selected==n" class="small like red ui corner label">\n                    <i class="checkmark icon"></i>\n                </a>\n            </div>\n        </div>\n        <div class="clearfix"></div>\n    </div>\n    <div class="system-avatar">\n        <div class="avatar-title">使用 Gravatar 头像</div>\n        <div class="ui small" ng-if="!gravatar">\n            <i class="loading icon" ng-if="refresh_gravatar"></i>\n            <div class="avatar" ng-class="{active:selected == \'none\'}" ng-click="choiceAvatar(\'none\')">\n                <div class="cover" ng-if="refresh_gravatar"></div>\n                <img ng-src="/static/fruit_avatar/none.jpg">\n                <a ng-if="selected == \'none\'" class="small like red ui corner label">\n                    <i class="checkmark icon"></i>\n                </a>\n            </div>\n        </div>\n        <div class="ui small" ng-if="gravatar">\n            <i class="loading icon" ng-if="refresh_gravatar"></i>\n            <div class="avatar" ng-class="{active:selected == gravatar}" ng-click="choiceAvatar(gravatar)">\n                <div class="cover" ng-if="refresh_gravatar"></div>\n                <img ng-src="{{gravatar}}" style="width:80px;height:80px;">\n                <a ng-if="selected == gravatar" class="small like red ui corner label">\n                    <i class="checkmark icon"></i>\n                </a>\n            </div>\n        </div>\n        <div class="ui default button" ng-click="refreshGravatar()" style="margin-top:10px">\n            <i class="refresh icon" ng-class="{loading: refresh_gravatar, refresh: !refresh_gravatar}"></i>同步\n        </div>\n    </div>\n    <input type="hidden" ng-model="new_avatar">\n</div>\n'),a.put("app/user/account_setting/setting/basic.html","<style>\n    #user-setting {\n        position: relative;\n    }\n\n    #user-setting .avatar {\n        position: absolute;\n    }\n\n    #user-setting .ui.form.segment.setting {\n        max-width: 700px;\n        margin-left: 170px;\n        min-width: 700px;\n        -webkit-box-shadow: none;\n        box-shadow: none;\n        padding: 1.5em;\n    }\n\n    #user-setting .ui.textarea, .ui.form textarea {\n        min-height: 4em;\n        height: 5em;\n        max-height: 6em;\n    }\n\n    #user-setting .avatar i {\n        float: right;\n        position: absolute;\n        width: 128px;\n        height: 128px;\n        background: rgba(0, 0, 0, .7);\n        webkit-border-radius: 128px;\n        -moz-border-radius: 128px;\n        -ms-border-radius: 128px;\n        -o-border-radius: 128px;\n        border-radius: 128px;\n        display: table;\n        z-index: 99;\n        color: #fff;\n        opacity: 0;\n        -webkit-transition: all 0.5s ease-out;\n        -moz-transition: all 0.5s ease-out;\n        -o-transition: all 0.5s ease-out;\n        -ms-transition: all 0.5s ease-out;\n        transition: all 0.5s ease-out;\n    }\n\n    #user-setting .avatar i.icon.edit:before {\n        display: table-cell;\n        vertical-align: middle;\n    }\n\n    #user-setting .avatar:hover i {\n        -webkit-transition: all 0.5s ease-out;\n        -moz-transition: all 0.5s ease-out;\n        -o-transition: all 0.5s ease-out;\n        -ms-transition: all 0.5s ease-out;\n        transition: all 0.5s ease-out;\n        opacity: 1;\n    }\n\n    #user-setting .tag {\n        border: 1px solid #ddd;\n        padding: 10px;\n        border-radius: 5px;\n        width: 600px;\n        background: white;\n        position: absolute;\n    }\n\n    #user-setting .tag > a {\n        font-size: 13px;\n        list-style: none;\n        display: inline-block;\n        margin: 5px 7px;\n        cursor: pointer;\n        color: black;\n    }\n\n    #user-setting .select2-container .select2-choice {\n        border: 1px solid rgba(0, 0, 0, 0.15);\n        padding: 0.4em 1em;\n    }\n\n    #user-setting .select2-container .select2-choice .select2-arrow {\n        border-left: 1px solid #ddd;\n        background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #eeeeee), color-stop(0.6, #ffffff));\n        background-image: -webkit-linear-gradient(center bottom, #eeeeee 0%, #ffffff 60%);\n        background-image: -moz-linear-gradient(center bottom, #eeeeee 0%, #ffffff 60%);\n        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#eeeeee', GradientType=0);\n        background-image: linear-gradient(to top, #eeeeee 0%, #ffffff 60%);\n    }\n\n    #user-setting .select2-container .select2-choice .select2-arrow b {\n        background: url(\"../../../../images/select2.png\") no-repeat 0 7px;\n    }\n\n    #user-setting .ui.checkbox .box, #user-setting .ui.checkbox label {\n        padding-left: 1.5em;\n    }\n\n    #user-setting .item-passed {background-color: #DEFCD5;color: #52A954;vertical-align: middle;margin-left: 4px;font-size: 12px;padding: 2px 3px;border-radius: 3px;}\n    #user-setting .item-notpassed {background-color: #F7EBAF;color: #F2AE3E;vertical-align: middle;margin-left: 4px;font-size: 12px;padding: 2px 3px;border-radius: 3px;}\n\n    #user-setting .field label {line-height: 22px;}\n    .pickmeup .pmu-instance { height: 260px; }\n    .ui.vip-upgrade-warning {\n        display: none;\n        max-width: 700px;\n        margin-left: 170px;\n        min-width: 700px;\n        font-size: 12px;\n    }\n    .vip-upgrade-warning a {\n        cursor: pointer;\n    }\n    .show {\n        display: block!important;\n    }\n\n    .dropdown-degree {\n        height: 45px;\n        box-sizing: border-box;\n    }\n\n    .dropdown-trigger {\n        position: relative;\n        min-height: 30px;\n    }\n\n    .dropdown-icon {\n        position: absolute;\n        right: 5px;\n        top: 15px;\n        opacity: .6!important;\n        cursor: pointer;\n    }\n    .dropdown-icon:hover {\n        opacity: .75!important;\n    }\n    .ui.selection.dropdown-menu {\n        position: absolute;\n        padding: 0;\n        width: 319px;\n        margin-top: -1px;\n        box-shadow: none!important;\n    }\n    .ui.selection.dropdown-menu:hover {\n        box-shadow: none!important;\n    }\n\n    .dropdown-skills {\n        position: relative;\n        min-height: 42px;\n        box-sizing: border-box;\n        padding: 5px 5px 0;\n        border-radius: 0.3125em;\n        border: 1px solid #ddd;\n        font-size: 14px;\n    }\n\n    .dropdown-trigger {\n        cursor: pointer;\n    }\n\n    .dropdown-skills-menu {\n        display: none;\n        position: absolute;\n        left: -1px;\n        width: 653px;\n        margin-top: 10px;\n        padding: 16px;\n        border: 1px solid #ddd;\n        border-radius: 4px;\n        z-index: 10;\n        background: #fff;\n        box-sizing: border-box;\n    }\n\n    .dropdown-skills-container {\n        display: flex;\n    }\n\n    .skill-left {\n        width: 950px;\n        border-right: 1px solid #eee;\n        padding-right: 20px;\n    }\n\n    .skill-right {\n        padding-left: 20px;\n    }\n\n    .skill-label,\n    .panel-item {\n        box-sizing: border-box;\n        display: inline-block;\n        height: 30px;\n        line-height: 30px;\n        margin-right: 5px;\n        margin-bottom: 5px;\n        padding: 0 10px;\n        color: #fff;\n        border-radius: 4px;\n        font-weight: bold;\n    }\n\n    .skill-label {\n        background: #76808e;\n        cursor: default;\n    }\n\n    .skill-label:last-child {\n        margin-bottom: 5px!important;\n    }\n\n    .skill-label .icon {\n        cursor: pointer;\n    }\n\n    .skill-label .icon:hover {\n        color: #ddd;\n    }\n\n    .panel-item:hover,\n    .panel-item.active {\n        color: #fff;\n        background: #323a45;\n    }\n\n    .panel-title {\n        margin-bottom: 10px;\n    }\n\n    .panel-item {\n        color: #76808e;\n        background: #f2f4f7;\n        cursor: pointer;\n    }\n\n    .ui.welcome-silver-modal {\n        width: 400px;\n        padding: 20px 0 30px;\n        margin-left: -200px;\n        margin-top: -180px;\n        background: #fff;\n        color: #000;\n        text-align: center;\n    }\n    .ui.welcome-silver-modal .title {\n        margin: 20px 0 10px;\n        font-size: 20px;\n    }\n    .ui.welcome-silver-modal .detail {\n        width: 223px;\n        margin: 0 auto 20px;\n        color: #76808e;\n        font-size: 14px;\n        line-height: 1.5;\n    }\n\n    .required:after {\n        display: inline-block;\n        content: '*';\n        margin-left: 3px;\n        color: red;\n        vertical-align: middle;\n    }\n\n    .skill-placeholder {\n        line-height: 30px;\n        margin-left: 10px;\n        opacity: .4;\n    }\n</style>\n"+'<div ng-show="user" class="ui dividing header">个人设置</div>\n<div id="user-setting" ng-controller="UserBasicSettingExpController" ng-click="onContainerClick()">\n    <a href="/user/account/setting/avatar">\n        <div class="avatar">\n            <i class="edit icon"></i>\n            <img class="ui image avatar128" width="128px" ng-src="{{user.lavatar}}">\n        </div>\n    </a>\n\n    <div class="ui warning message vip-upgrade-warning" ng-class="{\'show\': !isWarningClose && isExpActive(\'vip\') && USER.vip === 1}">\n        <i class="close icon" ng-click="closeWarning()"></i>\n        <i class="warning icon"></i>\n        完善个人信息免费升级为银牌会员，获得更多会员特权。\n        <a ng-href="/vip">查看会员权限</a>\n    </div>\n\n    <ng-include src="\'app/user/account_setting/setting/advance.html\'"></ng-include>\n\n    <div class="ui form segment setting" ng-class="{loading: updating}">\n        <div class="two fields" style="height: 76px;">\n            <div class="field" style="padding-bottom: 0; margin-bottom:0;">\n                <label class="required">昵称</label>\n                <input placeholder="昵称" ng-model="user.name" type="text">\n            </div>\n            <div class="tow fields" style="display: inline;">\n                <div class="field" style="padding-left: 1%;margin-bottom: 0;">\n                    <label class="required">性别</label>\n\n                    <div class="grouped inline fields">\n                        <div>\n                            <div class="field" style="display: inline-block;margin-right: 5px;">\n                                <div class="ui radio checkbox">\n                                    <input type="radio" name="sex" ng-model="user.sex" id="known" value="2">\n                                    <label for="known">未知</label>\n                                </div>\n                            </div>\n                            <div class="field" style="display: inline-block;margin-right: 10px;">\n                                <div class="ui radio checkbox">\n                                    <input type="radio" name="sex" ng-model="user.sex" checked="checked" id="male"\n                                           value="0">\n                                    <label for="male">男</label>\n                                </div>\n                            </div>\n                            <div class="field" style="display: inline-block;margin-right: 0px;">\n                                <div class="ui radio checkbox">\n                                    <input type="radio" name="sex" ng-model="user.sex" id="female" value="1">\n                                    <label for="female">女</label>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="two fields">\n            <div class="field">\n                <label class="required">生日</label>\n                <input id="birthday" placeholder="生日" type="text"\n                       ng-model="user.birthday"\n                       cg-pickmeup="onDateChange($date);"\n                       pickmeup-options="pickmeup_opts"/>\n            </div>\n            <div class="field">\n                <label class="required" style="height: 22px">地区</label>\n                <cg-cascading-address placeholder="地区" ng-model="user.location" type="text" province="province"\n                                      city="city"></cg-cascading-address>\n            </div>\n        </div>\n        <div class="two fields" ng-show="isExpActive(\'vip\')">\n            <div class="field">\n                <label class="required">学历</label>\n                <div class="ui selection dropdown dropdown-degree" ng-click="toggleDegree($event)">\n                    <div class="default text" style="width: 252px;line-height:26px;">{{degree}}</div>\n                    <i class="dropdown icon"></i>\n                    <div class="menu" ng-class="{\'show\': showDegree}" ng-click="selectDegree($event)">\n                        <div class="item" ng-repeat="item in DEGREES" data-value={{::item.value}}>\n                            {{::item.text}}\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="field">\n                <label class="required">学校</label>\n                <div class="dropdown-select">\n                    <div class="dropdown-trigger">\n                        <input type="text" name="school" ng-model="schoolValue" ng-click="openSchool($event)" ng-change="changeSchool()" />\n                        <i class="dropdown-icon triangle down icon" ng-click="toggleSchool($event)"></i>\n                    </div>\n                    <div class="ui selection dropdown dropdown-menu">\n                        <div class="menu" ng-class="{\'show\': showSchool}" ng-click="selectSchool($event)">\n                            <div class="item" ng-repeat="item in SCHOOLS">{{::item}}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="two fields">\n            <div class="field">\n                <label>公司</label>\n                <input placeholder="公司" ng-model="user.company" type="text">\n            </div>\n            <div class="field">\n                <label class="required">工作</label>\n                <select ui-select2="{width: \'319px\'}" ng-model="user.job" id="job-select">\n                    <option value="0">请选择</option>\n                    <option ng-repeat="job in JOBs" value="{{::($index + 1)}}">{{::job}}</option>\n                </select>\n            </div>\n        </div>\n        <div class="field">\n            <label>座右铭(50字以内)</label>\n            <input placeholder="个性签名" ng-model="user.slogan" type="text">\n        </div>\n        <div class="field" ng-show="isExpActive(\'vip\')">\n            <label class="required">开发技能</label>\n            <div class="dropdown-skills" ng-click="toggleSkill($event)">\n                <div class="dropdown-trigger">\n                    <span ng-if="skills.length === 0" class="skill-placeholder">请添加语言和其熟练程度</span>\n                    <span class="skill-label" ng-repeat="item in skills">\n                        <span>{{item.text}} ·</span>\n                        <span>{{item.level}}</span>\n                        <i class="remove icon" ng-click="removeSkill($event, item.text)"></i>\n                    </span>\n                </div>\n                <div class="dropdown-skills-menu" ng-class="{\'show\': showSkill}" ng-click="forceOpen($event)">\n                    <div class="dropdown-skills-container">\n                        <div class="skill-left">\n                            <div class="panel-title">选择语言</div>\n                            <div class="panel-list">\n                                <span class="panel-item" ng-repeat="item in SKILLS" ng-class="{\'active\': activeSkill === item.text}" data-value="{{item.value}}" ng-click="selectSkill($event, item.text)">\n                                    {{::item.text}}\n                                </span>\n                            </div>\n                        </div>\n                        <div class="skill-right">\n                            <div class="panel-title">熟练程度</div>\n                            <div class="panel-list">\n                                <span class="panel-item" ng-click="selectSkillLevel(\'精通\')" ng-class="{\'active\': activeSkillLevel === \'精通\'}">精通</span>\n                                <span class="panel-item" ng-click="selectSkillLevel(\'熟练\')" ng-class="{\'active\': activeSkillLevel === \'熟练\'}">熟练</span>\n                                <span class="panel-item" ng-click="selectSkillLevel(\'一般\')" ng-class="{\'active\': activeSkillLevel === \'一般\'}">一般</span>\n                                <span class="panel-item" ng-click="selectSkillLevel(\'入门\')" ng-class="{\'active\': activeSkillLevel === \'入门\'}">入门</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="field">\n            <label>个性标签</label>\n            <select ui-select2="{\'width\': \'653px\'}" id="tag-select" ng-model="tags" multiple\n                    ng-change="selectTags(tags)" data-placeholder="个性标签">\n                <option ng-repeat="t in TAGs" value="{{::t.id}}">{{::t.name}}</option>\n            </select>\n        </div>\n        <div class="ui dark gray medium submit button" ng-click="submit(user)">提交</div>\n        <div class="ui error message"></div>\n    </div>\n    <div class="ui dimmer page" ng-class="{\'visible\': showWelcomeSilverModal, \'active\': showWelcomeSilverModal}">\n        <div class="ui modal welcome-silver-modal" ng-class="{\'visible\': showWelcomeSilverModal, \'active\': showWelcomeSilverModal}">\n            <i class="close icon" ng-click="closeWelcomeModal()"></i>\n            <div>\n                <img src="https://dn-coding-net-production-static.qbox.me/static/178356fe48cb05ab4b61eb97e4460395.png" width="150" height="125" alt="welcome" />\n                <div class="title">恭喜你成为 Coding 银牌会员</div>\n                <div class="detail">\n                    现在你可以创建 5 个私有项目，<br/>每个项目的仓库容量升为 256M！\n                </div>\n            </div>\n            <div class="ui green button" ng-click="closeWelcomeModal()">我知道了</div>\n        </div>\n    </div>\n</div>\n'),
a.put("app/user/account_setting/setting/crop_avatar_modal.html",'<style>\n    .jcrop-centered\n    {\n        display: inline-block;\n        vertical-align: middle;\n        background-color: inherit !important;\n    }\n    .crop-image-wrapper\n    {\n        text-align: center;\n    }\n    .crop-image-wrapper:before {\n        content: \'\';\n        display: inline-block;\n        height: 100%;\n        vertical-align: middle;\n    }\n</style>\n<div class="ui small modal coding-modal" id="crop-avatar-modal">\n    <i class="close icon"></i>\n    <div class="header">\n        截取头像\n    </div>\n    <div class="content">\n        <div class="image-crop crop-image-wrapper" style="height:400px">\n            <img cg-image-crop="onImgChange($img)" cg-image-crop-src="avatar"\n                 ng-model="img" cg-box-width="400" cg-box-height="400" id="crop-avatar-zone" width="400" height="200">\n        </div>\n    </div>\n    <div style="margin:10px;text-align:center">\n        <a href="javascript:void(0)" class="ui default button" ng-click="closeModal()" style="width:96px">取消</a>\n        <a href="javascript:void(0)" class="ui default dark gray button" style="width:96px"\n           ng-click="doImageCrop(img)" ><i class="loading icon" ng-if="uploading"></i><span ng-if="!uploading">确认</span></a>\n    </div>\n    <form>\n        <input type="hidden" name="img.src" id="img.src" ng-model="img.src">\n        <input type="hidden" name="img.left" id="img.left" ng-model="img.left">\n        <input type="hidden" name="img.top" id="img.top" ng-model="img.top">\n        <input type="hidden" name="img.size" id="img.size" ng-model="img.size">\n    </form>\n    <input type="hidden" ng-model="new_avatar">\n</div>\n'),a.put("app/user/account_setting/setting/modal/bind_email.html",'<div ng-controller="BindEmailModalController">\n    <div class="ui modal tiny40" cg-semanticui-modal="setting" modal="$modal" style="max-width: 480px;">\n        <div class="account-container">\n            <h2>绑定邮箱</h2>\n\n            <div>\n                <input-email ret="email"></input-email>\n                <input-captcha ret="captcha"></input-captcha>\n                <input-password-twofa ret="password"></input-password-twofa>\n\n                <button ng-click="submit()" ng-disabled="!valid() || loading"\n                    ng-class="{loading: loading}">发送验证邮件</button>\n\n                <div class="bottom-link">\n                    <a href="javascript:void(0);" ng-click="cancel()">取消</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("app/user/account_setting/setting/modal/bind_phone.html",'<div ng-controller="BindPhoneModalController">\n    <div class="ui modal tiny40" cg-semanticui-modal="setting" modal="$modal" style="max-width: 480px;">\n        <div class="account-container">\n            <h2>绑定手机</h2>\n\n            <div>\n                <input-phone ret="phone"></input-phone>\n                <input-phone-code ret="code" phone="phone"></input-phone-code>\n                <input-password-twofa ret="password"></input-password-twofa>\n\n                <button ng-click="submit()" ng-disabled="!valid() || loading"\n                    ng-class="{loading: loading}">确认绑定</button>\n\n                <div class="bottom-link">\n                    <a href="javascript:void(0);" ng-click="cancel()">取消</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("app/user/account_setting/setting/modal/change_email.html",'<div ng-controller="ChangeEmailModalController">\n    <div class="ui modal tiny40" cg-semanticui-modal="setting" modal="$modal" style="max-width: 480px;">\n        <div class="account-container">\n            <h2>修改邮箱</h2>\n\n            <div>\n                <input-email ret="email"></input-email>\n                <input-captcha ret="captcha"></input-captcha>\n                <input-password-twofa ret="password"></input-password-twofa>\n\n                <button ng-click="submit()" ng-disabled="!valid() || loading"\n                    ng-class="{loading: loading}">发送验证邮件</button>\n\n                <div class="bottom-link">\n                    <a href="javascript:void(0);" ng-click="cancel()">取消</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("app/user/account_setting/setting/modal/change_password.html",'<div ng-controller="ChangePasswordModalController">\n    <div class="ui modal tiny40" cg-semanticui-modal="setting" modal="$modal" style="max-width: 480px;">\n        <div class="account-container">\n            <h2>修改密码</h2>\n\n            <div>\n                <input-password ret="password"></input-password>\n                <input-password-confirm ret="password_confirm"></input-password-confirm>\n\n                <button ng-click="submit()" ng-disabled="!valid() || loading"\n                    ng-class="{loading: loading}">确认修改</button>\n\n                <div class="bottom-link">\n                    <a href="javascript:void(0);" ng-click="cancel()">取消</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("app/user/account_setting/setting/modal/change_phone.html",'<div ng-controller="ChangePhoneModalController">\n    <div class="ui modal tiny40"  cg-semanticui-modal="setting" modal="$modal" style="max-width: 480px;">\n        <div class="account-container">\n            <h2>修改手机</h2>\n\n            <div>\n                <input-phone ret="phone"></input-phone>\n                <input-phone-code ret="code" phone="phone"></input-phone-code>\n                <input-password-twofa ret="password"></input-password-twofa>\n\n                <button ng-click="submit()" ng-disabled="!valid() || loading"\n                    ng-class="{loading: loading}">确认修改</button>\n\n                <div class="bottom-link">\n                    <a href="javascript:void(0);" ng-click="cancel()">取消</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("app/user/account_setting/setting/notification.html",'<style>\n    #notification-setting {\n        min-width: 600px;\n        max-width: 700px;\n        -webkit-box-shadow: none;\n        box-shadow: none;\n        background-color: #FFFFFF;\n        padding: 1.0em 1.5em 1.5em 1.5em;\n        border-radius: 5px;\n    }\n    #notification-setting table tr {\n        height: 40px;\n    }\n    #notification-setting table tr td {\n        width: 200px;\n    }\n    #notification-setting a{\n        color: #333;\n    }\n    .special-setting{\n        color: #666;\n        height: 80px;\n        border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n        margin-bottom: 10px;\n    }\n    .setting-desc{\n        font-size: 0.9rem;\n    }\n</style>\n<!--<div class="ui dividing header">提醒设置</div>-->\n<div class="ui segment" id="notification-setting" ng-controller="UserNotificationSettingController">\n    <table  class="special-setting">\n        <tr>\n            <td >{{activitySetting.name}}</td>\n            <td ><div class="ui toggle checkbox"><input type="checkbox" ng-model="settings[activitySetting.notification_key]" id="{{activitySetting.notification_key}}" ng-change="submit(activitySetting.notification_key, settings[activitySetting.notification_key])"><label for="{{activitySetting.notification_key}}"></label></div></td>\n            <td ></td>\n        </tr>\n    </table>\n    <table  class="special-setting">\n        <tr>\n            <td >{{desktopSetting.name}}</td>\n            <td ><div class="ui toggle checkbox"><input type="checkbox" ng-model="settings[desktopSetting.notification_key]" id="{{desktopSetting.notification_key}}" ng-change="submit(desktopSetting.notification_key, settings[desktopSetting.notification_key])"><label for="{{desktopSetting.notification_key}}"></label></div></td>\n            <td ></td>\n        </tr>\n        <tr><td colspan="8" class="setting-desc">开启后，即使你没有打开 Coding 网站，也能在屏幕右上角收到未读消息提醒。</td></tr>\n    </table>\n    <table>\n        <tr>\n            <td></td>\n            <td>系统提醒</td>\n            <td>邮件提醒</td>\n        </tr>\n    </table>\n    <table ng-if="settings" ng-repeat="setting in sets" style="color: #666;">\n        <tr ng-if="setting.flag == 0 && setting.notification_key != activitySetting.notification_key && setting.notification_key != desktopSetting.notification_key">\n            <td ng-if="setting.flag == 0">{{setting.name}}</td>\n            <td ng-if="setting.flag == 0"><div class="ui toggle checkbox"><input type="checkbox" ng-model="settings[setting.notification_key]" id="{{setting.notification_key}}" ng-change="submit(setting.notification_key, settings[setting.notification_key])"><label for="{{setting.notification_key}}"></label></div></td>\n            <td ng-if="setting.flag == 0"><div class="ui toggle checkbox"><input type="checkbox" ng-model="settings[setting.email_key]" id="{{setting.email_key}}" ng-change="submit(setting.email_key, settings[setting.email_key])"><label for="{{setting.email_key}}"></label></div></td>\n        </tr>\n    </table>\n    <a ng-if="!showMore" class="down center more" href="javascript:void(0)" ng-click="changeShowMore()" style="margin-top: 10px;">更多设置</a>\n    <table  ng-if="settings && showMore" ng-repeat="setting in sets"  style="color: #666;">\n        <tr ng-if="setting.flag == 1 && setting.notification_key != activitySetting.notification_key && setting.notification_key != desktopSetting.notification_key">\n            <td ng-if="setting.flag == 1">{{setting.name}}</td>\n            <td ng-if="setting.flag == 1"><div class="ui toggle checkbox"><input type="checkbox" ng-model="settings[setting.notification_key]" id="{{setting.notification_key}}" ng-change="submit(setting.notification_key, settings[setting.notification_key])"><label for="{{setting.notification_key}}"></label></div></td>\n            <td ng-if="setting.flag == 1"><div class="ui toggle checkbox"><input type="checkbox" ng-model="settings[setting.email_key]" id="{{setting.email_key}}" ng-change="submit(setting.email_key, settings[setting.email_key])"><label for="{{setting.email_key}}"></label></div></td>\n        </tr>\n    </table>\n    <!--<a ng-if="showMore" ng-click="changeShowMore()" href="javascript:void(0)" class="up center more">收起</a>-->\n</div>'),a.put("app/user/account_setting/setting/oauth.html",'<style type="text/css">\n    #user-oauth-setting {\n        width: 600px;\n    }\n\n    #user-oauth-setting .oauth-list {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n    }\n\n    #user-oauth-setting .oauth-list > li {\n        height: 60px;\n        line-height: 60px;\n        margin: 0 20px;\n        border-bottom: 1px solid #EEE;\n    }\n\n    #user-oauth-setting .oauth-list > li:last-child {\n        border-bottom: none;\n    }\n\n    #user-oauth-setting .oauth-list .name i.oauth-icon {\n        font-size: 24px;\n        color: #000;\n    }\n\n    #user-oauth-setting .oauth-list .name {\n        font-size: 18px;\n        color: #333;\n    }\n    #user-oauth-setting .oauth-list .bind-account {\n        margin-right: 15px;\n        color: #333;\n    }\n    #user-oauth-setting .ui.loading.button{\n        color: #333333!important;\n    }\n    #user-oauth-setting .ui.loading.button:after {\n        content: "\\f110";\n        color: #FFF;\n        font-family: Icons;\n        -webkit-animation: icon-loading 2s linear infinite;\n        background: none!important;\n    }\n</style>\n<div class="ui segment borderless" id="user-oauth-setting" ng-controller="OAuthSettingController">\n    <ul class="oauth-list">\n        <li ng-repeat="platform in platforms">\n            <span class="name coding floated left">\n                <i class="icon oauth-icon" ng-class="::oauthIcon(platform.en_name)"></i><span>{{::platform.cn_name}}</span>\n            </span>\n            <span class="action coding floated right" ng-if="platform.is_bound">\n                <span class="bind-account">{{::platform.platform_account}}</span>\n                <a class="ui button"\n                   href="javascript:void(0);"\n                   ng-class="{loading: unbinding}"\n                   ng-click="unbind(platform.en_name)">\n                    取消绑定\n                </a>\n            </span>\n            <span class="action coding floated right" ng-if="!platform.is_bound">\n                <a class="ui dark gray button"\n                   ng-class="{loading: platform.en_name == binding, disabled: binding && platform.en_name != binding}"\n                   ng-click="rebind(platform.en_name)">\n                    绑定\n                </a>\n            </span>\n        </li>\n        <li ng-if="platforms.length === 0">\n            <span class="name" ng-show="loaded">\n                尚未绑定任何第三方账号\n            </span>\n            <span class="name" ng-show="loading">\n                <i class="loading icon"></i>正在加载绑定的第三方账号...\n            </span>\n        </li>\n    </ul>\n</div>'),a.put("app/user/account_setting/setting/secret_question.html",'<div class="ui form segment" style="width: 375px; padding: 24px;" ng-controller="SecretQuestionController">\n    <div class="field">\n        <label>问题1：</label>\n        <select ui-select2="{width: \'319px\'}" ng-model="question1">\n            <option value="0">请选择</option>\n            <option ng-repeat="question in questions" value="{{::question}}">{{::question}}</option>\n            <option value="1">自定义</option>\n        </select>\n\n        <div ng-show="question1 == 1" class="ui left input" style="width: 320px;  margin-top: 15px;">\n            <input type="text" ng-model="custom_question1">\n        </div>\n    </div>\n    <div class="field">\n        <label>答案1：</label>\n\n        <div class="ui left input" style="width: 320px;">\n            <input type="text" ng-model="answer1">\n        </div>\n    </div>\n    <div class="field">\n        <label>问题2：</label>\n        <select ui-select2="{width: \'319px\'}" ng-model="question2">\n            <option value="0">请选择</option>\n            <option ng-repeat="question in questions" value="{{::question}}">{{::question}}</option>\n            <option value="1">自定义</option>\n        </select>\n\n        <div ng-show="question2 == 1" class="ui left input" style="width: 320px;  margin-top: 15px;">\n            <input type="text" ng-model="custom_question2">\n        </div>\n    </div>\n    <div class="field">\n        <label>答案2：</label>\n\n        <div class="ui left input" style="width: 320px;">\n            <input type="text" ng-model="answer2">\n        </div>\n    </div>\n    <div class="field">\n        <label>问题3：</label>\n        <select ui-select2="{width: \'319px\'}" ng-model="question3">\n            <option value="0">请选择</option>\n            <option ng-repeat="question in questions" value="{{::question}}">{{::question}}</option>\n            <option value="1">自定义</option>\n        </select>\n\n        <div ng-show="question3 == 1" class="ui left input" style="width: 320px;  margin-top: 15px;">\n            <input type="text" ng-model="custom_question3">\n        </div>\n    </div>\n    <div class="field">\n        <label>答案3：</label>\n\n        <div class="ui left input" style="width: 320px;">\n            <input type="text" ng-model="answer3">\n        </div>\n    </div>\n    <div class="ui dark gray medium submit button" ng-click="setting_secret_question()">提交</div>\n    <div class="ui modal account-charge-modal"\n         ng-controller="PasswordRequiredModalCtrl"\n         cg-modal="password_required_modal"\n         ng-include="\'app/project/setting/summary/modal/password_required_modal.html\'"></div>\n</div>'),a.put("app/user/account_setting/setting/setting.html",""),a.put("app/user/account_setting/setting/totp_setting_modal.html",'<div class="ui small modal send-message coding-modal" id="totp-setting-modal">\n\n    <div class="ui form segment">\n        <p><b>设置身份验证器</b></p>\n        <hr/>\n        <img ng-src="{{image_url}}" style="width: 150px;"/>\n        <br/>\n        <label>验证码</label>\n        <input placeholder="输入收到的验证码" type="text" style="display: initial;width:200px" ng-model="two_factor_code"\n               name="two_factor_code">\n    </div>\n\n    <div class="actions">\n        <div class="ui negative button">取消</div>\n        <div class="ui positive blue button" ng-click="verifyCode()" style="width:130px">\n            验证并保存\n        </div>\n    </div>\n</div>\n'),a.put("app/user/account_setting/setting/two_factor_authentication.html",'<style>.two-factor-auth .description {\n    font-size: 14px;\n    color: #333;\n    line-height: 25px;\n    padding-right: 30px;\n}\n.two-factor-auth .status {\n    font-size: 15px;\n    margin-bottom: 25px;\n}\n.two-factor-auth .status i {\n    font-size: 14px;\n}\n.two-factor-auth .status span {\n    font-size: 12px;\n}\n</style>\n<div ng-controller="UserTwoFactorAuthSettingController">\n    <div class="two-factor-auth" ng-hide="opening">\n        <header class="ui dividing header">两步验证</header>\n        <p class="description">\n            Coding 两步验证指的是用户登录账户的时候，除了要输入用户名和密码，还要求用户输入一个手机生成的动态验证码，为账户额外添加一层保护，即使入侵者窃取了用户的密码，也会因不能使用用户的手机而无法登录账户。\n        </p>\n\n        <div class="status" ng-show="method !== \'\'">\n            <i class="info icon"></i> 当前状态：\n            <span ng-if="method !== \'password\'" style="color: green;"><i class="icon checkmark"></i>已开启</span>\n            <span ng-if="method === \'password\'" style="color: red;"><i class="icon remove"></i>关闭</span>\n        </div>\n        <div class="action" ng-show="method !== \'\'">\n            <span class="ui green button" ng-class="{disabled:!USER.is_phone_validated}" ng-show="method === \'password\'" ng-click="openTotp()">开启两步验证</span>\n            <span class="ui red button" ng-hide="method === \'password\'" ng-click="closeTwoFactorAuth()">关闭两步验证</span>\n        </div>\n        <div class="ui warning message" ng-show="!USER.is_phone_validated">\n            <strong>注意：</strong>\n            <span>你必须验证手机号才能开启两步验证，点击即可跳转到“<a href="/user/account/setting/basic">个人设置</a>”页</span>\n        </div>\n    </div>\n    <div ng-show="opening">\n        <div class="ui three steps" style="margin-bottom: 20px;">\n            <div class="ui step" ng-class="{active: step === 1}">\n                安装 Coding 身份验证器\n            </div>\n            <div class="ui step" ng-class="{active: step === 2}">\n                配置生成验证码\n            </div>\n            <div class="ui step" ng-class="{active: step === 3}">\n                验证并开启\n            </div>\n        </div>\n        <div ng-show="step === 1">\n            <div style="float: left;">\n                <img style="width: 250px;;" src="https://dn-coding-net-production-static.qbox.me/static/2af97a35497c5f4638bceeee0a41650d.png" alt=""/>\n            </div>\n            <div style="margin-left: 300px">\n                <p style="font-size: 14px; color: #333; line-height: 38px; padding-top: 20px;">Coding 身份验证器内嵌在 Coding 客户端上，用于动态生成验证码。<br/>\n                    如果你尚未安装 Coding 客户端，你可以直接点击 <a target="_blank" href="https://coding.net/app">APP 下载</a>，<br/>\n                    或者在各大应用市场搜索“Coding”下载。<br/>\n                    如果你已经安装了 Coding 客户端，你可以直接点击下一步。\n                </p>\n                <div>\n                    <span class="ui button" ng-show="step > 1" ng-click="prevStep()">上一步</span>\n                    <span class="ui green button" ng-show="step <3" ng-click="nextStep()">下一步</span>\n                </div>\n            </div>\n        </div>\n        <div ng-show="step === 2">\n            <div style="float: left;">\n                <img style="width: 250px;;" src="https://dn-coding-net-production-static.qbox.me/static/e5a8860babb339a08479396fd0f18d05.png" alt=""/>\n            </div>\n            <div style="float: left;margin-left: 50px;">\n                <p style="font-size: 14px; color: #333; line-height: 24px;">打开 Coding 客户端，点击“+”，再点击“两步认证”后，使用手机上的相机扫描二维码。</p>\n                <img style="width: 200px;border: solid 1px #ddd;"\n                     ng-src="{{image_url}}"\n                     alt=""/><br/>\n\n                <div class="ui teal inverted segment" style="background-color: #D9EDF7 !important; color: #6898B4 !important; border-color: #BDDEEF; font-size: 12px; line-height: 20px;width: 320px;margin-bottom: 20px;">\n                    <p><i class="icon info"></i>身份验证器不能扫描验证码？手动添加以下账户：<br/>\n                    账户：{{username}}<br/>\n                    密钥：{{secret}}</p>\n                </div>\n                <div>\n                    <span class="ui button" ng-show="step > 1" ng-click="prevStep()">上一步</span>\n                    <span class="ui green button" ng-show="step <3" ng-click="nextStep()">下一步</span>\n                </div>\n            </div>\n        </div>\n        <div ng-show="step === 3">\n            <div style="float: left;">\n                <img style="width: 250px;;" src="https://dn-coding-net-production-static.qbox.me/static/4450c8b275a8e9980128fbe26031b753.png" alt=""/>\n            </div>\n            <div style="position: relative; top: 14px; left: 50px; margin-right: 60px;">\n                <p style="font-size: 14px; color: #333; line-height: 24px;">请输入身份验证器自动生成的动态验证码，确认开启两步验证。</p>\n                <p style="font-size: 14px; color: #D95C5C; line-height: 24px;">注意：两步验证直接跟手机绑定，如果更换手机或者刷机导致无法登录，请在登陆页面直接关闭两步验证。</p>\n\n                <div class="ui action input" style="  margin-bottom: 20px;">\n                    <input autofocus ng-model="two_factor_code" type="text" id="input">\n\n                    <div class="ui teal right labeled green button"\n                        ng-class="{disabled : two_factor_code === \'\'}"\n                        ng-click="verifyCode()">\n                        验证并开启\n                    </div>\n                </div>\n                <div>\n                    <span class="ui button" ng-show="step > 1" ng-click="prevStep()">上一步</span>\n                    <span class="ui green button" ng-show="step <3" ng-click="nextStep()">下一步</span>\n                </div>\n            </div>\n        </div>\n        <div style="clear: both;"></div>\n    </div>\n    <div class="ui modal account-charge-modal"\n         ng-controller="PasswordRequiredModalCtrl"\n         cg-modal="password_required_modal"\n         ng-include="\'app/project/setting/summary/modal/password_required_modal.html\'"></div>\n</div>\n'),a.put("app/user/activate_email_modal.html",'<i class="close icon"></i>\n<span class="title">激活邮箱</span>\n<div class="content">\n    <div class="ui warning message">\n        重新发送激活邮件到你的账号，请注意查收\n    </div>\n    <div class="ui medium left labeled icon input" style="margin:20px;">\n        <i class="icon mail" style="left:auto"></i>\n        <input type="text" ng-model="form.email" disabled="disabled" style="color: #ccc; width: 300px;"/>\n    </div>\n    <div class="ui medium left labeled icon input" style="margin:20px;">\n        <i class="icon shield" style="left:auto"></i>\n        <input type="text" ng-model="form.j_captcha" style="width: 215px"/>\n        <img class="captcha" ng-src="{{captcha}}" ng-click="refreshCaptcha()" style="width: 80px; height: 36px; cursor: pointer;"/>\n    </div>\n</div>\n<div class="actions">\n    <a href="javascript:void(0)" class="gray"\n       ng-click="closeModal(activate_email_modal)"\n       style="margin-right: 10px;">取消</a>\n    <div ng-click="activateEmail()" class="ui approve dark gray default button">\n       <i class="icon loading" ng-if="sending"></i>\n       确定\n   </div>\n</div>\n'),a.put("app/user/add_friends_modal.html",'<style type="text/css">\n\n    #add-friends {\n        border-bottom-right-radius: 5px;\n        border-bottom-left-radius: 5px;\n    }\n\n    #add-friends .friends {\n        margin: 10px 0;\n        height: 200px;\n        overflow-y: auto;\n    }\n\n    #add-friends .friend {\n        position: relative;\n        padding: 10px 15px;\n        border: 1px dashed #CCC;\n        width: auto;\n        margin: 0 0 10px 0;\n        border-radius: 3px;\n        cursor: pointer;\n    }\n\n    #add-friends .friend:hover {\n        background: #EEE;\n    }\n\n    #add-friends .friend > .avatar {\n        position: absolute;\n        left: 15px;\n        top: 10px;\n    }\n\n    #add-friends .friend > .info {\n        height: 100%;\n        width: auto;\n        line-height: 32px;\n        padding: 0 52px;\n    }\n\n    #add-friends .friend > .action {\n        position: absolute;\n        right: 15px;\n        top: 10px;\n        height: 32px;\n        line-height: 32px;\n        font-size: 13px;\n    }\n\n    #add-friends .invite-friend{\n        margin-top: 20px;\n    }\n</style>\n<div class="ui tiny40 modal" id="add-friend-modal">\n    <i class="close icon"></i>\n    <div class="header">关注好友</div>\n    <div class="content" id="add-friends">\n        <div class="ui fluid medium input">\n            <input type="text" ng-model="key" cg-timeout-input="loadFriend(key);" cg-enter="doFollow(single_user);"\n                   placeholder="输入 邮箱/手机/昵称/个性后缀 来搜索用户"/>\n        </div>\n        <div class="friends">\n            <div class="friend" ng-repeat="user in friends" ng-click="!user.followed && doFollow(user);">\n                <div class="avatar">\n                    <a class="avatar" ng-href="{{user.path}}">\n                        <img class="ui circular image" width="32" height="32" ng-src="{{user.avatar}}"/>\n                    </a>\n                </div>\n                <div class="info ellipsis">{{user.name}} - {{user.global_key}}</div>\n                <div class="ui green corner label" ng-show="user.selected">\n                    <i class="checkmark icon"></i>\n                </div>\n                <div class="action" ng-switch="user.status">\n                    <span ng-switch-when="0" ng-if="user.followed" style="color: #A1CF64;"><i class="checkmark icon"></i>已关注</span>\n                    <span ng-if="!user.followed && user.status == 0" class="blue hovered"><i class="unhide icon"></i>关注</span>\n                    <span ng-switch-when="1" style="color: #A1CF64;"><i class="checkmark icon"></i>成功</span>\n                    <span ng-switch-when="2" style="color: #D95C5C;"><i class="attention icon"></i>{{user.msg.user_is_friend || \'失败\'}}</span>\n                </div>\n            </div>\n            <div class="empty list center" ng-if="loading">\n                <i class="loading icon"></i>正在加载数据...\n            </div>\n            <div class="empty list center" ng-if="loaded && friends.length === 0 && key.length > 0">\n                <div>\n                    <i class="frown icon"></i>没有找到符合条件的好友，邀请好友加入 Coding ？\n                </div>\n                <div class="invite-friend">\n                    <button class="ui default green button" ng-click="inviteFriend();">马上邀请好友</button>\n                </div>\n            </div>\n            <div class="empty list center" ng-if="!loaded && !loading && friends.length === 0 && key.length === 0">\n                <div>\n                    <i class="smile icon"></i>我的好友没在 Coding，直接邀请好友加入？\n                </div>\n                <div class="invite-friend">\n                    <button class="ui default green button" ng-click="inviteFriend();">马上邀请好友</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n'),a.put("app/user/feed_editor.html",'<div class="feed-editor" data-limit="{{words_limit || 1000}}">\n    <div class="avatar">\n        <img class="ui avatar image" ng-src="{{USER.avatar}}">\n    </div>\n    <div class="ui dimmer" ng-class="{active:loading}"><i class="inverted loading icon"></i></div>\n    <div class="editor">\n        <textarea ng-model="tweet_content" placeholder="说点什么?" cg-ctrl-enter="tweetPub(tweet_content);"></textarea>\n        <div class="ui red pointing above ui label" style="position: absolute;bottom: -37px;left: -3px;" ng-if="msg.tweet_content_not_empty">{{msg.tweet_content_not_empty}}</div>\n        <div class="toolbar">\n            <ul>\n                <li title="preview" class="btn-preview"><i class="ui unhide icon"></i></li>\n                <li title="insert image" class="btn-photo"><i class="ui photo icon"></i></li>\n                <li title="upload attachment" class="btn-attachment"><i class="ui attachment icon"></i></li>\n                <li title="submit" class="btn-submit" ng-click="tweetPub(tweet_content);"><i class="clockwise rotated level down icon" style="margin: 0;"></i></li>\n            </ul>\n        </div>\n    </div>\n    <div class="right preview">\n        <div style="text-align: center;font-size:14px"><i class="ui unhide icon"></i>预览</div>\n        <div class="action">\n            <i class="ui teal refresh icon"></i>\n            <i class="ui red remove sign icon"></i>\n        </div>\n        <div class="markdown content bubble"></div>\n    </div>\n</div>\n'),a.put("app/user/following/activities.html",'<div class="activity"\n     ng-if="activity && (activity.target_type == \'ProjectTopic\' || activity.target_type == \'Project\')">\n    <div class="user-avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img ng-src="{{activity.user.avatar}}" class="ui avatar image" width="48px" height="48px"\n                 alt="{{tweet.owner.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular comment icon"></i>\n    </div>\n    <div class="tweet-content">\n\n        <div class="tweet-detail">\n            <div class="markdown content bubble" ng-if="activity.target_type == \'ProjectTopic\'">\n                <div>\n                    <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    在项目\n                    <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                <span ng-if="activity.action == \'create\'">\n                    <span>{{activity.action_msg}}</span>\n                    讨论\n                    <a ng-href="{{activity.project_topic.path}}">{{activity.project_topic.title}}</a>\n                </span>\n                <span ng-if="activity.action == \'comment\'">\n                    <span>{{activity.action_msg}}</span>\n                    讨论\n                    <a ng-href="{{activity.project_topic.parent.path}}">{{activity.project_topic.parent.title}}</a>\n                </span>\n\n                    <div ng-if="activity.action == \'comment\'" ng-bind-html="activity.project_topic.content">\n                    </div>\n                </div>\n            </div>\n            <div class="markdown content bubble" ng-if="activity.target_type == \'Project\'">\n                <div ng-switch="activity.action">\n                <span ng-switch-when="create">\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    创建了新项目 <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a></span>\n                <span ng-switch-when="update">\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    更新了项目信息 <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a></span>\n                <span ng-switch-when="delete">\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    删除了项目 {{activity.project.full_name}}</span>\n                </div>\n            </div>\n            <div class="author-time">\n                <span><a ng-href="{{activity.user.path}}">{{activity.user.name}}</a></span>\n                &nbsp;&nbsp;\n                <i class="icon time" style="margin:0px 0px;"></i>\n                <span class="created-time" cg-friendly-time="activity.created_at"></span>\n                &nbsp;&nbsp;\n            </div>\n        </div>\n    </div>\n</div>\n\n'),a.put("app/user/gitignore.html","<option selected=\"selected\" value='no'>添加.gitignore文件</option>\n<option value='Actionscript'>Actionscript - .gitignore</option>\n<option value='Android'>Android - .gitignore</option>\n<option value='AppceleratorTitanium'>AppceleratorTitanium - .gitignore</option>\n<option value='Autotools'>Autotools - .gitignore</option>\n<option value='C'>C - .gitignore</option>\n<option value='C++'>C++ - .gitignore</option>\n<option value='CakePHP'>CakePHP - .gitignore</option>\n<option value='CFWheels'>CFWheels - .gitignore</option>\n<option value='Clojure'>Clojure - .gitignore</option>\n<option value='CMake'>CMake - .gitignore</option>\n<option value='CodeIgniter'>CodeIgniter - .gitignore</option>\n<option value='Concrete5'>Concrete5 - .gitignore</option>\n<option value='Coq'>Coq - .gitignore</option>\n<option value='Dart'>Dart - .gitignore</option>\n<option value='Delphi'>Delphi - .gitignore</option>\n<option value='Django'>Django - .gitignore</option>\n<option value='Drupal'>Drupal - .gitignore</option>\n<option value='Eagle'>Eagle - .gitignore</option>\n<option value='Erlang'>Erlang - .gitignore</option>\n<option value='ExpressionEngine'>ExpressionEngine - .gitignore</option>\n<option value='Finale'>Finale - .gitignore</option>\n<option value='ForceDotCom'>ForceDotCom - .gitignore</option>\n<option value='FuelPHP'>FuelPHP - .gitignore</option>\n<option value='Gcov'>Gcov - .gitignore</option>\n<option value='Go'>Go - .gitignore</option>\n<option value='Grails'>Grails - .gitignore</option>\n<option value='GWT'>GWT - .gitignore</option>\n<option value='Haskell'>Haskell - .gitignore</option>\n<option value='Java'>Java - .gitignore</option>\n<option value='Jboss'>Jboss - .gitignore</option>\n<option value='Jekyll'>Jekyll - .gitignore</option>\n<option value='Joomla'>Joomla - .gitignore</option>\n<option value='Jython'>Jython - .gitignore</option>\n<option value='Kohana'>Kohana - .gitignore</option>\n<option value='Leiningen'>Leiningen - .gitignore</option>\n<option value='LemonStand'>LemonStand - .gitignore</option>\n<option value='Lilypond'>Lilypond - .gitignore</option>\n<option value='Lithium'>Lithium - .gitignore</option>\n<option value='Magento'>Magento - .gitignore</option>\n<option value='Maven'>Maven - .gitignore</option>\n<option value='Nanoc'>Nanoc - .gitignore</option>\n<option value='Node'>Node - .gitignore</option>\n<option value='Objective-C'>Objective-C - .gitignore</option>\n<option value='OCaml'>OCaml - .gitignore</option>\n<option value='Opa'>Opa - .gitignore</option>\n<option value='OpenCart'>OpenCart - .gitignore</option>\n<option value='OracleForms'>OracleForms - .gitignore</option>\n<option value='Perl'>Perl - .gitignore</option>\n<option value='PlayFramework'>PlayFramework - .gitignore</option>\n<option value='Plone'>Plone - .gitignore</option>\n<option value='Python'>Python - .gitignore</option>\n<option value='Qooxdoo'>Qooxdoo - .gitignore</option>\n<option value='Qt'>Qt - .gitignore</option>\n<option value='R'>R - .gitignore</option>\n<option value='Rails'>Rails - .gitignore</option>\n<option value='RhodesRhomobile'>RhodesRhomobile - .gitignore</option>\n<option value='Ruby'>Ruby - .gitignore</option>\n<option value='Scala'>Scala - .gitignore</option>\n<option value='Sdcc'>Sdcc - .gitignore</option>\n<option value='SeamGen'>SeamGen - .gitignore</option>\n<option value='SketchUp'>SketchUp - .gitignore</option>\n<option value='SugarCRM'>SugarCRM - .gitignore</option>\n<option value='SymphonyCMS'>SymphonyCMS - .gitignore</option>\n<option value='Textpattern'>Textpattern - .gitignore</option>\n<option value='TurboGears2'>TurboGears2 - .gitignore</option>\n<option value='Typo3'>Typo3 - .gitignore</option>\n<option value='Unity'>Unity - .gitignore</option>\n<option value='VisualStudio'>VisualStudio - .gitignore</option>\n<option value='Waf'>Waf - .gitignore</option>\n<option value='WordPress'>WordPress - .gitignore</option>\n<option value='Yii'>Yii - .gitignore</option>\n<option value='ZendFramework'>ZendFramework - .gitignore</option>\n<option value='Global/Archives'>Archives - .gitignore</option>\n<option value='Global/CVS'>CVS - .gitignore</option>\n<option value='Global/Eclipse'>Eclipse - .gitignore</option>\n<option value='Global/Emacs'>Emacs - .gitignore</option>\n<option value='Global/Espresso'>Espresso - .gitignore</option>\n<option value='Global/FlexBuilder'>FlexBuilder - .gitignore</option>\n<option value='Global/Linux'>Linux - .gitignore</option>\n<option value='Global/Matlab'>Matlab - .gitignore</option>\n<option value='Global/Mercurial'>Mercurial - .gitignore</option>\n<option value='Global/ModelSim'>ModelSim - .gitignore</option>\n<option value='Global/MonoDevelop'>MonoDevelop - .gitignore</option>\n<option value='Global/NetBeans'>NetBeans - .gitignore</option>\n<option value='Global/OSX'>OSX - .gitignore</option>\n<option value='Global/JetBrains'>JetBrains - .gitignore</option>\n<option value='Global/Redcar'>Redcar - .gitignore</option>\n<option value='Global/SASS'>SASS - .gitignore</option>\n<option value='Global/SBT'>SBT - .gitignore</option>\n<option value='Global/SublimeText'>SublimeText - .gitignore</option>\n<option value='Global/SVN'>SVN - .gitignore</option>\n<option value='Global/Tags'>Tags - .gitignore</option>\n<option value='Global/TextMate'>TextMate - .gitignore</option>\n<option value='Global/Vim'>Vim - .gitignore</option>\n<option value='Global/VirtualEnv'>VirtualEnv - .gitignore</option>\n<option value='Global/Windows'>Windows - .gitignore</option>\n<option value='Global/XilinxISE'>XilinxISE - .gitignore</option>\n"),
a.put("app/user/group_create.html",'<section ng-controller="MyGroupController">\n    <form class="ui form segment" ng-class="{loading:project_creating}">\n\n        <div class="field">\n            <div class="ui input">\n                <input type="text" ng-model="group.name" placeholder="群组名称">\n                <div class="ui red pointing above ui label" ng-if="msg.group_name_empty">{{msg.group_name_empty}}</div>\n            </div>\n        </div>\n\n        <div class="field">\n            <div class="ui input">\n                <input type="text" ng-model="group.description" placeholder="群组描述">\n                <div class="ui red pointing above ui label" ng-if="msg.group_description_empty">{{msg.group_description_empty}}</div>\n            </div>\n        </div>\n\n        <div>\n            <input type="submit" value="保存" class="ui small blue submit button" ng-click="createGroup(group);"/>\n        </div>\n\n    </form>\n</section>'),a.put("app/user/groups.html",'<style type="text/css">\n    #inner-menu a.item img.avatar{width:30px;height:30px;display: inline-block;margin-right: 10px;}\n    #group-activity{margin-left: 230px;}\n\n    #group-activity .dividing.header{margin-bottom: 20px;}\n    #group-activity .activity{padding:20px 0;position: relative;}\n    #group-activity .activity .logo{position: absolute;top:20px;}\n    #group-activity .activity .wrapper{padding-left:65px;font-size:14px;}\n    #group-activity .activity .wrapper .title{font-size:18px;margin-bottom: 5px;}\n    #group-activity .activity .wrapper .time{color:#999;}\n    #group-activity .activity .update{float:left;margin:10px 30px 5px 0;}\n\n    #group-activity .activity .update .content{margin-bottom:5px;border-radius:3px;width:145px;height:145px;border:1px solid #EFEEEA;box-shadow: 0 0 8px #EDECE8;overflow:hidden;}\n    #group-activity .activity .update .content:hover{box-shadow: 0 0 8px #42b3ff;cursor: pointer;}\n    #group-activity .activity .update .content.text{padding:20px 10px;width:125px;height:105px;line-height: 23px;}\n    #group-activity .activity .update .content.text .inner{height:100%;width:100%;overflow: hidden;}\n    #group-activity .activity .update .content.attachment{font-size:80px;text-align: center;line-height: 145px;}\n    #group-activity .activity .update .content.attachment i.icon{margin:0;}\n    #group-activity .activity .update .content img{height:100%;}\n    #group-activity .activity .update .author{margin-bottom: 3px;}\n    #group-activity .activity .update .action{font-size:12px;color:#999;}\n\n</style>\n<div class="ui secondary vertical fixed menu active" id="inner-menu">\n    <header class="header item">\n        我的群<a ng-href="/user/groups/create" id="create-group"><i class="add icon right"></i></a>\n    </header>\n    <a class="item" ng-repeat="group in groups.list" ng-href="{{group.group_path}}" target="_self">\n        <img class="ui tiny avatar image" src="https://dn-coding-net-production-static.qbox.me/static/5948a62ac58950a0e01e4117080d3028.png">{{group.name}}\n    </a>\n    <div class="sep"></div>\n</div>\n<div class="container" id="group-activity">\n    <div class="ui dividing header">群动态列表</div>\n    <div class="group activities">\n        <div class="activity">\n            <div class="logo">\n                <img class="ui circular image" width="40" height="40" src="https://dn-coding-net-production-static.qbox.me/static/5948a62ac58950a0e01e4117080d3028.png"/>\n            </div>\n            <div class="wrapper">\n                <div class="title">Coding</div>\n                <div class="time">最近更新 2014年4月16日</div>\n                <div class="updates clearfix">\n                    <div class="update">\n                        <div class="content text">\n                            <div class="inner">\n                                干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你\n                            </div>\n                        </div>\n                        <div class="author">曾沙</div>\n                        <div class="action">发起了讨论：xxxx</div>\n                    </div>\n                    <div class="update">\n                        <div class="content">\n                            <img src="https://dn-coding-net-production-static.qbox.me/static/d2ab4f6de747ad169160d3caaf82132e.png"/>\n                        </div>\n                        <div class="author">曾沙</div>\n                        <div class="action">上传了图片：2.jpg</div>\n                    </div>\n                    <div class="update">\n                        <div class="content">\n                            <img src="http://static.oschina.net/uploads/img/201404/10172712_BiQj.jpg"/>\n                        </div>\n                        <div class="author">曾沙</div>\n                        <div class="action">上传了图片：1.jpg</div>\n                    </div>\n                    <div class="update">\n                        <div class="content attachment">\n                            <i class="file icon"></i>\n                        </div>\n                        <div class="author">曾沙</div>\n                        <div class="action">上传了文件：1.doc</div>\n                    </div>\n                    <div class="update">\n                        <div class="content">\n                            <img src="http://static.oschina.net/uploads/img/201404/10172712_BiQj.jpg"/>\n                        </div>\n                        <div class="author">曾沙</div>\n                        <div class="action">上传了图片：1.jpg</div>\n                    </div>\n                    <div class="update">\n                        <div class="content attachment">\n                            <i class="file icon"></i>\n                        </div>\n                        <div class="author">曾沙</div>\n                        <div class="action">上传了文件：1.doc</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="activity">\n            <div class="logo">\n                <img class="ui circular image" width="40" height="40" src="https://dn-coding-net-production-static.qbox.me/static/d2ab4f6de747ad169160d3caaf82132e.png"/>\n            </div>\n            <div class="wrapper">\n                <div class="title">OSChina.NET</div>\n                <div class="time">最近更新 2014年4月16日</div>\n                <div class="updates clearfix">\n                    <div class="update">\n                        <div class="content">\n                            <img src="https://dn-coding-net-production-static.qbox.me/static/d2ab4f6de747ad169160d3caaf82132e.png"/>\n                        </div>\n                        <div class="author">曾沙</div>\n                        <div class="action">上传了图片：2.jpg</div>\n                    </div>\n                    <div class="update">\n                        <div class="content text">\n                            <div class="inner">\n                                干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你\n                            </div>\n                        </div>\n                        <div class="author">曾沙</div>\n                        <div class="action">发起了讨论：xxxx</div>\n                    </div>\n                    <div class="update">\n                        <div class="content">\n                            <img src="http://static.oschina.net/uploads/img/201404/10172712_BiQj.jpg"/>\n                        </div>\n                        <div class="author">曾沙</div>\n                        <div class="action">上传了图片：1.jpg</div>\n                    </div>\n                    <div class="update">\n                        <div class="content attachment">\n                            <i class="photo icon"></i>\n                        </div>\n                        <div class="author">曾沙</div>\n                        <div class="action">上传了文件：1.doc</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="activity">\n            <div class="logo">\n                <img class="ui circular image" width="40" height="40" src="https://dn-coding-net-production-static.qbox.me/static/5948a62ac58950a0e01e4117080d3028.png"/>\n            </div>\n            <div class="wrapper">\n                <div class="title">Coding</div>\n                <div class="time">最近更新 2014年4月16日</div>\n                <div class="updates clearfix">\n                    <div class="update">\n                        <div class="content text">\n                            <div class="inner">\n                                干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你干啥啊你\n                            </div>\n                        </div>\n                        <div class="author">曾沙</div>\n                        <div class="action">发起了讨论：xxxx</div>\n                    </div>\n                    <div class="update">\n                        <div class="content attachment">\n                            <i class="file icon"></i>\n                        </div>\n                        <div class="author">曾沙</div>\n                        <div class="action">上传了文件：1.doc</div>\n                    </div>\n                    <div class="update">\n                        <div class="content">\n                            <img src="https://dn-coding-net-production-static.qbox.me/static/d2ab4f6de747ad169160d3caaf82132e.png"/>\n                        </div>\n                        <div class="author">曾沙</div>\n                        <div class="action">上传了图片：2.jpg</div>\n                    </div>\n                    <div class="update">\n                        <div class="content">\n                            <img src="http://static.oschina.net/uploads/img/201404/10172712_BiQj.jpg"/>\n                        </div>\n                        <div class="author">曾沙</div>\n                        <div class="action">上传了图片：1.jpg</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("app/user/home.html",""),a.put("app/user/invite/invite_friend_modal.html",'<style type="text/css">\n    #invite-friend-modal .content textarea{height: 6em; min-height: 6em;}\n    #invite-friend-modal .content {\n        border-bottom-right-radius: 5px;\n        border-bottom-left-radius: 5px;\n    }\n    #invite-friend-modal .content .submit.field{text-align: center;}\n    #invite-friend-modal .content .invite-not-limited-field {\n        text-align: center;\n        padding-top: 1em;\n        border-top: 1px dashed #ddd;\n    }\n    #invite-friend-modal .content .invite-not-limited-field .input-wrapper {\n        display: inline-block;\n        vertical-align: middle;\n    }\n\n    #invite-friend-modal .content .invite-not-limited-field .input-wrapper .ui.action.input input {\n        width: 270px;\n    }\n\n    @media only screen and (max-width: 1280px) {\n        #invite-friend-modal .content .invite-not-limited-field .input-wrapper .ui.action.input input{\n            width: auto;\n        }\n    }\n</style>\n<div class="ui tiny40 modal" id="invite-friend-modal">\n    <i class="close icon"></i>\n    <div class="header">邀请好友</div>\n    <div class="content">\n        <div class="ui form">\n            <div class="field">\n                <div class="ui fluid medium input">\n                    <input type="text" placeholder="好友的 Email" ng-model="form.email" cg-enter="inviteFriend();">\n                </div>\n            </div>\n            <div class="field">\n                <textarea ng-model="form.content"></textarea>\n            </div>\n            <div class="field submit">\n                <a class="ui default green button" ng-click="inviteFriend();" href="javascript:void(0);">发送邀请邮件</a>\n            </div>\n        </div>\n        <div class="invite-not-limited-field">\n            <span>你的专属邀请链接</span>\n            <div class="input-wrapper">\n                <div class="ui action input">\n                    <input type="text" ng-value="invite_url" readonly="readonly" onclick="this.select();"/>\n                    <div class="ui right icon button" clip-copy="getCopy()" clip-click="doCopy()"\n                         data-position="top center"\n                         data-variation="inverted"\n                         data-html="复制链接"\n                         cg-popup>\n                        <i class="paste icon" ng-class="{\'green checkmark\': copied, \'paste\': !copied}" style="vertical-align: middle"></i>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("app/user/license.html","<option selected=\"selected\" value='no'>添加开源许可证</option>\n<option value='Apache v2 License'>Apache v2 License</option>\n<option value='MIT License'>MIT License</option>\n<option value='GPL v2'>GPL v2</option>\n<option value='Artistic License 2.0'>Artistic License 2.0</option>\n<option value='BSD 2-Clause License'>BSD 2-Clause License</option>\n<option value='Affero GPL'>Affero GPL</option>\n<option value='LGPL v2.1'>LGPL v2.1</option>\n<option value='BSD (3-Clause) License'>BSD (3-Clause) License</option>\n<option value='Eclipse Public License v1.0'>Eclipse Public License v1.0</option>\n<option value='LGPL v3'>LGPL v3</option>\n<option value='Mozilla Public License Version 2.0'>Mozilla Public License Version 2.0</option>\n<option value='GPL v3'>GPL v3</option>\n<option value='WTFPL'>WTFPL</option>\n<option value='Zlib'>Zlib</option>"),a.put("app/user/payment/weixin.html",'<div style="margin: 0 auto;width: 300px;" ng-show="qr">\n    <div ng-show="status == 0">\n        <div style="margin-top: 50px;">\n            <img ng-src="{{qr}}" alt="微信支付二维码" style="width: 300px">\n        </div>\n        <p style="font-size: 18px;margin-left: 20px;">请使用微信扫一扫 进行扫码支付</p>\n    </div>\n    <div ng-show="status == 1" style="margin-top: 100px; font-size: 25px; color: #32be77;">\n        <p>成功支付{{price}}元！</p>\n    </div>\n</div>'),a.put("app/user/project_create.html",'<style>\n.select2-container .select2-choice{\n  border: 1px solid #ddd;\n}\n.select2-container .select2-choice .select2-arrow{\n  border-left: 1px solid #ddd;\n}\n.select2-search input{\n  border: 1px solid #ddd;\n}\n.select2-drop{\n  border: 1px solid #ddd;\n}\n.coding .select2-container a:active, .coding .select2-container a:hover{\n  color: #222;\n}\n</style>\n<form id="project-create-form" class="ui form segment" ng-class="{loading:project_creating}">\n\n    <div class="ui red message" style="font-size:14px" ng-if="quotaOverflow" ng-switch="USER.vip">\n        <div ng-switch-when="1">\n            <i class="remove sign icon"></i>\n            您当前是普通会员，最多能创建 2 个私有项目。完善资料免费升级为银牌会员，可创建更多私有项目！\n            <a ng-href="/user/account/setting">马上升级</a>\n        </div>\n        <div ng-switch-when="2">\n            <i class="remove sign icon"></i>\n            您当前是银牌会员，最多能创建 5 个私有项目。想创建更多私有项目，请升级为金牌会员或钻石会员！\n            <a ng-href="/user/account/upgrade">马上升级</a>\n        </div>\n        <div ng-switch-when="3">\n            <i class="remove sign icon"></i>\n            您当前是金牌会员，最多能创建 100 个私有项目。升级为钻石会员可以创建无限个金私有项目！\n            <a ng-href="/user/account/upgrade?force=4">马上升级</a>\n        </div>\n    </div>\n\n    <div class="field">\n        <h1 class="ui dividing header">基础选项</h1>\n    </div>\n\n    <div class="field">\n        <div class="ui input">\n            <div cg-team-select selected="seniorForm.selectedOwner"></div>\n            <input type="text" ng-model="project.name" placeholder="项目名称" class="project-name">\n            <div class="ui red pointing above ui label" ng-if="msg.project_name_not_empty || msg.project_name_exists || msg.project_name_error">\n                {{msg.project_name_not_empty}}\n                {{msg.project_name_exists}}\n                {{msg.project_name_error}}\n            </div>\n        </div>\n    </div>\n\n    <div class="field">\n        <div class="ui input">\n            <textarea ng-model="project.description" placeholder="项目描述"></textarea>\n            <div class="ui red pointing above ui label" ng-if="msg.project_description_not_empty">{{msg.project_description_not_empty}}</div>\n        </div>\n    </div>\n\n    <div class="grouped inline fields" style="margin-bottom: 2em;">\n        <div class="field" style="margin: 1.2em 0;">\n            <div ng-init="project.type = 2">\n                <div class="ui radio checkbox" style="margin-right: 1em;">\n                    <input type="radio" name="type" value="2" ng-model="project.type" id="type2">\n                    <label for="type2" style="padding-left: 1.5em;">私有</label>\n                </div>\n                <div class="ui radio checkbox" style="margin-right: 1em;">\n                    <input type="radio" name="type" value="1" ng-model="project.type" ng-change="" id="type1" ng-disabled="seniorForm.selectedOwner.type == \'team\'">\n                    <label for="type1" style="padding-left: 1.5em;">公开</label>\n                </div>\n                <div id="project-create-form-tip" class="ui red horizontal label pointing left">项目创建后，无法修改此属性<br>\n                    <span ng-show="seniorForm.selectedOwner.type == \'team\'">团队项目目前只支持私有项目</span></div>\n                <i class="icon help tip" style="cursor: pointer;"\n                   data-html="<div class=\'content\'>公开项目是完全公开的，包括源码，项目讨论，质量控制等，只有项目成员可以编辑该项目，但任何用户都可以进行 fork，关注，收藏等操作。<br/>私有项目只对项目成员可见，并不会公开展示于项目成员的个人页面上。只有项目创建者才能添加项目成员，项目的所有内容和更新都只有项目上的成员可以进行操作和查看。<br/><a href=\'/help/faq/git/git.html\' target=\'_blank\'>更多帮助<i class=\'icon double angle right\'></i></a></div>"\n                   cg-help-popup=""\n                   ></i>\n            </div>\n            <div class="ui red pointing above ui label" ng-if="msg.project_type_error">{{msg.project_type_error}}</div>\n        </div>\n\n        <div style="margin:1em 0.8em; font-size:0.9em; color:rgba(0,0,0,.6)" ng-show="project.type == 2">项目仅对成员可见，拥有代码仓库，创建讨论，上传文件，任务管理等功能</div>\n        <div style="margin:1em 0.8em; font-size:0.9em; color:rgba(0,0,0,.6)" ng-show="project.type == 1">项目对所有访客可见，代码可以 fork，可以创建讨论，但是没有文件和任务功能</div>\n\n        <div class="ui tabular menu">\n            <a class="item" ng-class="{active: project.gitEnabled}" ng-click="project.gitEnabled = true;">\n                初始化仓库\n            </a>\n            <a class="item" ng-class="{active: !project.gitEnabled}"  ng-click="project.gitEnabled = false;">\n                导入仓库\n            </a>\n        </div>\n\n      <div ng-if="project.gitEnabled">\n        <div class="field" style="margin: 1.2em 0;">\n          <div>\n            <div class="ui checkbox">\n              <input type="checkbox"  ng-model="project.gitReadmeEnabled" id="git-readme-enabled"/>\n              <label for="git-readme-enabled">启用README.md文件初始化项目</label>\n            </div>\n          </div>\n        </div>\n        <select ui-select2="{width: \'280px\'}" ng-model="project.gitLicense" id="git-license-enabled" ng-include="\'app/user/license.html\'" ></select>\n        -\n         <select ui-select2="{width: \'280px\'}" ng-model="project.gitIgnore" id="git-ignore-enabled" ng-include="\'app/user/gitignore.html\'" ></select>\n      </div>\n      <div ng-if="!project.gitEnabled">\n          <div class="field">\n            <div class="ui radio checkbox" style="margin-right: 1em;">\n              <input id="git_vcs_type" type="radio" value="git" name="vcsType" ng-change="" ng-model="project.vcsType">\n              <label for="git_vcs_type" style="padding-left: 1.5em;">Git</label>\n            </div>\n\n            <div class="ui radio checkbox" style="margin-right: 1em;">\n              <input id="svn_vcs_type" type="radio" value="svn" ng-model="project.vcsType" name="vcsType">\n              <label for="svn_vcs_type" style="padding-left: 1.5em;">SVN/Subversion</label>\n            </div>\n\n            <div class="ui radio checkbox" style="margin-right: 1em;">\n                <input id="hg_vcs_type" type="radio" name="vcsType" ng-model="project.vcsType" value="hg" >\n                <label for="hg_vcs_type" style="padding-left: 1.5em;">Hg/Mercurial</label>\n            </div>\n\n\n                    <i class="icon help tip" style="cursor: pointer;"\n           data-html="<div class=\'content\'>Coding.net 支持用户在创建项目的时候，导入外部的公开仓库（不需要提供认证的）。目前支持 Git 、SVN、Hg 三种类型仓库的导入。注意：为防止滥用，我们对单个仓库的导入时间做了限制，另外导入过程中请不要 Push 到远程仓库，导入结果会发送相关通知告知您。</div>"\n           cg-help-popup=""\n                ></i>\n        </div>\n        <div class="field">\n            <div class="ui fluid input" style="display:block;margin-top:20px;">\n                <input type="text" ng-model="project.importFrom" placeholder="导入公开项目地址" style="padding: .65em 1em;" ng-change="checkUrl(project.importFrom)">\n            </div>\n        </div>\n      </div>\n    </div>\n\n    <!--新版新增项目-->\n    <div>\n        <div class="field senior-title">\n            <h1 class="ui dividing header cursor-pointer" ng-click="showMember = !showMember">添加成员</h1>\n            <i class="double angle up icon cursor-pointer" ng-click="showMember = false" ng-show="showMember == true"></i>\n            <i class="double angle down icon cursor-pointer" ng-click="showMember = true" ng-show="showMember == false"></i>\n        </div>\n        <div class="field" style="margin-bottom: 2em;" ng-show="showMember == false">\n            <p style="color: #777;" class="cursor-pointer" ng-click="showMember = !showMember" >点击添加成员</p>\n        </div>\n\n        <div ng-show="showMember == true" class="select-member-form">\n            <div class="content">\n                <div id="add-members">\n                    <div class="wrapper">\n                        <table width="100%">\n                            <tr>\n                                <td class="search-region">\n                                    <div class="ui medium fluid icon input">\n                                        <input type="text" ng-model="key" cg-timeout-input="loadFriend(key);"\n                                               placeholder="邮箱/手机/昵称/个性后缀"/>\n                                        <i class="search icon"></i>\n                                    </div>\n                                    <div class="member-folder">\n                                        <div class="ui secondary vertical menu active">\n                                            <a class="item" href="javascript:void(0);"\n                                               ng-class="{active: selectMenuIs(\'friend\')}"\n                                               ng-click="loadFriends();">\n                                                <i class="unhide icon"></i>我关注的人\n                                            </a>\n                                            <a class="item" href="javascript:void(0);"\n                                               ng-class="{active: selectMenuIs(\'follower\')}"\n                                               ng-click="loadFollowers();">\n                                                <i class="heart icon"></i>粉丝\n                                            </a>\n                                            <a class="item ellipsis" href="javascript:void(0);"\n                                               ng-repeat="project in projects"\n                                               ng-class="{active: selectMenuIs(\'member\', project.id)}"\n                                               ng-click="loadProjectMembers(project.id);">\n                                                <img class="ui image avatar24"\n                                                     ng-src="{{::project.icon}}"\n                                                     alt="{{::project.name}}"/>\n                                                <span>{{::project.name}}</span>\n                                            </a>\n                                            <a class="item" href="javascript:void(0);"\n                                               ng-if="loading_projects">\n                                                <i class="loading icon"></i>正在加载项目列表...\n                                            </a>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td class="select-region">\n                                    <div class="select-nothing" ng-if="loading">\n                                        <span class="words">\n                                            <i class="loading icon"></i>正在搜索好友...\n                                        </span>\n                                    </div>\n                                    <div class="select-users" ng-if="!loading && friends.length > 0">\n                                        <ul class="clearfix">\n                                            <li class="ellipsis" ng-repeat="friend in friends"\n                                                ng-click="selectFriend(friend);"\n                                                ng-class="::{\'is-member\': friend.is_member}"\n                                                title="{{::selectUserTitle(friend)}}">\n                                                <div class="ui corner label"\n                                                     ng-class="{\'green\': friend.selected && friend.global_key != USER.global_key}"\n                                                     ng-show="friend.is_member || friend.selected">\n                                                    <i class="checkmark icon"></i>\n                                                </div>\n                                                <img class="ui image avatar32" ng-src="{{::friend.avatar}}"/>\n                                                <span>{{::friend.name}}</span>\n                                            </li>\n                                        </ul>\n                                    </div>\n                                </td>\n                            </tr>\n                            <tr class="selected-region">\n                                <td class="selected-region" colspan="2">\n                                    <ul class="ui circular labels clearfix">\n                                        <li>已选成员： </li>\n                                        <li class="ui label">\n                                            <span>{{::USER.name}}</span>\n                                        </li>\n                                        <li class="ui green label" ng-repeat="friend in selected_users">\n                                            <span>{{::friend.name}}</span>\n                                            <i class="remove icon" title="取消选定" ng-if="friend.global_key != USER.global_key" ng-click="removeSelected(friend, $event);"></i>\n                                        </li>\n                                    </ul>\n                                </td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n            <div class="actions">\n                <div class="max-member">\n                    <span ng-if="member_size>0">你还可以添加 <span style="color:#32be77;" ng-bind="member_size || 0"></span> 个项目成员</span>\n                    <span ng-if="member_size<=0" class="max-member-warning" ng-bind="max_member_warning_info"></span>\n                    <span  class="max-member-warning" ng-if="selected_users.length - max_member + 1 > 0">超出了 <span style="color:#32be77;">{{ selected_users.length - max_member + 1 }}</span> 位人员，请移除。</span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div style="margin-top: 30px;">\n        <input type="submit" value="{{seniorForm.version == \'free\' ? \'创建项目\' : \'支付并创建项目\'}}" class="ui dark green submit medium button" ng-click="createProject(project);" ng-class="{disabled: project.type == 2 && quotaOverflow}"/>\n    </div>\n</form>\n<div class="ui modal account-charge-modal"\n     ng-controller="PasswordRequiredModalCtrl"\n     cg-modal="password_required_modal"\n     ng-include="\'app/project/setting/summary/modal/password_required_modal.html\'"></div>\n'),a.put("app/user/request_valid.html",'<style>\n    #request-valid-modal {width:40%;margin-left:-20%}\n    #request-valid-modal > .tips {text-align:center;margin: 16px 30px;color:#333;height: 60px;line-height: 32px;}\n    #request-valid-modal > .tips > span{display:block;}\n    #request-valid-modal > .content{border-bottom-left-radius:6px;border-bottom-right-radius:6px;text-align: center;padding-top:30px}\n    #request-valid-modal > .content > .ui.medium.left.labeled.icon.input{width:10em;}\n    #request-valid-modal > .content > img{height:36px;cursor: pointer;border-radius:3px;vertical-align:middle;}\n    #request-valid-modal > .content > .ui.medium.left.labeled.icon.input > input{border-radius:3px;}\n    #request-valid-modal > .content > .ui.medium.left.labeled.icon.input {display:inline-block;vertical-align:middle;}\n    #request-valid-modal > .content > img {margin:10px}\n</style>\n\n<div class="ui small modal coding-modal" id="request-valid-modal">\n    <i class="close icon"></i>\n    <div class="tips">\n        <span ng-show="type == POST_LIMIT || type == DEFAULT_LIMIT">亲，你操作这么快，不会是机器人吧？！</span>\n        <span ng-show="type == MESSAGE_LIMIT">亲，你们不是好友关系，不能直接发私信哦！</span>\n        <span ng-show="type == FOLLOW_LIMIT">亲，你已经超过每天正常关注限制！</span>\n        <span ng-show="type == INVITE_FRIEND_LIMIT">亲，你邀请的好友太多了！</span>\n        <span>来，输个验证码先！</span>\n    </div>\n    <div class="content">\n        <div class="ui medium left labeled icon input">\n            <i class="icon shield"></i>\n            <input placeholder="验证码" type="text" ng-model="j_captcha" cg-enter="doValid(j_captcha)"/>\n        </div>\n        <img ng-src="{{captcha}}" alt="验证码" title="看不清？点击换另一张" ng-click="refreshCaptcha()">\n        <div ng-show="type == POST_LIMIT || type == DEFAULT_LIMIT" class="ui medium green button" ng-click="doValid(j_captcha)">还真不是！</div>\n        <div ng-show="type == MESSAGE_LIMIT || type == FOLLOW_LIMIT || type == INVITE_FRIEND_LIMIT" class="ui medium green button" ng-click="doValid(j_captcha)">好的！</div>\n    </div>\n</div>\n'),a.put("app/user/send_bobble_modal.html",'<style>\n    #send-bobble-modal{width:46%;}\n    #send-bobble{border-bottom-left-radius:6px;border-bottom-right-radius:6px;}\n    #send-bobble-modal .ui.top.right.pointing.dropdown .menu{top:auto;bottom:160%;z-index:99;}\n    #send-bobble-modal .ui.top.right.pointing.emotion.box .menu:after{display:none;}\n    #send-bobble textarea{height:96px; max-height:96px;}\n    #send-bobble-modal .feed-editor .toolbar .topic .content {padding:0}\n</style>\n<div class="ui tiny40 modal coding-modal" id="send-bobble-modal">\n    <i class="close icon"></i>\n    <div class="header">冒个泡</div>\n    <div class="content" id="send-bobble">\n        <div cg-feed-editor="{{ bobble_editor_options.content }}" feed-context="#send-bobble-modal"\n             emoji-tabs-bottom="true">\n                <textarea cg-feed-editor-textarea\n                          ng-model="bobble_editor_options.content"\n                          cg-at-emoji\n                          cg-at-context\n                          at-context-type="\'tweet\'"\n                          at-item="-1"\n                          at-all="false"\n                          placeholder="{{placeholder}}"\n                          cg-textarea-editable\n                          msd-elastic="\\n">\n                </textarea>\n        </div>\n    </div>\n</div>\n'),a.put("app/user/send_message_modal.html",'<div class="ui small modal send-message coding-modal" id="send-message-modal">\n  <i class="close icon"></i>\n  <div class="header">\n    发送私信\n  </div>\n  <div class="content">\n    <div class="ui small form" ng-class="{\'error\': receiver_not_found}">\n      <div class="field" ng-class="{\'error\': user_empty}" ng-show="no_receiver">\n        <label>接收者</label>\n        <input placeholder="对方昵称，输入@可以补全" type="text"\n               ng-model="receiver"\n               cg-at-context\n               at-context-type="\'message\'"\n               at-item="-1"\n               at-all="false"\n               insert_without_symbol="true">\n      </div>\n      <div class="field">\n        <label ng-show="no_receiver">消息内容</label>\n        <label ng-show="!no_receiver" style="padding: 6px 0 6px 0;">发送给 <a ng-href="{{$root.send_msg_target.path}}" target="_blank">{{htmlToPlaintext($root.send_msg_target.name)}}</a></label>\n        <div cg-feed-editor="{{ feed_editor.content }}"\n             feed-context="#send-message-modal"\n             feed-editor-mode="message_editor_modal"\n             emoji-tabs-bottom="true">\n            <textarea class="send-message-text" placeholder="说点什么~"\n                      cg-feed-editor-textarea="getUserByName()"\n                      ng-model="feed_editor.content"\n                      cg-at-emoji\n                      cg-at-context\n                      at-context-type="\'message\'"\n                      at-item="-1"\n                      at-all="false"\n                      cg-textarea-editable\n                      msd-elastic="\\n">\n            </textarea>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="actions">\n      <div class="ui negative button">取消</div>\n      <div class="ui positive blue button" ng-click="getUserByName()" ng-if="!sending" style="width:109px">发送</div>\n      <div class="ui positive blue button" ng-if="sending"><i class="loading icon"></i>发送中</div>\n  </div>\n</div>\n'),
a.put("app/user/setting/email/reset_email_modal.html",'<i class="close icon"></i>\n<span class="title">修改邮箱</span>\n<div class="content">\n    <div class="ui warning message">\n        <strong>注意：</strong>\n        邮箱用于用户登录 Coding 和同步其项目代码，并接受与账户相关的通知等，修改邮箱，将导致之前的 git client 中记住的账号和密码无效。\n    </div>\n    <div class="ui medium left labeled icon input" style="margin:20px;">\n        <i class="icon mail" style="left:auto"></i>\n        <input type="text" style="width:18em" ng-model="form.email" cg-enter="resetEmail(form)" placeholder="输入新邮箱"/>\n    </div>\n</div>\n<div class="actions">\n    <a href="javascript:void(0)" class="gray"\n       ng-click="closeModal(reset_email_modal)"\n       style="margin-right: 10px;">取消</a>\n    <div id="reset-email-submit"\n       ng-click="resetEmail(form)"\n       class="ui approve dark gray default button">\n        <i class="icon loading" ng-if="reseting"></i>提交</div>\n</div>\n'),a.put("app/user/space/followers_and_friends.html",'<style type="text/css">\n    #add-friend{\n        float:right;\n    }\n\n    #relationship{\n        position: relative;\n    }\n\n    #relationship > .header.dividing{\n        margin-bottom: 20px;\n    }\n\n    #relationship .friend{\n        height: 84px;\n        width: 292px;\n        display: inline-block;\n        background-color: #fff;\n        border-bottom: 1px solid;\n        border-color: #f2f2f2;\n        margin: 0 14px 20px 0px;\n        vertical-align: top;\n    }\n\n    #relationship .friend .avatar{\n        float: left;\n    }\n\n    #relationship .friend .info {\n        margin-left: 12px\n    }\n\n    #relationship .friend .join-in-at{\n        font-size: 12px;\n        color:#999;\n        display: inline-block;\n        width: 200px;\n    }\n\n    #relationship .friend .info,\n    #relationship .friend .action{\n        padding-left:60px;\n    }\n\n    #relationship .friend .info .email{\n        font-size:14px;\n        margin-left:5px;\n    }\n\n    #relationship .friend .action{\n        font-size:12px;\n    }\n\n    #relationship .friend .action > .button{\n        margin-right:10px;\n    }\n\n    #relationship .friend .action i.icon{\n        margin-right:0;\n    }\n    #relationship .ui.button.small{\n        padding: 0 1em;\n        margin-left: 6px;\n    }\n    #relationship .friends .friend .user-followed {\n        font-size:12px;\n        margin-left: 10px;\n        display: inline-block;\n    }\n    #relation_header_title {\n        margin: 0 0 30px 0;\n        font-size:18px;\n        color:#333\n    }\n\n</style>\n<div ng-bind="relation_header_title" id="relation_header_title">{{relation_header_title}}</div>\n<div class="friends">\n    <div class="friend" ng-repeat="user in follower_list" ng-if="follower_list.length>0 && !follower_loading" ng-switch="inner_menu">\n        <div class="avatar">\n            <a ng-href="{{::user.path}}">\n                <img class="ui circular image avatar64" ng-src="{{::user.avatar}}"/>\n            </a>\n        </div>\n        <div class="info">\n            <div style="max-width: 160px; float:left" class="ellipsis">\n                <a ng-href="{{::user.path}}"\n                   title="{{::user.name}}"><span>{{user.name}}</span></a>\n            </div>\n            <span class="join-in-at">\n                <i class="time icon" style="margin:0"></i>\n                <span class="created-time" cg-friendly-time="user.created_at"></span>\n                加入\n            </span>\n        </div>\n        <div ng-if="!user.followed && USER && USER.global_key != user.global_key && !user.open_following && !open_following" ng-click="open_follow(user)" class="ui small white button" style="margin-left: 6px"><span>+关注</span></div>\n        <div ng-if="!user.followed && USER && USER.global_key != user.global_key && !user.open_following && open_following" class="ui small white button" style="margin-left: 6px"><span>+关注</span></div>\n        <div ng-if="!user.followed && USER && USER.global_key != user.global_key && user.open_following" class="ui small white button" style="margin-left: 6px">\n            <i class="icon" ng-class="{loading: user.open_following}" click="return false;"></i>\n        </div>\n        <span class="user-followed" ng-if="user.followed && user.follow && USER">\n            <i class="green exchange icon"></i>相互关注\n        </span>\n        <span class="user-followed" ng-if="user.followed && !user.follow && USER">\n            <i class="blue checkmark icon"></i>已关注\n        </span>\n    </div>\n    <div class="empty center list" ng-if="follower_loading">\n        <i class="loading icon"></i>正在加载数据...\n    </div>\n    <div class="empty center list" ng-if="inner_menu == \'follower\' && !follower_loading && !follower_list.length>0">\n        尚未有任何人关注TA\n    </div>\n    <div class="empty center list" ng-if="inner_menu === \'friend\' && !follower_loading && !follower_list.length>0">\n        TA尚未关注任何人\n    </div>\n    <div cg-pager="{{pager_id}}" class="center"></div>\n</div>\n'),a.put("app/user/space/left_column.html",'<style>\n    #inner_tags .tag {\n        display:inline-block;\n        background: #d8d8d8;\n        padding: 4px;\n        color: #d8f3e7;\n        opacity: 0.8;\n        border-radius: 4px;\n        margin: 0px 4px 6px 0px;\n        line-height: 18px;\n    }\n    #inner_tags .tag:hover{\n        background: rgba(50, 190, 119, 0.8);\n    }\n    #inner_tags .tag:hover a{\n        color: #ddf7e5;\n    }\n</style>\n\n<div>\n    <a ng-href="/u/{{user.global_key}}"><img class="circular ui image user-avatar avatar208" ng-src="{{user.lavatar}}"></a>\n</div>\n<div class="ui coding aligned center user-name">\n    {{user.name}}\n</div>\n<div class="ui coding aligned center user-slogan" ng-bind-html="user.slogan">\n</div>\n<div class="ui coding aligned center">\n    <a class="ui down green small button" ng-click="follow(user)"\n       ng-if="USER && !user.followed && user.global_key != USER.global_key && !following">关注</a>\n    <a class="ui down small gray button" ng-click="unfollow(user)"\n       ng-if="USER && user.followed && user.global_key != USER.global_key && !following">取消关注</a>\n    <a class="ui down green small button"\n       ng-if="USER && !user.followed && user.global_key != USER.global_key && following" style="width:60px"><i\n            class="icon" ng-class="{loading: following}" click="return false;" style="margin-right:0px"></i></a>\n    <a class="ui down small gray button"\n       ng-if="USER && user.followed && user.global_key != USER.global_key && following" style="width:84px"><i\n            class="icon" ng-class="{loading: following}" click="return false;" style="margin-right:0px"></i></a>\n    <a class="ui down black small button" ng-click="showSendMsgDialog(user)"\n       ng-if="USER && user.global_key != USER.global_key">给TA私信</a>\n</div>\n<div class="ui divider"></div>\n<div class="ui coding aligned center">\n    <p>\n        <a href="javascript:void(0)" class="gray" ng-if="user.global_key != \'coding\'" ng-href="/u/{{user.global_key}}/friends"><span class="number">{{user.follows_count | friendlyNumber}} </span>关注 /</a>\n        <a href="javascript:void(0)" class="gray" ng-if="user.global_key != \'coding\'" ng-href="/u/{{user.global_key}}/followers"><span class="number">{{user.fans_count | friendlyNumber}}</span> 粉丝</a>\n        <a href="javascript:void(0)" class="gray" ng-if="user.global_key == \'coding\'"><span class="number">{{user.follows_count | friendlyNumber}} </span>关注 /</a>\n        <a href="javascript:void(0)" class="gray" ng-if="user.global_key == \'coding\'"><span class="number">{{user.fans_count | friendlyNumber}}</span> 粉丝</a>\n    </p>\n</div>\n\n<div class="ui divider"></div>\n\n<div class="user-created-at">\n    加入时间：<span class="created-time" cg-friendly-time="user.created_at" cg-friendly-time-format="YYYY-MM-DD"></span>\n</div>\n<div class="user-created-at">\n    最后活动：<span class="created-time" cg-friendly-time="user.last_activity_at"></span>\n</div>\n<div class="user-global-key">\n    个性后缀：{{user.global_key}}\n</div>\n<div class="ui divider"></div>\n<div class="clearfix"></div>\n\n<div class="user-more-info">\n    <!--<div class="info-item">\n        <div>昵称：{{user.name}}</div>\n        <div class="ui divider"></div>\n    </div>-->\n    <div class="info-item" ng-if="user.sex == 0 || user.sex == 1">\n        <div>性别：{{user.sex == 0 ? \'男\' : \'女\'}}</div>\n        <div class="ui divider"></div>\n    </div>\n    <div class="info-item" ng-if="user.company">\n        <div>公司：{{user.company}}</div>\n        <div class="ui divider"></div>\n    </div>\n    <div class="info-item" ng-if="user.job_str">\n        <div>工作：{{user.job_str}}</div>\n        <div class="ui divider"></div>\n    </div>\n    <div class="info-item" ng-if="user.location">\n        <div>地区：{{user.location}}</div>\n        <div class="ui divider"></div>\n    </div>\n    <div class="info-item" ng-if="user.tags_str">\n        <div id="inner_tags">\n            <div style="display:inline-block">个人标签：</div>\n            <div class="tag" ng-repeat="tag in tags track by $index"><a class="gray" href="javascript:void(0)" ng-href="/tags/search/{{tag}}"><span>{{tag}}</span></a></div>\n        </div>\n        <div class="ui divider"></div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/CommitLineNote.html",'<div class="activity" ng-if="activity">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{tweet.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular comment icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <div>\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                {{activity.action_msg}} 项目 <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a> 的\n                <span ng-switch="activity.line_note.noteable_type">\n                    <span ng-switch-when="Commit">提交</span>\n                    <span ng-switch-when="MergeRequestBean">Merge Request</span>\n                    <span ng-switch-when="PullRequestBean">Pull Request</span>\n                </span>\n                <a ng-href="{{activity.line_note.noteable_url}}">{{activity.line_note.noteable_title | limitTo: 30}}</a>\n                <div ng-if="activity.action == \'comment\'" ng-bind-html="activity.line_note.content | limitTo: 100"></div>\n            </div>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/Depot.html",'<div class="activity" ng-if="activity">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{tweet.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular coding project icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <div>\n                <span ng-if="activity.action === \'push\'">\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    {{activity.action_msg}} 项目[\n                    <a ng-href="{{activity.depot.path}}">{{activity.depot.name}}</a>\n                    ]\n                    <span ng-if="activity.ref_type === \'branch\'">分支</span>\n                    <span ng-if="activity.ref_type === \'tag\'">标签</span>\n                    :\n                    <a ng-if="activity.push_type != \'delete\'" ng-href="{{activity.ref_path}}">{{activity.ref | encodeUri}}</a>\n                    <span ng-if="activity.push_type === \'delete\'">{{activity.ref}} [{{activity.old_sha | shortCommitId}}]</span>\n                </span>\n                \n                <span ng-if="activity.action === \'push_all\'">\n                    {{ activity.action_msg }}\n                    <span ng-repeat="msg in activity.messages">\n                        <a href="{{ msg.ref_path }}" ng-bind="msg.ref"></a>\n                        <span ng-if="!$last">,</span>\n                    </span>\n                </span>\n\n                <div class="more-info">\n                    <p ng-repeat="commit in activity.commits">\n                        <a ng-href="{{commit.committer.link}}">\n                        {{commit.committer.name}}\n                        </a>\n                        :\n                        <a ng-href="{{activity.depot.path}}/commit/{{commit.sha}}" class="commit-sha">\n                            <code>[{{commit.sha.substring(0,7)}}]</code>\n                        </a>\n                        <a ng-href="{{activity.depot.path}}/commit/{{commit.sha}}" class="commit-message">\n                            {{commit.short_message}}\n                        </a>\n                    </p>\n                </div>\n\n                <span ng-if="activity.action === \'fork\'">\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    {{activity.action_msg}}项目\n                    <a ng-href="{{activity.source_depot.path}}">{{activity.source_depot.name}}</a>\n                    到\n                    <a ng-href="{{activity.depot.path}}">{{activity.depot.name}}</a>\n                </span>\n            </div>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/Empty.html","{{activity.target_type}} type need to be resolved"),a.put("common/directives/activities/tpl/MergeRequestBean.html",'<div class="activity" ng-if="activity">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{tweet.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular fork code icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <div>\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                <span>{{activity.action_msg}}</span>\n                项目\n                <a ng-href="{{activity.depot.path}}">{{activity.depot.name}}</a>\n                中的 Merge request:\n                <a ng-href="{{activity.merge_request_path}}">{{activity.merge_request_title}}</a>\n            </div>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/MergeRequestComment.html",'<div class="activity" ng-if="activity">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{tweet.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular comment icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <div>\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                <span>评论了项目</span>\n                <a ng-href="{{activity.depot.path}}">{{activity.depot.name}}</a>\n                的 Merge Request\n                <a ng-href="{{activity.pull_request_path}}">{{activity.pull_request_title}}</a>\n                :\n                {{activity.comment_content}}\n            </div>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/Project.html",'<div class="activity"  ng-if="activity && activity.project">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{tweet.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular coding project icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <div ng-switch="activity.action">\n                <span ng-switch-when="create">\n                    <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    创建了新项目\n                    <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                </span>\n                <span ng-switch-when="update">\n                    <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    更新了项目信息\n                    <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                </span>\n                <span ng-switch-when="delete">\n                    <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    删除了项目\n                    {{activity.project.full_name}}</span>\n                <span ng-switch-when="transfer">\n                    <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    转让了项目\n                    <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                </span>\n                <span ng-switch-when="transferToTeam">\n                    <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    转让了项目\n                    <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                    给\n                    <span ng-bind="activity.target_team.name"></span>\n                </span>\n                <span ng-switch-when="archive">\n                    <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    归档了项目\n                    <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                </span>\n                <span ng-switch-when="unarchive">\n                    <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    取消归档了项目\n                    <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                </span>\n            </div>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/ProjectFile.html",'<div class="activity" ng-if="activity && activity.file">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{tweet.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular file icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <div>\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                在项目\n                <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                <span>{{activity.action_msg}}</span>\n                <span ng-if="activity.type == \'file\'">文件</span>\n                <span ng-if="activity.type == \'dir\'">文件夹</span>\n                <div ng-repeat="file in activity.files" style="margin: 10px;">\n                    <a ng-href="{{file.path}}">{{file.name}}</a>\n                </div>\n            </div>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/ProjectFileComment.html",'<div class="activity" ng-if="activity && activity.projectFile">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{tweet.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular tasks icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n            评论了项目\n            <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n            中\n            <a ng-href="{{activity.projectFile.owner.path}}">{{activity.projectFile.owner.name}}</a>\n            的文件\n            <a ng-href="{{activity.projectFile.path}}">{{activity.projectFile.title}}</a>\n            :\n            <span ng-bind-html="commentToText(activity.projectFileComment.content)"></span>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/ProjectMember.html",'<div class="activity"  ng-if="activity && activity.target_user">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{activity.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular user icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <div>\n                <span ng-if="activity.action == \'add\'">\n                    <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    在\n                    <a ng-href="{{activity.project.path}}">{{activity.project.name}}</a>\n                    项目中添加了成员:\n                    <div ng-repeat="target_user in activity.target_users" style="margin: 10px;">\n                        <a ng-href="{{target_user.path}}">{{target_user.name}}</a>\n                    </div>\n                </span>\n                <span ng-if="activity.action == \'remove\'">\n                    <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    <a ng-href="{{activity.project.path}}">{{activity.project.name}}</a>\n                    移除了成员:\n                    <div ng-repeat="target_user in activity.target_users" style="margin: 10px;">\n                        <a ng-href="{{target_user.path}}">{{target_user.name}}</a>\n                    </div>\n                </span>\n            </div>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/ProjectStar.html",'<div class="activity"  ng-if="activity && activity.project">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{activity.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular star icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <div>\n                <span>\n                    <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    收藏了项目\n                    <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                </span>\n            </div>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/ProjectTopic.html",'<div class="activity" ng-if="activity && activity.project_topic">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{tweet.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular comment icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <div style="line-height: 20px;">\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                在项目\n                <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                <span ng-if="activity.action == \'create\' || activity.action == \'update\' || activity.action == \'delete\'">\n                    <span>{{activity.action_msg}}</span>\n                    讨论\n                    <a ng-href="{{activity.project_topic.path}}">{{activity.project_topic.title}}</a>\n                </span>\n                <span ng-if="activity.action == \'comment\'">\n                    <span>{{activity.action_msg}}</span>\n                    讨论\n                    <a ng-href="{{activity.project_topic.parent.path}}">{{activity.project_topic.parent.title}}</a>：\n                </span>\n\n                <div ng-if="activity.action == \'comment\'" ng-bind-html="commentToText(activity.project_topic.content)">\n                </div>\n\n                <span ng-if="activity.action === \'add_watcher\' || activity.action === \'remove_watcher\'">\n                    {{activity.action === \'add_watcher\' ? \'添加了讨论\' : \'删除了讨论\'}}\n                    <a ng-href="{{activity.project_topic.path}}">{{activity.project_topic.title}}</a>\n                    的关注者\n                    <div ng-repeat="watcher in activity.watchers" style="margin: 10px;">\n                        <a ng-href="watcher.path">{{watcher.name}}</a>\n                    </div>\n                </span>\n            </div>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/ProjectWatcher.html",'<div class="activity"  ng-if="activity">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{activity.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular unhide icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <div>\n                <span>\n                    <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                    关注了项目\n                    <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                </span>\n            </div>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/PullRequestBean.html",'<div class="activity" ng-if="activity">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{tweet.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular fork code icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <div>\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                <span>{{activity.action_msg}}</span>\n                项目\n                <a ng-href="{{activity.depot.path}}">{{activity.depot.name}}</a>\n                中的pull request:\n                <a ng-href="{{activity.pull_request_path}}">{{activity.pull_request_title}}</a>\n            </div>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/PullRequestComment.html",'<div class="activity" ng-if="activity">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{tweet.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular comment icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <div>\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                <span>评论了项目</span>\n                <a ng-href="{{activity.depot.path}}">{{activity.depot.name}}</a>\n                的 Pull Request\n                <a ng-href="{{activity.pull_request_path}}">{{activity.pull_request_title}}</a>\n                :\n                {{activity.comment_content}}\n            </div>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/QcTask.html",'<div class="activity" ng-if="activity">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{tweet.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular tasks icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <div ng-if="activity.action == \'create\'">\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                <span>{{activity.action_msg}}</span>\n                项目\n                <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n\n                的质量分析任务:\n                [<span cg-bind-html="activity.qc_task.link"></span>]\n            </div>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),
a.put("common/directives/activities/tpl/Task.html",'<div class="activity" ng-if="activity && activity.task">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{tweet.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular tasks icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <div ng-if="activity.action !== \'reassign\' &&\n                        activity.action !== \'update_priority\' &&\n                        activity.action !== \'update_deadline\' &&\n                        activity.action !== \'update_description\' &&\n                        activity.action !== \'commit_refer\' &&\n                        activity.action !== \'update_label\' &&\n                        activity.action !== \'add_watcher\' &&\n                        activity.action !== \'remove_watcher\'">\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                <span>{{activity.action_msg}}</span>\n                项目\n                <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                中\n                <a ng-href="{{activity.task.owner.path}}">{{activity.task.owner.name}}</a>\n                的任务:\n                <a ng-href="{{activity.task.path}}" >{{activity.task.title}}</a>\n            </div>\n            <div ng-if="activity.action === \'reassign\'">\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                <span>重新指派了</span>\n                项目\n                <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                <span ng-if="activity.origin_task.owner">\n                    中\n                    <a ng-href="{{activity.origin_task.owner.path}}">{{activity.origin_task.owner.name}}</a>\n                </span>\n                的任务给\n                <a ng-href="{{activity.task.owner.path}}">{{activity.task.owner.name}}</a>\n                :\n                <a ng-href="{{activity.task.path}}">{{activity.task.title}}</a>\n            </div>\n            <div ng-if="activity.action === \'update_priority\'">\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                更新了\n                项目\n                <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                中任务的优先级:\n                <span ng-bind="\'[\' + priorities[activity.task.priority] + \']\'"></span>\n                <a ng-href="{{activity.task.path}}">{{activity.task.title}}</a>\n            </div>\n            <div ng-if="activity.action === \'update_deadline\'">\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                更新了项目\n                <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                中任务的截止日期:\n                <span ng-bind="parseDeadline(activity.task.deadline)"></span>\n                <a ng-href="{{activity.task.path}}">{{activity.task.title}}</a>\n            </div>\n            <div ng-if="activity.action === \'update_description\'">\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                更新了项目\n                <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                中任务的描述:\n                <a ng-href="{{activity.task.path}}" ng-bind-html="commentToText(activity.task.description)"></a>\n            </div>\n            <div ng-if="activity.action === \'commit_refer\'">\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                在项目\n                <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                中提交了代码\n                <a ng-href="{{commitLink(activity)}}">{{activity.commit.sha | shortCommitId:7}}</a>\n                提到了任务\n                <a ng-href="{{activity.task.path}}">{{activity.task.title}}</a>\n            </div>\n            <div ng-if="activity.action === \'update_label\'">\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                更新了项目\n                <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n                中任务的标签:\n                <a ng-href="{{activity.task.path}}" ng-bind-html="commentToText(activity.task.description)"></a>\n            </div>\n            <div ng-if="activity.action === \'add_watcher\' || activity.action === \'remove_watcher\'">\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                在任务\n                <a ng-href="{{activity.task.path}}">{{activity.task.title}}</a>\n                {{activity.action === \'add_watcher\' ? \'添加了关注者\' : \'删除了关注者\'}}\n                <div ng-repeat="watcher in activity.watchers" style="margin: 10px;">\n                    <a ng-href="{{watcher.path}}">{{watcher.name}}</a>\n                </div>\n            </div>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/TaskComment.html",'<div class="activity" ng-if="activity && activity.task">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{tweet.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular tasks icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n            评论了项目\n            <a ng-href="{{activity.project.path}}">{{activity.project.full_name}}</a>\n            中\n            <a ng-href="{{activity.task.owner.path}}">{{activity.task.owner.name}}</a>\n            的任务\n            <a ng-href="{{activity.task.path}}">{{activity.task.title}}</a>\n            :\n            <span ng-bind-html="commentToText(activity.taskComment.content)"></span>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/Tweet.html",'<div class="activity" ng-if="activity && activity.tweet && activity.show_icon">\n    <div class="activity-icon">\n        <i class="circular coding bubble icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;" ng-init="tweet_content = restyleEmoji(activity.tweet.content)">\n            <div style="margin-bottom:15px;">\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                <span>冒了个泡</span>\n            </div>\n            <div class="markdown content bubble"  clip-copy-code="pre" cg-fancy-overflow cg-highlight="tweet_content"></div>\n        </div>\n        <div class="toolbar" style="margin-top:15px;">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n            <span>\n                <a ng-href="{{activity.tweet.path}}">查看详情>></a>\n            </span>\n        </div>\n    </div>\n</div>\n\n<div class="activity tweet-item clearfix"  ng-if="activity && activity.tweet && !activity.show_icon">\n    <div class="user-avatar">\n       <a ng-href="{{activity.user.path}}"><img ng-src="{{activity.user.avatar}}" class="ui avatar image"/></a>\n    </div>\n    <div class="tweet-content">\n        <div class="tweet-detail">\n            <div class="markdown content bubble"  clip-copy-code="pre" cg-fancy-overflow cg-highlight="activity.tweet.content" enable-Sce="true"></div>\n            <div class="author-time">\n                <span><a ng-href="{{activity.user.path}}">{{activity.user.name}}</a></span>\n                &nbsp;&nbsp;\n                <i class="icon time" style="margin:0px 0px;"></i>\n                <a class="gray" ng-href="{{activity.tweet.path}}">\n                    <span class="created-time" cg-friendly-time="activity.created_at"></span>\n                </a>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/TweetComment.html",'<div class="activity" ng-if="activity && activity.tweet">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{tweet.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular comment icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <div>\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                <span>评论了</span>\n                <a ng-href="{{activity.tweet.owner.path}}">{{activity.tweet.owner.name}}</a>\n                的泡泡\n                <a ng-href="{{activity.tweet.path}}">{{activity.tweet.content | htmlToPlainText | limitTo: 100}}</a>\n            </div>\n            <div class="more-info">\n                <p ng-bind-html="activity.content"></p>\n            </div>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/UserFollow.html",'<div class="activity" ng-if="activity && activity.target_user">\n    <div class="avatar" ng-if="!activity.show_icon">\n        <a ng-href="{{activity.user.path}}">\n            <img class="ui avatar image" ng-src="{{activity.user.avatar}}" title="{{tweet.user.name}}"/>\n        </a>\n    </div>\n    <div class="activity-icon" ng-if="activity.show_icon">\n        <i class="circular unhide icon"></i>\n    </div>\n    <div class="inner">\n        <div class="content {{activity.target_type}}_{{activity.action}}" style="font-size:14px;">\n            <div>\n                <a ng-href="{{activity.user.path}}">{{activity.user.name}}</a>\n                <span>{{activity.action_msg}}</span>\n                用户\n                <a ng-href="{{activity.target_user.path}}">{{activity.target_user.name}}</a>\n            </div>\n        </div>\n        <div class="toolbar">\n            <span class="time">\n                <i class="time icon"></i><span cg-friendly-time="activity.created_at"></span>\n            </span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/activities/tpl/activities.html",'<div class="activities_flow" ng-repeat="activity in activities track by $index" cg-activity="{{activity.target_type}}">\n</div>'),a.put("common/directives/ad/tpl/ad.html",'<div class="ad-banner" id="{{::ad.code}}" ng-if="ad.status === 1">\n    <a target="_blank"\n       ng-href="{{::ad.link}}"\n       title="{{::ad.title}}">\n        <img alt="{{::ad.title}}"\n             ng-src="{{::ad.image}}"\n             width="{{::width}}"\n             height="{{::height}}"\n        />\n    </a>\n</div>'),a.put("common/directives/ad/tpl/multi-ad.html",'<div class="multi-ad-container" style="overflow: hidden">\n    <div class="multi-ad-banner" ng-repeat="ad in ads" id="{{::ad.code}}" ng-if="ad.status === 1">\n        <a target="_blank"\n           ng-href="{{::ad.link}}"\n           title="{{::ad.title}}">\n            <img alt="{{::ad.title}}" class="multi-ad-image"\n                ng-src="{{::ad.image}}"\n                width="{{::width}}"\n                height="{{::height}}"\n            />\n        </a>\n    </div>\n</div>'),a.put("common/directives/attachment/comments/tpl/action.detail.html",'<div class="icon" ng-class="::activity.action">\n    <i class="icon" ng-class="::actionIconClass()"></i>\n</div>\n<div class="detail">\n    <a class="gray" ng-href="{{::activity.user.path}}">\n        <span>{{::activity.user.name}}</span>\n    </a>\n'+"    <span>{{::(actionMsg()+(activity.action !== 'rename' ? ' ' : '为：'))}}</span>\n    <a ng-if=\"::('update_file' === activity.action || activity.action === 'rename' || activity.action === 'upload_file' || activity.action === 'create') && activity.version\"\n       ng-click=\"downloadHistory(activity.history_id)\" href=\"javascript:void(0);\">\n        <span class=\"file-name\">{{::(activity.action !== 'rename' ? activity.file.name : activity.new_name)}}</span>\n        <span ng-if=\"::('update_file' === activity.action || activity.action === 'rename' || activity.action === 'upload_file' || activity.action === 'create') && activity.version\">{{::('  V' + activity.version)}}</span>\n    </a>\n    <span ng-if=\"::!(activity.action === 'upload_file' && activity.version)\">\n    <span class=\"file-version\" ng-if=\"::activity.action === 'delete_history' && activity.version\">{{::('V' + activity.version)}}</span>\n    <span class=\"file-name\"\n          ng-if=\"::activity.action === 'create' && !activity.version\">{{::activity.file.name}}</span>\n    </span>\n    -\n    <span cg-friendly-time=\"activity.created_at\"></span>\n</div>"),a.put("common/directives/attachment/comments/tpl/action.modal.html",'<div class="icon" ng-class="::activity.action">\n    <i class="icon" ng-class="::actionIconClass()"></i>\n</div>\n<div class="detail">\n    <a class="gray username ellipsis" href="javascript:void(0)" ng-click="toSpace(activity.user.path)">\n        <span>{{::activity.user.name}}</span>\n    </a>\n    <span>{{::actionMsg()}}</span>\n    <a ng-if="::(activity.action === \'update_file\' || activity.action === \'upload_file\' || activity.action === \'rename\' || activity.action === \'create\') && activity.version && activity.history_id" href="javascript:void(0)" ng-click="downloadHistory(activity.history_id)">\n    <span>{{::(\'V\' + activity.version)}}</span>\n    <span class="file-name"\n          ng-if="::activity.action === \'create\' && activity.version">{{::activity.file.name}}</span>\n    </a>\n    <span ng-if="::activity.action === \'delete_history\' && activity.version"\n         >{{::(\'V\' + activity.version)}}</span>\n    <span class="file-name"\n          ng-if="::!(activity.action === \'create\' && activity.version && activity.history_id)"\n         >{{::activity.file.name}}</span>\n    <span class="time" cg-friendly-time="activity.created_at"></span>\n</div>\n'),a.put("common/directives/attachment/comments/tpl/activity.html","<div ng-class=\"::activityClass()\" id=\"{{::('c' + activity.id)}}\"\n    ng-include=\"'common/directives/attachment/comments/tpl/' + resolveType() + getView() + '.html'\">\n</div>"),a.put("common/directives/attachment/comments/tpl/comment.detail.html",'<a class="avatar" ng-href="::activity.user.path">\n    <img class="ui avatar42 image" width="36px" height="36px" ng-src="{{::activity.projectFileComment.owner.avatar}}"/>\n</a>\n<div class="detail">\n    <div class="markdown content" clip-copy-code="pre" cg-highlight="activity.projectFileComment.content"></div>\n    <div cg-gallery="activity.projectFileComment.content"></div>\n    <div class="created-time">\n        <span class="mr10">{{::activity.user.name}}</span>\n        <span class="mr10">\n            <i class="time icon"></i>\n            <span cg-friendly-time="activity.created_at"></span>\n        </span>\n        <span class="mr10 comment">\n            <a href="javascript:void(0)" ng-click="atPerson(activity.projectFileComment)">\n                <i class="edit icon"></i>回复\n            </a>\n        </span>\n        <span class="mr10 remove" ng-if="::canRemove(activity.projectFileComment.owner, $root.USER)">\n            <a href="javascript:void(0)" ng-click="doRemove()">\n                <i class="remove icon"></i>删除\n            </a>\n        </span>\n    </div>\n</div>'),a.put("common/directives/attachment/comments/tpl/comment.modal.html",'<a class="avatar" ng-click="toSpace(activity.user.path)" style="cursor: pointer">\n    <img class="ui avatar24 image" ng-src="{{::activity.projectFileComment.owner.avatar}}"/>\n</a>\n<div class="detail" style="margin-bottom: 10px;">\n    <span class="comment-username">{{::activity.user.name}}</span>\n    <span class="created-time" cg-friendly-time="activity.created_at"></span>\n    <span class="actions">\n        <a href="javascript:void(0)" ng-click="atPerson(activity.projectFileComment)">回复</a>\n        <a href="javascript:void(0)" ng-if="::canRemove(activity.projectFileComment.owner, $root.USER)"\n           ng-click="doRemove()">删除</a>\n    </span>\n    <div class="markdown content"  clip-copy-code="pre" cg-highlight="activity.projectFileComment.content"></div>\n</div>'),a.put("common/directives/attachment/fileActivities/tpl/activities.detail.html",'<div>\n    <div class="project-file-detail-activity">\n        <div class="project-file-activity"\n            ng-repeat="activity in activities"\n            cg-project-file-comment-activity="activity"\n            cg-project-file-comment-project-id="project.id"\n            cg-project-file-comment-file-id="file_id"\n            cg-project-file-comment-view="view"\n            on-remove="onRemove">\n        </div>\n    </div>\n    <div class="loading" style="text-align: center;font-size:12px;color:#999;margin-bottom:10px;" ng-if="!activities.length > 0"><i class="icon loading"></i>加载中...</div>\n    <div class="project-file-comment-creator" id="project-file-comment-creator">\n        <div cg-light-md-editor="onComment"\n             editor-id="project-file-detail-modal-editor"\n             at-item="file"\n             at-context-type="\'project_file_comment\'"\n             data-ng-model="content"\n             img-compression="false"\n             project_dependency="project">\n        </div>\n    </div>\n</div>'),a.put("common/directives/attachment/fileActivities/tpl/activities.modal.html",'<div class="file-activities">\n    <div class="file-activity-items" cg-disable-scroll>\n        <div ng-repeat="activity in activities"\n            class="flex-box"\n            style="min-height: 60px;"\n            cg-project-file-comment-activity="activity"\n            cg-project-file-comment-project-id="project.id"\n            cg-project-file-comment-file-id="file_id"\n            cg-project-file-comment-view="view"\n            on-remove="onRemove">\n        </div>\n    </div>\n    <div class="file-comment-wrapper">\n        <textarea\n            id="attachment-preview-modal-comment-textarea"\n            class="file-comment-textarea"\n            ng-model="content"\n            msd-elastic="\\n"\n            cg-ctrl-enter="onComment(content)"\n            cg-at-emoji\n            cg-at-context\n            at-item="file"\n            at-context-type="\'project_file_comment\'"\n            cg-placeholder></textarea>\n        <i class="clockwise rotated level down icon"\n           ng-click="onComment(content)"\n            style=" position: absolute;\n                    bottom: 15px;\n                    right: 10px;\n                    cursor: pointer;\n                    color: #444;"></i>\n    </div>\n</div>'),a.put("common/directives/attachment/fileHistories/tpl/histories.detail.html",'<div class="file-histories detail" style="margin-bottom: 40px;">\n    <div class="file-history-wrapper">\n        <div class="file-history-item" ng-class="{\'current\': isCurrentHistory(history)}" ng-repeat="history in histories">\n            <div class="file-history-column">\n                <div class="file-history-version" ng-if="::history.version" style="cursor:pointer;"\n                    title="{{::(\'查看 V\' + history.version)}}"\n                    ng-click="selectHistory(history)">\n                    V<span>{{::history.version}}</span>\n                </div>\n                <div class="file-history-name-wrapper"\n                     style="cursor:pointer;"\n                     ng-click="selectHistory(history)"\n                     id="edit-file-history-remark-{{history.history_id}}"\n                     cg-not-click="history.editing && updateRemark(history)"\n                     not-click-class="#edit-file-history-remark-{{history.history_id}}, #edit-file-history-remark-{{history.history_id}} *"\n                     not-click-when="history.editing">\n                    <span ng-show="!history.editing" class="file-history-name">{{history.remark}}</span>\n                    <input  ng-show="history.editing"\n                            id="file-history-remark-editor-{{history.history_id}}"\n                            class="ui input file-history-remark-editor"\n                            type="text" ng-model="history.remark"\n                            cg-enter="updateRemark(history)"/>\n                </div>\n                <div class="file-history-action">\n                    <span>{{::history.owner.name}}</span>\n                    <span>{{::(\' \' + history.action_msg + \' \')}}</span>\n                    <span class="file-history-time" cg-friendly-time="history.created_at"></span>\n                </div>\n                <div class="actions">\n                    <a class="action-item"\n                       ng-click="preDelete(history)"\n                       ng-if="!isCurrentHistory(history)\n                            && file.copy.history_id !== history.history_id\n                            && ((USER | isOwnerOf : history) || (history | isRole : ADMIN))"\n                       href="javascript:void(0)">删除</a>\n                    <a class="action-item" href="javascript:void(0)" ng-click="setRemarkEditable($event, history);">修改备注</a>\n                    <a class="action-item" href="javascript:void(0)" ng-click="downloadHistory(history);">下载</a>\n                </div>\n            </div>\n            <div class="file-history-confirm" ng-if="history.pre_delete">\n                <span class="tips">\n                    确定删除该版本？删除后将不能恢复。\n                </span>\n                <div class="actions">\n                    <a href="javascript:void(0)" class="ui small white button" ng-click="cancelDelete(history)">取消</a>\n                    <a href="javascript:void(0)" class="ui small red button" ng-click="deleteHistory(history)">\n                        <i class="icon loading" ng-if="history.deleting"></i>删除</a>\n                </div>\n            </div>\n        </div>\n    </div>\n    <span class="upload-tip">上传新版本</span>\n    <form file-upload="projectFileHistoryZoneUploadSetting">\n        <input id="file-history-upload-zone" type="file" name="file" multiple>\n        <div id="uploadFile" class="empty center list file-upload-zone"  cg-trigger-upload="upload($callback);">\n            <span ng-show="!uploading">\n                <span style="font-size:16px;line-height: 40px;"><i class="upload cloud icon"></i><span ng-if="files.length==0">还未上传任何文件，</span><span>点击或将文件拖拽至此上传！</span><br/></span><span>支持所有文件格式，单个文件不超过100M。</span>\n            </span>\n            <span ng-show="uploading">\n                <span file-upload-progress="upload_progress">\n                    <i class="loading icon"></i>正在上传（{{num}}%）!\n                </span>\n            </span>\n        </div>\n    </form>\n</div>'),a.put("common/directives/attachment/fileHistories/tpl/histories.modal.html",'<div class="file-histories modal">\n    <div class="file-history-wrapper" cg-disable-scroll>\n        <div class="file-history-item" ng-class="{\'current\': isCurrentHistory(history)}" ng-repeat="history in histories">\n            <div class="file-history-column">\n                <div class="file-history-version" ng-if="::history.version" style="cursor:pointer;"\n                    title="{{::(\'查看 V\' + history.version)}}"\n                    ng-click="selectHistory(history)">\n                    V<span>{{::history.version}}</span>\n                </div>\n                <div class="file-history-name-wrapper"\n                     style="cursor:pointer;"\n                     ng-click="selectHistory(history)"\n                     id="edit-file-history-remark-{{history.history_id}}"\n                     cg-not-click="history.editing && updateRemark(history)"\n                     not-click-class="#edit-file-history-remark-{{history.history_id}}, #edit-file-history-remark-{{history.history_id}} *"\n                     not-click-when="history.editing">\n                    <span ng-show="!history.editing" class="file-history-name ellipsis">{{history.remark}}</span>\n                    <input  ng-show="history.editing"\n                            id="file-history-remark-editor-{{history.history_id}}"\n                            class="ui input file-history-remark-editor"\n                            type="text" ng-model="history.remark"\n                            cg-enter="updateRemark(history)"/>\n                </div>\n                <div class="file-history-action">\n                    <span>{{::history.owner.name}}</span>\n                    <span>{{::(\' \' + history.action_msg + \' \')}}</span>\n                    <span class="file-history-time" cg-friendly-time="history.created_at"></span>\n                </div>\n                <div class="actions">\n                    <a class="action-item"\n                       ng-click="preDelete(history)"\n                       ng-if="!isCurrentHistory(history)\n                            && file.copy.history_id !== history.history_id\n                            && ((USER | isOwnerOf : history) || (history | isRole : ADMIN))"\n                       href="javascript:void(0)">删除</a>\n                    <a class="action-item" href="javascript:void(0)" ng-click="setRemarkEditable($event, history);">修改备注</a>\n                    <a class="action-item" href="javascript:void(0)" ng-click="downloadHistory(history);">下载</a>\n                </div>\n            </div>\n\n        </div>\n    </div>\n    <div class="file-history-confirm" ng-if="deleting_history" style="">\n        <span class="tips">\n            确定删除该版本？删除后将不能恢复。\n        </span>\n        <div class="actions">\n            <a href="javascript:void(0)" class="ui small white button" ng-click="cancelDelete(deleting_history, $event)">取消</a>\n            <a href="javascript:void(0)" class="ui small red button" ng-click="deleteHistory(deleting_history, $event)">\n                <i class="icon loading" ng-if="history.deleting"></i>删除</a>\n        </div>\n    </div>\n    <form file-upload="projectFileHistoryZoneUploadSetting" ng-if="!deleting_history">\n        <input id="file-modal-history-upload-zone" type="file" name="file" multiple>\n        <div class="upload-picker-wrapper">\n            <div class="upload-picker">\n                <span class="upload-button" cg-trigger-upload="upload($callback);">\n                    <span ng-if="!uploading"><i class="upload cloud icon"></i>点击上传新版本</span>\n                    <span ng-if="uploading">正在上传({{num}}%)</span>\n                </span>\n            </div>\n        </div>\n\n    </form>\n</div>'),a.put("common/directives/attachment/menu/tpl/folderDropdown.html",'<div class="ui dropdown folder-dropdown"\n     ng-click="onFolderDropdownClick($event);"\n     dropdown-setting="dropdownSetting"\n     cg-dropdown>\n    <div class="menu">\n        <div class="item"\n             ng-click="onRename($event, folder, isSubFolder)">\n            <i class="edit icon"></i>重命名\n        </div>\n        <div class="item"\n             ng-if="showMoveFolderMenu(folder)"\n             ng-click="onBeforeFolderMove($event, folder, isSubFolder)">\n            <i class="folder icon"></i>移动到...\n        </div>\n        <div class="item"\n             ng-if="showDownloadMenu(folder)"\n             ng-click="onBeforeFolderZipDownload($event, folder, isSubFolder)">\n            <i class="cloud download icon"></i>打包下载\n        </div>\n        <div class="item"\n             ng-click="onRemove($event, folder, isSubFolder);">\n            <i class="trash icon"></i>删除\n        </div>\n    </div>\n    <ng-transclude></ng-transclude>\n    <form class="zipDownloadForm"\n          action="{{ zipDownloadUrl }}"\n          target="_blank"\n          style="display: none;">\n    </form>\n    <div ng-if="loadModal(folder)">\n        <cg-folder-selector-modal\n            title="移动到文件夹"\n            show="showFolderSelectModal"\n            folder="folder"\n            on-hide="onModalHide"\n            is-sub-folder="isSubFolder"\n            on-select="onMoveTargetFolderSelect"/>\n    </div>\n</div>\n'),a.put("common/directives/attachment/menu/tpl/folderSelectorModal.html",'<div class="ui modal folder-selector-modal" cg-modal="folderSelectModal">\n    <div class="picker-wrapper flex-box flex-direction-column">\n        <header class="flex-none flex-box flex-direction-row"\n                cg-cascade-menu>\n        </header>\n        <article class="flex-auto-justify lazy-loader-container"\n                 cg-perfect-scroll-bar="update_prefect_scroll_bar">\n            <div cg-file-folders\n                 just-folder="true"\n                 is-sub-folder="isSubFolder"\n                 exclude-folders="excludeFolders"\n                 project-id="projectId"\n                 start-init="startInit"\n                 on-folder-change="onFolderChange"></div>\n        </article>\n    </div>\n</div>\n'),a.put("common/directives/attachment/tpl/editor.html",'<form class="ui form" ng-class="{loading: file_saving}" id="attachment-create">\n\n    <div class="ui medium action input fullscreen-title" style="margin-bottom: 20px;">\n        <input name="title" type="text" ng-model="current_file.readName" placeholder="文件名"/>\n        <a class="ui green medium button" style="cursor: default;width:50px;">.{{current_file.fileType || editor_type}}</a>\n    </div>\n\n    <div class="editor" ng-switch="editor_type">\n        <textarea ng-switch-when="txt" cg-disable-scroll cg-refer-resource="PROJECT"\n                  name="content" ng-model="current_file.content"\n                  cg-refer-resource="PROJECT"\n                  placeholder="文件内容" msd-elastic="\\n" ng-class="{\'modal\': view == \'modal\'}"></textarea>\n        <div ng-switch-when="md">\n            <div cg-pagedown="contentUpdate($content)" id="-1" min-height="500" ng-model="current_file.content">\n                <textarea placeholder="文件内容" ng-model="current_file.content" cg-textarea-editable cg-refer-resource="PROJECT"></textarea>\n            </div>\n        </div>\n    </div>\n\n    <div class="action clearfix fullscreen-title-right-buttons">\n        <a class="ui blue button floated right" href="javascript:void(0);"\n           ng-click="saveFile(current_file);"\n           ng-if="action === \'create\'">保存</a>\n        <a class="ui blue button floated right" href="javascript:void(0);"\n           ng-click="updateFile(current_file, $event);"\n           ng-if="action !== \'create\'">更新</a>\n        <a class="ui button floated right" style="background: none;box-shadow: none;margin-right:10px;"\n           ng-if="view === \'detail\'"\n           ng-click="cancel()">取消</a>\n        <a class="ui button floated right"\n           style="margin-right:10px;"\n           href="javascript:void(0)"\n           ng-click="cancelEditing($event, \'preview\')"\n           ng-if="view === \'modal\'">取消</a>\n    </div>\n\n</form>'),
a.put("common/directives/attachment/tpl/previewer.html",'<div ng-switch="getFileType(current_file)">\n\n    <!-- 图片 -->\n    <div ng-switch-when="image" class="coding aligned center" style="height: 100%;">\n        <div id="image-preview" style="height: 100%;">\n            <div id="preview-image-loading" ng-if="image_previewing">\n                <i class="icon loading"></i>正在加载图片...\n            </div>\n            <!--处理前原图不能超过1亿5000万像素 http://developer.qiniu.com/docs/v6/api/reference/fop/image/imageview2.html -->\n            <div ng-if="!image_previewing && current_file.owner_preview" class="white-block preview-image-container">\n                <img id="preview-image" ng-show="view == \'modal\' && current_file.image_width * current_file.image_height <= 150000000 " ng-src="{{current_file.owner_preview}}?width=1440&type=2&{{current_file.updated_at}}" alt="" style="vertical-align: middle;"/>\n                <img id="preview-image" style="cursor: zoom-in;" ng-click="show_modal()" ng-show="view != \'modal\' && current_file.image_width * current_file.image_height <= 150000000 " ng-src="{{current_file.owner_preview}}?width=1440&type=2&{{current_file.updated_at}}" alt=""/>\n                <a target="_blank" ng-show="current_file.image_width * current_file.image_height > 150000000" style="background: #4c4d50;color: #fff;-webkit-box-align: center; display: -webkit-box; height: 100%;text-align: -webkit-center;" ng-href="{{current_file.owner_preview}}">无法显示缩略图，点击查看原图</a>\n                <div class="ui modal" ng-click="hide_modal()" id="preview-image-modal" style="background: transparent;">\n                    <div class="image content" style="padding: 0; background: transparent; display: block; text-align: center;">\n                        <img class="image" src="{{current_file.owner_preview}}" style="max-height: 100%; max-width: 100%; cursor: zoom-out;">\n                    </div>\n                    <a target="_blank" style="width: 100%;color: #fff;display: block;position: absolute;text-align: center;bottom: -1.5em;" ng-href="{{current_file.owner_preview}}">查看原图</a>\n                </div>\n            </div>\n        </div>\n    </div>\n\n\n    <!-- 文本 -->\n    <div ng-switch-when="text" id="text-preview" ng-switch="current_file.fileType">\n        <pre ng-switch-when="txt" class="txt-preview-wrapper">{{current_file.content}}</pre>\n        <div class="markdown content" clip-copy-code="pre" ng-switch-when="md" ng-if="markdown_preview" cg-page-scroll cg-highlight="markdown_preview"></div>\n    </div>\n    <div ng-switch-when="binary" ng-show="!office_preview">\n        <div id="preview-icon" ng-click="downloadFile(current_file);">\n            <i class="cloud download icon"></i>\n            <div cg-file-icon-src cg-file-icon="current_file.type"></div>\n        </div>\n    </div>\n\n    <!-- office -->\n    <div style="overflow:hidden;" ng-show="office_preview">\n        <iframe id="office_preview" style="width:100%;height:700px;border:none;position:relative;" ng-style="office_style"></iframe>\n    </div>\n\n    <!-- pdf -->\n    <div class="coding aligned center" id="pdf-preview-wrapper" ng-switch-when="pdf" ng-class="{full: pdf_resize == \'full\'}">\n        <div id="pdf-preview" ng-class="{loaded: pdf_preview_loaded}"  cg-prev-and-next="onPdfNavChange($event);">\n            <div class="resize" ng-click="togglePdfResize();"\n                 ng-if="!pdf_preview_loading && pdf_preview && screenfull_enabled">\n                <i class="resize icon" ng-class="{full: pdf_resize == \'small\', small: pdf_resize == \'full\'}"></i>\n            </div>\n            <div class="prev button" title="上一页"\n                 ng-click="loadPdf(pdf_preview_page-1, $event);"\n                 ng-if="!pdf_preview_loading && pdf_preview && pdf_preview_page>1">\n                <i class="angle left icon"></i>\n            </div>\n            <div class="next button" title="下一页"\n                 ng-click="loadPdf(pdf_preview_page+1, $event);"\n                 ng-if="!pdf_preview_loading && pdf_preview && pdf_preview_page<pdf_preview.totalRow">\n                <i class="angle right icon"></i>\n            </div>\n            <div class="count" ng-if="pdf_preview_loaded">\n                <div ng-if="!pdf_preview_loading && pdf_preview">{{pdf_preview_page}}/{{pdf_preview.totalRow}}</div>\n                <div ng-if="pdf_preview_loading">\n                    <i class="loading icon"></i>加载中...\n                </div>\n            </div>\n            <img style="display: block;max-width: 100%;margin:auto;"\n                 ng-style="{\'height\': pdf_fullscreen_height !== 0 ? pdf_fullscreen_height : \'auto\'}"\n                 ng-if="pdf_preview"\n                 ng-src="{{pdf_preview.url}}"/>\n        </div>\n        <div class="empty list" ng-if="pdf_preview_loading && !pdf_preview_loaded">\n            <i class="loading icon"></i>正在奋力加载中...\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/attachment/tpl/toolbar.html",'<div class="project-file-tool-bar">\n    <a class="tool-button gray" href="javascript:void(0)" ng-click="doSwitch($event, \'edit\')" ng-if="mode != \'edit\'"><i class="edit icon" data-position="top center" data-variation="inverted" data-html="编辑文件" cg-popup></i></a>\n    <a class="tool-button gray" href="javascript:void(0)" ng-click="doSwitch($event, \'preview\')" ng-if="mode == \'edit\'"><i class="ui icon unhide" data-position="top center" data-variation="inverted" data-html="预览文件" cg-popup></i></a>\n    <a class="tool-button gray" href="javascript:void(0)" ng-click="downloadFile(file, project.id)"><i class="cloud download icon" data-position="top center" data-variation="inverted" data-html="下载文件" cg-popup></i></a>\n    <a class="tool-button gray" href="javascript:void(0)" ng-click="toDetail(project, file.file_id, folder_id)"><i class="external url icon" data-position="top center" data-variation="inverted" data-html="查看详情" cg-popup></i></a>\n    <a class="tool-button gray" href="javascript:void(0)"><i class="coding coding-share icon" cg-share="share" object="file" type="0" ng-class="{green: share}"></i></a>\n    <a class="tool-button gray info-tooltip-wrapper" href="javascript:void(0)">\n        <i id="fileInfo" class="preview-modal info icon" cg-popup="{on: \'click\', position: \'bottom center\'}" template="#file-info-modal-tpl"></i>\n        <i class="icon info-tooltip" data-position="top center" data-variation="inverted" data-html="文件信息" cg-popup onclick="document.getElementById(\'fileInfo\').click()"></i>\n    </a>\n    <style>\n        .info-tooltip-wrapper{position:relative;}\n        .info-tooltip{position:absolute;top:0.5em;left:0;bottom:0.5em;}\n    </style>\n    <a class="tool-button gray" href="javascript:void(0)" ng-if="(USER | isCreatorOf : file) || (file | isRole : ADMIN)" ng-click="delete(file)"><i class="trash icon" data-position="top center" data-variation="inverted" data-html="删除文件" cg-popup></i></a>\n\n    <span id="file-info-modal-tpl" style="display: none">\n        <div class="file-info-wrapper">\n            <div class="file-info-title file_info_word" style="\n            font-size: 15px;\n            height: 25px;\n            font-weight: inherit;\n            display: table-row;\n            width: 40%;\n            text-align: right;">\n                <span class="file-info-left" style="padding-bottom:10px;">文件信息</span>\n            </div>\n            <div class="file_info_word" ng-if="file.number">\n                <span class="file-info-left">引用编号</span>\n                <span class="file-info-right">#{{file.number}}</span>\n            </div>\n            <div class="file_info_word">\n                <span class="file-info-left">文件类型</span>\n                <span class="file-info-right">{{file.type}}</span>\n            </div>\n            <div class="file_info_word">\n                <span class="file-info-left">文件大小</span>\n                <span class="file-info-right">{{file.size | bytes}}</span>\n            </div>\n            <div class="file_info_word file-image-info">\n                <span class="file-info-left">文件尺寸</span>\n                <span class="file-info-right"></span>\n            </div>\n            <div class="file_info_word">\n                <span class="file-info-left">创建时间</span>\n                <span class="file-info-right" cg-friendly-time=\'file.created_at\'></span>\n            </div>\n            <div class="file_info_word">\n                <span class="file-info-left">最近更新</span>\n                <span class="file-info-right" cg-friendly-time=\'file.updated_at\'></span>\n            </div>\n            <div class="file_info_word">\n                <span class="file-info-left">创建人</span>\n                <span class="file-info-right ellipsis" style="max-width: 100px">{{file.owner.name}}</span>\n            </div>\n        </div>\n    </span>\n</div>\n'),a.put("common/directives/bubble/tpl/bubble.html",'<div class="bubble-content-wrapper"\n     ng-init="tweet_content = restyleImage(restyleEmoji(tweet.content));">\n    <div class="bubble-detail">\n        <div class="content markdown bubble"\n             style="color: #000"\n             cg-fancy-overflow="{{!expand ? \'enableFancyOverflow\' : \'disableFancyOverflow\'}}"\n             clip-copy-code="pre"\n             cg-highlight="tweet_content">\n        </div>\n        <div cg-gallery="tweet.content"></div>\n        <div class="location ellipsis" ng-if="tweet.location">\n            <span>\n                <i class="map marker icon"></i>\n                <span>{{tweet.location}}</span>\n            </span>\n        </div>\n        <div class="info">\n            <span class="mr10">\n                <a class="gray"\n                   style="color: #999"\n                   ng-href="{{::tweet.owner.path}}">\n                    {{::tweet.owner.name}}\n                </a>\n            </span>\n            <span class="mr10">\n                <a class="gray" ng-href="{{::(tweet.owner.path + \'/pp/\' + tweet.id)}}">\n                    <i class="time icon"></i>\n                    <span cg-friendly-time="tweet.created_at" style="color: #999"></span>\n                </a>\n            </span>\n            <span class="mr10">\n                <a class="gray" ng-href="{{::(tweet.owner.path + \'/pp/\' + tweet.id)}}">\n                    <i class="chat outline icon"></i>\n                    <span ng-bind="tweet.comments"></span>\n                </a>\n            </span>\n            <span class="mr10">\n                <a class="gray" href="javascript:void(0);"\n                   ng-click="toggleLike(tweet)">\n                    <i class="heart icon"\n                       ng-class="{empty: !tweet.liked || liking,\n                                  red: tweet.liked,\n                                  \'heartbeat red\': like_opt_done}">\n                    </i>\n                    <span ng-bind="tweet.likes"></span>\n                </a>\n            </span>\n            <span class="mr10 mabi">\n                <a href="javascript:void(0);" ng-click="$parent.prepareReward(tweet)" class="gray" ng-mouseenter="showTip(tweet)" ng-mouseleave="hideTip(tweet)">\n                    <i class="coding icon coding-mabi" ng-class="{icon_rewarded: tweet.rewards>0}"></i>\n                    <span ng-bind="tweet.rewards||0"></span>\n                </a>\n            </span>\n            <span class="ui pointing left label tip_rewarded" ng-bind="rewardTip(tweet)" ng-show="tweet.showTweetTip"></span>\n            <span class="remove action coding mr10" ng-if="canRemove()">\n                <a href="javascript:void(0);" ng-click="doRemove();">\n                    <i class="red remove icon"></i>删除\n                </a>\n            </span>\n            <span class="device" ng-if="::tweet.device">\n                <i class="mobile icon"></i>\n                <span>{{::tweet.device}}</span>\n            </span>\n        </div>\n        <div class="likes">\n            <a\n               ng-repeat="user in tweet.reward_users | limitTo: like_show_limit"\n               ng-href="{{::user.path}}"\n               title="{{::user.name}}"\n               cg-hover-card="user"\n               card-bottom-offset="\'140%\'"\n               card-left-offset="\'-66%\'">\n                <img class="ui image avatar18 user_rewarded"\n                     ng-src="{{::user.avatar}}"\n                     alt="{{::user.name}}"/>\n            </a><a\n               ng-repeat="user in tweet.like_users | limitTo: like_show_limit - tweet.reward_users.length"\n               ng-href="{{::user.path}}"\n               title="{{::user.name}}"\n               cg-hover-card="user"\n               card-bottom-offset="\'140%\'"\n               card-left-offset="\'-66%\'">\n                <img class="ui image avatar18 "\n                     ng-src="{{::user.avatar}}"\n                     alt="{{::user.name}}"/>\n            </a>\n            <a style="font-size: 10px" title="查看所有点赞" href="javascript:void(0);"\n               ng-if="showMoreLikesAndRewards(tweet)"\n               ng-click="showAllLikesAndRewards(tweet)">\n                ...\n            </a>\n            <span ng-if="loading_likes"><i class="loading icon"></i></span>\n        </div>\n    </div>\n    <div ng-transclude></div>\n    <!--<div cg-gallery="tweet.content"></div>-->\n</div>\n'),a.put("common/directives/bubble/tpl/bubble_comment.html",'<div class="bubble-comments" ng-class="{none: !comments.length}">\n    <div class="comment-item" ng-class="::{last: $last}"\n         ng-repeat="comment in comments">\n        <a class="avatar" ng-href="{{::comment.owner.path}}" cg-hover-card="comment.owner" card-left-offset="\'-16%\'">\n            <img class="ui avatar image" width="30px" height="30px"\n                ng-src="{{::comment.owner.avatar}}"\n                alt="comment.owner.name"/>\n        </a>\n        <div class="detail">\n            <div class="content" ng-bind-html="::comment.content" style="color:#000">\n            </div>\n            <div class="info">\n                <span class="mr10">\n                    <a class="gray" ng-href="{{::comment.owner.path}}" style="color:#999">{{::comment.owner.name}}</a>\n                </span>\n                <span class="mr10">\n                    <i class="time icon"></i>\n                    <span cg-friendly-time="comment.created_at" style="color:#999"></span>\n                </span>\n                <span class="action coding floated right">\n                    <a class="mr10" href="javascript:void(0);"\n                       ng-if="$root.USER"\n                       ng-click="insertCommentName(comment);">\n                        <i class="blue edit icon"></i>回复\n                    </a>\n                    <a href="javascript:void(0);"\n                       ng-if="canRemove(comment, $root.USER);"\n                       ng-click="doRemove(comment);">\n                        <i class="red icon" ng-class="{remove: !comment.removing, loading: comment.removing}"></i>删除\n                    </a>\n                </span>\n            </div>\n        </div>\n    </div>\n    <div class="show-more-comment" ng-if="canShowMore()">\n        <a class="down more gray" href="javascript:void(0);"\n           ng-if="!loading_all && !loaded"\n           ng-click="showAllComments();">显示全部评论</a>\n        <a class="gray" ng-if="loading_all">\n            <i class="icon loading"></i>正在加载评论\n        </a>\n    </div>\n</div>\n'),a.put("common/directives/bubble/tpl/bubble_comment_form.html",'<form class="bubble-form  ui small form" ng-class="{loading: sending}">\n    <div class="ui large icon input">\n        <textarea type="text" placeholder="在此输入评论内容（Ctrl+Enter）"\n               ng-model="content"\n               cg-ctrl-enter="doComment();"\n               cg-at-context\n               at-context-type="\'tweet_comment\'"\n               at-item="tweet"\n               at-all="false"\n               has_no_monkey="true"\n               style="padding-right:4.5em!important;"\n               cg-placeholder\n               cg-at-emoji>\n        </textarea>\n        <i class="right icon" ng-click="doComment();" style="padding-top:12px;"></i>\n        <i class="smile right icon" cg-emotion-btn style="right:2.6em;margin-right:-1em;padding-top:13px;" basic-emoji="true"></i>\n    </div>\n</form>'),a.put("common/directives/bubble/tpl/bubble_comment_form2.html",'<form class="bubble-form  ui small form" ng-class="{loading: sending}">\n    <div class="ui large icon input">\n        <input type="text" placeholder="在此输入评论内容（Ctrl+Enter）"\n               ng-model="content"\n               cg-ctrl-enter="doComment();"\n               cg-at-context\n               at-context-type="\'tweet_comment\'"\n               at-item="tweet"\n               at-all="false"\n               has_no_monkey="true"\n               cg-placeholder\n               cg-at-emoji/>\n        <i class="right icon" ng-click="doComment();"></i>\n    </div>\n</form>'),a.put("common/directives/bubbleReward/tpl/bubble_reward.html",'<div class="ui tiny40 modal" id="tweet-reward-modal" modal="$modal">\n    <i class="close icon"></i>\n    <div class="header">冒泡打赏</div>\n    <div class="content">\n        <div class="field summary">\n            <div class="item">\n                <span class="title">码币余额：<em ng-bind="user.points_left"></em></span>\n                <span class="title">你确认打赏给该用户<em>0.01</em>码币吗?</span>\n            </div>\n        </div>\n        <form class="ui form" ng-show="!errorMessages.length">\n            <div class="field inline password" ng-show="showPassword">\n                <label>用户密码</label> <input type="password" ng-model="user.password" cg-enter="reward(tweet,$event);">\n            </div>\n            <div class="field inline code" ng-show="showTwoFactorCode">\n                <label>两步验证码</label> <input type="text" ng-model="user.twoFactorCode" cg-enter="reward(tweet,$event);">\n            </div>\n        </form>\n        <div class="ui error message ng-hide" ng-show="errorMessages.length">\n            <ul class="list">\n                <li ng-repeat="msg in errorMessages" ng-bind-html="msg"></li>\n            </ul>\n        </div>\n    </div>\n    <div class="action-buttons" ng-show="!errorMessages.length">\n        <a class="ui ok button green" ng-click="reward(tweet);">\n            确认打赏\n        </a>\n    </div>\n</div>'),a.put("common/directives/casacadingAddress/tpl/city.html",'<span>\n    <style>\n        .cascading-address {\n            border: 1px solid #ddd;\n            position:absolute;\n            z-index: 999;\n            background: white;\n            border-radius: 0.3em;\n            padding: 8px;\n            width: 50%;\n        }\n\n        .cascading-address ul {\n            padding:5px;\n            border-bottom: 1px dotted #ddd;\n        }\n\n        .cascading-address ul li {\n            font-size: 13px;\n            list-style: none;\n            display: inline-block;\n            margin:5px 7px;\n            cursor: pointer;\n        }\n\n        .cascading-address .form-group {\n            margin: 10px;\n        }\n    </style>\n    <input ng-model="model" ng-focus="open(\'show\')" placeholder="地区" type="text"/>\n\n    <div ng-show="show" class="cascading-address">\n        <ul>\n            <li ng-repeat="item in provinces" ng-click="set.province(item.p)" ng-class="{\'label label-success\': province === item.p}">\n                {{ item.p}}\n            </li>\n        </ul>\n\n        <ul ng-show="cities.length">\n            <li ng-repeat="item in cities" ng-click="set.city(item.n)" ng-class="{\'label label-success\': city === item.n}">\n                {{ item.n}}\n            </li>\n        </ul>\n        <div class="panel-footer text-right">\n            <button ng-click="clear()" class="ui small white button">清空</button>\n            <button ng-click="open(\'hide\')" class="ui small blue button">确定</button>\n        </div>\n    </div>\n</span>'),a.put("common/directives/cgMemberSelector/tpl/cgMemberSelector.html",'<ul class="cg-ms-selected">\n    <li ng-repeat="member in selected" class="cg-ms-selected-item">\n        <div class="popup-menu" ng-if="popupMenu">\n            <span>{{member.name}}</span>\n            <i class="icon remove red" ng-click="cancel(member)"></i>\n        </div>\n\n        <img ng-src="{{member.lavatar}}" class="ui image"/>\n        <span>{{member.name}}</span>\n        <i class="icon remove red" ng-click="cancel(member)"></i>\n    </li>\n    <li class="cg-ms-selected-tips" ng-if="!selected || selected.length === 0" style="font-size:12px;color:#999;">\n        尚未添加任何关注者\n    </li>\n</ul>\n<select ui-select2="options" ng-model="value" ng-change="select()">\n    <option ng-hide="true" value="0">{{options.placeholder}}</option>\n    <option\n        ng-repeat="member in unselected"\n        ng-show="show(member)"\n        value="{{member.global_key}}"\n        data-pinyin="{{member.name_pinyin}}"\n        data-template="\n            <div class=\'cg-ms-unselected {{checkModeClass(member)}}\'>\n                <i class=\'checkmark icon\'></i>\n'+"                <img class='ui image' src='{{member.avatar}}'/>\n                <span class='ellipsis'>{{member.name}}</span>\n            </div>\n        \">\n        {{member.name}}\n    </option>\n</select>\n"),a.put("common/directives/cgMemberSelector/tpl/task-creating-watchers.html",'<style>\n    .cg-ms-selected.mr-1 .cg-ms-selected-item {\n        margin-left: 1px;\n    }\n</style>\n<ul class="cg-ms-selected mr-1"  style="max-height: 60px;" class="overflow-auto" cg-perfect-scroll-bar="update_scrollbar">\n    <li ng-repeat="member in selected" class="cg-ms-selected-item">\n        <img ng-src="{{member.lavatar}}" class="ui image"/>\n        <span>{{member.name}}</span>\n        <i class="icon remove red" ng-click="cancel(member)"></i>\n    </li>\n    <li ng-if="!selected || selected.length === 0" style="font-size:12px;color:#999;">\n        尚未添加任何关注者\n    </li>\n</ul>\n<select ui-select2="options" ng-model="value" ng-change="select()">\n    <option ng-hide="true" value="0">{{options.placeholder}}</option>\n    <option\n        ng-repeat="member in unselected"\n        ng-show="show(member)"\n        value="{{member.global_key}}"\n        data-pinyin="{{member.name_pinyin}}"\n        data-template="\n            <div class=\'cg-ms-unselected {{checkModeClass(member)}}\'>\n                <i class=\'checkmark icon\'></i>\n'+"                <img class='ui image' src='{{member.avatar}}'/>\n                <span class='ellipsis'>{{member.name}}</span>\n            </div>\n        \">\n        {{member.name}}\n    </option>\n</select>\n"),a.put("common/directives/cgShare/tpl/popup.html",'<style>\n    .share-popup {\n        position: absolute;\n        padding: 15px 20px 20px 20px;\n        width: 280px;\n        display: none;\n        top: 30px;\n\n        font-family: "PingFang SC", "Helvetica Neue", "Hiragino Sans GB", "Segoe UI", "Microsoft YaHei", "微软雅黑", sans-serif;\n        border-radius: 0.2em;\n        box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.1);\n        border:1px solid rgba(0, 0, 0, 0.1);\n        background-color: white;\n        color: black;\n        text-align: left;\n        cursor: default;\n        z-index: 4;\n    }\n    .share-popup:before {\n        margin-left: -0.4em;\n        top: -0.3em;\n        left: 50%;\n        right: auto;\n        bottom: auto;\n        -webkit-box-shadow: -1px -1px 1px rgba(0, 0, 0, 0.2);\n        box-shadow: -1px -1px 1px rgba(0, 0, 0, 0.2);\n\n        position: absolute;\n        content: "";\n        width: 10px;\n        height: 10px;\n        background-image: none;\n        background-color: #FFFFFF;\n        -webkit-transform: rotate(-135deg);\n        -moz-transform: rotate(-135deg);\n        -ms-transform: rotate(-135deg);\n        transform: rotate(-135deg);\n        z-index: 4;\n        -webkit-box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        -ms-box-sizing: border-box;\n        box-sizing: border-box;\n        -webkit-box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);\n        box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);\n    }\n    .share-popup:hover {\n        color: black;\n    }\n\n    .share-popup-action {\n        height: 40px;\n        line-height: 40px;\n        font-size: 18px;\n        font-weight: bold;\n        margin-bottom: 5px;\n    }\n\n    .share-popup-action > span {\n        font-size: 18px;\n    }\n\n    .share-popup-action .ui.toggle.checkbox {\n        float: right;\n        margin-top: 10px;\n        margin-right: 3px;\n        width: 50px;\n    }\n\n    .share-popup-button {\n        width: 70px;\n        float: right;\n        padding: 0 1.2em !important;\n    }\n\n    .share-popup-footer {\n        padding: 0 !important;\n        line-height: 1.3em;\n    }\n\n    .share-popup-input {\n        height: 35px;\n        padding: 4px 1em;\n        font-size: 1em;\n    }\n\n    .share-popup-copy {\n        width: 30px;\n        padding-left: 18px !important;\n        padding-right: 18px !important;\n    }\n\n    .share-popup-copy i.icon {\n        padding-right: 0 !important;\n    }\n\n    .share-popup-action .checkbox label.checkbox-label:after {\n        height: 0.74em;\n    }\n\n    .share-tooltip {\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 100%;\n    }\n    .transclude-text {\n        position: absolute;\n        width: 2rem;\n        top: -1px;\n        left: 1rem;\n        text-align: left;\n        color: #999;\n    }\n    .green .transclude-text {\n        color: #89B84C;\n    }\n</style>\n<i ng-if="type === RESOURCE_TYPE.ATTACHMENT" class="icon share-tooltip" data-position="top center" data-variation="inverted" data-html="分享文件" cg-popup></i>\n<i ng-if="type === RESOURCE_TYPE.TOPIC" class="icon share-tooltip" data-position="top center" data-variation="inverted" data-html="分享讨论" cg-popup></i>\n<i ng-if="type === RESOURCE_TYPE.TOPIC_COMMENT" class="icon share-tooltip" data-position="top center" data-variation="inverted" data-html="分享回答" cg-popup></i>\n<span ng-transclude class="transclude-text"></span>\n<div class="share-popup">\n    <div class="share-popup-action">\n        <span ng-if="type === RESOURCE_TYPE.ATTACHMENT">分享文件</span>\n        <span ng-if="type === RESOURCE_TYPE.TOPIC">分享讨论</span>\n        <span ng-if="type === RESOURCE_TYPE.TOPIC_COMMENT">分享回答</span>\n\n        <div class="ui toggle checkbox" ng-hide="type === RESOURCE_TYPE.TOPIC_COMMENT">\n            <input type="checkbox" ng-disabled="!object">\n            <label class="checkbox-label"></label>\n        </div>\n    </div>\n    <div ng-show="loading" class="empty list center">\n        <i class="icon loading"></i>正在加载...\n    </div>\n    <div ng-show="!loading" class="empty list share-popup-footer">\n        <div ng-show="share">该链接适用于所有人，无需登录。</div>\n        <div ng-show="!share">当前未开启分享，开启将自动创建公开链接。</div>\n        <div ng-show="share" class="ui action input" style="width: 100%; margin-top: 10px;">\n\n            <input class="share-popup-input" type="text" ng-value="share.url + suffix" readonly="readonly" onclick="this.select();">\n\n            <div class="ui right icon button share-popup-copy" clip-copy="getCopy()" clip-click="doCopy()">\n                <i class="paste icon" ng-class="{\'green checkmark\': copied, \'paste\': !copied}" style="vertical-align: middle;"></i>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/codingCli/tpl/codingCli.html",'<div class="ui simple pointing dropdown item add" style="padding: 0;">\n    <a class="inbox icon item"><i class="terminal icon"></i></a>\n    <div class="coding-cli" style="display: none;">\n        <div class="coding-cli-side"></div>\n        <div class="coding-cli-bar">\n            <i class="coding icon monkey"></i>\n            <span class="title">Coding Cli</span>\n            <i class="remove icon"></i>\n            <i class="minus icon"></i>\n            <i class="add icon"></i>\n            <i class="setting icon" ng-click="showCodingCliSettingModal()"></i>\n        </div>\n        <div class="coding-cli-mask" style="display: none;">\n            <div class="box">\n                <div class="column" style="margin-right: 20px;">\n                    <i class="repeat icon"></i>\n                    重新连接\n                </div>\n                <div class="column" style="margin-left: 20px;">\n                    <i class="remove icon"></i>\n                    关闭\n                </div>\n            </div>\n        </div>\n        <div id="coding-cli-terminal" class="coding-cli-terminal"></div>\n    </div>\n    <ng-include src="\'common/directives/codingCli/tpl/settingModal.html\'"></ng-include>\n</div>\n'),a.put("common/directives/codingCli/tpl/settingModal.html",'<div class="ui modal tiny40 coding-cli-setting-modal"\n     id="coding-cli-setting-modal"\n     ng-controller="CodingCliModalCtrl"\n     style="max-width: 445px;">\n    <div class="header">\n        Coding Cli 设置\n    </div>\n    <div class="content">\n        <div class="ui small form">\n            <div class="field">\n                <label>字号</label>\n                <input type="number" min="10" max="26" ng-model="fontSize">\n            </div>\n            <div class="field">\n                <label>字体</label>\n                <div class="ui fluid selection dropdown">\n                    <div class="text">{{fontStyle}}</div>\n                    <i class="dropdown icon"></i>\n                    <div class="menu">\n                        <div class="item" ng-repeat="font in fonts" ng-click="choiceFontStyle(font)">{{font}}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="action-buttons">\n        <a class="ui ok button green" ng-click="submit();">\n            确定\n        </a>\n    </div>\n</div>\n'),a.put("common/directives/contextMenu/contextMenu.html",'<div class="ui small vertical inverted labeled icon sidebar fixed menu"\n     ng-class="{active: !!currentApp, \'not-confirmed-sidebar\': confirmEmmail}"\n     id="context-menu">\n    <!--user-->\n    <a class="item" ng-href="/user" ng-class="{active:module==\'home\'}" title="个人首页" ng-if="isUser">\n        <img ng-src="{{user.avatar}}" class="ui coding image avatar32" id="context-avatar"/>\n    </a>\n    <a class="item" ng-href="/user/projects" ng-class="{active:module==\'projects\'}" title="{{\'projects\' | i18n:\'context_menu\'}}" ng-if="isUser">\n        <i class="big coding project icon"></i>\n        <span class="menu-title">{{\'projects\' | i18n:\'context_menu\'}}</span>\n    </a>\n    <a class="item" ng-href="/user/tasks?owner={{user.id}}&status=1" ng-class="{active:module==\'tasks\'}" title="{{\'tasks\' | i18n:\'context_menu\'}}"\n       ng-if="isUser">\n        <i class="big tasks icon"></i>\n        <span class="menu-title">{{\'tasks\' | i18n:\'context_menu\'}}</span>\n    </a>\n    <a class="item" ng-href="/team" ng-class="{active:module==\'teams\'}" title="{{\'teams\' | i18n:\'context_menu\'}}"\n       ng-if="isUser">\n        <i class="big coding team icon"></i>\n        <span class="menu-title">{{\'teams\' | i18n:\'context_menu\'}}</span>\n    </a>\n    <a class="item" ng-href="/user/relationship" ng-class="{active:module==\'relationship\'}" title="{{\'relationship_center\' | i18n:\'context_menu\'}}" ng-if="isUser">\n        <i class="big user icon" ng-class="{active:module==\'relationship\'}"></i>\n        <span class="menu-title">{{\'friends\' | i18n:\'context_menu\'}}</span>\n    </a>\n    <a class="item" ng-href="/user/notifications" ng-class="{active:module==\'notifications\'}" title="{{\'notifications\' | i18n:\'context_menu\'}}" ng-if="isUser">\n        <i class="big inbox icon"></i>\n        <span class="menu-title">{{\'notifications\' | i18n:\'context_menu\'}}</span>\n    </a>\n    <a class="item" ng-href="/user/messages" ng-class="{active:module==\'messages\'}" title="{{\'messages\' | i18n:\'context_menu\'}}" ng-if="isUser">\n        <i class="big mail icon"></i>\n        <span class="menu-title">{{\'messages\' | i18n:\'context_menu\'}}</span>\n    </a>\n    <a class="item" ng-href="/user/account" ng-class="{active:module==\'account\'}" title="{{\'account\' | i18n:\'context_menu\'}}" ng-if="isUser">\n        <i class="big dashboard icon"></i>\n        <span class="menu-title">{{\'account\' | i18n:\'context_menu\'}}</span>\n    </a>\n    <!--project-->\n    <a class="item" ng-class="{active:module==\'home\'}" ng-href="{{PROJECT.project_path}}" ng-if="isProject">\n        <img ng-if="PROJECT.icon" ng-src="{{PROJECT.icon}}" class="ui image avatar32" id="context-avatar"/>\n        <img ng-if="!PROJECT.icon" src="images/project/2.png " class="ui image avatar32" id="context-avatar"/>\n    </a>\n    <a class="item" ng-class="{active:module==\'tasks\'}"\n       ng-href="{{PROJECT.project_path}}/tasks/user/{{user.global_key}}/all" ng-if="isProject">\n        <i class="big tasks icon"></i>\n        <span class="menu-title">{{\'tasks\' | i18n:\'context_menu\'}}</span>\n    </a>\n    <a class="item" ng-class="{active:module==\'git\'}" ng-href="{{PROJECT.project_path}}/git"\n       ng-if="showCode && isProject">\n        <i class="big code icon"></i>\n        <span class="menu-title">{{\'code\' | i18n:\'context_menu\'}}</span>\n    </a>\n    <a class="item" ng-class="{active:module==\'attachment\'}" ng-href="{{PROJECT.project_path}}/attachment"\n       ng-if="isProject">\n        <i class="big file icon"></i>\n        <span class="menu-title">{{\'file\' | i18n:\'context_menu\'}}</span>\n    </a>\n    <a class="item" ng-class="{active:module==\'topic\'}" ng-href="{{PROJECT.project_path}}/topic/all" ng-if="isProject">\n        <i class="big chat icon"></i>\n        <span class="menu-title">{{\'topics\' | i18n:\'context_menu\'}}</span>\n    </a>\n    <a class="item" ng-class="{active:module==\'members\'}" ng-href="{{PROJECT.project_path}}/members" ng-if="isProject">\n        <i class="big users icon"></i>\n        <span class="menu-title">{{\'members\' | i18n:\'context_menu\'}}</span>\n    </a>\n    <a class="item" ng-class="{active:module==\'setting\'}" ng-href="{{PROJECT.project_path}}/setting" ng-if="isProject">\n        <i class="big settings icon"></i>\n        <span class="menu-title">{{\'setting\' | i18n:\'context_menu\'}}</span>\n    </a>\n\n    <span class="item divider"></span>\n    <div class="scroll-holder" ng-if="isProject"></div>\n</div>\n'),
a.put("common/directives/emoji/emoji_dropdown.html",'<div class="ui emotion box top right pointing dropdown " ng-mouseleave="hidePreview($event)">\n    <div class="menu">\n        <div ng-show="!tabs_bottom">\n            <div class="item">\n                <div class="tabs clearfix">\n                    <div class="tab" ng-class="{active: tab === 0}" ng-click="tab = 0">\n                        经典\n                    </div>\n                    <div class="tab" ng-class="{active: tab === 1}" ng-show="!basicEmoji" ng-click="tab = 1">\n                        洋葱猴\n                    </div>\n                    <div class="tab" ng-class="{active: tab === 2}" ng-show="!basicEmoji" ng-click="tab = 2">\n                        中秋\n                    </div>\n                </div>\n                <a style="position:absolute;top:12px;right:12px;color:#2d59a2;" href="http://monkey.coding.io/">\n                    <i class="coding monkey icon" style="margin-right: 3px;"></i>提交专属表情\n                </a>\n            </div>\n        </div>\n        <div class="item">\n            <div>\n                <div class="emotions coding clearfix" ng-style="{\'display\':tab === 2 ? \'block\' : \'none\', minHeight: \'220px\'}" ng-show="!basicEmoji">\n                    <ul style="width: 100%">\n                        <li class="festival-emoji" ng-repeat="fe in festival_emojis"\n                            code="{{::fe.code}}"\n                            ng-mouseover="preview($event)"\n                            index="{{::$index}}"\n                            w="6"\n                            h="6"\n                            ng-click="insertEmoji($event)"\n                            code-image="{{::(\'/static/festival-emojis/preview/\'+ fe.image +\'.gif\')}}"\n                            ng-style="::position_festival($index)"></li>\n                    </ul>\n                    <div class="emotion-preview">\n                        <div>\n                            <img src=""/>\n                            <p class="emotion-word"></p>\n                        </div>\n                    </div>\n                </div>\n                <div class="emotions coding clearfix" ng-style="{\'display\':tab === 1 ? \'block\' : \'none\'}" ng-show="!basicEmoji">\n                    <ul style="width: 100%">\n                        <li class="coding-emoji" ng-repeat="ce in coding_emotions"\n                            code="{{::ce.code}}"\n                            ng-mouseover="preview($event)"\n                            index="{{::$index}}"\n                            w="6"\n                            h="6"\n                            ng-click="insertEmoji($event)"\n                            code-image="{{::(\'/static/coding-emotions/\'+ ce.image +\'.png\')}}"\n                            ng-style="::position_monkey($index)"></li>\n                    </ul>\n                    <div class="emotion-preview">\n                        <div>\n                            <img src=""/>\n                            <p class="emotion-word"></p>\n                        </div>\n                    </div>\n                </div>\n                <div class="emotions emojis clearfix" ng-style="{\'display\':tab === 0 ? \'block\' : \'none\'}">\n                    <ul style="width: 100%">\n                        <li class="emoji" ng-repeat="emoji in emojis"\n                            code="{{::emoji}}"\n                            ng-mouseover="preview($event)"\n                            index="{{::$index}}"\n                            w="12"\n                            h="7"\n                            ng-click="insertEmoji($event)"\n                            code-image="{{::(\'/static/emojis/\' + emoji +\'.png\')}}"\n                            ng-style="::position($index)"></li>\n                    </ul>\n                    <div class="emotion-preview"><img src=""/></div>\n                </div>\n            </div>\n        </div>\n        <div ng-show="tabs_bottom">\n            <div class="item">\n                <div class="tabs clearfix">\n                    <div class="tab" ng-class="{active: tab === 0}" ng-click="tab = 0">\n                        经典\n                    </div>\n                    <div class="tab" ng-class="{active: tab === 1}" ng-show="!basicEmoji" ng-click="tab = 1">\n                        洋葱猴\n                    </div>\n                    <div class="tab" ng-class="{active: tab === 2}" ng-show="!basicEmoji" ng-click="tab = 2">\n                        中秋\n                    </div>\n                </div>\n                <a style="position:absolute;top:12px;right:12px;color:#2d59a2;" href="http://monkey.coding.io/">\n                    <i class="coding monkey icon" style="margin-right: 3px;"></i>提交专属表情\n                </a>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/exp/tpl/exp.html",'<div class="experiment-switchers">\n    <h3>Coding 前端体验中心</h3>\n    <div class="exp-wrapper">\n        <ul>\n            <li ng-repeat="exp in exps" ng-init="id = exp.name + \'-checkbox\';">\n                {{ exp.name }} :\n                <div class="ui toggle checkbox">\n                    <input type="checkbox"\n                           ng-model="exp.value"\n                           id="{{ id }}"\n                           ng-change="onSwitchToggle(exp)">\n                    <label for="{{ id }}"></label>\n                </div>\n            </li>\n        </ul>\n    </div>\n    <div class="exp-password">\n        <input type="password" placeholder="请输入密码" ng-model="password" cg-enter="onPassword(password)">\n        <a class="ui button green small" ng-click="onPassword(password)">\n            <span ng-if="!checked">确认</span>\n            <span ng-if="checked">更新</span>\n        </a>\n    </div>\n    <i class="close icon" ng-click="onExpClose()"></i>\n</div>'),a.put("common/directives/feedEditor/tpl/feed_editor.html",'<div class="feed-editor" cg-page-scroll>\n    <div class="avatar">\n        <a ng-href="{{USER.path}}"><img class="ui avatar42 image" ng-src="{{USER.avatar}}"></a>\n    </div>\n    <div class="editor" ng-init="show_preview = false">\n        <div class="ui inverted dimmer" ng-class="{active:sending}"><i class="loading icon"></i></div>\n        <div ng-transclude\n             ng-style="{\'display\':show_preview?\'none\':\'block\'}">\n        </div>\n        <div class="preview" ng-class="preview_mode" ng-click="togglePreview()"\n             ng-style="{\'display\':show_preview?\'block\':\'none\'}">\n            <div class="markdown content bubble preview-content"></div>\n        </div>\n    </div>\n    <div class="toolbar">\n        <i ng-if="!topics.length > 0" class="icon help tip" style="cursor: pointer;"\n           data-html="<div class=\'content\'>冒泡是 Coding.net 为方便程序开发者们进行交流、享受技术开发乐趣而打造的即时状态更新功能。支持 Markdown 语法，Emoji 表情，1M 以下的图片上传，预览功能等。<br/>* 用户发布的冒泡是全站可见的，同时会在好友的动态墙上推送，并支持评论和回复功能。<br/><a href=\'/faq/account/user.html#什么是冒泡？-可以在冒泡干嘛？\' target=\'_blank\' >更多帮助<i class=\'icon double angle right\'></i></a></div>"\n           cg-help-popup=""></i>\n        <a ng-if="topics.length > 0" href="javascript:void(0)" class="gray topic"\n           ng-click="insertTopic(topic.name)"\n           title="{{::(\'#\' + topic.name + \'#\')}}"\n           ng-repeat="topic in topics track by $index">\n            <span class="topic-anchor">#</span>\n            <span class="content ellipsis">{{::topic.name}}</span>\n            <span class="topic-anchor">#</span></a>\n        <ul>\n            <li title="冒泡预览" class="btn-preview"\n                ng-click="togglePreview()">\n                <i class="ui icon" style="display: inline-block;"\n                   ng-class="{\'hide\':show_preview,\'unhide\':!show_preview}"></i>\n            </li>\n            <li title="插入代码" class="btn-code" ng-click="insertCode()">\n                <i class="ui code icon"></i>\n            </li>\n            <li title="插入图片" class="btn-photo" ng-click="insertImage()">\n                <i class="ui photo icon"\n                   ng-class="{\'loading\': img_uploading, \'photo\': !img_uploading}"></i>\n            </li>\n            <li title="插入表情" class="btn-emoji" ng-if="feedContext">\n                <i class="icon smile" cg-emotion-btn content="$content" on-change="onInsertEmoji" editor="{{feedContext}} [cg-feed-editor-textarea]" ></i>\n            </li>\n            <li title="发布冒泡" class="btn-submit" ng-click="submit();">\n                <i class="clockwise rotated level down icon" style="margin: 0;"></i>\n            </li>\n        </ul>\n\n    </div>\n    <input class="insert_img" class="hide" type="file" name="tweetImg"\n           cg-file-upload="insert_image_setting" accept="image/*" style="display: none;"/>\n</div>\n'),a.put("common/directives/feedEditor/tpl/message_editor.html",'<div class="item left form feed-editor">\n    <a class="sender" ng-href="{{USER.path}}"><img class="ui avatar image" ng-src="{{USER.avatar}}"></a>\n\n    <div class="content arrow message-text">\n        <div ng-transclude\n             ng-style="{\'display\':show_preview?\'none\':\'block\'}">\n        </div>\n        <div class="preview" ng-class="preview_mode" ng-click="togglePreview()"\n             ng-style="{\'display\':show_preview?\'block\':\'none\'}"\n             style="margin:0;margin-bottom:10px;border:0;box-shadow:none">\n            <div class="markdown content preview-content"></div>\n        </div>\n        <div class="meh-photo clearfix">\n            <span>\n                <i class="ui icon" ng-click="togglePreview()"\n                   ng-class="{\'hide\':show_preview,\'unhide\':!show_preview}"\n                   style="display: inline-block;"></i>\n                <i class="ui code icon" ng-click="insertCode()"></i>\n                <i class="ui photo icon" ng-click="insertImage()"\n                   ng-class="{\'loading\': img_uploading, \'photo\': !img_uploading}"></i>\n                <i class="icon smile" cg-emotion-btn content="$content" on-change="onInsertEmoji" editor="{{ feedContext }} [cg-feed-editor-textarea]"></i>\n            </span>\n        </div>\n    </div>\n    <div class="left floated positive ui button send"\n         ng-click="submit();" ng-if="!sending" style="width:110px">发送\n    </div>\n    <div class="left floated positive ui button send" ng-if="sending"><i class="loading icon"></i>发送中</div>\n</div>\n<input class="insert_img" class="hide" type="file" name="tweetImg"\n       cg-file-upload="insert_image_setting" style="display: none;"/>\n'),a.put("common/directives/feedEditor/tpl/message_editor_modal.html",'<style>\n    .message-editor-modal.feed-editor{padding-left:0}\n    .message-editor-modal.feed-editor > .preview{margin:0;margin-bottom:10px;border:0;overflow:auto;border: 1px solid #ddd;width:auto;margin:0;border-bottom:0;height:8em;}\n    #send-message-modal .preview > div img{width:auto}\n    #send-message-modal .message-editor-modal .ui.top.right.pointing.dropdown .menu{top:auto;bottom:24px;}\n    #send-message-modal .ui.top.right.pointing.emotion.box .menu:after{display:none;}\n</style>\n<div class="feed-editor message-editor-modal">\n    <div ng-transclude\n         ng-style="{\'display\':show_preview?\'none\':\'block\'}">\n    </div>\n    <div class="preview"  ng-class="preview_mode" ng-click="togglePreview()"\n         ng-style="{\'display\':show_preview?\'block\':\'none\'}">\n        <div class="markdown content preview-content"></div>\n    </div>\n    <div class="meh-photo clearfix">\n        <span class="action">\n            <i class="ui icon" ng-click="togglePreview()"\n               ng-class="{\'hide\':show_preview,\'unhide\':!show_preview}"\n               style="display: inline-block;"></i>\n            <i class="ui code icon" ng-click="insertCode()"></i>\n            <i class="ui photo icon" ng-click="insertImage()"\n               ng-class="{\'loading\': img_uploading, \'photo\': !img_uploading}"></i>\n            <i class="icon smile" cg-emotion-btn content="$content" on-change="onInsertEmoji" editor="{{feedContext}} [cg-feed-editor-textarea]" tabs-bottom="true" ng-if="feedContext"></i>\n        </span>\n    </div>\n    <input class="insert_img" class="hide" type="file" name="tweetImg"\n           cg-file-upload="insert_image_setting" style="display: none;"/>\n</div>\n'),a.put("common/directives/feedEditor/tpl/project_tweet.html",'<style>\n    .project-tweet-editor {\n        position: relative;\n        z-index: 99;\n    }\n\n    .project-tweet-editor textarea {\n        display: block;\n        padding: 8px;\n        font-size: 14px;\n        border: 1px solid #ddd;\n        background: #FFF;\n        border-radius: 3px;\n        color: rgba(0, 0, 0, 0.7);\n        outline: none;\n        resize: none;\n        height: 16px;\n        width: 96%;\n    }\n\n    .project-tweet-editor .toolbar {\n        padding-top: 5px;\n    }\n\n    .project-tweet-editor .toolbar ul {\n        float: right;\n    }\n\n    .project-tweet-editor .toolbar ul,\n    .project-tweet-editor .toolbar ul li {\n        list-style: none;\n        padding: 0;\n        margin: 0;\n    }\n    .project-tweet-editor .toolbar > ul > li {\n        float: left;\n        font-size: 16px;\n        margin-right: 5px;\n        cursor: pointer;\n        height: 20px;\n        width: 20px;\n    }\n</style>\n<div class="project-tweet-editor">\n    <div class="editor" ng-init="show_preview = false">\n        <div class="ui inverted dimmer" ng-class="{active:sending}"><i class="loading icon"></i></div>\n        <div ng-transclude\n             ng-style="{\'display\':show_preview?\'none\':\'block\'}">\n        </div>\n        <div class="preview" ng-class="preview_mode" ng-click="togglePreview()"\n             ng-style="{\'display\':show_preview?\'block\':\'none\'}">\n            <div class="markdown content bubble preview-content"></div>\n        </div>\n    </div>\n    <div class="toolbar" style="display: none;">\n        <ul>\n            <li title="冒泡预览" class="btn-preview"\n                ng-click="togglePreview()">\n                <i class="ui icon" style="display: inline-block;"\n                   ng-class="{\'hide\':show_preview,\'unhide\':!show_preview}"></i>\n            </li>\n            <li title="插入代码" class="btn-code" ng-click="insertCode()">\n                <i class="ui code icon"></i>\n            </li>\n            <li title="插入图片" class="btn-photo" ng-click="insertImage()">\n                <i class="ui photo icon"\n                   ng-class="{\'loading\': img_uploading, \'photo\': !img_uploading}"></i>\n            </li>\n            <li class="btn-emoji">\n                <i class="icon smile" cg-emotion-btn content="$content" on-change="onInsertEmoji" tabs-bottom="{{ tabs_bottom }}" editor="{{feed_context}} [cg-feed-editor-textarea]"></i>\n            </li>\n            <li title="发布冒泡" class="btn-submit" ng-click="submit();">\n                <i class="clockwise rotated level down icon" style="margin: 0;"></i>\n            </li>\n        </ul>\n    </div>\n    <input class="insert_img" class="hide" type="file" name="tweetImg"\n           cg-file-upload="insert_image_setting" style="display: none;"/>\n</div>\n'),a.put("common/directives/flash/tpl/flash.html",'<div class="cg flash center" ng-class="{active: messages && messages.length>0}" id="global-flash">\n    <i class="ui close icon" ng-click="onClose()"></i>\n    <div class="outer">\n        <div class="active message {{message.status}}"\n             ng-repeat="message in messages.slice(0,limit)"\n             ng-switch="message.status">\n            <i class="ui smile icon" ng-switch-when="success"></i>\n            <i class="ui frown icon" ng-switch-when="fail"></i>\n            <span ng-click="onMessageClick($event)"\n                  ng-bind-html="message.content"></span>\n        </div>\n    </div>\n    <div class="more" ng-if="messages.length>limit" ng-click="showMore(limit);">\n         <i class="ui double angle down icon"></i>More({{messages.length - limit -1}})\n    </div>\n</div>\n'),a.put("common/directives/gallery/tpl/gallery.html",'<div class="gallery">\n    <a class="close-wrapper" href="javascript:void(0)" ng-click="closeGallery($event)">\n        <i class="icon close"></i>\n    </a>\n    <div class="gallery-wrapper" style="height:100%" ng-click="closeGallery($event)">\n        <div class="gallery-content" cg-prev-and-next="onImageNavChange($event);"\n             cg-prev-and-next-off="!current_image_url"\n             cg-esc="onImageCancel()"\n             cg-esc-off="!current_image_url">\n            <a class="prev" href="javascript:void(0)" ng-click="prev($event)" ng-if="gallery_index !== undefined && gallery_index !== 0"><i class="angle left icon"></i></a>\n            <i class="icon loading"></i>\n            <div class="gallery-image-show">\n                <img class="gallery-image" ng-src="{{current_image_url}}"/>\n                <div class="gallery-origin"><a class="origin-url" ng-href="{{current_image_url}}" target="_blank">查看原图</a></div>\n            </div>\n            <a class="next" href="javascript:void(0)" ng-click="next($event)" ng-if="gallery_index !== undefined && gallery_index + 1 < links.length"><i class="angle right icon"></i></a>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/gitDirectives/diffstat/tpl/diffstat.html",'<span class="diffstat" title="{{diffstat.insertions || 0}} insertions & {{diffstat.deletions || 0}} deletions">\n    <span class="text-diff-added" ng-if="diffstat.insertions > 0">\n        +{{diffstat.insertions}}\n    </span>\n    <span class="text-diff-deleted" ng-if="diffstat.deletions">\n        −{{diffstat.deletions}}\n    </span>\n</span>\n'),a.put("common/directives/gitDirectives/uploadFiles/tpl/uploadFiles.html",'<div class="ui edit">\n    <style type="text/css">\n    .upload-zone-tips {\n      color: #999;\n      cursor: default;\n    }\n    .upload-zone-tips:hover {\n      color: #A1CF64;\n      cursor: pointer;\n    }\n    </style>\n    <div class="ui edit-view">\n        <div class="file-box">\n            <div id="upload-zone">\n                <input id="upload-files" type="file" name="upload-input" multiple style="display: none;">\n                <div class="empty center list file-upload-zone" style="padding: 100px 10px;">\n                    <span class="upload-zone-tips">\n                        <span style="font-size:16px;line-height: 40px;">\n                            <i class="upload cloud icon"></i>\n                            <span ng-if="files.length==0">还未上传任何文件，</span>\n                            <span>点击或将文件拖拽至此页面上传！</span>\n                            <br/>\n                        </span>\n                        <span>支持所有文件格式，单个文件不超过 20M。</span>\n                    </span>\n                </div>\n            </div>\n            <div id="dropped-files" ng-show="droppedFiles !== null" style="border-top: 1px solid #ccc;">\n                <table class="ui basic table">\n                    <tbody>\n                        <tr ng-repeat="(path, file) in droppedFiles" class="ui form" style="width: 100%;">\n                            <td class="ellipsis" style="font-size: 13px; line-height: 18px;">{{ path }}</td>\n                            <td style="font-size: 13px; line-height: 18px; width: 100px;">{{ file.size | bytes:2 }}</td>\n                            <td style="width: 10px;">\n                                <a ng-click="removeDroppedFile(path)" href="#">\n                                    <i class="remove icon" style="color: #d04d4d;"></i>\n                                </a>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        <div class="ui form">\n            <div class="field commit-message">\n                <div class="form-opt clearfix">\n                    <span><i class="comment icon"></i>提交说明</span>\n                </div>\n                <input id="last_commit" name="last_commit" type="hidden" value="{{lastCommit.sha}}"/>\n                <textarea id="commit-message" name="message" ng-model="message" placeholder="Add files via upload"></textarea>\n            </div>\n        </div>\n    </div>\n    <label class="right floated ui small primary button" ng-click="submit(message)" ng-show="submitting === false">\n      <i class="pencil icon"></i>提交到{{ref | decodeUri}}分支\n    </label>\n    <label class="right floated ui small primary button disabled" ng-show="submitting === true">\n      已完成 {{submitProgress}}% <i class="loading icon"></i>\n    </label>\n    <a class="right floated secondary ui small button" ng-href="{{tree_url}}" ng-show="submitting === false">取消</a>\n</div>\n'),a.put("common/directives/hoverCard/tpl/hover_card.html",'<div class="user-hover-card ui left pointing dropdown top up" cg-dropdown dropdown-setting="dropdown_settings">\n    <div ng-transclude></div>\n    <div class="menu">\n        <div class="gray loading-wrapper" ng-if="loading"><i class="icon loading"></i>加载中</div>\n        <div class="menu-inner" ng-if="!loading">\n            <div class="card-user-avatar">\n                <a href="javascript:void(0)" class="gray" ng-click="toSpace(card)">\n                    <img ng-src="{{::card.avatar}}" width="96" height="96" style="border-radius: 48px;">\n                </a>\n            </div>\n            <div class="info">\n                <div class="name-wrapper">\n                    <a href="javascript:void(0)" class="user-name ellipsis" ng-click="toSpace(card)" style="max-width:200px"><span>{{::card.name}}</span></a>\n                    <i class="icon male user-sex" ng-if="card.sex === 0"></i>\n                    <i class="icon female user-sex" ng-if="card.sex === 1"></i>\n                </div>\n                <span class="user-slogan">{{::card.slogan}}</span>\n                <span class="actions">\n                    <a href="javascript:void(0)" class="ui button small green" ng-if="card.global_key !== USER.global_key && !card.followed"\n                       ng-click="follow(card)"><i class="icon loading" ng-if="following"></i>关注</a>\n                    <a href="javascript:void(0)" class="ui down small gray button"\n                       ng-if="card.global_key !== USER.global_key && card.followed" ng-click="unfollow(card)"><i class="icon loading" ng-if="unfollowing"></i>取消关注</a>\n                    <a href="javascript:void(0)" class="ui button small" ng-click="showSendMsgDialog(card)">给 TA 私信</a>\n                </span>\n            </div>\n            <div class="content-wrapper">\n                <div class="content"><a href="javascript:void(0)" ng-click="toFriends(card)"><span class="num">{{::card.follows_count | friendlyNumber}}</span><span>关注</span></a></div>\n                <div class="content center"><a href="javascript:void(0)" ng-click="toFans(card)"><span class="num">{{::card.fans_count | friendlyNumber}}</span><span>粉丝</span></a></div>\n                <div class="content"><a  href="javascript:void(0)" ng-click="toBubble(card)"><span class="num">{{::card.tweets_count | friendlyNumber}}</span><span>冒泡</span></a></div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/imageLoading/tpl/img.html",'<div class="empty list center" style="width: 100%; margin-top: 10px;">\n    <div ng-if="img_url.length > 0 && img_url !== false">\n        <img ng-src="{{img_url}}" style="max-height: 300px; max-width: 100%;"/>\n    </div>\n    <div ng-if="img_url.length === 0">\n        <i class="loading icon" ng-if="messages.loading"></i>{{messages.loading}}\n    </div>\n    <div ng-if="img_url === -1">\n        <i class="coffee icon" ng-if="messages.empty"></i>{{messages.empty}}\n    </div>\n    <div ng-if="img_url === false">\n        <i class="coffee icon" ng-if="messages.fail"></i>{{messages.fail}}\n    </div>\n</div>\n'),a.put("common/directives/imagePicker/tpl/file-folders.html",'<div class="image-picker-file-folder">\n    <!-- private project -->\n    <div ng-if="project_id > 0">\n        <ul class="first-level-folder folder-list" ng-if="in_folder === 0">\n            <li class="ellipsis folder"\n                title="默认文件夹"\n                ng-if="!hide_default_folder"\n                ng-click="openDefaultFolder($event)"\n                >\n                <i class="folder icon"></i>默认文件夹\n            </li>\n            <li class="ellipsis folder"\n                title="移出目录"\n                style="opacity: .6;"\n                ng-if="justFolder && isSubFolder"\n                ng-click="openTopFolder()"\n            >\n                <i class="folder outline icon"></i>移出目录\n            </li>\n            <li class="ellipsis folder"\n                ng-repeat="folder in current_folders"\n                title="{{ folder.name }}"\n                ng-click="openFolder($event, folder)">\n                <i class="folder icon"></i>{{ folder.name }}\n            </li>\n        </ul>\n        <ul class="second-level-folder folder-list" ng-if="in_folder > 0">\n            <li class="ellipsis folder"\n                ng-class="{\'with-image\': images.length > 0}"\n                ng-repeat="folder in current_folders"\n                title="{{ folder.name }}"\n                ng-click="openFolder($event, folder)">\n                <i class="folder icon"></i>{{ folder.name }}\n            </li>\n            <li class="ellipsis image"\n                ng-class="{selected: image.selected}"\n                title="{{ image.name }}"\n                ng-click="toggleImageSelect(image)"\n                ng-repeat="image in images">\n                <i class="icon green ok sign"></i>\n                <!-- set img width and height property for lazy load plugin -->\n                <img class="lazy-load" ng-datasrc="{{ image.preview }}" alt="{{ image.name }}" width="90" height="90">\n                <p class="ellipsis" ng-bind="image.name"></p>\n            </li>\n        </ul>\n    </div>\n    <!-- public project -->\n    <div ng-if="project_id === null"></div>\n</div>'),a.put("common/directives/imagePicker/tpl/image-picker.html",'<div class="ui pointing dropdown image-picker-dropdown" ng-class="mode">\n    <div ng-transclude></div>\n    <div class="menu" ng-show="project_id">\n        <div class="picker-wrapper flex-box flex-direction-column">\n            <header class="flex-none flex-box flex-direction-row"\n                    cg-cascade-menu>\n                <div class="ui small white button"\n                     id="pagedown-upload-button"\n                     ng-show="in_folder"\n                     cg-image-picker-upload\n                     on-image-upload="onImageUpload"\n                     on-upload-progress="onUploadProgress"\n                     project-id="project_id"\n                     folder-id="folder_id">\n                </div>\n            </header>\n            <article class="flex-auto-justify lazy-loader-container"\n                     cg-perfect-scroll-bar="update_prefect_scroll_bar">\n                <div cg-file-folders\n                     project-id="project_id"\n                     start-init="start_init"\n                     on-folder-change="onFolderChange"\n                     on-file-select-toggle="onFileSelectToggle"></div>\n            </article>\n            <footer class="flex-none">\n                <div class="selected-count">\n                    已选 {{selected_images_length ? selected_images_length : 0}} 张\n                </div>\n                <div class="ui small green button" ng-click="selectDone()">确认插入</div>\n                <div class="ui small button" ng-click="closeDropdown()">取消</div>\n            </footer>\n        </div>\n    </div>\n</div>'),a.put("common/directives/imagePicker/tpl/menu.html",'<div class="left flex-none ellipsis">\n    <span ng-if="left && !left.action">\n        <i class="icon" ng-class="left.icon" ng-if="left.icon"></i>\n        <span ng-bind="left.text"></span>\n    </span>\n    <div class="button" ng-click="actionAgent($event, left);" ng-if="left && left.action">\n        <i class="icon" ng-class="left.icon" ng-if="left.icon"></i>\n        <span ng-bind="left.text"></span>\n    </div>\n</div>\n<div class="center flex-auto-justify ellipsis">\n    <span ng-if="center && !center.action">\n        <i class="icon" ng-class="center.icon" ng-if="center.icon"></i> <span ng-bind="center.text"></span>\n    </span>\n    <div class="button" ng-click="actionAgent($event, center);" ng-if="center && center.action">\n        <i class="icon" ng-class="center.icon" ng-if="center.icon"></i> <span ng-bind="center.text"></span>\n    </div>\n</div>\n<div class="right flex-none ellipsis">\n    <span ng-if="right && !right.action">\n        <i class="icon" ng-class="right.icon" ng-if="right.icon"></i>\n        <span ng-bind="right.text"></span>\n    </span>\n    <div class="button"\n         ng-if="right && right.action"\n         ng-class="right.buttonClass"\n         ng-click="actionAgent($event, right);">\n        <i class="icon"\n           ng-class="right.icon"\n           ng-if="right.icon"></i>\n        <span ng-bind="right.text"></span>\n    </div>\n    <ng-transclude ng-if="!right || !right.action && !right.text"/>\n</div>\n'),a.put("common/directives/imagePicker/tpl/upload-image.html",'<div class="image-upload">\n    <div class="ui form" file-upload="upload_setting">\n        <input type="file"\n               name="file" accept="image/*"\n               class="image-upload-input"\n               multiple\n               style="display:none;">\n        <div class="image-upload-dropzone"\n             ng-class="size"\n             cg-trigger-upload="upload($callback);">\n            <div ng-show="!uploading">\n                <i class="upload cloud icon"></i>上传\n            </div>\n            <div ng-show="uploading">\n                <div file-upload-progress="upload_progress">\n                    <i class="loading icon"></i>{{num}}%\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/imagePicker/tpl/url-image.html",'<div class="url-image-import">\n    <div class="image-preview" ng-if="url">\n        <div class="image" ng-show="!loading && is_valid_image">\n        </div>\n        <img class="no-pic" src="https://dn-coding-net-production-static.qbox.me/static/00675e5d336cf413a91edec4a3525894.png" ng-if="loaded && !is_valid_image"></img>\n        <div class="loading-wrapper" ng-if="loading">\n            <i class="loading icon"></i>正在加载图片...\n        </div>\n    </div>\n    <div class="ui form">\n        <div class="inline field">\n            <label>图片链接：</label>\n            <input type="text" ng-model="url" cg-enter="doImport()" placeholder="请填入需要插入的图片链接">\n        </div>\n    </div>\n</div>'),a.put("common/directives/importProjectImage/tpl/import_image.html",'<div class="just-wrapper">\n    <style type="text/css">\n    #project-files-wrapper{position:relative;}\n    #project-files-wrapper .dividing.header{font-size: 22px;padding-top: 10px;padding-left:20px;}\n    #project-folder-list{width:230px;left: 0; top: 0;padding: 20px 0;}\n    #project-folder-list > .vertical.menu{width: auto;max-height: 250px;overflow-y: auto;overflow-x: hidden;}\n    #project-folder-list .folder.item{padding: 12px 20px;margin-bottom: 0;border-radius: 0;font-size: 14px;}\n    #project-folder-list a.item i.icon {float: none;margin: 0 .25em 0 0;}\n    #project-folder-list .folder.item i.action.icon{cursor:pointer;margin:0 0 0 3px;display:none;position: absolute;right: 10px;}\n    #project-folder-list .folder.active.item:hover i.action.icon{display:inline;}\n    #project-folder-list .folder.active.item:hover i.action.edit.icon:hover{color:cornflowerblue;}\n    #project-folder-list .folder > .count{position: absolute; right: 22px; top: 12px;}\n    #project-folder-list .folder.no-default.editing > .count{display:none;}\n    #project-folder-list .folder.sub-folder.item {padding-left: 25px;}\n    #project-folder-list .sep{width: 100%;height: 1px;background: #CCC;visibility: visible;margin: 20px 0;}\n    #project-file-list{padding: 20px 0 0 0;height: 100%;width:auto;border-left: 1px solid #CCC;margin-left: 230px;position: relative;}\n    #project-file-list .just-wrapper{margin: 30px;}\n    #project-file-list .file-icon.img,\n    #project-file-list .file > .uploading-file{width: 80px;height: 80px;margin: 0 10px 10px 0;}\n    #project-file-list .file > .ui.image{cursor: pointer;border-radius: 0;border:1px solid #F7F6F2;width: 80px;height: 80px;float: left;margin: 0 10px 10px 0;}\n    #project-file-list .file > .ui.image .file-icon{width: 80px; height: 80px;line-height: 80px;}\n    #project-file-list .file > .ui.image.selected{border:1px solid #D95C5C;}\n    .folder-image-list{max-height: 280px;overflow-y: auto;}\n    #import-image-dropzone{font-size: 14px;text-align:center;margin-bottom: 20px;\n        border: 2px dashed #ccc;height: 70px;border-radius: 15px;line-height: 70px;cursor: pointer;}\n    </style>\n    <div class="ui grid">\n        <div id="project-files-wrapper" class="equal height row">\n            <div id="project-folder-list" class="column">\n                <div class="ui secondary vertical menu">\n                    <a ng-show="!PROJECT.is_public" class="folder item" href="javascript:void(0);" ng-click="openFolder(0, $event);" ng-class="{active: folder_id == 0}">\n                        <i class="folder icon" ng-class="{open: folder_id == 0}"></i>默认文件夹<span class="count">({{default_folder_count || 0}})</span>\n                    </a>\n                    <div ng-repeat-start="folder in folders"></div>\n                    <a ng-show="!PROJECT.is_public" class="folder item no-default"\n                       href="javascript:void(0);"\n                       ng-class="{active: folder_id == folder.file_id}"\n                       ng-click="openFolder(folder, $event);"\n                       title = "{{folder.name}}">\n                        <span class="ellipsis" style="width: 140px;display: inline-block;">\n                            <i class="folder icon" ng-class="{open: folder_id == folder.file_id}"></i><span ng-bind-html="folder.name"></span>\n                        </span>\n                        <span class="count">({{folder.count || 0}})</span>\n                    </a>\n                    <a ng-show="!PROJECT.is_public" class="sub-folder folder item no-default"\n                       href="javascript:void(0);"\n                       ng-repeat="sfolder in folder.sub_folders"\n                       ng-class="{active: folder_id == sfolder.file_id}"\n                       ng-click="openFolder(sfolder, $event);"\n                       title = "{{sfolder.name}}">\n                        <span class="ellipsis" style="width: 140px;display: inline-block;">\n                            <i class="folder icon" ng-class="{open: folder_id == sfolder.file_id}"></i><span ng-bind-html="sfolder.name"></span>\n                        </span>\n                        <span class="count">({{sfolder.count || 0}})</span>\n                    </a>\n                    <div ng-repeat-end></div>\n                </div>\n                <div class="ui secondary vertical menu">\n                    <div ng-show="!PROJECT.is_public" class="sep"></div>\n                    <a ng-show="PROJECT.is_public" class="folder item" style="cursor: pointer;" ng-click="changeImportType(\'folder\');" ng-class="{active: import_type === \'folder\'}">\n                        <span class="coding floated left"><i class="photo icon"></i></span>上传图片\n                    </a>\n                    <a class="folder item" style="cursor: pointer;" ng-click="changeImportType(\'url\');" ng-class="{active: import_type === \'url\'}">\n                        <span class="coding floated left"><i class="url icon"></i></span>插入图片 URL\n                    </a>\n                </div>\n            </div>\n            <div id="project-file-list" class="column">\n                <div class="ui dividing header">\n                    <span ng-show="!PROJECT.is_public && import_type === \'folder\'">从文件插入图片</span>\n                    <span ng-show="PROJECT.is_public && import_type === \'folder\'">上传图片</span>\n                    <span ng-show="import_type === \'url\'">插入图片 URL</span>\n                </div>\n                <div class="just-wrapper" ng-show="import_type === \'folder\'">\n                    <form file-upload="importImageUploadSetting">\n                        <input type="file" name="file" id="import-image-input" style="display:none;">\n                        <div id="import-image-dropzone" ng-click="upload();">\n                            <div ng-show="!uploading">\n                                <i class="upload cloud icon"></i>\n                                <span ng-if="!PROJECT.is_public">\n                                    <span ng-show="files.length==0">还未上传任何文件，</span>点击或将文件拖拽至此上传！\n                                </span>\n                                <span ng-if="PROJECT.is_public">\n                                    <span ng-if="upload_image_url.length > 0">重新上传</span>\n                                    <span ng-if="upload_image_url.length === 0">还未上传任何文件，点击或将文件拖拽至此上传！</span>\n                                </span>\n                            </div>\n                            <div ng-show="uploading">\n                                <div file-upload-progress="upload_progress">\n                                    <i class="loading icon"></i>正在上传（{{num}}%）!\n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                    <div ng-show="!PROJECT.is_public" class="files clearfix folder-image-list">\n                        <div class="file" ng-repeat="file in files">\n                            <div class="ui image" ng-class="{selected: !!file.selected}" ng-click="addSelectedImage(file);">\n                              <span class="ui right red corner label" ng-show="!!file.selected">\n                                <i class="checkmark icon"></i>\n                              </span>\n                              <div cg-file-icon-src="file.preview" cg-file-icon="file.fileType"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div ng-show="PROJECT.is_public">\n                        <div ng-show="upload_image_url.length>0" cg-image-loading="upload_image_url" message="upload_image_messages"></div>\n                    </div>\n                    <div class="center" cg-pager="{{insert_image_pager_id}}" disabled-url-change="true"></div>\n                </div>\n                <div class="just-wrapper ui large fluid input" ng-show="import_type === \'url\'">\n                    <input type="text" id="image_url_input" ng-model="image_url" placeholder="http://"/>\n                    <div class="preview">\n                        <div cg-image-loading="image_url" message="defalut_messages"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n<div>\n'),
a.put("common/directives/input/tpl/password_twofa.html",'<div class="account-input" ng-class="{dirty: dirty}">\n    <input type="{{inputType}}" ng-model="ret.value" placeholder="{{placeholder}}"\n        ng-class="{error: !ret.valid}" ng-blur="check()" ng-keyup="check()"\n        name="password" />\n    <span ng-show="!ret.valid" class="error">{{errorMsg}}</span>\n</div>\n'),a.put("common/directives/input/tpl/phone.html",'<div class="account-input phone-input" ng-class="{dirty: dirty}">\n    <div class="countries-selector" ng-class="{error: !ret.valid}" ng-click="toggleCountriesSelector()">\n        <select ng-model="currentCountryISOCode">\n            <option ng-repeat="country in countries" value="{{country.iso_code}}" data-code="{{country.country_code}}" ng-selected="country.iso_code == \'cn\'">{{country.country}}</option>\n        </select>\n        <i class="{{currentCountry.iso_code}} flag"></i>\n        <i class="triangle down icon"></i>\n    </div>\n    <div class="current-country-code" ng-class="{error: !ret.valid}">+{{currentCountry.country_code}}</div>\n    <input ng-model="ret.value" placeholder="手机号" ng-class="{error: !ret.valid}" ng-blur="check()" ng-keyup="keyup()" ng-disabled="disabled" />\n    <span ng-show="!ret.valid" class="error">{{errorMsg}}</span>\n</div>\n'),a.put("common/directives/input/tpl/phone_code.html",'<div class="account-input phone-code" ng-class="{dirty: dirty}">\n    <input type="text" ng-model="ret.value" placeholder="手机验证码"\n        ng-class="{error: !ret.valid}" ng-blur="check()" ng-keyup="check()" />\n    <span ng-show="!ret.valid" class="error">{{errorMsg}}</span>\n    <a ng-click="submit()" ng-disabled="!phone.valid || sending">{{text}}</a>\n</div>\n<ng-include ng-if="ret.type === \'register\'" src="\'app/user/account/modal/phoneCodeCaptcha.html\'"></ng-include>\n\n'),a.put("common/directives/input/tpl/twofa.html",'<div class="account-input twofa" ng-class="{dirty: dirty}">\n    <div class="twofa-outer" ng-class="{error: !ret.valid}">\n        <div class="twofa-inner" ng-repeat="i in [0, 1, 2, 3, 4, 5]">\n            {{ i >= ret.digits.length ? \'\' : ret.digits[i] }}\n        </div>\n        <div class="twofa-cursor" ng-style="twofaCursorStyle"></div>\n        <input id="twofa-input" class="twofa-input" type="number" ng-blur="forceFocus()"\n            ng-keyup="input($event)" autofocus="autofocus" />\n        <script>document.getElementById("twofa-input").focus()</script>\n    </div>\n</div>\n'),a.put("common/directives/linkTips/tpl/tips.html",'<a class="link-tips" ng-repeat="tip in tips" ng-href="{{tip.url}}" ng-attr-target="{{tip.type == \'outer\' ? \'_blank\' : \'_self\'}}" class="gray" ng-switch="tip.type">\n    <i ng-switch-when="inner" class="green url icon" title="站内链接: {{tip.url}}"></i>\n    <i ng-switch-when="outer" class="gray url icon" title="站外链接: {{tip.url}}"></i>\n    <i ng-switch-when="attachment" class="green archive icon" title="项目附件: {{tip.url}}"></i>\n</a>\n'),a.put("common/directives/loadMore/tpl/load_more.html",'<div>\n    {{load_more_id}}\n    <div class="center empty list">\n        <i class="loading icon"></i>正在加载数据...\n    </div>\n    <div class="center empty list">\n        <i class="coffee icon"></i>没有更多数据了~\n    </div>\n    <a class="center down more" ng-href="javascript:void(0);">\n        加载更多数据\n    </a>\n</div>\n'),a.put("common/directives/loading/tpl/loading.html",'<div class="common-loading-container">\n    <div ng-if="show">\n        <div class="common-loading common-coding icon monkey" ng-style="loadingStyle"\n             style="width: 46px; height: 46px;">\n            <div class="common-loading-text" ng-style="loadingTextStyle"\n                 style="width: 46px; height: 46px; line-height: 46px;">\n                <img src="https://dn-coding-net-production-static.qbox.me/static/9025e7ebf3f2073858a74b2a2e6245a4.png" width="{{imageSize}}" height="{{imageSize}}"/>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/markdown/tpl/insert_image_modal.html",'<div class="ui tiny40 responsive modal" id="insert_image_lmd_modal">\n    <i class="close icon"></i>\n    <div class="header">插入图片</div>\n    <div class="content" style="padding: 0 1.2em;">\n        <div cg-insert-image=\'insertImages($images);\' project-dependency="PROJECT" style="height: 100%;"></div>\n    </div>\n    <div class="actions">\n        <div class="ui cancel button">取消</div>\n        <div class="ui dark gray ok button">确认</div>\n    </div>\n</div>\n'),a.put("common/directives/markdown/tpl/light.html",'<div class="light-md-editor">\n    <div class="editor" ng-class="{previewed: previewed}">\n        <div class="ui inverted dimmer" ng-class="{active: sending || previewing}"><i class="loading icon"></i></div>\n        <input type="file" style="display: none;" name="tweetImg" cg-file-upload="light_md_upload_setting"/>\n        <textarea class="editor"\n                  tabindex="{{ tab_index || 1000 }}"\n                  ng-model="content"\n                  ng-model-options="{ updateOn: \'default blur\', debounce: {\'default\': 300, \'blur\': 0} }"\n                  msd-elastic="\\n"\n                  cg-ctrl-enter="sendContent(content);"\n                  cg-at-emoji\n                  cg-at-context\n                  at-item="at_item"\n                  extra-item="extra_item"\n                  at-context-type="at_context_type"\n                  cg-refer-resource="project_dependency"\n                  cg-placeholder="{{placeholder}}"\n                  cg-textarea-editable></textarea>\n        <div class="preview"\n             ng-class="{active: previewed}"\n             ng-click="togglePreview();"\n             title="单击继续编辑">\n            <div class="markdown content">\n            </div>\n            <div class="empty" ng-if="showEmptyInfo();">\n                <i class="coffee icon"></i>没有可预览的内容！\n            </div>\n        </div>\n    </div>\n    <div class="playground">\n    </div>\n    <div class="toolbar">\n\n        <i class="icon help" ng-click="toggleHelpModal();"></i>\n        <div class="ui modal pagedown-help-modal"\n             cg-modal="pagedown_help_modal"\n             ng-include="\'common/directives/pagedown/tpl/help_modal.html\'">\n        </div>\n        <ul>\n            <li ng-if="loading"><i class="loading icon"></i></li>\n\n            <li><i class="icon"\n                   ng-class="{unhide: !previewed, hide: previewed}"\n                   ng-click="togglePreview();"\n                   data-position="top center"\n                   data-variation="inverted"\n                   data-html="预览"\n                   cg-popup></i></li>\n            <li><i class="code icon"\n                   ng-click="insertCode();"\n                   data-position="top center"\n                   data-variation="inverted"\n                   data-html="插入代码"\n                   cg-popup></i></li>\n            <li ng-if="!mode">\n                <span cg-project-image-picker\n                      dropdown-mode="dropdownMode()"\n                      project-id="project_id"\n                      on-upload-progress="onUploadProgress"\n                      image-select-done="imageSelectDone">\n                    <i class="photo icon" ng-if="!img_uploading"\n                       data-position="top center"\n                       data-variation="inverted"\n                       data-html="上传图片"\n                       cg-popup></i>\n                    <i class="loading icon" ng-if="img_uploading"\n                       data-position="top center"\n                       data-variation="inverted"\n                       data-html="图片上传中{{ upload_progress }}"\n                       cg-popup></i>\n                </span>\n            </li>\n            <!--<li><i class="smile icon"></i></li>-->\n            <li ng-if="showEnterButton()">\n              <i class="clockwise rotated level down icon"\n                 ng-click="sendContent(content)"\n                 data-position="top center"\n                 data-variation="inverted"\n                 data-html="发送"\n                 cg-popup></i>\n            </li>\n        </ul>\n    </div>\n</div>\n'),a.put("common/directives/marketing/tpl/marketing-new-year.html",'<div id="new-year-banner" ng-if="banners.large.ad && banners.min.ad">\n    <style>\n        @media only screen and (max-width: 2560px) and (min-width: 1601px) {\n            #new-year-banner {\n                width: 1200px !important;\n            }\n\n            #new-year-banner .banner {\n                height: 367px !important;\n            }\n\n            #new-year-banner .banner.expending {\n                margin-top: -255px !important;\n            }\n\n            #new-year-banner .banner.min {\n                height: 367px;\n                margin-top: -255px !important;\n            }\n        }\n\n        #new-year-banner {\n            position: relative;\n            overflow: hidden;\n            width: 980px;\n            margin: 0 auto;\n            cursor: pointer;\n        }\n\n        #new-year-banner .banner {\n            position: relative;\n            height: 300px;\n            background-repeat: no-repeat;\n            background-size: 100%;\n            webkit-transition: margin-top .6s cubic-bezier(0, 1.05, 1, 1.16);\n            -o-transition: margin-top .6s cubic-bezier(0, 1.05, 1, 1.16);\n            transition: margin-top .6s cubic-bezier(0, 1.05, 1, 1.16);\n        }\n\n        #new-year-banner .banner.expending {\n            /*webkit-transition: margin-top 1s ease-out;*/\n            /*-o-transition: margin-top 1s ease-out;*/\n            /*transition: margin-top 1s ease-out;*/\n            webkit-transition: margin-top .6s cubic-bezier(0, 1.05, 1, 1.16);\n            -o-transition: margin-top .6s cubic-bezier(0, 1.05, 1, 1.16);\n            transition: margin-top .6s cubic-bezier(0, 1.05, 1, 1.16);\n            margin-top: -200px;\n        }\n\n        #new-year-banner .banner.min {\n            position: relative;\n            height: 300px;\n            background-repeat: no-repeat;\n            background-size: 100%;\n            background-position: bottom;\n            webkit-transition: margin-top .6s cubic-bezier(0, 1.05, 1, 1.16);\n            -o-transition: margin-top .6s cubic-bezier(0, 1.05, 1, 1.16);\n            transition: margin-top .6s cubic-bezier(0, 1.05, 1, 1.16);\n            margin-top: -200px;\n        }\n\n        #new-year-banner .expend {\n            position: absolute;\n            right: 0;\n            top: 0;\n            width: 20px;\n            font-size: 12px;\n            color: #FFF;\n            background: #f66f48;\n            text-align: center;\n            cursor: pointer;\n            z-index: 100;\n            padding: 5px 0px;\n        }\n\n        #new-year-banner .expend .icon {\n            font-size: 14px;\n            display: block;\n            margin: 0 auto;\n        }\n    </style>\n    <div class="expend" data-ng-click="expand()">\n        <label ng-if="largeShow">展开</label><i class="angle double down icon" ng-if="largeShow"></i>\n        <label ng-if="!largeShow">收起</label><i class="angle double up icon" ng-if="!largeShow"></i>\n    </div>\n    <a ng-href="{{banners.large.ad.link}}" target="_blank">\n        <div class="banner" style="background-image:url(\'{{minShow?banners.min.ad.image:banners.large.ad.image}}\')"\n             ng-class="{\'expending\':largeShow,\'min\':minShow}">\n\n        </div>\n    </a>\n</div>'),a.put("common/directives/marketing/tpl/marketing-snow.html",'<div ng-if="open">\n    <canvas cg-make-snow class="snow-canvas"\n            speed=\'1\'\n            interaction=\'false\'\n            size="2"\n            count="80"\n            opacity="0.00001"\n            start-color="rgba(253,252,251,1)"\n            end-color="rgba(251,252,253,0.3)"\n            wind-power="0"\n            image="false"></canvas>\n    <canvas cg-make-snow class="snow-canvas"\n            speed=\'3\'\n            interaction=\'true\'\n            size="6"\n            count="30"\n            start-color="rgba(253,252,251,1)"\n            end-color="rgba(251,252,253,0.3)"\n            opacity="0.00001"\n            wind-power="2"\n            image="false"></canvas>\n    <canvas cg-make-snow class="snow-canvas"\n            speed=\'3\'\n            interaction=\'true\'\n            size="12"\n            count="20"\n            wind-power="-5"\n            image="https://dn-coding-net-production-static.qbox.me/48d375ae-c0c3-4cc6-845c-11bb9ab0543b.png"></canvas>\n</div>'),a.put("common/directives/pagedown/tpl/help_modal.html",'<i class="close icon"></i>\n<div class="content">\n    <table>\n        <tr>\n            <td><i class="photo icon"></i>图片</td>\n            <td>![描述](example.jpg)</td>\n            <td><span cg-cmd-ctr></span> + G</td>\n        </tr>\n        <tr>\n            <td><i class="url icon"></i>链接</td>\n            <td>[描述](https://coding.net)</td>\n            <td><span cg-cmd-ctr></span> + L</td>\n        </tr>\n        <tr>\n            <td><i class="bold icon" style="margin-right: 0;"></i>/<i class="italic icon"></i>强调</td>\n            <td>*斜体* 和 **粗体**</td>\n            <td><span cg-cmd-ctr></span> + B 和 <span cg-cmd-ctr></span> + I</td>\n        </tr>\n        <tr>\n            <td><i class="heading icon"></i>标题</td>\n            <td># 一级标题 <br> ## 二级标题 <br>...<br> ##### 五级标题</td>\n            <td><span cg-cmd-ctr></span> + H</td>\n        </tr>\n        <tr>\n            <td><i class="quote left icon"></i>引用</td>\n            <td>&gt; 一级引用 <br> &gt;&gt; 二级引用</td>\n            <td><span cg-cmd-ctr></span> + Q</td>\n        </tr>\n        <tr>\n            <td><i class="ordered list icon"></i>列表</td>\n            <td>\n                <div class="wrapper">\n                    <div class="left">\n                        1. 有序列表1 <br>\n                        2. 有序列表2 <br>\n                        3. 有序列表3\n                    </div>\n                    <div class="right">\n                        - 无序列表1 <br>\n                        - 无序列表2 <br>\n                        - 无序列表3\n                    </div>\n                </div>\n            </td>\n            <td><span cg-cmd-ctr></span> + O 和 <span cg-cmd-ctr></span> + U</td>\n        </tr>\n        <tr>\n            <td><i class="code icon"></i>代码</td>\n            <td>\n                <div class="wrapper">\n                    <div class="left">\n                        行内代码：<br>\n                        `var a = 1;`<br>\n                    </div>\n                    <div class="right">\n                        代码块：<br>```ruby<br>print \'Hello Coding\'<br>```\n                    </div>\n                </div>\n            </td>\n            <td><span cg-cmd-ctr></span> + K</td>\n        </tr>\n        <tr>\n            <td><i class="table icon"></i>表格</td>\n            <td>\n                <pre>First Header | Second Header | Third Header\n:----------- | :-----------: | -----------:\n Left        |     Center    |       Right</pre>\n             </td>\n            <td></td>\n        </tr>\n        <tr>\n            <td colspan="3" align="center"><a href="https://coding.net/help/doc/project/markdown.html" target="_blank">了解更多 Markdown 语法<i class="icon double angle right"></i></a></td>\n        </tr>\n    </table>\n</div>'),a.put("common/directives/pagedown/tpl/insert_link_modal.html",'<div class="ui tiny40 modal" id="insert_link_modal">\n    <div class="header">\n        插入链接\n        <i class="close icon"></i>\n    </div>\n    <div class="content">\n        <div class="ui medium input fluid">\n            <input type="text" ng-model="link" placeholder="https://" cg-enter="insertNow();">\n        </div>\n    </div>\n    <div class="actions">\n        <div class="ui cancel button">取消</div>\n        <div class="ui green ok button">确认</div>\n    </div>\n</div>\n'),a.put("common/directives/pagedown/tpl/insert_table_modal.html",'<div class="ui tiny40 modal" id="insert_table_modal">\n    <div class="header">\n        添加表格\n        <i class="close icon"></i>\n    </div>\n    <div class="content">\n        <div class="ui input">\n            <label>单元格数</label>\n            <span>\n                行数\n                <input type="number" max="100" min="1" ng-model="row" />\n            </span>\n            <span>\n                列数\n                <input type="number" max="100" min="1" ng-model="col" />\n            </span>\n        </div>\n        <div class="ui input">\n            <label>对齐方式</label>\n            <span>\n                <input ng-model="align" value="justify" name="align" type="radio" /><i class="icon align justify"></i>\n                <input ng-model="align" value="left" name="align" type="radio" /><i class="icon align left"></i>\n                <input ng-model="align" value="center" name="align" type="radio" /><i class="icon align center"></i>\n                <input ng-model="align" value="right" name="align" type="radio" /><i class="icon align right"></i>\n            </span>\n        </div>\n    </div>\n    <div class="actions">\n        <div class="ui cancel button">取消</div>\n        <div class="ui green ok button">确认</div>\n    </div>\n</div>'),a.put("common/directives/pagedown/tpl/pagedown.html",'<div class="wmd-panel pagedown" ng-class="{\'full-screen\': button.full_screen}" cg-page-scroll="false">\n    <div id="{{::(\'wmd-button-bar\' + id)}}">\n        <div class="extend-wmd-button"\n             style="right: 15px;"\n             ng-click="toggleHelpModal();">\n            <i class="icon help"></i>\n        </div>\n        <div class="extend-wmd-button"\n             title="{{ button.previewing ? \'关闭预览\' : \'预览\'}}"\n             style="right: 45px;"\n             ng-click="togglePreview();">\n            <i class="icon" ng-class="{unhide: !button.previewing, hide: button.previewing}"></i>\n        </div>\n        <div class="extend-wmd-button"\n             title="{{ button.full_screen ? \'退出全屏\' : \'全屏\'}}"\n             style="right: 75px;"\n             ng-click="toggleFullscreen();">\n            <i class="icon resize" ng-class="{\'full\': !button.full_screen, \'small\': button.full_screen}"></i>\n        </div>\n        <div class="pagedown-toc-dropdown extend-wmd-button ui icon dropdown top right pointing"\n             title="目录树"\n             style="right: 105px; padding-top: 0px; padding-bottom: 0px; line-height: 20px;">\n             <i ng-click="updateToc()" class="icon list layout"></i>\n            <div class="menu">\n                <div class="title">目录树</div>\n                <div class="markdown-toc"></div>\n            </div>\n        </div>\n        <div class="extend-wmd-button"\n             title="保存草稿"\n             style="left: 438px;"\n             ng-click="$parent.saveDraft()">\n            <i class="icon save"></i>\n        </div>\n        <div class="wmd-spacer" style="left: 413px;"></div>\n        <div class="draft-saving-hint" ng-show="$parent.$parent.draft_saving_time > 0 || $parent.$parent.fetch_draft_at">\n            <span class="ui coding floated right local-storage-info" ng-show="$parent.$parent.draft_saving_time > 0 && !$parent.$parent.fetch_draft_at">\n                <i class="ok sign icon"></i>本地草稿保存于：<span cg-friendly-time="$parent.$parent.draft_saving_time" cg-friendly-time-format="HH:mm:ss"></span>\n            </span>\n            <span class="ui coding floated right local-storage-info" ng-show="$parent.$parent.fetch_draft_at">\n                <i class="ok sign icon"></i>取出本地 <span cg-friendly-time="$parent.$parent.fetch_draft_at" cg-friendly-time-format="HH:mm:ss"></span> 的草稿\n            </span>\n        </div>\n    </div>\n    <div id="{{::(\'pagedown-editor\' + id)}}" class="pagedown-editor" ng-class="{preview: button.previewing}">\n        <div ng-transclude style="height: 100%; width: 100%; display: inline-block;"></div>\n        <div id="{{::(\'wmd-preview\' + id)}}"\n             class="pagedown-preview markdown content"></div>\n    </div>\n    <input id="pagedown-upload-input"\n           class="insert_img" ng-show="false" type="file" name="tweetImg"\n           cg-file-upload="insert_image_setting" />\n    <div class="ui modal pagedown-help-modal"\n         cg-modal="pagedown_help_modal"\n         ng-include="\'common/directives/pagedown/tpl/help_modal.html\'">\n    </div>\n    <span class="image-picker-dropdown-wrapper"\n          ng-hide="$root.PROJECT.is_public">\n        <span class="apply-image-picker-for-pagedown"\n              cg-project-image-picker\n              dropdown-mode="dropdownMode()"\n              project-id="project_id"\n              image-select-done="imageSelectDone">\n        </span>\n    </span>\n    <div class="pagedown-heading-dropdown ui dropdown">\n        <ul class="menu ui">\n            <li data-level="1"><h1>一级标题</h1></li>\n            <li data-level="2"><h2>二级标题</h2></li>\n            <li data-level="3"><h3>三级标题</h3></li>\n            <li data-level="4"><h4>四级标题</h4></li>\n        </ul>\n    </div>\n</div>\n'),a.put("common/directives/pager/tpl/pager.html",'<div class="cg pagination" ng-if="pager_pages.length>0" onselectstart="return false">\n    <a class="page" ng-class="{active: current_page == page, prev: page == \'<\', next: page == \'>\'}"\n                    ng-repeat="page in pager_pages track by $index"\n                    ng-click="gotoPage(page);" title="{{page}}">\n        <i class="left arrow icon" ng-if="page === \'<\'"></i>\n        <span ng-if="isPageNumber(page)">{{page}}</span>\n        <i class="icon" ng-if="page === \'~\'">..</i>\n        <i class="icon right arrow" ng-if="page === \'>\'"></i>\n    </a>\n</div>'),a.put("common/directives/partnerLink/tpl/partnerLink.html",'<section id="partners" class="partners" ng-if="partners.length >0">\n    <div class="title">\n        <span>合作伙伴</span>\n    </div>\n    <div class="wrapper">\n        <span class="partner" ng-repeat="partner in partners">\n            <a ng-href="{{partner.link}}" target="_blank">\n                <img ng-src="{{partner.logo}}" alt="{{partner.name}}">\n            </a>\n        </span>\n    </div>\n</section>'),a.put("common/directives/projectActivities/tpl/CommitLineNote.html",'<div class="action">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span>{{::activity.action_msg}}</span>\n    项目 <a ng-href="{{::activity.project.path}}">{{::activity.project.full_name}}</a> 的\n    <span ng-switch="activity.line_note.noteable_type">\n        <span ng-switch-when="Commit">提交</span>\n        <span ng-switch-when="MergeRequestBean">Merge Request</span>\n        <span ng-switch-when="PullRequestBean">Pull Request</span>\n    </span>\n    <a ng-href="{{::activity.line_note.noteable_url}}">{{::activity.line_note.noteable_title | limitTo: 30}}</a>\n</div>\n<div class="target">\n    <a class="gray" ng-if="::isComment(activity)" ng-href="{{::lineNoteUrlWithAnchor(activity)}}">\n        <i class="icon comment"></i>\n        <span>{{::(commentToText(activity.line_note.content, true) | limitTo: 100)}}</span>\n    </a>\n</div>\n'),a.put("common/directives/projectActivities/tpl/Depot.html",'<div class="action" ng-if="::activity.action === \'push\'">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span>{{::activity.action_msg}}</span>\n    <span ng-if="::showProject"> <a ng-href="{{::activity.depot.path}}">{{::activity.depot.name}}</a> 的</span>\n    项目\n    <span ng-if="::activity.ref_type == \'branch\'">分支</span>\n    <span ng-if="::activity.ref_type == \'tag\'">标签</span>：\n    <a ng-if="::activity.push_type != \'delete\'" ng-href="{{::activity.ref_path}}">{{::activity.ref}}</a>\n    <span ng-if="::activity.push_type == \'delete\'">{{activity.ref}} [{{activity.old_sha | shortCommitId}}]</span>\n</div>\n<div class="action" ng-if="::activity.action === \'fork\'">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span>{{::activity.action_msg}}</span>\n    项目\n    <a ng-href="::activity.source_depot.path">{{::activity.source_depot.name}}</a>\n    到\n    <a ng-href="{{::activity.depot.path}}">{{::activity.depot.name}}</a>\n</div>\n<div class="action" ng-if="::activity.action == \'push_all\'">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span>{{::activity.action_msg}}</span>\n    <span ng-repeat="msg in activity.messages">\n        <a ng-href="{{::msg.ref_path}}">{{::msg.ref}}</a>\n        <span ng-if="!$last">,</span>\n    </span>\n</div>\n<div class="action" ng-if="::activity.action == \'reset\'">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span ng-if="::showProject"> 在项目 <a ng-href="{{::activity.depot.path}}">{{::activity.depot.name}}</a> 中</span>\n    <span>{{::activity.action_msg}}</span>\n</div>\n<div class="target">\n    <p ng-repeat="commit in activity.commits">\n        <i class="icon code"></i>\n        <a ng-href="{{::commit.committer.link}}">{{::commit.committer.name}}</a> :\n        <a class="monospaced-font" ng-href="{{::shaPath(activity, commit)}}">{{::(\'[\' + shortSha(commit) + \']\')}}</a>\n        <a class="gray" ng-href="{{::shaPath(activity, commit)}}">{{::commit.short_message}}</a>\n    </p>\n</div>\n'),a.put("common/directives/projectActivities/tpl/Empty.html","<p>\n    Unresolved Project Activity {{type()}} - {{activity.action}}\n</p>"),a.put("common/directives/projectActivities/tpl/MergeRequestBean.html",'<div class="action">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span>{{::activity.action_msg}}</span>\n    <a ng-href="{{::activity.reviewer.path}}">{{::activity.reviewer.name}}</a>\n    项目\n    <a ng-href="{{::activity.depot.path}}">{{::activity.depot.name}}</a>\n    中的 Merge Request\n</div>\n<div class="target">\n    <i class="icon coding merge-request"></i>\n    <a ng-href="{{::activity.merge_request_path}}">{{::activity.merge_request_title}}</a>\n</div>\n'),a.put("common/directives/projectActivities/tpl/MergeRequestComment.html",'<div class="action">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span>{{::activity.action_msg}}</span>\n    项目\n    <a ng-href="{{::activity.depot.path}}">{{::activity.depot.name}}</a>\n    中的 Merge Request\n    <a ng-href="{{::activity.merge_request_path}}">{{::activity.merge_request_title}}</a>\n</div>\n<div class="target">\n    <a class="gray" ng-href="{{::activity.merge_request_path}}">\n        <i class="icon comment"></i>\n        <span ng-bind-html="::commentToText(activity.comment_content, true) | limitTo: 100"></span>\n    </a>\n</div>\n'),a.put("common/directives/projectActivities/tpl/Project.html",'<div class="action" ng-if="activity.action !== \'transfer\' && activity.action !== \'transferToTeam\' && activity.action != \'teamProjectExport\'">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span>{{::activity.action_msg}}</span>\n    项目\n</div>\n<div class="action" ng-if="activity.action === \'transfer\'">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span>将项目 <a ng-href="{{::activity.project.path}}">{{::activity.project.full_name}}</a></span>\n    <span>{{::activity.action_msg}}</span>\n    <a ng-href="{{::activity.target_user.path}}">{{::activity.target_user.name}}</a>\n</div>\n<div class="action" ng-if="activity.action === \'transferToTeam\'">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span>将项目 <a ng-href="{{::activity.project.path}}">{{::activity.project.full_name}}</a></span>\n    <span>{{::activity.action_msg}}</span>\n    <span>{{::activity.target_team.name}}</span>\n</div>\n<div class="action" ng-if="activity.action === \'teamProjectExport\'">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span>{{::activity.action_msg}}</span>\n    <a ng-href="{{::activity.target_user.path}}">{{::activity.target_user.name}}</a>\n</div>\n<div class="target" ng-if="activity.action !== \'teamProjectExport\'">\n    <i class="coding project icon"></i>\n    <a ng-href="{{::activity.project.path}}">\n        <span>{{::activity.project.full_name}}</span>\n    </a>\n</div>\n<div class="target" ng-if="activity.action === \'teamProjectExport\'">\n    <i class="coding project icon"></i>\n    <a ng-href="{{::activity.target_project.path}}">\n        <span>{{::activity.target_project.full_name}}</span>\n    </a>\n</div>\n'),a.put("common/directives/projectActivities/tpl/ProjectFile.html",'<div class="action">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span ng-if="::showProject"> 在项目 <a ng-href="{{::activity.project.path}}">{{::activity.project.full_name}}</a> 中</span>\n    <span>{{::activity.action_msg}}</span>\n    <span>{{::fileType(activity)}}</span>\n</div>\n<div class="target" ng-repeat="file in activity.files track by $index">\n    <a ng-show="activity.up || $index < 3" class="gray" ng-href="{{::filePath(activity, file)}}">\n        <i class="icon" ng-class="::{file: !isFolder(activity), \'open folder\': isFolder(activity)}"></i>\n        <span ng-if="::activity.action === \'rename\'">{{::(file.old_name+\' -> \'+file.new_name)}}</span>\n        <span ng-if="::activity.action === \'move_dir\'">{{::(activity.sourceName+\' -> \'+activity.targetName)}}</span>\n        <span ng-if="::activity.action !== \'rename\' &&\n                     activity.action !== \'move_dir\'">\n            {{::file.name}}\n        </span>\n    </a>\n</div>\n<a ng-if="activity.files.length > 3"\n   ng-click="activity.up = !activity.up;"\n   ng-class="{down: !activity.up, up: activity.up}"\n   style="display: inline-block; width 100px; text-align: center; margin-top: 10px;"\n   class="more"\n   href="javascript:void(0);">{{activity.up ? \'收起\' : \'更多\'}}</a>\n'),a.put("common/directives/projectActivities/tpl/ProjectFileComment.html",'<div class="action">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span ng-if="::showProject"> 在项目 <a ng-href="{{::activity.project.path}}">{{::activity.project.full_name}}</a> 中</span>\n    <span>{{::activity.action_msg}}</span>\n    文件 <a class="target" style="max-width:160px;display:inline-block;vertical-align:bottom;color:#2D59A2" ng-href="{{::activity.projectFile.path}}"><span>{{::activity.projectFile.title | htmlToPlainText}}</span></a> 的评论\n</div>\n<div class="target">\n    <a class="gray"\n       ng-href="{{::activity.projectFile.path}}">\n        <i class="comment icon"></i>\n        <span>{{::(commentToText(activity.projectFileComment.content, true))}}</span>\n    </a>\n</div>'),a.put("common/directives/projectActivities/tpl/ProjectMember.html",'<div class="action">\n    <!-- 退出项目 -->\n    <a ng-if="::isQuit(activity)" ng-href="{{::activity.target_user.path}}">{{::activity.target_user.name}}</a>\n    <!-- 增减成员 -->\n    <a ng-if="::!isQuit(activity)" ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span ng-if="::showProject && !isQuit(activity)"> 在项目 <a ng-href="{{::activity.project.path}}">{{::activity.project.full_name}}</a> 中</span>\n    <span>{{::activity.action_msg}}</span>\n    <!-- 退出项目 -->\n    <span ng-if="::showProject && isQuit(activity)">\n        <a ng-href="{{::activity.project.path}}">{{::activity.project.full_name}}</a>\n    </span>\n    <span ng-if="::isQuit(activity)">项目</span>\n    <!-- 增减成员 -->\n    <span ng-if="::!isQuit(activity)">项目成员</span>\n</div>\n<div class="target" ng-repeat="target_user in activity.target_users">\n    <!-- 退出项目 -->\n    <a class="gray" ng-href="{{::activity.project.path}}" ng-if="::isQuit(activity)">\n        <i class="coding project icon"></i>\n        <span>{{::activity.project.full_name}}</span>\n    </a>\n    <!-- 增减成员 -->\n    <a ng-show="activity.up || $index < 3" class="gray" ng-href="{{::target_user.path}}" ng-if="::!isQuit(activity)">\n        <i class="icon users"></i>\n        <span>{{::target_user.name}}</span>\n    </a>\n</div>\n<a ng-if="activity.files.length > 3"\n   ng-click="activity.up = !activity.up;"\n   ng-class="{down: !activity.up, up: activity.up}"\n   style="display: inline-block; width 100px; text-align: center; margin-top: 10px;"\n   class="more"\n   href="javascript:void(0);">{{activity.up ? \'收起\' : \'更多\'}}</a>\n'),
a.put("common/directives/projectActivities/tpl/ProjectStar.html",'<div class="action">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span>{{::activity.action_msg}}</span>\n    项目\n    <a ng-href="{{::activity.project.path}}">{{::activity.project.full_name}}</a>\n</div>\n<div class="target">\n    <a class="gray" ng-href="{{::activity.project.path}}">\n        <i class="icon star"></i>\n        <span>{{::activity.project.full_name}}</span>\n    </a>\n</div>'),a.put("common/directives/projectActivities/tpl/ProjectTopic.html",'<div class="action">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span ng-if="::showProject">在项目 <a ng-href="{{::activity.project.path}}">{{::activity.project.full_name}}</a> 中</span>\n    <span ng-if="::activity.action !== \'add_watcher\' && activity.action !== \'remove_watcher\'">{{::activity.action_msg}}</span>\n    {{activity.action === \'add_watcher\' ? \'添加了\' : \'\'}}\n    {{activity.action === \'remove_watcher\' ? \'删除了\' : \'\'}}\n    讨论\n    <a ng-if="::isComment(activity)" ng-href="{{::topicPath(activity)}}">{{::topicTitle(activity)}}</a>\n    <span ng-if="::activity.action === \'add_watcher\' || activity.action === \'remove_watcher\'">\n        <a ng-href="{{::topicPath(activity)}}">{{::topicTitle(activity)}}</a>\n        的关注者\n    </span>\n</div>\n<div class="target" ng-if="::activity.action !== \'add_watcher\' && activity.action !== \'remove_watcher\'">\n    <!-- 非评论显示讨论标题 -->\n    <a class="gray"\n       ng-if="::!isComment(activity)"\n       ng-href="{{::topicPath(activity)}}">\n        <i class="icon chat"></i>\n        <span>{{::topicTitle(activity)}}</span>\n    </a>\n    <!-- 评论显示评论内容 -->\n    <a class="gray"\n       ng-if="::isComment(activity)"\n       ng-href="{{::topicPath(activity)}}">\n        <i class="icon comment"></i>\n        <span>{{::topicContent(activity) | limitTo: 100}}</span>\n    </a>\n</div>\n\n<!--添加删除关注者-->\n<div class="target" ng-if="::activity.action === \'add_watcher\' || activity.action === \'remove_watcher\'">\n    <div ng-repeat="watcher in activity.watchers" style="margin-top: 10px;">\n        <a class="gray" ng-href="{{::watcher.path}}">\n            <i class="icon users"></i>\n            <span>{{::watcher.name}}</span>\n        </a>\n    </div>\n</div>\n'),a.put("common/directives/projectActivities/tpl/ProjectWatcher.html",'<div class="action">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span>{{::activity.action_msg}}</span>\n    项目\n    <a ng-href="{{::activity.project.path}}">{{::activity.project.full_name}}</a>\n</div>\n<div class="target">\n    <a class="gray" ng-href="{{::activity.project.path}}">\n        <i class="icon unhide"></i>\n        <span>{{::activity.project.full_name}}</span>\n    </a>\n</div>\n'),a.put("common/directives/projectActivities/tpl/PullRequestBean.html",'<div class="action">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span>{{::activity.action_msg}}</span>\n    项目\n    <a ng-href="{{::activity.depot.path}}">{{::activity.depot.name}}</a>\n    中的 Pull Request\n</div>\n<div class="target">\n    <i class="icon coding pull-request"></i>\n    <a ng-href="{{::activity.pull_request_path}}">{{::activity.pull_request_title}}</a>\n</div>'),a.put("common/directives/projectActivities/tpl/PullRequestComment.html",'<div class="action">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span>{{::activity.action_msg}}</span>\n    项目\n    <a ng-href="{{::activity.depot.path}}">{{::activity.depot.name}}</a>\n    中的 Pull Request\n    <a ng-href="{{::activity.pull_request_path}}">{{::activity.pull_request_title}}</a>\n</div>\n<div class="target">\n    <a class="gray" ng-href="{{::activity.pull_request_path}}">\n        <i class="icon comment"></i>\n        <span>{{::commentToText(activity.comment_content, true) | limitTo: 100}}</span>\n    </a>\n</div>\n'),a.put("common/directives/projectActivities/tpl/QcTask.html",'<div class="action">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span>{{::activity.action_msg}}</span>\n    项目\n    <a ng-href="{{::activity.project.path}}">{{::(\'[\' + activity.project.full_name + \']\')}}</a>\n    的质量分析任务\n</div>\n<div class="target">\n    <i class="icon certificate"></i>\n    <span ng-bind-html="::activity.qc_task.link"></span>\n</div>'),a.put("common/directives/projectActivities/tpl/Task.html",'<div class="action">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span ng-if="::showProject">在项目 <a ng-href="{{::activity.project.path}}">{{::activity.project.full_name}}</a> 中</span>\n\n    <!-- 更新优先级 -->\n    <span ng-if="::activity.action === \'update_priority\'">\n        更新了任务的优先级\n    </span>\n\n    <!-- 更新 deadline -->\n    <span ng-if="::activity.action === \'update_deadline\'" ng-bind="::deadlineMsg(activity.task.deadline)">\n    </span>\n\n    <!-- 更新 description -->\n    <span ng-if="::activity.action === \'update_description\'">\n        更新了任务\n        <a ng-href="{{::activity.task.path}}"><span>{{::activity.task.title | htmlToPlainText | limitTo: 20}}</span></a>\n        的描述\n    </span>\n\n    <!-- 更新标签 -->\n    <span ng-if="::activity.action === \'update_label\'">\n        更新了任务\n        <a ng-href="{{::activity.task.path}}"><span>{{::activity.task.title | htmlToPlainText | limitTo: 20}}</span></a>\n        的标签\n    </span>\n\n    <!-- 更新、完成 -->\n    <span ng-if="::activity.action !== \'update_priority\' &&\n                 activity.action !== \'update_deadline\' &&\n                 activity.action !== \'update_description\' &&\n                 activity.action !== \'commit_refer\' &&\n                 activity.action !== \'update_label\' &&\n                 activity.action !== \'add_watcher\' &&\n                 activity.action !== \'remove_watcher\'">\n        <span>{{::activity.action_msg}}</span>\n        <span ng-if="::activity.origin_task.owner">\n            <a ng-href="{{::activity.origin_task.owner.path}}"\n              >{{::activity.origin_task.owner.name}}</a>\n            的\n        </span>\n        任务\n    </span>\n\n    <!-- 重新指派 -->\n    <span ng-if="::activity.action === \'reassign\'">\n        给 <a ng-href="{{::activity.task.owner.path}}">{{::activity.task.owner.name}}</a>\n    </span>\n\n    <span ng-if="::activity.action === \'commit_refer\'">\n        提交了代码\n        <a ng-href="{{::commitLink(activity)}}">{{activity.commit.sha | shortCommitId:7}}</a>\n        提到了任务\n    </span>\n\n    <span ng-if="::activity.action === \'add_watcher\' || activity.action === \'remove_watcher\'">\n        {{activity.action === \'add_watcher\' ? \'添加了任务\' : \'删除了任务\'}}\n        <a ng-href="{{::activity.task.path}}">{{activity.task.title}}</a>\n        的关注者\n    </span>\n</div>\n<div class="target">\n    <a class="gray"\n        ng-href="{{::activity.task.path}}"\n        ng-if="::activity.action !== \'add_watcher\' && activity.action !== \'remove_watcher\'">\n        <span ng-if="::activity.action !== \'update_priority\' &&\n                     activity.action !== \'update_deadline\' &&\n                     activity.action !== \'update_description\'">\n            <i class="tasks icon"></i>\n            <span>{{::activity.task.title | htmlToPlainText | limitTo: 100}}</span>\n        </span>\n        <span ng-if="::activity.action === \'update_priority\'">\n            <span cg-task-urgency-head priority="activity.task.priority" class="project-activity-urgency"></span>\n            <span>{{::(\'[\' + priorities[activity.task.priority] + \']\')}}</span>\n            <span>{{::activity.task.title | htmlToPlainText | limitTo: 100}}</span>\n        </span>\n        <span ng-if="::activity.action === \'update_deadline\'">\n            <i class="calendar icon"></i>\n            <span>{{::parseDeadline(activity.task.deadline)}}</span>\n            <span>{{::activity.task.title | htmlToPlainText | limitTo: 100}}</span>\n        </span>\n        <span ng-if="::activity.action === \'update_description\'">\n            <i class="align right rotate180 icon activity-icon"></i>\n            <span ng-bind-html="::commentToText(activity.task.description)"></span>\n        </span>\n    </a>\n    <div ng-if="::activity.action === \'add_watcher\' || activity.action === \'remove_watcher\'">\n        <div ng-repeat="watcher in activity.watchers" style="margin-top: 10px;">\n            <a class="gray" ng-href="{{::watcher.path}}">\n                <i class="icon users"></i>\n                <span>{{::watcher.name}}</span>\n            </a>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/projectActivities/tpl/TaskComment.html",'<div class="action">\n    <a ng-href="{{::activity.user.path}}">{{::activity.user.name}}</a>\n    <span ng-if="::showProject">在项目 <a ng-href="{{::activity.project.path}}">{{::activity.project.full_name}}</a> 中</span>\n    <span>{{::activity.action_msg}}</span>\n    任务 <a class="target" style="max-width:160px;display:inline-block;vertical-align:bottom;color:#2D59A2" ng-href="{{::activity.task.path}}"><span>{{::activity.task.title | htmlToPlainText}}</span></a> 的评论\n</div>\n<div class="target">\n    <a class="gray"\n       ng-href="{{::(activity.project.path + \'/task/\' + activity.task.id + \'#comment-\' + activity.taskComment.id)}}">\n        <i class="comment icon"></i>\n        <span>{{::commentToText(activity.taskComment.content, true)}}</span>\n    </a>\n</div>'),a.put("common/directives/projectActivities/tpl/activity.html",'<div>\n    <div class="timeline">\n        <div class="time" ng-bind="::activity.created_at | amDateFormat:\'HH:mm\'"></div>\n    </div>\n    <div class="avatar">\n        <a ng-href="{{::activity.user.path}}">\n            <img alt="loading..." width="32" height="32" class="ui circular image"\n                title="{{::activity.user.name}}"\n                ng-src="{{::activity.user.avatar}}"\n            />\n        </a>\n    </div>\n    <div class="content"\n         ng-include="\'common/directives/projectActivities/tpl/\' + resolve(type()) + \'.html\'">\n    </div>\n</div>'),a.put("common/directives/projectActivities/tpl/timeline.html",'<div ng-repeat="date in activities_of_date.timeline track by $index" ng-init="$outerIndex = $index;">\n    <div ng-repeat-start="activity in activities_of_date.activities[date] track by $index"></div>\n    <div ng-if="::activity.user" ng-init="makeCount(activity)">\n        <!-- 时间轴 日期+星期 大标题（2014-8-9 周六） -->\n        <div class="start-date"\n             ng-if="::$first"\n             title="{{::timelineDate(activity)}}">\n            <span ng-if="::isToday(activity.created_at)">今天（</span><span>{{::timelineDate(activity)}}</span><span ng-if="::isToday(activity.created_at)">）</span>\n        </div>\n        <!-- 单个动态 -->\n        <div class="activity"\n             cg-project-activity="activity"\n             show-project="showProject"\n             ng-class="{\'not-bordered\': $last || showUnreadSeparator(activity)}"\n             type="activity.target_type">\n        </div>\n        <!-- 未读分隔 -->\n        <div class="update-divide-line ui horizontal divider" ng-if="showUnreadSeparator(activity)">\n            <i class="ui time icon"></i>\n        </div>\n    </div>\n    <div ng-repeat-end></div>\n</div>\n'),a.put("common/directives/projectGroup/tpl/group.html",'<ul class="project-group clearfix" ng-class="{editable: editable}">\n\n    <li class="item loading" ng-if="loading">\n        <a class="gray"><i class="loading icon"></i>加载项目中...</a>\n    </li>\n\n    <!-- project group -->\n    <li class="{{\'project-group-\' + group.id}}"\n        ng-repeat="group in groups | projectType:currentType track by $index"\n        ng-class="{group: itemsInGroup(group).length > 0, open: group.open}"\n        ng-show="itemsInGroup(group).length > 0"\n        ng-click="toggleGroup($event, group);"\n        cg-not-click="closeGroup($event, group)"\n        not-click-when="group.open"\n        not-click-class="{{\'.project-group-\' + group.id}}, {{\'.project-group-\' + group.id}} *">\n\n        <!-- message tip -->\n        <i class="message-tip" ng-show="groupUnreadCount(group)" ng-bind="groupUnreadCount(group)"></i>\n\n        <!-- default -->\n        <div ng-show="!group.open">\n            <ul class="items clearfix">\n                <li ng-repeat="item in itemsInGroup(group) | projectType:currentType track by $index"\n                    ng-click="toggleProjectSelect($event, group, item);">\n                    <img ng-src="{{item.icon}}" title="{{item.owner_user_name + \'/\' + item.name}}" width="100%"\n                         height="100%"/>\n                    <i class="triangle up green icon" ng-show="item.selected"></i>\n                    <!-- pin -->\n                    <div class="in-group pin-project-cover static active" ng-show="item.pin && !pinDisabled">\n                        <i class="pin icon static"></i>\n                    </div>\n\n                </li>\n            </ul>\n            <div class="title icon"><span class="name" ng-bind="group.name"></span></div>\n        </div>\n\n        <!-- group open -->\n        <div class="placeholder" ng-show="group.open">\n            <div class="items"></div>\n            <div class="title" ng-bind="groupName(group, itemsInGroup(group));"></div>\n        </div>\n        <div class="items-wrapper" ng-show="group.open" style="box-shadow: 0 0 20px rgba(0, 0, 0, 0.19);">\n            <ul class="items clearfix">\n                <li ng-repeat="item in itemsInGroup(group) | projectType:currentType track by $index"\n                    ng-click="toggleProjectSelect($event, group, item);" tabindex="{{$index+100}}">\n                    <a class="group-logo-wrapper" ng-href="{{projectPath(item)}}">\n                        <img ng-src="{{item.icon}}" title="{{item.owner_user_name + \'/\' + item.name}}"/>\n\n                        <!-- pin -->\n                        <div class="pin-project-cover open-group" ng-class="{\'active\': item.pin}" ng-show="!pinDisabled">\n                            <i class="pin icon" ng-click="pin($event, item);"\n                               data-position="top center"\n                               data-variation="inverted"\n                               data-html="{{pinTitle(item)}}"\n                               cg-popup></i>\n                        </div>\n                    </a>\n\n                    <div class="title icon ellipsis-2" title="{{item.owner_user_name + \'/\' + item.name}}"\n                         ng-class="{public: item.is_public}"><span class="name" ng-bind="item.owner_user_name + \'/\' + item.name"></span></div>\n                    <div class="ui corner green label" ng-show="item.selected">\n                        <i class="checkmark icon"></i>\n                    </div>\n                    <div class="ui corner label" ng-show="!item.selected">\n                        <i class="checkmark icon"></i>\n                    </div>\n                    <i class="message-tip"\n                       ng-show="item.un_read_activities_count && !item.selected"\n                       ng-bind="item.un_read_activities_count"></i>\n                </li>\n            </ul>\n            <div class="title" ng-click="editTitle($event, group)" ng-init="group.copy_name = group.name;">\n                <div class="group-name-input" ng-class="{active: group.editing}">\n                    <input type="text"\n                           cg-auto-focus="group.editing"\n                           select-text="group.editing"\n                           cg-textarea-editable\n                           ng-model="group.copy_name"\n                           ng-blur="checkGroupName(group.copy_name || \'\', group);"\n                           cg-enter="updateGroupName(group.copy_name || \'\', group)"/>\n                </div>\n                <i class="loading icon" ng-show="updating_name"></i>\n            </div>\n        </div>\n    </li>\n\n    <!-- normal project item -->\n    <li class="item projects-item"\n        ng-repeat="item in noGroupItems()  | projectType:currentType track by $index"\n        ng-click="toggleProjectSelect($event, null, item)" tabindex="{{$index+100}}" ng-focus="listItemFocus()" cg-enter="enterItem($event)">\n        <a ng-href="{{projectPath(item)}}">\n            <div class="logo-wrapper">\n                <img class="logo" ng-src="{{item.icon}}" title="{{item.owner_user_name + \'/\' + item.name}}"/>\n\n                <!-- pin -->\n                <div class="pin-project-cover" ng-class="{\'active\': item.pin}">\n                    <i class="pin icon" ng-click="pin($event, item);" ng-if="!pinDisabled"\n                       data-position="top center"\n                       data-variation="inverted"\n                       data-html="{{pinTitle(item)}}"\n                       cg-popup></i>\n                </div>\n\n            </div>\n\n            <div class="title icon"  ng-class="{public: item.is_public}">\n                <span style="display: block;color: #2D59A2;" ng-if="item.deploy_memory" ng-bind="\'( \' + item.deploy_memory + \'M )\'"></span>\n                <span class="name" ng-bind="item.owner_user_name + \'/\' + item.name"></span>\n            </div>\n            <div class="ui corner green label" ng-show="item.selected">\n                <i class="checkmark icon"></i>\n            </div>\n            <div class="ui corner label" ng-show="!item.selected">\n                <i class="checkmark icon"></i>\n            </div>\n            <i class="message-tip"\n               ng-show="item.un_read_activities_count && !item.selected"\n               ng-bind="item.un_read_activities_count"></i>\n        </a>\n\n        <!--解除项目归档-->\n        <div class="projects-item-archiver" ng-if="cgProjectArchiverEnable" ng-click="unarchive(item.id)" title="解除归档">\n            <i class="ui icon unlock"></i>\n        </div>\n    </li>\n    <li class="item" ng-transclude>\n\n    </li>\n</ul>\n'),a.put("common/directives/projectLabel/projectLabel.html",'<div class="project-label" ng-class="{\'selection\':selection}">\n    <a ng-href="{{project.project_path}}" ng-if="!selection && !archived">\n        <div class="logo-wrapper">\n            <img ng-src="{{project.icon}}" title="{{project.owner_user_name + \'/\' + item.name}}"/>\n            <div class="team-admin-operation" ng-if="projectAdmin">\n                <i class="coding advanced-setting icon"></i>\n                <div class="buttons-wrapper">\n                    <div class="ui vertical buttons">\n                        <button class="ui button" ng-click="beforeArchiveProject($event, project)">归档项目</button>\n                        <button class="ui button" ng-click="beforeExportProject($event, project)">迁出项目</button>\n                        <button class="ui button" ng-click="beforeDeleteProject($event, project)">删除项目</button>\n                    </div>\n                </div>\n            </div>\n            <div class="team-admin-operation" ng-if="archived">\n                <i class="unlock icon"></i>\n            </div>\n        </div>\n\n        <div class="title icon ellipsis-2" title="{{project.owner_user_name + \'/\' + project.name}}"\n             ng-class="{private: !project.is_public}">\n            <span class="name" ng-bind="project.name"></span>\n        </div>\n        <i class="message-tip"\n           ng-show="project.un_read_activities_count && !project.selected"\n           ng-bind="project.un_read_activities_count"></i>\n    </a>\n    <a ng-click="beforeUnarchiveProject($event, project)" ng-if="archived">\n        <div class="logo-wrapper">\n            <img ng-src="{{project.icon}}" title="{{project.owner_user_name + \'/\' + item.name}}"/>\n            <div class="team-admin-operation">\n                <i class="unlock icon"></i>\n            </div>\n        </div>\n        <div class="title icon ellipsis-2" title="{{project.owner_user_name + \'/\' + project.name}}"\n             ng-class="{private: !project.is_public}">\n            <span class="name" ng-bind="project.owner_user_name + \'/\' + project.name"></span>\n        </div>\n        <i class="message-tip"\n           ng-show="project.un_read_activities_count && !project.selected"\n           ng-bind="project.un_read_activities_count"></i>\n    </a>\n    <div ng-if="selection" ng-click="onCheck()">\n        <div class="logo-wrapper">\n            <img ng-src="{{project.icon}}" title="{{project.owner_user_name + \'/\' + project.name}}"/>\n        </div>\n        <div class="title icon ellipsis-2" title="{{project.owner_user_name + \'/\' + project.name}}"\n             ng-class="{private: !project.is_public}">\n            <span class="name" ng-bind="project.owner_user_name + \'/\' + project.name"></span>\n        </div>\n        <div class="ui corner green label" ng-if="project.selected">\n            <i class="checkmark icon"></i>\n        </div>\n        <div class="ui corner label" ng-if="!project.selected">\n            <i class="checkmark icon"></i>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/projectMemberRoleSelect/projectMemberRoleSelect.html",'<div class="project-member-role-select">\n    <span class="divider"></span>\n    <div class="ui pointing dropdown member-setting top left" cg-ui-dropdown="{}" ng-if="isAdminShow()">\n        <div class="menu">\n            <li class="item" ng-repeat="option in options" ng-class="{\'active\':currentMember.type == option.value}"\n                ng-if="isOptionShow(option)"\n                ng-click="updateMemberType(currentMember,option.value)">\n                <label ng-bind="option.label"></label>\n                <i class="icon check no-margin" ng-if="currentMember.type == option.value"></i>\n            </li>\n        </div>\n        <div class="ui label Poodle small ng-scope" ng-class="[current.clazz]"\n             style="line-height: 1em;">\n            <span ng-bind="current.label"></span>\n            <i class="icon setting small gray"></i>\n        </div>\n    </div>\n    <div class="labels" ng-if="isNormalShow() || isPublic()">\n        <div class="ui label Poodle small ng-scope" ng-class="[current.clazz]"\n             style="line-height: 1em;" ng-bind="current.label">\n        </div>\n    </div>\n    <i ng-if="!isPublic()"  class="icon info tip small visible"\n       style="cursor: pointer;float: inherit;margin: 0px!important"\n'+"       data-html=\"<div class='content'><div><strong>项目所有者：</strong>拥有对项目的所有权限。</div><div><strong>项目管理员：</strong>拥有对项目的部分权限。不能删除，转让项目，不能对其他管理员进行操作。</div><div><strong>普通成员：</strong>可以阅读和推送代码。</div><div><strong>受限成员：</strong>不能进入与代码相关的页面。</div><div><a target='_blank' style='margin-top: 0 !important;' href='https://coding.net/help/doc/project/getting-started.html#各等级人员权限特点'>更多帮助 》</a></div></div>\"\n       cg-help-popup=\"\"></i>\n</div>"),a.put("common/directives/projectSelection/projectSelection.html",'<div class="project-selection clearfix">\n    <ul class="project-labels clearfix">\n        <li class="item" ng-repeat="project in projects">\n            <project-label project="project" selection="true" on-selected="onSelected"></project-label>\n        </li>\n    </ul>\n    <div class="center empty list" ng-if="projects.length <= 0">\n        没有符合条件的项目\n    </div>\n    <div class="selected-box" ng-if="selected.length > 0">\n        <label class="selected-label">已选项目（<em ng-bind="selected.length"></em>）：</label>\n        <span class="selected-item" ng-repeat="p in selected">{{p.name}}<i class="icon remove" ng-click="remove(p)"></i></span>\n    </div>\n</div>'),a.put("common/directives/resource/tpl/resource_modal.html",'<div class="ui tiny modal refer-resource-modal" id="{{::id}}">\n    <i class="close icon"></i>\n\n    <div class="content">\n        <div class="ui labeled action input fluid">\n            <div class="ui label refer-resource-label">\n                <span ng-bind="project.owner_user_name + \'/\' + project.name"></span>\n            </div>\n            <input type="text" class="refer-resource-input"\n                   ng-model="key"\n                   cg-tab-circle="tab_circle_callback"\n                   cg-up-down-circle="max_count"\n                   on-index-change="onIndexChange($index)"\n                   cg-enter="chooseResource(null, $event)"\n                   ng-blur="cur_index = -1;"\n                   ng-focus="cur_index = cur_index || 0;">\n            <a class="ui dark gray button" ng-click="search()">搜索</a>\n        </div>\n        <div class="ui small tabular menu">\n            <a class="item"\n               ng-if="!project.is_public"\n               ng-class="{active: resource_type === \'Task\'}"\n               ng-click="changeResourceType(\'Task\')">\n                <i class="tasks icon"></i>任务\n            </a>\n            <a class="item"\n               ng-class="{active: resource_type === \'ProjectTopic\'}"\n               ng-click="changeResourceType(\'ProjectTopic\')">\n                <i class="chat icon"></i>讨论\n            </a>\n            <a class="item"\n               ng-class="{active: resource_type === \'ProjectFile\'}"\n               ng-click="changeResourceType(\'ProjectFile\')">\n                <i class="archive icon"></i>文件\n            </a>\n            <a class="item"\n               ng-if="!project.is_public"\n               ng-class="{active: resource_type === \'MergeRequestBean\'}"\n               ng-click="changeResourceType(\'MergeRequestBean\')">\n                <i class="coding merge-request icon"></i>Merge Request\n            </a>\n            <a class="item"\n               ng-if="project.is_public"\n               ng-class="{active: resource_type === \'PullRequestBean\'}"\n               ng-click="changeResourceType(\'PullRequestBean\')">\n                <i class="coding pull-request icon"></i>Pull Request\n            </a>\n        </div>\n        <div class="resource-list">\n            <ul ng-if="loaded && resources.length > 0">\n                <li class="refer-resource-item ellipsis"\n                    ng-class="{\'cur\': cur_index === $index}"\n                    ng-repeat="resource in resources"\n                    ng-click="chooseResource(resource);">\n                    <span class="number">{{::(\'#\' + resource.code)}}</span>\n                    <span class="title">{{::resource.title}}</span>\n                </li>\n            </ul>\n            <div class="center empty list" style="margin: 100px 20px;" ng-if="resources.length === 0">\n                <div ng-if="loading">\n                    <i class="loading icon"></i>正在加载数据...\n                </div>\n                <div ng-if="loaded">\n                    <i class="coffee icon"></i>没有找到匹配数据...\n                </div>\n            </div>\n            <div class="center empty list">\n                <div cg-pager="{{pager_id}}"></div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/resourceReferenceList/tpl/resourceReferenceList.html",'<div class="resource-reference">\n    <div class="icon">\n        <i class="pin basic icon"></i>\n    </div>\n    <div class="detail" ng-class="{\'show-all\': showAllResourceReferenceStyle, \'folded\': !showAllResourceReferenceStyle && resourceReferences.Task.length + resourceReferences.ProjectTopic.length + resourceReferences.ProjectFile.length + resourceReferences.MergeRequestBean.length > 10}">\n        <div class="title">\n            关联资源\n            <span ng-if="showResourceReferences">({{resourceReferences.Task.length + resourceReferences.ProjectTopic.length + resourceReferences.ProjectFile.length + resourceReferences.MergeRequestBean.length}})</span>\n            <i class="help icon"\n               data-html="关联资源整合了在评论中提到的其他与本任务相关的任务，讨论，文件，合并请求等资源。任务执行者可以通过编辑关联资源，对列表进行删除。也可以通过在评论里引用新的资源，对本列表进行添加。"\n               data-position="bottom right"\n               data-variation="inverted"\n               cg-popup></i>\n            <span class="add-refer" ng-show="showAdd">\n                <input id="reference_select" class="task-select" type="hidden" />\n                <i class="icon add sign add-reference"\n                   data-html="添加关联资源"\n                   data-position="top center"\n                   data-variation="inverted"\n                   cg-popup></i>\n            </span>\n        </div>\n        <div ng-if="!showResourceReferences">\n            <div class="item no-item">\n                暂时没有关联的资源\n            </div>\n        </div>\n        <div class="item-group" ng-if="resourceReferences.Task && resourceReferences.Task.length > 0">\n            <div class="item" ng-repeat="task in resourceReferences.Task">\n                <a ng-href="{{task.link}}" target="_blank" ng-class="{\'task-finished\': task.status == 2}">\n                    <i class="tasks icon"></i>\n                    #{{task.code}} {{task.title}}\n                </a>\n                <div class="left" ng-show="showAdd">\n                    <i class="remove icon red" ng-click="delReference(task)"></i>\n                </div>\n            </div>\n        </div>\n        <div class="item-group" ng-if="resourceReferences.ProjectTopic && resourceReferences.ProjectTopic.length > 0">\n            <div class="item" ng-repeat="topic in resourceReferences.ProjectTopic">\n                <a ng-href="{{topic.link}}" target="_blank">\n                    <i class="chat icon"></i>\n                    #{{topic.code}} {{topic.title}}\n                </a>\n                <div class="left" ng-show="showAdd">\n                    <i class="remove icon red" ng-click="delReference(topic)"></i>\n                </div>\n            </div>\n        </div>\n        <div class="item-group" ng-if="resourceReferences.ProjectFile && resourceReferences.ProjectFile.length > 0">\n            <div class="item" ng-repeat="file in resourceReferences.ProjectFile">\n                <a ng-href="{{file.link}}" ng-if="!file.img" target="_blank">\n                    <i class="file icon"></i>\n                    #{{file.code}} {{file.title}}\n                </a>\n                <a ng-href="{{file.link}}" ng-if="file.img" target="_blank" data-html="{{imgPopup(file)}}" cg-popup>\n                    <i class="file icon"></i>\n                    #{{file.code}} {{file.title}}\n                </a>\n                <div class="left" ng-show="showAdd">\n                    <i class="remove icon red" ng-click="delReference(file)"></i>\n                </div>\n            </div>\n        </div>\n        <div class="item-group" ng-if="resourceReferences.MergeRequestBean && resourceReferences.MergeRequestBean.length > 0">\n            <div class="item" ng-repeat="merge_request in resourceReferences.MergeRequestBean">\n                <a ng-href="{{merge_request.link}}" target="_blank">\n                    <i class="coding merge-request icon"></i>\n                    #{{merge_request.code}} {{merge_request.title}}\n                </a>\n                <div class="left" ng-show="showAdd">\n                    <i class="remove icon red" ng-click="delReference(merge_request)"></i>\n                </div>\n            </div>\n        </div>\n        <div class="load-more" ng-if="showResourceReferences && (resourceReferences.Task.length + resourceReferences.ProjectTopic.length + resourceReferences.ProjectFile.length + resourceReferences.MergeRequestBean.length > 10)" ng-click="showAllResourceReference()">\n            <i class="angle double down icon"></i> 加载更多\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/search/tpl/items/default.html",'<a ng-href="{{ item.url }}" class="gray">\n    <p class="ellipsis title" ng-bind-html="item.title | highlight:search_text"></p>\n</a>'),a.put("common/directives/search/tpl/items/file.html",'<a ng-href="{{ item.url }}" class="gray">\n    <span cg-file-icon-src="item.icon" cg-file-icon="suffix(item.title)" class="icon"></span>\n    <p class="ellipsis title" ng-bind-html="item.title | highlight:search_text"></p>\n    <p class="ellipsis subtitle" ng-bind-html="item.subtitle | highlight:search_text"></p>\n</a>'),
a.put("common/directives/search/tpl/items/friend.html",'<a ng-href="{{ item.url }}" class="gray">\n    <img class="icon" ng-src="{{ item.icon }}" width="36"/>\n    <p class="ellipsis title" ng-bind-html="item.title | highlight:search_text"></p>\n    <p class="ellipsis subtitle" ng-bind-html="item.subtitle | highlight:search_text"></p>\n</a>'),a.put("common/directives/search/tpl/items/more.html","更多结果>>"),a.put("common/directives/search/tpl/items/mr.html",'<a ng-href="{{ item.url }}" class="gray">\n  <p class="ellipsis title" ng-bind-html="item.title | highlight:search_text"></p>\n  <p class="ellipsis subtitle" ng-bind-html="item.subtitle | highlight:search_text"></p>\n</a>\n'),a.put("common/directives/search/tpl/items/none.html",'<a href="javascript:void(0);" class="gray" style="word-break: break-all;">\n    没有搜索到 "<span class="highlight-match-text">{{ search_text }}</span>" 相关信息\n</a>'),a.put("common/directives/search/tpl/items/pr.html",'<a ng-href="{{ item.url }}" class="gray">\n  <p class="ellipsis title" ng-bind-html="item.title | highlight:search_text"></p>\n  <p class="ellipsis subtitle" ng-bind-html="item.subtitle | highlight:search_text"></p>\n</a>\n'),a.put("common/directives/search/tpl/items/project.html",'<a ng-href="{{ item.url }}" class="gray">\n    <img class="icon" ng-src="{{ item.icon }}" width="36"/>\n    <p class="ellipsis title" ng-bind-html="item.title | highlight:search_text"></p>\n    <p class="ellipsis subtitle" ng-bind-html="item.subtitle | highlight:search_text"></p>\n</a>'),a.put("common/directives/search/tpl/items/resource.html",'<a ng-href="{{ item.url }}" class="gray">\n  <p class="ellipsis title" ng-bind-html="item.title | highlight:search_text"></p>\n  <p class="ellipsis subtitle" ng-bind-html="item.subtitle | highlight:search_text"></p>\n</a>\n'),a.put("common/directives/search/tpl/items/simple.html",'<a ng-href="{{ item.url }}&q={{ search_text | encodeUri }}" class="gray" style="display: block;">\n    搜 "<span class="highlight-match-text">{{ search_text }}</span>" 相关{{ group.title }}<i class="double angle right icon"></i>\n</a>\n'),a.put("common/directives/search/tpl/items/task.html",'<a ng-href="{{ item.url }}" class="gray">\n    <p class="ellipsis title">\n        <span><cg-task-urgency-head priority="item.others.priority" style="top:auto! important; left:auto !important;"></cg-task-urgency-head></span>\n        <span ng-bind-html="item.title | highlight:search_text" style="margin-left: 28px">\n        </span>\n    </p>\n    <p class="ellipsis subtitle" ng-bind-html="item.subtitle | highlight:search_text"></p>\n</a>\n'),a.put("common/directives/search/tpl/items/topic.html",'<a ng-href="{{ item.url }}" class="gray">\n    <p class="ellipsis title" ng-bind-html="item.title | highlight:search_text"></p>\n    <p class="ellipsis subtitle" ng-bind-html="item.subtitle | highlight:search_text"></p>\n</a>'),a.put("common/directives/search/tpl/items/tweet.html",'<a ng-href="{{ item.url }}" class="gray">\n    <p class="ellipsis title" ng-bind-html="item.title | highlight:search_text"></p>\n</a>'),a.put("common/directives/search/tpl/search.html",'<div class="advance-search-box" ng-class="{hover: hover, focus: focus}">\n\n    <div class="search-input"\n         ng-class="{prefix: showPrefix(), loading: loading}"\n         cg-up-down-circle="items.length + 1"\n         on-index-change="onIndexChange($index)"\n         on-index-enter="onIndexEnter($index)"\n         reset-start-index="reset_start_index"\n         ng-transclude>\n    </div>\n\n    <div class="search-dropdown"\n         cg-scroll-to-element="{{ cur_item_id }}"\n         ng-show="search_text.length > 0 && (force_show || !typing && groups.length > 0 && showDropdown())">\n        <ul class="group-dropdown">\n            <li class="advance-search-group" ng-class="group.clazz()" ng-repeat="group in groups">\n                <span class="advance-search-type" ng-bind="group.title"></span>\n                <ul class="advance-search-items">\n                    <li id="{{ item.id }}"\n                        class="advance-search-item"\n                        ng-class="item.clazz()"\n                        ng-repeat="item in group.items" ng-include="item.tpl()">\n                    </li>\n                </ul>\n            </li>\n        </ul>\n    </div>\n\n</div>'),a.put("common/directives/search/tpl/search_filter.html",'<div class="ui top right pointing dropdown">\n  <input type="hidden" ng-model="value" />\n  <span>{{::content.title}}<i class="triangle down icon"></i></span>\n  <div class="menu">\n    <div ng-show="content.type === \'user\' || content.type === \'project\' || content.type === \'tag\'">\n      <div class="ui icon input">\n        <input type="text" placeholder="快速筛选" ng-model="searchInput"></input>\n        <i class="search icon"></i>\n      </div>\n      <div class="divider"></div>\n    </div>\n    <div class="members-outer" ng-if="need_init" ng-class="{\'wide\': showSortKey}">\n      <a class="item ellipsis"\n        ng-class="{\'selected\': item.selected, \'no-avatar\': !item.avatar}"\n        ng-repeat="item in content.data | searchString: {key: searchInput, region: \'value\'}"\n        ng-click="toggleSelect(item)"\n        data-value="{{::item.key}}">\n        <i class="icon checkmark" ng-style="{opacity: item.selected ? 1 : 0 }"></i>\n        <span class="search-filter-tag-color" ng-if="content.type == \'tag\'" ng-style="{background: item.color, border: item.color ? null : \'1px dotted #ddd\'}"></span>\n        <img class="ui avatar image" ng-if="item.avatar" ng-src="{{::item.avatar}}" style="width: 32px;height:32px;" />\n        <span class="task-select-urgency" ng-if="content.type === \'priority\'">\n          <cg-task-urgency-head priority="item.key"></cg-task-urgency-head>\n          <span>{{::$parent.item.value}}</span>\n        </span>\n        <span ng-show="content.type != \'priority\'">{{::item.value}}</span>\n        <div class="sort" ng-if="showSortKey" ng-class="{\'show-sort-key\': item.showSortKey}" ng-bind-html="::item.sortKey"></div>\n      </a>\n    </div>\n  </div>\n</div>\n'),a.put("common/directives/selectMember/selectMember.html",'<div class="select-member-directive">\n    <div class="content">\n        <div class="add-members">\n            <div class="wrapper">\n                <table width="100%">\n                    <tr>\n                        <td class="search-region">\n                            <div class="ui medium fluid icon input">\n                                <input type="text" ng-model="key" cg-timeout-input="loadFriend(key);"\n                                       placeholder="邮箱/手机/昵称/个性后缀"/>\n                                <i class="search icon"></i>\n                            </div>\n                            <div class="member-folder">\n                                <div class="ui secondary vertical menu active">\n                                    <a class="item" href="javascript:void(0);"\n                                       ng-class="{active: selectMenuIs(\'friend\')}"\n                                       ng-click="loadFriends();">\n                                        <i class="unhide icon"></i>我关注的人\n                                    </a>\n                                    <a class="item" href="javascript:void(0);"\n                                       ng-class="{active: selectMenuIs(\'follower\')}"\n                                       ng-click="loadFollowers();">\n                                        <i class="heart icon"></i>粉丝\n                                    </a>\n                                    <a class="item ellipsis" href="javascript:void(0);"\n                                       ng-repeat="project in projects"\n                                       ng-class="{active: selectMenuIs(\'member\', project.id)}"\n                                       ng-click="loadProjectMembers(project.id);">\n                                        <img class="ui image avatar24"\n                                             ng-src="{{::project.icon}}"\n                                             alt="{{::project.name}}"/>\n                                        <span>{{::project.name}}</span>\n                                    </a>\n                                    <a class="item" href="javascript:void(0);"\n                                       ng-if="loading_projects">\n                                        <i class="loading icon"></i>正在加载项目列表...\n                                    </a>\n                                </div>\n                            </div>\n                        </td>\n                        <td class="select-region">\n                            <div class="select-nothing" ng-if="friends.length == 0 && !loading">\n                                <span class="words" ng-if="member_size > 0">\n                                    <span ng-if="loaded">\n                                        <i class="frown icon"></i>\n                                        没有找到符合条件的好友\n                                        ，马上邀请好友加入项目？\n                                    </span>\n                                    <span ng-if="!loaded">\n                                        <i class="coffee icon"></i>\n                                        我的项目成员不在 Coding，马上邀请好友加入？\n                                    </span>\n                                </span>\n                                <span ng-if="member_size<=0">\n                                        <i class="coffee icon"></i>\n                                        <span ng-bind="max_member_warning_info"></span>\n                                </span>\n                                <div class="invite-button">\n                                    <a class="ui default green button" ng-click="inviteFriend();"\n                                       href="javascript:void(0);">马上邀请好友</a>\n                                </div>\n                            </div>\n                            <div class="select-nothing" ng-if="loading">\n                                <span class="words">\n                                    <i class="loading icon"></i>正在搜索好友...\n                                </span>\n                            </div>\n                            <div class="select-users" ng-if="!loading && friends.length > 0">\n                                <ul class="clearfix">\n                                    <li class="ellipsis" ng-repeat="friend in friends"\n                                        ng-click="selectFriend(friend);"\n                                        ng-class="::{\'is-member\': friend.is_member}"\n                                        title="{{::selectUserTitle(friend)}}">\n                                        <div class="ui corner label"\n                                             ng-class="{\'green\': friend.selected}"\n                                             ng-show="friend.is_member || friend.selected">\n                                            <i class="checkmark icon"></i>\n                                        </div>\n                                        <img class="ui image avatar32" ng-src="{{::friend.avatar}}"/>\n                                        <span>{{::friend.name}}</span>\n                                    </li>\n                                </ul>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class="selected-region" colspan="2">\n                            <ul class="ui circular labels clearfix">\n                                <li>已选成员：</li>\n                                <li class="ui label" ng-if="selected_users.length === 0">尚未选择任何成员</li>\n                                <li class="ui green label" ng-repeat="friend in selected_users">\n                                    <span>{{::friend.name}}</span>\n                                    <i class="remove icon" title="取消选定" ng-click="removeSelected(friend, $event);"></i>\n                                </li>\n                            </ul>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n        </div>\n    </div>\n    <div class="actions" ng-if="showButton">\n        <div class="max-member">\n            <span ng-if="member_size>0">你还可以添加 <span style="color:#32be77;"\n                                                     ng-bind="member_size || 0"></span> 个项目成员</span>\n            <span ng-if="member_size<=0" ng-bind="max_member_warning_info" style="color: #A00;opacity: 0.8;"></span>\n        </div>\n        <div class="ui cancel button">取消</div>\n        <div class="ui dark gray ok button">确认</div>\n    </div>\n</div>\n'),a.put("common/directives/showMore/tpl/more.html",'<span ng-if="content.length > limitTo && !show" ng-bind-html="content | limitTo: limitTo" style="line-height: 20px;"></span>\n<span ng-if="content.length <= limitTo || show" ng-bind-html="content" style="line-height: 20px;"></span>\n<a href="javascript:void(0);" ng-if="content.length > limitTo && !show && canShowMore" ng-click="toggleShow();" style="font-size: 14px;">...</a>\n<span ng-if="content.length > limitTo && !show && !canShowMore">...</span>\n'),a.put("common/directives/tag/tpl/dropdown.html",'<div class="ui floating dropdown icon tag-dropdown">\n    <span ng-transclude class="dropdown-target"></span>\n\n    <div class="menu" ng-style="{\'left\': left || 0}">\n        <div class="search">\n            <div class="ui icon input medium">\n                <input type="text" placeholder="快速筛选/创建标签"\n                       ng-model="searchTag.name"\n                       cg-up-down-circle="(items | filter: searchTag).length"\n                       on-index-change="onSelectIndexChange($index)"\n                       on-index-enter="onSelectIndexEnter($index, (items | filter: searchTag));"\n                       ng-blur="cur_index = -1;"\n                       ng-focus="cur_index = cur_index || 0;"/>\n                <i class="search icon"></i>\n            </div>\n        </div>\n        <div class="items">\n            <div class="item ellipsis"\n                 ng-repeat="item in items | orderBy:\'name\' | filter: searchTag "\n                 ng-class="{active: item.active, \'cur\': cur_index === $index}"\n                 ng-click="toggleActive(item);">\n                <i class="checkmark icon"></i>\n                <span class="tag-color" ng-style="{background: item.color}"></span>\n                <span ng-bind-html="item.name"></span>\n            </div>\n            <div class="item" ng-if="items && items.length > 0 && (items | filter: searchTag).length === 0">\n                回车创建标签\n                <span class="tag ellipsis"\n                      style="max-width: 70px;vertical-align: text-bottom;"\n                      title="点击改变颜色"\n                      cg-tag-color="random_color"\n                      ng-bind="searchTag.name"\n                      ng-click="changeColor()"></span>\n            </div>\n            <div class="item" ng-if="!items || items.length === 0">\n                <span ng-if="searchTag.name.length === 0">尚无可选标签，输入标签名来添加</span>\n                <span ng-if="searchTag.name.length > 0">\n                    回车添加标签\n                    <span class="tag ellipsis"\n                          style="max-width: 165px;vertical-align: text-bottom;"\n                          title="点击改变颜色"\n                          cg-tag-color="random_color"\n                          ng-bind="searchTag.name"\n                          ng-click="changeColor()"></span>\n                </span>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("common/directives/tag/tpl/editor.html",'<div class="tag-editor" style="display: inline;">\n    <span class="add" title="添加标签"\n          cg-tag-dropdown="all_tags"\n          on-tag-add="onTagAdd"\n          on-tag-remove="onTagRemove"\n          on-tag-create="onTagCreate">\n        <i class="icon" ng-class="{\'add sign\': !tag_editing, \'loading\': tag_editing}"></i>\n    </span>\n    <span class="tag editable" style="cursor: pointer;"\n          ng-repeat="tag in selected_tags | orderBy:\'name\'"\n          ng-click="selectTag(tag)"\n          cg-tag-color="tag.color">\n        <span ng-bind-html="tag.name"></span> <i class="remove icon" ng-click="onTagRemove(tag);"></i>\n    </span>\n</div>\n'),a.put("common/directives/tag/tpl/task-creating-tags.html",'<div class="tag-editor mr-1">\n    <header cg-tag-dropdown="all_tags"\n            left="-150px"\n            on-tag-add="onTagAdd"\n            on-tag-remove="onTagRemove"\n            on-tag-create="onTagCreate">\n        标签 <span ng-bind="selected_tags.length>0 ? (\'(\' + selected_tags.length + \')\') : \'\'"></span>\n        <i class="icon" ng-class="{\'add sign\': !tag_editing, \'loading\': tag_editing}"></i>\n    </header>\n    <article style="max-height: 40px;" class="overflow-auto" cg-perfect-scroll-bar="update_scrollbar">\n        <ul>\n            <li ng-if="selected_tags.length > 0" ng-repeat="tag in selected_tags | orderBy:\'name\'">\n                <span class="tag editable" style="cursor: pointer;"\n                      ng-click="selectTag(tag, $event)"\n                      cg-tag-color="tag.color">\n                    <span ng-bind-html="tag.name"></span>\n                    <i class="remove icon" ng-click="onTagRemove(tag, $event);"></i>\n                </span>\n            </li>\n            <li ng-if="selected_tags.length === 0" style="font-size:12px;color:#999;">\n                尚未添加任何标签\n            </li>\n        </ul>\n    </article>\n</div>\n'),a.put("common/directives/tag/tpl/task-description-tags.html",'<div class="tag-editor">\n    <header>\n        标签 <span ng-bind="selected_tags.length>0 ? (\'(\' + selected_tags.length + \')\') : \'\'"></span>\n        <span class="add" title="添加标签"\n              style="float: right;"\n              cg-tag-dropdown="all_tags"\n              left="-220px"\n              on-tag-add="onTagAdd"\n              on-tag-remove="onTagRemove"\n              on-tag-create="onTagCreate">\n            <i class="icon" ng-class="{\'add sign\': !tag_editing, \'loading\': tag_editing}"></i>\n        </span>\n    </header>\n    <article>\n        <ul>\n            <li ng-if="selected_tags.length > 0" ng-repeat="tag in selected_tags | orderBy:\'name\'">\n                <span class="tag editable" cg-tag-color="tag.color">\n                    <span ng-bind-html="tag.name"></span>\n                    <i class="remove icon" ng-click="onTagRemove(tag, $event);"></i>\n                </span>\n            </li>\n            <li ng-if="selected_tags.length === 0" style="font-size:12px;color:#999;">\n                尚未添加任何标签\n            </li>\n        </ul>\n    </article>\n</div>\n'),a.put("common/directives/tag/tpl/task-list-tags.html",'<div class="tag-editor" style="display: inline;">\n    <span class="add" title="添加标签"\n          cg-tag-dropdown="all_tags"\n          left="-100px"\n          on-tag-add="onTagAdd"\n          on-tag-remove="onTagRemove"\n          on-tag-create="onTagCreate">\n        <i class="tags icon"></i>\n        <span ng-show="selected_tags.length > 0">\n            标签:\n            <i class="icon" ng-class="{\'add sign\': !tag_editing, \'loading\': tag_editing}"></i>\n        </span>\n        <span ng-show="selected_tags.length === 0">添加标签</span>\n    </span>\n</div>\n'),a.put("common/directives/task/comments/tpl/action.html",'<div class="icon" ng-class="::activity.action">\n    <i class="icon" ng-class="::actionIconClass()"></i>\n</div>\n<div class="detail">\n    <a class="gray" ng-href="{{::activity.user.path}}">\n        <span>{{::activity.user.name}}</span>\n    </a>\n    <span>{{::actionMsg()}}</span> -\n    <span cg-friendly-time="activity.created_at"></span>\n</div>\n'),a.put("common/directives/task/comments/tpl/activity.html","<div ng-class=\"::activityClass()\" id=\"{{::('c'+activity.id)}}\"\n     ng-include=\"'common/directives/task/comments/tpl/' + resolveType() + '.html'\">\n</div>"),a.put("common/directives/task/comments/tpl/comment.html",'<a class="avatar" ng-href="{{::activity.user.path}}">\n<img class="ui avatar42 image" width="36px" height="36px" ng-src="{{::activity.taskComment.owner.avatar}}"/>\n</a>\n<div class="detail" name="{{::\'comment-\' + activity.taskComment.id}}">\n    <div class="markdown content"  clip-copy-code="pre" cg-highlight="activity.taskComment.content"></div>\n    <div cg-gallery="activity.taskComment.content"></div>\n    <div class="created-time">\n        <span class="mr10">{{::activity.user.name}}</span>\n        <span class="mr10">\n            <i class="time icon"></i>\n            <a ng-href="{{::\'#comment-\' + activity.taskComment.id}}" cg-friendly-time="activity.created_at"></a>\n        </span>\n        <span class="mr10 comment">\n            <a href="javascript:void(0);" ng-click="atPerson(activity.taskComment)" cg-scroll-to scroll-to="{{anchor}}">\n                <i class="edit icon"></i>回复\n            </a>\n        </span>\n        <span class="mr10 remove" ng-if="::canRemove(activity.taskComment.owner, $root.USER)">\n            <a href="javascript:void(0);" ng-click="doRemove()">\n                <i class="remove icon"></i>删除\n            </a>\n        </span>\n    </div>\n</div>\n'),a.put("common/directives/task/comments/tpl/commit_refer.html",'<div class="icon" ng-class="::activity.action">\n    <i class="icon code"></i>\n</div>\n<div class="detail">\n    <a class="gray" ng-href="{{::activity.user.path}}">\n        <span>{{::activity.user.name}}</span>\n    </a>\n    <span>\n        在分支 <a ng-href="{{activity.commit[\'ref_path\']}}">{{activity.commit.ref}}</a> 中提交的代码提到了任务\n    </span> -\n    <span cg-friendly-time="activity.created_at"></span>\n    <div class="commits">\n        <div class="commit" ng-init="show_commit_message = false;">\n            <i class="icon code"></i>\n            <a ng-href="{{::activity.commit.committer.link}}">{{::activity.commit.committer.name}}</a> :\n            <a class="monospaced-font" ng-href="{{::shaPath(activity, activity.commit)}}">{{::(\'[\' + shortSha(activity.commit) + \']\')}}</a>\n            <a class="gray" ng-href="{{::shaPath(activity, activity.commit)}}" ng-bind-html="::activity.commit.short_message"></a>\n            <span class="hidden-text-expander" ng-show="activity.commit[\'all_message\']">\n                <a class="gray" href="javascript:void(0);"\n                   ng-click="show_commit_message = !show_commit_message">...</a>\n            </span>\n            <div class="all-message" ng-if="show_commit_message">\n                <a class="gray" ng-href="{{::shaPath(activity, commit)}}" ng-bind-html="::activity.commit[\'all_message\']"></a>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/task/comments/tpl/history.html",'<div class="icon" ng-class="::activity.action">\n    <i class="icon" ng-class="::actionIconClass()"></i>\n</div>\n<div class="detail">\n    <a class="gray" ng-href="{{::activity.user.path}}">\n        <span>{{::activity.user.name}}</span>\n    </a>\n    <span>{{::actionMsg()}}</span> -\n    <span cg-friendly-time="activity.created_at"></span>\n    <a ng-if="isTaskHistoryExpActive && currentHistoryId != activity.history.id"\n       class="gray history"\n       ng-click="restoreFromHistory(activity.history)"\n       cg-popup data-html="查看历史版本" data-position="right center" data-variation="inverted">\n        <i class="icon undo"></i>\n    </a>\n    <a ng-if="isTaskHistoryExpActive && currentHistoryId == activity.history.id"\n       class="gray history disabled">\n        <i class="icon undo"></i>\n    </a>\n</div>\n'),a.put("common/directives/task/comments/tpl/merge_request.html",'<div class="icon">\n    <i class="ui coding icon merge-request"></i>\n</div>\n<div class="detail">\n    <a class="gray" ng-href="{{::activity.user.path}}">\n        <span>{{::activity.user.name}}</span>\n    </a>\n    <span ng-bind-html="actionMsg()"></span> -\n    <span cg-friendly-time="activity.created_at"></span>\n</div>\n'),a.put("common/directives/task/comments/tpl/update_label.html",'<div class="icon" ng-class="::activity.action">\n    <i class="icon tags"></i>\n</div>\n<div class="detail" ng-init="show_label_histories = false;">\n    <div ng-init="last = activity.label_histories[activity.label_histories.length - 1]">\n        <a class="gray" ng-href="{{::activity.user.path}}">\n            <span>{{::activity.user.name}}</span>\n        </a>\n        <span>{{::actionMsg(last)}}</span> -\n        <span cg-friendly-time="last.created_at"></span>\n        <span class="hidden-text-expander"\n              ng-show="last.added.length > 0 || last.deleted.length > 0 || first.labels_before.length > 0">\n            <a class="gray" href="javascript:void(0);"\n               ng-click="show_label_histories = !show_label_histories">...</a>\n        </span>\n        <div class="label-change-detail" ng-if="show_label_histories"\n             ng-init="first = activity.label_histories[0]">\n            <div class="label-added" ng-if="last.added.length > 0">\n                <i class="icon tag green"></i>\n                <span>{{::(\'添加了标签 - \' + labelsMsg(last.added))}}</span>\n            </div>\n            <div class="label-deleted" ng-if="last.deleted.length > 0">\n                <i class="icon tag red"></i>\n                <span>{{::(\'移除了标签 - \' + labelsMsg(last.deleted))}}</span>\n            </div>\n            <div class="labels-before" ng-if="first.labels_before">\n                <i class="tags icon"></i>\n                <span>{{::(\'历史标签 - \' + labelsMsg(first.labels_before))}}</span>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/task/comments/tpl/update_watcher.html",'<div class="icon" ng-class="::activity.action">\n    <i class="icon unhide"></i>\n</div>\n<div class="detail">\n    <a class="gray" ng-href="{{::activity.user.path}}">\n        <span>{{::activity.user.name}}</span>\n    </a>\n    <span>{{::actionMsg()}}</span> -\n    <span ng-repeat="watcher in activity.watchers">\n        <a class="gray" ng-href="{{::watcher.path}}">{{::watcher.name}}</a>{{$last ? \'\' : \', \'}}\n    </span>\n    - <span cg-friendly-time="activity.created_at"></span>\n</div>\n'),a.put("common/directives/task/detail/tpl/activity.html",'<!-- 动态筛选 -->\n<div class="task-activity-filter">\n    <a class="gray" href="javascript:void(0);"\n       ng-click="toggleComments();">\n        <i class="icon check-icon" ng-class="checkIconClass(just_show_comment)"></i>只看评论\n    </a>\n</div>\n<!-- 动态列表（包含评论）-->\n<div class="task-detail-activity" ng-show="activities.length > 0">\n    <div class="task-activity"\n         ng-repeat="activity in activities"\n         ng-if="showActivity(activity);"\n         cg-task-comment-activity="activity"\n         editor-id="project-task-detail-modal"\n         data-anchor=".task-comment-creator"\n         on-remove="onRemove"></div>\n</div>\n'),a.put("common/directives/task/detail/tpl/detail.html",'<!-- 任务简单头部 -->\n<div class="task-detail-header" ng-if="task">\n    <div cg-task-detail-header="task"\n         members="members"\n         tags="tags"></div>\n</div>\n<div class="layout-content-right-menu" id="task-detail-menu">\n    <div class="layout-content">\n        <!-- 任务详情 -->\n        <div class="task-detail-description">\n            <div class="icon">\n                <i class="icon align right rotate180"></i>\n            </div>\n            <div class="detail">\n                <cg-task-description\n                    class="task-description"\n                    ng-model="task"\n                    can-edit="true"\n                    all-loading-done="onAllLoadingDone"\n                    show="!!task">\n                </cg-task-description>\n            </div>\n        </div>\n        <!-- 关联资源 -->\n        <cg-resource-reference-list\n            self="task"\n            show-add="true">\n        </cg-resource-reference-list>\n        <!-- 动态 + 评论 -->\n        <div cg-task-detail-activity\n             task="task"\n             all-loading-done="onAllLoadingDone"\n             just-show-comment="just_show_comment"\n             on-comment-remove="onCommentRemove"></div>\n        <!-- 评论框 -->\n        <div class="task-comment-creator" id="task-comment-creator" style="margin-bottom: 0;">\n            <div cg-light-md-editor="onComment"\n                 editor-id="project-task-detail-modal"\n                 at-item="task"\n                 at-context-type="\'task_comment\'"\n                 data-ng-model="content"\n                 img-compression="false"\n                 project_dependency="task.project"\n                 on-preview="onMarkdownPreview"></div>\n        </div>\n    </div>\n    <!-- 右侧各种任务参数更新操作 -->\n    <div cg-task-detail-menu\n         task="task"\n         all-loading-done="onAllLoadingDone"\n         style="width: 150px;"></div>\n</div>'),a.put("common/directives/task/detail/tpl/detail/select_deadline.html",'<header ng-if="task">\n    <div cg-task-deadline="task"\n         options="{class_name: \'task-creating-select-deadline\', offset: {left: -80, top: 0}}"\n         mode="deadline_creating_task">\n    </div>\n</header>\n'),a.put("common/directives/task/detail/tpl/detail/select_label.html",'<header class="select-label-dropdown">\n    <div class="task-detail-tags"\n         cg-tag-editor="task.labels"\n         mode="task-description-tags"\n         tags="tags"\n         on-tag-add="onTagAdd"\n         on-tag-remove="onTagRemove"\n         on-tag-create="onTagCreate"\n         on-tag-select="onDetailTagSelect">\n    </div>\n</header>\n'),a.put("common/directives/task/detail/tpl/detail/select_member.html",'<div class="select-member-dropdown" ng-controller="TaskDetailSelectMemberController">\n    <div cg-task-member-picker="owner"\n         mode="member_picker_header"\n         members="members"\n         active="true">\n        <header>\n            执行者\n            <i class="triangle down icon"></i>\n        </header>\n        <div ng-if="form.owner">\n            <div class="task-select-member selected-content" title="{{ form.owner.name }}">\n                <img ng-src="{{ form.owner.avatar }}"/>\n                <span class="ellipsis" style="font-size: 14px;" ng-bind="form.owner.name"></span>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("common/directives/task/detail/tpl/detail/select_project.html",'<div class="select-project-dropdown" cg-dropdown="projects"\n     ng-controller="TaskDetailSelectProjectController">\n    <header style="padding-top: 0;">\n        所属项目\n    </header>\n    <div style="width: 160px;" ng-if="form.project">\n        <div class="task-select-project selected-content" title="{{ form.project[\'owner_user_name\'] + \'/\' + form.project.name }}">\n            <img ng-src="{{ form.project.icon }}"/>\n            <span class="ellipsis" style="font-size: 14px;"\n                  ng-bind="form.project[\'owner_user_name\'] + \'/\' + form.project.name"></span>\n        </div>\n    </div>\n</div>'),a.put("common/directives/task/detail/tpl/detail/select_urgency.html",'<div class="ui dropdown" cg-dropdown="priorities" ng-controller="TaskDetailSelectUrgencyController">\n    <header>\n        紧急程度 <i class="triangle down icon"></i>\n    </header>\n    <div class="task-select-urgency selected-content" ng-if="form.urgency">\n        <cg-task-urgency-head priority="form.urgency.value"></cg-task-urgency-head>\n        <span style="font-size: 14px;" ng-bind="form.urgency.text"></span>\n    </div>\n    <div class="menu">\n        <div class="item"\n             ng-repeat="priority in priorities"\n             ng-click="selectUrgency($index)">\n            <div class="task-select-urgency">\n                <cg-task-urgency-head priority="$index"></cg-task-urgency-head>\n                <span>{{::priority}}</span>\n            </div>\n        </div>\n    </div>\n</div>'),
a.put("common/directives/task/detail/tpl/detail/select_watcher.html",'<div class="task-detail-watchlist">\n    <div style="margin-bottom: 0.5em;" id="task-detail-member-select">\n        关注者 (<span ng-bind="watchers.length"></span>)\n        <i class="icon add sign" style="float: right;"></i>\n    </div>\n    <div cg-member-selector\n         cg-ms-selected="watchers"\n         cg-ms-onselect="addWatcher(member)"\n         cg-ms-oncancel="removeWatcher(member)"\n         cg-ms-width="140"\n         cg-ms-has-self="true"\n         cg-ms-opener="\'#task-detail-member-select\'"\n         cg-ms-project="task.project"\n         class="hover-remove check-mode check-toggle-mode no-dropdown"\n        ></div>\n</div>'),a.put("common/directives/task/detail/tpl/header.html",'<div class="task project-task"\n     ng-class="taskClass(task)">\n    <i class="icon check-icon" ng-if="!updating"\n       ng-click="toggleTaskStatus(task, $event);"\n       ng-class="checkIconClass(task)"\n       data-position="bottom center"\n       data-variation="inverted"\n       data-html="{{ task.status == 1 ? \'点击标记完成\' : \'点击取消已完成\' }}"\n       cg-popup>\n    </i>\n    <i class="icon check-icon" ng-click="toggleTaskStatus(task);"\n       ng-class="checkIconClass(task)"\n       data-position="top center"\n       data-variation="inverted"\n       data-html="点击取消已完成"\n       cg-popup\n       ng-if="task.status == 2">\n    </i>\n    <i class="icon loading check-icon" ng-if="updating"></i>\n    <div class="title" ng-click="setTaskEditable(task, $event);">\n        <textarea class="msd-elastic"\n                  cg-clickable-textarea-link\n                  ng-disabled="task.status == STATUS.done"\n                  ng-model="task.content"\n                  cg-enter="updateTaskContent($event, task);"\n                  ng-blur="updateTaskContent($event, task);"></textarea>\n    </div>\n</div>\n'),a.put("common/directives/task/detail/tpl/menu.html",'<div class="layout-menu">\n    <div class="task-create-menu" ng-if="form">\n        <div class="task-menu-item">\n            <header>引用 ID</header>\n            <span class="selected-content" ng-bind="\'#\' + task.number"></span>\n        </div>\n        <div class="task-menu-item">\n            <div ng-include="\'common/directives/task/detail/tpl/detail/select_project.html\'"></div>\n        </div>\n        <div class="task-menu-item">\n            <div ng-include="\'common/directives/task/detail/tpl/detail/select_member.html\'"></div>\n        </div>\n        <div class="task-menu-item">\n            <div ng-include="\'common/directives/task/detail/tpl/detail/select_urgency.html\'"></div>\n        </div>\n        <div class="task-menu-item">\n            <div ng-include="\'common/directives/task/detail/tpl/detail/select_deadline.html\'"></div>\n        </div>\n        <div class="task-menu-item with-top-separator" style="margin-bottom: 5px;">\n            <div ng-include="\'common/directives/task/detail/tpl/detail/select_label.html\'"></div>\n        </div>\n        <div class="task-menu-item with-top-separator">\n            <div ng-include="\'common/directives/task/detail/tpl/detail/select_watcher.html\'"></div>\n        </div>\n        <div class="task-menu-item with-top-separator" style="padding-top: 10px;"\n             ng-if="(USER | isCreatorOf: task) || (task | isRole: ADMIN)">\n            <a ng-click="removeTask(task)"\n               href="javascript:void(0);"\n               class="ui small red button">删除任务</a>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/task/issues/tpl/tag_color_picker.html",'<div class="tag-color-picker" ng-show="show && can_change_color">\n    <div class="selected">\n        <span class="selected-color" ng-style="{\'background-color\': tag.color}"></span>\n        <input type="text" ng-model="tag.color" maxlength="7"\n               cg-auto-focus\n               ng-style="{\'color\': tag.color}" cg-enter="changeColor(tag.color);"/>\n        <a href="javascript:void(0);" class="gray" title="颜色随机"\n           ng-click="randomColor()"><i class="refresh icon"></i></a>\n    </div>\n    <div class="pre-defined-color">\n        <span class="color"\n              ng-repeat="c in colors track by $index"\n              ng-click="changeColor(c);"\n              ng-class="{selected: c == tag.color}"\n              ng-style="::{\'background-color\': c}"></span>\n    </div>\n</div>'),a.put("common/directives/task/tpl/comment.html",'<div class="task-comment-wrapper">\n    <form class="task-comment-form" method="POST"\n          ng-class="{loading: commenting}">\n        <div class="ui fluid input icon">\n            <input type="text" placeholder="在此输入评论内容（Ctrl+Enter）"\n                   style="border: none;"\n                   ng-model="comment"\n                   cg-at-emoji\n                   cg-at-context\n                   at-context-type="\'task_comment\'"\n                   at-item="task"\n                   cg-ctrl-enter="doComment(comment)"\n                   cg-refer-resource="task.project"\n                   cg-placeholder\n            >\n            <i class="right icon" ng-click="doComment(comment)" style="padding-top: 6px; cursor: pointer;"></i>\n        </div>\n    </form>\n    <div class="task-comment-list">\n        <div class="task-comment-item"\n             ng-repeat="item in comments">\n            <a ng-href="{{::item.owner.path}}" title="{{::item.owner.name}}"><img ng-src="{{::item.owner.avatar | thumbnail: 48}}" class="ui avatar24 image" alt="loading"/></a>\n            <div class="comment-detail">\n                <div class="comment-content" ng-bind-html="::item.content"></div>\n                <div class="comment-time">\n                    <span class="mr10">{{::item.owner.name}}</span>\n                    <span class="mr10">\n                        <i class="time icon"></i>\n                        <span  cg-friendly-time="item.created_at"></span>\n                    </span>\n                    <a class="comment-button gray" href="javascript:void(0);"\n                       ng-click="atPerson(item);">\n                        <i class="icon edit"></i>回复\n                    </a>\n                    <a class="remove-button gray" href="javascript:void(0);"\n                       ng-click="remove(item);"\n                       ng-if="::canRemove(item, $root.USER)">\n                        <i class="icon remove"></i>删除\n                    </a>\n                </div>\n            </div>\n        </div>\n\n        <div class="center empty list" ng-if="loading" style="padding: 20px;">\n            <i class="loading icon"></i>正在加载评论...\n        </div>\n        <div class="center empty list" ng-if="loaded && task.comments === 0" style="padding: 20px;">\n            <i class="coffee icon"></i>尚无评论，速速抢个先手吧\n        </div>\n    </div>\n    <div class="task-comment-more" ng-if="showDetail()">\n        <a class="gray" href="javascript:void(0);"\n           ng-click="gotoDetail();">\n            <span ng-bind="\'查看全部 \'+ task.comments +\' 条评论\'"></span><i class="double angle right icon"></i>\n        </a>\n    </div>\n</div>\n'),a.put("common/directives/task/tpl/creator.html",'<form id="task-creator" class="ui small form" ng-class="{loading: creating}">\n    <div class="with-creator" cg-task-deadline="task" options="{offset: {left: -80, top: 0}}"></div>\n    <div class="ui medium icon input">\n        <cg-task-urgency class="input-urgency" priority="task.priority" showtooltip="1"></cg-task-urgency>\n        <div class="description" id="main-task-description"\n             ng-class="{\'show\': show_description}"\n             ng-show="show_description  || task.description.length > 0">\n            <div cg-light-md-editor="onDescriptionSubmit"\n                 editor-id="project-task-creator-editor"\n                 mode="{{insert_image ? \'\' : \'description\'}}"\n                 placeholder="添加任务描述（支持 Markdown）"\n                 on-change="onDescriptionChange"\n                 cg-not-click="hideDescription()"\n                 not-click-class="#main-task-input, #main-task-input *,\n                                  #main-task-description, #main-task-description *,\n                                  #insert_image_lmd_modal, #insert_image_lmd_modal *,\n                                  #atwho-container *,\n                                  #main-task-tags, #main-task-tags *"\n                 not-click-when="show_description"\n                 at-item="project_dependency"\n                 at-context-type="\'task_description\'"\n                 project-dependency="project_dependency"\n                 img-compression="false"></div>\n        </div>\n        <input type="text" tabindex="999" placeholder="添加一个任务(回车完成添加)"\n               id="main-task-input" class="urgency"\n               ng-model="task.content"\n               cg-enter="createTask(task);"/>\n        <i class="right icon" style="cursor:pointer; padding-top: 10px;" ng-click="createTask(task);"></i>\n        <!--<div id="main-task-tags" class="tags-editor-wrapper" ng-class="{\'show\': show_description}" ng-show="show_description">-->\n            <!--<div class="tags-editor">-->\n                <!--<i class="tags icon"></i>-->\n                <!--标签:-->\n                <!--<span cg-tag-editor="task.labels"-->\n                      <!--tags="tags"-->\n                      <!--on-tag-add="onTagAdd"-->\n                      <!--on-tag-remove="onTagRemove"></span>-->\n            <!--</div>-->\n        <!--</div>-->\n    </div>\n    <div cg-task-member-picker="task.owner" members="members" multiple="false" active="true"></div>\n</form>\n'),a.put("common/directives/task/tpl/deadline.html",'<span class="task-deadline"  cg-pickmeup="onDeadlineChange($date);" pickmeup-options="{{options}}" ng-model="task.deadline">\n    <span class="centered" ng-if="!task.deadline || task.deadline === \'1970-01-01\'">\n        <i class="calendar icon"\n           data-position="bottom center"\n           data-variation="inverted"\n           data-html="设置截止日期"\n           cg-popup>\n        </i>\n        </span>\n    <span class="date centered" ng-class="[deadline.clazz, task.status === 2 ? \'done\' : \'\']" ng-bind="deadline.date" ng-if="task.deadline && task.deadline !== \'1970-01-01\'"></span>\n</span>'),a.put("common/directives/task/tpl/deadline_creating_task.html",'<div cg-pickmeup="onDeadlineChange($date);" pickmeup-options="{{options}}" ng-model="task.deadline">\n    <header style="cursor: pointer;">\n        截止日期 <i class="triangle down icon"></i>\n    </header>\n    <div ng-if="deadline && !!deadline.date && deadline.date !== \'1970-01-01\'">\n        <span class="task-deadline">\n            <span class="date centered"\n                  ng-class="deadline.clazz"\n                  ng-bind="deadline.date">\n            </span>\n        </span>\n    </div>\n    <div ng-if="!deadline || !deadline.date">\n        <span class="task-deadline">\n            <span class="date centered done">无截止日期</span>\n        </span>\n    </div>\n</div>\n'),a.put("common/directives/task/tpl/description.html",'<div class="task-description-wrapper"\n     ng-class="{\n        \'editing\': editing,\n        \'description-loading\': loading,\n        \'has-description\': !!task.description\n     }"\n     ng-keydown="edit_area_dirty=1">\n    <span class="history-tip" ng-if="isTaskHistoryExpActive && !loading && !editing && history.data && !history.is_newest">\n        本版本由 {{history.owner.name}} 编辑于\n        <span cg-friendly-time="history.data.created_at"></span>\n    </span>\n    <i class="edit icon pencil"\n       ng-if="can_edit && !loading && !edit_area_dirty"\n       ng-click="toggleEditable();"\n       data-position="top center"\n       data-variation="inverted"\n       data-html="编辑描述"\n       cg-popup></i>\n    <i class="edit icon remove"\n       ng-if="can_edit && !loading && edit_area_dirty"\n       ng-click="toggleEditable();"\n       data-position="top center"\n       data-variation="inverted"\n       data-html="取消编辑"\n       cg-popup></i>\n    <div cg-light-md-editor="onDescriptionSubmit"\n         ng-if="editing"\n         editor-id="project-task-creator-editor"\n         data-placeholder="添加任务描述（支持 Markdown）"\n         class="editor"\n         ng-model="markdown"\n         cg-refer-resource="project_dependency"\n         at-item="project_dependency"\n         at-context-type="\'task_description\'"\n         ng-show="editing"\n         img-compression="false"\n         project_dependency="task.project"\n         image_picker_mode="\'md-editor down\'"\n         on-preview="allLoadingDone"></div>\n    <div class="markdown content" clip-copy-code="pre" cg-highlight="task.description" ng-if="!editing && !loading && loaded"></div>\n    <div cg-gallery="task.description" ng-if="!editing && !loading && loaded"></div>\n    <div ng-show="loading" class="center list loading">\n        <i class="loading icon"></i>正在加载任务描述...\n    </div>\n    <div class="empty list loading"\n         ng-click="toggleEditable()"\n         ng-show="!editing && loaded && (!task.description || task.description.length === 0)">\n        <i class="coffee icon"></i>没有任务描述，点击添加\n    </div>\n</div>\n'),a.put("common/directives/task/tpl/item.html",'<div class="task project-task"\n     ng-class="taskClass(task)">\n    <i class="icon check-icon" ng-click="toggleTaskStatus(task);"\n       ng-class="checkIconClass(task)"\n       data-position="bottom center"\n       data-variation="inverted"\n       data-html="{{ task.status == 1 ? \'点击标记完成\' : \'点击取消已完成\' }}"\n       cg-popup>\n    </i>\n    <i class="icon loading updating" ng-if="updating"></i>\n    <i class="red minus sign alternate icon remove-task"\n       ng-if="(USER | isCreatorOf: task) || (task | isRole: ADMIN)"\n       ng-click="removeTask(task);"\n       data-position="top center"\n       data-variation="inverted"\n       data-html="删除"\n       cg-popup>\n    </i>\n\n    <div class="title" ng-click="setTaskEditable(task, $event);">\n        <cg-task-urgency class="textarea-urgency" priority="task.priority" showtooltip="1"></cg-task-urgency>\n        <textarea class="urgency msd-elastic"\n                  ng-disabled="task.status == STATUS.done"\n                  ng-model="task.content"\n                  cg-enter="updateTaskContent($event, task);"\n                  ng-blur="updateTaskContent($event, task);"></textarea>\n    </div>\n    <div class="created-time" style="margin-right: 40px;">\n        <span class="mr10"><span cg-task-deadline="task" options="{offset: {left: 0, top: 3}}"></span></span>\n        <span class="mr10 refer-id" ng-if="::task.number">{{::(\'#\' + task.number)}}</span>\n        <span class="mr10 creator">{{::task.creator.name}}</span>\n        <span class="mr10">\n            <a ng-href="{{::task.project.project_path}}/task/{{::task.id}}" target="_blank">\n                <i class="time icon"></i>\n                <span cg-friendly-time="task.created_at"></span>\n            </a>\n        </span>\n        <span class="mr10" ng-if="task.has_description ||  !task.has_description && task.status != 2">\n            <a href="javascript:void(0);"\n               ng-if="task.has_description"\n               ng-click="toggleShowDescription(task);">\n                <i class="align right icon rotate180" style="transform-origin: 47% 47%;"></i>\n                <span ng-if="!task.show_description">描述</span>\n                <span ng-if="task.show_description">收起描述</span>\n            </a>\n            <a ng-if="!task.has_description && task.status != 2"\n               ng-href="{{ task.project.project_path + \'/task/\' + task.id + \'?edit_desc\' }}">\n                <i class="align right icon rotate180" style="transform-origin: 47% 47%;"></i> 添加描述\n            </a>\n        </span>\n        <span class="mr10">\n            <a href="javascript:void(0);" ng-click="toggleTaskCommenting(task);">\n                <span ng-if="!task.commenting">\n                    <i class="chat outline icon"></i> <span>{{::task.comments}}</span> 条评论\n                </span>\n                <span ng-if="task.commenting">\n                    <i class="chat outline icon"></i> 收起评论\n                </span>\n            </a>\n        </span>\n        <span class="mr10">\n            <a ng-href="{{::task.project.project_path + \'/task/\' + task.id}}">\n                <i class="info icon"></i> 查看详情\n            </a>\n        </span>\n        <span class="mr10" style="display: inline;">\n            <span class="task-labels"\n                  cg-tag-editor="task.labels"\n                  tags="tags"\n                  mode="task-list-tags"\n                  on-tag-create="onTagCreate"\n                  on-tag-add="onTagAdd"\n                  on-tag-remove="onTagRemove"></span>\n            <span class="tags" ng-if="task.labels.length > 0">\n              <span ng-repeat="tag in task.labels | orderBy:\'name\'" class="tag" ng-bind-html="tag.name" cg-tag-color="tag.color"></span>\n            </span>\n        </span>\n        <span class="mr10 hover-show" ng-if="showMark(task)">\n            <a class="toggle" href="javascript:void(0);" ng-click="toggleWatch(task);">\n                <i class="icon" ng-class="watchClass(task)"></i> <span ng-bind="watchWords(task)"></span>\n            </a>\n            <a class="marked" href="javascript:void(0);" ng-show="task.watch && !hide_watch">\n                <i class="unhide icon"></i> 已关注\n            </a>\n        </span>\n        <span cg-link-tips="task.content"></span>\n    </div>\n    <div ng-transclude></div>\n</div>\n'),a.put("common/directives/task/tpl/item_simple.html",'<div class="task project-simple-task"\n     ng-class="taskClass(task)">\n\n    <div class="task-head">\n        <!-- 完成状态及loading效果 -->\n        <span class="status">\n            <i class="icon check-icon"\n               ng-if="!updating"\n               ng-click="toggleTaskStatus(task);"\n               ng-class="checkIconClass(task)"\n               data-position="bottom center"\n               data-variation="inverted"\n               data-html="{{ task.status == 1 ? \'点击标记完成\' : \'点击取消已完成\' }}"\n               cg-popup>\n            </i>\n            <i class="icon loading updating" ng-if="updating"></i>\n        </span>\n\n        <!-- 成员选择 -->\n        <div cg-task-member-picker="task.owner" members="task.members" multiple="false" active="task.status === 1"></div>\n\n        <!-- 优先级 -->\n        <cg-task-urgency class="textarea-urgency" priority="task.priority" showtooltip="1"></cg-task-urgency>\n    </div>\n\n\n    <div class="task-body flex-box">\n\n        <div name="taskDesc" class="task-content ellipsis flex-auto-justify">\n            <!-- 完成期限 -->\n            <span name="deadline" cg-task-deadline="task"\n                  options="{offset: {left: 0, top: 3}}"></span>\n\n            <!-- 完成期限，不可修改\n            <span class="date"\n                  ng-if="task.deadline"\n                  ng-bind="formated_deadline.date"\n                  ng-class="formated_deadline.clazz"></span>\n            -->\n\n            <!-- 任务标题 -->\n            <a name="title" class="title dark ellipsis"\n               ng-class="{\'title-with-tags\':task.labels.length > 0}"\n               ng-href="{{ task.project.project_path + \'/task/\' + task.id }}"\n               ng-bind="::task.content">\n            </a>\n\n            <!-- 标签 -->\n            <span name="taskTags" class="mr10 tags" ng-if="task.labels.length > 0">\n              <span name="taskTag" ng-repeat="tag in ::task.labels track by tag.id | orderBy:\'name\'" class="tag" ng-bind-html="tag.name" cg-tag-color="tag.color"></span>\n            </span>\n\n        </div>\n\n        <div class="task-foot ellipsis">\n            <!-- 项目名 -->\n            <span class="project-name"\n               ng-if="show_project_name"\n               ng-bind="::task.project.name"></span>\n\n            <!-- 资源编号 -->\n            <span class="number" ng-bind="\'#\' + task.number"></span>\n\n        </div>\n\n        <!-- 删除按钮 -->\n        <span class="remove-button">\n            <i class="red minus sign alternate icon remove-task"\n               ng-if="(USER | isCreatorOf: task) || (task | isRole: ADMIN)"\n               ng-click="removeTask(task);">\n            </i>\n        </span>\n    </div>\n\n</div>\n'),a.put("common/directives/task/tpl/item_simple_topmenu.html",'<div class="task">\n    <div class="flex-box">\n        <!-- 状态 -->\n        <span class="status">\n            <i class="icon check-icon"\n               ng-if="!updating"\n               ng-click="toggleTaskStatus(task);"\n               ng-class="checkIconClass(task)">\n            </i>\n            <i class="icon loading updating" ng-if="updating"></i>\n        </span>\n        <!-- 优先级 -->\n        <cg-task-urgency class="textarea-urgency" priority="task.priority" showtooltip="0"></cg-task-urgency>\n        <!-- 完成期限，不可修改 -->\n        <span>\n            <span class="date"\n                  ng-if="task.deadline"\n                  ng-bind="formated_deadline.date"\n                  ng-class="formated_deadline.clazz"></span>\n        </span>\n        <!-- 任务标题 -->\n        <a ng-href="{{ task.project_path + \'/task/\' + task.id }}" class="title ellipsis flex-auto-justify" ng-bind="::task.content"></a>\n    </div>\n</div>\n'),a.put("common/directives/task/tpl/just_show.html",'<div class="task project-task"\n     ng-class="taskClass(task)">\n    <i class="icon check-icon" ng-click="toggleTaskStatus(task);"\n       ng-class="checkIconClass(task)"\n       data-position="bottom center"\n       data-variation="inverted"\n       data-html="{{ task.status == 1 ? \'点击标记完成\' : \'点击取消已完成\' }}"\n       cg-popup>\n    </i>\n    <i class="icon loading updating" ng-if="updating"></i>\n    <div class="title">\n        <cg-task-urgency class="textarea-urgency" priority="task.priority" showtooltip="1"></cg-task-urgency>\n        <a class="taskEntry" ng-href="{{::task.project.project_path}}/task/{{::task.id}}">\n            <textarea class="urgency msd-elastic"\n                      disabled="disabled"\n                      ng-model="task.content"\n                      cg-enter="updateTaskContent($event, task);"></textarea>\n        </a>\n    </div>\n    <div class="created-time ellipsis">\n        <span class="mr10"><span cg-task-deadline="task" options="{offset: {left: 0, top: 3}}"></span></span>\n        <span class="mr10 refer-id" ng-if="::task.number">{{::(\'#\' + task.number)}}</span>\n        <span class="mr10 creator">{{::task.creator.name}}</span>\n        <span class="mr10">\n            <a ng-href="{{::task.project.project_path}}/task/{{::task.id}}">\n                <i class="time icon"></i>\n                <span cg-friendly-time="task.created_at"></span>\n            </a>\n        </span>\n        <span class="mr10">\n            <a ng-href="{{::task.project.project_path}}/task/{{::task.id}}" target="_self">\n                <i class="chat outline icon"></i> <span>{{::task.comments}}</span> 条评论\n            </a>\n        </span>\n        <span cg-link-tips="task.content"></span>\n    </div>\n</div>\n'),a.put("common/directives/task/tpl/member_picker.html",'<div class="member-picker">\n    <div class="ui form">\n        <div class="ui top pointing dropdown" ng-class="menuDirection()">\n            <img class="ui avatar image" style="margin:0;"\n                 ng-src="{{selected_user.avatar}}"\n                 title="{{selected_user.name}}"/>\n            <div ng-transclude></div>\n            <div class="menu" ng-show="dropdownAllowed">\n                <div class="input-wrapper">\n                    <div class="ui icon input">\n                        <input type="text" class="member-picker-filter" placeholder="Search..." ng-model="searchUsers.name">\n                        <i class="search icon"></i>\n                    </div>\n                </div>\n                <div class="members-outer" ng-class="{\'quick-select\': quick_select_index > -1}" ng-if="need_init">\n                    <a class="item ellipsis"\n                       ng-class="{active:isActive(user.id), \'selected\': quick_select_index === $index }"\n                       ng-repeat="user in member_users | filter: searchUsers.name"\n                       ng-click="toggleSelect(user)">\n                        <i class="icon" ng-class="{checkmark:isActive(user.id)}"></i>\n                        <img class="ui avatar image" ng-src="{{::user.avatar}}"\n                             style="width: 32px;height:32px;"/>\n                        <span>{{::user.name}}</span>\n                    </a>\n                    <div class="empty list" ng-if="member_users.length==0" style="font-size:12px;">\n                        <i class="loading icon"></i>正在加载成员列表...\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/task/tpl/member_picker_header.html",'<div class="member-picker wide">\n    <div class="ui form">\n        <div class="ui dropdown">\n            <div ng-transclude></div>\n            <div class="menu">\n                <div class="input-wrapper">\n                    <div class="ui icon input">\n                        <input type="text" class="member-picker-filter" placeholder="Search..." ng-model="searchUsers.name" style="height: 26px;">\n                        <i class="search icon"></i>\n                    </div>\n                </div>\n                <div class="members-outer" ng-class="{\'quick-select\': quick_select_index > -1}">\n                    <a class="item ellipsis"\n                       ng-class="{active:isActive(user.id), \'selected\': quick_select_index === $index }"\n                       ng-repeat="user in member_users | filter: searchUsers.name"\n                       ng-click="toggleSelect(user)">\n                        <i class="icon" ng-class="{checkmark:isActive(user.id)}" style="margin-right: 0;"></i>\n                        <img class="ui avatar image" ng-src="{{::user.avatar}}"\n                             style="width: 32px; height:32px; margin-right: 0;"/>\n                        <span>{{::user.name}}</span>\n                    </a>\n                    <div class="empty list" ng-if="member_users.length==0" style="font-size:12px;">\n                        <i class="loading icon"></i>正在加载成员列表...\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/task/tpl/project_picker.html",'<div class="project-picker wide">\n    <div class="ui form">\n        <div class="ui dropdown">\n            <div ng-transclude></div>\n            <div class="menu">\n                <div class="input-wrapper">\n                    <div class="ui icon input">\n                        <input type="text" class="project-picker-filter" placeholder="Search..." ng-model="searchProjects.name">\n                        <i class="search icon"></i>\n                    </div>\n                </div>\n                <div class="projects-outer" ng-class="{\'quick-select\': quick_select_index > -1}">\n                    <a class="item"\n                       ng-class="{active:isActive(project.id), \'selected\': quick_select_index === $index }"\n                       ng-repeat="project in projects | searchString: {key: searchProjects.name, region: \'name\'}"\n                       ng-click="toggleSelect(project)">\n                        <i class="icon" ng-class="{checkmark:isActive(project.id)}"></i>\n                        <img class="img" ng-src="{{ project.icon }}"/>\n                        <span class="text ellipsis"\n                              title="{{ project[\'owner_user_name\'] + \'/\' + project.name }}"\n                              ng-bind="project.name"></span>\n                    </a>\n                    <div class="empty list" ng-if="project.length==0" style="font-size:12px;">\n                        <i class="loading icon"></i>正在加载项目列表...\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("common/directives/task/tpl/urgency.html",'<div class="task-urgency-dropdown ui icon top left pointing dropdown" cg-dropdown cg-on-change="onUrgencyChanged">\n    <cg-task-urgency-head priority="priority" showtooltip="showtooltip"></cg-task-urgency-head>\n    <div class="menu">\n        <div class="item" ng-class="{active: priority === 3}" data-value="3">\n            <i class="icon urgency checkmark" ng-class="{checked: priority === 3}"></i>\n            <span class="urgency-list-wrapper">\n                <i class="coding active exclamation icon urgency"></i>\n                <i class="coding active exclamation icon urgency"></i>\n                <i class="coding active exclamation icon urgency"></i>\n            </span> <span>{{::priorities[3]}}</span>\n        </div>\n        <div class="item" ng-class="{active: priority === 2}" data-value="2">\n            <i class="icon urgency checkmark" ng-class="{checked: priority === 2}"></i>\n            <span class="urgency-list-wrapper">\n                <i class="coding active exclamation icon urgency"></i>\n                <i class="coding active exclamation icon urgency"></i>\n                <i class="coding light exclamation icon urgency"></i>\n            </span> <span>{{::priorities[2]}}</span>\n        </div>\n        <div class="item" ng-class="{active: priority === 1}" data-value="1">\n            <i class="icon urgency checkmark" ng-class="{checked: priority === 1}"></i>\n            <span class="urgency-list-wrapper">\n                <i class="coding active exclamation icon urgency"></i>\n                <i class="coding light exclamation icon urgency"></i>\n                <i class="coding light exclamation icon urgency"></i>\n            </span> <span>{{::priorities[1]}}</span>\n        </div>\n        <div class="item" ng-class="{active: priority === 0}" data-value="0">\n            <i class="icon urgency checkmark" ng-class="{checked: priority === 0}"></i>\n            <span class="urgency-list-wrapper">\n                <i class="coding light exclamation icon urgency"></i>\n                <i class="coding light exclamation icon urgency"></i>\n                <i class="coding light exclamation icon urgency"></i>\n            </span> <span>{{::priorities[0]}}</span>\n        </div>\n    </div>\n</div>\n'),a.put("common/directives/task/tpl/urgency_head.html",'<div class="task-urgency-wrapper">\n    <div class="task-urgency-tooltip"\n         data-position="bottom center"\n         data-variation="inverted"\n         data-html="设置紧急程度"\n         cg-popup\n         ng-if="showtooltip == 1"></div>\n    <i class="coding exclamation icon urgency" ng-class="{active: priority >= 1, light: priority < 1}"></i>\n    <i class="coding exclamation icon urgency" ng-class="{active: priority >= 2, light: priority < 2}"></i>\n    <i class="coding exclamation icon urgency" ng-class="{active: priority >= 3, light: priority < 3}"></i>\n</div>'),a.put("common/directives/teamSelect/tpl/teamSelect.html",'<div class="team-select">\n    <div class="ui dropdown">\n        <div class="selected selected-input" ng-click="showOptions=!showOptions">\n            <img class="ui avatar image selected-avatar"\n                 ng-src="{{selected.avatar}}"\n                 title="{{selected.name}}"/>\n            <span class="selected-text">{{selected.name}}</span>\n            <i class="triangle down icon dropdown-icon"></i>\n        </div>\n        <div class="menu options">\n            <div class="option" ng-click="choseObj(current_user)"\n                 ng-class="{\'true\':\'option-selected\'}[selected.globalKey == current_user.global_key]">\n                <img class="ui avatar image selected-avatar avatar-margin"\n                     ng-src="{{current_user.avatar}}"\n                     title="{{current_user.name}}"/>\n                <span class="option-text">{{current_user.name}}</span>\n            </div>\n            <div ng-if="teams.length>0" class="team-sign">团队</div>\n            <div ng-if="teams.length>0" ng-repeat="team in teams" class="option" ng-click="choseObj(team)"\n                 ng-class="{\'true\':\'option-selected\'}[selected.globalKey == team.global_key]">\n                <img class="ui avatar image selected-avatar avatar-margin"\n                     ng-src="{{team.avatar}}"\n                     title="{{team.name}}"/>\n                <span class="option-text">{{team.name}}</span>\n            </div>\n        </div>\n    </div>\n</div>\n'),
a.put("common/directives/uiFloatingDropDown/uiFloatingDropDown.html",'<div class="ui floating selection dropdown ui-floating-dropdown">\n    <span ng-bind-html="label"></span><i class="dropdown icon"></i>\n    <div class="menu">\n        <div class="item" ng-if="options.length === 0">\n            无可转让成员\n        </div>\n        <div class="item" ng-repeat="option in options" ng-bind-html="option.label" data-value="{{option.value}}"\n             ng-click="change(option)" ng-class="{\'active\':option.value === model}"></div>\n    </div>\n</div>'),a.put("common/directives/userActiveness/tpl/userActiveness.html",'<div class="user-activeness">\n    <div class="header">\n        <span class="title">TA 的活跃度</span>\n        <a class="show-private"\n           ng-if="currentUser.id && targetUser.id && currentUser.id === targetUser.id"\n           ng-click="setActivenessShowPrivate(!showPrivate)">\n            <i class="empty checkbox icon" ng-show="!showPrivate"></i>\n            <i class="checked checkbox icon" ng-show="showPrivate"></i>\n            允许其他人查看我的私有项目活跃度\n        </a>\n    </div>\n    <div ng-if="!loaded">\n        <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n    </div>\n    <table class="statistic-table" ng-if="loaded">\n        <tr>\n            <td colspan="3">\n                <div class="calendar">\n                    <div class="graph">\n                        <div cg-user-activeness-graph="activeness.daily_activeness"></div>\n                    </div>\n                    <div class="notes">\n                        <span class="description">活跃度统计自 push 、发冒泡、文件操作、任务操作的次数。</span>\n                        <span class="graph-legend">\n                            <span>Less</span>\n                            <ul class="legend">\n                                <li style="background-color: #eeeeee"></li>\n                                <li style="background-color: #d6e685"></li>\n                                <li style="background-color: #8cc665"></li>\n                                <li style="background-color: #44a340"></li>\n                                <li style="background-color: #1e6923"></li>\n                            </ul>\n                            <span>More</span>\n                    </div>\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td>\n                <div class="summary">\n                    <div class="item">过去一年的活跃度</div>\n                    <div class="count">{{activeness.total_with_seal_top_line | number}} 度</div>\n                    <div class="duration">{{activeness.start_date}} - {{activeness.end_date}}</div>\n                </div>\n            </td>\n            <td>\n                <div class="summary">\n                    <div class="item">最长连续活跃天数</div>\n                    <div class="count">{{activeness.longest_active_duration.days}} 天</div>\n                    <div class="duration">{{activeness.longest_active_duration.start_date}} - {{activeness.longest_active_duration.end_date}}</div>\n                </div>\n            </td>\n            <td>\n                <div class="summary">\n                    <div class="item">当前连续活跃天数</div>\n                    <div class="count">{{activeness.current_active_duration.days}} 天</div>\n                    <div class="duration">\n                        最后一次活跃于<span cg-friendly-time="activeness.last_activity_at" title="{{activeness.last_activity_at | date:\'yyyy-MM-dd HH:mm:ss\'}}"></span>\n                    </div>\n                </div>\n            </td>\n        </tr>\n    </table>\n</div>'),a.put("share/templates/tweet-topic-content.html",'<div class="topic-content-wrapper">\n    <div class="detail">\n        <a href="javascript:void(0)" class="ui button small" ng-click="watch(topic)" ng-if="show_watch && !topic.watched"><i class="icon loading" ng-if="topic.watching"></i> + 关注</a>\n        <a href="javascript:void(0)" class="ui small gray button" ng-click="unwatch(topic)" ng-if="show_watch && topic.watched"><i class="icon loading" ng-if="topic.unwatching"></i>取消关注</a>\n        <div class="title" ng-class="{\'no1\': $index == 0 }">\n            <a class="gray" href="/pp/topic/{{topic.id}}">#{{topic.name}}#</a>\n        </div>\n        <span style="float:left;color: #999">最热冒泡：</span>\n        <div class="ellipsis" cg-highlight="topic.hot_tweet.content" style="max-width: 400px;display: inline-block;"></div>\n        <span class="created-at" cg-friendly-time="topic.created_at" style="color: #999"></span>\n    </div>\n    <div class="join-in">\n        <span style="color: #999">最新参与者：</span>\n        <a\n           class="avatar"\n           ng-href="{{::user.path}}"\n           ng-repeat="user in topic.user_list">\n            <img class="ui image avatar18"\n                 ng-src="{{::user.avatar}}"\n                 title="{{::user.name}}"/>\n        </a>\n        <a style="font-size: 10px"\n           title="查看所有参与者"\n           href="/pp/topic/{{topic.id}}/joins"\n           ng-if="showMoreNew(topic)">\n            ...\n        </a>\n    </div>\n</div>\n'),a.put("search/search.html",'<div id="search-body">\n  <div id="search-in-page" ng-model="$parent.search_text" ng-if="USER" cg-advance-esearch force-show="$parent.force_show"></div>\n  <div class="search-input">\n    <div class="ui action large input">\n      <a class="project-label gray" ng-href="{{ search_project.project_path }}" ng-if="search_project">\n        <img width="36" ng-src="{{ search_project.icon }}"/>\n        <span ng-bind="search_project[\'owner_user_name\'] + \'/\' + search_project.name"></span>\n      </a>\n      <input type="text" ng-model="keyword" ng-focus="$parent.force_show = true" ng-blur="$parent.force_show = false">\n      <a class="ui large gray button" ng-click="gotoSearch(keyword)">搜索</a>\n    </div>\n  </div>\n  <div class="center empty list" ng-show="allPageLoading">\n    <i class="loading icon"></i>\n    读取中\n  </div>\n  <div ng-show="!allPageLoading">\n    <div class="search-tab">\n      <div class="ui small tabular menu" ng-class="{\'project-search\': search_project}">\n          <a class="item project" ng-class="{active:tab == \'project\'}" ng-click="changeTab(\'project\')">\n              项目 <span class="item-num">{{projects.totalRow || 0}}</span>\n          </a>\n          <a class="item task" ng-show="USER && !publicInProjectSearch" ng-class="{active:tab == \'task\'}" ng-click="changeTab(\'task\')">\n              任务 <span class="item-num">{{tasks.totalRow || 0}}</span>\n          </a>\n          <a class="item topic" ng-class="{active:tab == \'topic\'}" ng-click="changeTab(\'topic\')">\n              讨论 <span class="item-num">{{project_topics.totalRow || 0}}</span>\n          </a>\n          <a class="item tweet" ng-class="{active:tab == \'tweet\'}" ng-click="changeTab(\'tweet\')">\n              冒泡 <span class="item-num">{{tweets.totalRow || 0}}</span>\n          </a>\n          <a class="item file" ng-show="USER && !publicInProjectSearch" ng-class="{active:tab == \'file\'}" ng-click="changeTab(\'file\')">\n              文件 <span class="item-num">{{files.totalRow || 0}}</span>\n          </a>\n          <a class="item file" ng-show="project_name && USER" ng-class="{active:tab == \'code\'}" ng-click="changeTab(\'code\')">\n              代码 <span class="item-num">{{codes.totalRow || 0}}</span>\n          </a>\n          <a class="item mr" ng-show="USER && !publicInProjectSearch" ng-class="{active:tab == \'mr\'}" ng-click="changeTab(\'mr\')">\n              合并请求 <span class="item-num">{{mrs.totalRow || 0}}</span>\n          </a>\n          <a class="item pr" ng-class="{active:tab == \'pr\'}" ng-click="changeTab(\'pr\')">\n              Pull请求 <span class="item-num">{{prs.totalRow || 0}}</span>\n          </a>\n          <!-- rename it to user. will search all users in the future -->\n          <a class="item friend" ng-class="{active:tab == \'friend\'}" ng-click="changeTab(\'friend\')">\n              用户 <span class="item-num">{{friends.totalRow || 0}}</span>\n          </a>\n      </div>\n    </div>\n\n    <!-- project -->\n    <div class="search-content" ng-show="tab == \'project\' && key.length > 0">\n      <div class="search-controllers">\n        <div class="result" ng-if="key.length > 0">共搜索到 {{projects.totalRow || 0}} 个与 "{{key}}" 相关的项目</div>\n        <div class="filters" ng-repeat="(key, filter) in projectFilters" cg-search-filter filter="filter" callback="searchType(\'project\')" ng-show="filter.data.length > 0"></div>\n        <hr class="clear" />\n      </div>\n      <div ng-repeat="project in projects.list" class="search-item">\n        <div class="thumb"><a ng-href="{{project.project_path}}"><img ng-src="{{project.icon}}"></a></div>\n        <div class="info">\n          <div class="name ellipsis" ng-if="project.name">\n              <a ng-href="{{project.project_path}}"  cg-search-highlight="project.name"></a>\n          </div>\n          <div class="description ellipsis" cg-search-highlight="newlineToWhitespace(project.description)" ng-show="project.description"></div>\n          <div class="when">\n            <span class="avatar"><img ng-src="{{project.owner_user_picture}}"></span>\n            <span class="light" cg-bind-html="project.owner_user_home"></span>\n            <span class="light">最后更新于 <span cg-friendly-time="project.updated_at"></span></span>\n          </div>\n        </div>\n        <div class="stat" ng-show="project.type == 1">\n          <span><i class="icon fork code"></i>{{project.fork_count | friendlyNumber}}</span>\n          <span><i class="icon unhide"></i>{{project.watch_count | friendlyNumber}}</span>\n        </div>\n      </div>\n      <a class="down center more" ng-show="hasMore(projects) && !loading" href="javascript:void(0);" ng-click="loadMoreProjects()" >显示更多</a>\n      <div ng-show="hasMore(projects) && loading" class="center empty list">\n        <i class="loading icon"></i>玩命获取搜索结果中...\n      </div>\n    </div>\n\n    <!-- topic -->\n    <div class="search-content" ng-show="tab == \'topic\' && key.length > 0">\n      <div class="search-controllers">\n        <div class="result" ng-if="key.length > 0">共搜索到 {{project_topics.totalRow || 0}} 个与 "{{key}}" 相关的讨论</div>\n        <div class="filters" ng-repeat="(key, filter) in topicFilters" cg-search-filter filter="filter" callback="searchType(\'topic\')" ng-show="filter.data.length > 0"></div>\n        <hr class="clear" />\n      </div>\n      <div ng-repeat="topic in project_topics.list" class="search-item">\n        <div class="thumb-avatar"><a ng-href="{{topic.owner.path}}"><img ng-src="{{topic.owner.avatar}}"></a></div>\n        <div class="info">\n          <div class="name ellipsis" ng-if="topic.title">\n              <a ng-href="{{topic.project.project_path}}/topic/{{topic.id}}" cg-search-highlight="topic.title"></a>\n          </div>\n           <div class="description ellipsis-2" ng-if="topic.content.length > 0">\n               <a class="gray" ng-href="{{topic.project.project_path}}/topic/{{topic.id}}">\n                   <span ng-repeat="ctn in topic.content" cg-search-highlight="newlineToWhitespace(ctn)" ng-show="ctn"></span>\n               </a>\n           </div>\n          <div class="when2">\n            <span class="light">#{{topic.resource_id}}</span>\n            <span class="light"><a ng-href="{{topic.owner.path}}">{{topic.owner.name}}</a></span>\n            <span class="light"><i class="icon time" style="margin: 0"></i> <span cg-friendly-time="topic.created_at"></span></span>\n            <span class="light"><i class="icon chat" style="margin: 0"></i> {{topic.child_count || 0}}</span>\n          </div>\n        </div>\n      </div>\n      <a class="down center more" ng-show="hasMore(project_topics) && !loading" href="javascript:void(0);" ng-click="loadMoreProjectTopics()" >显示更多</a>\n      <div ng-show="hasMore(project_topics) && loading" class="center empty list">\n        <i class="loading icon"></i>玩命获取搜索结果中...\n      </div>\n    </div>\n\n    <!-- task -->\n    <div class="search-content" ng-show="tab == \'task\' && key.length > 0 && USER && !publicInProjectSearch">\n      <div class="search-controllers">\n        <div class="result">共搜索到 {{tasks.totalRow || 0}} 个与 "{{key}}" 相关的任务</div>\n        <div class="filters" ng-repeat="(key, filter) in taskFilters" cg-search-filter filter="filter" callback="searchType(\'task\')" ng-show="filter.data.length > 0"></div>\n        <hr class="clear" />\n      </div>\n      <div ng-repeat="task in tasks.list" class="search-item">\n        <div class="thumb-avatar"><a ng-href="{{task.owner.path}}"><img ng-src="{{task.owner.avatar}}"></a></div>\n        <div class="info">\n          <div class="name ellipsis" ng-if="task.content">\n              <a ng-href="{{task.project.project_path}}/task/{{task.id}}" cg-search-highlight="task.content"></a>\n          </div>\n            <div class="description" ng-if="task.description.length > 0">\n                <a class="gray" ng-href="{{task.project.project_path}}/task/{{task.id}}">\n                    <span ng-repeat="des in task.description" cg-search-highlight="newlineToWhitespace(des)" ng-show="des"></span>\n                </a>\n            </div>\n          <div class="when2">\n            <span class="light">#{{task.resource_id}}</span>\n            <span class="light"><a ng-href="{{task.creator.path}}">{{task.creator.name}}</a></span>\n            <span class="light"><i class="icon time" style="margin: 0"></i> <span cg-friendly-time="task.created_at"></span></span>\n            <span class="light"><i class="icon chat" style="margin: 0"></i> {{task.comments || 0}}</span>\n          </div>\n        </div>\n      </div>\n      <a class="down center more" ng-show="hasMore(tasks) && !loading" href="javascript:void(0);" ng-click="loadMoreTasks()" >显示更多</a>\n      <div ng-show="hasMore(tasks) && loading" class="center empty list">\n        <i class="loading icon"></i>玩命获取搜索结果中...\n      </div>\n    </div>\n\n    <!-- pp -->\n    <div class="search-content" ng-show="tab == \'tweet\' && key.length > 0">\n      <div class="search-controllers">\n        <div class="result">共搜索到 {{tweets.totalRow || 0}} 个与 "{{key}}" 相关的冒泡</div>\n        <div class="filters" ng-repeat="(key, filter) in tweetFilters" cg-search-filter filter="filter" callback="searchType(\'tweet\')" ng-show="filter.data.length > 0"></div>\n        <hr class="clear" />\n      </div>\n      <div ng-repeat="tweet in tweets.list" class="search-item">\n        <div class="thumb-avatar"><a ng-href="{{tweet.owner.path}}"><img ng-src="{{tweet.owner.avatar}}"></a></div>\n        <div class="info">\n          <div class="name"><a ng-href="{{tweet.path}}" ng-init="content = newlineToWhitespace(htmlToPlaintext(tweet.content))" cg-show-more="content" can-show-more="false" limit-to="48"></a></div>\n          <div class="when2">\n            <span class="light"><a ng-href="{{tweet.owner.path}}">{{tweet.owner.name}}</a></span>\n            <span class="light"><i class="icon time" style="margin: 0"></i> <span cg-friendly-time="tweet.created_at"></span></span>\n            <span>\n              <a ng-href="{{tweet.path}}" style="margin:0 0 0 5px;color:#666;">\n                  <i class="chat icon" style="margin:0px 0px;"></i> {{tweet.comments || 0}}\n              </a>\n            </span>\n            &nbsp;&nbsp;\n            <span style="cursor: pointer; margin:0 0 0 5px;color:#666;">\n               <i class="heart icon"\n                   ng-class="{\'empty\' : !tweet.liked,\'red\': tweet.liked}" style="margin:0px 0px;"></i>\n                {{tweet.likes || 0}}\n            </span>\n          </div>\n        </div>\n      </div>\n      <a class="down center more" ng-show="hasMore(tweets) && !loading" href="javascript:void(0);" ng-click="loadMoreTweets()" >显示更多</a>\n      <div ng-show="hasMore(tweets) && loading" class="center empty list">\n        <i class="loading icon"></i>玩命获取搜索结果中...\n      </div>\n    </div>\n\n    <!-- file -->\n    <div class="search-content" ng-show="tab == \'file\' && key.length > 0 && USER && !publicInProjectSearch">\n      <div class="search-controllers">\n        <div class="result">共搜索到 {{files.totalRow || 0}} 个与 "{{key}}" 相关的文件</div>\n        <div class="filters" ng-repeat="(key, filter) in fileFilters" cg-search-filter filter="filter" callback="searchType(\'file\')" ng-show="filter.data.length > 0"></div>\n        <hr class="clear" />\n      </div>\n      <table class="ui basic table">\n        <tbody>\n        <tr class="attachment" ng-repeat="file in files.list">\n          <td class="filename ellipsis">\n            <a ng-href="{{file.path}}">\n              <span cg-file-icon-src="file.preview" cg-file-icon="file.fileType"></span>\n              <span class="ellipsis" cg-search-highlight="file.name"></span>\n            </a>\n          </td>\n          <td>#{{file.resource_id}}</td>\n          <td class="size">{{file.size | bytes:2}}</td>\n          <td class="uploader ellipsis">\n            <a ng-href="{{file.owner.path}}">\n              <img class="ui circular image" ng-src="{{file.owner.avatar}}" width="32" height="32"/>{{file.owner.name}}\n            </a>\n          </td>\n          <td class="time">\n            <span cg-friendly-time="file.created_at"></span>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n      <a class="down center more" ng-show="hasMore(files) && !loading" href="javascript:void(0);" ng-click="loadMoreFiles()" >显示更多</a>\n      <div ng-show="hasMore(files) && loading" class="center empty list">\n          <i class="loading icon"></i>玩命获取搜索结果中...\n      </div>\n    </div>\n\n    <!-- codes -->\n    <div class="search-content" ng-show="tab == \'code\' && key.length > 0 && USER">\n      <div class="search-controllers" ng-show="!showCodeSearch">\n        <div class="comming-soon">\n            即将上线，敬请期待！现已开放内测，如想参与，猛戳 <a href="https://coding.net/u/coding/pp/123160" target="_blank">这里</a>\n        </div>\n      </div>\n      <div class="search-controllers" ng-show="showCodeSearch">\n        <div class="result">\n            <span ng-if="codeCommitId">\n                在当前索引版本 <a class="commit-id" ng-href="/u/{{username}}/p/{{project_name}}/git/tree/{{codeCommitId}}">{{codeCommitId | shortCommitId }}</a> 中，\n            </span>\n            共搜索到 {{codes.totalRow || 0}} 个与 "{{key}}" 相关的代码文件\n        </div>\n        <div class="filters" ng-repeat="(key, filter) in codeFilters" cg-search-filter filter="filter" callback="searchType(\'code\')" ng-show="filter.data.length > 0"></div>\n        <hr class="clear" />\n      </div>\n      <div ng-repeat="code in codes.list" class="search-item code">\n        <div class="title">\n            <div class="path ellipsis">\n                <a ng-href="/u/{{username}}/p/{{project_name}}/git/blob/{{code.commitId}}/{{code.path}}" title="{{code.path}}" cg-search-code-file-path="code.name"></a>\n            </div>\n        </div>\n        <div class="content">\n            <div class="result" cg-highlight-search-code code="code">\n            </div>\n        </div>\n      </div>\n      <a class="down center more" ng-show="hasMore(codes) && !loading" href="javascript:void(0);" ng-click="loadMoreCodes()" >显示更多</a>\n      <div ng-show="hasMore(codes) && loading" class="center empty list">\n          <i class="loading icon"></i>玩命获取搜索结果中...\n      </div>\n    </div>\n\n    <!-- mr -->\n    <div class="search-content" ng-show="tab == \'mr\' && key.length > 0">\n      <div class="search-controllers">\n        <div class="result">共搜索到 {{mrs.totalRow || 0}} 个与 "{{key}}" 相关的合并请求</div>\n        <div class="filters" ng-repeat="(key, filter) in mrFilters" cg-search-filter filter="filter" callback="searchType(\'mr\')" ng-show="filter.data.length > 0"></div>\n        <hr class="clear" />\n      </div>\n      <div ng-repeat="mr in mrs.list" class="search-item">\n        <div class="thumb-avatar"><a ng-href="{{mr.author.path}}"><img ng-src="{{mr.author.avatar}}"></a></div>\n        <div class="info">\n          <div class="name ellipsis" ng-if="mr.title.length > 0">\n            <a class="gray" ng-href="{{ mr.merge_status == \'CANCEL\' ? \'\' : mr.path}}" ng-disabled="{{ mr.merge_status == \'CANCEL\' }}">\n              <span cg-search-highlight="mr.title"></span>\n            </a>\n          </div>\n          <div class="pull-request">\n            <div class="pr-action">\n              <span class="pr-label src">{{htmlToPlaintext(mr.source_branch)}}</span>\n              <i class="long arrow right icon"></i>\n              <span class="pr-label des">{{htmlToPlaintext(mr.target_branch)}}</span>\n            </div>\n          </div>\n          <div class="description ellipsis-2" ng-if="mr.body.length > 0">\n            <a class="gray" ng-href="{{ mr.merge_status == \'CANCEL\' ? \'\' : mr.path}}" ng-disabled="{{ mr.merge_status == \'CANCEL\' }}">\n              <span ng-repeat="body in mr.body" cg-search-highlight="newlineToWhitespace(body)" ng-show="body"></span>\n            </a>\n          </div>\n          <div class="when2">\n            <span class="light">#{{mr.iid}}</span>\n            <span class="light"><a ng-href="{{mr.author.path}}">{{mr.author.name}}</a></span>\n            <span class="light"><i class="icon time" style="margin: 0"></i><span cg-friendly-time="mr.created_at"></span></span>\n            <span class="merge-status" ng-class="mr.merge_status.toLowerCase()">{{printableMergeStatus(mr.merge_status)}}</span>\n          </div>\n        </div>\n      </div>\n      <a class="down center more" ng-show="hasMore(mrs) && !loading" href="javascript:void(0);" ng-click="loadMoreMRs()" >显示更多</a>\n      <div ng-show="hasMore(mrs) && loading" class="center empty list">\n          <i class="loading icon"></i>玩命获取搜索结果中...\n      </div>\n    </div>\n\n    <!-- pr -->\n    <div class="search-content" ng-show="tab == \'pr\' && key.length > 0">\n      <div class="search-controllers">\n        <div class="result">共搜索到 {{prs.totalRow || 0}} 个与 "{{key}}" 相关的Pull请求</div>\n        <div class="filters" ng-repeat="(key, filter) in prFilters" cg-search-filter filter="filter" callback="searchType(\'pr\')" ng-show="filter.data.length > 0"></div>\n        <hr class="clear" />\n      </div>\n      <div ng-repeat="pr in prs.list" class="search-item">\n        <div class="thumb-avatar"><a ng-href="{{pr.author.path}}"><img ng-src="{{pr.author.avatar}}"></a></div>\n        <div class="info">\n          <div class="name ellipsis" ng-if="pr.title.length > 0">\n            <a class="gray" ng-href="{{ pr.merge_status == \'CANCEL\' ? \'\' : pr.path }}" ng-disabled="{{ pr.merge_status == \'CANCEL\' }}">\n              <span cg-search-highlight="pr.title"></span>\n            </a>\n          </div>\n          <div class="pull-request">\n            <div class="pr-action">\n              <span class="pr-label src">{{htmlToPlaintext(pr.author.global_key ? pr.author.global_key:\'已删除项目\')}}:{{pr.source_branch}}</span>\n              <i class="long arrow right icon"></i>\n              <span class="pr-label des">{{htmlToPlaintext(pr.owner.global_key)}}:{{pr.target_branch}}</span>\n            </div>\n          </div>\n          <div class="description ellipsis-2" ng-if="pr.body.length > 0">\n            <a class="gray" ng-href="{{ pr.merge_status == \'CANCEL\' ? \'\' : pr.path  }}" ng-disabled="{{ pr.merge_status == \'CANCEL\' }}" >\n              <span ng-repeat="body in pr.body" cg-search-highlight="newlineToWhitespace(body)" ng-show="body"></span>\n            </a>\n          </div>\n          <div class="when2">\n            <span class="light">#{{pr.iid}}</span>\n            <span class="light"><a ng-href="{{pr.author.path}}">{{pr.author.name}}</a></span>\n            <span class="light"><i class="icon time" style="margin: 0"></i> <span cg-friendly-time="pr.created_at"></span></span>\n            <span class="merge-status" ng-class="pr.merge_status.toLowerCase()">{{printableMergeStatus(pr.merge_status)}}</span>\n          </div>\n        </div>\n      </div>\n      <a class="down center more" ng-show="hasMore(prs) && !loading" href="javascript:void(0);" ng-click="loadMorePRs()" >显示更多</a>\n      <div ng-show="hasMore(prs) && loading" class="center empty list">\n          <i class="loading icon"></i>玩命获取搜索结果中...\n      </div>\n    </div>\n\n\n    <!-- friend -->\n    <div class="search-content" ng-show="tab == \'friend\' && key.length > 0">\n      <div class="search-controllers">\n        <div class="result">共搜索到 {{friends.totalRow || 0}} 个与 "{{key}}" 相关的用户</div>\n        <div class="filters" ng-repeat="(key, filter) in userFilters" cg-search-filter filter="filter" callback="searchType(\'friend\')" ng-show="filter.data.length > 0"></div>\n        <hr class="clear" />\n      </div>\n      <div ng-repeat="friend in friends.list" class="search-item">\n        <div class="thumb-avatar"><a ng-href="{{friend.path}}"><img ng-src="{{friend.avatar}}"></a></div>\n        <div class="info">\n          <div class="name">\n            <a ng-href="{{friend.path}}" cg-search-highlight="friend.name"></a>\n            <i class="icon time"></i><span cg-friendly-time="friend.created_at"></span> 加入 Coding\n          </div>\n          <div class="description"><span class="tag" ng-repeat="tag in splitTags(friend.tags_str)" ng-if="tag && tag.length > 0">{{tag}}</span></div>\n          <div class="stat">\n            <div ng-if="user.id != USER.id" class="ui down black tiny button" ng-click="showSendMsgDialog(friend)">\n                给TA私信\n            </div>\n            <div ng-if="user.id == USER.id" class="ui green label self" style="line-height: 14px;">\n                你自己\n            </div>\n          </div>\n        </div>\n      </div>\n      <a class="down center more" ng-show="hasMore(friends) && !loading" href="javascript:void(0);" ng-click="loadMoreFriends()" >显示更多</a>\n      <div ng-show="hasMore(friends) && loading" class="center empty list">\n          <i class="loading icon"></i>玩命获取搜索结果中...\n      </div>\n    </div>\n\n    <div class="empty list center" ng-show="!loading && !key || key.length === 0">\n        <i class="coffee icon"></i>我是不会告诉你搜索需要先输入一个关键字的...\n    </div>\n\n  </div>\n</div>\n'),a.put("tweet/tweet-list.html",'<cg-new-year></cg-new-year>\n<style type="text/css">\n    a.refresh-public-tweets {\n        float: right;\n        font-size: 14px;\n        margin: 15px 10px 0 0;\n    }\n    a.filter-public-tweets {\n        float: right;\n        font-size: 14px;\n        margin: 0 0 0 5px;;\n    }\n    .item.time .filter-public-tweets.gray i.icon {\n        position: absolute;\n        right:4px;\n        top: 14px;\n    }\n    .item.time .filter-public-tweets.gray.time:hover .filter.icon {\n        opacity: 0;\n    }\n    .item.time .filter-public-tweets.gray.time .time.icon {\n        opacity: 0;\n    }\n    .item.time .filter-public-tweets.time.gray:hover .time.icon {\n        opacity: 1;\n    }\n\n    .item.time .filter-public-tweets.gray.filter:hover .time.icon {\n        opacity: 0;\n    }\n    .item.time .filter-public-tweets.gray.filter .filter.icon {\n        opacity: 0;\n    }\n    .item.time .filter-public-tweets.filter.gray:hover .filter.icon {\n        opacity: 1;\n    }\n    .item.time .filter-public-tweets.gray.time .filter.icon,\n    .item.time .filter-public-tweets.gray.time .time.icon,\n    .item.time .filter-public-tweets.gray.filter .time.icon,\n    .item.time .filter-public-tweets.gray.filter .filter.icon {\n        -webkit-transition: opacity .2s ease-out;\n        -moz-transition: opacity .2s ease-out;\n        -ms-transition: opacity .2s ease-out;\n        -o-transition: opacity .2s ease-out;\n        transition: opacity .2s ease-out;\n    }\n    .item.time .title {\n        margin-right: 14px;\n    }\n    #hot-topic-cloud-container {\n        position: relative;\n    }\n    #hot-topic-cloud {\n        width: 300px;\n        height: 150px;\n    }\n    #hot-topic-cloud span {\n        cursor: pointer;\n    }\n    #hot-topic-cloud span:hover {\n        color: rgba(52, 130, 187, 1) !important;\n    }\n</style>\n<div id="tweet-list" class="ui grid" cg-scroll-to-top>\n    <div class="column left-column">\n\n        <!-- tweet editor -->\n        <div ng-controller="TweetFeedEditController" ng-if="USER">\n            <div cg-feed-editor="{{ feed_editor_config.content }}" feed-context="#tweet-list">\n                <textarea cg-feed-editor-textarea\n                          ng-model="feed_editor_config.content"\n                          cg-at-emoji\n                          cg-at-topic\n                          cg-at-context\n                          at-item="-1"\n                          at-context-type="\'tweet\'"\n                          at-all="false"\n                          placeholder="{{placeholder}}"\n                          cg-textarea-editable\n                          msd-elastic="\\n">\n                </textarea>\n            </div>\n        </div>\n\n        <!-- tweet tab -->\n        <div class="ui tabular menu">\n            <a class="item time" ng-class="{active: sort == \'time\'}" ng-click="switchSort(\'time\')">\n                <span class="title">广场</span>\n                <span ng-show="filter_switch && sort == \'time\'" ng-click="toggleFilter()" class="gray filter-public-tweets time">\n                    <i class="filter icon"></i>\n                    <i class="time icon" data-variation="inverted"\n                       data-html="<span>查看所有</span>"\n                       cg-popup></i>\n                </span>\n                <span ng-show="!filter_switch && sort == \'time\'" ng-click="toggleFilter()" class="gray filter-public-tweets filter">\n                    <i class="time icon"></i>\n                    <i class="filter icon" data-variation="inverted"\n                       data-html="<span>过滤</span>"\n                       cg-popup></i>\n                </span>\n            </a>\n            <a class="item" ng-class="{active: sort == \'hot\'}" ng-click="switchSort(\'hot\')">\n                热门\n            </a>\n            <a class="item" ng-class="{active: sort == \'friends\'}" ng-click="switchSort(\'friends\')" ng-if="USER">\n                好友圈\n            </a>\n            <a href="javascript:void(0);" ng-click="refreshPublicTweets();" class="gray refresh-public-tweets">\n                <i class="refresh icon"></i>\n            </a>\n        </div>\n\n        <div infinite-scroll="sort != \'hot\' && showMore();" infinite-scroll-distance="1">\n            <div class="bubble-item" ng-repeat="tweet in tweets track by tweet.id">\n                <a class="avatar"\n                   cg-hover-card="tweet.owner"\n                   ng-href="{{::tweet.owner.path}}">\n                    <img class="ui image avatar42"\n                         ng-src="{{::tweet.owner.avatar}}"\n                         title="{{::tweet.owner.name}}"/>\n                </a>\n                <div class="arrow" cg-bubble="tweet" on-remove="onBubbleRemove">\n                    <div ng-if="$root.USER" cg-bubble-comment-form="tweet"></div>\n                    <div cg-bubble-comment="tweet"></div>\n                </div>\n            </div>\n            <div cg-bubble-reward="reward"></div>\n        </div>\n\n        <div class="center empty list" ng-show="tweet_loading && show_more">\n            <i class="loading icon"></i>正在加载泡泡...\n        </div>\n    </div>\n    <div class="column right-column">\n\n        <a ng-href="/app#download" class="app-download-button">\n            <img src="https://dn-coding-net-production-static.qbox.me/static/0a1105539312ea1d13f32a1ba2bbfc2f.png" width="100%" alt="点此下载 Coding App">\n            <div class="app-qrcode">\n                <img src="https://dn-coding-net-production-static.qbox.me/static/7dc2c2ae0617121e6c2256f3d7c65c9d.png" width="100%" alt="扫一扫下载 Coding App">\n            </div>\n        </a>\n\n        <div cg-multi-ad="[\'bubble_banner_1\']" speed="3000" width="100%"></div>\n        <div cg-multi-ad="[\'bubble_banner_2\']" speed="3000" width="100%"></div>\n        <div cg-multi-ad="[\'bubble_banner_3\']" speed="3000" width="100%"></div>\n\n        <div class="ui header dividing">\n            热门话题\n            <a href="/pp/topic" class="gray"\n               style="float:right"\n               data-position="top center"\n               data-variation="inverted"\n               data-html="前往热门话题"\n               cg-popup>\n                <i class="icon right"></i>\n            </a>\n        </div>\n        <div ng-if="isWordCloudSupported" id="hot-topic-cloud-container">\n            <div id="hot-topic-cloud"></div>\n        </div>\n        <div ng-if="!isWordCloudSupported" class="hot-topics">\n            <div class="list" ng-if="!hot_loading && hot_topics.length > 0">\n                <div class="item" ng-repeat="topic in hot_topics track by topic.id">\n                    <a href="/pp/topic/{{topic.id}}" class="gray">#{{topic.name}}#</a>\n                </div>\n            </div>\n            <div ng-if="!hot_loading && !hot_topics.length > 0">\n                <span style="color:#999">没有话题。</span>\n            </div>\n            <div ng-if="hot_loading" class="loading block">\n                <span style="color:#999"><i class="icon loading" style="float:none;line-height: inherit;"></i>加载中...</span>\n            </div>\n        </div>\n        <div class="ui header dividing">热门用户</div>\n        <div class="hot-users">\n            <a class="user-item" ng-repeat="user in best_users track by user.id" ng-href="{{::user.path}}">\n                <div class="user-avatar">\n                    <img class="ui coding image avatar64" ng-src="{{::user.avatar}}">\n                </div>\n                <p class="user-name">{{::user.name}}</p>\n            </a>\n        </div>\n    </div>\n</div>\n<div ng-include="\'app/layout/global_footer/global_footer.html\'" ng-if="sort == \'hot\'"></div>\n'),
a.put("tweet/tweet-topic-detail.html",'<style>\n    a.refresh-public-tweets {\n        float: right;\n        font-size: 18px;\n        margin: 15px 10px 0 0;\n    }\n</style>\n<div id="tweet-topic-detail" class="ui grid" ng-if="!topic_loading" cg-scroll-to-top>\n    <div class="column left-column">\n\n        <div class="topic-tweets" ng-if="region === \'detail\'">\n            <!--<div cg-feed-editor="feedEditor" ng-if="USER && !topic_loading"></div>-->\n            <div cg-feed-editor="{{ feed_editor_config.content }}" ng-if="USER && !topic_loading" feed-context="#tweet-topic-detail">\n                <textarea cg-feed-editor-textarea\n                          ng-model="feed_editor_config.content"\n                          cg-at-emoji\n                          cg-at-topic\n                          cg-at-context\n                          at-context-type="\'tweet\'"\n                          at-item="-1"\n                          at-all="false"\n                          placeholder="{{placeholder}}"\n                          cg-textarea-editable\n                          msd-elastic="\\n">\n                </textarea>\n            </div>\n\n            <div class="bubble-item" ng-if="top_tweet.owner">\n                <a class="avatar"\n                   cg-hover-card="top_tweet.owner"\n                   ng-href="{{::top_tweet.owner.path}}">\n                    <img class="ui image avatar42"\n                         ng-src="{{::top_tweet.owner.avatar}}"\n                         title="{{::top_tweet.owner.name}}"/>\n                </a>\n\n                <div class="arrow" cg-bubble="top_tweet" on-remove="onTopBubbleRemove">\n                    <div cg-bubble-comment="top_tweet"></div>\n                    <div ng-if="$root.USER" cg-bubble-comment-form="top_tweet"></div>\n                </div>\n            </div>\n\n            <div class="ui tabular menu">\n                <a class="item" ng-class="{active: sort == \'new\'}" ng-click="switchSort(\'new\')">\n                    最新\n                </a>\n                <a class="item" ng-class="{active: sort == \'hot\'}" ng-click="switchSort(\'hot\')">\n                    热门\n                </a>\n                <a href="javascript:void(0);" ng-click="refreshPublicTweets();" class="gray refresh-public-tweets">\n                    <i class="refresh icon"></i>\n                </a>\n            </div>\n\n            <div class="bubble-item" ng-repeat="tweet in topic_tweets">\n                <a class="avatar"\n                   cg-hover-card="tweet.owner"\n                   ng-href="{{::tweet.owner.path}}">\n                    <img class="ui image avatar42"\n                         ng-src="{{::tweet.owner.avatar}}"\n                         title="{{::tweet.owner.name}}"/>\n                </a>\n\n                <div class="arrow" cg-bubble="tweet" on-remove="onBubbleRemove">\n                    <div ng-if="$root.USER" cg-bubble-comment-form="tweet"></div>\n                    <div cg-bubble-comment="tweet"></div>\n                </div>\n            </div>\n\n            <div cg-bubble-reward="reward"></div>\n\n            <div class="center empty list" ng-show="tweet_loading">\n                <i class="loading icon"></i>正在加载泡泡...\n            </div>\n\n            <div class="show-more" ng-show="!tweet_loading && sort != \'hot\'">\n                <span ng-if="show_more && topic_tweets.length > 0"><a class="down more" ng-click="showMore();">更多冒泡</a></span>\n                <span ng-if="!show_more || !topic_tweets.length > 0" style="font-size: 14px;color:#999;">没有更多泡泡了...</span>\n            </div>\n        </div>\n\n        <div class="topic-users" ng-if="region === \'joins\'">\n            <span class="header">参与者（{{topic.speackers}}）</span>\n            <div class="topic-user" ng-repeat="join in joins">\n                <div class="avatar">\n                    <a ng-href="{{::join.path}}">\n                        <img class="ui circular image avatar56" ng-src="{{::join.avatar}}"/>\n                    </a>\n                </div>\n                <div class="info">\n                    <a class="user-name ellipsis gray" ng-href="{{::join.path}}" style="max-width:80px;"><span>{{::join.name}}</span></a>\n                    <span class="join-in-at">\n                        <i class="time icon"></i>\n                        <span class="created-time" cg-friendly-time="join.created_at"></span> 加入\n                    </span>\n                    <div class="actions">\n                        <a href="javascript:void(0)" ng-click="follow(join)" class="ui button small"\n                               ng-if="!join.followed && USER.global_key !== join.global_key"><i class="icon loading" ng-if="join.following"></i>+关注</a>\n                        <span ng-if="join.followed && join.follow && USER" style="font-size:12px;margin-left: 10px;">\n                            <i class="green exchange icon"></i>相互关注\n                        </span>\n                        <span ng-if="join.followed && !join.follow && USER" style="font-size:12px;margin-left: 10px;">\n                            <i class="blue checkmark icon"></i>已关注\n                        </span>\n                    </div>\n                </div>\n            </div>\n            <div cg-pager="{{pager_id}}" class="center"></div>\n        </div>\n    </div>\n    <div class="column right-column">\n        <div class="topic-banner area">\n            <a ng-if="topic.image_url">\n                <img ng-src="{{topic.image_url}}"/>\n            </a>\n            <div class="topic-info">\n                <div class="topic-title">\n                    <a class="gray" href="/pp/topic/{{topic_id}}">#{{topic.name}}#</a>\n                </div>\n                <span class="content">{{topic.description}}</span>\n                <div class="related">\n                    <a class="joins" href="/pp/topic/{{topic_id}}/joins"><span class="num">{{topic.speackers}}</span> 参与</a>\n                </div>\n            </div>\n        </div>\n        <div class="topic-hot-joins area">\n            <span class="title">热门参与者<a class="gray" href="/pp/topic/{{topic_id}}/joins"><i class="icon right"></i></a></span>\n            <div class="joins" style="margin-top:10px">\n                <a class="user-item" ng-href="{{::user.path}}" ng-repeat="user in hot_joins">\n                    <div class="user-avatar">\n                        <img class="ui image avatar48" ng-src="{{::user.avatar}}" title="{{::user.name}}"/>\n                    </div>\n                    <p class="ellipsis" style="color:#666;font-size:12px;max-width:60px">\n                        <span>{{::user.name}}</span>\n                    </p>\n                </a>\n            </div>\n            <div ng-if="hot_joined_loading" class="loading block">\n                <span><i class="icon loading"></i>加载中...</span>\n            </div>\n        </div>\n        <div class="hot-topics area">\n            <span class="title">热门话题<a href="/pp/topic" class="gray"><i class="icon right"></i></a></span>\n            <div class="list">\n                <div class="item" ng-repeat="topic in hot_topics">\n                    <a ng-href="{{::(\'/pp/topic/\' + topic.id)}}" class="gray"><span>{{::(\'#\' + topic.name + \'#\')}}</span></a>\n                </div>\n                <div ng-if="hot_loading" class="loading block">\n                    <span><i class="icon loading"></i>加载中...</span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("tweet/tweet-topic-list.html",'<div id="tweet-topic-list" class="ui grid" cg-scroll-to-top>\n    <div ng-if="marketing_loading" class="loading block">\n        <span><i class="icon loading"></i>加载中...</span>\n    </div>\n    <div class="hot-tweet-topic eleven wide column left-column">\n        <div class="header">\n            热门话题榜\n        </div>\n        <div class="bubble-topic-item" ng-repeat="topic in topics" ng-if="!hot_loading">\n            <div ng-include="\'share/templates/tweet-topic-content.html\'"></div>\n        </div>\n        <div ng-if="hot_loading" class="loading block">\n            <span><i class="icon loading"></i>加载中...</span>\n        </div>\n    </div>\n    <div class="related-tweet-topic five wide column right-column">\n        <div class="marketing-tweet-topic" ng-if="!marketing_loading">\n            <div class="item" ng-repeat="marketing_topic in marketing_topics">\n                <a ng-href="{{::(\'/pp/topic/\' + marketing_topic.id)}}">\n                    <img ng-src="{{::marketing_topic.image_url}}"/>\n                </a>\n                <div class="topic-name">\n                    <a ng-href="{{::(\'/pp/topic/\' + marketing_topic.id)}}" class="gray">\n'+"                        <span>{{::('#' + marketing_topic.name + '#')}}</span>\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"),a.put("tweet/tweet.html",'<div id="user-space" class="ui grid">\n    <div class="five wide column info-column"\n         ng-include="\'app/user/space/left_column.html\'"></div>\n    <div id="tweet-detail" class="eleven wide column content-column tweet-item" ng-if="tweet.owner">\n        <div class="arrow" cg-bubble="tweet" on-remove="onSpaceBubbleRemove" expand="true">\n            <div ng-if="$root.USER" cg-bubble-comment-form="tweet"></div>\n            <div cg-bubble-comment="tweet"></div>\n        </div>\n    </div>\n    <div cg-bubble-reward="reward"></div>\n</div>\n'),a.put("paas/empty/empty.html",'<div class="empty paas container" ng-controller="PaasEmptyController">\n    <div class="paas-content paas-empty">\n        <h2 class="ui dividing header content-header">开启演示平台功能</h2>\n        <div class="ui warning message">\n            为了更好地为用户提供服务，Coding 正在进行深度的改版和功能整合工作。目前的演示平台功能将于 2016 年 12 月 31 日关闭。将于 2016 年 10 月 31 日停止未开启的项目开启演示平台。已经开启演示平台的项目，将允许运行到 2016 年 11 月 30 日，此后将无法启动与部署。已经存在的演示平台服务，将保留到 2016 年 12 月 31日，以供用户备份。建议用户使用 <a href="https://ide.coding.net" target="_blank">WebIDE</a> 来替代演示平台的功能。如有任何疑问请在 <a href="https://coding.net/u/coding/p/Coding-Feedback/topic" target="_blank">Feedback</a> 提出，感谢您对 Coding 的支持。\n        </div>\n    </div>\n</div>\n'),a.put("paas/files/files.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n  <div ng-include="\'app/git/public_view/inner_menu.html\'" ng-if="PROJECT.is_public"></div>\n  <div ng-include="\'paas/paas-inner-menu.html\'" class="ui secondary vertical menu active" id="inner-menu" ng-class="{fixed: !PROJECT.is_public}" ng-style="PROJECT.is_public ? {float: \'left\', \'border-right\': \'none\'} : {}"></div>\n  <div class="paas container" ng-style="PROJECT.is_public ? {\'border-left\': \'1px solid #CCC\', \'min-height\': \'420px\', \'padding\': \'30px 30px 0 30px\'} : {}">\n      <h2 class="ui dividing header">\n        <div class="right floated small ui button" ng-click="refreshPage()">刷新</div>\n        文件系统\n      </h2>\n        <div class="ui warning message">\n            为了更好地为用户提供服务，Coding 正在进行深度的改版和功能整合工作。目前的演示平台功能将于 2016 年 12 月 31 日关闭。将于 2016 年 10 月 31 日停止未开启的项目开启演示平台。已经开启演示平台的项目，将允许运行到 2016 年 11 月 30 日，此后将无法启动与部署。已经存在的演示平台服务，将保留到 2016 年 12 月 31日，以供用户备份。建议用户使用 <a href="https://ide.coding.net" target="_blank">WebIDE</a> 来替代演示平台的功能。如有任何疑问请在 <a href="https://coding.net/u/coding/p/Coding-Feedback/topic" target="_blank">Feedback</a> 提出，感谢您对 Coding 的支持。\n        </div>\n      <div class="files">\n        <p style="font-size: 12px; color: #666;">\n          <strong>提示：</strong>必须启动应用后才可以查看文件系统。\n        </p>\n        <div class="file-explorer">\n          <div class="ui breadcrumb">\n            <a class="section" style="font-weight: bold;" ng-click="changePath(\'/\')">{{PROJECT.name}}</a>\n            <div class="divider" ng-repeat-start="bc in breadcrumbs">/</div>\n            <a class="section" ng-click="changePath(\'/\', bc.path + \'/\')" ng-repeat-end>{{bc.name}}</a>\n            <div class="divider">/</div>\n            <a class="section" style="color: black; cursor: auto;">{{name}}</a>\n          </div>\n          <p class="file-loading" ng-if="loading">\n              <i class="loading icon"></i>\n              正在加载\n          </p>\n          <div class="content" ng-if="!loading && !!files">\n            <hr>\n            <table ng-if="dir">\n              <tr ng-if="path != \'/\' && path !=\'\'">\n                <th>\n                  <a ng-click="goToPrev(path)"><i class="reply mail icon"></i>..</a>\n                </th>\n                <td></td>\n              </tr>\n              <tr ng-repeat="file in files track by $index">\n                <th>\n                  <a ng-click="changePath(path, file.name)">\n                    <i ng-class="{folder: file.dir, text: !file.dir, file: !file.dir, outline: !file.dir, icon: true}"></i><span>{{file.name}}</span>\n                  </a>\n                </th>\n                <td>{{file.size}}</td>\n              </tr>\n              <tr ng-if="files.length == 0"><td colspan="2" style="text-align: center;">无内容</td></tr>\n            </table>\n            <pre ng-if="!dir && files.length > 0" cg-highlight="files"></pre>\n            <p class="file-loading" ng-if="!dir && files.length == 0">无内容</p>\n          </div>\n          <div class="goto-page" ng-show="!!files && total_pages > 1">\n              每页显示 50K 数据，页码:\n              <input ng-model="page" type="text" cg-ctrl-enter="goToPage(page)">\n              <a class="mini blue ui button" ng-click="goToPage(page)">Go</a>\n          </div>\n          <div cg-pager="{{pager_id}}"></div>\n        </div>\n      </div>\n  </div>\n</div>\n'),a.put("paas/logs/logs.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n  <div ng-include="\'app/git/public_view/inner_menu.html\'" ng-if="PROJECT.is_public"></div>\n  <div ng-include="\'paas/paas-inner-menu.html\'" class="ui secondary vertical menu active" id="inner-menu" ng-class="{fixed: !PROJECT.is_public}" ng-style="PROJECT.is_public ? {float: \'left\', \'border-right\': \'none\'} : {}"></div>\n  <div class="paas container" ng-style="PROJECT.is_public ? {\'border-left\': \'1px solid #CCC\', \'min-height\': \'420px\', \'padding\': \'30px 10px 0 30px\'} : {}">\n      <h2 class="ui dividing header">\n        <div class="right floated gray small ui button" ng-click="logs = []">清屏</div>\n        <div class="right floated dark gray small ui button" ng-class="{\'loading\': loading}" ng-click="ws_support && refreshLogs()" ng-show="!autoScroll">刷新</div>\n        <span>应用日志\n         <i class="icon help tip" style="cursor: pointer;margin-left: 5px!important;"\n             data-html="<div class=\'content\'>演示平台中的应用日志包括该项目的演示部署及访问日志，主要是为了程序排错之用。<br/>\x0B注意：平台仅保留最近一千行应用日志。应用日志会进行不定期清理，如有重要日志，请及时保存。<br/><a href=\'/help/project_demos/what_is_the_application_log\' target=\'_blank\'>更多帮助<i class=\'icon double angle right\'></i></a></div>" cg-help-popup=""></i>\n        </span>\n        <div class="log-filters">\n          <div class="ui radio checkbox" ng-repeat="(key, display) in log_filters">\n            <input type="radio" name="log-filter" id="filter_{{key}}" ng-model="$parent.filter" ng-value="key">\n            <label for="filter_{{key}}" class="title">{{display}}</label>\n          </div>\n        </div>\n      </h2>\n    <div class="ui warning message">\n        为了更好地为用户提供服务，Coding 正在进行深度的改版和功能整合工作。目前的演示平台功能将于 2016 年 12 月 31 日关闭。将于 2016 年 10 月 31 日停止未开启的项目开启演示平台。已经开启演示平台的项目，将允许运行到 2016 年 11 月 30 日，此后将无法启动与部署。已经存在的演示平台服务，将保留到 2016 年 12 月 31日，以供用户备份。建议用户使用 <a href="https://ide.coding.net" target="_blank">WebIDE</a> 来替代演示平台的功能。如有任何疑问请在 <a href="https://coding.net/u/coding/p/Coding-Feedback/topic" target="_blank">Feedback</a> 提出，感谢您对 Coding 的支持。\n    </div>\n      <p style="margin: 10px 0 10px 0; font-size: 12px; color: #666;">\n        <strong>注意：</strong>本功能仅供开发调试用。服务器端最多缓存 1000 行日志，不定期清除，点击日志列表右上角的小圆点可以开启实时日志。\n      </p>\n      <div class="error ui small icon message" ng-if="!ws_support">\n          <i class="warning icon"></i>\n          <div class="content">\n              <div class="header">日志功能无法启用</div>\n              <p>在当前浏览器上未检测到 WebSocket 支持</p>\n          </div>\n      </div>\n      <div class="logs" ng-if="ws_support" cg-scroll-to-top>\n        <p class="log-loading" ng-show="loading"><i class="loading icon"></i>建立 WebSocket 连接..</p>\n        <a id="tail" ng-click="toggleScroll()" ng-class="{\'active\': autoScroll}" style="top: 0px;" ng-show="!loading">\n          <span class="status"></span>\n          <label class="text">{{autoScroll ? \'关闭实时日志\' : \'开启实时日志\'}}</label>\n        </a>\n        <pre ng-show="!loading">\n            <p ng-repeat="log in logs" class="log-{{log.header.source}}" ng-show="isLogShow(filter, log.header.source)"><a></a><span class="{{log.header.type}}">{{log.header.text}}</span><span class="{{log.content.type}}">{{log.content.text}}</span></p>\n        </pre>\n      </div>\n  </div>\n</div>\n'),a.put("paas/paas-inner-menu.html",'<header class="header item">\n    {{\'paas_platform\' | i18n:\'paas_menu\'}}\n    <a href="http://docs.coding.io" target="_blank" title="演示平台文档"><i class="icon help"></i></a>\n    <article>\n        {{\'repo_paas_platform\' | i18n:\'paas_menu\'}}\n    </article>\n</header>\n<a class="item" ng-href="{{PROJECT.project_path}}/paas" ng-class="{active:inner_menu == \'basic\'}">\n    <i class="dashboard icon"></i>{{\'controller\' | i18n:\'paas_menu\'}}\n</a>\n<a class="item" ng-href="{{PROJECT.project_path}}/paas/logs" ng-class="{active:inner_menu == \'logs\'}">\n    <i class="calendar icon"></i>{{\'logs\' | i18n:\'paas_menu\'}}\n</a>\n<a class="item" ng-href="{{PROJECT.project_path}}/paas/files" ng-controller="PaasMenuController" ng-if="cf_app.endpoint < 2" ng-class="{active:inner_menu == \'files\'}">\n    <i class="file icon"></i>{{\'filesystem\' | i18n:\'paas_menu\'}}\n</a>\n<a class="item" ng-href="{{PROJECT.project_path}}/paas/vars" ng-class="{active:inner_menu == \'vars\'}">\n    <i class="info icon"></i>{{\'environment_variables\' | i18n:\'paas_menu\'}}\n</a>\n<a class="item" ng-href="{{PROJECT.project_path}}/paas/services" ng-class="{active:inner_menu == \'services\'}">\n    <i class="glass icon"></i>{{\'services\' | i18n:\'paas_menu\'}}\n</a>\n'),a.put("paas/service/add.html",'<div class="marketplace ui modal" id="pass-add-service-modal">\n    <i class="close icon"></i>\n    <h3 class="header">添加服务</h3>\n    <div class="content">\n        <div class="ui form">\n            <div class="field">\n                <h4>选择服务(必选)\n                    <label class="ui red pointing left label" ng-if="form_error">\n                        <i class="warning icon"></i>请选择一个服务\n                    </label>\n                </h4>\n\n                <p style="font-size: 13px; color: #666;" ng-if="!marketplace"><i class="loading icon"></i>加载服务列表</p>\n                <div class="ui relaxed horizontal divided list">\n                    <div class="item" ng-click="selService(market.guid, $event)" ng-repeat="market in marketplace">\n                        <div class="image">\n                            <div ng-switch="market.label">\n                                <img ng-switch-when="mysql" src="https://dn-coding-net-production-static.qbox.me/static/543511d709b9ec4567db43750abcaeee.png" title="{{market.description}}" width="60" height="60">\n                                <img ng-switch-when="redis" src="https://dn-coding-net-production-static.qbox.me/static/df5991d0a55d38143bb663aa71ace558.gif" title="{{market.description}}" width="60" height="60">\n                                <img ng-switch-when="mongodb" src="https://dn-coding-net-production-static.qbox.me/static/ade5489f58b5cb017273aee5837eed04.gif" title="{{market.description}}" width="60" height="60">\n                                <img ng-switch-when="postgresql" src="https://dn-coding-net-production-static.qbox.me/static/65b29314ba4a15a9eea705890b1f3130.png" title="{{market.description}}" width="60" height="60">\n                                <img ng-switch-when="filesystem" src="https://dn-coding-net-production-static.qbox.me/static/23886465363cb39b0d5bb71ecde85b6e.png" title="{{market.description}}" width="60" height="60">\n                            </div>\n                            <a class="small like green ui corner label">\n                                <i class="checkmark icon"></i>\n                            </a>\n                        </div>\n                        <div class="content">\n                            <div class="name">{{market.label}}</div>\n                        </div>\n                    </div>\n                </div>\n                <input type="hidden" ng-model="service.guid">\n            </div>\n            <div class="field">\n                <h4>服务名(可选)</h4>\n                <input type="text" placeholder="可由字母、数字、下划线组成" ng-model="service.name">\n            </div>\n            <div class="field">\n                <div class="ui checkbox">\n                    <input id="createBind" name="createBind" type="checkbox" ng-model="createBind">\n                    <label for="createBind">绑定创建后的服务到此项目(可选)</label>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="actions">\n        <div class="ui black button">取消</div>\n        <div class="ui positive button" ng-class="{\'loading\': add_loading}" ng-click="createService(service)">确定</div>\n    </div>\n</div>\n'),a.put("paas/service/console.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n  <div ng-include="\'app/git/public_view/inner_menu.html\'" ng-if="PROJECT.is_public"></div>\n  <div ng-include="\'paas/paas-inner-menu.html\'" class="ui secondary vertical menu active" id="inner-menu" ng-class="{fixed: !PROJECT.is_public}" ng-style="PROJECT.is_public ? {float: \'left\', \'border-right\': \'none\'} : {}"></div>\n  <div class="paas container"\n        ng-style="PROJECT.is_public ? {\'border-left\': \'1px solid #CCC\', \'min-height\': \'420px\', \'padding\': \'30px 30px 0 30px\'} : {}" >\n    <h2 class="ui dividing header">\n      <div class="toolbar" style="float: right;">\n        <div class= "small gray ui button" ng-click="fullscreen=!fullscreen">\n          全屏\n          <i class="icon gray remove" ng-click="fullscreen=false" ng-if="fullscreen"></i>\n        </div>\n        <div class="small ui button file" ng-if="importable">\n          恢复数据\n          <input id="fileupload" type="file" name="file" file-upload="uploadSettings">\n        </div>\n        <a ng-href="{{export_url}}" target="_self" class="small ui button"  ng-if="importable">备份数据</a>\n      </div>\n      服务控制台\n    </h2>\n    <div class="ui warning message">\n        为了更好地为用户提供服务，Coding 正在进行深度的改版和功能整合工作。目前的演示平台功能将于 2016 年 12 月 31 日关闭。将于 2016 年 10 月 31 日停止未开启的项目开启演示平台。已经开启演示平台的项目，将允许运行到 2016 年 11 月 30 日，此后将无法启动与部署。已经存在的演示平台服务，将保留到 2016 年 12 月 31日，以供用户备份。建议用户使用 <a href="https://ide.coding.net" target="_blank">WebIDE</a> 来替代演示平台的功能。如有任何疑问请在 <a href="https://coding.net/u/coding/p/Coding-Feedback/topic" target="_blank">Feedback</a> 提出，感谢您对 Coding 的支持。\n    </div>\n    <div class="ui dimmable dimmed" style="min-height: 300px;">\n        <div class="ui inverted active dimmer" ng-if="loading">\n          <div class="ui loader"></div>\n        </div>\n        <div class="ui small info message" ng-if="filesystem">\n            <strong>提示：</strong>文件系统服务不支持执行命令，下面的控制台仅作显示提示信息用。\n            <a class="small blue ui button" ng-click="browseFs()">查看服务文件系统</a>\n        </div>\n        <div class="service-console" id="service-console" cg-fullscreen="fullscreen">\n          <div class="loading" style="margin-top: 100px; padding: 10px 0; text-align: center; color: #555; font-size: 14px;" ng-if="!consoleReady">\n            <i class="loading icon"></i>正在初始化\n          </div>\n        </div>\n    </div>\n  </div>\n</div>\n'),a.put("paas/service/show.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n  <div ng-include="\'app/git/public_view/inner_menu.html\'" ng-if="PROJECT.is_public"></div>\n  <div ng-include="\'paas/paas-inner-menu.html\'" class="ui secondary vertical menu active" id="inner-menu" ng-class="{fixed: !PROJECT.is_public}" ng-style="PROJECT.is_public ? {float: \'left\', \'border-right\': \'none\'} : {}"></div>\n  <div class="paas container" ng-style="PROJECT.is_public ? {\'border-left\': \'1px solid #CCC\', \'min-height\': \'420px\', \'padding\': \'30px 30px 0 30px\'} : {}">\n      <h2 class="ui dividing header">\n        <div class="right floated positive small dark gray ui button" ng-click="showMarketplace()" ng-if="cf_app.project.owner.id == USER.id">添加服务</div>\n        服务管理\n      </h2>\n        <div class="ui warning message">\n            为了更好地为用户提供服务，Coding 正在进行深度的改版和功能整合工作。目前的演示平台功能将于 2016 年 12 月 31 日关闭。将于 2016 年 10 月 31 日停止未开启的项目开启演示平台。已经开启演示平台的项目，将允许运行到 2016 年 11 月 30 日，此后将无法启动与部署。已经存在的演示平台服务，将保留到 2016 年 12 月 31日，以供用户备份。建议用户使用 <a href="https://ide.coding.net" target="_blank">WebIDE</a> 来替代演示平台的功能。如有任何疑问请在 <a href="https://coding.net/u/coding/p/Coding-Feedback/topic" target="_blank">Feedback</a> 提出，感谢您对 Coding 的支持。\n        </div>\n      <div class="ui dimmable dimmed" style="min-height: 300px;">\n        <div class="ui inverted active dimmer" ng-if="loading">\n          <div class="ui loader"></div>\n        </div>\n        <div class="ui inverted active dimmer" ng-if="!!service_credentials">\n          <div class="content">\n            <div class="center">\n              <div class="ui info message" style="max-width: 860px; margin: 0 auto; text-align: left; font-size: 12px;">\n              <i class="close icon" ng-click="hideCredentials()"></i>\n              <div class="header" style="border-bottom: 1px solid #ddd; padding-bottom: 10px;">\n                服务连接信息\n              </div>\n              <ul class="list" ng-if="!!service_credentials" style="margin-top: 10px;">\n                <li ng-repeat="(key, value) in service_credentials"><b>{{key}}: </b>{{value}}</li>\n              </ul>\n            </div>\n            </div>\n          </div>\n        </div>\n        <h4 class="ui green header">\n          <div class="content">\n            已绑定服务\n            <div class="sub header" style="font-size: 14px; line-height: 24px;">已绑定到此应用的服务</div>\n          </div>\n        </h4>\n        <table class="ui table segment service">\n          <thead>\n              <tr>\n                <th class="three wide">名称</th>\n                <th class="four wide">描述</th>\n                <th class="four wide">已绑定应用</th>\n                <th class="five wide">操作</th>\n              </tr>\n          </thead>\n          <tbody>\n            <tr ng-if="listLoading(app_services)">\n              <td colspan="4" style="padding: 10px 0;text-align: center;color: #555;font-size: 16px;"><i class="loading icon"></i>正在加载</td>\n            </tr>\n            <tr ng-if="listEmpty(app_services)">\n              <td colspan="4" style="padding: 10px 0;text-align: center;color: #555;font-size: 16px;">无数据</td>\n            </tr>\n            <tr ng-repeat="app_service in app_services">\n              <td>\n                {{app_service.name}}\n              </td>\n              <td>{{app_service.description}}</td>\n              <td class="bindings">\n                <a href="{{binding.project.url || binding.project.project_path}}" class="ui label binding" target="_blank" ng-repeat="binding in app_service.bindings">{{binding.project.name}}</a>\n              </td>\n              <td>\n                <div class="small red ui button" ng-click="unBindService(app_service.id)" ng-if="cf_app.project.owner.id == USER.id">解绑</div>\n                <a ng-if="cf_app.endpoint < 2 && app_service.console" ng-href="{{PROJECT.project_path}}/paas/services/{{app_service.id}}/console" class="small black ui button">控制台</a>\n                <div class="small ui button" ng-click="showCredentials(app_service.id)">连接信息</div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <h4 class="ui purple header" ng-if="cf_app.project.owner.id == USER.id">\n          <div class="content">\n            可用服务\n            <div class="sub header" style="font-size: 14px; line-height: 24px;">可以绑定到此应用的服务</div>\n          </div>\n        </h4>\n        <table class="ui table segment service" ng-if="cf_app.project.owner.id == USER.id">\n          <thead>\n              <tr>\n                <th class="three wide">名称</th>\n                <th class="four wide">描述</th>\n                <th class="four wide">已绑定应用</th>\n                <th class="five wide">操作</th>\n              </tr>\n          </thead>\n          <tbody>\n            <tr ng-if="listLoading(user_services)">\n              <td colspan="4" style="padding: 10px 0;text-align: center;color: #555;font-size: 16px;"><i class="loading icon"></i>正在加载</td>\n            </tr>\n            <tr ng-if="listEmpty(user_services)">\n              <td colspan="4" style="padding: 10px 0;text-align: center;color: #555;font-size: 16px;">无数据</td>\n            </tr>\n            <tr ng-repeat="user_service in user_services">\n              <td>\n                {{user_service.name}}\n              </td>\n              <td>{{user_service.description}}</td>\n              <td class="bindings">\n                <a href="{{binding.project.url || binding.project.project_path}}" class="ui label binding" target="_blank" ng-repeat="binding in user_service.bindings">{{binding.project.name}}</a>\n              </td>\n              <td>\n                <div class="small green ui button" ng-click="bindService(user_service.id)">绑定</div>\n                <div class="small red ui button" ng-click="requirePassword(user_service.id)" ng-show="cf_app.project.owner.id == USER.id">删除</div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n  </div>\n</div>\n'),a.put("paas/show/domain.html",'<div class="paas-domain-modal ui modal" id="paas-domain-modal">\n    <i class="close icon"></i>\n    <h3 class="header">修改域名</h3>\n    <div class="content">\n        <div class="warning ui small message">\n            <div class="content">\n                <p>\n                    <strong>注意：</strong>修改域名需要重启应用才能生效。\n                </p>\n            </div>\n        </div>\n        <div class="ui form">\n            <div class="inline fields">\n                <div class="field beijing" ng-show="is_hongkong">\n                    <label>自定义域名：</label>\n                    <div class="ui toggle checkbox">\n                        <input type="checkbox" id="custom_domain" ng-model="custom_domain">\n                        <label for="custom_domain"></label>\n                    </div>\n                    <small>* 自定义域名的 CNAME 记录必须指向 api.codingapp.com 才能生效。</small>\n                </div>\n                <div class="field beijing">\n                    <label>访问域名：</label>\n                    <input type="text" placeholder="monkey" ng-model="host" ng-show="!custom_domain">\n                    <input type="text" placeholder="自定义域名" ng-model="domain" ng-show="custom_domain">\n                    <label class="right" ng-if="!custom_domain">.coding.io</label>\n                </div>\n            </div>\n        </div>\n        <div class="ui message normal" ng-if="!is_hongkong">\n            <p>* 如果你想使用自定义域名，请将服务器切换到香港。</p>\n        </div>\n    </div>\n    <div class="actions">\n        <a class="ui cancel borderless button" ng-click="close()">取消</a>\n        <a class="ui ok button green"\n           ng-class="{disabled: !validateRoute(host, domain, custom_domain)}"\n           ng-click="validateRoute(host, domain, custom_domain)   && updateRoute()">确认修改</a>\n    </div>\n</div>\n'),a.put("paas/show/memory.html",'<div class="paas-memory-modal ui modal" id="pass-memory-modal">\n    <i class="close icon"></i>\n    <h3 class="header">修改内存</h3>\n    <div class="content">\n        <div class="warning ui small message">\n            <div class="content">\n                <p>\n                    <strong>注意：</strong>修改内存需要重启应用才能生效。过少的内存可能会导致应用无法正常启动！\n                </p>\n            </div>\n        </div>\n        <div class="ui grid">\n            <div class="three wide column" ng-repeat="option in mem_values">\n                <div class="field">\n                    <div class="ui small radio checkbox" ng-click="changeMemory(option.memory)">\n                        <input type="radio" name="demo-server" id="server_{{option.memory}}"\n                               ng-model="memory" ng-value="option.memory"/>\n                        <label for="server_{{option.memory}}" class="title">{{option.label}}</label>\n                    </div>\n                    <small>{{option.value}} 码币/天</small>\n                </div>\n            </div>\n        </div>\n        <div class="ui message normal">\n            <p>* 确认修改后，自下个扣费期进行相应扣费。</p>\n        </div>\n    </div>\n    <div class="actions">\n        <a class="ui cancel borderless button" ng-click="close()">取消</a>\n        <a class="ui ok button green" ng-click="updateMemory(memory);">确认修改</a>\n    </div>\n</div>\n'),
a.put("paas/show/show.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-include="\'app/git/public_view/inner_menu.html\'" ng-if="PROJECT.is_public"></div>\n    <div class="ui dimmable dimmed" ng-if="paas_enabled">\n        <div class="ui visible active dimmer no-right" ng-if="!!cf_app && !cf_app.can_admin">\n            <div class="ui small info icon message">\n                <i class="info icon"></i>\n                <div class="content">\n                    <div class="header">{{\'permission_denied\' | i18n:\'paas_controller\'}}</div>\n                    <p>\n                        {{\'permission_denied_tip1\' | i18n:\'paas_controller\'}}\n                        <a href="/help/doc/paas/introduction.html" target="_blank" class="demo-link">{{\'permission_denied_tip2\' | i18n:\'paas_controller\'}}</a>\n                        <span ng-if="healthy">&nbsp;{{\'permission_denied_tip3\' | i18n:\'paas_controller\'}}&nbsp;</span>\n                        <a ng-if="healthy" ng-href="{{url}}" target="_blank" class="demo-link">{{\'permission_denied_tip4\' | i18n:\'paas_controller\'}}</a>\n                    </p>\n                </div>\n            </div>\n        </div>\n        <div ng-include="\'paas/paas-inner-menu.html\'" class="ui secondary vertical menu active" id="inner-menu"\n             ng-class="{fixed: !PROJECT.is_public}" style="margin-top: 0;"\n             ng-style="PROJECT.is_public ? {float: \'left\', \'border-right\': \'none\'} : {}"\n             ng-if="!!cf_app && paas_enabled"></div>\n        <div class="paas container" ng-if="!!cf_app && paas_enabled"\n             ng-style="PROJECT.is_public ? {\'border-left\': \'1px solid #CCC\', \'min-height\': \'420px\', \'padding\': \'30px 30px 0 30px\'} : {}">\n            <h2 class="ui dividing header">\n                <div class="ui teal label server" ng-if="cf_app.endpoint_name"><b>{{\'server\' | i18n:\'paas_controller\'}}</b>{{cf_app.endpoint_name}}</div>\n                {{\'controller\' | i18n:\'paas_controller\'}}\n            </h2>\n            <div class="ui warning message">\n                为了更好地为用户提供服务，Coding 正在进行深度的改版和功能整合工作。目前的演示平台功能将于 2016 年 12 月 31 日关闭。将于 2016 年 10 月 31 日停止未开启的项目开启演示平台。已经开启演示平台的项目，将允许运行到 2016 年 11 月 30 日，此后将无法启动与部署。已经存在的演示平台服务，将保留到 2016 年 12 月 31日，以供用户备份。建议用户使用 <a href="https://ide.coding.net" target="_blank">WebIDE</a> 来替代演示平台的功能。如有任何疑问请在 <a href="https://coding.net/u/coding/p/Coding-Feedback/topic" target="_blank">Feedback</a> 提出，感谢您对 Coding 的支持。\n            </div>\n            <div class="ui dimmable dimmed paas-content">\n                <div class="ui inverted active dimmer" ng-if="loading">\n                    <div class="ui loader"></div>\n                </div>\n                <div class="ui  segment paas-box current-status">\n                    <div class="box-header">\n                        <div class="ui label runtime floated right" ng-show="health && health.runtime && health.runtime != \'\'">\n                        <b>{{\'runtime\' | i18n:\'paas_controller\'}}</b><a href="http://docs.coding.io" target="_blank">{{health.runtime}}</a>\n                        </div>\n                        <h3 class="ui header">{{\'status\' | i18n:\'paas_controller\'}}</h3>\n                    </div>\n                    <div class="box-body">\n                        <div class="info">\n                            <div class="coding floated right domain">\n                                <span><label>{{\'domain\' | i18n:\'paas_controller\'}}</label>{{cf_app.full_domain || \'\'}}</span>\n                                <a href="" ng-click="changeDomain()">{{\'modify_domain\' | i18n:\'paas_controller\'}}</a>\n                            </div>\n                            <span class="run">\n                                <i class="circle icon" ng-style="{color: health.color || \'yellow\'}"></i>\n                                <b>{{health.human || \'更新状态..\'}}</b>\n                                <small ng-if="health.code == RUNNING && cf_app.endpoint < 2 && stats">{{stats.stats.uptime | distance:\'seconds\':3}}\n                                </small>\n                            </span>\n                            <a ng-href="{{url}}" ng-if="health.code == RUNNING" target="_blank"\n                                class="ui small button coding green">{{\'go_to\' | i18n:\'paas_controller\'}}</a>\n                        </div>\n                        <div class="stat clearfix" ng-show="!!cf_app && cf_app.endpoint < 2">\n                            <div class="stat-item">\n                                <div class="chart">\n                                    <div class="coding pie paas" paas-pie=""\n                                         data-percent="{{percent(stats.stats.usage.mem/stats.stats.mem_quota)}}">\n                                        <div class="left">\n                                            <span></span>\n                                        </div>\n                                        <div class="right">\n                                            <span></span>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="val">\n                                    <div class="value">{{stats.stats.usage.mem | bytes:1}}/{{cf_app.memory * 1024 * 1024 |\n                                        bytes:1}}\n                                    </div>\n                                    <div class="label">{{\'memory\' | i18n:\'paas_controller\'}}\n                                        <small class="coding floated right" ng-click="changeMemory()">{{\'modify_memory\' | i18n:\'paas_controller\'}}</small>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="stat-item">\n                                <div class="chart">\n                                    <div class="coding pie paas" paas-pie=""\n                                         data-percent="{{percent(stats.stats.usage.disk/stats.stats.disk_quota)}}">\n                                        <div class="left">\n                                            <span></span>\n                                        </div>\n                                        <div class="right">\n                                            <span></span>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="val">\n                                    <div class="value">{{stats.stats.usage.disk | bytes:1}}/{{cf_app.disk * 1024 * 1024 |\n                                        bytes:1}}\n                                    </div>\n                                    <div class="label">{{\'disk\' | i18n:\'paas_controller\'}}</div>\n                                </div>\n                            </div>\n                            <div class="stat-item">\n                                <div class="chart">\n                                    <div class="coding pie paas" paas-pie=""\n                                         data-percent="{{percent(stats.stats.usage.cpu)}}">\n                                        <div class="left">\n                                            <span></span>\n                                        </div>\n                                        <div class="right">\n                                            <span></span>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="val">\n                                    <div class="value">{{stats.stats.usage.cpu | percent:2}}</div>\n                                    <div class="label">{{\'cpu\' | i18n:\'paas_controller\'}}</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="box-footer">\n                        <div class="actions-buttons">\n                            <div class="small blue circular ui button"\n                                 ng-class="{\'disabled\': (stopped === undefined) || !stopped}"\n                                 ng-click="stopped && start()">\n                                <i class="play sign icon"></i>{{\'start\' | i18n:\'paas_controller\'}}\n                            </div>\n                            <div class="small primary circular ui button"\n                                 ng-class="{\'disabled\': (stopped === undefined) || !!stopped}"\n                                 ng-click="!stopped && stop()">\n                                <i class="off icon"></i>{{\'stop\' | i18n:\'paas_controller\'}}\n                            </div>\n                            <div class="small blue circular ui button"\n                                 ng-class="{\'disabled\': (stopped === undefined) || !!stopped}"\n                                 ng-click="!stopped && restart()">\n                                <i class="refresh icon"></i>{{\'restart\' | i18n:\'paas_controller\'}}\n                            </div>\n                            <div class="small red ui button" ng-click="requirePassword()"\n                                 ng-show="(PROJECT | isRole:ADMIN)">\n                                <i class="trash icon"></i>{{\'remove\' | i18n:\'paas_controller\'}}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="ui  segment paas-box deploy-box">\n                    <div class="box-header">\n                        <h3 class="ui header">{{\'compile_and_deploy\' | i18n:\'paas_controller\'}}</h3>\n                    </div>\n                    <div class="box-body">\n                        <form class="ui form deploy" ng-submit="deploy(ref, path, command, buildpack, auto)">\n                            <div class="inline field">\n                                <label>{{\'deployment_version\' | i18n:\'paas_controller\'}}</label>\n                                <input ng-model="ref" type="text" placeholder="{{\'deployment_version_placeholder\' | i18n:\'paas_controller\'}}">\n                                <a class="expert" ng-click="show_expert_option = !show_expert_option">\n                                    <i class="icon double angle"\n                                       ng-class="{down: !show_expert_option, up: show_expert_option}"></i>\n                                    {{expertOptionText(show_expert_option)}}\n                                </a>\n                            </div>\n                            <div class="ui segment expert" ng-show="show_expert_option">\n                                <p style="color: #A00; font-size: 10px;">\n                                    <strong>{{\'expert_options_tip1\' | i18n:\'paas_controller\'}}</strong>{{\'expert_options_tip2\' | i18n:\'paas_controller\'}}\n                                </p>\n                                <div class="inline field">\n                                    <label>{{\'source_code_directory\' | i18n:\'paas_controller\'}}</label>\n                                    <input ng-model="path" type="text" placeholder="{{\'source_code_directory_placeholder\' | i18n:\'paas_controller\'}}">\n                                </div>\n                                <div class="inline field">\n                                    <label>{{\'command\' | i18n:\'paas_controller\'}}</label>\n                                    <input ng-model="command" type="text" placeholder="{{\'command_placeholder\' | i18n:\'paas_controller\'}}">\n                                </div>\n                                <div class="inline field">\n                                    <label><a href="http://docs.coding.io/references/buildpack" target="_blank">buildpack</a></label>\n                                    <input ng-model="buildpack" type="text"\n                                           placeholder="{{\'buildpack_placeholder\' | i18n:\'paas_controller\'}}"\n                                           ng-disabled="runtime != \'auto\'">\n                                </div>\n                                <div class="inline field" ng-show="cf_app.endpoint < 2">\n                                    <label>{{\'choice_runtime\' | i18n:\'paas_controller\'}}</label>\n                                    <div class="ui radio checkbox">\n                                        <input type="radio" name="runtime" id="runtime_auto" ng-model="runtime"\n                                               value="auto" ng-change="buildpack=\'\'">\n                                        <label for="runtime_auto">{{\'auto_detection\' | i18n:\'paas_controller\'}}</label>\n                                    </div>\n                                    <div class="ui radio checkbox" ng-repeat="(runtime, buildpack) in runtimes">\n                                        <input type="radio" name="runtime" id="runtime_{{runtime}}"\n                                               ng-model="$parent.runtime" ng-value="buildpack"\n                                               ng-change="$parent.buildpack=buildpack">\n                                        <label for="runtime_{{runtime}}" class="title">{{runtime}}</label>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="inline field">\n                                <div class="ui checkbox">\n                                    <input id="autodeploy" type="checkbox" name="auto" ng-model="auto">\n                                    <label for="autodeploy"\n                                           style="margin-top: 2px;margin-right: 8px;font-size: 14px;cursor: pointer;">\n                                        {{\'auto_deploy\' | i18n:\'paas_controller\'}}\n                                    </label>\n                                </div>\n                                <div class="ui pointing left label route">{{\'auto_deploy_tip\' | i18n:\'paas_controller\'}}</div>\n                            </div>\n                            <div class="inline field">\n                                <div style="display: inline-block;">\n                                    <input type="submit" value="{{\'deploy\' | i18n:\'paas_controller\'}}" class="ui small dark gray button deploy">\n                                </div>\n                            </div>\n                            <div class="inline field" ng-if="!!cf_app.deployer">\n                                <span class="deployer">\n                                    {{\'last_deployed\' | i18n:\'paas_controller\'}}<a ng-href="{{cf_app.deployer.url}}">\n                                    <img class="ui avatar image" ng-src="{{cf_app.deployer.avatar | thumbnail: 28}}">\n                                    {{cf_app.deployer.name}}</a> 于 <time cg-friendly-time="cf_app.deployed_at"></time>\n                                    （<a ng-href="{{cf_app.project.url}}/git/tree/{{cf_app.git_ref}}" target="_blank">@{{formatRef(cf_app.git_ref)}}</a>）\n                                </span>\n                            </div>\n\n                        </form>\n                    </div>\n                    <div class="box-footer">\n\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="paas container" ng-if="unknown_state">\n        <div class="ui info message">{{\'paas_not_avaliable_tip\' | i18n:\'paas_controller\'}}</div>\n    </div>\n    <div ng-include="\'paas/empty/empty.html\'" ng-if="!unknown_state && !paas_enabled"></div>\n</div>\n'),a.put("paas/vars/vars.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n  <div ng-include="\'app/git/public_view/inner_menu.html\'" ng-if="PROJECT.is_public"></div>\n  <div ng-include="\'paas/paas-inner-menu.html\'" class="ui secondary vertical menu active" id="inner-menu" ng-class="{fixed: !PROJECT.is_public}" ng-style="PROJECT.is_public ? {float: \'left\', \'border-right\': \'none\'} : {}"></div>\n  <div class="paas container" ng-style="PROJECT.is_public ? {\'border-left\': \'1px solid #CCC\', \'min-height\': \'420px\', \'padding\': \'30px 30px 0 30px\'} : {}">\n      <h2 class="ui dividing header">环境变量</h2>\n        <div class="ui warning message">\n            为了更好地为用户提供服务，Coding 正在进行深度的改版和功能整合工作。目前的演示平台功能将于 2016 年 12 月 31 日关闭。将于 2016 年 10 月 31 日停止未开启的项目开启演示平台。已经开启演示平台的项目，将允许运行到 2016 年 11 月 30 日，此后将无法启动与部署。已经存在的演示平台服务，将保留到 2016 年 12 月 31日，以供用户备份。建议用户使用 <a href="https://ide.coding.net" target="_blank">WebIDE</a> 来替代演示平台的功能。如有任何疑问请在 <a href="https://coding.net/u/coding/p/Coding-Feedback/topic" target="_blank">Feedback</a> 提出，感谢您对 Coding 的支持。\n        </div>\n      <p style="margin: 10px; font-size: 12px; color: #666;">\n        <strong>注意：</strong>环境变量的改动，需要&nbsp;<span style="color: #A00;">重启应用</span>&nbsp;才能生效。\n      </p>\n      <div class="ui dimmable dimmed">\n        <div class="ui inverted active dimmer" ng-if="loading">\n          <div class="ui loader"></div>\n        </div>\n        <table class="ui table segment vars">\n          <thead>\n              <tr>\n                <th class="seven wide">名称</th>\n                <th class="seven wide">值</th>\n                <th class="two wide">操作</th>\n              </tr>\n          </thead>\n          <tbody>\n            <tr ng-if="!envs">\n              <td colspan="3" style="padding: 10px 0;text-align: center;color: #555;font-size: 16px;">\n                <i class="loading icon"></i>正在加载\n              </td>\n            </tr>\n            <tr ng-repeat="(key, value) in envs" ng-if="!!envs">\n              <td>{{key}}</td>\n              <td style="word-break: break-word;">{{value}}</td>\n              <td>\n                <div class="ui mini primary button" ng-click="delEnv(key)">删除</div>\n              </td>\n            </tr>\n          </tbody>\n          <tfoot>\n            <tr>\n              <td>\n                <div class="ui small input">\n                  <input type="text" placeholder=" 变量名" ng-model="env.key">\n                </div>\n              </td>\n              <td>\n                <div class="ui small input">\n                  <input type="text" placeholder="变量值" ng-model="env.value" cg-enter="!!env.key && setEnv(env)">\n                </div>\n              </td>\n              <td><input type="submit" value="添加" class="ui small dark gray button" ng-class="{\'disabled\': !env.key}" ng-click="!!env.key && setEnv(env)"></td>\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n  </div>\n</div>\n'),a.put("square/square.html",'<cg-new-year></cg-new-year>\n<div id="projects_index">\n    <div cg-multi-ad="[\'public_project_banner_1\',\'public_project_banner_2\',\'public_project_banner_3\']" speed="3000"\n         width="100%" style="display: inline-block; margin-bottom: 10px;background: #F7F6F2;">\n    </div>\n    <div class="list">\n        <ul>\n            <div class="ui active loader" ng-if="loading"></div>\n            <li class="project" ng-repeat="project in projects">\n                <div class="thumb">\n                    <a ng-href="{{project.project_path}}"><img\n                        ng-src="{{project.icon || \'/static/d2ab4f6de747ad169160d3caaf82132e.png\'}}"/></a>\n                </div>\n                <div class="info">\n                    <div class="name"><a ng-href="{{project.project_path}}">{{project.name}}</a></div>\n                    <div class="description">\n                        <span cg-bind-html="project.description || \'无项目描述\'"></span>\n                    </div>\n                    <div class="when">\n                           <span class="avatar">\n                              <img\n                                  ng-src="{{project.owner_user_picture}}"/></span>\n\n                        <span class="username" cg-bind-html="project.owner_user_home"></span>\n                        <span\n                            class="time">最后更新于\n                            <span cg-friendly-time="project.last_updated"></span>\n                        </span>\n                    </div>\n                    <div class="stat">\n                        <span><i class="icon fork code"></i>{{project.fork_count}}</span>\n                        <span><i class="icon unhide"></i>{{project.watch_count}}</span>\n                    </div>\n                </div>\n            </li>\n        </ul>\n        <div class="empty list center more" ng-click="loadMore()" ng-if="!over && projects.length > 0">\n            <i class="icon double angle down" ng-class="{\'loading\':loading,\'double angle down\':!loading}"></i>查看更多公开项目\n        </div>\n    </div>\n</div>\n<div ng-include="\'app/layout/global_footer/global_footer.html\'"></div>\n'),a.put("migration/migration.html",'<div id="gitcafe-migration">\n    <div class="migration-platform clearfix">\n        <div class="platform gitcafe">\n            <div class="logo">\n                <img src="https://dn-coding-net-production-static.qbox.me/static/6aaa1c11441ef6f1a0fd74e3c46c8036.png" alt="GitCafe">\n            </div>\n            <div class="account clearfix">\n                <img\n                    ng-src="{{ gitcafe_user.avatar_url }}"\n                    alt="login account">\n                <div class="info">\n                    <div class="name ellipsis" ng-bind="gitcafe_user.username">\n                    </div>\n                    <div class="points">\n                        账户余额：<span ng-bind="gitcafe_user.gitcoin"></span> 极特币\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="platform coding">\n            <div class="logo">\n                <img src="https://dn-coding-net-production-static.qbox.me/static/01ece32323adbf2e01e1541f8a1ec6c5.png" alt="Coding">\n            </div>\n            <div class="account clearfix">\n                <img ng-src="{{::USER.avatar}}"\n                    alt="login account">\n                <div class="info">\n                    <div class="name ellipsis">{{::USER.name}}</div>\n                    <div class="points">\n                        码币余额：<span ng-bind="point_left || 0"></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div ng-switch="migration_status">\n        <!-- 首次迁移 -->\n        <div ng-switch-when="initial">\n            <h2 ng-if="all_projects.length > 0">将 GitCafe 项目迁移至 Coding.net</h2>\n            <h2 class="no-projects" ng-if="all_projects.length === 0">您没有可迁移的项目！</h2>\n            <form class="migration-form" ng-submit="onMigrate()">\n                <div class="migration-titles clearfix" ng-if="all_projects.length > 0">\n                    <div class="title">可迁移的项目</div>\n                    <div class="title">已选择的项目</div>\n                </div>\n                <div class="migration-projects clearfix" ng-if="all_projects.length > 0">\n                    <div class="migration list">\n                        <div class="project clearfix"\n                             ng-repeat="project in all_projects"\n                             ng-click="selectProject(project)"\n                             ng-class="{\'selected\': project.selected}">\n                            <img\n                                ng-src="{{::project.logo}}"\n                                alt="migration project">\n                            <div class="info">\n                                <div class="name ellipsis">{{::project.name}}</div>\n                                <div class="description ellipsis">{{::(project.description || \'&lt;该项目无描述&gt;\')}}</div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="arrow-right"></div>\n                    <div class="chosen list">\n                        <div class="project clearfix" ng-repeat="project in selected_projects">\n                            <img ng-src="{{::project.logo}}"\n                                alt="migration project">\n                            <div class="info">\n                                <div class="name ellipsis">{{::project.name}}</div>\n                                <div class="description ellipsis">{{::project.description || \'&lt;该项目无描述&gt;\'}}</div>\n                            </div>\n                            <input type="hidden" name="project" value="{{::project.id}}">\n                        </div>\n                    </div>\n                </div>\n                <div class="controls" ng-if="all_projects.length > 0">\n                    <div class="ui checkbox">\n                        <input id="migration-agreement" type="checkbox" name="agreement" ng-model="form.agreement_checked">\n                        <label for="migration-agreement">我已仔细阅读 <a href="#">迁移说明</a> 并了解相关迁移风险</label>\n                    </div>\n                    <div>\n                        <button type="submit">马上迁移</button>\n                    </div>\n                </div>\n                <div class="controls" ng-if="all_projects.length === 0">\n                    <a class="button" href="https://gitcafe.com/projects/new" target="_self">创建项目</a>\n                </div>\n            </form>\n        </div>\n\n        <!-- 迁移中 -->\n        <div ng-switch-when="migrating">\n            <div class="migrating-projects clearfix">\n                <div ng-if="migrating_projects.length > 0">\n                    <img src="https://dn-coding-net-production-static.qbox.me/static/16c2a890e7aec46e6852bf9d33301296.png" alt="migrating" height="63">\n                    <h3>\n                        这些项目正在加速迁移中…\n                    </h3>\n                    <div class="migrating-list clearfix">\n                        <div class="project" ng-repeat="project in migrating_projects" ng-init="error = MIGRATED_STATUS.ERROR === project.status">\n                            <img ng-src="{{::project.gitcafe_project_logo}}"\n                                alt="migration project">\n                            <div class="info" ng-class="{error: error}">\n                                <div class="name ellipsis">\n                                    <span>{{::((error ? \'[ERROR] \' : \'\') + project.gitcafe_project_name)}}</span>\n                                    <span ng-if="error">\n                                        &nbsp;<a href="javascript:void(0);" ng-click="reset(project.gitcafe_project_id, project.gitcafe_project_name)">重置</a>\n                                    </span>\n                                </div>\n                                <div class="description ellipsis">{{::project.gitcafe_project_description || \'&lt;该项目无描述&gt;\'}}</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="migration-titles clearfix">\n                    <div class="title">\n                        <img src="https://dn-coding-net-production-static.qbox.me/static/73558c4410b5806d490b0377c2ba3555.png" alt="undone">\n                        <div>\n                            还未迁移的项目\n                        </div>\n                    </div>\n                    <div class="title">\n                        <img src="https://dn-coding-net-production-static.qbox.me/static/7a03b8fe78923669950f5f8ba565d5cb.png" alt="done">\n                        <div>\n                            已经成功迁移的项目\n                        </div>\n                    </div>\n                </div>\n                <div class="migration-projects clearfix">\n                    <div class="list">\n                        <div ng-if="migration_projects.length > 0">\n                            <div class="project clearfix" ng-repeat="project in migration_projects">\n                                <img\n                                    ng-src="{{::project.logo}}"\n                                    alt="migration project">\n                                <div class="info">\n                                    <div class="name ellipsis">{{::project.name}}</div>\n                                    <div class="description ellipsis">{{::project.description || \'&lt;该项目无描述&gt;\'}}</div>\n                                </div>\n                                <input type="hidden" name="project" value="{{::project.id}}">\n                            </div>\n                            <h3 class="tips">\n                                * GitCafe 将于 2016年5月31日 停止服务，请在此之前完成迁移\n                            </h3>\n                            <button class="green-button" ng-click="doMigrate()">马上迁移</button>\n                        </div>\n                        <div ng-if="migration_projects.length === 0">\n                            <div class="empty" ng-if="migrating_projects.length === 0">\n                                好棒哦，您的项目已经全部成功迁移至 Coding！\n                            </div>\n                            <div class="empty" ng-if="migrating_projects.length > 0">\n                                好棒哦，您已经没有需要迁移的项目！\n                            </div>\n                        </div>\n                    </div>\n                    <div class="list">\n                        <div ng-if="migrated_projects.length > 0">\n                            <div class="project clearfix" ng-repeat="project in migrated_projects">\n                                <img ng-src="{{::project.gitcafe_project_logo}}"\n                                     alt="migration project">\n                                <div class="info">\n                                    <div class="name ellipsis">\n                                        <span>{{::project.gitcafe_project_name}}</span>\n                                        <span>\n                                            &nbsp;<a href="javascript:void(0);" ng-click="reset(project.gitcafe_project_id, project.gitcafe_project_name)">重置</a>\n                                        </span>\n                                    </div>\n                                    <div class="description ellipsis">{{::project.gitcafe_project_description || \'&lt;该项目无描述&gt;\'}}</div>\n                                </div>\n                            </div>\n                            <a href="/user/projects" target="_blank">马上查看 »</a>\n                        </div>\n                        <div class="empty" ng-if="migrated_projects.length === 0">\n                            您还没成功迁移至 Coding 的项目呢！\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("user/message/user-message.html",'<div class="ui secondary vertical fixed menu active" id="inner-menu">\n    <header class="header item">\n        私信\n        <article>\n            和其它用户间的私密聊天\n        </article>\n    </header>\n    <a class="item" href="/user/messages/basic" ng-class="{active:inner_menu == \'basic\'}"><i class="mail icon"></i>所有</a>\n    <a class="item" href="/user/messages/unread" ng-class="{active:inner_menu == \'unread\'}"><i\n            class="mail outline icon"></i>未读 ({{$root.unread.messages}})</a>\n</div>\n\n<script type="text/ng-template" id="/user/tpl-message-list.html">\n    <div class="ui small feed messages">\n        <h3 class="ui dividing header">\n            <div class="right floated small ui button" ng-click="showSendMsgDialog()">发送私信</div>\n            <div class="right floated red small ui button" ng-click="clearAllMessages()">清空所有</div>\n            {{header}}\n        </h3>\n        <p class="empty center list" ng-if="loading"><i class="loading icon"></i>正在加载</p>\n\n        <div class="event" ng-class="{\'read\': conversation.status == 1}" ng-repeat="conversation in conversations"\n             ng-click="loadConversation(conversation, $event)">\n            <i class="red minus sign alternate icon remove" title="删除"\n               ng-click="delConversation(conversation, $index)"></i>\n\n            <div class="label">\n                <!--<img class="ui avatar image" ng-src="{{conversation.friend.avatar}}">-->\n                <a ng-href="/u/{{conversation.friend.global_key}}" target="_blank">\n                    <img class="ui avatar image" ng-src="{{::conversation.friend.avatar}}"/>\n                </a>\n            </div>\n            <div class="content">\n                <div class="date">\n                    <i class="comment icon" style="float:left"></i>\n                    <span>{{::conversation.count}}</span>\n                    <i class="time icon"></i>\n                    <time cg-friendly-time="conversation.created_at"></time>\n                </div>\n                <div class="header">\n                    <!--<a ng-href="{{\'/u/\' + conversation.friend.global_key}}" target="_blank">{{conversation.friend.name}}</a>-->\n                    <span>{{::conversation.friend.name}}</span>\n                </div>\n                <div class="summary">\n                    <i class="reply mail icon" ng-if="USER.id == conversation.sender.id"></i>\n                    <span cg-bind-html="conversation.content"></span>\n                </div>\n            </div>\n        </div>\n        <div cg-pager="{{pager_id}}"></div>\n        <p class="nothing" style="padding: 10px 0;text-align: center;color: #555;font-size: 16px;"\n           ng-if="conversations.length == 0">{{empty_msg}}</p>\n    </div>\n</script>\n\n<script type="text/ng-template" id="/user/tpl-message-history.html">\n    <div class="ui diveded list messages">\n        <h3 class="ui dividing header">\n            {{header || \'加载中..\'}}\n            <a href="javascript:void(0)" ng-click="refreshMessages(1)" style="float:right">\n                <i class="refresh icon"></i>\n            </a>\n        </h3>\n        <div cg-feed-editor="{{ feed_editor.content }}" feed-editor-mode="message_editor" feed-context="#messages-pane">\n            <textarea cg-feed-editor-textarea\n                      ng-model="feed_editor.content"\n                      placeholder="回复 Ta 点什么吧~"\n                      msd-elastic="\\n"\n                      cg-at-emoji\n                      cg-at-context\n                      at-item="-1"\n                      at-all="false"\n                      at-context-type="\'message\'"\n                      cg-textarea-editable></textarea>\n        </div>\n\n        <div class="unread-tips" ng-if="unread_messages_count >0" ng-click="showUnreadMessages()">\n            您有 {{ unread_messages_count }} 条未读信息，点击查看\n        </div>\n        <p class="empty center list" ng-if="loading"><i class="loading icon"></i>正在加载</p>\n        <div class="item" ng-if="!loading"\n             ng-class="{\'left\': conversation.sender.id != USER.id, \'right\': conversation.sender.id == USER.id}"\n             ng-repeat-start="conversation in conversations">\n            <a class="sender" ng-href="{{\'/u/\' + conversation.sender.global_key}}">\n                <img class="ui avatar image" ng-src="{{conversation.sender.avatar}}">\n            </a>\n            <div class="content arrow" ng-init="msg = multipleLines(conversation.content)">\n                <i class="red minus sign alternate icon remove" title="删除" ng-click="delMessage(conversation.id, $index)"></i>\n                <div class="detail content markdown" clip-copy-code="pre" ng-show="conversation.type == 0" cg-highlight="conversation.content" style="overflow:visible"></div>\n                <div class="detail content markdown" ng-show="conversation.type == 1" style="overflow:visible">\n                    <a title="这是一个语音消息，网页暂时不支持播放">语音消息，网页暂时不支持播放</a>\n                </div>\n            </div>\n        </div>\n        <div class="date" ng-if="!loading && shouldShowTime(conversations, conversation)" ng-repeat-end>\n            <time title="{{conversation.created_at | date: \'yyyy-MM-dd HH:mm:ss Z\'}}">\n                {{conversation.created_at | date: \'MM月dd日 HH:mm\'}}\n            </time>\n        </div>\n        <div cg-pager="{{cpager_id}}"></div>\n    </div>\n</script>\n<div class="container" ng-include src="currentTpl" id="messages-pane">\n</div>\n'),
a.put("user/notification/user-notification.html",'<style>\n    .ui.feed.notifications .content .summary {\n        white-space: pre-wrap;\n        max-width: 70%;\n        min-width: 400px;\n        padding-left: 6px;\n    }\n    .ui.feed .label {\n        vertical-align: middle;\n    }\n    .damn-notification-tip {\n        text-align: center;\n        margin-bottom: 10px;\n    }\n    .damn-notification-tip .damn-notification {\n        padding: 10px 20px;\n        border: 1px solid #d9caab;\n        border-radius: 4px;\n        color: #876a38;\n        font-size: 14px;\n        display: inline-block;\n        background: #fffbe6;\n    }\n    .damn-notification-tip .damn-notification .ui.small.green.button {\n        margin-left: 10px;\n    }\n    .damn-notification-tip .damn-notification .close.icon {\n        margin-left: 10px;\n        color: #000;\n    }\n</style>\n<div class="ui secondary vertical fixed menu active" id="inner-menu">\n    <header class="header item">\n        通知中心\n        <article>\n            这里显示了整站的提醒信息\n        </article>\n    </header>\n    <a class="item" href="/user/notifications/basic" ng-class="{active:inner_menu == \'basic\'}"><i class="inbox icon"></i>所有通知</a>\n    <a class="item" href="/user/notifications/unread" ng-class="{active:inner_menu == \'unread\'}"><i class="mail outline icon"></i>未读通知</a>\n    <a class="item" href="/user/notifications/atme" ng-class="{active:inner_menu == \'atme\'}"><i class="basic email icon"></i>提到我的</a>\n    <a class="item" href="/user/notifications/comments" ng-class="{active:inner_menu == \'comments\'}"><i class="comment icon"></i>评论</a>\n    <a class="item" href="/user/notifications/system" ng-class="{active:inner_menu == \'system\'}"><i class="bell icon"></i>系统通知</a>\n</div>\n<div class="container">\n  <div class="damn-notification-tip" ng-if="annoy">\n    <div class="damn-notification">\n        <span>通知太多觉得很烦？快去“个人设置”进行“提醒设置”吧!</span>\n        <a href="/user/account/setting/notification" class="ui small green button">马上去设置</a>\n        <a href="javascript:void(0)"><i class="close icon" ng-click="closeAnnoy()"></i></a>\n    </div>\n  </div>\n  <div class="ui small feed notifications">\n    <h3 class="ui dividing header">\n      <div class="right floated small ui button" ng-click="markPageRead()">标记本页为已读</div>\n      <div class="right floated red small ui button" ng-click="markAllRead()">标记所有为已读</div>\n      {{header}}\n      <span class="count" ng-if="unreadCount > 0">({{unreadCount}} 未读)</span>\n    </h3>\n    <p class="empty center list" ng-if="loading"><i class="loading icon"></i>正在加载</p>\n    <div class="event" ng-class="{\'read\': notification.status == 1}" ng-repeat="notification in notifications" ng-click="markRead(notification, $event)">\n      <div class="label">\n        <i class="circular {{eventIcon(notification)}} icon"></i>\n      </div>\n      <div class="content">\n        <div class="date">\n          <i class="time icon"></i><span cg-friendly-time="notification.created_at"></span>\n        </div>\n        <div class="summary" ng-bind-html="notification.content"></div>\n      </div>\n    </div>\n    <div cg-pager="{{pager_id}}"></div>\n    <p class="nothing" style="padding: 10px 0;text-align: center;color: #555;font-size: 16px;" ng-if="notifications.length == 0">无数据</p>\n  </div>\n</div>\n</div>\n'),a.put("user/projects/user-projects.html",'<style type="text/css">\n    #project-group-dropdown .menu {\n        width: 160px;\n        margin-top: 5px;\n    }\n\n    #project-group-dropdown .menu .item {\n        padding: 10px;\n        font-size: 14px;\n    }\n\n    #project-group-dropdown .fluid.button {\n        margin: 0;\n        padding: 0;\n    }\n\n    #project-group-dropdown .fluid.button .icon {\n        margin-right: 0;\n        padding-right: 0;\n    }\n</style>\n<div class="ui secondary vertical fixed menu active" id="inner-menu">\n    <header class="header item">\n        {{\'projects\' | i18n:\'user_projects\'}}\n        <a href="/user/projects/create">\n            <i class="right add icon"\n               data-position="top center"\n               data-variation="inverted"\n               data-html="{{\'add_project\' | i18n:\'user_projects\'}}"\n               cg-popup></i>\n        </a>\n        <article>\n            {{\'projects_classify_tip\' | i18n:\'user_projects\'}}\n        </article>\n    </header>\n    <a class="item" ng-click="switchTab(\'all\');" ng-class="{active:inner_menu == \'all\'}">\n        <i class="coding project icon"></i>\n        <span>{{\'all_projects\' | i18n:\'user_projects\'}} ({{count.all}})</span>\n    </a>\n    <a class="item" ng-click="switchTab(\'created\');" ng-class="{active:inner_menu == \'created\'}">\n        <i class="edit sign icon"></i>\n        <span>{{\'created_by_me\' | i18n:\'user_projects\'}} ({{count.created}})</span>\n    </a>\n    <a class="item" ng-click="switchTab(\'joined\');" ng-class="{active:inner_menu == \'joined\'}">\n        <i class="umbrella icon"></i>\n        <span>{{\'joined_projects\' | i18n:\'user_projects\'}} ({{count.joined}})</span>\n    </a>\n    <a class="item" ng-click="switchTab(\'archive\');" ng-class="{active:inner_menu == \'archive\'}">\n        <i class="archive icon"></i>\n        <span>{{\'archived_projects\' | i18n:\'user_projects\'}} ({{count.archive}})</span>\n    </a>\n\n    <div class="sep"></div>\n    <a class="item" ng-click="switchTab(\'watched\')" ng-class="{active:inner_menu == \'watched\'}">\n        <i class="unhide icon"></i>\n        <span>{{\'watched_projects\' | i18n:\'user_projects\'}} ({{count.watched}})</span>\n    </a>\n    <a class="item" ng-click="switchTab(\'stared\')" ng-class="{active:inner_menu == \'stared\'}">\n        <i class="star icon"></i>\n        <span>{{\'stared_projects\' | i18n:\'user_projects\'}} ({{count.stared}})</span>\n    </a>\n\n    <div class="sep"></div>\n    <a class="item" style="cursor: pointer!important;font-size: 12px;padding: 2px 25px;opacity: 1;cursor: default;"\n       href="/projects" target="_blank">\n        <i class="circular icon globe inverted"\n           style="background-color: #527D9D!important;color:#FFF;opacity: 1;position: relative;">\n        </i> {{\'projects_square\' | i18n:\'user_projects\'}}\n    </a>\n</div>\n\n<!-- project list -->\n<div class="container" ng-if="inner_menu !== \'create\'">\n\n    <div class="ui dividing header projects-header">\n        <span ng-if="inner_menu == \'all\' && search.key.length <= 0">\n            <span>{{\'all_projects\' | i18n:\'user_projects\'}}</span>（<em ng-bind="count.all"></em>）\n        </span>\n        <span ng-if="inner_menu == \'created\'  && search.key.length <= 0">\n            <span>{{\'created_by_me\' | i18n:\'user_projects\'}}</span>（<em ng-bind="count.created"></em>）\n        </span>\n        <span ng-if="inner_menu == \'joined\'  && search.key.length <= 0">\n            <span>{{\'joined_projects\' | i18n:\'user_projects\'}}</span>（<em ng-bind="count.joined"></em>）\n        </span>\n        <span ng-if="inner_menu == \'watched\'">\n            <span>{{\'watched_projects\' | i18n:\'user_projects\'}}</span>（<em ng-bind="count.watched"></em>）\n        </span>\n        <span ng-if="inner_menu == \'stared\'">\n            <span>{{\'stared_projects\' | i18n:\'user_projects\'}}</span>（<em ng-bind="count.stared"></em>）\n        </span>\n        <span ng-if="inner_menu == \'archive\' && search.key.length <= 0">\n            <span>{{\'archived_projects\' | i18n:\'user_projects\'}}</span>（<em ng-bind="count.archive"></em>）\n        </span>\n         <span ng-if="search.key.length > 0 && (inner_menu == \'all\' || inner_menu == \'created\' || inner_menu == \'joined\' || inner_menu == \'archive\')">\n            <span>{{\'search_result\' | i18n:\'user_projects\'}}</span>（<em ng-bind="search.count"></em>）\n        </span>\n        <span ng-show="editable" ng-bind="\'picked_projects\' | i18n:\'user_projects\':selectedProjectCount()"></span>\n\n        <!-- normal -->\n        <span ng-if="!editable" class="coding floated right projects-edit">\n            <div class="coding floated left projects-search"\n                 ng-show="inner_menu == \'all\' || inner_menu ==\'created\' || inner_menu == \'joined\' || inner_menu == \'archive\'">\n                <div class="ui icon small form input tiny font" ng-show="search.list.length > 0">\n                    <input type="text" placeholder="{{\'search_by_name\' | i18n:\'user_projects\'}}" ng-model="search.key" cg-enter="enterFirst()" tabindex="100"\n                           cg-tab="tabFirst()"\n                           ng-keyup="searchPress($event,search.key)">\n                    <i class="remove sign icon search-right-icon" ng-show="search.key.length > 0"\n                       ng-click="clearSearch()"></i>\n                    <i class="search icon search-right-icon" ng-show="search.key.length <= 0"></i>\n                </div>\n            </div>\n            <a class="ui button"\n               href="javascript:void(0);"\n               data-position="bottom center"\n               data-variation="inverted"\n               data-html="{{\'group_projects\' | i18n:\'user_projects\'}}"\n               cg-popup\n               style="margin-right: 5px; padding: 0 12px!important"\n               ng-show="inner_menu === \'all\' && view_type === \'icon\' && search.key.length <=0 "\n               ng-click="toggleEditable();">\n                <i class="circle blank icon" style="margin: 0;padding: 0;"></i>{{\'group\' | i18n:\'user_projects\'}}\n            </a>\n            <a class="gray" href="javascript:void(0);"\n               data-position="bottom center"\n               data-variation="inverted"\n               data-html="{{\'list_view\' | i18n:\'user_projects\'}}"\n               cg-popup\n               ng-show="view_type === \'icon\'"\n               ng-click="toggleViewType(\'list\');">\n                <i class="list layout icon"></i>\n            </a>\n            <a class="gray" href="javascript:void(0);"\n               data-position="bottom center"\n               data-variation="inverted"\n               data-html="{{\'icon_view\' | i18n:\'user_projects\'}}"\n               cg-popup\n               ng-show="view_type === \'list\'"\n               ng-click="toggleViewType(\'icon\');">\n                <i class="block layout icon"></i>\n            </a>\n        </span>\n\n        <!-- editing: project group -->\n        <span ng-if="editable" class="coding floated right">\n            <a class="ui gray dark button"\n               href="javascript:void(0);"\n               ng-show="groups.length === 0"\n               ng-click="createGroup(\'新分组\', 0);">\n                {{\'move_to_new_group\' | i18n:\'user_projects\'}}\n            </a>\n            <div id="project-group-dropdown" class="ui dropdown item" cg-dropdown>\n                <a class="ui dark gray button"\n                   href="javascript:void(0);"\n                   ng-show="groups.length > 0">\n                    {{\'move_to\' | i18n:\'user_projects\'}}\n                </a>\n\n                <div class="menu" ng-show="groups.length > 0">\n                    <div class="item active"\n                         ng-click="moveOutGroup();">\n                        <i class="sign out icon" style="margin-right:0;"></i>{{\'out_of_group\' | i18n:\'user_projects\'}}\n                    </div>\n                    <div class="item ellipsis"\n                         ng-repeat="group in groups"\n                         ng-click="moveToGroup(group.id);"\n                         title="{{::group.name}}"\n                        >{{::group.name}}\n                    </div>\n                    <div class="item" ng-show="groups.length === 0">{{\'not_created_group\' | i18n:\'user_projects\'}}</div>\n                    <div class="item active" style="padding: 6px!important;">\n                        <button class="ui fluid button"\n                                ng-click="createGroup(\'新分组\', groups.length);">\n                            <i class="add icon"></i> {{\'new_group\' | i18n:\'user_projects\'}}\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <a class="ui button" href="javascript:void(0);" ng-click="toggleEditable();">{{\'return\' | i18n:\'user_projects\'}}</a>\n        </span>\n    </div>\n    <div class="projects-tab">\n        <small ng-click="changeProjectType(0)" ng-class="{\'active\':currentType == 0}">{{\'all\' | i18n:\'user_projects\'}}</small>\n        <small ng-click="changeProjectType(2)" ng-class="{\'active\':currentType == 2}">{{\'private\' | i18n:\'user_projects\'}}</small>\n        <small ng-click="changeProjectType(1)" ng-class="{\'active\':currentType == 1}">{{\'public\' | i18n:\'user_projects\'}}</small>\n    </div>\n    <div ng-switch="view_type" class="projects-view">\n\n\n        <div ng-switch-when="icon" class="projects-icon-view">\n\n            <div ng-if="inner_menu === \'all\'">\n                <div class="group-project-wrapper loading"\n                     cg-items-group="groups"\n                     group-items="projects"\n                     on-project-select="onProjectSelect"\n                     editable="editable"\n                     loading="projects_loading"\n                     current-type="currentType"\n                >\n                    <a ng-if="showCreateButton(inner_menu)" class="gray" ng-href="/user/projects/create"\n                       ng-hide="search.key.length > 0">\n                        <div class="create-project">\n                            <i class="huge add icon"></i>\n                        </div>\n                        <div class="title">{{\'add_project\' | i18n:\'user_projects\'}}</div>\n                    </a>\n                </div>\n            </div>\n\n            <div ng-if="inner_menu !== \'all\' && inner_menu !== \'archive\'">\n                <div class="group-project-wrapper loading"\n                     cg-items-group="[]"\n                     group-items="projects"\n                     editable="false"\n                     loading="projects_loading"\n                     current-type="currentType">\n                    <a ng-if="showCreateButton(inner_menu)" class="gray" ng-href="/user/projects/create"\n                       ng-hide="search.key.length > 0">\n                        <div class="create-project">\n                            <i class="huge add icon"></i>\n                        </div>\n                        <div class="title">{{\'add_project\' | i18n:\'user_projects\'}}</div>\n                    </a>\n                </div>\n            </div>\n\n            <!--归档项目-->\n            <div ng-if="inner_menu === \'archive\'">\n                <div class="group-project-wrapper loading"\n                     cg-items-group="[]"\n                     group-items="projects"\n                     editable="false"\n                     pin-disabled="true"\n                     cg-project-archiver-enable="true"\n                     loading="projects_loading"\n                     current-type="currentType">\n                    <a ng-if="showCreateButton(inner_menu)" class="gray" ng-href="/user/projects/create"\n                       ng-hide="search.key.length > 0">\n                        <div class="create-project">\n                            <i class="huge add icon"></i>\n                        </div>\n                        <div class="title">{{\'add_project\' | i18n:\'user_projects\'}}</div>\n                    </a>\n                </div>\n            </div>\n        </div>\n\n        <div class="ui relaxed horizontal selection list projects-list-view" ng-switch-when="list" id="project-list"\n             style="display: block;">\n\n            <ul style="padding: 0;">\n                <li class="list view projects-item" ng-repeat="project in projects | projectType:currentType track by $index"\n                    tabindex="{{$index+100}}" ng-focus="listItemFocus()" cg-enter="enterItem($event)">\n                    <div class="icon">\n                        <a ng-href="{{project.project_path}}">\n                            <img ng-if="project.icon" ng-src="{{project.icon}}" width="56px" height="56px">\n                            <img ng-if="!project.icon" ng-src="https://dn-coding-net-production-static.qbox.me/static/d2ab4f6de747ad169160d3caaf82132e.png" width="56px" height="56px">\n                        </a>\n                        <i class="message-tip tiny"\n                           ng-if="project.un_read_activities_count"\n                           ng-bind="project.un_read_activities_count">\n                        </i>\n                        <!--解除项目归档-->\n                        <div class="projects-item-archiver list" ng-if="inner_menu === \'archive\'"\n                             ng-click="unarchive(project.id)" title="{{\'unarchive\' | i18n:\'user_projects\'}}">\n                            <i class="ui icon unlock"></i>\n                        </div>\n                    </div>\n                    <div class="info">\n                        <p class="name">\n                            <a class="gray" ng-href="{{inner_menu === \'archive\' ? \'\' : project.project_path}}">\n                                <i ng-if="!project.is_public" class="lock icon"></i>\n                                <span ng-bind="project.owner_user_name + \'/\' + project.name"></span>\n                                <span style="color: #2D59A2;" ng-if="project.deploy_memory"\n                                      ng-bind="\'( \' + project.deploy_memory + \'M )\'"></span>\n                            </a>\n                        </p>\n\n                        <p class="description ellipsis" ng-bind="project.description"></p>\n                    </div>\n                </li>\n            </ul>\n            <div class="center empty list" ng-if="projects.length == 0 && search.key.length <= 0">\n                <p ng-if="projects_loading"><i class="loading icon"></i>{{\'loading\' | i18n:\'user_projects\'}}</p>\n\n                <p ng-if="!projects_loading">{{\'no_projects_current\' | i18n:\'user_projects\'}},<a href="/user/projects/create">{{\'create_one\' | i18n:\'user_projects\'}}</a></p>\n            </div>\n            <div class="create list view" style="line-height: 56px;text-align: center;" ng-hide="search.key.length > 0">\n                <a ng-href="/user/projects/create" class="gray"\n                   style="font-size: 48px;line-height: 65px;display: block;"><i class="add icon"></i></a>\n            </div>\n        </div>\n\n    </div>\n    <div ng-if="projects.length <= 0 && search.key.length > 0">\n        <p class="projects-empty">{{\'no_projects\' | i18n:\'user_projects\'}}</p>\n    </div>\n\n    <div class="ui coding aligned center"\n         style="font-size: 14px;padding: 30px;"\n         ng-if="!showCreateButton(inner_menu) && projects.length == 0 && !projects_loading">\n        <p ng-switch="inner_menu">{{\'no_projects\' | i18n:\'user_projects\'}}, <a ng-href="/projects">{{\'go_to_square\' | i18n:\'user_projects\'}}</a>？</p>\n    </div>\n\n    <div cg-pager="{{pager_id}}" class="center" style="margin-top: 40px;"></div>\n</div>\n\n<!-- create project -->\n<div class="container"\n     ng-if="inner_menu === \'create\'"\n     ng-controller="ProjectCreateController"\n     ng-include="\'app/user/project_create.html\'">\n</div>\n\n'),a.put("user/relationship/user-relationship.html",'<style type="text/css">\n    #add-friend{\n        float:right;\n    }\n\n    #relationship{\n        position: relative;\n    }\n\n    #relationship > .header.dividing{\n        margin-bottom: 20px;\n    }\n\n    #relationship .friend{\n        padding:20px 10px;\n        position: relative;\n        height:64px;\n        width: 380px;\n        display: inline-block;\n        background-color: #fff;\n        margin:10px 10px;\n        border: 1px solid #ddd;\n        border-radius: 3px;\n    }\n\n    #relationship .friend .avatar{\n        position:absolute;\n        left:10px;\n        top:50%;\n        margin-top:-30px;\n    }\n\n    #relationship .friend .info {\n        margin-top: 5px;\n\n    }\n\n   #relationship .friend .info > a {\n       margin-right: 10px;\n    }\n    #relationship .friend .join-in-at{\n        font-size: 14px;\n        color:#999;\n    }\n\n    #relationship .friend .info,\n    #relationship .friend .action{\n        height:50%;\n        padding-left:74px;\n        line-height: 30px;\n\n    }\n\n    #relationship .friend .info .email{\n        font-size:14px;\n        margin-left:5px;\n    }\n\n    #relationship .friend .action{\n        font-size:12px;\n    }\n\n    #relationship .friend .action > .button{\n        margin-right:10px;\n    }\n\n    #relationship .friend .action i.icon{\n        margin-right:0;\n    }\n    #relationship .ui.button.small{\n        padding: 0 1em;\n    }\n    #inner-menu .invite-not-limited {\n        font-size: 12px;\n    }\n    #inner-menu .invite-not-limited input[type="text"] {\n        width: 120px;\n        margin-left: 10px;\n        height: 35px;\n    }\n    #inner-menu .invite-not-limited .ui.right.icon.button {\n        width:48px;\n        height: 35px;\n    }\n    #inner-menu .invite-tip {\n        font-size: 14px;\n        margin:10px;\n    }\n\n</style>\n<div class="ui secondary vertical fixed menu active" id="inner-menu">\n    <header class="header item">\n        关系中心<a href="javascript:void(0);" ng-click="addFriend();" id="add-friend">\n            <i class="add user basic icon right"\n               data-position="top center"\n               data-variation="inverted"\n               data-html="添加好友"\n               cg-popup></i>\n        </a>\n        <article>\n            包括我关注的人以及关注我的人\n        </article>\n    </header>\n    <a class="item" ng-href="/user/relationship/friends" ng-class="{active:inner_menu == \'friends\'}"><i class="unhide icon"></i>关注 ({{USER.follows_count || 0}})</a>\n    <a class="item" ng-href="/user/relationship/fans" ng-class="{active:inner_menu == \'fans\'}"><i class="heart icon"></i>粉丝 ({{USER.fans_count || 0}})</a>\n    <div class="sep"></div>\n    <div class="invite-tip">你的专属邀请链接</div>\n    <div class="ui action input invite-not-limited">\n        <input type="text" ng-value="invite_url" readonly="readonly" onclick="this.select();" />\n        <div class="ui right icon button" clip-copy="getCopy()" clip-click="doCopy()"\n             data-position="top center"\n             data-variation="inverted"\n             data-html="复制链接"\n             cg-popup>\n            <i class="paste icon" ng-class="{\'green checkmark\': copied, \'paste\': !copied}" style="vertical-align: middle"></i>\n        </div>\n    </div>\n</div>\n\n<div class="container" id="relationship">\n    <div class="ui dividing header" ng-bind="relation_header_title">我关注的人</div>\n    <div class="friends">\n        <div class="friend" ng-repeat="user in friends" ng-if="friends.length>0" ng-switch="inner_menu">\n            <div class="avatar">\n                <a ng-href="{{::user.path}}">\n                    <img class="ui circular image avatar64" ng-src="{{::user.avatar }}"/>\n                </a>\n            </div>\n            <div class="info">\n                <a ng-href="{{::user.path}}" class="ellipsis"\n                   style="max-width: 80px;display: inline-block;vertical-align: middle;">\n                    <span>{{::user.name}}</span></a>\n                <span class="join-in-at">\n                    <span class="created-time" cg-friendly-time="user.created_at"></span>\n                    加入Coding\n                </span>\n            </div>\n            <div class="action" ng-switch-when="friends">\n                <span ng-if="user.follow && user.followed"><i class="green exchange icon"></i>互相关注</span>\n                <span ng-if="!user.follow && user.followed"><i class="blue checkmark icon"></i>已关注</span>\n                &nbsp;&nbsp;\n                <div class="ui down small gray button" ng-click="unfollow(user);">\n                    <div ng-show="user.unfollowing">\n                        <i class="icon loading" style="margin: 0 10px"></i>\n                    </div>\n                    <div ng-show="!user.unfollowing">\n                      <i class="minus icon"></i>\n                      取消关注\n                    </div>\n                </div>\n                <div class="ui down black small button" ng-click="showSendMsgDialog(user)">\n                    给TA私信\n                </div>\n            </div>\n            <div class="action" ng-switch-when="fans" ng-switch="user.followed">\n                <span ng-if="user.follow && user.followed"><i class="green exchange icon"></i>互相关注</span>\n                <span ng-if="!user.follow && user.followed"><i class="blue checkmark icon"></i>已关注</span>\n                &nbsp;&nbsp;\n                <div class="ui down green small button" ng-switch-when="false" ng-click="follow(user);">\n                    <div ng-show="user.following">\n                        <i class="icon loading" style="margin: 0 10px"></i>\n                    </div>\n                    <div ng-show="!user.following">\n                        <i class="add icon"></i>\n                        马上关注\n                    </div>\n                </div>\n                <div class="ui down small gray button" ng-switch-when="true" ng-click="unfollow(user);">\n                    <div ng-show="user.unfollowing">\n                        <i class="icon loading" style="margin: 0 10px"></i>\n                    </div>\n                    <div ng-show="!user.unfollowing">\n                      <i class="minus icon"></i>\n                      取消关注\n                    </div>\n                </div>\n                <div class="ui down black small button" ng-click="showSendMsgDialog(user)">\n                    给TA私信\n                </div>\n\n            </div>\n        </div>\n        <div ng-if="friends.list.length==0" ng-switch="loading">\n            <div class="empty center list" ng-switch-when="true">\n                <i class="loading icon"></i>正在加载数据...\n            </div>\n            <div class="empty center list" ng-if="inner_menu === \'friends\'" ng-switch-when="false">\n                尚未关注任何人，马上 <a href="javascript:void(0);" ng-click="addFriend();"><i class="add icon"></i>查找好友</a>！\n            </div>\n            <div class="empty center list" ng-if="inner_menu === \'fans\'" ng-switch-when="false">\n                没人关注？， 多<a href="javascript:void(0);" ng-click="addFriend();"><i class="add icon"></i>关注些好友</a>，总会有人被你打动的！\n            </div>\n        </div>\n        <div ng-if="inner_menu == \'friends\'" cg-pager="{{friends_pager_id}}" class="center"></div>\n        <div ng-if="inner_menu == \'fans\'" cg-pager="{{fans_pager_id}}" class="center"></div>\n    </div>\n</div>\n'),a.put("user/user.html",'<style type="text/css">\n    .refresh-tweets {\n        float: right;\n        margin-top: 2px;\n    }\n    .wrapper.project.tasks {\n        background: #fff;\n        padding: 20px;\n    }\n    .my-projects, .project-activities {\n        background:#fff;padding:20px\n    }\n    .project-activities {\n        margin-top: 20px\n    }\n    .ui.ten.wide.column {\n        padding:0;\n    }\n</style>\n<section class="ui grid user-index" style="margin: 0; padding: 12px 20px;">\n    <div class="ui ten wide column">\n        <div class="my-projects">\n            <div class="ui dividing header">\n                我的项目\n                <a ng-href="/user/projects" class="more-link">查看所有</a>\n                <a href="/user/projects/create" class="more-link">+创建项目&nbsp;</a>\n            </div>\n            <div class="ui relaxed horizontal selection list" id="project-list">\n                <a class="item" ng-repeat="project in projects" ng-href="{{::project.project_path}}">\n                    <div>\n                        <img ng-src="{{::project.icon}}" width="120px" height="120px">\n                    </div>\n                    <p class="project-name">\n                        <i ng-if="::!project.is_public" class="lock icon"></i>\n                        <span>{{::(project.owner_user_name + \'/\' + project.name)}}</span>\n                    </p>\n                    <i class="message-tip"\n                       ng-if="::project.un_read_activities_count">\n                        {{::project.un_read_activities_count | unreadCount}}\n                    </i>\n                </a>\n                <a ng-if="projects_loading" class="item loading" href="javascript:void(0);">\n                    <span><i class="loading icon" style="float: none;display: inline;"></i>加载项目中...</span>\n                </a>\n                <a class="item" href="/user/projects/create" ng-if="projects.length < project_count">\n                    <div class="create-project">\n                        <i class="huge add icon"></i>\n                    </div>\n                    <p class="project-name">创建新项目</p>\n                </a>\n            </div>\n        </div>\n        <div class="project-activities">\n            <div class="ui dividing header">\n                动态\n            </div>\n\n            <div class="activity tabs">\n                <div class="tab" ng-class="{active:activity_type==1}"\n                     ng-click="switchProjectActivities(1)">我的项目\n                </div>\n                <div class="tab" ng-class="{active:activity_type==2}"\n                     ng-click="switchProjectActivities(2)">关注的项目\n                </div>\n                <div class="tab" ng-class="{active:activity_type==3}"\n                     ng-click="switchProjectActivities(3)">关注的人\n                </div>\n            </div>\n\n            <div class="ui basic segment" id="project-activities">\n                <div class="wrapper"\n                     cg-timeline="project_activities"\n                     show-project="true">\n                </div>\n            </div>\n\n            <div class="center empty list">\n                <div ng-if="prj_activities_loading">\n                    <i class="loading icon"></i>正在加载动态...\n                </div>\n                <div ng-if="project_activities && project_activities.length > 0 && !prj_activities_loading">\n                    <a class="center down more" ng-click="loadMoreActivity()" href="javascript:void(0);" ng-if="!show_no_more_tip">加载更多</a>\n                    <span ng-if="show_no_more_tip">没有更多动态</span>\n                </div>\n                <div ng-if="(prj_activities_loaded && project_activities.length == 0) || !project_activities">\n                    <span ng-if="activity_type==1">\n                        <i class="coffee icon"></i>\n                        还没有任何项目动态，马上\n                        <a ng-href="/user/projects/create">\n                            <i class="add icon"></i>\n                            创建个项目\n                        </a>\n                        吧！\n                    </span>\n                    <span ng-if="activity_type==2">\n                        <i class="coffee icon"></i>\n                        还没有任何项目动态，马上到\n                        <a ng-href="/projects">项目列表</a>\n                        关注几个项目吧！\n                    </span>\n                    <span ng-if="activity_type==3">\n                        <i class="coffee icon"></i>\n                        尚未关注任何人，马上\n                        <a ng-href="/user/relationship/friends">\n                            <i class="add user basic icon"></i>\n                            查找好友\n                        </a>\n                    </span>\n                </div>\n            </div>\n        </div>\n\n    </div>\n    <div class="ui six wide column">\n        <div class="wrapper project tasks just-show">\n            <div class="ui dividing header">\n                我的任务\n            </div>\n            <div\n                 ng-if="!task_loading && tasks.length > 0"\n                 ng-repeat="task in tasks"\n                 cg-task-show="task">\n            </div>\n            <div class="center empty list" ng-if="!task_loading && !tasks.length > 0">\n                <span>没有任务</span>\n            </div>\n            <div class="center empty list" ng-if="task_loading">\n                <i class="icon loading"></i>加载中...\n            </div>\n            <a class="right more gray" ng-href="/user/tasks?owner={{USER.id}}"\n               style="text-align:center;margin-top:10px;">查看我的任务</a>\n        </div>\n    </div>\n</section>\n<style type="text/css">\n    #first-login-info .welcome-info-wrapper {\n        max-width: 800px;\n        background: rgba(0, 0, 0, 0.7);\n        border-radius: 5px;\n        -webkit-border-radius: 5px;\n        margin: auto;\n        padding: 20px 10px;\n    }\n\n    #first-login-info .welcome-info {\n        margin: 0 10px;\n        text-align: left;\n        line-height: 38px;\n        text-indent: 30px;\n        font-size: 18px;\n    }\n\n    #coding-start-button {\n        margin: 60px 0 30px 0;\n    }\n</style>\n<div class="ui page dimmer" id="first-login-info">\n    <div class="content">\n        <div class="center">\n            <div class="welcome-info-wrapper">\n                <div class="welcome-info">\n                    <p>\n                        Hi there,\n                    </p>\n\n                    <p>\n                        Coding is here!\n                    </p>\n\n                    <p>\n                        Coding 致力于打造一个云端的软件开发平台，目前提供的功能有代码托管，运行空间，质量分析，项目管理，社交等功能。我们致力于提供简洁，高效的功能和操作体验。\n                    </p>\n\n                    <p>\n                        您可以点击 “进入 Coding” 按钮，开始使用 Coding 的各项功能。同时请尽快去您的邮箱查收激活邮件。\n                    </p>\n\n                    <p>\n                        如您有任何疑问，请通过顶部的帮助链接获取信息或者与我们联系。\n                    </p>\n                </div>\n                <div id="coding-start-button">\n                    <a href="javascript:void(0);" ng-click="hideWelcomeInfo();" class="ui large green button">进入\n                        Coding</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),
a.put("profile/profile.html",'<div id="user-space" class="ui grid">\n     <div class="five wide column info-column" ng-include="\'app/user/space/left_column.html\'"></div>\n     <div ng-if="!show_follower_list" class="eleven wide column content-column">\n        <div class="ui tabular menu">\n            <a class="item" ng-class="{active: show_tab == \'project\'}" ng-click="switch_tab(\'project\')">\n                项目\n            </a>\n            <a class="item" ng-class="{active: show_tab == \'bubble\'}"  ng-click="switch_tab(\'bubble\')">\n                冒泡\n            </a>\n            <a class="item" ng-class="{active: show_tab == \'bubble-topic\'}"  ng-click="switch_tab(\'bubble-topic\')">\n                话题\n            </a>\n            <a class="item" ng-class="{active: show_tab == \'activity\'}"  ng-click="switch_tab(\'activity\')">\n                动态\n            </a>\n        </div>\n        <div class="user-projects" ng-if="show_tab == \'project\'">\n            <div cg-user-activeness current-user="USER" target-user="user"></div>\n            <div class="ui text menu filter-menu">\n              <a class="item" ng-class="{active: show_joined}" ng-click="switch_projects(\'joined\')">\n                TA 参与的\n              </a>\n              <a class="item" ng-class="{active: !show_joined}" ng-click="switch_projects(\'stared\')">\n                TA 收藏的\n              </a>\n            </div>\n            <div class="ui divider"></div>\n            <table class="projects" border="0" cellspacing="0" cellpadding="0" style="border-collapse:collapse;">\n                <tr ng-repeat="project in projects track by $index">\n                    <td class="avatar">\n                        <a href="{{project.project_path}}">\n                            <img ng-src="{{project.icon || \'/static/d2ab4f6de747ad169160d3caaf82132e.png\'}}" width="44px" width="44px"/>\n                        </a>\n                    </td>\n                    <td class="project-info">\n                        <div class="project-name"><a href="{{project.project_path}}">{{project.name}}</a></div>\n                        <div class="project-description" cg-show-more="project.description | projectDescription" can-show-more="false" limit-to="150">\n                        </div>\n                    </td>\n                    <td class="star-count" style="width: 150px">\n                        <span class="star-count-item" data-position="top center" data-variation="inverted" data-html="收藏" cg-popup>\n                          <a ng-href="{{project.project_path}}/stargazers"><i class="icon star"></i>&nbsp;&nbsp;{{project.star_count}}</a>\n                        </span>\n                        <span class="fork-count-item" data-position="top center" data-variation="inverted" data-html="Fork" cg-popup>\n                          <a ng-href="{{project.depot_path}}/forks"><i class="icon fork code"></i>{{project.fork_count}}</a>\n                        </span>\n                    </td>\n                </tr>\n            </table>\n            <div class="center empty list" ng-if="projects.length === 0 && project_loading">\n                <i class="loading icon"></i>正在加载项目...\n            </div>\n            <div ng-if="projects.length === 0 && !project_loading" class="ui coding aligned center">\n                <p>暂无项目</p>\n            </div>\n            <div cg-pager="{{pager_id}}" class="center"></div>\n        </div>\n\n        <div class="user-tweets" ng-if="show_tab == \'bubble\'">\n            <div>\n                <div class="ui text menu filter-menu">\n                    <a class="item" ng-class="{active: tweet_mode === \'my\'}" ng-click="switch_tweets(\'my\')">\n                        TA 自己的\n                    </a>\n                    <a class="item" ng-class="{active: tweet_mode === \'liked\'}" ng-click="switch_tweets(\'liked\')">\n                        TA 赞过的\n                    </a>\n                    <a class="item" ng-class="{active: tweet_mode === \'commented\'}" ng-click="switch_tweets(\'commented\')">\n                        TA 评论过的\n                    </a>\n                </div>\n                <div class="ui divider"></div>\n                <div class="bubble-item" ng-repeat="tweet in tweets">\n                    <a class="avatar"\n                       ng-href="{{::tweet.owner.path}}"\n                       cg-hover-card="tweet.owner">\n                        <img class="ui image avatar42"\n                             ng-src="{{::tweet.owner.avatar}}"\n                             title="{{::tweet.owner.name}}"/>\n                    </a>\n                  <div class="arrow" cg-bubble="tweet" on-remove="onBubbleRemove">\n                    <div ng-if="$root.USER" cg-bubble-comment-form="tweet"></div>\n                    <div cg-bubble-comment="tweet"></div>\n                  </div>\n                </div>\n                <div cg-bubble-reward="reward"></div>\n                <div class="center empty list" ng-if="!no_more_tweet && tweet_loading">\n                    <i class="loading icon"></i>正在加载泡泡...\n                </div>\n                <div cg-pager="{{pager_id}}" class="center"></div>\n                <div class="center empty list" ng-if="!tweet_loading && !(tweets && tweets.length > 0) && tweet_mode === \'my\'">\n                    <p>他还没有发过泡泡呢~</p>\n                </div>\n            </div>\n        </div>\n\n         <div class="user-tweet-topics" ng-if="show_tab == \'bubble-topic\'">\n             <div>\n                 <div class="ui text menu filter-menu">\n                     <a class="item" ng-class="{active: tweet_topic_mode === \'joined\'}" ng-click="switch_bubble_topic(\'joined\')">\n                         TA 参与的\n                     </a>\n                 </div>\n                 <div class="ui divider"></div>\n\n                <div class="bubble-topic-item" ng-repeat="topic in tweet_topics" ng-if="!bubble_topic_loading">\n                    <div ng-include="\'share/templates/tweet-topic-content.html\'"></div>\n                </div>\n                 <div class="center empty list" ng-if="bubble_topic_loading">\n                     <i class="loading icon"></i>正在加载话题...\n                 </div>\n                 <div class="center empty list" ng-if="!bubble_topic_loading && !tweet_topics.length > 0">\n                     <p>没有话题</p>\n                 </div>\n             </div>\n             <div cg-pager="{{pager_id}}" class="center"></div>\n         </div>\n\n        <div class="user-activities" ng-if="show_tab == \'activity\'">\n            <div class="ui text menu filter-menu">\n              <a class="item" ng-class="{active: activities_mode == \'all\'}" ng-click="switch_activities(\'all\')">\n                所有\n              </a>\n              <a class="item" ng-class="{active: activities_mode == \'project\'}" ng-click="switch_activities(\'project\')">\n                项目相关\n              </a>\n              <a class="item" ng-class="{active: activities_mode == \'tweet\'}" ng-click="switch_activities(\'tweet\')">\n                冒泡相关\n              </a>\n            </div>\n            <div>\n                <div ng-repeat="activity in activities track by $index" cg-activity="{{activity.target_type}}">\n                </div>\n                <div class="center empty list" ng-if="activity_loading">\n                    <i class="loading icon"></i>正在加载动态...\n                </div>\n                <div class="ui coding aligned center" ng-if="activities && activities.length > 0 && !activity_loading && !activity_no_more">\n                    <p>\n                    <a ng-click="show_more()" class="show-more-link down more">加载更多动态</a>\n                    </p>\n                </div>\n\n                <div class="center empty list" ng-if="!(activities && activities.length > 0)">\n                    <p>暂无动态</p>\n                </div>\n\n                <div class="center empty list" ng-if="activity_no_more">\n                    <p>没有动态了~</p>\n                </div>\n            </div>\n        </div>\n     </div>\n    <div ng-if="show_follower_list" class="container eleven wide column content-column" ng-include="\'app/user/space/followers_and_friends.html\'" id="relationship"></div>\n</div>\n'),a.put("team/directives/team-dismiss.html",'<div class="team-dismiss clearfix">\n    <div class="ui small header">解散团队</div>\n    <div class="ui warning message">\n        <strong>注意：</strong>\n        必须先将团队内所有项目都转移出团队后方可解散团队。该团队将从所有团队成员的团队列表中删除。解散后团队内所有数据都将被彻底删除。此操作无法撤消，请谨慎。\n    </div>\n    <div class="ui form">\n        <div class="ui red submit button" ng-click="doDismiss()"><i class="icon loading" ng-if="loading"></i>解散团队</div>\n    </div>\n</div>\n'),a.put("team/directives/team-edit-form.html",'<div class="team-edit-form clearfix">\n    <div class="ui inverted dimmer" ng-class="{active : updating}"><i class="icon loading"></i></div>\n    <!-- ngIf: update_success -->\n    <div class="team-avatar">\n        <div class="loading" ng-show="uploading">\n            <i class="loading icon"></i>\n        </div>\n        <div ng-show="!uploading" class="team-icon">\n            <input type="file" name="file" cg-file-upload="uploadSetting">\n            <div ng-if="team.avatar" class="image">\n                <i class="edit sign icon"></i>\n                <img ng-src="{{team.avatar}}" width="128px" height="128px">\n            </div>\n        </div>\n    </div>\n    <form class="ui form">\n        <input type="hidden" ng-model="project.id">\n        <div class="two fields">\n            <div class="field">\n                <label>团队名称</label>\n                <input type="text" ng-model="team.name" placeholder="项目名称">\n            </div>\n\n            <div class="field">\n                <label>个性后缀</label>\n                <input type="text" ng-model="team.global_key" placeholder="个性后缀" disabled="true">\n            </div>\n        </div>\n        <div class="field">\n            <label>团队描述</label>\n            <textarea ng-model="team.introduction" placeholder="团队描述" rows="3"></textarea>\n        </div>\n\n        <div>\n            <input type="submit" value="保存" class="ui dark gray tiny medium submit button"\n                   ng-click="updateTeam(team)">\n        </div>\n\n    </form>\n</div>\n'),a.put("team/directives/team-info-header.html",'<header class="header team-info-header clearfix">\n    <div class="avatar">\n        <img class="" ng-src="{{team.avatar}}">\n    </div>\n    <div class="info">\n        <div ng-bind="team.name"></div>\n        <p ng-bind="team.introduction"></p>\n    </div>\n</header>\n\n'),a.put("team/directives/team-inner-menu.html",'<div class="ui secondary vertical fixed menu active team-inner-menu" id="inner-menu">\n    <header class="header item">\n        团队\n        <a ng-click="createTeam()" class="pointer" title="创建团队"><i class="add icon"></i></a>\n        <article>\n            在此可以查看并管理你的团队及团队项目\n        </article>\n    </header>\n    <div class="team-item item clearfix" ng-repeat="team in teams"\n         ng-class="{\'active\':current_team == team.global_key}">\n        <a ng-href="{{team.path}}">\n            <div class="info">\n                <div class="avatar">\n                    <img ng-src="{{team.avatar}}" class="ui image">\n                </div>\n                <div class="content">\n                    <div class="title">\n                        <span ng-bind="team.name"></span>\n                    </div>\n                    <div class="stat">\n                        <span><i class="coding project icon"></i><em ng-bind="team.project_count || 0"></em>个</span>\n                        <span class="sep"></span>\n                        <span><i class="user icon"></i><em ng-bind="team.member_count || 0"></em>人</span>\n                    </div>\n                </div>\n            </div>\n        </a>\n    </div>\n</div>\n\n'),a.put("team/directives/team-layout-blank.html",'<div class="ui grid layout-blank-team">\n    <div class="one column row center aligned">\n        <div class="no-team-bg">\n            <img src="https://dn-coding-net-production-static.qbox.me/static/f1d4a05964e9fcbfbf062bf2d672e6c6.png"/>\n        </div>\n        <a ng-click="createTeam()">\n            <div class="ui green submit button ng-scope">马上创建团队</div>\n        </a>\n    </div>\n</div>\n\n'),a.put("team/directives/team-member-box.html",'<div class="team-member-box clearfix">\n    <div class="project-header">\n        <span class="tab-option" ng-class="{\'teamMember\':\'font-bold\',\'otherMember\':\'\'}[memberType]" ng-click="memberType=\'teamMember\'">\n            团队成员(<span ng-bind="members.length"></span>)\n        </span>\n        <span class="tab-option" ng-class="{\'teamMember\':\'\',\'otherMember\':\'font-bold\'}[memberType]" ng-click="memberType=\'otherMember\'">\n            其他项目成员(<span ng-bind="others.length"></span>)\n        </span>\n        <div class="ui green submit right floated button" ng-click="doAddMember()" ng-if="team | isRole:ADMIN" ng-class="{disabled: isExpActive(\'vip\') && team.owner.vip !== 4}">\n            添加成员\n        </div>\n    </div>\n    <div ng-show="memberType==\'teamMember\'">\n        <table class="ui basic table">\n            <thead>\n            <tr>\n                <th colspan="2">成员</th>\n                <th>备注</th>\n                <th>加入时间</th>\n                <th ng-if="isManager(user_member.role)">两步验证</th>\n                <th colspan="2">团队角色</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="member in members" ng-init="member.role_name = role_names[member.role];">\n                <td class="avatar">\n                    <a ng-href="{{member.user.path}}">\n                        <img ng-src="{{member.user.avatar}}" class="ui image"/>\n                    </a>\n                </td>\n                <td>\n                    <a ng-href="{{member.user.path}}">\n                        <span class="name" ng-bind="member.user.name" title="{{member.user.name}}"></span>\n                    </a>\n                </td>\n                <td class="alias">\n                    <span ng-hide="member.alias_editing">{{member.alias}}</span>\n                    <a ng-if="isManager(user_member.role) || USER.id === member.user_id" ng-click="showTeamMemberAliasInput(member)"\n                        ng-hide="member.alias_editing">\n                        <i class="icon edit"></i><span ng-show="!member.alias">添加备注</span>\n                    </a>\n\n                    <input ng-show="member.alias_editing" ng-model="member.alias"\n                        ng-blur="hideTeamMemberAliasInput(member)" cg-enter="setTeamMemberAlias(member)"/>\n                </td>\n                <td>\n                    <span ng-bind="member.created_at | date: \'yyyy-MM-dd HH:mm\'"></span>\n                </td>\n                <td ng-if="isManager(user_member.role)">\n                    <span ng-if="member.default2faMethod !== \'password\'" style="color: green;">已开启</span>\n                    <span ng-if="member.default2faMethod === \'password\'">未开启</span>\n                </td>\n                <td>\n                    <div class="role-action">\n                        <span class="role-label owner" ng-show="member.role == OWNER">所有者</span>\n                        <span class="role-label admin"\n                              ng-show="member.role == ADMIN && !(team | isRole:OWNER)">管理员</span>\n                        <span class="role-label member"\n                              ng-show="member.role == MEMBER && !(team | isRole:OWNER)">成员</span>\n                        <ui-floating-drop-down ng-show="(team | isRole:OWNER ) && (member.role < OWNER)"\n                                               class="team-role"\n                                               options="roles"\n                                               ng-model="member.role"\n                                               on-change="changeMemberRole" args="member"\n                                               label="member.role_name"></ui-floating-drop-down>\n                    </div>\n                </td>\n                <td>\n                    <div class="role-action">\n                        <div class="button" ng-click="doProjectSetting(member.user)"\n                             ng-if=" (team | isRole:ADMIN )  && (member.role < team.current_user_role_id || member.user_id == USER.id)">\n                            <i class="icon setting"></i>项目设置\n                        </div>\n                        <div class="button remove" ng-click="doRemove(member,\'team_members\')"\n                             ng-if=" (team | isRole:ADMIN ) && (member.role < team.current_user_role_id)">\n                            <i class="icon remove"></i>移除\n                        </div>\n                    </div>\n                </td>\n            </tr>\n            <tr ng-if="member_loading">\n                <td colspan="100">\n                    <div class="center empty list">\n                        <i class="loading icon"></i>正在加载团队成员中...\n                    </div>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n    <div ng-show="memberType==\'otherMember\'">\n        <table ng-if="others.length > 0" class="ui basic table">\n            <thead>\n            <tr>\n                <th colspan="2">用户</th>\n                <th>加入项目</th>\n                <th colspan="2"><span ng-if="isManager(user_member.role)">两步验证</span></th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="member in others" ng-init="member.role_name = role_names[member.role];">\n                <td class="avatar">\n                    <a ng-href="{{member.user.path}}">\n                        <img ng-src="{{member.user.avatar}}" class="ui image"/>\n                    </a>\n                </td>\n                <td>\n                    <a ng-href="{{member.user.path}}">\n                        <span class="name" ng-bind="member.user.name" title="{{member.user.name}}"></span>\n                    </a>\n                </td>\n                <td>\n                    <span ng-repeat="project in member.projects">{{project.name}}\n                        <span ng-if="!$last">,</span>\n                    </span>\n                </td>\n                <td ng-if="isManager(user_member.role)">\n                    <span ng-if="member.default2faMethod !== \'password\'" style="color: green;">已开启</span>\n                    <span ng-if="member.default2faMethod === \'password\'">未开启</span>\n                </td>\n                <td style="width: 20rem">\n                    <div ng-if="isManager(user_member.role)" class="role-action">\n                        <div class="button" ng-click="doProjectSetting(member.user)">\n                            <i class="icon setting"></i>项目设置\n                        </div>\n                        <div class="button" ng-click="addMember(member.user)">\n                            <i class="icon add"></i>加入团队\n                        </div>\n                        <div class="button remove" ng-click="doRemove(member,\'other_members\')">\n                            <i class="icon remove"></i>移除\n                        </div>\n                    </div>\n                </td>\n            </tr>\n            <tr ng-if="others_loading">\n                <td colspan="100">\n                    <div class="center empty list">\n                        <i class="loading icon"></i>正在加载团队成员中...\n                    </div>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n        <div ng-if="others.length == 0">\n            <div class="center empty list other-member-top">\n                无其他项目成员\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("team/directives/team-project-box.html",'<div class="team-project-box clearfix">\n    <div ng-if="!isMoveIn">\n        <div class="project-header">\n            所有项目<span>（</span><span ng-bind="joined_projects.length + unjoined_projects.length + archived_projects.length"></span><span>）</span>\n            <div class="ui green submit right floated button" ng-click="toggleMoveIn()" ng-class="{disabled: isExpActive(\'vip\') && team.owner.vip !== 4}">迁入项目</div>\n        </div>\n        <div>\n            <div class="team-line-header">\n                <span>我参与的<em>·</em><em ng-bind="joined_projects.length">0</em></span>\n            </div>\n            <div class="team-project-group">\n                <ul class="project-labels clearfix" ng-if="!loading_joined_projects">\n                    <li class="item" ng-repeat="project in joined_projects">\n                        <project-label project="project" on-selected="null" project-admin="team.current_user_role_id >= 90" team="team"></project-label>\n                    </li>\n                </ul>\n                <div class="center empty list" ng-if="loading_joined_projects">\n                    <i class="loading icon"></i>正在加载我参与的项目...\n                </div>\n                <div class="center empty list" ng-if="!loading_joined_projects && joined_projects.length <= 0">\n                    您还没有参与团队中的任何项目\n                </div>\n            </div>\n        </div>\n        <div ng-if="unjoined_projects.length > 0 && (team | isRole:ADMIN)">\n            <div class="team-line-header">\n                <span>我未参与的<em>·</em><em ng-bind="unjoined_projects.length">0</em></span>\n            </div>\n            <div class="team-project-group">\n                <ul class="project-labels clearfix" ng-if="!loading_unjoined_projects">\n                    <li class="item" ng-repeat="project in unjoined_projects">\n                        <project-label project="project" on-selected="null" project-admin="team.current_user_role_id >= 90" team="team"></project-label>\n                    </li>\n                </ul>\n                <div class="center empty list" ng-if="loading_unjoined_projects">\n                    <i class="loading icon"></i>正在加载我未参与的项目...\n                </div>\n            </div>\n        </div>\n        <div ng-if="team.current_user_role_id >= 90 && archived_projects.length > 0  && (team | isRole:ADMIN)">\n            <div class="team-line-header">\n                <span>已归档的<em>·</em><em ng-bind="archived_projects.length">0</em></span>\n            </div>\n            <div class="team-project-group">\n                <ul class="project-labels clearfix" ng-if="!loading_archived_projects">\n                    <li class="item" ng-repeat="project in archived_projects">\n                        <project-label project="project" on-selected="null" archived="true" team="team"></project-label>\n                    </li>\n                </ul>\n                <div class="center empty list" ng-if="loading_archived_projects">\n                    <i class="loading icon"></i>正在加载已归档的项目...\n                </div>\n            </div>\n        </div>\n    </div>\n    <div ng-if="isMoveIn">\n        <team-project-move-in team="team" on-close="toggleMoveIn()" on-success="loadProjects()"></team-project-move-in>\n    </div>\n</div>\n'),a.put("team/directives/team-project-move-in.html",'<div class="team-project-move-in clearfix">\n    <div class="header-notice">\n        <div class="ui small header">迁入项目</div>\n        <div class="ui warning message">\n            <strong>注意：</strong>\n            只能添加“我创建的项目”至团队。项目添加到团队后，项目的所有者将变更为该团队，原项目所有者变更为项目管理员，付费项目将关闭自动续费的功能。\n        </div>\n    </div>\n    <div class="selection-box">\n        <div class="team-line-header">\n            <span>我创建的项目<em>·</em><em ng-bind="projects.length">0</em></span>\n        </div>\n        <div ng-if="loading">\n            <div class="center empty list">\n                <i class="loading icon"></i>正在加载项目列表\n            </div>\n        </div>\n        <div ng-show="!loading">\n            <project-selection projects="projects" selected="selected"></project-selection>\n            <div class="ui checkbox move-in-members">\n                <input type="checkbox" ng-model="moveInMembers" id="move-in-members">\n                <label for="move-in-members">同时将项目成员迁入团队</label>\n            </div>\n            <div class="move-in-buttons">\n                <div class="ui green submit button" ng-click="doMoveIn()" ng-if="selected.length > 0">确定迁入</div>\n                <div class="ui button" ng-click="close()">取消</div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("team/directives/team-quit.html",'<div class="team-transfer clearfix">\n    <div class="ui small header">团队退出</div>\n    <div class="ui warning message">\n        <strong>注意：</strong>\n        退出团队后，你将同时退出所在团队的所有项目，但与你相关的项目数据不会被删除。此操作无法撤消，请谨慎。\n    </div>\n    <div class="ui form">\n        <div class="ui red submit button" ng-click="doQuit()"><i class="icon loading" ng-if="loading"></i>退出团队</div>\n    </div>\n</div>\n'),a.put("team/directives/team-setting-box.html",'<div class="team-setting-box clearfix">\n    <team-edit-form class="upline" team="team" ng-if="team | isRole:ADMIN"></team-edit-form>\n    <team-transfer class="upline" team="team" ng-if="team | isRole:OWNER"></team-transfer>\n    <team-dismiss class="upline" team="team" ng-if="team | isRole:OWNER"></team-dismiss>\n    <team-quit class="upline" team="team" ng-if="!(team | isRole:OWNER)"></team-quit>\n</div>\n'),a.put("team/directives/team-tab-box.html",'<div class="layout-team-tab-box clearfix">\n    <div class="ui tabular menu">\n        <a class="item" ng-class="{\'active\':tab==0}" ng-click="changeTab(0)">项目</a>\n        <a class="item" ng-class="{\'active\':tab==1}" ng-click="changeTab(1)">成员</a>\n        <a class="item" ng-class="{\'active\':tab==2}" ng-click="changeTab(2)">设置</a>\n    </div>\n    <div>\n        <team-project-box team="team" ng-if="tab == 0"></team-project-box>\n        <team-member-box team="team" ng-if="tab == 1"></team-member-box>\n        <team-setting-box team="team" ng-if="tab == 2"></team-setting-box>\n    </div>\n</div>\n'),a.put("team/directives/team-transfer.html",'<div class="team-transfer clearfix">\n    <div class="ui small header">团队转让</div>\n    <div class="ui warning message">\n        <strong>注意：</strong>\n        <span ng-if="isExpActive(\'vip\')">\n        您可以将团队转让给团队成员，但该成员必须为钻石会员。为方便您的操作，转让列表仅显示钻石会员等级的成员。转让后您将降级为团队普通成员，无法再管理当前团队。该操作无法撤消，请谨慎。\n        </span>\n        <span ng-if="!isExpActive(\'vip\')">\n        你可以将团队转让给任一团队成员，转让后你将降级为团队普通成员，无法再管理当前团队。该操作无法撤消，请谨慎。\n        </span>\n    </div>\n    <div class="ui form">\n        <div class="do-transfer field">\n            <label>转让成员：</label>\n            <div class="select-member">\n                <ui-floating-drop-down options="members"\n                                       ng-model="transfer_target"\n                                       on-change="" args=""\n                                       label="drop_label"></ui-floating-drop-down>\n            </div>\n        </div>\n        <div class="field">\n            <div class="ui green submit button" ng-click="doTransfer()"><i class="icon loading" ng-if="loading"></i>转让团队\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("team/team-add-member-modal.html",'<div class="ui modal add-team-member-modal" id="add-team-member-modal">\n    <i class="close icon"></i>\n    <div class="header">添加团队成员</div>\n    <div class="content">\n        <select-member project="null" user="USER" ng-model="selected_member" member-users="member_users"\n                       max-member="100" show-button="false"></select-member>\n    </div>\n    <div class="actions">\n        <div class="ui green submit button" ng-click="confirm()">确定</div>\n        <div class="ui cancel button" ng-click="cancel()">取消</div>\n    </div>\n</div>'),a.put("team/team-create.html",'<div class="layout-team-page">\n    <team-inner-menu></team-inner-menu>\n    <div class="container layout-team-create  team-container">\n        <form class="ui form segment team-create-form" ng-class="{loading:loading}">\n\n            <div class="ui red message" style="font-size:14px" ng-if="isExpActive(\'vip\') && USER.vip !== 4">\n                <div>\n                    <i class="remove sign icon"></i>\n                    您不是钻石会员，不能创建团队。升级为钻石会员，用团队管理你的团队成员和团队项目吧！\n                    <a ng-href="/user/account/upgrade?force=4">马上升级</a>\n                </div>\n            </div>\n            <div class="field">\n                <h1 class="ui dividing header">创建团队</h1>\n            </div>\n\n            <div class="two fields">\n                <div class="field">\n                    <div class="ui input">\n                        <input type="text" ng-model="form.name" placeholder="团队名称"/>\n                    </div>\n                </div>\n\n                <div class="field">\n                    <div class="ui input">\n                        <input type="text" ng-model="form.global_key" placeholder="团队个性后缀"/>\n                    </div>\n                </div>\n            </div>\n\n            <div class="field">\n                <div class="ui input">\n                    <textarea ng-model="form.introduction" rows="5" placeholder="团队简介"></textarea>\n                </div>\n            </div>\n            <div class="field">\n                <h1 class="ui dividing header">添加成员\n                    <i class="double angle icon member-icon" ng-class="{true:\'up\',false:\'down\'}[member_show]"\n                       ng-click="showMemberTap()"></i>\n                </h1>\n                <div class="field" ng-show="member_show == false">\n                    <p class="member-desc" ng-click="showMemberTap()">点击添加成员</p>\n                </div>\n                <div ng-show="member_show" class="ui input">\n                    <div>\n                        <select-member project="null" user="USER" ng-model="selected_member" member-users="member_users"\n                                       max-member="100" show-button="false"></select-member>\n                    </div>\n                </div>\n            </div>\n\n\n            <div style="margin-top: 30px;">\n                <div class="ui green submit medium button ng-scope" ng-click="doCreate()" ng-class="{disabled: isExpActive(\'vip\') && USER.vip !== 4}">创建团队</div>\n            </div>\n        </form>\n    </div>\n</div>\n'),a.put("team/team-detail.html",'<div class="layout-team-page">\n    <team-inner-menu team="team"></team-inner-menu>\n    <div class="container team-container">\n        <div class="ui red message" style="font-size:14px" ng-if="isExpActive(\'vip\') && team && team.owner.vip !== 4">\n            <div>\n                <i class="remove sign icon"></i>\n                <span ng-if="team.owner.global_key == USER.global_key">\n                    您不是钻石会员，无法正常使用团队功能。升级为钻石会员，用团队管理你的团队成员和团队项目吧！\n                    <a ng-href="/user/account/upgrade?force=4">马上升级</a>\n                </span>\n                <span ng-if="team.owner.global_key != USER.global_key">\n                    该团队的所有者不是钻石会员，无法正常使用团队功能。请联系团队所有者尽快升级为钻石会员，方便团队成员和团队项目的管理。\n                </span>\n            </div>\n        </div>\n        <team-info-header team="team"></team-info-header>\n        <team-tab-box team="team"></team-tab-box>\n    </div>\n</div>\n'),a.put("team/team-index.html",'<div class="layout-team-page">\n    <team-inner-menu></team-inner-menu>\n    <div class="container  team-container">\n        <team-layout-blank></team-layout-blank>\n    </div>\n</div>\n'),a.put("team/team-member-permission-modal.html",'<div class="ui modal team team-member-permission-modal" id="team-member-permission-modal">\n    <i class="close icon"></i>\n    <div class="header"><span ng-bind="user.name"></span>的项目设置</div>\n    <div class="content">\n        <table class="ui basic table">\n            <thead>\n            <tr>\n                <th>\n                    <div class="ui checkbox">\n                        <input type="checkbox" id="perm-all" name="fun" ng-click="selectAll($event)"\n                               ng-checked="selected_all" ng-if="members.length > 0">\n                        <label for="perm-all">项目</label>\n                    </div>\n                </th>\n                <th class="selecter">项目权限</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="member in members" ng-init="initMember(member)">\n                <td class="checker">\n                    <div class="ui checkbox">\n                        <input type="checkbox" id="{{\'perm-member-\'+member.project.name}}" name="fun"\n                               ng-click="selectedMember(member,$event)"\n                               ng-checked="member.role >= MEMBER_NO_CODE">\n                        <label for="{{\'perm-member-\'+member.project.name}}" ng-bind="member.project.name"></label>\n                    </div>\n                </td>\n                <td class="selecter">\n                    <div class="role-action">\n                        <ui-floating-drop-down class="team-role" options="roles"\n                                               ng-model="member.role"\n                                               on-change="" args="member"\n                                               label="member.role_name"></ui-floating-drop-down>\n                    </div>\n                </td>\n            </tr>\n            <tr ng-if="!members || members.length <= 0">\n                <td colspan="100">\n                    <div class="center empty list">\n                        该成员还没参与团队任何项目...\n                    </div>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n    <div class="actions">\n        <div class="ui green submit button" ng-click="confirm()">确定</div>\n        <div class="ui cancel button" ng-click="cancel()">取消</div>\n    </div>\n</div>'),
a.put("team/team-project-operation-modal.html",'<div class="ui modal team team-project-archive-modal" id="team-project-archive-modal">\n    <i class="close icon"></i>\n    <div class="header">归档项目</div>\n    <div class="content">\n        <div class="ui warning message">\n            <strong>注意：</strong>\n            项目成功归档后，该项目将会移到团队的归档项目中，并且不能对该项目做任何操作，直到解除归档。同时该项目将从所有项目成员的项目列表中移除。团队拥有者和团队管理员可以在团队的归档项目中进行解除归档操作，解除归档后，项目恢复至过归档前的状态。\n        </div>\n    </div>\n    <div class="actions">\n        <div class="ui cancel button">取消</div>\n        <div class="ui green submit button" ng-click="confirm()">确定归档</div>\n    </div>\n</div>\n<div class="ui modal team team-project-export-modal" id="team-project-export-modal">\n    <i class="close icon"></i>\n    <div class="header">迁出项目</div>\n    <div class="content">\n        <div class="ui warning message">\n            <strong>注意：</strong>\n            <span ng-if="isExpActive(\'vip\')">\n                迁出项目只能迁出给项目成员。项目迁出团队后，该团队将失去一切关于该项目的权限。同时，项目转让后，项目的 git 仓库访问路径会发生变化，并且仓库容量可能随接收者的<a ng-href="https://coding.net/vip" target="_blank">会员等级</a>而变小，导致项目仓库不可用。该操作无法撤消，请谨慎。\n            </span>\n            <span ng-if="!isExpActive(\'vip\')">\n                迁出项目只能迁出给项目成员。项目迁出团队后，该团队将失去一切关于该项目的权限。同时，项目转让后，项目的 git 仓库访问路径会发生变化，例如：团队 Coding 将项目转给用户 Demo 后， git 仓库访问路径将由 https://git.coding.net/coding/test.git 变成 https://git.coding.net/demo/test.git。\n            </span>\n        </div>\n        <div class="ui form">\n            <div class="do-export field">\n                <label>转让成员：</label>\n                <div class="select-member">\n                    <ui-floating-drop-down options="members"\n                                           ng-model="member"\n                                           on-change="" args=""\n                                           label="drop_label"></ui-floating-drop-down>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="actions">\n        <div class="ui cancel button">取消</div>\n        <div class="ui green submit button" ng-click="confirm()">确定迁出</div>\n    </div>\n</div>\n<div class="ui modal team team-project-delete-modal" id="team-project-delete-modal">\n    <i class="close icon"></i>\n    <div class="header">删除项目</div>\n    <div class="content">\n        <div class="ui warning message">\n            <strong>注意：</strong>\n            删除项目将会连同其相关的所有数据（包括 讨论，pull requests，动态等在内）一起删除。\n            <strong>此操作无法恢复!</strong>\n        </div>\n    </div>\n    <div class="actions">\n        <div class="ui cancel button">取消</div>\n        <div class="ui green submit button" ng-click="confirm()">确定删除</div>\n    </div>\n</div>\n'),a.put("coding/coding-cg.html",'<div class="coding-cg coding" style="margin:50px;">\n    <div class="ui header h1">Cg Directives</div>\n    <table class="ui basic table">\n        <thead>\n        <tr>\n            <th>cg-*</th>\n            <th>preview</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr>\n            <td>cg-enter</td>\n            <td>\n                <div class=\'markdown content\' cg-highlight=\'<input name="name" ng-model="name" cg-enter="name = 123;">\'></div>\n                <br>\n                <div class="ui medium input">\n                    <input type="text" style="width: 500px;" placeholder="在此回车，input 值变为 123" name="name" ng-model="name" cg-enter="name = 123;">\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td>cg-ctrl-enter</td>\n            <td>\n                <div class=\'markdown content\' cg-highlight=\'<input name="name" ng-model="name" cg-ctrl-enter="name = 123;">\'></div>\n                <br>\n                <div class="ui medium input">\n                    <input type="text" style="width: 500px;" placeholder="在此Ctrl+回车，input 值变为 123" name="name" ng-model="name2" cg-ctrl-enter="name2 = 123;">\n                </div>\n            </td>\n        </tr>\n        <tr>\n            <td>cg-highlight</td>\n            <td>\n                <div class=\'markdown content\' cg-highlight=\'<div class="markdown content" cg-highlight>[put code here]</div>\'></div>\n                <br>\n                <div class=\'markdown content\' cg-highlight=\'<div class="markdown content" cg-highlight="[put code here]"></div>\'></div>\n                <br>\n                <div class=\'markdown content\' cg-highlight=\'<div class="markdown content" cg-highlight="[Expression]"></div>\'></div>\n                <br>\n                <div class=\'markdown content\' cg-highlight>var sayHello = function(){\n    alert("Hello Coding.Net!");\n}</div>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n</div>\n'),a.put("coding/ui/avatar.html",'<div class="ui header h1">Avatar</div>\n<table class="ui basic table">\n    <thead>\n    <tr>\n        <th>Size</th>\n        <th ng-repeat="size in avatar_sizes"\n            ng-init="is_default_size = default_avatar_size == size;"\n            ng-class="{\'default-ui-style\': is_default_size}">\n            {{size}}px\n        </th>\n    </tr>\n    <tr>\n        <th>Class</th>\n        <th ng-repeat="size in avatar_sizes"\n            ng-init="is_default_size = default_avatar_size == size;"\n            ng-class="{\'default-ui-style\': is_default_size}">\n            ui image avatar{{size}}\n            <div ng-if="is_default_size">ui image avatar</div>\n        </th>\n    </tr>\n    </thead>\n    <tbody>\n    <tr>\n        <td>Preview</td>\n        <td ng-repeat="size in avatar_sizes"\n            ng-init="is_default_size = default_avatar_size == size;"\n            ng-class="{\'default-ui-style\': is_default_size}"\n            style="text-align: center;">\n            <img src="https://dn-coding-net-production-static.qbox.me/static/d2ab4f6de747ad169160d3caaf82132e.png" class="ui image avatar{{size}}"/>\n        </td>\n    </tr>\n    </tbody>\n</table>'),a.put("coding/ui/button.html",'<div class="ui header h1">Buttons</div>\n<table class="ui basic table" ng-init="button_words = {};">\n    <thead>\n        <tr>\n            <th>Color</th>\n            <th ng-repeat="size in sizes"\n                ng-class="{\'default-ui-style\': size == \'default\'}">\n                {{size}}\n            </th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr ng-repeat="color in colors" ng-init="button_words[color] = {};">\n            <td>{{color}}</td>\n            <td ng-repeat="size in sizes"\n                ng-class="{\'default-ui-style\': size == \'default\'}" ng-init="button_words[color][size]=\'按钮\';">\n                <a class="ui {{size}} {{color}} button" ng-click="button_words[color][size] = button_words[color][size] == \'Button\' ? \'按钮\' : \'Button\'">{{button_words[color][size]}}</a><br><br>\n                ui {{size}} {{color}} button\n            </td>\n        </tr>\n    </tbody>\n</table>'),a.put("coding/ui/coding-ui.html",'<style type="text/css">\n    .default-ui-style{background-color:#EEE!important;}\n</style>\n<div class="coding-ui coding" style="margin:50px;">\n    <div style="margin-bottom:20px;" ng-if="region!=\'home\'">\n        <a href="/ui"><i class="left icon"></i>BACK</a>\n    </div>\n    <div ng-include="\'coding/ui/\'+region+\'.html\'"></div>\n</div>\n'),a.put("coding/ui/flag.html",'<div class="ui header h1">Icons</div>\n<table class="ui basic table">\n    <thead>\n    <tr>\n        <th>\n            flag\n        </th>\n        <th>Country</th>\n        <th>Country Code</th>\n        <th>ISO Code</th>\n    </tr>\n    </thead>\n    <tbody>\n    <tr ng-repeat="flag in flags">\n        <td>\n            <i class="{{flag.iso_code}} flag"></i>\n        </td>\n        <td>\n            {{flag.country}}\n        </td>\n        <td>\n            {{flag.country_code}}\n        </td>\n        <td>\n            {{flag.iso_code}}\n        </td>\n    </tr>\n    </tbody>\n</table>\n'),a.put("coding/ui/home.html",'<div class="ui header h1">Coding UI Modules</div>\n<table class="ui basic table">\n    <thead>\n        <tr>\n            <th>Module</th>\n            <th>Preview</th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr ng-repeat="module in modules" ng-if="module!=\'home\'" ng-switch="module">\n            <td>\n                <a ng-href="ui/{{module}}">{{module}}</a>\n            </td>\n            <td ng-switch-when="link">\n                <a ng-href="ui/{{module}}">This is a link!</a><br/>\n                <a ng-href="ui/{{module}}" class="gray">This is a GRAY link!</a>\n                <a ng-href="ui/{{module}}" class="red">This is a RED link!</a>\n            </td>\n            <td ng-switch-when="button">\n                <a class="ui mini dark gray button">Mini Button</a>\n                <a class="ui blue button">Blue Button</a>\n                <a class="ui red medium button">Red Medium Button</a>\n            </td>\n            <td ng-switch-when="avatar">\n                <img class="ui image avatar32" src="https://dn-coding-net-production-static.qbox.me/static/d2ab4f6de747ad169160d3caaf82132e.png"/>\n                <img class="ui image avatar48" src="https://dn-coding-net-production-static.qbox.me/static/d2ab4f6de747ad169160d3caaf82132e.png"/>\n                <img class="ui image avatar64" src="https://dn-coding-net-production-static.qbox.me/static/d2ab4f6de747ad169160d3caaf82132e.png"/>\n            </td>\n            <td ng-switch-when="loadMore">\n                <a class="right more" ng-href="ui/{{module}}">查看所有</a><br>\n                <a class="right center more" ng-href="ui/{{module}}">查看所有（center）</a><br>\n                <a class="down more" ng-href="ui/{{module}}">显示更多</a><br>\n                <a class="down center more" ng-href="ui/{{module}}">显示更多（center）</a><br>\n                <a class="up more" ng-href="ui/{{module}}">收起</a>\n                <a class="up center more" ng-href="ui/{{module}}">收起(center)</a>\n                <div class="empty list"><i class="loading icon"></i>正在加载数据(left)...</div>\n                <div class="center empty list"><i class="loading icon"></i>正在加载数据(center)...</div>\n            </td>\n            <td ng-switch-when="input">\n                <div class="ui input">\n                    <input type="text"/>\n                    <a class="ui blue button">提交</a>\n                </div><br/><br/>\n                <div class="ui action input">\n                    <input type="text"/>\n                    <a class="ui blue button">提交</a>\n                </div><br/>\n                <div class="ui icon input">\n                    <input type="text"/>\n                    <i class="add icon"></i>\n                </div>\n            </td>\n            <td ng-switch-when="util">\n                floated, aligned, clearfix, display(block, inline-block, inline)\n            </td>\n            <td ng-switch-when="icon">\n                <i class="coding monkey icon"></i>\n                <i class="coding logo icon"></i>\n                <i class="coding logo-v icon"></i>\n                <i class="coding bubble icon"></i>\n                <i class="coding project icon"></i>\n                <i class="coding fork icon"></i>\n            </td>\n            <td ng-switch-when="flag">\n                <i class="cn flag"></i>\n                <i class="ae flag"></i>\n                <i class="france flag"></i>\n                <i class="myanmar flag"></i>\n            </td>\n        </tr>\n    </tbody>\n</table>\n'),a.put("coding/ui/icon.html",'<div class="ui header h1">Icons</div>\n<table class="ui basic table">\n    <thead>\n    <tr>\n        <th>\n            Preview\n        </th>\n        <th>Class</th>\n    </tr>\n    </thead>\n    <tbody>\n    <tr ng-repeat="icon in icons">\n        <td>\n            <i class="coding icon {{icon}}"></i> {{icon}}\n        </td>\n        <td>\n            .coding.icon.{{icon}}\n        </td>\n    </tr>\n    </tbody>\n</table>\n<div class="ui header h1">Activity Icons</div>\n<table class="ui basic table">\n    <thead>\n    <tr>\n        <th>Activity Name</th>\n        <th>\n            Preview\n        </th>\n    </tr>\n    </thead>\n    <tbody>\n    <tr ng-repeat="activity in activity_icons">\n        <td>\n            {{activity.name}}\n        </td>\n        <td>\n            <span ng-repeat="icon in activity.icons">\n                <i class="icon {{icon}}"></i> {{icon}} <span ng-if="!$last" style="margin: 0 10px;"> | </span>\n            </span>\n        </td>\n    </tr>\n    </tbody>\n</table>\n'),a.put("coding/ui/input.html",'<div class="ui header h1">Buttons</div>\n<table class="ui basic table" ng-init="button_words = {};">\n    <tbody ng-init="color=\'green\';">\n    <tr>\n        <td colspan="4">\n            <strong>ui input:</strong>\n        </td>\n    </tr>\n    <tr ng-repeat="size in sizes" ng-class="{\'default-ui-style\': size == \'default\'}" >\n        <td>{{size}}</td>\n        <td ng-init="button_words[size]=\'按钮\';">\n            <div class="ui {{size}} input" style="float: right;">\n                <input type="text"/>\n            </div>\n        </td>\n        <td>\n            <a class="ui {{size}} {{color}} button" ng-click="button_words[size] = button_words[size] == \'Button\' ? \'按钮\' : \'Button\'">{{button_words[size]}}</a>\n        </td>\n        <td>\n            ui {{size}} input\n        </td>\n    </tr>\n    <tr>\n        <td colspan="4">\n            <strong>ui action input:</strong>\n        </td>\n    </tr>\n    <tr ng-repeat="size in sizes" ng-class="{\'default-ui-style\': size == \'default\'}">\n        <td>{{size}}</td>\n        <td ng-init="button_words[size]=\'按钮\';">\n            <div class="ui action {{size}} input">\n                <input type="text" />\n                <a class="ui {{size}} {{color}} button" ng-click="button_words[size] = button_words[size] == \'Button\' ? \'按钮\' : \'Button\'">{{button_words[size]}}</a>\n            </div>\n        </td>\n        <td></td>\n        <td>\n            ui action {{size}} input （with button）\n        </td>\n    </tr>\n    <tr>\n        <td colspan="4">\n            <strong>ui icon input:</strong>\n        </td>\n    </tr>\n    <tr ng-repeat="size in sizes" ng-class="{\'default-ui-style\': size == \'default\'}">\n        <td>{{size}}</td>\n        <td ng-init="button_words[size]=\'按钮\';">\n            <div class="ui icon {{size}} input">\n                <input type="text" />\n                <i class="blue right icon"></i>\n            </div>\n        </td>\n        <td></td>\n        <td>\n            ui icon {{size}} input （with button）\n        </td>\n    </tr>\n    </tbody>\n</table>'),a.put("coding/ui/util.html",'<div class="ui header h1">Utils</div>\n<table class="ui basic table">\n    <tbody>\n    <tr>\n        <td>floated</td>\n        <td style="background: #CCC">\n            <span class="coding floated left">floated left</span>\n        </td>\n        <td style="background: #EEE">\n            <span class="coding floated right">floated right</span>\n        </td>\n        <td></td>\n    </tr>\n    <tr>\n        <td>aligned</td>\n        <td style="background: #CCC" class="coding aligned left">\n            aligned left\n        </td>\n        <td style="background: #DDD" class="coding aligned center">\n            aligned center\n        </td>\n        <td style="background: #EEE" class="coding aligned right">\n            aligned right\n        </td>\n    </tr>\n    <tr>\n        <td>display</td>\n        <td style="background: #CCC">\n            <a class="coding aligned center block" href="/ui">This a BLOCK link,click me but the words!</a>\n        </td>\n        <td style="background: #DDD" class="coding aligned left">\n            <a class="coding inline" href="/ui">This a INLINE link, and aligned left!</a>\n        </td>\n        <td style="background: #EEE" class="coding aligned right">\n            <a class="coding inline block" href="/ui">This a INLINE BLOCK link, and aligned right!</a>\n        </td>\n    </tr>\n    <tr>\n        <td>clearfix</td>\n        <td>\n            <div class="clearfix">\n                <img class="coding floated left ui image avatar32" src="https://dn-coding-net-production-static.qbox.me/static/d2ab4f6de747ad169160d3caaf82132e.png"/>\n                <img class="coding floated left ui image avatar42" src="https://dn-coding-net-production-static.qbox.me/static/d2ab4f6de747ad169160d3caaf82132e.png"/>\n                <img class="coding floated left ui image avatar48" src="https://dn-coding-net-production-static.qbox.me/static/d2ab4f6de747ad169160d3caaf82132e.png"/>\n                <img class="coding floated left ui image avatar56" src="https://dn-coding-net-production-static.qbox.me/static/d2ab4f6de747ad169160d3caaf82132e.png"/>\n                <img class="coding floated left ui image avatar64" src="https://dn-coding-net-production-static.qbox.me/static/d2ab4f6de747ad169160d3caaf82132e.png"/>\n            </div>\n        </td>\n        <td></td>\n        <td></td>\n    </tr>\n    </tbody>\n</table>'),a.put("marketing/apps/coding-apps.html",'<style>\n    html, body {\n        height: inherit !important;\n        overflow: inherit;\n    }\n</style>\n<div id="coding-app">\n    <section id="app-intro">\n        <div class="app-container">\n            <div class="intro-right">\n                <div class="intro-desc">\n                    <h1>体验云端开发之美</h1>\n                    <p>Coding App 实现 Coding 网站绝大部分功能，包括项目管理、消息、冒泡等功能，支持多成员协作，同时集成了代码仓库的操作与状态。轻简而强大的效率工具，使用 Coding App 配合 Coding 网站进行日常协作，让云端开发更随时随地。</p>\n                </div>\n                <div class="intro-download">\n                    <div class="download-qrcode">\n                        <img src="https://dn-coding-net-production-static.qbox.me/static/7dc2c2ae0617121e6c2256f3d7c65c9d.png">\n                    </div>\n                    <div class="download-buttons">\n                        <a class="app-btn app-btn-iphone" href="https://itunes.apple.com/cn/app/id923676989" target="_blank"><i class="icon apple"></i>iPhone</a>\n                        <a class="app-btn app-btn-android" href="/app/android" target="_self"><i class="icon android"></i>Android</a>\n                        <a class="app-btn app-btn-ipad" href="https://itunes.apple.com/cn/app/id1013704594" target="_blank"><i class="icon tablet"></i>iPad</a>\n                    </div>\n                </div>\n            </div>\n            <div class="intro-left">\n                <img src="https://dn-coding-net-production-static.qbox.me/static/66e4d736af94dbad1cdfc07921fab374.png">\n            </div>\n            <a class="intro-next" ng-click="goto(\'app-feature\')" >\n                <i class="icon angle down"></i>\n            </a>\n        </div>\n    </section>\n    <section id="app-feature">\n        <div class="app-container">\n            <div class="feature-desc">\n                <h2>最好用的移动式项目管理工具</h2>\n                <p>创建项目、任务指派、实时消息以及强大的代码托管功能，真正实现 Coding anytime everywhere</p>\n            </div>\n            <div class="feature-detail">\n                <div class="feature row">\n                    <div class="feature item">\n                        <img src="https://dn-coding-net-production-static.qbox.me/static/755477635edea82f6b0bb026c9783d07.png">\n                        <h3>精彩项目</h3>\n                        <p>在 Coding 你可以创建任何项目</p>\n                    </div>\n                    <div class="feature item">\n                        <img src="https://dn-coding-net-production-static.qbox.me/static/cd839ca7ef486f232c787b7118512a6c.png">\n                        <h3>任务管理</h3>\n                        <p>详细任务动态，追踪任务进度</p>\n                    </div>\n                    <div class="feature item">\n                        <img src="https://dn-coding-net-production-static.qbox.me/static/f8826f57fd01a5600f595c692304fbc9.png">\n                        <h3>项目文件</h3>\n                        <p>云端共享，支持所有文件格式</p>\n                    </div>\n\n                    <div class="feature item">\n                        <img src="https://dn-coding-net-production-static.qbox.me/static/6ef28fb73be887255af3310727cbefac.png">\n                        <h3>代码托管</h3>\n                        <p>查看代码，合并请求一步到位</p>\n                    </div>\n                    <div class="feature item">\n                        <img src="https://dn-coding-net-production-static.qbox.me/static/c1c020c3631fc4713b850e34c48504e7.png">\n                        <h3>实时消息</h3>\n                        <p>团队协作，更精准快捷</p>\n                    </div>\n                    <div class="feature item">\n                        <img src="https://dn-coding-net-production-static.qbox.me/static/24b6aab1c0c3b38e2d146ce46324cd3b.png">\n                        <h3>趣味冒泡</h3>\n                        <p>点赞互动，分享技术开发乐趣</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n    <section id="app-opensource">\n        <div class="app-container">\n            <div class="opensource-desc">\n                <h2>Coding 客户端源码开放</h2>\n                <p>你可以专注于 UI 和交互，去写一个牛闪闪的 Coding 客户端吧！</p>\n            </div>\n            <div class="opensource-down">\n                <div>\n                    <a class="app-btn" href="https://coding.net/u/coding/p/Coding-iOS/git" target="_blank" rel="noopener noreferrer"><i class="icon apple"></i>iPhone 源码下载</a>\n                </div>\n                <div>\n                    <a class="app-btn" href="https://coding.net/u/coding/p/Coding-Android/git" target="_blank" rel="noopener noreferrer"><i class="icon android"></i>Android 源码下载</a>\n                    <a class="app-btn" href="https://coding.net/u/coding/p/Coding-iPad/git" target="_blank" rel="noopener noreferrer"><i class="icon tablet"></i>iPad 源码下载</a>\n                </div>\n                <div>\n\n                </div>\n            </div>\n        </div>\n    </section>\n</div>\n<style>\n    #footer {\n        padding: 20px 0px !important;\n    }\n</style>\n<div ng-include="\'app/layout/global_footer/global_footer.html\'"></div>\n'),a.put("project/members/project-members-add-member.html",'<style type="text/css">\n    #add_member_modal > .content{\n        padding: 0;\n    }\n\n    #add-members .wrapper{\n        position: relative;\n    }\n\n    #add-members .search-region{\n        width: 220px;\n        padding: 20px 20px 0 20px;\n        border-right: 1px solid #CCC;\n    }\n\n    #add-members .select-region{\n        padding: 20px 0 0 20px;\n    }\n\n    #add-members .selected-region{\n        padding: 15px 10px 0 20px;\n        border-top: 1px solid #CCC;\n    }\n\n    #add-members .selected-region .label i.remove.icon{\n        cursor: pointer;\n    }\n\n    #add-members .member-folder{\n        margin: 15px 0 0 0;\n        height: 220px;\n        overflow-y: auto;\n        overflow-x: hidden;\n    }\n\n    #add-members .vertical.menu  > .item{\n        -webkit-border-radius: 0px;\n        -moz-border-radius: 0px;\n        border-radius: 0px;\n        font-size: 14px;\n        height: 36px!important;\n        line-height: 24px;\n        display: block;\n        padding: 5px;\n        margin-bottom: 0;\n    }\n\n    #add-members .vertical.menu  > .item.active{\n        background-color: rgba(0, 0, 0, 0.03);\n    }\n\n    #add-members .vertical.menu > .item i.icon{\n        float: none;\n        margin: 0 .45em 0 0.25em\n    }\n\n    #add-members .selected-region ul{\n        list-style: none;\n        margin: 0;\n        padding: 0;\n    }\n\n    #add-members .selected-region ul li:first-child{\n        font-size: 14px;\n        line-height: 16px;\n        margin-bottom: 10px;\n    }\n\n    #add-members .selected-region ul li{\n        float: left;\n        font-size: 12px;\n        margin-bottom: 10px;\n        text-transform: none;\n    }\n\n    #add-members .select-nothing{\n        text-align: center;\n    }\n    #add-members .select-nothing span.words{\n        font-size: 16px;\n        color: #999;\n    }\n\n    #add-members .select-nothing .invite-button{\n        margin-top: 20px;;\n    }\n\n    #add-members .select-users{\n        height: 250px;\n        position: relative;\n        overflow-y: auto;\n        overflow-x: hidden;\n    }\n\n    #add-members .select-users ul{\n        list-style: none;\n        margin: 0;\n        padding: 0;\n        position: relative;\n    }\n\n    #add-members .select-users ul li{\n        float: left;\n        display: inline-block;\n        width: 140px;\n        height: 40px;\n        border: 1px dashed #CCC;\n        padding: 5px;\n        position: relative;\n        line-height: 40px;\n        font-size: 14px;\n        background: #FFF;\n        margin: 0 10px 10px 0;\n        cursor: pointer;\n    }\n\n    #add-members .select-users ul li.is-member{\n        cursor: not-allowed;\n    }\n\n    #add-members .select-users ul li img{\n        position: absolute;\n        left: 10px;\n        top: 8px;\n    }\n\n    #add-members .select-users ul li span{\n        padding-left: 50px;\n    }\n\n    #add-members .select-users ul li .label{\n        line-height: normal;\n        font-size: 12px;\n    }\n\n    #add_member_modal .actions .max-member{\n        float: left;\n        height: 30px;\n        line-height: 30px;\n        color: #666;\n        font-size: 14px;\n    }\n\n</style>\n<div class="ui tiny modal" id="add_member_modal">\n    <i class="close icon"></i>\n    <div class="header">添加成员</div>\n    <div class="content">\n        <div id="add-members">\n            <div class="wrapper">\n                <table width="100%">\n                    <tr>\n                        <td class="search-region">\n                            <div class="ui medium fluid icon input">\n                                <input type="text" ng-model="key" cg-timeout-input="loadFriend(key);"\n                                       placeholder="邮箱/手机/昵称/个性后缀"/>\n                                <i class="search icon"></i>\n                            </div>\n                            <div class="member-folder">\n                                <div class="ui secondary vertical menu active">\n                                    <a class="item" href="javascript:void(0);"\n                                       ng-class="{active: selectMenuIs(\'friend\')}"\n                                       ng-click="loadFriends();">\n                                        <i class="unhide icon"></i>我关注的人\n                                    </a>\n                                    <a class="item" href="javascript:void(0);"\n                                       ng-class="{active: selectMenuIs(\'follower\')}"\n                                       ng-click="loadFollowers();">\n                                        <i class="heart icon"></i>粉丝\n                                    </a>\n                                    <a class="item ellipsis" href="javascript:void(0);"\n                                       ng-repeat="project in projects"\n                                       ng-class="{active: selectMenuIs(\'member\', project.id)}"\n                                       ng-click="loadProjectMembers(project.id);">\n                                        <img class="ui image avatar24"\n                                             ng-src="{{::project.icon}}"\n                                             alt="{{::project.name}}"/>\n                                        <span>{{::project.name}}</span>\n                                    </a>\n                                    <a class="item" href="javascript:void(0);"\n                                       ng-if="loading_projects">\n                                        <i class="loading icon"></i>正在加载项目列表...\n                                    </a>\n                                </div>\n                            </div>\n                        </td>\n                        <td class="select-region">\n                            <div class="select-nothing" ng-if="friends.length == 0 && !loading">\n                                <span class="words" ng-if="member_size > 0">\n                                    <span ng-if="loaded">\n                                        <i class="frown icon"></i>\n                                        没有找到符合条件的好友\n                                        ，马上邀请好友加入项目？\n                                    </span>\n                                    <span ng-if="!loaded">\n                                        <i class="coffee icon"></i>\n                                        我的项目成员不在 Coding，马上邀请好友加入？\n                                    </span>\n                                </span>\n                                <span ng-if="member_size<=0">\n                                        <i class="coffee icon"></i>\n                                        <span ng-bind="max_member_warning_info"></span>\n                                </span>\n                                <div class="invite-button">\n                                    <button class="ui default green button"\n                                            ng-if="member_size > 0"\n                                            ng-click="inviteFriend();"\n                                            href="javascript:void(0);">马上邀请好友</button>\n                                    <a class="ui default green button"\n                                       ng-if="member_size <= 0"\n                                       ng-href="{{PROJECT.project_path}}/setting/summary/upgrade">马上升级项目</a>\n                                </div>\n                            </div>\n                            <div class="select-nothing" ng-if="loading">\n                                <span class="words">\n                                    <i class="loading icon"></i>正在搜索好友...\n                                </span>\n                            </div>\n                            <div class="select-users" ng-if="!loading && friends.length > 0">\n                                <ul class="clearfix">\n                                    <li class="ellipsis" ng-repeat="friend in friends"\n                                        ng-click="selectFriend(friend);"\n                                        ng-class="::{\'is-member\': friend.is_member}"\n                                        title="{{::selectUserTitle(friend)}}">\n                                        <div class="ui corner label"\n                                             ng-class="{\'green\': friend.selected}"\n                                             ng-show="friend.is_member || friend.selected">\n                                            <i class="checkmark icon"></i>\n                                        </div>\n                                        <img class="ui image avatar32" ng-src="{{::friend.avatar}}"/>\n                                        <span>{{::friend.name}}</span>\n                                    </li>\n                                </ul>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td class="selected-region" colspan="2">\n                            <ul class="ui circular labels clearfix">\n                                <li>已选成员： </li>\n                                <li class="ui label" ng-if="selected_users.length === 0">尚未选择任何成员</li>\n                                <li class="ui green label" ng-repeat="friend in selected_users">\n                                    <span>{{::friend.name}}</span>\n                                    <i class="remove icon" title="取消选定" ng-click="removeSelected(friend, $event);"></i>\n                                </li>\n                            </ul>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n        </div>\n    </div>\n    <div class="actions">\n        <div class="max-member">\n            <span ng-if="member_size>0">你还可以添加 <span style="color:#32be77;" ng-bind="member_size || 0"></span> 个项目成员</span>\n            <span ng-if="member_size<=0" style="color: #A00;opacity: 0.8;">\n                {{max_member_warning_info}}\n                <a ng-href="{{PROJECT.project_path}}/setting/summary/upgrade">马上升级项目！</a>\n            </span>\n        </div>\n        <div class="ui cancel button">取消</div>\n        <div class="ui dark gray ok button">确认</div>\n    </div>\n</div>\n'),a.put("project/members/project-members.html","<div ng-class=\"{'public-project-view': PROJECT.is_public,'project-member-page':true}\"\n     ng-style=\"{'display':PROJECT.is_public?'block':'initial'}\">\n    <div ng-if=\"PROJECT.is_public\" ng-include=\"'app/git/public_view/inner_menu.html'\"></div>\n"+'    <div class="ui secondary vertical fixed menu active project-members" id="inner-menu">\n        <header class="header item">\n            <i class="coding team icon" ng-if="PROJECT.isTeam" style="float: none; margin: 0;" data-position="top center" data-variation="inverted" data-html="团队项目" cg-popup></i>\n            项目成员 ({{project_members_count}})\n            <a id="add-project-member" href="javascript:void(0);"\n               ng-if="(PROJECT | isRole:ADMIN)"\n               ng-click="addMember();">\n                <i class="add icon"></i>\n            </a>\n        </header>\n        <div class="search item">\n            <div class="ui icon input">\n                <input type="text" class="search-member" placeholder="Search..." ng-model="searchMember">\n                <i class="search icon" style="padding-top: 6px; width: 30px;"></i>\n            </div>\n        </div>\n        <div class="member-item item clearfix" ng-class="{active:member.user.global_key==region}"\n             ng-repeat="member in members | filter:searchMember" ng-click="showMemberActivity(member);">\n            <div class="member-item-wrapper">\n                <div class="info">\n                    <div class="avatar">\n                        <img class="ui image avatar36" ng-src="{{member.user.avatar}}">\n                    </div>\n                    <div class="wrapper">\n                        <div class="title">\n                            <span>{{member.user.name}}</span>\n                        </div>\n                        <div class="alias" ng-if="member.alias || member.team_alias">\n                            <span>{{member.alias || member.team_alias}}</span>\n                        </div>\n                    </div>\n                </div>\n                <div class="right">\n                    <div class="action">\n                        <i class="user icon" ng-if="(member.type | isRoleIn:project_member_admin)"\n                           ng-class="{\'owner\':member.type == OWNER,\'admin\':member.type == ADMIN}"></i>\n                        <i class="project-member-icon-code-deny visitor"\n                           ng-if="member.type | isRoleIn:project_member_no_code"></i>\n                        <i class="red remove icon"\n                           ng-if="canRemove(member)"\n                           ng-click="kickout($event, member);"></i>\n                        <i class="remove icon unvisible" ng-if="!canRemove(member)"></i>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <a class="scroll-holder">\n        </a>\n    </div>\n    <div class="container" id="project-member">\n        <div class="member info clearfix" ng-if="current_member">\n            <div class="avatar">\n                <a class="gray" href="{{current_member.user.path}}">\n                    <img class="ui image avatar96" ng-src="{{current_member.user.lavatar}}"/>\n                </a>\n            </div>\n            <div class="wrapper">\n                <div class="title">\n                    <a class="gray" href="{{current_member.user.path}}" class="name">{{current_member.user.name}}</a>\n                    <!--<a href="{{current_member.user.path}}" class="email">{{current_member.user.email}}</a>-->\n                    <project-member-role-select project="PROJECT" current-member="current_member"\n                                                load-members="loadMembers()"></project-member-role-select>\n                     <span class="alias-setting" ng-if="PROJECT | isRole:ADMIN">\n                        <span class="divider"></span>\n                        <a ng-show="!alias_editing" class="alias-edit gray" ng-click="showSaveAlias()"\n                           title="编辑此成员备注名称">\n                            <span ng-if="current_member.alias">{{current_member.alias}}</span>\n                            <span ng-if="!current_member.alias">添加备注</span>\n                            <i class="icon edit"></i>\n                        </a>\n                        <input ng-show="alias_editing" class="alias-input" ng-model="current_member.alias"\n                               cg-enter="updateAlias()" ng-blur="updateAlias()"/>\n                    </span>\n                </div>\n                <div class="time">\n                    加入时间：\n                    <span cg-friendly-time="current_member.created_at" cg-friendly-time-format="YYYY-MM-DD"></span>\n                </div>\n                <div class="action" ng-if="USER.id != current_member.user_id">\n                    <div class="ui down small green button" ng-if="!current_relationship.relation"\n                         ng-click="follow(current_member.user);">\n                        <i class="add icon"></i>\n                        马上关注\n                    </div>\n                    <!--<div class="ui small button borderless" ng-if="current_relationship.relation==2">相互关注</div>-->\n                    <div class="ui down small gray button" ng-if="current_relationship.relation>0"\n                         ng-click="unfollow(current_member.user);">\n                        <i class="minus icon"></i>\n                        取消关注\n                    </div>\n                    <div class="ui down black small button" ng-click="showSendMsgDialog(current_member.user)">\n                        给TA私信\n                    </div>\n                </div>\n                <div class="action" ng-if="USER.id == current_member.user_id">\n                    <div class="ui down red small button"\n                         ng-if="PROJECT.owner_id != USER.id && USER.id == current_member.user_id"\n                         ng-click="quit(current_member);">\n                        <i class="minus icon"></i>\n                        退出项目\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="member activities ui basic segment" id="project-activities">\n            <div class="wrapper" cg-timeline="project_activities"\n                 show-separator="false">\n            </div>\n        </div>\n        <div class="empty center list">\n        <span ng-if="project_activity_loading">\n            <i class="loading icon"></i>正在加载成员项目动态...\n        </span>\n        <span ng-if="project_activity_loaded && project_activities.length == 0">\n            <i class="coffee icon"></i>该成员无项目动态...\n        </span>\n            <a class="center down more" href="javascript:void(0);"\n               ng-click="loadMemberProjectActivity(current_member.user_id, project_activity_last_id);"\n               ng-if="project_activity_last_id>0 && !project_activity_loading">显示更多动态</a>\n        </div>\n    </div>\n</div>\n'),
a.put("project/project.html",'<style type="text/css">\n    #project-home .dividing.header a{float:right;font-size:16px;color:#000;}\n    #project-home .dividing.header a i.icon{font-size:14px;}\n\n    #project-home .right.more{margin:15px 0 0 12px;}\n\n    #project-home .unread-tips{\n        padding: 5px 12px;\n        font-size: 13px;\n        border-radius: 5px;\n        background: #F6F3D5;\n        color:#000;\n        text-align: center;\n    }\n\n    #project-home > .column > .wrapper{\n        background: #FFF;\n        padding: 20px ;\n        margin-top: 0px;\n        margin-bottom: 20px;\n        border-radius: 3px;\n    }\n\n    #project-home > .five.column {\n        padding-left:0;\n        padding-right:0;\n    }\n</style>\n<section>\n    <div class="ui stackable grid" id="project-home">\n        <div class="ten wide column">\n            <div class="wrapper">\n                <div class="ui dividing header">项目动态</div>\n\n                <div class="ui small tabular menu activities-menu">\n                    <a class="item" ng-click="changeActivitiesMode(\'all\');" ng-class="{active: activities_mode == \'all\'}">\n                        所有\n                    </a>\n                    <a class="item" ng-click="changeActivitiesMode(\'task\');" ng-class="{active: activities_mode ==\'task\'}">\n                        任务\n                    </a>\n                    <a class="item" ng-click="changeActivitiesMode(\'code\');" ng-class="{active: activities_mode ==\'code\'}">\n                        代码\n                    </a>\n                    <a class="item" ng-click="changeActivitiesMode(\'file\');" ng-class="{active: activities_mode ==\'file\'}">\n                        文件\n                    </a>\n                    <a class="item" ng-click="changeActivitiesMode(\'topic\');" ng-class="{active: activities_mode ==\'topic\'}">\n                        讨论\n                    </a>\n                    <a class="item" ng-click="changeActivitiesMode(\'other\');" ng-class="{active: activities_mode ==\'other\'}">\n                        其他动态\n                    </a>\n                </div>\n\n                <div class="unread-tips"\n                     ng-if="showUnreadMsg()">\n                     自您上次访问共有{{PROJECT.un_read_activities_count}}条更新\n                </div>\n\n                <div class="ui basic segment" id="project-activities">\n                    <div class="wrapper"\n                         cg-timeline="project_activities"\n                         activity-mode="project_activity_mode"\n                         show-separator="showUnreadMsg()">\n                    </div>\n                </div>\n\n                <div class="center empty list" ng-if="activity_loading">\n                    <i class="loading icon"></i>正在加载项目动态...\n                </div>\n\n                <div class="center empty list" ng-if="project_activity_emtpy && activity_loaded">\n                    当前分类没有任何动态\n                </div>\n\n                <a class="center down more" href="javascript:void(0);"\n                   ng-click="loadProjectActivity(project_last_id,activities_mode);"\n                   ng-if="project_last_id>0 && !activity_loading">\n                    显示更多动态\n                </a>\n                <div class="center empty list"\n                     ng-if="project_last_id == 0 && activity_loaded && !project_activity_emtpy">\n                    没有更多动态了～\n                </div>\n            </div>\n        </div>\n        <div class="six wide column">\n            <!--项目内冒泡-->\n            <div ng-if="!PROJECT.is_public" class="wrapper" ng-include="\'app/tweet/project_tweet.html\'"></div>\n        </div>\n    </div>\n</section>\n'),a.put("tagsearch/tagsearch.html",'<style>\n\n</style>\n<div class="container" id="search_tags">\n    <div class="content">\n        <div class="tag_content">\n            <div class="header">寻找志同道合的人....</div>\n            <div class="ui divider"></div>\n            <div class="tag" ng-repeat="tag in TAGs" ng-class="{my_tag: tag.my, selected_tag: tag.name == TAG}">\n                <a href="javascript:void(0)" ng-click="loadUserByTag(tag.name)"><span>{{tag.name}}</span></a>\n            </div>\n        </div>\n        <div class="result_content">\n            <div class="header"><span class="target_tag">{{TAG}}</span></div>\n            <div class="ui default dark gray button right_tip" ng-click="loadUserByTag(TAG)">\n                <span><i class="refresh icon white"></i>换一组</span>\n            </div>\n            <div class="ui divider"></div>\n            <div class="empty center list" ng-if="user_loading">\n                <i class="loading icon"></i>正在加载数据...\n            </div>\n            <div class="empty center list" ng-if="users.length == 0 && !user_loading">\n                尚未有任何人标记为“<span>{{TAG}}</span>”\n            </div>\n            <div class="result_user" ng-repeat="user in users" ng-if="users.length > 0 && !user_loading">\n                <div class="avatar">\n                    <a ng-href="{{::user.path}}">\n                        <img class="ui circular image avatar64" ng-src="{{::user.avatar }}"/>\n                    </a>\n                </div>\n                <div class="info">\n                    <a ng-href="{{::user.path}}" title="{{::user.name}}"><span>{{user.name}}</span></a>\n                    <span class="join-in-at">\n                        <i class="time icon" style="margin: 0px 0px 0px 5px"></i>\n                        <span class="created-time" cg-friendly-time="user.created_at"></span>\n                        加入 Coding\n                    </span>\n                </div>\n                <div class="ui small white button right_tip"\n                      ng-if="!user.followed && USER && USER.global_key != user.global_key && !user.following && !following"\n                      ng-click="follow(user)">\n                    <span>+关注</span>\n                </div>\n                <div class="ui small white button right_tip"\n                     ng-if="!user.followed && USER && USER.global_key != user.global_key && !user.following && following">\n                    <span>+关注</span>\n                </div>\n                <div class="ui small white button right_tip"\n                     ng-if="!user.followed && USER && USER.global_key != user.global_key && user.following" >\n                    <i class="icon" ng-class="{loading: user.following}" click="return false;"></i>\n                </div>\n                <span ng-if="user.followed && user.follow && USER" class="right_tip">\n                    <i class="green exchange icon"></i>相互关注\n                </span>\n                <span ng-if="user.followed && !user.follow && USER" class="right_tip">\n                    <i class="blue checkmark icon"></i>已关注\n                </span>\n                <div class="user_tag">\n                    <div class="tag" ng-repeat="tag in user.taggings track by $index" ng-class="{selected_tag: tag == TAG}">\n                        <a href="javascript:void(0)" ng-click="loadUserByTag(tag, 1)"><span>{{tag}}</span></a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("resource/resource.html",'<div id="shareSection">\n    <div class="empty center list" ng-if="showError">\n        Sorry，您访问的资源不存在或者您无权访问\n    </div>\n    <div ng-if="!loaded && !showError" class="empty center list">\n        <i class="icon loading"></i>正在加载...\n    </div>\n    <div ng-if="loaded && !showError">\n        <ng-include src="\'resource/tpl/\' + resourceType + \'.html\'"></ng-include>\n    </div>\n</div>\n'),a.put("resource/tpl/attachment.html",'<style>\n    #pdf-preview {\n        display: inline-block;\n        position: relative\n    }\n\n    #pdf-preview .resize {\n        display: none;\n        position: absolute;\n        top: 5px;\n        right: 5px;\n        width: 50px;\n        height: 50px;\n        font-size: 25px;\n        text-align: center;\n        line-height: 55px;\n        cursor: pointer;\n        border-radius: 3px;\n        background: rgba(0,0,0,0.1);\n        color: #FFF;\n        z-index: 3;\n    }\n    #pdf-preview:hover .resize { display: inline; }\n\n    #pdf-preview .prev,\n    #pdf-preview .next {\n        position: absolute;\n        width: 50%;\n        height: 100%;\n        z-index: 2;\n        font-size: 50px;\n    }\n    #pdf-preview .prev { left: 0; }\n    #pdf-preview .next { right: 0; }\n    #pdf-preview .prev > i.icon { left: 20px; }\n    #pdf-preview .next > i.icon { right: 20px; }\n    #pdf-preview .button i.icon {\n        position: absolute;\n        top: 50%;\n        margin-top: -25px;\n        color: #FFF;\n    }\n    #pdf-preview .button:hover {\n        background: rgba(0,0,0,0.1);\n        cursor: pointer;\n    }\n\n    #pdf-preview .count {\n        border-radius: 3px;\n        position: absolute;\n        bottom: 5px;\n        left: 50%;\n        margin-left: -40px;\n        width: 100px;\n        font-size: 16px;\n        color: #FFF;\n        background: rgba(0,0,0,0.3);\n        text-align: center;\n    }\n</style>\n<div ng-controller="ShareAttachmentController">\n    <div class="file-header">\n        <div>{{file.name}}</div>\n    </div>\n    <div class="file-content">\n        <div ng-switch="file_type">\n            <!-- txt -->\n            <div ng-switch-when="txt">\n                <pre style="word-wrap: break-word; white-space: pre-wrap">{{content}}</pre>\n            </div>\n\n            <!-- markdown -->\n            <div ng-switch-when="md">\n                <div class="markdown content" clip-copy-code="pre" cg-highlight="markdown_preview" cg-page-scroll></div>\n            </div>\n\n            <!-- 图片 -->\n            <div ng-switch-when="image" class="coding aligned center" style="margin-top:20px; margin-bottom:20px;">\n                <img style="max-width: 820px;" id="preview-image" ng-src="{{imageUrl}}?width=1440&type=2" alt=""/>\n            </div>\n\n            <!-- 二进制文件 -->\n            <a ng-switch-when="binary" href="{{downloadUrl}}" target="_self" class="binary-content">\n                <i class="cloud download icon"></i>\n                <div class="binary-type" cg-file-icon-src cg-file-icon="typeIcon"></div>\n            </a>\n\n            <!-- pdf -->\n            <div ng-switch-when="pdf" class="coding aligned center">\n                <div id="pdf-preview" ng-class="{full: pdf_resize == \'full\'}">\n                    <div ng-click="togglePdfResize()"\n                        ng-if="!pdf_loading && pdf && screenfull_enabled">\n                        <i class="resize icon" ng-class="{full: pdf_resize == \'small\', small: pdf_resize == \'full\'}"></i>\n                    </div>\n                    <div class="prev button" title="上一页"\n                        ng-click="loadPdf(pdf_page-1);"\n                        ng-if="!pdf_loading && pdf && pdf_page>1">\n                        <i class="angle left icon"></i>\n                    </div>\n                    <div class="next button" title="下一页"\n                        ng-click="loadPdf(pdf_page+1);"\n                        ng-if="!pdf_loading && pdf && pdf_page<pdf.totalRow">\n                        <i class="angle right icon"></i>\n                    </div>\n                    <div class="count">\n                        <div ng-if="!pdf_loading && pdf">{{pdf_page}}/{{pdf.totalRow}}</div>\n                        <div ng-if="pdf_loading">\n                            <i class="loading icon"></i>加载中...\n                        </div>\n                    </div>\n                    <img style="display: block;max-width: 100%;margin:auto;"\n                        ng-style="{\'height\': pdf_fullscreen_height}"\n                        ng-if="pdf"\n                        ng-src="{{pdf.url}}"/>\n                </div>\n            </div>\n\n            <!-- office -->\n            <div ng-switch-when="office" style="overflow:hidden;">\n                <iframe ng-src="{{office_src}}" style="width:100%;height:700px;border:none;position:relative;margin-top:-80px"></iframe>\n            </div>\n        </div>\n        <div class="file-buttons">\n            <a class="button" ng-href="{{downloadUrl}}" target="_self"><i class="cloud download icon"></i></a>\n            <a class="button"\n               ng-mouseenter="showDetail = true"\n               ng-mouseleave="showDetail = false"\n               href="javascript:void(0);"><i class="info circle icon"></i></a>\n        </div>\n        <div ng-show="showDetail" ng-mouseenter="showDetail = true" ng-mouseleave="showDetail = false" class="file-detail empty list">\n            <div>文件信息</div>\n            <div class="title">文件类型</div><div class="content">{{file.fileType}}</div>\n            <div class="title">文件大小</div><div class="content">{{file.size | bytes}}</div>\n            <div class="title">创建时间</div><div class="content" cg-friendly-time="file.created_at"></div>\n            <div class="title">最近更新</div><div class="content" cg-friendly-time="file.updated_at"></div>\n            <div class="title">创建人</div><div class="content">{{file.owner.name}}</div>\n        </div>\n    </div>\n</div>\n'),a.put("resource/tpl/topic.html",'<style>\n    #project-topic-detail-bottom .topic-comments-header {\n        margin: 0;\n    }\n    .topic-container {\n        margin-top: 10px;\n    }\n    .topic-container .comment .vote-button {\n        cursor: default;\n    }\n    .topic-container .comment .vote-button:hover {\n        color: #666;\n        background: inherit;\n        border-color: #ddd;\n    }\n    .topic-container .comment .vote-button.voted:hover {\n        background: #5BA8FF;\n        border-color: #5BA8FF;\n        color: #fff;\n    }\n</style>\n<div ng-controller="ShareTopicController" class="topic-container">\n    <div id="project-topic-detail">\n        <div class="topic-title" ng-if="topic.owner">\n            <a class="avatar" ng-href="{{::topic.owner.path}}">\n                <img class="ui avatar42 image" ng-src="{{::topic.owner.avatar}}"/>\n            </a>\n\n            <h2 class="title" ng-bind-html="::topic.title"></h2>\n\n            <div class="toolbar">\n                <span class="mr10 owner">\n                    <a ng-href="{{::topic.owner.path}}">{{::topic.owner.name}}</a>\n                </span>\n\n                <span class="mr10 time">\n                    <i class="time icon"></i>\n                    <span cg-friendly-time="topic.created_at"></span>\n                </span>\n\n                <span class="mr10 comment">\n                    <i class="chat outline icon"></i>\n                    <span ng-bind="topic.child_count"></span>条回答\n                </span>\n            </div>\n        </div>\n\n        <div class="topic-content">\n            <div class="markdown content" clip-copy-code="pre" cg-highlight="topic.content" cg-page-scroll></div>\n            <div cg-gallery="topic.content"></div>\n            <div class="empty list" ng-if="detail_loading">\n                <i class="loading icon"></i>正在加载讨论内容...\n            </div>\n        </div>\n\n        <div ng-if="show_watcher" id="follower" class="topic-follow-header">\n            关注者 (<span ng-bind="watchers.length"></span>) :\n\n            <i id="topic-member-selector-down" class="icon add sign" style="margin-top: 4px;"></i>\n\n            <div ng-if="show_watcher"\n                 cg-member-selector\n                 cg-ms-selected="watchers"\n                 cg-ms-onselect="addWatcher(member)"\n                 cg-ms-oncancel="removeWatcher(member)"\n                 cg-ms-has-self="true"\n                 cg-ms-width="150"\n                 cg-ms-opener="\'#topic-member-selector-down\'"\n                 cg-ms-project="PROJECT"\n                 class="inline-mode small-avatar avatar-mode arrow-mode no-remove check-mode check-toggle-mode no-dropdown hover-remove"\n            ></div>\n        </div>\n    </div>\n\n    <div id="project-topic-detail-bottom">\n        <div class="topic-comments-header">\n            回答（<span ng-bind="topic.child_count"></span>）\n\n            <div class="ui simple dropdown coding floated right" ng-if="comments.length > 0">\n                排序\n                <i class="dropdown icon"></i>\n\n                <div class="menu">\n                    <a class="item" href="javascript:void(0);" ng-class="{active: comment_sort_type === 2}"\n                       ng-click="loadTopicComments(2);">\n                        <i class="checkmark icon"></i>\n                        默认排序\n                    </a>\n                    <a class="item" href="javascript:void(0);" ng-class="{active: comment_sort_type === 0}"\n                       ng-click="loadTopicComments(0);">\n                        <i class="checkmark icon"></i>\n                        最旧评论\n                    </a>\n                    <a class="item" href="javascript:void(0);" ng-class="{active: comment_sort_type === 1}"\n                       ng-click="loadTopicComments(1);">\n                        <i class="checkmark icon"></i>\n                        最新评论\n                    </a>\n                </div>\n            </div>\n        </div>\n\n        <!--所有讨论评论-->\n        <div class="comments" id="topic-comments" cg-page-scroll cg-page-scroll-namespace="cgPageScroll.namespace">\n            <div class="comment" ng-repeat="item in comments track by $index"\n                 ng-class="{\'recommended\': item.is_recommended === 1}" name="{{::item.anchor}}">\n\n                <a ng-href="{{::item.owner.path}}">\n                    <img class="ui avatar image" height="32" ng-src="{{::item.owner.avatar}}"/>\n                </a>\n                <a href="javascript:void(0);" class="vote-button" ng-class="{voted : item.already_voted}">\n                    {{\'+\' + item.up_vote_counts}}\n                </a>\n\n                <div class="content-wrapper">\n                    <label class="recommend-label" ng-if="item.is_recommended === 1">\n                        <i class="icon trophy"></i>最佳答案\n                    </label>\n                    <span class="recommend-stat" ng-if="item.is_recommended === 1">\n                        <i class="icon time"></i><span cg-friendly-time="item.recommended_at"></span>\n                        {{::item.recommended_user.name}}将其标记为最佳答案\n                    </span>\n\n                    <div class="content markdown" clip-copy-code="pre" cg-highlight="item.content">\n                    </div>\n\n                    <div cg-gallery="item.content"></div>\n\n                    <div class="votes" ng-if="item.up_vote_counts > 0">\n                        <span>{{item.up_vote_counts}}人赞同：</span>\n                        <a ng-repeat="user in item.up_vote_users track by $index"\n                           ng-show="item.show_all_up_vote_users || $index < 10"\n                           ng-href="{{::user.path}}">\n                            <img ng-src="{{::user.avatar}}">\n                        </a>\n                        <a ng-click="showAllUpVoteUsers(item)"\n                           ng-show="!item.show_all_up_vote_users && item.up_vote_counts > 10"\n                           ng-href="javascript:void(0);" class="show_all_up_vote_users">\n                            ...\n                        </a>\n                    </div>\n\n                    <div class="time">\n                        <span class="mr10">\n                            <a class="gray" ng-href="{{::item.owner.path}}">{{::item.owner.name}}</a>\n                        </span>\n\n                        <span class="mr11" ng-if="item.membership_type">{{::item.membership_type}}</span>\n\n                        <span class="mr10">\n                            <a ng-href="{{::\'#\' + item.anchor}}">\n                                <i class="time icon"></i><span cg-friendly-time="item.created_at"></span>\n                            </a>\n                        </span>\n\n                        <span class="mr10">\n                            <a href="javascript:void(0);" ng-click="toggleCommentComments(item, $index)"\n                               ng-class="{arrow: item.show_child_comment}">\n                                <i class="icon comment outline"></i>{{\n                                    item.show_child_comment ? \'收起评论\' :\n                                    item.child_count + \' 条评论\'\n                                }}\n                            </a>\n                        </span>\n                    </div>\n\n                    <!--评论的子评论-->\n                    <div class="child-comments" ng-show="item.show_child_comment">\n                        <div class="child-comments-container" ng-show="item.child_count > 0">\n                            <div class="child-comment" ng-repeat="cc in item.child_comments" name="{{::cc.anchor}}">\n                                <a ng-href="{{::cc.owner.path}}">\n                                    <img class="comment-avatar" ng-src="{{::cc.owner.avatar}}">\n                                </a>\n\n                                <div class="content markdown" cg-highlight="cc.content"></div>\n\n                                <div class="comment-time">\n                                    <a ng-href="{{::cc.owner.path}}">\n                                        {{::cc.owner.name}}\n                                    </a>\n\n                                    <a ng-href="{{::\'#\' + cc.anchor}}">\n                                        <i class="icon time"></i><span cg-friendly-time="cc.created_at"></span>\n                                    </a>\n                                </div>\n                            </div>\n                            <div class="comment-show-more" ng-click="loadCommentComments(item, $index)"\n                                 ng-if="item.child_count !== 0 && item.child_comments.length !== item.child_count">\n                                <i class="icon double angle down"></i>显示全部 {{item.child_count}} 条评论\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="empty list" ng-if="comments_loaded && comments.length == 0">\n                <i class="coffee icon"></i>还没人评论\n            </div>\n            <div class="empty list" ng-if="comments_loading">\n                <i class="loading icon"></i>正在加载评论...\n            </div>\n            <div cg-pager="{{pager_id}}"></div>\n        </div>\n    </div>\n</div>\n'),a.put("account/activate/activate-email.html",'<div class="account-flex-container">\n    <div ng-controller="ActivateEmailController" class="account-container">\n        <h2>激活邮箱</h2>\n\n        <form>\n            <input-email ret="email"></input-email>\n\n            <button disabled="disabled" class="loading">激活</button>\n        </form>\n    </div>\n</div>\n<ng-include src="\'app/user/account/about.html\'"></ng-include>\n'),a.put("account/forget-password/forget-password-email.html",'<div class="account-flex-container">\n    <div ng-controller="ForgetPasswordEmailController" class="account-container">\n        <h2>重置密码</h2>\n\n        <form>\n            <input-email ret="email"></input-email>\n            <input-captcha ret="captcha"></input-captcha>\n\n            <button ng-click="submit()" ng-disabled="!valid() || loading" ng-class="{loading: loading}">\n                发送重置密码邮件\n            </button>\n\n            <div class="bottom-link">\n                <a href="javascript:history.back(-1);">返回</a>\n            </div>\n        </form>\n    </div>\n</div>\n<ng-include src="\'app/user/account/about.html\'"></ng-include>\n'),a.put("account/forget-password/forget-password.html",'<div class="account-flex-container">\n    <div ng-controller="ForgetPasswordController" class="account-container">\n        <h2>找回密码</h2>\n\n        <form>\n            <input-phone-email ret="account"></input-phone-email>\n\n            <button ng-click="submit()" ng-disabled="!valid() || loading" ng-class="{loading: loading}">下一步</button>\n\n            <div class="bottom-link">\n                <a href="javascript:history.back(-1);">返回</a>\n            </div>\n        </form>\n    </div>\n</div>\n<ng-include src="\'app/user/account/about.html\'"></ng-include>\n'),a.put("account/login/login.html",'<div class="account-flex-container">\n    <iframe src="/empty.html" name="sink" style="display:none"></iframe>\n    <div ng-controller="LoginController" class="account-container">\n        <h2>用户登录</h2>\n\n        <form>\n            <input-gk-phone-email ret="account"></input-gk-phone-email>\n            <input-password ret="password" show-error="false"></input-password>\n            <input-captcha ret="captcha"></input-captcha>\n\n            <div style="position: relative">\n                <input-remember-me ret="remember_me"></input-remember-me>\n                <a href="/password/forget" style="position: absolute; right: 0; top: -3px;">找回密码</a>\n            </div>\n\n            <button ng-click="submit()" ng-disabled="!valid() || loading" ng-class="{loading: loading}">登录</button>\n\n            <div class="bottom-link">\n                <a href="/register/email">还没有账户，马上注册</a>\n            </div>\n        </form>\n    </div>\n</div>\n<ng-include src="\'app/user/account/about.html\'"></ng-include>\n'),a.put("account/register/register-email.html",'<div class="account-flex-container">\n    <div ng-controller="RegisterEmailController" class="account-container">\n        <h2>加入 Coding, 体验云端开发之美</h2>\n\n        <form>\n            <input-gk ret="gk"></input-gk>\n            <input-email ret="email"></input-email>\n            <input-password-confirm ret="password_confirm"></input-password-confirm>\n            <input-captcha ret="captcha"></input-captcha>\n\n            <a href="javascript:void(0);" onclick="ga(\'send\', \'event\', \'button\', \'click\', \'Coding-Register\');">\n                <button ng-click="submit()" ng-disabled="!valid() || loading" ng-class="{loading: loading}">注册</button>\n            </a>\n\n            <div class="bottom-link">\n                <a href="javascript:void(0);" ng-click="registerByPhone()" style="float: left;">使用手机号注册</a>\n                <a href="/login" style="float: right;">已有账户？马上登录</a>\n            </div>\n        </form>\n    </div>\n</div>\n<ng-include src="\'app/user/account/about.html\'"></ng-include>\n'),a.put("account/register/register-phone.html",'<div class="account-flex-container">\n    <div ng-controller="RegisterPhoneController" class="account-container">\n        <h2>加入 Coding, 体验云端开发之美</h2>\n\n        <form>\n            <input-gk ret="gk"></input-gk>\n            <input-phone ret="phone"></input-phone>\n            <input-password-confirm ret="password_confirm"></input-password-confirm>\n            <input-phone-code ret="code" phone="phone"></input-phone-code>\n            <input-captcha ret="captcha"></input-captcha>\n\n            <a href="javascript:void(0);" onclick="ga(\'send\', \'event\', \'button\', \'click\', \'Coding-Register\');">\n                <button ng-click="submit()" ng-disabled="!valid() || loading" ng-class="{loading: loading}">注册</button>\n            </a>\n\n            <div class="bottom-link">\n                <a href="javascript:void(0);" ng-click="registerByEmail()" style="float: left;">使用邮箱注册</a>\n                <a href="/login" style="float: right;">已有账户？马上登录</a>\n            </div>\n        </form>\n    </div>\n</div>\n<ng-include src="\'app/user/account/about.html\'"></ng-include>\n'),a.put("account/register/resend-email.html",'<div class="account-flex-container">\n    <iframe src="/empty.html" name="sink" style="display:none"></iframe>\n    <div ng-controller="ResendEmailController" class="account-container">\n        <h2>重发激活邮件</h2>\n\n        <form>\n            <input-email ret="email"></input-email>\n            <input-captcha ret="captcha"></input-captcha>\n\n            <button ng-click="submit()" ng-disabled="!valid() || loading" ng-class="{loading: loading}">重发激活邮件</button>\n\n        </form>\n    </div>\n</div>\n<ng-include src="\'app/user/account/about.html\'"></ng-include>\n'),a.put("account/reset-password/reset-password-email.html",'<div class="account-flex-container">\n    <div ng-controller="ResetPasswordEmailController" class="account-container">\n        <h2>重置密码</h2>\n\n        <form>\n            <input-email ret="email"></input-email>\n            <input-password-confirm ret="password_confirm"></input-password-confirm>\n            <input-captcha ret="captcha"></input-captcha>\n\n            <button ng-click="submit()" ng-disabled="!valid() || loading" ng-class="{loading: loading}">重置密码</button>\n        </form>\n    </div>\n</div>\n<ng-include src="\'app/user/account/about.html\'"></ng-include>\n'),a.put("account/reset-password/reset-password-phone.html",'<div class="account-flex-container">\n    <div ng-controller="ResetPasswordPhoneController" class="account-container">\n        <h2>重置密码</h2>\n\n        <form>\n\n            <div class="account-input" >\n                <input ng-model="phone.value" placeholder="手机号" disabled="disabled" />\n            </div>\n            <input-password-confirm ret="password_confirm"></input-password-confirm>\n            <input-phone-code ret="code" phone="phone"></input-phone-code>\n\n            <button ng-click="submit()" ng-disabled="!valid() || loading" ng-class="{loading: loading}">重置密码</button>\n\n            <div class="bottom-link">\n                <a href="javascript:history.back(-1);">返回</a>\n            </div>\n        </form>\n    </div>\n</div>\n<ng-include src="\'app/user/account/about.html\'"></ng-include>\n'),a.put("account/twofa/twofa-close.html",'<div class="account-flex-container">\n    <div ng-controller="TwofaCloseController" class="account-container">\n        <h2>关闭两步验证</h2>\n\n        <form>\n            <input-phone ret="phone"></input-phone>\n            <input-phone-code ret="code" phone="phone"></input-phone-code>\n\n            <button ng-click="submit()" ng-disabled="!code.valid || loading" ng-class="{loading: loading}">关闭两步验证</button>\n\n            <div class="bottom-link">\n                <a href="javascript:history.back(-1);">返回</a>\n            </div>\n        </form>\n    </div>\n</div>\n<ng-include src="\'app/user/account/about.html\'"></ng-include>\n'),a.put("account/twofa/twofa.html",'<div class="account-flex-container">\n    <div ng-controller="TwofaController" class="account-container">\n        <h2>两步验证</h2>\n\n        <form>\n            <input-twofa ret="code"></input-twofa>\n\n            <button ng-click="submit()" ng-disabled="!code.valid || loading" ng-class="{loading: loading}">登录</button>\n\n            <div class="bottom-link">\n                <a href="/twofa/close" style="float: left;">关闭两步验证</a>\n                <a href="/help/doc/account/2fa.html" style="float: right;" target="_blank">两步验证遇到问题？</a>\n            </div>\n        </form>\n    </div>\n</div>\n<ng-include src="\'app/user/account/about.html\'"></ng-include>\n'),a.put("git/blame/blame.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'" class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container" ng-if="!loaded">\n            <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n    </div>\n    <div ng-if="loaded" class="blame container git-container">\n        <div cg-git-file-navigation></div>\n        <div class="blame-view">\n            <div class="file-box">\n                <div class="file-meta clearfix">\n                    <div class="ui tertiary mini compact menu opt">\n                        <a class="item" ng-href="{{raw_url}}" target="_blank">{{\'link_raw\' | i18n:\'code_blame\'}}</a>\n                        <a class="item" ng-href="{{blob_url}}">{{\'link_blob\' | i18n:\'code_blame\'}}</a>\n                        <a class="item" ng-href="{{commits_url}}">{{\'link_history\' | i18n:\'code_blame\'}}</a>\n                    </div>\n                    <div class="file-name info">\n                        <span class="icon"><i class="text file outline icon"></i>file</span>\n                        <span class="meta-divider"></span>\n                        <span class="file-size">{{blame.file.size | bytes:2}}</span>\n                    </div>\n                </div>\n                <div class="file-blame">\n                    <table ng-if="blame.lines">\n                        <tr\n                                ng-repeat="line in blame.lines"\n                                ng-class="{\'section-first\':!isSame(line,blame.lines[$index - 1],$index) && $index >= 0}"\n                                ng-if="line"\n                                >\n                            <td nowrap class="commit-meta">\n                                <div ng-if="line.commitId.length == 40 && !isSame(line,blame.lines[$index - 1],$index)">\n                                    <p>\n                                <span class="commit-message"\n                                      title="{{line.fullMessage}}">\n                                    <a ng-href="{{PROJECT.project_path}}/git/commit/{{line.commitId}}"\n                                       name={{line.commitId}}><code>{{line.commitId | shortCommitId:10}}</code>\n                                    </a>\n                                    {{line.shortMessage}}\n                                </span>\n                                    </p>\n\n                                    <p class="author">\n                                        <a ng-href="{{line.committer.link}}">\n                                            <img class="author-gravatar"\n                                                 ng-src="{{line.committer.avatar}}"\n                                                 height="20" width="20"/>\n                                            <span class="author-name">{{line.committer.name}}</span>\n                                        </a>\n                                        <time class="author-date" cg-friendly-time="line.when"></time>\n                                    </p>\n                                </div>\n                            </td>\n                            <td nowrap class="line-num" id="L{{$index}}" rel="#L{{$index+1}}"\n                                num="{{$index+1}}"><code>{{line.lineNumber}}</code>\n                            </td>\n                            <td nowrap class="line-data" id="CL{{$index+1}}" cg-if="blame">\n                                <pre cg-blame-highlight="line.data" cg-line-length="blame.lines.length"\n                                     cg-line-index="$index" cg-blame-lang="blame.file.lang"\n                                        ></pre>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),
a.put("git/blob/blob.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'" class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container" ng-if="!loaded">\n        <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n    </div>\n    <div class="container git-container" ng-if="loaded">\n        <div cg-git-file-navigation></div>\n        <div class="blob">\n            <div class="commit-tease">\n                <span class="coding floated right">\n                    <a ng-href="{{PROJECT.project_path}}/git/commit/{{blob.file.lastCommitId}}" class="commit-tease-sha">\n                        {{blob.file.lastCommitId | shortCommitId:10}}\n                    </a>\n                    <i class="icon" ng-class="{\'green checkmark\':showCopyIcon,\'paste\':!showCopyIcon}" clip-copy="blob.file.lastCommitId" clip-click="copyCommit()"></i>\n                    {{\'commit_at\' | i18n:\'code_blob\'}}\n                    <time cg-friendly-time="blob.file.lastCommitDate"></time>\n                </span>\n                <span class="commit-author-section">\n                    <a ng-href="{{blob.file.lastCommitter.link}}">\n                        <img class="author-gravatar" ng-src="{{blob.file.lastCommitter.avatar}}" alt="@{{blob.file.lastCommitter.name}}"\n                                                                                                 width="20" height="20"/>\n                    </a>\n                    <span class="author-name"><a href="{{blob.file.lastCommitter.link}}" title="{{blob.file.lastCommitter.name}}">{{blob.file.lastCommitter.name}}</a></span>\n                </span>\n                <span class="message">\n                    <a ng-href="{{PROJECT.project_path}}/git/commit/{{blob.file.lastCommitId}}" cg-bind-html="blob.file.lastCommitMessage"></a>\n                </span>\n            </div>\n            <div class="file-box">\n                <div class="file-meta clearfix">\n                    <div class="ui tertiary mini compact menu opt">\n                        <a class="item" ng-if="can_edit && isHead && (((blob.file.mode == \'file\' || blob.file.mode == \'executable\') && blob.file.data)|| blob.file.size == 0)" ng-href="{{PROJECT.project_path}}/git/edit/{{ref}}/{{path}}">{{\'link_edit\' | i18n:\'code_blob\'}}</a>\n                        <a class="item" ng-href="{{raw_url}}" target="_blank">{{\'link_raw\' | i18n:\'code_blob\'}}</a>\n                        <a class="item" ng-if="blob.file.mode == \'file\' && blob.file.data" ng-href="{{PROJECT.project_path}}/git/blame/{{ref}}/{{path}}">{{\'link_blame\' | i18n:\'code_blob\'}}</a>\n                        <a class="item" ng-href="{{PROJECT.project_path}}/git/commits/{{ref}}/{{path}}">{{\'link_history\' | i18n:\'code_blob\'}}</a>\n                        <a style="background: #df5a5a; color: white" class="item" ng-if="can_edit && isHead" ng-href="{{PROJECT.project_path}}/git/delete/{{ref}}/{{path}}">{{\'link_delete\' | i18n:\'code_blob\'}}</a>\n                    </div>\n                    <div class="file-name info">\n                        <span class="icon">\n                            <i class="{{fileIcon(blob.file.mode)}}"></i>\n                            <span ng-if="blob.file.mode === \'executable\'">executable file</span>\n                            <span ng-if="blob.file.mode === \'file\'">file</span>\n                            <span ng-if="blob.file.mode === \'sym_link\'">symbol link</span>\n                        </span>\n                        <span class="meta-divider"></span>\n                        <span class="file-size">{{blob.file.size | bytes:2}}</span>\n                    </div>\n                </div>\n                <div class="file-preview">\n                    <div ng-if="(blob.file.mode === \'file\' || blob.file.mode === \'executable\' || blob.file.mode === \'sym_link\') && blob.file.data && blob.file.size <= 1024*1024*3">\n                        <div ng-show="blob.file.previewed" class="markdown-body blobmd" clip-copy-code="pre" cg-highlight="blob.file.preview" cg-page-scroll></div>\n                        <div ng-if="!blob.file.previewed" class="code-preview" cg-code-lang="blob.file.lang" cg-code-view="blob.file.data"></div>\n                    </div>\n                    <center ng-if="blob.file.mode === \'image\'">\n                        <img ng-src="{{raw_url}}" class="blob-img"/>\n                    </center>\n'+"                    <p ng-if=\"(blob.file.mode !== 'file' && blob.file.mode !== 'image' && blob.file.mode !== 'sym_link' && blob.file.mode !== 'executable') || blob.file.size > 1024*1024*3\" class=\"not-support\">{{'not_support_to_preview' | i18n:'code_blob'}} ,<a target=\"_self\" ng-href=\"{{raw_url}}\">{{'click_to_download' | i18n:'code_blob'}}</a></p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"),a.put("git/branch/default-modal.html",'<form class="top-up-form ui form">\n    <div class="content">\n        <div class="field">\n            {{\'default_branch\' | i18n:\'code_branches\'}}\n        </div>\n        <div class="field git select2">\n            <select ui-select2="{width: \'300px\'}" ng-model="form.default_branch">\n                <option ng-repeat="branch in branches" value=\'{{branch.name}}\'>{{branch.name}}</option>\n            </select>\n        </div>\n        <div class="field">\n            <a ng-show="!submiting" ng-click="submit()" style="margin-right: 20px;" class="ui small blue button floated right">{{\'update_button\' | i18n:\'code_branches\'}}</a>\n            <div ng-show="submiting" style="margin-right: 20px;" class="ui small blue button floated right" style="width: 60px;"><i class="loading icon" style="margin: 0"></i></div>\n        </div>\n    </div>\n</form>\n'),a.put("git/branch/index.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'"\n         class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container" ng-style="!PROJECT.is_public && {\'padding\': \'25px 25px 0 25px\'}">\n        <div class="container branches git-container" ng-class="{\'private-project-git-branch-list\': !PROJECT.is_public}">\n            <div class="ui header clearfix" ng-class="{\'dividing\': !PROJECT.is_public}">\n                <span ng-if="!PROJECT.is_public">{{\'branch_header\' | i18n:\'code_branches\'}}</span>\n                <a class="green ui button"\n                   ng-href="{{PROJECT.project_path}}/git/branches/create"\n                   style="float: right;"\n                   ng-if="(PROJECT | isRole:MEMBER) && loaded">{{\'new_branch\' | i18n:\'code_branches\'}}</a>\n            </div>\n            <div class="search-filter" ng-if="showClearFilter()">\n                {{\'search_options\' | i18n:\'code_branches\'}}{{ filterTitle }}\n                <i class="remove circle icon" ng-click="clearFilter()"></i>\n            </div>\n            <div class="search clearfix">\n                <div class="search-box">\n                    <i class="small search icon"></i>\n                    <input type="text" ng-model="keyword" cg-enter="updateSearch()" cg-esc-blur></input>\n                </div>\n            </div>\n            <div class="container" ng-show="!loaded">\n                <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n            </div>\n\n            <div ng-show="loaded" ng-repeat="branch in branches" class="branch-list">\n                <table class="ui basic table">\n                    <tbody>\n                        <tr>\n                            <td class="branch-name">\n                                <i class="shield icon ng-isolate-scope" ng-if="branch.is_protected"></i>\n                                <a ng-href="{{PROJECT.project_path}}/git/tree/{{branch.name | encodeGitUri}}">{{branch.name}}</a>\n                            </td>\n                            <td class="branch-metrics" rowspan="2">\n                                <div class="ui blue label small default-branch" ng-show="branch.is_default_branch">\n                                    {{\'label_default\' | i18n:\'code_branches\'}}\n                                </div>\n                                <div ng-show="!branch.is_default_branch">\n                                    <div cg-git-branch-metric metric-data="branchMetrics[branch.last_commit.commitId]" ng-if="branchMetricsLoaded"></div>\n                                    <i class="loading icon" ng-if="!branchMetricsLoaded"></i>\n                                </div>\n                            </td>\n                            <td class="branch-operator" rowspan="2">\n                                <a class="ui button"\n                                   ng-if="!PROJECT.is_public && (PROJECT | isRole:MEMBER)"\n                                   ng-href="{{PROJECT.depot_path}}/merge/create?startWith={{branch.name}}">\n                                    <i class="coding icon merge-request"></i>\n                                    {{\'button_merge_request\' | i18n:\'code_branches\'}}\n                                </a>\n                                <a class="ui button"\n                                   ng-if="PROJECT.is_public"\n                                   ng-href="{{PROJECT.project_path}}/git/archive/{{branch.name | encodeUri}}"\n                                   target="_self">\n                                    {{\'button_download\' | i18n:\'code_branches\'}}\n                                </a>\n                                <div class="more-operator ui dropdown" cg-dropdown dropdown-setting="dropdown_settings" ng-if="shouldShowMoreBranchOperator(branch)">\n                                    <span class="dropdown-icon">...</span>\n                                    <div class="menu">\n                                        <div class="item"\n                                             ng-show="canModifyDefaultBranch(branch)"\n                                             ng-click="changeDefaultBranch()">\n                                            {{\'menu_modify_default_branch\' | i18n:\'code_branches\'}}\n                                        </div>\n                                        <div class="item"\n                                             ng-show="canSetProtectedBranch(branch)"\n                                             ng-click="protected_branch(branch)">\n                                            {{\'menu_set_protected_branch\' | i18n:\'code_branches\'}}\n                                        </div>\n                                        <a class="item"\n                                           ng-show="!PROJECT.is_public"\n                                           ng-href="{{PROJECT.project_path}}/git/archive/{{branch.name | encodeUri}}"\n                                           target="_self">\n                                            {{\'menu_download_branch\' | i18n:\'code_branches\'}}\n                                        </a>\n                                        <div class="item red"\n                                             ng-show="canDeleteBranch(branch)"\n                                             ng-click="delete_branch(branch)">\n                                            {{\'menu_delete_branch\' | i18n:\'code_branches\'}}\n                                        </div>\n                                    </div>\n                                </div>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td class="last-commit">\n                                <a ng-href="{{PROJECT.project_path}}/git/commit/{{branch.last_commit.commitId}}"\n                                   cg-bind-html="branch.last_commit.shortMessage">\n                                </a>-&nbsp;<span class="commit-time" cg-friendly-time="branch.last_commit.commitTime"></span>\n                            </td>\n                        </tr>\n\n                    </tbody>\n                </table>\n                <div ng-if="branch.show_protected_branch_setting" class="branch-setting">\n                    <div class="close-setting">\n                        <i class="remove icon" ng-click="branch.show_protected_branch_setting = false"></i>\n                    </div>\n                    <div class="enable-protected-branch">\n                        <div class="ui toggle checkbox">\n                            <input type="checkbox" ng-model="branch.is_protected"\n                                   id="enable-protected-branch-{{branch.name}}" ng-change="toggleProtectedBranch(branch)"\n                                   ng-disabled="!(PROJECT | isRole:ADMIN)">\n                            <label for="enable-protected-branch-{{branch.name}}">{{\'protected_branches\'\n                                | i18n:\'code_branches\'}}</label>\n                        </div>\n                        <div class="content">\n                            <p>{{\'protected_branches_tip\' | i18n:\'code_branches\'}}</p>\n                            <div class="members" ng-if="branch.is_protected && ((PROJECT | isRole:ADMIN) || memberCount > 0)">\n                                <h4>{{\'branches_admin\' | i18n:\'code_branches\'}}</h4>\n                                <p>{{\'branches_admin_tip\' | i18n:\'code_branches\'}}</p>\n                                <ul>\n                                    <li class="clearfix" ng-repeat="member in branchMembers" ng-if="member.has_update_access">\n                                        <i class="icon remove"\n                                           ng-if="PROJECT | isRole:ADMIN"\n                                           ng-click="removeMember(branch, member)"\n                                           data-position="bottom center"\n                                           data-variation="inverted"\n                                           data-html="{{\'remove_branches_admin\' | i18n:\'code_branches\'}}"\n                                           cg-popup></i>\n                                        <div class="ui toggle checkbox">\n                                            <input type="checkbox" ng-model="member.has_push_access"\n                                                   id="{{branch.name}}-member-{{member.user.global_key}}"\n                                                   ng-change="togglePushBranch(branch, member)"\n                                                   ng-disabled="!(PROJECT | isRole:ADMIN)">\n                                            <label\n                                                for="{{branch.name}}-member-{{member.user.global_key}}">{{\'allow_push\'\n                                                | i18n:\'code_branches\'}}</label>\n                                        </div>\n                                        <a ng-href="{{member.user.path}}">\n                                            <img class="ui circular image" width="32" height="32" ng-src="{{member.user.avatar}}"/>\n                                            <span>{{member.user.name}}</span>\n                                        </a>\n                                    </li>\n                                    <li class="add-member" ng-if="(PROJECT | isRole:ADMIN) && branchMembers.length > memberCount">\n                                        <select ng-model="branch.member_select" ng-change="addMember(branch)" ui-select2="dropdownOptions">\n                                            <option ng-hide="true" value="0" selected="selected">\n                                                {{\'add_branches_admin\' | i18n:\'code_branches\'}}\n                                            </option>\n                                            <option\n                                                ng-repeat="member in branchMembers"\n                                                ng-if="!member.has_update_access"\n                                                value="{{member.user.global_key}}"\n                                                data-user-avatar="{{member.user.avatar}}"\n                                                data-pinyin="{{member.user.name_pinyin}}">\n                                                {{member.user.name}}\n                                            </option>\n                                        </select>\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="allow-force-push">\n                        <div class="ui checkbox">\n                            <input type="checkbox" ng-model="branch.allow_force_push"\n                                   id="allow-force-push-{{branch.name}}" ng-change="toggleDenyForcePush(branch)"\n                                   ng-disabled="!(PROJECT | isRole:ADMIN)">\n                            <label for="allow-force-push-{{branch.name}}">\n                                <span>{{\'allow_force_push\' | i18n:\'code_branches\'}}</span>\n                                <a href="/help/doc/git/git-branch.html#section-11" class="icon" target="_blank"><i class="help icon"></i></a>\n                            </label>\n                        </div>\n                    </div>\n                    <div class="force-squash" ng-if="isExpActive(\'squash-optimize\')">\n                        <div class="ui checkbox toggle">\n                            <input type="checkbox" ng-model="branch.force_squash"\n                                   id="force-squash-{{branch.name}}" ng-change="toggleForceSquash(branch)"\n                                   ng-disabled="!(PROJECT | isRole:ADMIN)">\n                            <label for="force-squash-{{branch.name}}">\n                                <span>{{\'force_squash\' | i18n:\'code_branches\'}}</span>\n                                <a href="/help/doc/practice/git-principle.html#squash-and-merge" class="icon" target="_blank"><i class="help icon"></i></a>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div ng-show="loaded" cg-pager="{{pager_id}}" class="center"></div>\n            <div ng-show="(!branches || branches.length == 0) && loaded">\n                <div ng-include="\'app/git/partial/_back-monkey.html\'"></div>\n                <div class="no-branch-tips">\n                    <p class="ui coding aligned center"><strong>{{\'no_branches\' | i18n:\'code_branches\'}}</strong></p>\n\n                    <p class="ui coding aligned center">{{\'please_commit_to_repo\' | i18n:\'code_branches\'}}</p>\n                </div>\n            </div>\n\n        </div>\n    </div>\n</div>\n\n<div class="ui modal tiny40"\n     ng-controller="ChangeDefaultBranchModalCtrl"\n     cg-modal="changeDefaultBranchModal"\n     ng-include="\'git/branch/default-modal.html\'"></div>\n'),a.put("git/branch/new.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'"\n         class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container branches git-container">\n        <h4 ng-if="!PROJECT.is_public" class="header">{{\'branch_header\' | i18n:\'code_branches\'}}</h4>\n\n        <div ng-if="!PROJECT.is_public" class="ui divider"></div>\n\n        <div class="ui form segment" style="max-width:500px;margin:20px auto;">\n            <h4>{{\'create_branch\' | i18n:\'code_branches\'}}</h4>\n\n            <div class="field">\n                <label>{{\'branch_name\' | i18n:\'code_branches\'}}</label>\n\n                <div class="ui left labeled input">\n                    <input type="text" ng-model="new_branch.name" placeholder="{{\'please_enter_branch_name\' | i18n:\'code_branches\'}}" cg-enter="create_branch(new_branch)">\n                </div>\n            </div>\n            <div class="field">\n                <label>{{\'branch_start_point\' | i18n:\'code_branches\'}}</label>\n\n                <div class="ui left labeled input">\n                    <input type="text" ng-model="new_branch.start_point" placeholder="{{\'please_enter_start_point\' | i18n:\'code_branches\'}}" cg-enter="create_branch(new_branch)">\n                </div>\n            </div>\n            <div class="ui dark gray medium submit button" ng-click="create_branch(new_branch)">{{\'button_create\' | i18n:\'code_branches\'}}</div>\n            <div class="ui error message"></div>\n        </div>\n    </div>\n</div>\n'),a.put("git/commit/commit.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'" class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container" ng-if="!loaded">\n            <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n    </div>\n    <div class="commit container git-container" ng-if="loaded">\n        <div class="commit-view">\n            <div class="full-commit">\n                <div class="commit-title clearfix ellipsis">\n                    <div class="commit-title-short" cg-bind-html="shortMessage"></div>\n                    <pre class="commit-title-full" cg-bind-html="allMessage"></pre>\n                </div>\n                <a ng-href="{{PROJECT.project_path}}/git/tree/{{commit.commitId}}" class="ui button small right floated" style="margin-top: 6px;">{{\'link_code\' | i18n:\'code_commit\'}}</a>\n\n                <div class="commit-meta clearfix">\n                    <span class="diff-link">\n                        <a target="_blank" ng-href="{{PROJECT.project_path}}/git/commit/{{commit.commitId}}.diff"><code>Diff</code></a>\n                        <a target="_blank" ng-href="{{PROJECT.project_path}}/git/commit/{{commit.commitId}}.patch"><code>Patch</code></a>\n                    </span>\n                    <span class="sha-block"><span class="sha-value"><code>{{commit.commitId}}</code></span></span>\n\n                    <a ng-href="{{commit.committer.link}}">\n                        <img class="gravatar" height="20" width="20"\n                         ng-src="{{commit.committer.avatar}}" ng-if="commit.committer.avatar.length > 0"/>\n                    <span class="author-name">{{commit.committer.name}}</span>\n                    </a>\n                    <span class="commit-time"> {{\'committed_at\' | i18n:\'code_commit\'}}\n                        <time class="comm" cg-friendly-time="commit.commitTime"></time>\n                    </span>\n                </div>\n            </div>\n            <div cg-git-diff-show diff-stat="diffStat" diff-mode="diffMode" diff-html="diffHtml" notes-params="notesParams" enable-whitespace="enableWhitespace"></div>\n            <div cg-git-diff-notes></div>\n        </div>\n    </div>\n</div>\n'),a.put("git/commits/commits.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'"\n         class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container" ng-if="!loaded">\n            <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n    </div>\n    <div class="container git-container" ng-if="loaded">\n        <div cg-git-file-navigation context="commits"></div>\n        <div cg-git-commit-list commits="commits"></div>\n        <div class="ui coding aligned center" style="margin-top:30px;">\n            <a ng-href="{{cur_path}}?page={{current_page - 1}}" ng-if="current_page > 1" class="ui button">\n                <i class="arrow left icon"></i>{{\'pre\' | i18n:\'code_commits\'}}</a>\n            <a ng-href="{{cur_path}}?page={{current_page + 1}}" ng-if="commits.length == page_size"\n               class="ui button">\n                {{\'next\' | i18n:\'code_commits\'}}<i class="arrow right icon"></i></a>\n        </div>\n    </div>\n</div>\n'),a.put("git/compare/compare.html",'<style>\n    .public-project-view #compare-tabular > .item.active {\n        background-color: #FFF!important;\n        border-bottom: 1px solid #FFF!important;\n    }\n    #compare-tabular > .item.active {\n        background-color: #F7F6F2!important;\n        border-bottom: 1px solid #F7F6F2!important;\n    }\n</style>\n<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'" class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container compare git-container">\n        <h4 ng-if="!PROJECT.is_public" class="header">{{\'compare_title\' | i18n:\'code_compare\'}}</h4>\n        <div ng-if="!PROJECT.is_public" class="ui divider"></div>\n        <div style="color: #666; font-weight: normal;">{{\'compare_tips\' | i18n:\'code_compare\'}}</div>\n        <div class="compare-view">\n            <div class="compare-form" style="display: inline-block; margin: 20px 0;">\n                <div cg-git-commitish-suggester ng-model="ref1" ng-change="submitCompare(ref1,ref2)" refs="refs" selection-prefix="{{\'base\' | i18n:\'code_compare\'}}" style="display: inline-block;"></div>\n                <a class="ui button blue" ng-class="{\'disabled\': ref1 == ref2}" ng-click="submitCompare(ref2,ref1)" style="margin: 0 20px; height: 26px; line-height: 26px; font-weight: normal;">{{\'swap\' | i18n:\'code_compare\'}}</a>\n                <div cg-git-commitish-suggester ng-model="ref2" ng-change="submitCompare(ref1,ref2)" refs="refs" selection-prefix="{{\'compare\' | i18n:\'code_compare\'}}" style="display: inline-block;"></div>\n            </div>\n            <div class="container" ng-if="!welcome && !loaded">\n                <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n            </div>\n            <div class="compare-content" ng-show="!welcome && loaded">\n                <div id="compare-tabular" class="ui tabular menu" ng-if="commits && !nocommits">\n                    <a class="item" ng-click="switchTab(1)" ng-class="{active:switchTabValue == 1}">\n                        <i class="home icon"></i> {{\'commits\' | i18n:\'code_compare\'}} <span class="commits-count">{{commits.length || \'0\'}}</span>\n                    </a>\n                    <a class="item" ng-click="switchTab(2)" ng-class="{active:switchTabValue == 2}">\n                        <i class="mail icon"></i> {{\'file_changes\' | i18n:\'code_compare\'}} <span class="commits-count" ng-if="diffStat.paths.length && diffStat.paths.length>0">{{diffStat.paths.length}}</span>\n                    </a>\n                </div>\n                <div id="tab-contents" class="commits" ng-if="commits && !nocommits">\n                    <div id="compare_tab_1" class="tab-content commits-view clearfix" ng-if="switchTabValue == 1">\n                        <div cg-git-commit-list commits="commits"></div>\n                    </div>\n                    <div id="compare_tab_2" class="tab-content clearfix" ng-if="switchTabValue == 2">\n                        <div cg-git-diff-show diff-stat="diffStat" diff-mode="diffMode" diff-html="diffHtml" enable-whitespace="enableWhitespace" commit-id="commitId" base-commit-id="baseCommitId"></div>\n                    </div>\n                </div>\n                <div class="ui info message" ng-if="nocommits">\n                    {{\'compare_nocommits_tips\' | i18n:\'code_compare\'}}<a ng-click="submitCompare(ref2,ref1)" style="cursor: pointer;">{{\'swap_order\' | i18n:\'code_compare\'}}</a>\n                </div>\n                <div class="ui warning message" ng-if="!commits && !nocommits">\n                    {{\'cannot_get_commits\' | i18n:\'code_compare\'}}\n                </div>\n            </div>\n            <div ng-show="welcome" style="margin: 20px 0; padding: 20px; background-color: rgb(248, 248, 248); border: 1px solid #DCDDDE; border-radius: 5px;">\n                <h3 style="text-align: center; font-size: 20px; letter-spacing: 1px; color: #333;">{{\'compare_and_see_changes\' | i18n:\'code_compare\'}}</h3>\n                <p style="text-align: center; color: #555;">{{\'branch_tag_sha_compare\' | i18n:\'code_compare\'}}</p>\n                <div style="text-align: center; font-size: 35px; color: #999; margin-top: 40px;">\n                  <i class="icon code fork"></i>\n                  <i class="icon coding coding-commit"></i>\n                  <i class="icon tags"></i>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("git/directives/branch-metric/branch-metric.html",'<table class="branch-metric" cellspacing="0">\n    <tr>\n        <td class="bar-col">\n            <span class="bar-wrapper" ng-style="{\'width\': ahead > 20 ? 100 : ahead * 5 + \'px\'}">\n                <div class="bar"></div>\n            </span>\n        </td>\n        <td class="bar-col">\n            <span class="bar-wrapper" ng-style="{\'width\': behind > 20 ? 100 : behind * 5 + \'px\'}">\n                <div class="bar"></div>\n            </span>\n        </td>\n    </tr>\n    <tr>\n        <td class="count-col">\n            <div class="count">{{ahead}}</div>\n        </td>\n        <td class="count-col">\n            <div class="count">{{behind}}</div>\n        </td>\n    </tr>\n</table>\n'),a.put("git/directives/bread-crumb/bread-crumb.html",'<span class="active section" style="display: inherit;">\n    <a ng-repeat-start="part in parts" class="section" href="{{ part.path }}" ng-if="!$last || $last && type === \'blob\'">{{ part.text }}</a>\n    <span class="active section" ng-if="$last && type !== \'blob\'">{{ part.text }}</span>\n    <div ng-repeat-end class="divider" ng-if="!$last || $last && type === \'blob\'"> /</div>\n    <span class="active section" ng-if="type === \'blob\' && !can_edit">{{ filename }}</span>\n    <span class="inline field git-rename-form" ng-show="type === \'blob\' && can_edit">\n        <span class="ui mini icon input">\n            <div ng-model="filename"\n                 id="git-rename-text-input"\n                 ng-class="{changed: (filename != originFilename)}"\n                 contenteditable\n                 ng-paste="renameTextInputPasteEventHandler($event)"\n                 ng-focus="renameTextInputFocusEventHandler($event)"\n                 ng-blur="renameTextInputBlurEventHandler($event)"></div>\n        </span>\n        <a id="git-rename-save-button"\n           class="mini ui button green"\n           ng-show="(filename != originFilename || renameTextInputFocused) && !submitting"\n           ng-click="submitRename(filename)"\n           ng-class="{disabled: (submitting || filename.length <= 0 || filename == originFilename)}">{{\'save\' | i18n:\'code_bread_crumb\'}}</a>\n        <a id="git-rename-cancel-button"\n           class="mini ui button red"\n           ng-show="(filename != originFilename || renameTextInputFocused) && !submitting"\n           ng-click="cancelRename()"\n           ng-class="{disabled: submitting}">{{\'cancel\' | i18n:\'code_bread_crumb\'}}</a>\n    </span>\n</span>\n'),
a.put("git/directives/comment/comment.html",'<div>\n    <div class="merge-request-activity-filter" ng-if="tag_menu === \'merge\'">\n        <a class="gray" href="javascript:void(0);" ng-click="toggleMergeRequestActivity()">\n            <i ng-class="getShowMergeRequestActivityIcon(showMergeRequestActivity)"></i>只看评论\n        </a>\n    </div>\n    <div class="comments" ng-class="{\'git-comments\': comments && comments.length > 0}">\n        <div class="diff-notes-wrapper" ng-repeat="discussion in comments">\n            <div ng-show="discussion[0].action && showMergeRequestActivity" class="activity">\n                <div class="icon activity" ng-class="discussion[0].action">\n                    <i class="icon" ng-class="getActivityIcon(discussion[0].action)"></i>\n                </div>\n                <div class="detail">\n                    <a class="gray" ng-href="{{::discussion[0].author.path}}">{{::discussion[0].author.name}}</a>\n                    <span>{{getActivityHuman(discussion[0].action)}}</span>\n                    <a class="gray" ng-href="{{::discussion[0].comment.reviewer.path}}">{{::discussion[0].comment.reviewer.name}}</a>\n                    -\n                    <span cg-friendly-time="discussion[0].created_at"></span>\n                    <div ng-if="discussion[0].comment" class="commits">\n                        <div ng-repeat="commit in discussion[0].comment.commits">\n                            <div class="commit" ng-init="show_commit_message = false;">\n                                <i class="icon code"></i>\n                                <a ng-href="{{::commit.committer.link}}">{{::commit.committer.name}}</a> :\n                                <a class="monospaced-font" ng-href="{{PROJECT.project_path}}/git/commit/{{::commit.commitId}}">[{{::commit.commitId | shortCommitId}}]</a>\n                                <a class="gray" ng-href="{{PROJECT.project_path}}/git/commit/{{::commit.commitId}}" ng-bind-html="::commit.shortMessage"></a>\n                                <span class="hidden-text-expander" ng-show="commit.allMessage">\n                                    <a class="gray" href="javascript:void(0);"\n                                       ng-click="show_commit_message = !show_commit_message">...</a>\n                                </span>\n                                <div class="all-message" ng-if="show_commit_message">\n                                    <a class="gray" ng-href="{{PROJECT.project_path}}/git/commit/{{::commit.sha}}" ng-bind-html="::commit.allMessage"></a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="comment" ng-if="!discussion[0].commitId && !discussion[0].action" ng-repeat="item in discussion">\n                <a name="mr-comment-{{::item.id}}" ng-if="::item.noteable_type == \'MergeRequestBean\'"></a>\n                <a name="pr-comment-{{::item.id}}" ng-if="::item.noteable_type == \'PullRequestBean\'"></a>\n                <a class="commont-avatar" ng-href="{{::item.author.path}}">\n                    <img class="ui avatar image" width="36" ng-src="{{::item.author.avatar}}"/>\n                </a>\n                <div class="content-wrapper">\n                    <div class="content markdown" clip-copy-code="pre"  cg-highlight="item.content">\n                    </div>\n                    <div class="time">\n                        <span class="mr10">\n                            <a class="gray" ng-href="{{::item.author.path}}" >{{::item.author.name}}</a>\n                        </span>\n                        <span class="mr10">\n                            <i class="time icon"></i><span cg-friendly-time="item.created_at"></span>\n                        </span>\n                        <span class="mr10" ng-if="USER">\n                            <a class="gray reply" href="javascript:void(0);"\n                               ng-click="replyMerges(item);"\n                               cg-scroll-to scroll-to="#merges-comment-editor">\n                                <i class="chat outline icon"></i>回复\n                            </a>\n                        </span>\n                        <span class="mr10" ng-if="USER.id == item.author.id || (PROJECT | isRole:OWNER)">\n                            <a class="gray remove" href="javascript:void(0);" ng-click="delComment(item);">\n                                <i class="remove icon"></i>删除\n                            </a>\n                        </span>\n                    </div>\n                </div>\n            </div>\n            <div class="diff-notes-wrapper" ng-class="{outdated: hideDiff}"  ng-if="discussion[0].commitId && !discussion[0].action" ng-init="inline = true; diffHtml = discussion[0].diff_html; diffStat = {paths: []}; diffComments = discussion; hideDiff = discussion[0].outdated">\n                <div class="activity code">\n                    <div class="button toggle-diff" ng-click="hideDiff = !hideDiff">\n                        <i class="icon" ng-class="{expand: hideDiff, collapse: !hideDiff}"></i>\n                        {{hideDiff ? \'展开详情\' : \'隐藏详情\'}}\n                    </div>\n                    <div class="icon activity">\n                        <i class="icon" ng-class="{code: !discussion[0].outdated, close: discussion[0].outdated}"></i>\n                    </div>\n                    <div class="detail">\n                        <a class="gray" ng-href="{{::discussion[0].author.path}}">{{::discussion[0].author.name}}</a>\n                        <span>{{discussion[0].outdated ? \'对过时的文件改动发起了讨论\' : \'对文件改动发起了讨论\'}}</span>\n                        -\n                        <span cg-friendly-time="discussion[0].created_at"></span>\n                    </div>\n                </div>\n                <div class="comment-commit-diff commit-diff" cg-git-diff ng-init="notesParams = undefined"></div>\n                <div cg-git-diff-notes ng-init="commitId = discussion[0].commitId; noteable_type = discussion[0].noteable_type; noteable_id = discussion[0].noteable_id; path = discussion[0].path; position = discussion[0].position; line = discussion[0].line; anchor = discussion[0].anchor"></div>\n            </div>\n        </div>\n        <div class="empty list" ng-if="comments_loaded && comments.length == 0"><i class="coffee icon"></i>还没人评论<span ng-if="USER">，来一发？</span></div>\n        <div class="empty list" ng-if="comments_loading"><i class="loading icon"></i>正在加载评论~</div>\n        <!-- <div cg-pager="{{topic_detail_pager_id}}"></div> -->\n    </div>\n\n    <form id="merges-comment-form" ng-if="USER">\n        <div id="merges-comment-editor"\n            editor-id="merges-comment-editor"\n            cg-light-md-editor="addComment"\n            data-ng-model="comment.content"\n            on-change="onCommentChange"\n            at-item="atConfig.target"\n            at-context-type="atConfig.type"\n            extra-item="atConfig.extra"\n            show-submit="true"\n            img-compression="false"\n            project_dependency="PROJECT">\n        </div>\n    </form>\n</div>\n'),a.put("git/directives/commit-item/commit-item.html",'<div ng-repeat="commit in commitz">\n    <div class="commit-list-item">\n        <div class="committer-gravatar">\n            <div class="ava">\n                <a ng-href="{{commit.committer.link}}">\n                    <img height="36" width="36" ng-src="{{commit.committer.avatar}}"\n                        title="{{commit.committer.name}}"/>\n                </a>\n            </div>\n        </div>\n        <div class="commit-info">\n            <div style="display: block; overflow: hidden;">\n            <p class="commit-title">\n                <span>\n                    <span class="hidden-text-expander" href="javascript:void(0);" ng-click="toggleDiff(commit)">\n                        <i class="icon arrow" ng-class="{\'right\': !commit.showDiff, \'down\': commit.showDiff}"></i>&nbsp;<span cg-bind-html="commit.shortMessage"></span>\n                    </span>\n                    <a class="ellipsis" ng-href="{{PROJECT.project_path}}/git/commit/{{commit.commitId}}"><i class="right arrow"></i></a>\n                </span>\n            </p>\n            <div class="commit-meta">\n                <a class="author" ng-href="{{commit.committer.link}}">{{commit.committer.name}}</a>\n                <time cg-friendly-time="commit.commitTime"></time>\n            </div>\n            <div class="commit-desc" ng-if="commit.show_full_message">\n                <pre class="commit-message-full" cg-bind-html="commit.allMessage"></pre>\n            </div>\n            </div>\n        </div>\n        <div class="commit-links">\n            <span class="comment-count" ng-if="commit.notesCount > 0" class="margin-right: 10px;">\n                <i class="comment icon"></i>{{commit.notesCount}}\n            </span>\n            <a class="commit-links-sha" ng-href="{{PROJECT.project_path}}/git/commit/{{commit.commitId}}">\n                <code>{{commit.commitId | shortCommitId:10}}</code>\n            </a>\n            <i class="icon" ng-class="{\'green checkmark\':commit.showCopyIcon,\'paste\':!commit.showCopyIcon}" clip-copy="commit.commitId" clip-click="copyCommit(commit)"></i>\n            <a class="bcode" ng-href="{{PROJECT.project_path}}/git/tree/{{commit.commitId}}">源码</a>\n            &nbsp;&nbsp;\n            <a ng-if="(PROJECT | isRole:MEMBER) && type == \'commits\' && !path"\n                ng-href="{{PROJECT.depot_path}}/tags/create?startWith={{commit.commitId}}">\n                <i class="tag icon"></i>\n            </a>\n        </div>\n    </div>\n    <div class="container loading-diff" ng-if="commit.loading">\n        <cg-monkey-loading image-size="20" container-margin="30"></cg-monkey-loading>\n    </div>\n    <div class="commits-diff" ng-if="commit.showDiff" cg-git-diff-show diff-stat="commit.diffStat"\n         diff-mode="commit.diffMode" diff-html="commit.diffHtml"\n         enable-whitespace="commit.enableWhitespace" commit-id="commit.commitId"></div>\n\n</div>\n'),a.put("git/directives/commit-list/commit-list.html",'<div class="commit-list">\n\n    <div ng-repeat="(date, commitz) in commitsWithDate | commitsToArray">\n\n\n        <div class="commit-group-title">\n            <i class="icon coding-commit coding"></i>\n            {{commitz.$key}}\n        </div>\n\n        <div class="commit-group" cg-git-commit-item commitz="commitz"></div>\n\n    </div>\n    <div class="no-more center empty list" ng-if="!commits || commits.length == 0">\n        没有更多提交了~\n    </div>\n</div>\n'),a.put("git/directives/diff-show/diff-show.html",'<div class="commit-diff-stat">\n    <p class="commit-diff-header clearfix" ng-show="!!diffStat && diffStat.paths.length <= 1000 && diffStat.paths.length > 0">\n    <span class="toggle-diff-stat">{{diffStat.paths.length || 0}} {{\'file_count\' | i18n:\'code_diff_show\'}}</span>（<strong>{{diffStat.insertions || 0}} {{\'insertions\' | i18n:\'code_diff_show\'}}</strong> / <strong>{{diffStat.deletions || 0}} {{\'deletions\' | i18n:\'code_diff_show\'}}</strong>）\n    <span class="ui small button diff-mode-box wide" cg-git-diff-options>\n        <span class="ui simple dropdown">\n            {{\'view_options\' | i18n:\'code_diff_show\'}}<i class="dropdown icon"></i>\n            <span class="menu">\n                <span class="item" ng-show="diffMode !== \'split\'">\n                    <span class=" ui toggle checkbox small ">\n                        <input ng-model="diffWrap" type="checkbox" id="diff_wrap" ng-change="setOption(\'diffWrap\',diffWrap)">\n                        <label for="diff_wrap">{{\'wrap_line_view\' | i18n:\'code_diff_show\'}}</label>\n                    </span>\n                </span>\n                <span class="item">\n                    <span class=" ui toggle checkbox small ">\n                        <input ng-model="diffShowTab" type="checkbox" id="diff_show_tab" ng-change="setOption(\'diffShowTab\', diffShowTab)">\n                        <label for="diff_show_tab">{{\'show_tab\' | i18n:\'code_diff_show\'}}</label>\n                    </span>\n                </span>\n                <span class="item" ng-if="enableWhitespace">\n                    <span class="ui toggle checkbox small " >\n                        <input ng-change="location.search(\'w\', ignoreWhitespace ? \'1\' : undefined)" ng-model="ignoreWhitespace" type="checkbox" id="ignore_whitespace">\n                        <label for="ignore_whitespace">{{\'ignore_white_space\' | i18n:\'code_diff_show\'}}</label>\n                    </span>\n                </span>\n                <span class="item">\n                    <span class="ui toggle checkbox small ">\n                        <input ng-model="inlineDiffOn" type="checkbox" id="inline_diff_on" ng-change="setOption(\'inlineDiffOn\',inlineDiffOn)">\n                        <label for="inline_diff_on">{{\'inline_diff\' | i18n:\'code_diff_show\'}}</label>\n                    </span>\n                </span>\n                <span class="item">\n                    <span class=" ui toggle checkbox small ">\n                        <input ng-model="colorOn" type="checkbox" id="color_on" ng-change="setOption(\'colorOn\', colorOn)">\n                        <label for="color_on">{{\'highlight\' | i18n:\'code_diff_show\'}}</label>\n                    </span>\n                </span>\n            </span>\n        </span>\n    </span>\n    <a ng-click="changeDiffMode(\'split\', $event)" class="ui button small diff-mode-button" ng-show="!changeDiffModeLoading && diffMode != \'split\'">{{\'split_diff\' | i18n:\'code_diff_show\'}}</a>\n    <a ng-click="changeDiffMode(\'normal\', $event)" class="ui button small diff-mode-button" ng-show="!changeDiffModeLoading && diffMode == \'split\'">{{\'normal_diff\' | i18n:\'code_diff_show\'}}</a>\n    <a class="ui button small diff-mode-button" style="width: 84px;" ng-show="changeDiffModeLoading"><i style="margin: 0;" class="loading icon"></i></a>\n    <a class="ui button small diff-toggle-show-button show-all" ng-click="toggleShowAllDiff()">{{\'show_all\' | i18n:\'code_diff_show\'}}</a>\n    <a class="ui button small diff-toggle-show-button hide-all" ng-click="toggleHideAllDiff()">{{\'hide_all\' | i18n:\'code_diff_show\'}}</a>\n    </p>\n    <p class="commit-diff-header clearfix" ng-show="!!diffStat && diffStat.paths.length > 1000">\n        <span><i class="info icon"></i></span><span class="toggle-diff-stat">{{diffStat.paths.length || 0}} {{\'file_count\' | i18n:\'code_diff_show\'}}</span>\n    </p>\n</div>\n<div class="commit-diff" ng-class="{tab: diffShowTab, wrap: diffWrap,\'color-off\': !colorOn, \'inline-diff-off\': !inlineDiffOn}" cg-git-diff></div>\n<div class="commit-diff" ng-if="!diffStat || diffStat.paths.length == 0">\n    <div class="diff-too-long">{{\'diff_large_tips\' | i18n:\'code_diff_show\'}}<a target="_blank" ng-href="{{$root.PROJECT.project_path}}/git/compare/{{diffStat.oldSha}}...{{diffStat.newSha}}.diff">{{\'click_to_download_diff\' | i18n:\'code_diff_show\'}}</a></div>\n</div>\n'),a.put("git/directives/diff/diff-notes.html",'<div class="diff-comments">\n    <h4 class="comment-header" ng-if="!inline && diffComments.length > 0">\n        <span class="count">{{diffComments.length}}</span> 条评论\n    </h4>\n    <div class="comment" ng-class="{inline: inline}" ng-repeat="item in diffComments" ng-if="isShow(item)">\n        <a name="commit-comment-{{item.id}}" ng-if="::item.noteable_type == \'Commit\'"></a>\n        <a name="mr-comment-{{item.id}}" ng-if="::item.noteable_type == \'MergeRequestBean\'"></a>\n        <a name="pr-comment-{{item.id}}" ng-if="::item.noteable_type == \'PullRequestBean\'"></a>\n        <a ng-href="{{::item.author.path}}">\n            <img class="ui avatar image" height="32" ng-src="{{::item.author.avatar }}"/>\n        </a>\n        <div class="comment-detail" ng-class="{arrow: !inline}">\n            <div class="content markdown" clip-copy-code="pre" cg-highlight="item.content">\n            </div>\n            <div class="time">\n                <span class="mr10">{{::item.author.name}}</span>\n                <span class="mr10">\n                    <i class="time icon"></i><span cg-friendly-time="item.created_at"></span>\n                </span>\n                <span class="mr10" ng-if="USER">\n                    <a class="gray reply" ng-click="replyComment(item)" cg-scroll-to scroll-to="#diff-comment-editor{{inline ? position : \'\'}}" offset="70">\n                        <i class="chat outline icon"></i>回复\n                    </a>\n                </span>\n                <span class="mr10">\n                    <a class="gray remove" ng-click="deleteComment(item);" ng-if="USER.id == item.author.id || (PROJECT | isRole:OWNER)">\n                        <i class="remove icon"></i>删除\n                    </a>\n                </span>\n            </div>\n        </div>\n    </div>\n    <form class="comment form" ng-class="{inline: inline}" ng-if="USER" ng-show="$parent.showForm">\n        <a ng-href="{{::USER.path}}" ng-if="::!inline">\n            <img class="ui avatar image" height="32" ng-src="{{USER.avatar}}"/>\n        </a>\n        <div class="comment-detail" ng-class="{arrow: !inline}">\n            <div id="diff-comment-editor{{inline ? position : \'\'}}"\n                 editor-id="diff-comment-editor{{inline ? position : \'\'}}"\n                 cg-light-md-editor="commentDiff"\n                 data-ng-model="commentContent"\n                 at-item="atConfig.target"\n                 at-context-type="atConfig.type"\n                 extra-item="atConfig.extra"\n                 project_dependency="PROJECT">\n            </div>\n        </div>\n    </form>\n    <div class="small ui button add-comment" ng-if="USER && inline" ng-hide="$parent.showForm" ng-click="$parent.showCommentForm()">添加评论</div>\n    <div class="small ui button cancel-comment" ng-if="USER && inline" ng-show="$parent.showForm" ng-click="cancelComment()">取消</div>\n</div>\n'),a.put("git/directives/file-navigation/file-navigation.html",'<div class="ui large breadcrumb tree-nav">\n    <div ng-if="type != \'blame\'" class="refs dropdown box nav-refs">\n        <span class="refs selector" cg-ref-selector-dropdown=".ui.teal.dropdown.refs"\n              cg-search-focus=".refs.search">\n          <div class="refs ref-block">\n              <i class="code fork icon"></i>\n              <span class="refs ref">{{ref | decodeUri}}</span>\n          </div>\n        </span>\n\n        <div class="ui teal dropdown refs">\n            <div class="menu">\n                <div>\n                    <div class="item search">\n                        <input type="search" class="refs search" ng-model="query"/>\n                    </div>\n                    <div class="item refs">\n                        <ul class="tab refs" ng-model="tab"\n                                >\n                            <li ng-click="tab = 1">\n                                <a class="tab" ng-class="{active:tab==1?\'active\':\'\'}">{{\'branches\' | i18n:\'file_navigator\'}}</a>\n                            </li>\n                            <li ng-click="tab = 2">\n                                <a class="tab" ng-class="{active:tab==2?\'active\':\'\'}">{{\'tags\' | i18n:\'file_navigator\'}}</a>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n                <div ng-switch on="tab">\n                    <div ng-switch-when="1" class="items box"\n                         refs-total="{{branches.length}}"\n                            >\n                        <a ng-href="{{PROJECT.project_path}}/git/{{type}}/{{branch.name | encodeGitUri}}/{{path}}"\n                           ng-repeat="branch in branches | filter:query" ng-if="branches.length > 0">\n                            <div class="item">\n                                <i class="checkmark icon"\n                                   ng-style="{\'visibility\':ref == branch.name ? \'visible\':\'hidden\'}"></i>{{branch.name}}\n                            </div>\n                        </a>\n\n                        <div ng-if="branches.length <= 0 || !branches" class="item">\n                            <i class="checkmark icon" style="visibility: hidden;"></i>\n                            {{\'no_branches\' | i18n:\'file_navigator\'}}\n                        </div>\n                    </div>\n                    <div ng-switch-when="2" id="tags_items" class="items box"\n                         refs-total="{{tags.length}}"\n                            >\n                        <a ng-href="{{PROJECT.project_path}}/git/{{type}}/{{tag.name | encodeGitUri}}/{{path}}"\n                           ng-repeat="tag in tags | filter:query" ng-if="tags.length > 0">\n                            <div class="item">\n                                <i class="checkmark icon"\n                                   ng-style="{\'visibility\':ref == tag.name ? \'visible\':\'hidden\'}"></i>{{tag.name}}\n                            </div>\n                        </a>\n\n                        <div class="item" ng-if="tags.length <= 0 || !tags">\n                            <i class="checkmark icon" ng-style="{\'visibility\':ref == tag.name ? \'visible\':\'hidden\'}"></i>\n                            {{\'no_tags\' | i18n:\'file_navigator\'}}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="active nav-buttons" ng-if="type == \'blob\' || type == \'tree\'">\n        <div class="ui buttons">\n            <a class="ui small button"\n               ng-if="type == \'tree\' && can_edit"\n               ng-href="{{PROJECT.project_path}}/git/new/{{ref}}/{{path}}">\n                <i class="plus basic icon"></i>{{\'create_new_file\' | i18n:\'file_navigator\'}}\n            </a>\n            <a class="ui small button"\n               ng-if="type == \'tree\' && can_edit"\n               ng-href="{{PROJECT.project_path}}/git/upload/{{ref}}/{{path}}">\n                <i class="upload cloud icon"></i>{{\'upload_files\' | i18n:\'file_navigator\'}}\n            </a>\n            <a class="ui small button"\n               ng-if="type == \'blob\' || type == \'tree\'"\n               ng-href="{{PROJECT.project_path}}/git/find/{{ref}}">\n                <i class="search icon"></i>{{\'find_file\' | i18n:\'file_navigator\'}}\n            </a>\n        </div>\n\n        <a class="ui small button" ng-href="{{PROJECT.project_path}}/git/commits/{{ref}}/{{path}}">\n            <i class="time icon"></i>{{\'history\' | i18n:\'file_navigator\'}}\n        </a>\n        <a class="ui small button"\n           ng-if="path == \'/\' || path == \'\'"\n           target="_blank"\n           ng-href="https://ide.coding.net/ws/?ownerName={{PROJECT.owner_user_name}}&projectName={{PROJECT.name}}">\n            <i class="edit icon"></i>WebIDE\n        </a>\n        <a class="ui small button"\n           ng-if="type != \'commits\' && type != \'new\' && type != \'upload\' && !path"\n           target="_self" ng-href="{{PROJECT.project_path}}/git/archive/{{ref}}">\n            <i class="cloud download icon"></i>{{\'download\' | i18n:\'file_navigator\'}}\n        </a>\n    </div>\n\n    <div class="nav-breadcrumb">\n        <a class="active section" href="{{PROJECT.project_path}}/git/tree/{{ref}}">{{PROJECT.name}}</a>\n\n        <div class="divider"> /</div>\n\n        <span cg-git-bread-crumb ref="ref" path="path" ng-if="ref && path" context="{{context}}"></span>\n        <span ng-if="isHead && type == \'tree\'  && path && (PROJECT | isRole:MEMBER)"><div\n                class="divider"> /\n        </div></span>\n        <span ng-if="type == \'new\' && !!path && (PROJECT | isRole:MEMBER)"><div\n                class="divider"> /\n        </div></span>\n        <span ng-show="type == \'new\'" class="ui coding small input"><input type="text" ng-model="file.title"\n                                                                        ng-change="checkTitle()"></span>\n    </div>\n\n    <div ng-show="type == \'new\'" class="git-new-file-select">\n        <span ng-show="showLicense || showGitIgnore">{{\'choose_template\' | i18n:\'file_navigator\'}}</span>\n        <select ng-show="showLicense" ui-select2="{width: \'250px\'}" ng-model="gitLicense"\n                ng-include="\'app/user/license.html\'" ng-change="changeLicense(gitLicense)"></select>\n        <select ng-show="showGitIgnore" ui-select2="{width: \'250px\'}" ng-model="gitIgnore"\n                ng-include="\'app/user/gitignore.html\'" ng-change="changeGitIgnore(gitIgnore)"></select>\n    </div>\n\n    <div class="clearfix"></div>\n\n</div>\n'),a.put("git/directives/readme/readme.html",'<div class="readme">\n    <div class="readme-title">\n        <p><i class="book icon"></i> {{readme.name}}</p>\n    </div>\n    <div class="file-box">\n        <div class="file-preview">\n            <div class="blobmd">\n                <div class="markdown-body" clip-copy-code="pre"\n                    ng-if="readme.previewed" cg-highlight="readme.preview"></div>\n                <pre ng-if="!readme.previewed">{{readme.data}}</pre>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("git/directives/release-attachment-upload/release-attachment-upload.html",'<div class="release-attachment-upload">\n    <div class="uploaded-list" ng-if="attachmentList.length > 0">\n        <table class="ui table">\n            <tr ng-repeat="attachment in attachmentList">\n                <td class="filename">\n                    <div ng-if="!attachment.uploading && !attachment.failed">\n                        <div class="ui input">\n                            <input type="text" value="{{attachment.name}}" ng-model="attachment.name">\n                        </div>\n                    </div>\n                    <div ng-if="!attachment.uploading && attachment.failed || attachment.uploading">\n                        <div class="text">{{attachment.name}}</div>\n                    </div>\n                </td>\n                <td class="file-size">\n                    <div ng-if="!attachment.uploading && !attachment.failed">\n                        ({{attachment.size | bytes:2}})\n                    </div>\n                    <div ng-if="!attachment.uploading && attachment.failed" style="color: #D95C5C;">\n                        上传失败!\n                    </div>\n                    <div ng-if="attachment.uploading">\n                        {{attachment.percentage}}%\n                    </div>\n                </td>\n                <td class="status">\n                    <div ng-if="!attachment.uploading">\n                        <a ng-click="deleteAttachment(attachment)" class="delete-link"><i class="close icon red"></i></a>\n                    </div>\n                    <div ng-if="attachment.uploading">\n                        <i class="loading icon"></i>\n                    </div>\n                </td>\n            </tr>\n        </table>\n    </div>\n    <div class="upload-zone" ng-style="attachmentList.length > 0 && {\'border-top\': 0}">\n        <div class="upload-zone-message upper"><i class="upload cloud icon"></i>点击或将文件拖拽至此页面上传！</div>\n        <div class="upload-zone-message lower">支持所有文件格式，单个文件不超过100M。</div>\n        <input type="file" class="file-input" name="file-input" multiple>\n    </div>\n</div>'),a.put("git/directives/release-resource-reference/release-resource-reference.html",'<div class="release-resource-reference">\n    <div class="detail" ng-class="{\'show-all\': showAllResourceReferenceStyle, \'folded\': !showAllResourceReferenceStyle && resourceReferenceCount > 10}">\n        <div class="title">\n            关联资源\n            <span ng-if="showResourceReferences">({{resourceReferenceCount}})</span>\n            <i class="help icon"\n               data-html="关联资源整合了在评论中提到的其他与本任务相关的任务，讨论，文件，合并请求等资源。任务执行者可以通过编辑关联资源，对列表进行删除。也可以通过在评论里引用新的资源，对本列表进行添加。"\n               data-position="bottom right"\n               data-variation="inverted"\n               cg-popup></i>\n            <span class="add-refer" ng-show="showAdd">\n                <input id="reference_select" class="task-select" type="hidden" />\n                <i class="icon add sign add-reference"\n                   data-html="添加关联资源"\n                   data-position="top center"\n                   data-variation="inverted"\n                   cg-popup></i>\n            </span>\n        </div>\n        <div ng-if="!showResourceReferences">\n            <div class="item no-item">\n                暂时没有关联的资源\n            </div>\n        </div>\n        <div class="item-group" ng-if="resourceReferences.Task && resourceReferences.Task.length > 0">\n            <div class="item" ng-repeat="task in resourceReferences.Task">\n                <a ng-href="{{task.link}}" target="_blank" ng-class="{\'task-finished\': task.status == 2}">\n                    <i class="tasks icon"></i>\n                    #{{task.code}} {{task.title}}\n                </a>\n                <div class="left" ng-show="showAdd">\n                    <i class="remove icon red" ng-click="deleteResource(task)"></i>\n                </div>\n            </div>\n        </div>\n        <div class="item-group" ng-if="resourceReferences.ProjectTopic && resourceReferences.ProjectTopic.length > 0">\n            <div class="item" ng-repeat="topic in resourceReferences.ProjectTopic">\n                <a ng-href="{{topic.link}}" target="_blank">\n                    <i class="chat icon"></i>\n                    #{{topic.code}} {{topic.title}}\n                </a>\n                <div class="left" ng-show="showAdd">\n                    <i class="remove icon red" ng-click="deleteResource(topic)"></i>\n                </div>\n            </div>\n        </div>\n        <div class="item-group" ng-if="resourceReferences.ProjectFile && resourceReferences.ProjectFile.length > 0">\n            <div class="item" ng-repeat="file in resourceReferences.ProjectFile">\n                <a ng-href="{{file.link}}" ng-if="!file.img" target="_blank">\n                    <i class="file icon"></i>\n                    #{{file.code}} {{file.title}}\n                </a>\n                <a ng-href="{{file.link}}" ng-if="file.img" target="_blank" data-html="{{imgPopup(file)}}" cg-popup>\n                    <i class="file icon"></i>\n                    #{{file.code}} {{file.title}}\n                </a>\n                <div class="left" ng-show="showAdd">\n                    <i class="remove icon red" ng-click="deleteResource(file)"></i>\n                </div>\n            </div>\n        </div>\n        <div class="item-group" ng-if="resourceReferences.MergeRequestBean && resourceReferences.MergeRequestBean.length > 0">\n            <div class="item" ng-repeat="merge_request in resourceReferences.MergeRequestBean">\n                <a ng-href="{{merge_request.link}}" target="_blank">\n                    <i class="coding merge-request icon"></i>\n                    #{{merge_request.code}} {{merge_request.title}}\n                </a>\n                <div class="left" ng-show="showAdd">\n                    <i class="remove icon red" ng-click="deleteResource(merge_request)"></i>\n                </div>\n            </div>\n        </div>\n        <div class="load-more" ng-if="showResourceReferences && (resourceReferences.Task.length + resourceReferences.ProjectTopic.length + resourceReferences.ProjectFile.length + resourceReferences.MergeRequestBean.length > 10)" ng-click="showAllResourceReference()">\n            <i class="angle double down icon"></i> 加载更多\n        </div>\n    </div>\n</div>\n'),
a.put("git/edit/delete.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'" class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container" ng-if="!loaded">\n    <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n</div>\n    <div class="container git-container" ng-if="loaded">\n        <div cg-git-file-navigation></div>\n        <div class="ui edit">\n            <div class="ui edit-view">\n                <div class="file-box">\n                    <div class="file-meta clearfix">\n                      <div class="file-name info">\n                          <span class="icon">\n                            <i class="{{fileIcon(file.mode)}}"></i>\n                            <span ng-if="file.mode === \'file\'">file</span>\n                            <span ng-if="file.mode === \'sym_link\'">symbol link</span>\n                          </span>\n                      </div>\n                    </div>\n                    <div class="file-edit">\n                      <p class="file-delete-info">\n                          {{\'delete_file_tips\' | i18n:\'code_delete\':file.name}}\n                      </p>\n                    </div>\n                </div>\n                <form method="post" id="code_edit_submit">\n                    <div class="ui form">\n                        <div class="field commit-message">\n                            <div class="form-opt clearfix">\n                                <span><i class="comment icon"></i>\n                                    {{\'commit_message\' | i18n:\'code_delete\'}}</span>\n                            </div>\n                            <input id="last_commit" name="last_commit" type="hidden" value="{{lastCommit.sha}}"/>\n                            <textarea id="commit-message" name="message" ng-model="message" placeholder="delete file {{file.name}}" ng-change="checkMessage()"></textarea>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <label class="right floated ui small primary button" ng-class="{\'disabled\': !edited}" ng-click="!!edited && submit(message)">\n                <i class="pencil icon"></i>{{\'commit_button\' | i18n:\'code_delete\':(ref|decodeUri)}}\n            </label>\n            <a class="right floated secondary ui small button" ng-href="{{tree_url}}">{{\'cancel\' | i18n:\'code_delete\'}}</a>\n        </div>\n    </div>\n</div>\n'),a.put("git/edit/edit.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'" class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container" ng-if="!loaded">\n     <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n</div>\n    <div class="container git-container" ng-if="loaded">\n        <div cg-git-file-navigation></div>\n        <div class="ui edit">\n            <div class="ui edit-view">\n                <div class="file-box">\n                    <div class="file-meta clearfix">\n                        <a ng-if="!previewed && is_markdown(file.name)" class="right floated secondary ui small button" ng-click="preview_md()">{{\'preview\' | i18n:\'code_edit\'}}</a>\n                        <a ng-if="previewed" class="right floated secondary ui small button" ng-click="close_preview()">{{\'close_preview\' | i18n:\'code_edit\'}}</a>\n                        <div class="file-name info">\n                            <span class="icon"><i class="text file outline icon"></i>file</span>\n                            <!--<span class="meta-divider"></span>-->\n                            <!--<span class="file-lines">122lines</span>-->\n                            <span class="meta-divider"></span>\n                            <span class="file-size">{{file.size | bytes:2}}</span>\n                        </div>\n                    </div>\n                    <div>\n                        <div ng-show="previewed" class="markdown-body blobmd" ng-bind-html="previewed_data"></div>\n                    </div>\n                    <div ng-show="blob.length>=0 && !previewed" class="file-edit">\n                        <pre id="code-editor" class="code-editor" ui-ace="aceSettings" ng-model="blob"></pre>\n                    </div>\n                </div>\n                <form method="post" id="code_edit_submit">\n                    <div class="ui form">\n                        <div class="field commit-message">\n                            <div class="form-opt clearfix">\n                                <span><i class="comment icon"></i>{{\'commit_message\' | i18n:\'code_edit\'}}</span>\n                            </div>\n                            <input id="last_commit" name="last_commit" type="hidden" value="{{lastCommit.sha}}"/>\n                            <input id="file_content" name="content" type="hidden" value=""/>\n                            <textarea id="commit-message" name="message" ng-model="message"></textarea>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <label class="right floated ui small primary button" ng-class="{\'disabled\': !edited}" ng-click="!!edited && applyEdit(message)">\n                <i class="pencil icon"></i>{{\'commit_to_branch\' | i18n:\'code_edit\':(ref | decodeUri)}}\n            </label>\n            <a class="right floated secondary ui small button" ng-href="{{blob_url}}">{{\'cancel\' | i18n:\'code_edit\'}}</a>\n        </div>\n    </div>\n</div>\n'),a.put("git/edit/new.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'" class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container" ng-if="!loaded">\n    <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n</div>\n    <div class="container git-container" ng-if="loaded">\n        <div cg-git-file-navigation></div>\n        <div class="ui edit">\n            <div class="ui edit-view">\n                <div class="file-box">\n                    <div class="file-meta clearfix">\n                        <a ng-if="!previewed && is_markdown" class="right floated secondary ui small button" ng-click="preview_md()">{{\'preview\' | i18n:\'code_edit\'}}</a>\n                        <a ng-if="previewed" class="right floated secondary ui small button" ng-click="close_preview()">{{\'close_preview\' | i18n:\'code_edit\'}}</a>\n                        <div class="file-name info">\n                            <span class="icon"><i class="text file outline icon"></i>file</span>\n                        </div>\n                    </div>\n                    <div>\n                        <div ng-show="previewed" class="markdown-body blobmd" ng-bind-html="previewed_data"></div>\n                    </div>\n                    <div class="file-edit" ng-show="!previewed">\n                        <pre id="code-editor" class="code-editor" ui-ace="aceSettings" ng-model="file.content"></pre>\n                    </div>\n                </div>\n                <form method="post" id="code_edit_submit">\n                    <div class="ui form">\n                        <div class="field commit-message">\n                            <div class="form-opt clearfix">\n                                <span><i class="comment icon"></i>{{\'commit_message\' | i18n:\'code_edit\'}}</span>\n                            </div>\n                            <input id="last_commit" name="last_commit" type="hidden" value="{{lastCommit.sha}}"/>\n                            <textarea id="commit-message" name="message" ng-model="message" placeholder="new file {{file.title}}"></textarea>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <label class="right floated ui small primary button" ng-click="submit(message)">\n              <i class="pencil icon"></i>{{\'commit_to_branch\' | i18n:\'code_edit\':(ref | decodeUri)}}\n            </label>\n            <a class="right floated secondary ui small button" ng-href="{{tree_url}}">{{\'cancel\' | i18n:\'code_edit\'}}</a>\n        </div>\n    </div>\n</div>\n'),a.put("git/edit/upload.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'" class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container" ng-if="!loaded">\n    <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n</div>\n    <div class="container git-container" ng-if="loaded">\n        <div cg-git-file-navigation></div>\n        <div cg-upload-files></div>\n    </div>\n</div>\n<div class="ui page dimmer" id="git_upload_dragenter">\n    <div class="content" style="box-sizing: border-box; padding: 50px">\n        <div class="content" style="border: 2px dashed #fff;">\n            <div class="center">\n'+"                <span style=\"font-size: 24px;;line-height: 40px;\"><i class=\"upload cloud icon\"></i><span>{{'upload_to_dir' | i18n:'code_upload'}}</span><br/><span>{{'support_format' | i18n:'code_upload'}}</span></span>\n            </div>\n        </div>\n    </div>\n</div>\n"),a.put("git/find/find.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'"\n        class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div ng-if="!loaded" class="container">\n        <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n    </div>\n    <div ng-if="loaded" class="container">\n        <div class="finder" ng-keydown="reactFinderKeyEvent($event)">\n            <div class="ui large breadcrumb finder-bar">\n                <div class="finder-project">\n                    <a class="active section" href="{{PROJECT.project_path}}/git/tree/{{ref}}">{{PROJECT.name}}</a>\n                    <div class="divider"> /</div>\n                </div>\n                <div class="ui input finder-field-wrapper">\n                    <input type="text" class="tree-finder-field" cg-auto-focus ng-change="find(finderField)" ng-model="finderField">\n                </div>\n                <div class="finder-escaper-wrapper">\n                    <a class="ui small button" ng-href="{{PROJECT.project_path}}/git/tree/{{ref}}">{{\'exit\' | i18n:\'code_find_file\'}}</a>\n                </div>\n            </div>\n            <div class="keyboard-help-message" ng-if="showKeyboardHelpMessage">\n                <div class="content">\n                    <p ng-bind-html="keyboradHelpMessage"></p>\n                </div>\n                <div class="close-button">\n                    <a ng-click="hideKeyboardHelpMessage()" class="close-link">\n                        <i class="close icon"></i>\n                    </a>\n                </div>\n            </div>\n            <div class="finder-result">\n                <div class="files-list" ng-if="filteredTreeList.length">\n                    <table class="files">\n                        <tr ng-repeat="file in filteredTreeList | limitTo:50"\n                            ng-class="resultPointer === $index && \'active\'"\n                            ng-mouseover="mouseHoverResultItem($index)"\n                            cg-scroll-to-finder-result-item="resultPointer === $index && isFinderKeyEvent">\n                            <td class="icon">\n                                <i class="file outline icon"></i>\n                            </td>\n                            <td class="path">\n                                <div class="truncate">\n                                    <a ng-href="{{PROJECT.project_path}}/git/blob/{{ref}}/{{file.path}}"\n                                       ng-bind-html="file.html"></a>\n                                </div>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n                <div class="not-found-msg" ng-if="!filteredTreeList.length">\n'+"                    <h4>{{'nothing_found' | i18n:'code_find_file':finderField}}</h4>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"),a.put("git/forks/forks.html",'<div class="public-project-view">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div class="container" ng-if="!loaded">\n     <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n</div>\n    <div class="forks container" ng-if="loaded">\n        <div>\n            <h2>Fork 了 {{PROJECT.name}} 的人</h2>\n            <hr>\n            <p>{{PROJECT.name}} 项目由 {{rootDepot.owner.name}} 发起。此处显示的是 {{PROJECT.name}} 的 Fork 树。</p>\n            <div class="ui divided list pr-list">\n                <div class="item" ng-repeat="depot in list" ng-class="{\'children\': depot.id != depot.root_id, \'last-children\': $index == list.length-1}">\n                    <div class="line" ng-if="depot.id != depot.root_id">\n                            <hr class="line cross-line">\n                    </div>\n                    <div class="item" ng-class="{child: depot.id != depot.root_id}">\n                        <a href="/u/{{depot.owner.global_key}}">\n                            <img class="ui avatar image" ng-src="{{depot.owner.avatar}}">\n                        </a>\n\n                        <div class="content">\n                            <div class="header">\n                                <a href="{{depot.depot_path}}">{{depot.path}}</a>\n                                <span class="root-label" ng-if="depot.id == depot.root_id">根项目</span>\n                            </div>\n                            <span class="author">{{depot.owner.name}} {{depot.id == depot.root_id ? \'创建\':\'Fork\'}}于</span>\n                            <span class="time" cg-friendly-time="depot.created_at"></span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div cg-pager="{{pager_id}}" class="center"></div>\n</div>\n'),a.put("git/graph/graph.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'"\n         class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n\n    <div class="graph container git">\n        <h4 ng-if="!PROJECT.is_public" class="header">{{\'statistics_title\' | i18n:\'code_statistics\'}}</h4>\n\n        <div ng-if="!PROJECT.is_public" class="ui divider"></div>\n\n        <div ng-if="!loaded">\n            <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n        </div>\n\n        <select ui-select2="{width:\'250px\'}" ng-show="loaded" ng-model="current_branch" ng-change="changeCurrentBranch(current_branch)">\n            <option\n                ng-repeat="branch in branches"\n                value="{{branch.name}}">\n                {{branch.name}}\n            </option>\n        </select>\n\n        <div class="graph view" ng-show="loaded">\n            <h3 id="date_header" class="page-title"></h3>\n            <input id="brush_change" type="hidden"/>\n\n            <div class="graphs">\n                <div id="contributors-master">\n                </div>\n                <div id="contributors" class="clearfix">\n                    <ol class="contributors-list clearfix">\n                    </ol>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("git/merge/index.html",'<div ng-include="\'app/git/partial/inner_menu.html\'"\n     class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n<div class="container" style="padding: 25px 25px 0 25px;">\n<div id="merge-request-list" class="pull-request container git-container">\n    <div class="ui dividing header clearfix">\n        {{\'merge_request\' | i18n:\'code_merge\'}}<span ng-if="loaded && merges"> ({{merges.totalRow}})</span>\n        <span style="float: right;" class="inline field">\n            <div class="ui toggle checkbox" ng-show="isExpActive(\'lint\')" style="margin-right: 30px; vertical-align: bottom;">\n                <input type="checkbox" ng-model="auto_lint" id="auto-lint-toggle" ng-change="submitAutoLint(auto_lint)">\n                <label for="auto-lint-toggle">{{\'auto_lint\' | i18n:\'code_merge\'}}\n                    <i class="help icon" cg-popup="popupOptions" data-html="<p>{{\'auto_lint_tips\' | i18n:\'code_merge\'}}</p>"></i>\n                </label>\n            </div>\n            <a class="green ui  button" ng-href="{{PROJECT.project_path}}/git/merge/create">{{\'new_merge_request\' | i18n:\'code_merge\'}}</a>\n        </span>\n    </div>\n    <div class="search-filter" ng-if="showClearFilter()">\n        {{\'search_options\' | i18n:\'code_merge\'}}{{ filterTitle }}\n        <i class="remove circle icon" ng-click="clearFilter()"></i>\n    </div>\n    <div class="search clearfix">\n        <div class="search-box">\n            <i class="small search icon"></i>\n            <input type="text" ng-model="keyword" cg-enter="updateSearch()" cg-esc-blur></input>\n        </div>\n        <div class="filters" ng-repeat="key in filterKeys" cg-search-filter filter="filters[key]" callback="doFilter(key)" ng-show="filters[key].data.length > 0"></div>\n    </div>\n    <div ng-if="!loaded">\n        <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n    </div>\n    <div ng-if="loaded && merges.list" class="merge-request-list" ng-repeat="merge_request in merges.list">\n        <div class="merge-request-list-item">\n            <div class="status">\n                <i class="{{statusIcon(merge_request).class}}" title="{{statusIcon(merge_request).alert}}" cg-popup="statusPopupOptions"></i>\n            </div>\n            <div class="content">\n                <div class="header">\n                    <a href="{{merge_request.path}}" ng-click="mrClick(merge_request, $event)">{{merge_request.title}}</a>\n                    <span ng-repeat="tag in merge_request.labels" class="tag"\n                      cg-tag-color="tag.color"\n                      ng-bind-html="::tag.name"></span>\n                </div>\n                <div class="footer">\n                    <span class="mr-id">#{{merge_request.iid}}</span>\n                    <a class="mr-author" ng-href="{{merge_request.author.path}}" title="{{merge_request.author.name}}">{{merge_request.author.name}}</a>\n                    <i class="time icon"></i>\n                    <span class="time" cg-friendly-time="merge_request.created_at"></span>\n                    <i class="chat outline icon"></i>\n                    <span class="time">{{merge_request.comment_count}} {{\'comments\' | i18n:\'code_merge\'}}</span>\n                </div>\n            </div>\n            <div class="reviewers">\n                <a ng-repeat="reviewer in merge_request.reviewers.slice(0, 3) track by $index"\n                    ng-class="{\'review-good\': reviewer.value === 100}"\n                    ng-href="{{reviewer.reviewer.path}}"\n                    title="{{reviewer.value === 100 ? reviewer.reviewer.name + (\'already_reviewed\' | i18n:\'code_merge\') : (\'reviewer\' | i18n:\'code_merge\') + reviewer.reviewer.name}}" cg-popup="statusPopupOptions">\n                    <img ng-src="{{reviewer.reviewer.avatar}}" />\n                </a>\n                <a class="more" ng-if="merge_request.reviewers.length > 3">...</a>\n            </div>\n        </div>\n    </div>\n    <div ng-show="loaded" cg-pager="{{pager_id}}" class="center"></div>\n    <div ng-if="loaded && (!merges.list || merges.list.length == 0)">\n        <div ng-include="\'app/git/partial/_back-monkey.html\'"></div>\n        <p class="ui coding aligned center" style="margin-top: 55px;"><strong style="font-size: 18px;">{{\'no_result\' | i18n:\'code_merge\'}}</strong></p>\n    </div>\n</div>\n</div>\n'),a.put("git/merge/merge-modal.html",'<i class="close icon"></i>\n<div class="header">\n    {{\'merge_this_request\' | i18n:\'code_merge\'}}\n</div>\n<form class="top-up-form ui form">\n    <div class="content" style="border-radius: 5px;">\n        <div class="field" style="margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px dotted #ddd;">\n            <div class="" ng-if="isExpActive(\'squash-optimize\') && squash">\n                <div class="warning ui small message" style="display: block; color: #716D2E;">\n                    <p>{{\'squash_and_merge\' | i18n:\'code_merge\'}} {{\'enabled\' | i18n:\'common\'}}</p>\n                    <p style="font-weight: bold;">{{\'squash_and_merge_tip\' | i18n:\'code_merge\'}}</p>\n                </div>\n            </div>\n            <label style="color: #444; margin-bottom: 10px;">{{\'commit_message\' | i18n:\'code_merge\'}}</label>\n            <textarea ng-model="merge_request.commit_message"></textarea>\n            <div style="margin-top: 10px" class="ui checkbox" ng-show="can_edit_src_branch && DEPOT.default_branch != merge_request.srcBranch">\n                <input type="checkbox" id="merge_request_delSourceBranch" ng-model="merge_options.delSourceBranch" />\n                <label for="merge_request_delSourceBranch">{{\'delete_src_branch\' | i18n:\'code_merge\'}}</label>\n            </div>\n            <div style="margin-top: 10px" class="ui checkbox">\n                <input type="checkbox" id="merge_request_fastforward" ng-model="merge_options.fastforward" />\n                <label for="merge_request_fastforward">{{\'fastforward_merge\' | i18n:\'code_merge\'}}</label>\n            </div>\n        </div>\n        <div class="field" style="margin: 0; text-align: right;">\n            <div class="ui button" ng-click="toggleMergeModal()">{{\'cancel\' | i18n:\'code_merge\'}}</div>\n            <div class="ui button green" ng-show="loaded" ng-click="merge(merge_request);">{{\'merge\' | i18n:\'code_merge\'}}</div>\n            <div class="ui button green" ng-show="!loaded"><i class="loading icon"></i></div>\n        </div>\n    </div>\n</form>\n'),a.put("git/merge/new.html",'<style>\n    .public-project-view #merge-create-tabular > .item.active {\n        background-color: #FFF !important;\n        border-bottom: 1px solid #FFF !important;\n    }\n\n    #merge-create-tabular > .item.active {\n        background-color: #F7F6F2 !important;\n        border-bottom: 1px solid #F7F6F2 !important;\n    }\n    #merge-request-create .git.select2 .select2-container {\n        margin: 0;\n    }\n</style>\n<div id="merge-request-create" ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'"\n         class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="pull-request container git-container">\n        <h4 ng-if="!PROJECT.is_public">\n            {{\'merge_request\' | i18n:\'code_merge\'}}\n            <i class="attention icon" data-html="<p>{{\'new_mr_tip1\' | i18n:\'code_merge\'}}</p>\n                <p>{{\'new_mr_tip2\' | i18n:\'code_merge\'}}</p>" data-position="bottom right" cg-popup></i>\n        </h4>\n\n        <div ng-if="!PROJECT.is_public" class="ui divider"></div>\n        <form class="ui form segment" ng-submit="submitMergeRequest(mr_create);" method="post">\n            <div class="two fields">\n                <div class="field git select2">\n                    <label>{{\'src_branch\' | i18n:\'code_merge\'}}</label>\n                    <select ui-select2="{width:\'250px\'}" id="mr-src-branches" ng-model="mr_create.srcBranch"\n                            ng-change="createMergeRequest(mr_create.srcBranch, mr_create.desBranch)">\n                        <option\n                                ng-repeat="branch in branches"\n                                value="{{branch.name}}">\n                            {{branch.name}}\n                        </option>\n                    </select>\n                </div>\n                <div class="field git select2">\n                    <label>{{\'des_branch\' | i18n:\'code_merge\'}}</label>\n                    <select ui-select2="{width:\'250px\'}" id="mr-des-branches" ng-model="mr_create.desBranch"\n                            ng-change="createMergeRequest(mr_create.srcBranch, mr_create.desBranch)">\n                        <option\n                                ng-repeat="des_branch in branches"\n                                value="{{des_branch.name}}">\n                            {{des_branch.name}}\n                        </option>\n                    </select>\n                </div>\n            </div>\n            <div ng-if="loaded" ng-include="\'app/git/partial/_loading.html\'"></div>\n            <div class="field" ng-show="showDiff && !loaded">\n                <div class="ui input fullscreen-title">\n                    <input type="text" name="title" placeholder="{{\'input_mr_title\' | i18n:\'code_merge\'}}"\n                           ng-model="mr_create.title">\n                </div>\n            </div>\n\n            <div class="field" ng-show="showDiff && !loaded">\n                <div class="ui input" cg-pagedown="contentUpdate($content)" id="-1" ng-model="mr_create.content">\n                    <textarea placeholder="{{\'input_mr_description\' | i18n:\'code_merge\'}}"\n                        ng-model="mr_create.content"\n                        cg-refer-resource="PROJECT"\n                        cg-at-context\n                        at-context-type="\'merge_request\'"\n                        at-item="PROJECT"\n                        cg-at-emoji\n                        cg-textarea-editable></textarea>\n                </div>\n            </div>\n\n            <div class="two fields" ng-show="showDiff && !loaded">\n                <div class="field git select2 ">\n                    <label>{{\'code_review\' | i18n:\'code_merge\'}}</label>\n                    <div cg-member-selector\n                        cg-ms-selected="reviewers"\n                        cg-ms-project="PROJECT" cg-ms-members="members"\n                        style="width: 250px;"\n                        class="no-tips hover-remove"></div>\n                </div>\n\n                <div class="field git select2">\n                    <label>{{\'task_ref\' | i18n:\'code_merge\'}}</label>\n                    <div class="mr-tasks">\n                        <div class="mr-task" ng-repeat="task in tasks">\n                            <span>\n                                <i class="icon tasks"></i>\n                                <a ng-href="{{task.link}}" target="_blank">\n                                    #{{task.code}}\n                                    {{task.title}}\n                                </a>\n                                <i class="icon remove red floated right" ng-click="task_remove(task)"></i>\n                            </span>\n                        </div>\n                    </div>\n                    <div ng-show="tasks.length < 3">\n                        <input id="mr_task_select" class="task-select" type="hidden" />\n                    </div>\n                </div>\n            </div>\n\n            <div ng-if="showDiff" class="fullscreen-title-right-buttons">\n                <input ng-if="!submiting" type="submit" value="{{\'submit\' | i18n:\'code_merge\'}}" class="ui blue submit button"/>\n                <div ng-if="submiting" class="ui blue submit button" style="width: 70px;"><i class="loading icon" style="margin: 0"></i></div>\n            </div>\n        </form>\n\n        <div ng-if="!showDiff && !loaded && can_merge" class="yellow ui message">\n            {{\'auto_new_mr_tip\' | i18n:\'code_merge\'}}\n            <p><a target="_blank" href="https://coding.net/u/coding/pp/109336">{{\'see_more\' | i18n:\'code_merge\'}}</a></p>\n        </div>\n        <div ng-if="!showDiff && !loaded && !can_merge" class="red ui message">\n            {{\'cannot_create_mr\' | i18n:\'code_merge\'}}\n        </div>\n\n        <div ng-if="showDiff && !loaded">\n            <h4 class="ui header">{{\'change_details\' | i18n:\'code_merge\'}}</h4>\n\n            <div class="ui divider"></div>\n\n            <div id="merge-create-tabular" class="ui tabular menu">\n                <a class="item" ng-class="{active: show_diff == \'commits\'}" ng-click="switchTab(\'commits\')">\n                    {{\'commits\' | i18n:\'code_merge\'}} <span class="commits-count">{{commits.length || \'0\'}}</span>\n                </a>\n                <a class="item" ng-class="{active: show_diff == \'files\'}" ng-click="switchTab(\'files\')">\n                    {{\'file_changes\' | i18n:\'code_merge\'}} <span class="commits-count" ng-if="diffStat.paths.length && diffStat.paths.length>0">{{diffStat.paths.length}}</span>\n                </a>\n            </div>\n\n            <div cg-git-commit-list commits="commits" class="commits" ng-show="show_diff == \'commits\'"></div>\n            <div ng-show="show_diff == \'files\'" cg-git-diff-show diff-stat="diffStat" diff-mode="diffMode" diff-html="diffHtml" enable-whitespace="enableWhitespace" commit-id="commitId" base-commit-id="baseCommitId"></div>\n        </div>\n\n    </div>\n</div>\n'),a.put("git/merge/show.html",'<style>\n    .public-project-view #merge-show-tabular > .item.active {\n        background-color: #FFF!important;\n        border-bottom: 1px solid #FFF!important;\n    }\n    #merge-show-tabular > .item.active {\n        background-color: #F7F6F2!important;\n        border-bottom: 1px solid #F7F6F2!important;\n    }\n</style>\n<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'"\n         class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div ng-if="!loaded" class="container">\n            <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n    </div>\n    <div ng-show="loaded" class="pull-request container git-container" style="min-width: 800px;">\n        <div style="max-width:1200px;">\n            <div class="mr-title">\n                <textarea ng-model="merge_request_title"\n                          cg-clickable-textarea-link\n                          ng-show="merge_request.merge_status === \'CANMERGE\' || merge_request.merge_status === \'CANNOTMERGE\'"\n                          cg-enter="updateTitle($event, merge_request_title);"\n                          ng-blur="updateTitle($event, merge_request_title);"></textarea>\n                <div ng-show="merge_request.merge_status !== \'CANMERGE\' && merge_request.merge_status !== \'CANNOTMERGE\'" class="ellipsis">\n                    {{ merge_request.title }}\n                </div>\n            </div>\n\n            <div class="layout-content-right-menu" style="margin-bottom: 30px;">\n                <div class="layout-content merge-request-layout">\n                    <div class="mr-action">\n                        <span class="coding floated left mr-status {{merge_request.merge_status.toLowerCase()}}">\n                            {{merge_request.merge_status | mergeStatusHuman}}\n                        </span>\n                        <span class="mr-label src">{{merge_request.srcBranch}}</span>\n                        <i class="long arrow right icon"></i>\n                        <span class="mr-label des">{{merge_request.desBranch}}</span>\n                    </div>\n\n                    <div class="mr-content" ng-class="{\'editing\': editing}">\n                        <i class="edit icon" ng-show="showEditContentIcon(USER, merge_request)" ng-class="{\'pencil\': !editing, \'align right roate180\': editing}" ng-click="toggleEditing()"></i>\n                        <div ng-if="!editing" clip-copy-code="pre" class="markdown content" cg-highlight="merge_request.body" cg-page-scroll></div>\n                        <div cg-light-md-editor="edit"\n                             ng-if="editing"\n                             editor-id="merge-request-content-editor"\n                             data-placeholder="{{\'input_mr_description\' | i18n:\'code_merge\'}}"\n                             class="editor"\n                             ng-model="merge_request.body_plan"\n                             cg-refer-resource="project_dependency"\n                             at-item="atConfig.target"\n                             at-context-type="atConfig.type"\n                             extra-item="atConfig.extra"\n                             ng-show="editing"\n                             img-compression="false"\n                             project_dependency="PROJECT"\n                             image_picker_mode="\'md-editor down\'"\n                             on-change="onContentChange"\n                             show-submit="true"\n                             on-preview="allLoadingDone"></div>\n                        <div class="empty content" ng-if="!editing && (!merge_request.body_plan && merge_request.body_plan.length == 0)" ng-click="toggleEditing()">\n                            <i class="coffee icon"></i>\n                            {{\'no_description\' | i18n:\'code_merge\'}}\n                        </div>\n                    </div>\n                    <div ng-if="merge_request.merge_status == \'CANNOTMERGE\' || merge_request.merge_status == \'CANMERGE\'" style="height: 30px;margin-bottom: 30px;">\n\n                        <div class="ui coding button blue floated disabled" ng-if="!can_merge" data-content="{{can_merge_hint}}" cg-popup="popupOptions">{{\'merge\' | i18n:\'code_merge\'}}</div>\n                        <div class="ui coding button blue floated" ng-if="can_merge" ng-click="toggleMergeModal()" ng-class="{disabled: merge_request.merge_status === \'CANNOTMERGE\'}">{{\'merge\' | i18n:\'code_merge\'}}</div>\n\n                        <div ng-if="isExpActive(\'squash-optimize\')" style="display: inline-block;" >\n                            <div class="ui checkbox form-group" style="margin-left: 16px;margin-top: 8px;">\n                                <input type="checkbox" ng-model="squash.squash_before_merge"\n                                    id="squash-before-merge-checkbox"\n                                    ng-disabled="force_squash">\n                                <label for="squash-before-merge-checkbox" style="padding-left: 1.5em;">\n                                    <span>{{\'squash_and_merge\' | i18n:\'code_merge\'}}</span>\n                                    <a href="/help/doc/practice/git-principle.html#squash-and-merge" class="icon" target="_blank"><i class="help icon"></i></a>\n                                </label>\n                            </div>\n                        </div>\n\n                        <div class="ui coding button red floated" ng-if="can_merge && USER.id !== merge_request.author.id" ng-click="refuse(merge_request)">{{\'refuse\' | i18n:\'code_merge\'}}</div>\n\n                        <div class="ui coding button floated disabled" ng-show="isExpActive(\'lint\') && (lint_task_stat === \'_NotLoaded\' || lint_task_stat === \'_NeededUpdate\')"><i class="loading icon" style="margin: 0;"></i></div>\n                        <div class="ui coding button floated" ng-show="isExpActive(\'lint\') && lint_task_stat === \'NotFound\'" ng-click="createLintTask()">{{\'code_lint\' | i18n:\'code_merge\'}}</div>\n                        <div class="ui coding button floated disabled" ng-show="isExpActive(\'lint\') && lint_task_stat === \'Created\'">{{\'linting\' | i18n:\'code_merge\'}}<i class="loading icon" style="margin: 0;"></i></div>\n\n                        <div class="ui coding button floated disabled" ng-show="isExpActive(\'lint\') && lint_task_stat === \'Done\'">{{\'lint_done\' | i18n:\'code_merge\'}}</div>\n\n                        <i class="help icon" style="margin: 7px;float: right;"\n                            cg-popup="popupOptions"\n                            data-html="<p>{{\'review_tip_1\' | i18n:\'code_merge\'}}</p>\n                    <p>{{\'review_tip_2\' | i18n:\'code_merge\'}}</p>\n                    <p>{{\'review_tip_3\' | i18n:\'code_merge\'}}</p>\n                    <p>{{\'review_tip_4\' | i18n:\'code_merge\'}}</p>"></i>\n\n                        <div class="ui coding button green floated right" ng-show="can_grant && !grant_submitting && merge_request.granted === 0" ng-click="!grant_submitting && grant()">{{\'grant\' | i18n:\'code_merge\'}}</div>\n                        <div class="ui coding button green floated right" ng-show="can_grant && !grant_submitting && merge_request.granted === 1" ng-click="!grant_submitting && grantUndo()">{{\'cancel_grant\' | i18n:\'code_merge\'}}</div>\n                        <div class="ui coding button green floated right" ng-show="grant_submitting"><i class="loading icon" style="margin: 0;"></i></div>\n\n                        <div class="ui coding button floated right" ng-show="current_reviewer.value === 100 && merge_request.author.global_key !== USER.global_key && !review_submitting" ng-click="reviewGoodUndo()"><i class="icon thumbs down" style="margin:0"></i>{{\'cancel_plus\' | i18n:\'code_merge\'}}</div>\n                        <div class="ui coding button floated right" ng-show="current_reviewer.value === 0 && merge_request.author.global_key !== USER.global_key && !review_submitting" ng-click="reviewGood()"><i class="icon thumbs up" style="margin:0"></i>+1</div>\n                        <div class="ui coding button floated right" ng-show="review_submitting"><i class="loading icon" style="margin: 0;"></i></div>\n                    </div>\n\n                    <cg-resource-reference-list\n                        class="merge-request-reference"\n                        self="merge_request"\n                        show-add="true"\n                        >\n                    </cg-resource-reference-list>\n                </div>\n                <div class="layout-menu" style="width: 150px;">\n                    <div class="merge-request-info-menu">\n                        <div class="merge-request-info-menu-item">\n                            <header>\n                                {{\'reference_id\' | i18n:\'code_merge\'}}\n                            </header>\n                            <span class="merge-request-info-menu-item-content">#{{merge_request.iid}}</span>\n                        </div>\n                        <div class="merge-request-info-menu-item">\n                            <header>{{\'creator\' | i18n:\'code_merge\'}}</header>\n                            <div class="merge-request-info-menu-item-content">\n                                <span class="reviewer-list" ng-href="{{merge_request.author.path}}" ng-style="{\'color\': merge_request.granted === 1?\'#32be77\':\'#333\'}"\n                                    data-html="{{merge_request.granted === 1?\'已获得合并授权\':\'暂未获得合并授权\'}}"\n                                    data-position="bottom center"\n                                    cg-popup>\n                                    <img ng-src="{{merge_request.author.lavatar}}" class="ui image avatar24" />\n                                    <span class="ellipsis">\n                                        {{merge_request.author.name}}\n                                    </span>\n                                </span>\n                            </div>\n                        </div>\n                        <div class="merge-request-info-menu-item with-top-separator">\n                            <header>\n                                {{\'reviewer\' | i18n:\'code_merge\'}}\n                                <i ng-show="merge_request.merge_status == \'CANNOTMERGE\' || merge_request.merge_status == \'CANMERGE\'" class="icon add sign add-reviewer"></i>\n                            </header>\n                            <div class="merge-request-info-menu-item-content">\n                                <span class="reviewer-list" ng-repeat="reviewer in reviewers" ng-href="{{reviewer.reviewer.path}}" ng-class="{\'review-good\':reviewer.value === 100}">\n                                    <img ng-src="{{reviewer.reviewer.lavatar}}" class="ui image avatar24"  />\n                                    <span class="ellipsis">\n                                        {{reviewer.reviewer.name}}\n                                    </span>\n                                    <i ng-show="merge_request.merge_status == \'CANNOTMERGE\' || merge_request.merge_status == \'CANMERGE\'" class="icon remove red" ng-click="delReviewer(reviewer)"></i>\n                                </span>\n                                <a class="reviewer-list" ng-repeat="reviewer in volunteerReviewers" ng-href="{{reviewer.reviewer.path}}" ng-style="{\'color\':reviewer.value === 100?\'#32be77\':\'#333\'}">\n                                    <img ng-src="{{reviewer.reviewer.lavatar}}" class="ui image avatar24" />\n                                    <span class="ellipsis">\n                                        {{reviewer.reviewer.name}}\n                                    </span>\n                                </a>\n                                <span ng-if="reviewers.length === 0" style="font-size:12px;color:#999;">\n                                    {{\'no_reviewers\' | i18n:\'code_merge\'}}\n                                </span>\n                            </div>\n                            <div class="merge-request-info-menu-item-content" style="height: 0;">\n                                <select\n                                    id="merge-request-info-select-reviewer"\n                                    ng-show="merge_request.merge_status == \'CANNOTMERGE\' || merge_request.merge_status == \'CANMERGE\'"\n                                    ng-model="reviewer_select"\n                                    ng-change="addReviewer()">\n                                    <option ng-hide="true" value="0" selected="selected">{{\'please_select\' | i18n:\'code_merge\'}}</option>\n                                    <option\n                                        ng-repeat="member in member_users"\n                                        value="{{member.global_key}}"\n                                        ng-show="member.global_key !== merge_request.author.global_key"\n                                        data-user-avatar="{{member.lavatar}}"\n                                        data-pinyin="{{member.name_pinyin}}">\n                                        {{member.name}}\n                                    </option>\n                                </select>\n                            </div>\n                        </div>\n                        <div class="merge-request-info-menu-item with-top-separator">\n                            <header>\n                                <div class="task-detail-tags" cg-tag-editor="labels"\n                                     mode="task-description-tags"\n                                     tags="tags"\n                                     on-tag-add="onTagAdd"\n                                     on-tag-remove="onTagRemove"\n                                     on-tag-create="onTagCreate"\n                                     on-tag-select="onDetailTagSelect">\n                                </div>\n                            </header>\n                        </div>\n                        <div class="merge-request-info-menu-item with-top-separator" ng-if="merge_request.merge_status == \'CANNOTMERGE\' || merge_request.merge_status == \'CANMERGE\'">\n                            <div class="ui coding button blue " ng-if="!isExpActive(\'squash-optimize\') && showSquash()" ng-click="beforeSquash()" style="width: auto; margin-bottom: 10px;">\n                                <i class="loading icon" ng-if="squashing" style="margin: 0;"></i>squash\n                            </div>\n                            <div class="ui coding button " ng-if="USER.global_key === merge_request.author.global_key" ng-click="cancel(merge_request)" style="width: auto;">{{\'cancel\' | i18n:\'code_merge\'}}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div ng-if="merge_request.merge_status == \'CANNOTMERGE\'" class="ui message">\n                <p><strong>{{\'cannot_merge_tip1\' | i18n:\'code_merge\'}}</strong></p>\n                <div>\n                    <p>{{\'cannot_merge_step1\' | i18n:\'code_merge\'}}<br>\n                    <code>\ngit fetch origin<br>\ngit checkout -b {{merge_request.srcBranch}} origin/{{merge_request.srcBranch}}<br>\ngit merge {{merge_request.desBranch}}\n                    </code>\n                    </p>\n                </div>\n                <p></p>\n                <div>\n                    <p>{{\'cannot_merge_step2\' | i18n:\'code_merge\'}}<br>\n                    <code>\ngit checkout {{merge_request.desBranch}}<br>\ngit merge --no-ff {{merge_request.srcBranch}}<br>\ngit push origin {{merge_request.desBranch}}<br>\n                    </code>\n                    </p>\n                </div>\n            </div>\n        </div>\n\n        <div>\n            <div class="diffstat-block">\n                <span ng-if="loaded" cg-diffstat diffstat="diffStat"></span>\n            </div>\n            <div id="merge-show-tabular" class="ui tabular menu">\n                <a class="item" ng-class="{active: show_diff == \'comments\'}" ng-click="showContent(\'comments\')">\n                    {{\'activities\' | i18n:\'code_merge\'}} <span class="commits-count">{{commentCount || 0}}</span>\n                </a>\n                <a class="item" ng-class="{active: show_diff == \'commits\'}" ng-click="showContent(\'commits\')">\n                    {{\'commits\' | i18n:\'code_merge\'}} <span class="commits-count">{{commits.length || 0}}</span>\n                </a>\n                <a class="item" ng-class="{active: show_diff == \'files\'}" ng-click="showContent(\'files\')">\n                    {{\'file_changes\' | i18n:\'code_merge\'}} <span class="commits-count" ng-if="diffStat.paths.length && diffStat.paths.length>0">{{diffStat.paths.length}}</span>\n                </a>\n            </div>\n        </div>\n\n        <div ng-if="loaded">\n            <div ng-show="show_diff == \'comments\' && !comments_loaded" style="margin-top: 40px;">\n                <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n            </div>\n            <div cg-git-comment ng-show="show_diff == \'comments\' && comments_loaded"></div>\n\n            <div ng-show="show_diff == \'files\'" style="margin-bottom: 40px;" cg-git-diff-show diff-stat="diffStat" diff-mode="diffMode" diff-html="diffHtml" notes-params="notesParams" enable-whitespace="enableWhitespace" edit-file-branch="editFileBranch" base-commit-id="baseCommitId" lint-notes="lintNotes" lint-notes-loaded="lintNotesLoaded"></div>\n\n            <div ng-show="show_diff == \'commits\'" cg-git-commit-list commits="commits" class="commits"></div>\n        </div>\n\n    </div>\n</div>\n\n<div class="ui modal tiny"\n     ng-controller="MergeRequestMergeModalCtrl"\n     cg-modal="mergeRequestMergeModal"\n     ng-include="\'git/merge/merge-modal.html\'"></div>\n\n<div class="ui modal tiny"\n     ng-controller="MergeRequestSquashModalCtrl"\n     cg-modal="mergeRequestSquashModal"\n     ng-include="\'git/merge/squash-modal.html\'"></div>\n'),
a.put("git/merge/squash-modal.html",'<i class="close icon"></i>\n<div class="header">\n    {{\'squash_commits\' | i18n:\'code_merge\'}} ( <span ng-bind="merge_request.srcBranch + \' 分支\'"></span> )\n</div>\n<form class="merge-request-squash-form ui form">\n    <div class="content" style="border-radius: 5px;">\n        <div class="warning ui small message" style="display: block; color: #716D2E;">\n            <p>{{\'squash_commits\' | i18n:\'code_merge\'}}</p>\n            <p style="font-weight: bold;">{{\'squash_tip_1\' | i18n:\'code_merge\'}}</p>\n        </div>\n        <div class="field">\n            <h4 style="color: #444;">{{\'squash_tip_2\' | i18n:\'code_merge\'}}</h4>\n        </div>\n        <div class="field">\n            <textarea class="squash-message"\n                      placeholder="{{\'please_input_commit_message\' | i18n:\'code_merge\'}}"\n                      ng-model="message"\n                      cg-refer-resource="PROJECT"\n                      cg-textarea-editable></textarea>\n        </div>\n        <div class="field" style="margin: 0; text-align: right;">\n            <div class="ui button" ng-click="toggleSquashModal()">{{\'cancel\' | i18n:\'code_merge\'}}</div>\n            <div ng-if="!squashing" class="ui button green" ng-click="squash(message)">{{\'submit\' | i18n:\'code_merge\'}}</div>\n            <div ng-if="squashing" class="ui button green"><i class="loading icon"></i></div>\n        </div>\n    </div>\n</form>\n'),a.put("git/pages/pages.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'" class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container" ng-if="!loaded">\n        <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n    </div>\n    <div ng-show="loaded" class="container">\n        <div class="pages-container">\n            <div class="ui dividing header clearfix">Coding Pages 服务 <a href="https://coding.net/help/doc/pages/index.html" target="_blank" style="color: #0b0b0b"><i class="icon help"></i></a></div>\n            <div class="ui box">\n                <p>\n                Coding Pages 是一个免费的静态网页托管和演示服务，您可以使用 Coding Pages 托管博客、项目官网等静态网页。<a target="_blank" href="/help/doc/pages/index.html">查看帮助</a>\n                </p>\n            </div>\n            <div ng-show="pages_enabled" class="ui green message">\n                <i class="checkmark icon"></i>Coding Pages 已经运行在 <a ng-href="{{main_entry}}" target="_blank" rel="nofollow noopener noreferrer">{{main_entry}}</a>\n            </div>\n\n            <div ng-show="pages_enabled && pages_status.task">\n                <div ng-show="pages_status.task.status === \'SUCCESS\'"\n                     class="ui green message">\n                    <i class="checkmark icon"></i>成功部署 {{deploy_source}}（Commit SHA: <code>{{pages_status.task.commit_sha}}</code>）。\n                </div>\n\n                <div ng-show="pages_status.task.status != \'SUCCESS\' && pages_status.task.status != \'FAILED\'"\n                     class="ui blue message">\n                    <i class="loading icon"></i>正在部署 {{deploy_source}}（Commit SHA: <code>{{pages_status.task.commit_sha}}</code>）。\n                </div>\n\n                <div ng-show="pages_status.task.status === \'FAILED\'"\n                     class="ui red message">\n                    <i class="exclamation icon"></i>部署 {{deploy_source}}（Commit SHA: <code>{{pages_status.task.commit_sha}}</code>）失败！\n                    <a ng-show="!show_build_log"\n                       class="ui green small button coding"\n                       ng-click="show_build_log = true"\n                       style="margin-left: 10px;">查看构建日志</a>\n                    <a ng-show="show_build_log"\n                       class="ui green small button coding"\n                       ng-click="show_build_log = false"\n                       style="margin-left: 10px;">隐藏构建日志</a>\n                    <a class="ui green small button coding" ng-click="redeployPages()" style="margin-left: 10px;">重新部署</a>\n                    <br/>\n                    <div ng-show="show_build_log" class="ui inverted segment build-log">\n                        <pre>{{pages_status.task.build_log}}</pre>\n                    </div>\n                </div>\n            </div>\n\n            <div ng-show="!hasCommits" class="ui yellow message">\n                <i class="exclamation icon"></i>仓库尚未初始化！\n            </div>\n\n            <div class="ui box">\n                <div ng-if="PROJECT | isRole:ADMIN">\n                    <h3>部署来源</h3>\n                    <p ng-show="!pages_enabled">Coding Pages 未运行，请在下面窗口选择部署来源。部署来源仅支持 <code>coding-pages</code> 分支和 <code>master</code> 分支。</p>\n                    <div class="ui fluid selection dropdown coding floated left"\n                         ng-class="{disabled: !hasCommits}"\n                         cg-dropdown="changeFrom"\n                         cg-on-change="changeFrom"\n                         style="width: 200px;">\n                        <div class="text">{{deploy_source}}</div>\n                        <i class="dropdown icon"></i>\n                        <input type="hidden" name="current_input.pages_branch" ng-model="current_input.pages_branch"/>\n\n                        <div class="menu">\n                            <div ng-show="pages_status.deploy_source_status.valid_sources[\'coding-pages\']"\n                                 class="item"\n                                 data-value="coding-pages">\n                                <i class="checkmark icon"\n                                   ng-style="current_input.pages_branch === \'coding-pages\' && {\'visibility\':\'visible\'} || {\'visibility\':\'hidden\'}"></i>coding-pages 分支\n                            </div>\n                            <div ng-show="pages_status.deploy_source_status.valid_sources[\'master\']"\n                                 class="item"\n                                 data-value="master">\n                                <i class="checkmark icon"\n                                   ng-style="current_input.pages_branch === \'master\' && {\'visibility\':\'visible\'} || {\'visibility\':\'hidden\'}"></i>master 分支\n                            </div>\n                            <div ng-show="pages_enabled" class="item" data-value="none">\n                                <i class="checkmark icon"\n                                   ng-style="current_input.pages_branch === \'none\' && {\'visibility\':\'visible\'} || {\'visibility\':\'hidden\'}"></i>关闭\n                            </div>\n                        </div>\n                    </div>\n\n                    <a class="ui green medium button coding floated left"\n                       ng-class="{disabled: !hasCommits}"\n                       ng-click="saveDeploySource(current_input)"\n                       style="margin-left: 10px;">保存</a>\n                    <div class="ui clearfix"></div>\n                </div>\n\n                <div ng-show="!pages_enabled" ng-if="!(PROJECT | isRole:ADMIN)">\n                    <p>暂未开启 Pages 服务，如有需要，请联系项目管理开启。<a href="{{PROJECT.project_path}}/members">查看项目管理员</a></p>\n                </div>\n\n                <div ng-if="pages_enabled">\n                    <div class="ui divider clearfix"></div>\n                    <h3>自定义域名</h3>\n                    <div ng-show="isExpActive(\'vip\') && !pages_status.domains && (!pages_status.membership || pages_status.membership.level == 1)" class="ui red message vip">\n                        <i class="remove sign icon"></i>您的会员等级不够，无法使用自定义域名。升级会员无限制使用自定义域名。<a class="red-link" href="/vip">马上升级</a>\n                    </div>\n                    <div ng-show="isExpActive(\'vip\') && pages_status.domains && (!pages_status.membership || pages_status.membership.level == 1)" class="ui red message vip">\n                        <i class="remove sign icon"></i>您的会员等级不够，无法使用自定义域名。之前绑定的域名依然可以访问，但会先跳转到“Hosted on Coding Pages”页面。升级会员无限制使用自定义域名。<a class="red-link" href="/vip">马上升级</a>\n                    </div>\n                    <div ng-show="isExpActive(\'vip\') && pages_status.membership && pages_status.membership.level == 2" class="ui blue message vip">\n                        <i class="info icon"></i>您当前是银牌会员，使用自定义域名会先跳转到“Hosted on Coding Pages”页面。升级到付费会员无限制使用自定义域名。<a class="blue-link" href="/vip">马上升级</a>\n                    </div>\n                    <p>\n                    为您的网站绑定自己的域名，可替代 {{original_entry}} 作为网站的访问地址。最多可绑定 5 个自定义域名。<a target="_blank" href="/help/doc/pages/getting-started.html#section-2">查看帮助</a>\n                    </p>\n                    <div ng-repeat="domain in pages_status.domains" ng-show="pages_status.domains" class="domain-taken-messages">\n                        <div ng-if="domain.status === \'TAKEN\'" class="ui red message">\n                            <div class="header">\n                                <code>{{domain.name}}</code> 已被其他站点占用\n                            </div>\n                            <p>若您是该域名的拥有者，请将该域名的 CNAME 记录设置为 <code>{{pages_status.site.global_key | lowercase}}.coding.me</code>。待 CNAME 记录解析生效后，请点击 <a class="ui green small button coding" ng-click="authenticateDomainOwnership(domain.name)">验证域名拥有权</a> 。</p>\n                        </div>\n                    </div>\n                    <div ng-show="pages_status.domains" style="margin-top:30px;" class="domain-list">\n                        <table class="ui table segment">\n                            <thead>\n                                <tr>\n                                    <th width="50%" style="text-align: left;">域名</th>\n                                    <th>绑定状态</th>\n                                    <th>首选</th>\n                                    <th>跳转至首选</th>\n                                    <th></th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                            <tr ng-repeat="domain in pages_status.domains">\n                                <td style="text-align: left;">\n                                    <a href="{{domainUrl(domain)}}" target="_blank" rel="nofollow noopener noreferrer">{{domain.name}}</a>\n                                </td>\n                                <td>\n                                    <span ng-show="domain.status === \'NORMAL\'" class="green">正常</span>\n                                    <span ng-show="domain.status === \'TAKEN\'" class="red">被占用</span>\n                                </td>\n                                <td>\n                                    <div class="ui large checkbox"\n                                         ng-click="setPrimaryDomain(domain.name)"\n                                         ng-show="domain.status === \'NORMAL\'">\n                                        <input type="checkbox"\n                                               ng-checked="domain.primary">\n                                        <label></label>\n                                    </div>\n                                </td>\n                                <td>\n                                    <div class="ui large checkbox"\n                                         ng-click="toggleDomainToPrimary(domain)"\n                                         ng-show="domain.status === \'NORMAL\' && !domain.primary">\n                                        <input type="checkbox"\n                                               ng-model="domain.to_primary">\n                                        <label></label>\n                                    </div>\n                                </td>\n                                <td><a class="ui small red button"\n                                       ng-click="deletePagesDomain(domain.name)"\n                                       ng-if="PROJECT | isRole:ADMIN">解绑</a></td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                     <div style="margin-top:30px;" ng-if="!isExpActive(\'vip\') && (PROJECT | isRole:ADMIN)" class="ui form">\n                        <div class="field">\n                            <div class="input">\n                                <input style="width: 200px;" ng-model="current_input.pages_current_input_domain" type="text" placeholder="example.com"/>\n                                <a class="ui medium green button" ng-click="addPagesDomain(current_input)">绑定</a>\n                            </div>\n                        </div>\n                    </div>\n                    <div style="margin-top:30px;" ng-if="isExpActive(\'vip\') && (PROJECT | isRole:ADMIN)" class="ui form">\n                        <div class="field" ng-class="{\'disabled\': !pages_status.membership || pages_status.membership.level == 1}">\n                            <div class="input">\n                                <input style="width: 200px;" ng-model="current_input.pages_current_input_domain" type="text" placeholder="example.com" ng-disabled="!pages_status.membership || pages_status.membership.level == 1"/>\n                                <button class="ui medium green button" ng-click="addPagesDomain(current_input)" ng-disabled="!pages_status.membership || pages_status.membership.level == 1">绑定</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div ng-if="pages_enabled && pages_status.certs">\n                    <div class="ui divider clearfix"></div>\n                    <h3>SSL/TLS 证书</h3>\n                    <p class="ui yellow message">\n                        <i class="attention icon"></i><strong>注意</strong>：申请 SSL/TLS 证书需要通过 Let\'s Encrypt 的 HTTP 方式验证域名所有权。如果您的域名在境外无法访问 Coding Pages 的服务器，将导致 SSL/TLS 证书申请失败。\n                    </p>\n                    <div ng-show="pages_status.certs"\n                         style="margin-top:30px;"\n                         class="cert-list">\n                        <table class="ui table segment">\n                            <thead>\n                            <tr>\n                                <th width="50%" style="text-align: left;">域名</th>\n                                <th style="text-align: left;">有效期</th>\n                                <th>状态</th>\n                                <th></th>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr ng-repeat="cert in pages_status.certs">\n                                <td style="text-align: left; color: rgba(0, 0, 0, 0.8);">\n                                    {{cert.domain}}\n                                </td>\n                                <td style="text-align: left; color: rgba(0, 0, 0, 0.8);">\n                                    <span ng-show="cert.status === \'NORMAL\'">\n                                        {{formatDate(cert.not_before)}} 至 {{formatDate(cert.not_after)}}\n                                    </span>\n                                </td>\n                                <td>\n                                    <span ng-show="cert.status === \'NORMAL\'" class="green">正常</span>\n                                    <span ng-show="cert.status === \'PENDING\'" class="blue">排队中</span>\n                                    <span ng-show="cert.status === \'ERROR\'" class="red">申请失败</span>\n                                    <span ng-show="cert.status === \'REQUESTING\'" class="blue">申请中</span>\n                                    <span ng-show="cert.status === \'RENEWING\'" class="blue">续期中</span>\n                                </td>\n                                <td><a class="ui small red button"\n                                       ng-click="reapplySSLCert(cert.domain)"\n                                       ng-show="cert.status === \'ERROR\' || cert.status === \'PENDING\'"\n                                       ng-if="PROJECT | isRole:ADMIN">重新申请</a></td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n\n                <div ng-if="pages_enabled">\n                    <div class="ui divider clearfix"></div>\n                    <h3>强制 HTTPS 访问</h3>\n                    <p>\n                    HTTPS 会为您的网站建立加密的信息安全通道，保证数据传输的安全，防止传输内容被第三方冒充或篡改。强烈建议开启。<a target="_blank" href="/help/doc/pages/getting-started.html#https-">查看帮助</a>\n                    </p>\n                    <span style="margin: 1em 0em;" class="ui toggle checkbox coding floated left">\n                        <input type="checkbox" id="force-ssl-checkbox" ng-model="force_ssl" ng-click="setForceSsl(force_ssl)">\n                        <label for="force-ssl-checkbox">\n                            <span ng-show="force_ssl">已开启强制 HTTPS 访问，网站内引用资源的 URL 需以 https:// 开头。</span>\n                            <span ng-show="!force_ssl">未开启强制 HTTPS 访问，网页安全性可能受到危害。</span>\n                        </label>\n                    </span>\n                    <div class="ui clearfix"></div>\n                </div>\n\n                <div>\n                    <div class="ui divider clearfix"></div>\n                    <h3>使用 Jekyll 生成网站</h3>\n                    <p>\n                    Jekyll 是一个简单的静态网站生产程序，您可以使用 Jekyll 快速地搭建项目页面、博客或是网站。<a href="https://jekyllrb.com" target="_blank">查看 Jekyll 文档</a>\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="scroll-holder"></div>\n</div>\n'),a.put("git/plot/plot.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'"\n         class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n\n    <div class="plot container git-container">\n        <div ng-if="!loaded">\n            <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n        </div>\n        <select ui-select2="{width:\'250px\'}" ng-show="loaded" ng-model="current_branch" ng-change="changeCurrentBranch(current_branch)">\n            <option\n                ng-repeat="branch in branches"\n                value="{{branch.name}}">\n                {{branch.name}}\n            </option>\n        </select>\n        <div class="plot view" ng-show="loaded">\n            <div id="network">\n                <div class="info">\n                    <i class="dot"></i>{{\'same_day_commit\' | i18n:\'code_network\'}}<i class="cdot"><i></i></i>{{\'tag_commit\' | i18n:\'code_network\'}}\n                </div>\n                <div class="svg" data-url="{{plot_url}}" cg-plot-view="loadPlot" cg-plot-view-load-length="100">\n                    <div class="ui active  dimmer">\n                        <div class="ui large text loader">Loading</div>\n                    </div>\n                </div>\n                <div class="more">\n                    <span ng-if="loadMoreing && hasPlotData"><i class="loading icon"></i>{{\'loading\' | i18n:\'code_network\'}}</span>\n                    <span ng-if="!loadMoreing && hasPlotData" style="text-decoration: underline"\n                          ng-click="loadPlotMore()">{{\'click_to_load_more\' | i18n:\'code_network\'}}</span>\n                    <span ng-if="!hasPlotData">{{\'all_data_loaded\' | i18n:\'code_network\'}}</span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("git/pull/index.html",'<div class="public-project-view">\n    <div class="pull-request container git-container">\n        <div ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n        <div ng-controller="PullRequestQueryFilterController" id="pull-request-filter" class="ui simple dropdown coding floated right">\n            <div class="text">{{ getFilter() }}</div>\n            <i class="dropdown icon"></i>\n\n            <div class="menu">\n                <div class="item" ng-click="change_status(\'open\')">未处理</div>\n                <div class="item" ng-click="change_status(\'closed\')">已处理</div>\n                <div class="item" ng-click="change_status(\'all\')">全部</div>\n            </div>\n        </div>\n        <div ng-if="!loaded">\n                <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n        </div>\n        <div ng-if="loaded">\n        <div ng-if="data.list" class="pr-list" style="padding-top: 10px">\n            <div class="pr-item" ng-repeat="pull_request in data.list">\n                <div class="content">\n                    <div class="header">\n                        <span class="pr-id">#{{pull_request.iid}}</span>\n                        <a href="{{pull_request.path}}">{{pull_request.title}}</a>\n                        <div class="pull-right">\n                            <span class="pr-label src">{{pull_request.src_owner_name ? pull_request.src_owner_name:\'已删除项目\'}}:{{pull_request.srcBranch}}</span>\n                                <i class="long arrow right icon"></i>\n                            <span class="pr-label des">{{PROJECT.owner_user_name}}:{{pull_request.desBranch}}</span>\n                        </div>\n                    </div>\n                    <div class="footer">\n                        <a href="{{pull_request.author.path}}">\n                            <img class="author-gravatar" width="20" height="20" ng-src="{{pull_request.author.avatar}}">\n                            <div class="pr-author">\n                                {{pull_request.author.name}}\n                            </div>\n                        </a>\n                        <span class="pr-created-at">\n                            创建于\n                        </span>\n                        <span class="time" cg-friendly-time="pull_request.created_at"></span>\n                        <span class="pull-right pr-merged-time" ng-if="pull_request.action_at">\n                            于\n                            <span cg-friendly-time="pull_request.action_at"></span>\n                        </span>\n                        <span class="pull-right pr-status {{pull_request.merge_status.toLowerCase()}}">{{getMergeStatusHuman(pull_request.merge_status)}}</span>\n                    </div>\n                </div>\n                <div class="ui divider"></div>\n            </div>\n        </div>\n        <div cg-pager="{{pager_id}}" class="center"></div>\n        <div style="margin-top: 30px;" ng-if="!data.list || data.list.length == 0">\n            <div ng-include="\'app/git/partial/_back-monkey.html\'"></div>\n            <p class="ui coding aligned center" style="margin-top: 55px;"><strong style="font-size: 18px;">暂无{{ getFilterByCenter() }}合并请求</strong></p>\n        </div>\n    </div>\n    </div>\n</div>\n'),a.put("git/pull/new.html",'<div class="public-project-view">\n    <div class="pull-request container git-container">\n    <div ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n    <form class="ui form segment" ng-submit="submitPullRequest(pr_create.pull_request);" method="post">\n        <div class="field">\n        <label>源分支</label>\n        <select ui-select2="{width:\'250px\'}" id="pr-src-branches" ng-change="changeDepot(pr_create.pull_request);" ng-model="pr_create.pull_request.srcBranch">\n            <option\n                    ng-repeat="branch in branches"\n                    value="{{branch.name}}"\n                    ng-selected="pr_create.pull_request.srcBranch == branch.name">\n                {{branch.name}}\n            </option>\n        </select>\n        </div>\n        <div class="field">\n            <label>目标项目-目标分支</label>\n        <select ui-select2="{width:\'250px\'}" id="pr-des-depots" ng-change="changeDepot(pr_create.pull_request);" ng-model="pr_create.pull_request.des_path" >\n            <option\n                    ng-repeat="depot in pr_create.depots"\n                    value="{{depot.path}}"\n                    ng-selected="pr_create.pull_request.des_path == depot.path"\n                    >\n                {{depot.path}}\n            </option>\n        </select>\n        -\n        <select ui-select2="{width:\'250px\'}" id="pr-des-branches" ng-change="changeDepot(pr_create.pull_request);" ng-model="pr_create.pull_request.desBranch">\n            <option\n                    ng-repeat="des_branch in pr_create.des_branches"\n                    value="{{des_branch.name}}"\n                    ng-selected="pr_create.pull_request.desBranch == des_branch.name"\n                    >\n                {{des_branch.name}}\n            </option>\n        </select>\n        </div>\n        <div class="field">\n            <div class="ui input fullscreen-title">\n                <input type="text" name="title" placeholder="输入Pull Request标题" ng-model="pr_create.pull_request.title">\n            </div>\n        </div>\n\n        <div class="field">\n            <div class="ui input" cg-pagedown="contentUpdate($content)" id="-1" ng-model="pr_create.pull_request.content">\n                <textarea placeholder="输入Pull request详细描述"\n                    ng-model="pr_create.pull_request.content"\n                    cg-refer-resource="PROJECT"\n                    cg-at-context\n                    at-context-type="\'pull_request\'"\n                    at-item="PROJECT"\n                    cg-at-emoji\n                    cg-textarea-editable></textarea>\n            </div>\n        </div>\n\n        <div class="fullscreen-title-right-buttons">\n            <input type="submit" value="提交" class="ui blue submit button"/>\n        </div>\n    </form>\n\n    <div ng-if="loading" ng-include="\'app/git/partial/_loading.html\'"></div>\n    <div ng-if="!loading">\n        <h4 class="ui header">改动明细</h4>\n        <div class="ui divider"></div>\n\n        <div class="ui tabular menu">\n            <a class="item" ng-class="{active: show_diff == \'commits\'}"  ng-click="switchTab(\'commits\')">\n                提交记录 <span class="commits-count">{{commits.length || \'0\'}}</span>\n            </a>\n            <a class="item" ng-class="{active: show_diff == \'files\'}" ng-click="switchTab(\'files\')">\n                文件改动 <span class="commits-count" ng-if="diffStat.paths.length && diffStat.paths.length>0">{{diffStat.paths.length}}</span>\n            </a>\n        </div>\n\n        <div ng-show="show_diff == \'commits\'" cg-git-commit-list commits="commits" class="commits"></div>\n        <div ng-show="show_diff == \'files\'" cg-git-diff-show diff-stat="diffStat" diff-mode="diffMode" diff-html="diffHtml" enable-whitespace="enableWhitespace" commit-id="commitId" base-commit-id="baseCommitId"></div>\n    </div>\n    </div>\n</div>\n'),a.put("git/pull/show.html",'<div class="public-project-view">\n    <div class="pull-request container git-container">\n        <div ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n        <div ng-if="!loaded">\n            <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n        </div>\n        <div ng-if="loaded">\n            <h3 class="pr-title">\n                #{{pull_request.iid}} {{pull_request.title}}\n                <span ng-class="getMergeStatusClass(pull_request.merge_status)">{{getMergeStatusHuman(pull_request.merge_status)}}</span>\n            </h3>\n\n            <div class="pr-author">\n                <a style="color:#333" ng-href="{{pull_request.author.path}}"><img\n                    ng-src="{{pull_request.author.lavatar}}" class="ui image avatar18"\n                    style="width: 13px; height: 13px; margin-top: -2px;"/>&nbsp;<strong>{{pull_request.author.name}}</strong></a>\n                &nbsp; 创建于 <span cg-friendly-time="pull_request.created_at"></span>\n            </div>\n            <div class="ui divider"></div>\n\n            <div class="pr-action">\n                <span class="pr-label src">{{pull_request.src_owner_name ? pull_request.src_owner_name:\'已删除项目\'}}:{{pull_request.srcBranch}}</span>\n                <i class="long arrow right icon"></i>\n                <span class="pr-label des">{{PROJECT.owner_user_name}}:{{pull_request.desBranch}}</span>\n\n                <div class="pull-right" ng-if="pull_request.merge_status === \'CANMERGE\' || pull_request.merge_status === \'CANNOTMERGE\'">\n                    <div ng-if="USER.id === pull_request.author.id" class="ui coding button" ng-click="cancel(pull_request)">取消</div>\n                </div>\n                <div class="pull-right" ng-if="can_edit && pull_request.merge_status == \'CANNOTMERGE\'">\n                    <div class="ui coding button red refuse-btn" ng-click="refuse(pull_request);">拒绝</div>\n                    <div class="ui coding button blue disabled merge-btn">合并</div>\n                </div>\n\n                <div class="pull-right" ng-if="can_edit && pull_request.merge_status == \'CANMERGE\'">\n                    <div class="ui coding button red refuse-btn" ng-click="refuse(pull_request);">拒绝</div>\n                    <div class="ui coding button blue merge-btn" ng-click="toggleShowMergeForm(showMergeForm)">合并</div>\n                </div>\n\n                <div class="clearfix"></div>\n                <div class="pr-merge ui form segment" ng-show="showMergeForm && pull_request.merge_status == \'CANMERGE\' && can_edit">\n                    <h2 class="ui dividing header">合并此 Pull Request</h2>\n                    <div class="content">\n                        <div class="field">\n                            <label>Merge Commit Message</label>\n                            <textarea ng-model="pull_request.commit_message"></textarea>\n                        </div>\n                    </div>\n                    <div style="margin-top: 10px" class="ui checkbox">\n                        <input type="checkbox" id="pull_request_fastforward" ng-model="pull_request.fastforward" />\n                        <label for="pull_request_fastforward">Fast-Forward 模式合并</label>\n                    </div>\n                    <div class="actions">\n                        <div class="ui button"  ng-click="toggleShowMergeForm(showMergeForm)">取消</div>\n                        <div class="ui button green" ng-click="merge(pull_request);">合并</div>\n                    </div>\n                </div>\n            </div>\n            <div ng-if="pull_request.merge_status == \'CANNOTMERGE\'" class="ui message">\n                <p><strong>Coding 不能帮你在线自动合并这个 Pull Request。可参照如下流程使用命令行来完成合并。</strong></p>\n                <div>\n                    <p>第一步：从你自己的项目仓库中，创建一个新的分支，并测试 Pull Request 中的改动。<br>\n                    <code>\ngit checkout -b {{pull_request.src_owner_name}}-{{pull_request.srcBranch}} {{pull_request.desBranch}}<br>\ngit pull https://coding.net/{{pull_request.src_owner_name}}/{{pull_request.src_project_name}}.git {{pull_request.srcBranch}}\n                    </code>\n                    </p>\n                </div>\n                <p></p>\n                <div>\n                    <p>第二步：合并改动到目标分支，并推送到 Coding<br>\n                    <code>\ngit checkout {{pull_request.desBranch}}<br>\ngit merge --no-ff {{pull_request.src_owner_name}}-{{pull_request.srcBranch}}<br>\ngit push origin {{pull_request.desBranch}}<br>\n                    </code>\n                    </p>\n                </div>\n            </div>\n            <div class="ui tertiary red segment action-bar" ng-if="pull_request.merge_status == \'REFUSED\'">\n                <div class="content">\n                    <div class="summary">\n                        <span style="color: red">\n                            <i class="minus sign icon"></i>\n                        </span>\n                        <a href="{{pull_request.action_author.path}}">{{pull_request.action_author.name}}</a>\n                        <span cg-friendly-time="pull_request.action_at"></span>\n                        拒绝了这个Pull Request\n                    </div>\n                </div>\n            </div>\n\n            <div class="ui tertiary green segment action-bar" ng-if="pull_request.merge_status == \'ACCEPTED\'">\n                <div class="content">\n                    <div class="summary">\n                        <span style="color: green">\n                            <i class="coding icon pull-request"></i>\n                        </span>\n                        <a href="{{pull_request.action_author.path}}">{{pull_request.action_author.name}}</a>\n                        <span cg-friendly-time="pull_request.action_at"></span>\n                        合并了这个Pull Request\n                    </div>\n                </div>\n            </div>\n\n            <div ng-show="!!pull_request.content" class="pr-content markdown content ui segment" clip-copy-code="pre"  cg-bind-html="pull_request.content" cg-page-scroll></div>\n\n            <div class="ui tabular menu">\n                <a class="item" ng-class="{active: show_diff == \'comments\'}" ng-click="showContent(\'comments\')">\n                    评论 <span class="commits-count">{{commentCount || 0}}</span>\n                </a>\n                <a class="item" ng-class="{active: show_diff == \'commits\'}" ng-click="showContent(\'commits\')">\n                    提交记录 <span class="commits-count">{{commits.length}}</span>\n                </a>\n                <a class="item" ng-class="{active: show_diff == \'files\'}" ng-click="showContent(\'files\')">\n                    文件改动 <span class="commits-count" ng-if="diffStat.paths.length && diffStat.paths.length>0">{{diffStat.paths.length}}</span>\n                </a>\n            </div>\n\n            <div ng-show="show_diff == \'comments\' && !comments_loaded">\n                <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n            </div>\n            <div cg-git-comment ng-show="show_diff == \'comments\' && comments_loaded"></div>\n\n            <div ng-show="show_diff == \'files\'" cg-git-diff-show diff-stat="diffStat" diff-mode="diffMode" diff-html="diffHtml" notes-params="notesParams" enable-whitespace="enableWhitespace" base-commit-id="baseCommitId"></div>\n\n            <div ng-show="show_diff == \'commits\'" cg-git-commit-list commits="commits" class="commits"></div>\n        </div>\n    </div>\n</div>\n'),
a.put("git/qc/directives/qc-analysis-result.html",'<div class="container">\n    <div ng-if="(PROJECT | qcGitPermissionUserFilter) && task">\n        <p class="no-qc-report" ng-if="task.task.status==0">正在为您努力排队中...请耐心等候\n        </p>\n\n        <p class="no-qc-report" ng-if="task.task.status==1">正在为您努力分析中...请耐心等候，如果长时间未分析完毕，请删除分析任务之后，重新提交任务。\n        </p>\n\n        <p class="no-qc-report" ng-if="task.task.status==2">您的分析任务已经失败，可能是某些参数配置不正确，请调整好参数之后，重新提交任务。\n        </p>\n    </div>\n    <div ng-if="!task">\n        <p class="no-qc-report">\n            无分析报告\n        </p>\n    </div>\n</div>\n'),a.put("git/qc/directives/qc-code-dashboard.html",'<div class="box dashboard" ng-class="{\'qc-auto-height\':!dashboard_loading && dashboard}">\n    <cg-git-qc-loading loading="dashboard_loading" no-data="!dashboard || dashboard.length <= 0"\n                   text="无法加载概要信息"></cg-git-qc-loading>\n    <div ng-if="!dashboard_loading && dashboard">\n        <div class="ui vertically divided grid">\n            <div class="one column row">\n                <p class="title"><i class="reorder icon"></i>大小指标：</p>\n\n                <div class="ui vertically divided grid">\n                    <div class="three column row">\n                        <div class="column">\n                            <ul>\n                                <li><span>总行数：</span>\n                                    <span class="value" ng-if="dashboard">{{dashboard.lines.formatValue || 0}}</span>\n                                    <i class="loading icon" ng-if="!dashboard"></i>\n                                </li>\n                                <li><span>有效代码行数：</span>\n                                    <span class="value" ng-if="dashboard">{{dashboard.ncloc.formatValue || 0}}</span>\n                                    <i class="loading icon" ng-if="!dashboard"></i>\n                                </li>\n                            </ul>\n                        </div>\n                        <div class="column">\n                            <ul>\n                                <li><span>语句：</span>\n                                    <span class="value" ng-if="dashboard">{{dashboard.classes.formatValue || 0}}</span>\n                                    <i class="loading icon" ng-if="!dashboard"></i>\n                                </li>\n                                <li><span>类：</span>\n                                    <span class="value" ng-if="dashboard">{{dashboard.packages.formatValue || 0}}</span>\n                                    <i class="loading icon" ng-if="!dashboard"></i>\n                                </li>\n                            </ul>\n                        </div>\n                        <div class="column">\n                            <ul>\n                                <li>\n                                    <span>方法：</span>\n                                    <span class="value"\n                                          ng-if="dashboard">{{dashboard.functions.formatValue || 0}}</span>\n                                    <i class="loading icon" ng-if="!dashboard"></i>\n                                </li>\n                                <li>\n                                    <span>存取：</span>\n                                    <span class="value"\n                                          ng-if="dashboard">{{dashboard.accessors.formatValue || 0}}</span>\n                                    <i class="loading icon" ng-if="!dashboard"></i>\n                                </li>\n                            </ul>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n            <div class="one column row">\n                <div class="column">\n                    <p class="title">\n                        <i class="reorder icon"></i>复杂度：</p>\n\n                    <div class="content">\n                        <ul>\n                            <ul>\n                                <li>\n                                    <span>复杂度：</span>\n                                    <span class="value"\n                                          ng-if="dashboard">{{dashboard.complexity.formatValue || 0}}</span>\n                                    <i class="loading icon" ng-if="!dashboard"></i>\n                                </li>\n                                <li>\n                                    <span>方法均值：</span>\n                                    <span class="value" ng-if="dashboard">{{dashboard.function_complexity.formatValue || 0}}</span>\n                                    <i class="loading icon" ng-if="!dashboard"></i>\n                                </li>\n                            </ul>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            <div class="one column row">\n                <div class="column">\n                    <p class="title"><i class="reorder icon"></i>注释：</p>\n\n                    <div class="content">\n                        <ul>\n                            <li>\n                                <span>注释（%）：</span>\n                                <span class="value"\n                                      ng-if="dashboard">{{dashboard.comment_lines_density.formatValue}}</span>\n                                <i class="loading icon" ng-if="!dashboard"></i>\n                            </li>\n                            <li>\n                                <span>注释行：</span>\n                                <span class="value"\n                                      ng-if="dashboard">{{dashboard.comment_lines.formatValue || 0}}</span>\n                                <i class="loading icon" ng-if="!dashboard"></i>\n                            </li>\n                            <li>\n                                <span>公共API注释率（%）：</span>\n                                <span class="value" ng-if="dashboard">{{dashboard.public_documented_api_density.formatValue}}</span>\n                                <i class="loading icon" ng-if="!dashboard"></i>\n                            </li>\n                            <li>\n                                <span>公共API：</span>\n                                <span class="value" ng-if="dashboard">{{dashboard.public_api.formatValue || 0}}</span>\n                                <i class="loading icon" ng-if="!dashboard"></i>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            <div class="one column row">\n                <div class="column">\n                    <p class="title"><i class="reorder icon"></i>违反规则：</p>\n\n                    <div class="content">\n                        <ul>\n                            <li>\n                                <i class="red ban circle icon"></i>阻断：\n                                <span class="value"\n                                      ng-if="dashboard">{{dashboard.blocker_violations.formatValue|| 0}}</span>\n                                <i class="loading icon" ng-if="!dashboard"></i>\n                            </li>\n                            <li>\n                                <i class="red frown icon"></i>严重：\n                                <span class="value"\n                                      ng-if="dashboard">{{dashboard.critical_violations.formatValue|| 0}}</span>\n                                <i class="loading icon" ng-if="!dashboard"></i>\n                            </li>\n                            <li><i class="green attention icon"></i>主要：\n                                <span class="value"\n                                      ng-if="dashboard">{{dashboard.major_violations.formatValue || 0}}</span>\n                                <i class="loading icon" ng-if="!dashboard"></i>\n                            </li>\n                            <li><i class="gray exclamation icon"></i>次要：\n                                <span class="value"\n                                      ng-if="dashboard">{{dashboard.minor_violations.formatValue || 0}}</span>\n                                <i class="loading icon" ng-if="!dashboard"></i>\n                            </li>\n                            <li><i class="info icon"></i>提示：\n                                <span class="value"\n                                      ng-if="dashboard">{{dashboard.info_violations.formatValue || 0}}</span>\n                                <i class="loading icon" ng-if="!dashboard"></i>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            <div class="one column row">\n                <div class="column">\n                    <p class="title"><i class="reorder icon"></i>重复：</p>\n\n                    <div class="content">\n                        <ul>\n                            <li>\n                                重复行：<span class="value" ng-if="dashboard" ng-if="dashboard">{{dashboard.duplicated_lines.formatValue||0}}</span>\n                                <i class="loading icon" ng-if="!dashboard"></i>\n                            </li>\n                            <li>\n                                重复块：<span class="value"\n                                          ng-if="dashboard">{{dashboard.duplicated_blocks.formatValue||0}}</span>\n                                <i class="loading icon" ng-if="!dashboard"></i>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("git/qc/directives/qc-code.html",'<div class="eleven wide column" ng-class="{full:code_full}">\n    <h4 class="ui black block header tiny">\n                        <span style="position: relative;">\n                        <span style="margin-right: .6em;" ng-click="changeTab(\'issue\')"\n                              ng-if="type==\'issue\'">问题代码</span>\n                        <span style="margin-right: .6em;" ng-click="changeTab(\'duplication\')"\n                              ng-if="type==\'duplication\'">重复行</span>\n                        <span class="ui vertical divider" ng-style="{\'display\':code_full?\'none\':\'inline-block\'}"></span>\n                        <span style="margin-left:.9em;" ng-click="changeTab(\'dashboard\')"\n                              ng-style="{\'display\':code_full?\'none\':\'inline-block\'}">概要</span>\n                        </span>\n        <span ng-if="filename.length > 0" class="filename"><i class="icon file"></i>{{filename}}</span>\n        <i class="icon" ng-click="code_full=!code_full" ng-model="code_full"\n           ng-init="code_full=false" ng-class="{fullscreen:!code_full,remove:code_full}"\n           ng-style="{\'display\':code_type==\'dashboard\'?\'none\':\'inline-block\'}"\n                ></i>\n    </h4>\n    <cg-git-qc-issue-code username="{{username}}" project-name="{{project_name}}"\n                      resource-key="resource_key"\n                      current-ref="current_ref" current-type="current_type"\n                      current-rule="current_rule"\n                      current-file="current_file"\n                      current-folder="current_folder"\n                      current-lang="current_lang"\n                      type="issues"\n                      ng-style="{\'display\':code_type==\'issue\'?\'block\':\'none\'}"\n                      ng-if="type==\'issue\'"\n            ></cg-git-qc-issue-code>\n    <cg-git-qc-code-dashboard username="{{username}}" project-name="{{project_name}}"\n                          resource-key="resource_key"\n                          current-ref="{{current_ref}}"\n                          current-file="current_file"\n                          ng-style="{\'display\':code_type==\'dashboard\'?\'block\':\'none\'}"\n            ></cg-git-qc-code-dashboard>\n    <cg-git-qc-duplications-code username="{{username}}" project-name="{{project_name}}"\n                             resource-key="resource_key"\n                             current-ref="current_ref" current-type="current_type"\n                             current-rule="current_rule"\n                             current-file="current_file"\n                             current-folder="current_folder"\n                             current-lang="current_lang"\n                             type="issues"\n                             once="true"\n'+"                             ng-style=\"{'display':code_type=='duplication'?'block':'none'}\"\n                             ng-if=\"type=='duplication'\"\n            ></cg-git-qc-duplications-code>\n</div>\n"),a.put("git/qc/directives/qc-duplications-code.html",'<div class="box duplications">\n    <div ng-init="current_show={}"\n         ng-style="{\'border-top\': duplications ?\'none\':\'1px solid #ccc\',\'height\':duplications ?\'initial\':\'400px\'}">\n        <cg-git-qc-loading text="没有重复代码数据，请选择左侧列表查看！" loading="loading_duplications"\n                       no-data="!duplications || duplications.length <= 0"></cg-git-qc-loading>\n        <div ng-repeat="group in duplications.duplications" class="duplication-group">\n            <ul class="duplications groups">\n                <li class="group filename" ng-repeat="dfile in group"\n                    ng-class="{active:dfile.show}" ng-click="dfile.show = !dfile.show">\n                    <span class="filename" title="{{dfile.path}}">\n                        <i class="file icon"></i>\n                        {{dfile.name}}&nbsp; (从{{dfile.start}}行开始&nbsp;,&nbsp;共{{dfile.lines}}行重复)\n                    </span>\n                </li>\n            </ul>\n            <ul class="duplications group code">\n                <li class="group code" ng-repeat="file in group">\n                    <div class="box code" ng-if="file.show">\n                        <cg-monkey-loading image-size="30" container-margin="120"\n                                           ng-if="code_loading"></cg-monkey-loading>\n                        <div class="code-snippet">\n                        <pre style="white-space: normal;">\n                            <code class="{{duplications.language}}">\n                                <div ng-repeat="line in file.html" style="white-space: normal">\n                                    <div class="line">\n                                        <span class="line-number">{{line.num > 0 ? line.num :\'\' }}</span>\n                                        <span class="line-code"\n                                              ng-bind-html="line.html || \'&nbsp;\'"></span>\n                                    </div>\n                                </div>\n                            </code>\n                        </pre>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>'),a.put("git/qc/directives/qc-folders.html",'<div class="five wide column" ng-class="{hide:code_full}">\n    <h4 class="ui black block header tiny">\n        {{title}}\n    </h4>\n\n\n    <div class="box folder">\n        <div class="ui link list" ng-if="folders.length > 0 " ng-model="current_folder">\n            <div ng-repeat="folder in folders">\n                <a class="item" ng-click="changeFolder(folder)"\n                   ng-class="{active:folder.key == current_folder}" data-key="{{folder.key}}" title="{{folder.name}}">\n                    <label class="num">{{folder.formatValue}}</label>\n                    <i class="folder icon" ng-class="{open:folder.key == current_folder}"\n                       ng-if="!loading_file || folder.key != current_folder"></i>\n                    <i class="loading icon" ng-if="loading_file && folder.key == current_folder "></i>\n                    <span class="folder-name">{{folder.name}}</span>\n                </a>\n                <i id="folder_anchor" ng-if="current_folder==folder.key"></i>\n\n                <div class="ui link list files" ng-if="current_folder==folder.key">\n                    <a class="item" ng-repeat="file in files" ng-click="changeFile(file)"\n                       ng-class="{active:file.key == current_file}" data-folder="{{folder.key}}"\n                       data-file="{{file.key}}"\n                       title="{{file.name}}"\n                            >\n                        <label class="num">{{file.value}}</label>\n                        <i class="file icon"></i>\n                        <span class="file-name">{{file.name}}</span>\n                    </a>\n                </div>\n            </div>\n        </div>\n        <cg-git-qc-loading text="没有符合条件的文件" loading="folder_loading"\n                       no-data="!folders || folders.length <= 0"></cg-git-qc-loading>\n    </div>\n</div>\n'),a.put("git/qc/directives/qc-init.html",'<div class="qc init qc-init" ng-class="{\'public-qc-init\':PROJECT.is_public}">\n    <div class="ui attached message">\n        <p>{{container.item.id > 0 ? "修改" : "新建"}}分析任务</p>\n    </div>\n    <div class="ui error form segment attached" ng-class="{loading:isPosting}">\n        <div class="routine" ng-show="container.item.id == 0">\n            <div class="ui checkbox">\n                <input type="checkbox" ng-model="container.item.routine" id="routine-task-{{container.item.id}}">\n                <label class="label" for="routine-task-{{container.item.id}}">\n                    <span>自动运行本任务</span>\n                </label>\n                <span class="star-notice">* 本次任务会分析指定分支的最新版本。</span>\n                <br/>\n                <span class="notice">系统会自动的定期运行本任务，可在自动分析任务中查看结果。</span>\n            </div>\n        </div>\n        <div class="ui divider" ng-show="container.item.id == 0"></div>\n        <div class="ui error message" ng-if="errorMsg">\n            <div class="header">Tip</div>\n            <p ng-bind-html="errorMsg"></p>\n        </div>\n        <div ng-show="container.item.routine"  class="field">\n            <label>项目分支</label>\n            <select ui-select2="{width:\'250px\'}" ng-model="container.item.projectVersion" ng-change="">\n                <option\n                    ng-repeat="branch in branches"\n                    value="{{branch.name}}">\n                    {{branch.name}}\n                </option>\n            </select>\n        </div>\n        <div class="field" ng-show="!container.item.routine">\n            <label>项目版本</label>\n            <input placeholder="项目版本, 标签或分支名, 不填则为默认分支的最新版本" type="text" name="ref" ng-model="container.item.projectVersionNoRoutine">\n        </div>\n        <div class="field">\n            <label>源码目录</label>\n            <input placeholder="如src,src/main/java,根目录无需填写,多个目录请用逗号隔开,根目录无需填写" type="text" name="sources"\n                   ng-model="container.item.sources">\n        </div>\n        <div class="three fields">\n            <div class="field">\n                <label>项目编码</label>\n\n                <div class="ui fluid selection dropdown" cg-dropdown="">\n                    <input placeholder="项目编码如UTF-8" type="text" name="sourceEncoding"\n                           ng-model="container.item.sourceEncoding" maxlength="20">\n\n                    <div class="menu">\n                        <div class="item" data-value="UTF-8" ng-click="container.item.sourceEncoding=\'UTF-8\'"\n                             ng-class="{\'active\':container.item.sourceEncoding==\'UTF-8\'}">UTF-8\n                        </div>\n                        <div class="item" data-value="GBK" ng-click="container.item.sourceEncoding=\'GBK\'"\n                             ng-class="{\'active\':container.item.sourceEncoding==\'GBK\'}">GBK\n                        </div>\n                        <div class="item" data-value="UTF-16" ng-click="container.item.sourceEncoding=\'UTF-16\'"\n                             ng-class="{\'active\':container.item.sourceEncoding==\'UTF-16\'}">UTF-16\n                        </div>\n                        <div class="item" data-value="GB2312" ng-click="container.item.sourceEncoding=\'GB2312\'"\n                             ng-class="{\'active\':container.item.sourceEncoding==\'GB2312\'}">GB2312\n                        </div>\n                        <div class="item" data-value="GB18030" ng-click="container.item.sourceEncoding=\'GB18030\'"\n                             ng-class="{\'active\':container.item.sourceEncoding==\'GB18030\'}">GB18030\n                        </div>\n                        <div class="item" data-value="ISO-8859-1" ng-click="container.item.sourceEncoding=\'ISO-8859-1\'"\n                             ng-class="{\'active\':container.item.sourceEncoding==\'ISO-8859-1\'}">ISO-8859-1\n                        </div>\n                        <div class="item" data-value="UTF-16BE" ng-click="container.item.sourceEncoding=\'UTF-16BE\'"\n                             ng-class="{\'active\':container.item.sourceEncoding==\'UTF-16BE\'}">UTF-16BE\n                        </div>\n                        <div class="item" data-value="UTF-16LE" ng-click="container.item.sourceEncoding=\'UTF-16LE\'"\n                             ng-class="{\'active\':container.item.sourceEncoding==\'UTF-16LE\'}">UTF-16LE\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="three fields">\n            <div class="field">\n                <label>项目语言</label>\n                <div class="ui fluid selection dropdown" cg-dropdown="container.item.language"\n                     cg-on-change="changeLanguage">\n                    <div class="text">选择语言</div>\n                    <i class="dropdown icon"></i>\n                    <input type="hidden" name="language" ng-model="container.item.language"/>\n\n                    <div class="menu">\n                        <!-- <div class="item" data-value="all">所有支持语言</div> -->\n                        <div class="item" data-value="java">Java</div>\n                        <div class="item" data-value="js">Javascript</div>\n                        <div class="item" data-value="php">PHP</div>\n                        <div class="item" data-value="cs">C#</div>\n                        <div class="item" data-value="grvy">Groovy</div>\n                        <div class="item" data-value="xml">XML</div>\n                        <div class="item" data-value="web">Web</div>\n                        <div class="item" data-value="flex">Flex</div>\n                        <div class="item" data-value="erlang">Erlang</div>\n                        <div class="item" data-value="css">Css</div>\n                        <div class="item" data-value="py">Python</div>\n                        <!--<div class="item" data-value="ruby">Ruby</div>-->\n                        <!--<div class="item" data-value="go">Go</div>-->\n                        <div class="item" data-value="c++">C/C++</div>\n                    </div>\n                </div>\n            </div>\n            <div class="field">\n                <div class="selected-language" ng-if="container.item.language">\n                    已选语言：{{explainLanguageDict[container.item.language] || ""}}\n                </div>\n            </div>\n            <div class="field"></div>\n        </div>\n        <div class="ui blue submit button" ng-click="submitAnalysisTask()" ng-if="!isPosting">\n          {{container.item.id > 0 ? "修改" : "提交"}}分析任务\n        </div>\n        <div class="ui cancel button" ng-click="cancel()" ng-if="!isPosting">取消</div>\n        <div class="ui blue submit button" ng-if="isPosting">正在提交中...</div>\n    </div>\n</div>\n'),a.put("git/qc/directives/qc-issue-code.html",'<div class="box code">\n    <cg-git-qc-loading text="没有问题代码数据，请选择左侧列表查看！" loading="loading_issue"\n                   no-data="!issue || issue.length <= 0"></cg-git-qc-loading>\n    <div class="code-snippet">\n        <pre style="white-space: normal;">\n            <code class="{{issue.language}}">\n                <div ng-repeat="line in issue.lines" style="white-space: normal">\n                    <div class="line" ng-class="{highlighted:line.issues && line.issues.length > 0}">\n                        <span class="line-number">{{line.num > 0 ? line.num :\'\' }}</span>\n                        <span class="line-code"\n                              ng-bind-html="line.source.html || \'&nbsp;\'"></span>\n                    </div>\n                    <div class="issues-rule" ng-if="line.issues && line.issues.length > 0"\n                         ng-repeat="issue in line.issues">\n                        <div class="header" ng-click="issue.open = !issue.open">\n                            <i class="red ban circle icon" ng-if="issue.severity == \'BLOCKER\'"></i>\n                            <i class="red frown icon" ng-if="issue.severity == \'CRITICAL\'"></i>\n                            <i class="green attention icon" ng-if="issue.severity == \'MAJOR\'"></i>\n                            <i class="gray exclamation icon" ng-if="issue.severity == \'MINOR\'"></i>\n                            <i class="info icon" ng-if="issue.severity == \'INFO\'"></i>\n                            <a href="javascript:void(0);">{{issue.rule.name}}</a>\n                            <i class="triangle icon" ng-class="issue.open ? \'up\' : \'down\'"></i>\n                        </div>\n                        <div class="content" ng-class="{hidden:!issue.open}"\n                             ng-bind-html="issue.rule.desc">\n                        </div>\n                        <div class="footer">{{issue.message}}</div>\n                    </div>\n                </div>\n            </code>\n        </pre>\n    </div>\n</div>\n\n'),a.put("git/qc/directives/qc-loading.html",'<div style="height: 100%" ng-if="loading || noData">\n    <cg-monkey-loading image-size="20" container-margin="0" circle-padding="10"\n                       ng-if="loading"></cg-monkey-loading>\n    <div class="no-qc-data" ng-if="noData && !loading"\n         style="display:table;text-align:center;font-size: 12px;color:#555;line-height:200%;height: 100%;width: 100%;">\n        <p style="display: table-cell;\n        height: 100%;\n        vertical-align: middle;">{{text}}</p>\n    </div>\n</div>'),a.put("git/qc/directives/qc-routines.html",'<div class="ui secondary active qc-routines">\n    <div class="qc-routine" ng-repeat="routine in routines">\n        <div class="ui segment">\n            <div class="ui top attached label">\n                <span>自动分析 {{routine.routine.version}} 分支 {{routine.routine.sources}} 目录，\n                    项目语言 {{routine.routine.language}}\n                </span>\n                <i class="icon close routine" title="删除" ng-if="PROJECT | qcGitPermissionUserFilter"\n                ng-click="deleteRoutine(routine.routine.id)"></i>\n                <i class="icon stop routine" title="停止" ng-if="!routine.routine.status && (PROJECT | qcGitPermissionUserFilter)"\n                ng-click="setRoutineStatus(routine.routine.id ,\'pause\')"></i>\n                <i class="icon play routine" title="恢复" ng-if="routine.routine.status && (PROJECT | qcGitPermissionUserFilter)"\n                ng-click="setRoutineStatus(routine.routine.id ,\'resume\')"></i>\n                <i class="icon edit routine" title="修改" ng-if="PROJECT | qcGitPermissionUserFilter"\n                ng-click="modifyRoutine(routine.routine.id)"></i>\n            </div>\n            <div class="ui attached">\n                <div class="item" ng-repeat="task in routine.tasks.list"\n                     ng-click="gotoTask(task)"\n                     >\n                     <!-- ng-class="{active:current_ref == task.task.ref}" -->\n                    <div class="">\n                        <img ng-src="{{task.creator.avatar}}" alt="{{task.creator.name}}" title="{{task.creator.name}}"/>\n                    </div>\n                    <div class="version">\n                        <span title="{{task | qcGitTaskDetailFilter}}">{{task.task.version | qcGitShortVersionFilter}}</span>\n                    </div>\n                    <div class="time">\n                        <span cg-friendly-time="task.task.created_at"></span>\n                    </div>\n                    <div class="commit-message">\n                        <span>{{task.commit.shortMessage}}</span>\n                    </div>\n                    <div class="status">\n                        <span ng-if="task.task.status==0" class="ready"><i class="icon stop ready"></i>排队中</span>\n                        <span ng-if="task.task.status==3" class="finish"><i class="icon stop finish"></i>已完成</span>\n                        <span ng-if="task.task.status==1" class="running"><i class="icon stop running"></i>分析中</span>\n                        <span ng-if="task.task.status==2" class="failed"><i class="icon stop failed"></i>已失败</span>\n                        <i class="icon close"\n                            ng-if="PROJECT | qcGitPermissionUserFilter"\n                            ng-click="deleteTask(task.task.id, $event)">\n                       </i>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="">\n        <div cg-pager="{{pager_id}}" class="center"></div>\n    </div>\n</div>\n'),a.put("git/qc/directives/qc-rules.html",'<section class="min-w">\n    <div class="issues filter">\n        <h4 class="ui black block header tiny">\n            问题筛选\n        </h4>\n\n        <div class="issues-box">\n            <div class="ui grid">\n                <div class="three wide column">\n                    <div class="ui vertical pointing fluid small menu issues-type-menu">\n                        <a class="item" ng-class="{active:current_type==metric.key}" index="{{metric.index}}"\n                           ng-repeat=" val in metrics_sort " ng-init="metric = metrics[val]"\n                           ng-click="changeViolation(metric)">\n                            <span>\n                                <i class="{{metric.icon}}"></i>\n                                {{metric.name}}\n                                <i class="help icon" data-title="{{metric.name}}"\n                                   data-content="{{metric.intro}}"></i>\n                            </span>\n                            <label style="float: right;">\n                                <span ng-if="!loading_issues">{{issues[metric.violation].value || 0}}</span>\n                                <i class="loading icon" ng-if="loading_issues"></i>\n                            </label>\n                        </a>\n                    </div>\n                </div>\n                <div class="thirteen wide column">\n                    <div class="ui vertical  fluid small menu issues-type-list">\n                        <cg-git-qc-loading loading="loading_rule" no-data="!rules || rules.length <= 0"\n                                       text="没有符合条件的规则"></cg-git-qc-loading>\n                        <a class="item"\n                           ng-class="{active:item.key==current_rule}"\n                           ng-repeat="item in rules" rule-key="{{item.key}}"\n                           current-rule="{{current_rule}}"\n                           ng-click="changeRule(item)" ng-if="rules.length > 0">\n                                <span>\n                                <i class="red ban circle icon" ng-if="item.type == \'BLOCKER\'"></i>\n                                <i class="red frown icon" ng-if="item.type == \'CRITICAL\'"></i>\n                                <i class="green attention icon" ng-if="item.type == \'MAJOR\'"></i>\n                                <i class="gray exclamation icon" ng-if="item.type == \'MINOR\'"></i>\n                                <i class="info icon" ng-if="item.type == \'INFO\'"></i></span>\n                            <span class="value">{{item.name}}</span>\n                            <span class="num">{{item.value}}</span>\n                        </a>\n\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>'),
a.put("git/qc/directives/qc-task-info.html",'<div class="qc-code-info">\n    <div class="ui dividing header">\n        <a href="{{PROJECT.project_path}}/git/qc">\n            <span class="back"><i class="arrow left icon" style="margin-top: 5px; float: left;"></i>代码分析</span>\n        </a>\n    </div>\n    <div class="item qc-commit-info" ng-if="task">\n      <a href="{{PROJECT.project_path}}/git/commit/{{task.commit.commitId}}" title="{{task.task.ref}}">\n        <strong>\n            <!-- <a href="{{PROJECT.project_path}}/git/commit/{{task.commit.commitId}}" -->\n                <span class="name">{{task.task.ref | qcGitShortVersionFilter}}</span>\n            <!-- </a> -->\n        </strong>\n        <!-- <a href="{{task.commit.committer.link}}"> -->\n            <img class="gravatar" height="16" width="16" ng-src="{{task.commit.committer.avatar}}"\n                title="{{task.commit.committer.name}}"/>\n        <!-- </a> -->\n        <span class="ago">提交于</span><span class="ago" cg-friendly-time="task.commit.commitTime"></span>\n        <span class="info" ng-if="task" title="{{task.commit.shortMessage}}">{{ task.commit.shortMessage }}</span>\n      </a>\n    </div>\n    <!-- <div class="">\n      <a class="prev" href="javascript:void(0);" ng-if="image_preview.prevId>0" ng-click="previewImage(image_preview.prevId);" title="{{image_preview.prevName}}" style="max-width: 45%;">\n          <i class="arrow left icon" style="margin-top: 5px; float: left;"></i>\n          <span class="ellipsis" style="max-width: 90%; display: inline-block; float: left;">{{image_preview.prevName}}</span>\n      </a>\n    </div> -->\n    <div class="tabular ui menu qc-tabular min-w">\n        <a class="item" ng-href="{{PROJECT.project_path}}/git/qc/tasks/{{task?task.task.id:\'\'}}"\n           ng-class="{active:inner_menu == \'qc_dashboard\'}">\n            <i class="basic pie chart icon"></i>概要\n        </a>\n        <a class="item" ng-href="{{PROJECT.project_path}}/git/qc/tasks/{{task?task.task.id:\'\'}}/issues"\n           ng-class="{active:inner_menu == \'qc_issues\'}">\n            <i class="bug icon"></i>问题代码\n        </a>\n        <a class="item" ng-href="{{PROJECT.project_path}}/git/qc/tasks/{{task?task.task.id:\'\'}}/duplications"\n           ng-class="{active:inner_menu == \'qc_duplications\'}">\n            <i class="repeat icon"></i>重复代码\n        </a>\n    </div>\n    <p></p>\n</div>\n'),a.put("git/qc/directives/qc-tasks.html",'<div class="ui secondary active qc-tasks">\n    <div class="">\n        <div class="item" ng-repeat="task in tasks"\n             ng-click="gotoTask(task)"\n             >\n             <!-- ng-class="{active:current_ref == task.task.ref}" -->\n            <div class="">\n                <img ng-src="{{task.creator.avatar}}" alt="{{task.creator.name}}" title="{{task.creator.name}}"/>\n            </div>\n            <div class="version">\n                <span title="{{task | qcGitTaskDetailFilter}}">{{task.task.version | qcGitShortVersionFilter}}</span>\n            </div>\n            <div class="version">\n                <span title="{{task.task.language}}">{{task.task.language}}</span>\n            </div>\n            <div class="time">\n                <span cg-friendly-time="task.task.created_at"></span>\n            </div>\n            <div class="commit-message">\n                <span>{{task.commit.shortMessage}}</span>\n            </div>\n            <div class="status">\n                <span ng-if="task.task.status==0" class="ready"><i class="icon stop ready"></i>排队中</span>\n                <span ng-if="task.task.status==3" class="finish"><i class="icon stop finish"></i>已完成</span>\n                <span ng-if="task.task.status==1" class="running"><i class="icon stop running"></i>分析中</span>\n                <span ng-if="task.task.status==2" class="failed"><i class="icon stop failed"></i>已失败</span>\n                <i class="icon close"\n                    ng-if="PROJECT | qcGitPermissionUserFilter"\n                    ng-click="deleteFailedTask(task.task.id, $event)">\n               </i>\n            </div>\n        </div>\n    </div>\n    <div>\n        <div cg-pager="{{pager_id}}" class="center"></div>\n    </div>\n</div>\n'),a.put("git/qc/qc-duplications.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}" ng-style="{\'display\':PROJECT.is_public?\'block\':\'initial\'}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'" class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container" id="qc-container">\n        <cg-git-qc-task-info task="task" project="PROJECT" current-ref="{{project_ref}}"\n                         inner-menu="{{qc_inner_menu}}"></cg-git-qc-task-info>\n        <cg-monkey-loading image-size="30" container-margin="120"\n                           ng-if="loading"></cg-monkey-loading>\n        <cg-git-qc-analysis-result task="task" project="PROJECT" ng-if="!loading"></cg-git-qc-analysis-result>\n        <div ng-if="task.task.status==3">\n            <section class="min-w">\n                <div class="issues code list">\n                    <div class="ui grid">\n                        <cg-git-qc-folders username="{{username}}" project-name="{{project_name}}"\n                                       resource-key="resource_key"\n                                       current-ref="project_ref" current-type="current_type"\n                                       current-rule="current_rule"\n                                       current-file="current_file"\n                                       current-folder="current_folder"\n                                       current-lang="current_lang"\n                                       code-full="code_full"\n                                       filename="filename"\n                                       type="duplication"\n                                       title="违规文件列表"\n                                ></cg-git-qc-folders>\n                        <cg-git-qc-code username="{{username}}" project-name="{{project_name}}"\n                                    resource-key="resource_key"\n                                    current-ref="project_ref" current-type="current_type"\n                                    current-rule="current_rule"\n                                    current-file="current_file"\n                                    current-folder="current_folder"\n                                    current-lang="current_lang"\n                                    code-full="code_full"\n                                    filename="filename"\n                                    type="duplication"\n                                ></cg-git-qc-code>\n                    </div>\n                </div>\n            </section>\n        </div>\n    </div>\n</div>\n'),a.put("git/qc/qc-home.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}" ng-style="{\'display\':PROJECT.is_public?\'block\':\'initial\'}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'" class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container" id="git-qc-container">\n        <div class="qc-home">\n            <header class="header ui dividing">\n                <b>代码分析 <i class="icon help tip" style="cursor: pointer;float: inherit;margin: 0px!important;" data-html="<div class=\'content\'>代码分析功能能够对 git 仓库中的代码进行静态的检测和分析，以判断其是否符合最佳实践，并提供代码分析报告，为相关管理成员提供项目决策及管理参考。<br/><a href=\'/help/doc/git/qc.html\' target=\'_blank\'>更多帮助<i class=\'icon double angle right\'></i></a></div>"\n                    cg-help-popup=""></i></b>\n            </header>\n            <article class="description">\n                代码分析会检测并分析您的代码，为您提供质量报告。您也可以设置定时分析任务，掌握每个时期的代码质量。\n            </article>\n            <div>\n                <a ng-click="onNewTaskClick(!isShowInit)" ng-if="PROJECT | qcGitPermissionUserFilter" class="ui dark gray button create-button" title="创建分析">\n                    <i class="add icon"></i> 新建分析任务\n                </a>\n            </div>\n            <cg-git-qc-init ng-show="isShowInit" username="{{username}}" project-name="{{project_name}}" on-create-successfully="onCreateSuccessfully(task)"\n                project="PROJECT" current-ref="{{project_ref}}" cancel="showInit(false)" depot="DEPOT" container="container">\n            </cg-git-qc-init>\n            <div>\n                <div class="ui tabular menu large">\n                    <a class="item" ng-click="changeActivitiesMode(\'manual\');" ng-class="{active: activities_mode == \'manual\'}">\n                        手动分析任务\n                    </a>\n                    <a class="item" ng-click="changeActivitiesMode(\'routine\');" ng-class="{active: activities_mode ==\'routine\'}">\n                        自动分析任务\n                    </a>\n                </div>\n            </div>\n            <div class="qc-list">\n                <div ng-show="activities_mode == \'manual\'">\n                    <cg-git-qc-tasks username="{{username}}" project-name="{{project_name}}" project="PROJECT"\n                        current-ref="{{project_ref}}" order="order">\n                    </cg-git-qc-tasks>\n                </div>\n                <div ng-show="activities_mode == \'routine\'">\n                    <cg-git-qc-routines username="{{username}}" project-name="{{project_name}}" project="PROJECT"\n                        current-ref="{{project_ref}}" order="order" on-modify="onModifyRoutine(routine)">\n                    </cg-git-qc-routines>\n                </div>\n            </div>\n            <cg-monkey-loading image-size="30" container-margin="120" ng-if="loading"></cg-monkey-loading>\n        </div>\n    </div>\n</div>\n\n<div class="guide-modal-shadow" id="qc-guide" ng-controller="QcGuideController" ng-if="!PROJECT.is_public && $root.canShowGuide(\'qc\')">\n    <div ng-show="modalVisible">\n        <div id="qc-guide-content" class="step-1">\n            <div class="close" ng-click="close()">我知道了</div>\n        </div>\n    </div>\n</div>\n'),a.put("git/qc/qc-issues.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}" ng-style="{\'display\':PROJECT.is_public?\'block\':\'initial\'}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'" class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n\n    <div class="container" id="qc-container">\n        <cg-git-qc-task-info task="task" project="PROJECT" current-ref="{{project_ref}}"\n                         inner-menu="{{qc_inner_menu}}"></cg-git-qc-task-info>\n        <cg-monkey-loading image-size="30" container-margin="120"\n                           ng-if="loading"></cg-monkey-loading>\n        <cg-git-qc-analysis-result task="task" project="PROJECT" ng-if="!loading"></cg-git-qc-analysis-result>\n        <div ng-if="task.task.status==3">\n            <cg-git-qc-rules username="{{username}}"\n                         project-name="{{project_name}}"\n                         resource-key="resource_key"\n                         current-ref="project_ref"\n                         current-type="current_type"\n                         current-rule="current_rule">\n\n            </cg-git-qc-rules>\n            <section class="min-w">\n                <div class="issues code list">\n                    <div class="ui grid">\n                        <cg-git-qc-folders username="{{username}}" project-name="{{project_name}}"\n                                       resource-key="resource_key"\n                                       current-ref="project_ref" current-type="current_type"\n                                       current-rule="current_rule"\n                                       current-file="current_file"\n                                       current-folder="current_folder"\n                                       current-lang="current_lang"\n                                       code-full="code_full"\n                                       filename="filename"\n                                       type="issue"\n                                       title="违规文件列表"\n                                ></cg-git-qc-folders>\n                        <cg-git-qc-code username="{{username}}" project-name="{{project_name}}"\n                                    resource-key="resource_key"\n                                    current-ref="project_ref" current-type="current_type"\n                                    current-rule="current_rule"\n                                    current-file="current_file"\n                                    current-folder="current_folder"\n                                    current-lang="current_lang"\n                                    code-full="code_full"\n                                    filename="filename"\n                                    type="issue"\n                                ></cg-git-qc-code>\n                    </div>\n                </div>\n            </section>\n        </div>\n    </div>\n</div>\n'),a.put("git/qc/qc-report.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}" ng-style="{\'display\':PROJECT.is_public?\'block\':\'initial\'}">\n<div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n<div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'" class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n<div class="container" id="qc-container">\n<cg-git-qc-task-info task="task" project="PROJECT" current-ref="{{project_ref}}"\n                 inner-menu="{{qc_inner_menu}}"></cg-git-qc-task-info>\n<cg-monkey-loading image-size="30" container-margin="120"\n                   ng-if="loading"></cg-monkey-loading>\n<cg-git-qc-analysis-result task="task" project="PROJECT" ng-if="!loading"></cg-git-qc-analysis-result>\n<div class="ui vertically divided grid qc-dashboard min-w" ng-if="task.task.status==3">\n<div class="two column row">\n<div class="column">\n    <section>\n        <div class="report-box">\n            <h3 class="report-header">\n                <span class="title">综合评分&nbsp;<i class="help icon"\n                                                 data-html="<div class=\'pointer\'></div><div class=\'content\'>{{help.score.html}}</div>"\n                                                 cg-help-popup="\'hover\'"\n                ></i></span>\n                <span class="num">{{ dashboard.reliability_rating.value && ((6 - dashboard.reliability_rating.value) * 7.5 + (6 - dashboard.sqale_rating.value) * 6.5 + (6 - dashboard.security_rating.value) * 6) || "-"}}</span><span\n                class="desc">（分）</span></h3>\n\n            <div class="report-content clearfix three column">\n                <div class="box-item vr-dashes">\n                    <p>{{dashboard.reliability_rating.formatValue || \'-\'}}</p>\n\n                    <p>健壮性</p>\n                </div>\n                <div class="box-item vr-dashes">\n                    <p>{{dashboard.sqale_rating.formatValue || \'-\'}}</p>\n\n                    <p>维护性</p>\n                </div>\n                <div class="box-item">\n                    <p>{{dashboard.security_rating.formatValue || \'-\'}}</p>\n\n                    <p>安全性</p>\n                </div>\n            </div>\n        </div>\n    </section>\n    <section>\n        <div class="report-box">\n            <h3 class="report-header">\n                <span class="title">大小指标&nbsp;<i class="help icon"\n                                                 data-html="<div class=\'pointer\'></div><div class=\'content\'>{{help.size.html}}</div>"\n                                                 cg-help-popup="\'hover\'"\n                        ></i></span>\n                <span class="num">{{dashboard.lines.formatValue || 0}}</span><span\n                    class="desc">（总行数）</span></h3>\n\n            <div class="report-content clearfix three column">\n                <div class="box-item vr-dashes hb-dashes">\n                    <p>{{dashboard.ncloc.formatValue || 0}}</p>\n\n                    <p>有效代码行数</p>\n                </div>\n                <div class="box-item vr-dashes hb-dashes">\n                    <p>{{dashboard.statements.formatValue || 0}}</p>\n\n                    <p>语句</p>\n                </div>\n                <div class="box-item hb-dashes">\n                    <p>{{dashboard.classes.formatValue || 0}}</p>\n\n                    <p>类</p>\n                </div>\n                <div class="box-item vr-dashes">\n                    <p>{{dashboard.packages.formatValue || 0}}</p>\n\n                    <p>包</p>\n                </div>\n                <div class="box-item vr-dashes">\n                    <p>{{dashboard.functions.formatValue || 0}}</p>\n\n                    <p>方法</p>\n                </div>\n                <div class="box-item">\n                    <p>{{dashboard.accessors.formatValue || 0}}</p>\n\n                    <p>存取(Getter/Setter)</p>\n                </div>\n            </div>\n        </div>\n    </section>\n    <section>\n        <div class="report-box">\n            <h3 class="report-header"><span class="title">文档和注释&nbsp;<i class="help icon"\n                                                                        data-html="<div class=\'pointer\'></div><div class=\'content\'>{{help.document.html}}</div>"\n                                                                        cg-help-popup="\'hover\'"\n                    ></i></span>\n                   <span\n                           class="num">{{dashboard.comment_lines.formatValue || 0}}</span><span\n                        class="desc">（注释行数）</span>\n            </h3>\n\n            <div class="report-content clearfix column text-center">\n                <div class="box-item">\n                    <div cg-git-qc-arc="dashboard.comment_lines_density_arc" cg-arc-x="20" cg-arc-y="25"\n                         ng-if="dashboard.comment_lines_density_arc"\n                         cg-arc-w="250"\n                         cg-arc-h="150" cg-arc-r="45" cg-show-border="true" cg-v-font-size="\'20px\'"\n                         cg-c-font-size="\'13px\'" cg-dot-radius="3" cg-center-comment="\'注释\'"></div>\n                </div>\n            </div>\n        </div>\n    </section>\n    <section>\n        <div class="report-box">\n            <h3 class="report-header"><span class="title">违反规则&nbsp;<i class="help icon"\n                                                                       data-html="<div class=\'pointer\'></div><div class=\'content\'>{{help.issues.html}}</div>"\n                                                                       cg-help-popup="\'hover\'"></i></span><span\n                    class="num">{{dashboard.violations.formatValue || 0}}</span><span\n                    class="desc">（共存在问题）</span></h3>\n\n            <div class="report-content clearfix one column" ng-if="dashboard">\n                <div class="box-item">\n                    <div class="rect" cg-git-qc-rect="dashboard.blocker_violations.value" cg-width="200"\n                         ng-if="dashboard.minor_violations"\n                         cg-max-violation="dashboard.violations.value"></div>\n                    <i class="red ban circle icon"></i><span class="label">阻断错误</span><span class="num"><a\n                        ng-href="/u/{{username}}/p/{{project_name}}/git/qc/tasks/{{task_id}}/issues?type=blocker">{{dashboard.blocker_violations.formatValue\n                    || 0}}</a></span></div>\n                <div class="box-item">\n                    <div class="rect" cg-git-qc-rect="dashboard.critical_violations.value" cg-width="200"\n                         ng-if="dashboard.minor_violations"\n                         cg-max-violation="dashboard.violations.value"></div>\n                    <i class="red frown icon"></i><span class="label">严重问题</span><span class="num"><a\n                        ng-href="/u/{{username}}/p/{{project_name}}/git/qc/tasks/{{task_id}}/issues?type=critical">{{dashboard.critical_violations.formatValue\n                    || 0}}</a></span></div>\n                <div class="box-item">\n                    <div class="rect" cg-git-qc-rect="dashboard.major_violations.value" cg-width="200"\n                         ng-if="dashboard.minor_violations"\n                         cg-max-violation="dashboard.violations.value"></div>\n                    <i class="green attention icon"></i><span class="label">主要问题</span><span class="num"><a\n                        ng-href="/u/{{username}}/p/{{project_name}}/git/qc/tasks/{{task_id}}/issues?type=major">{{dashboard.major_violations.formatValue\n                    || 0}}</a></span></div>\n                <div class="box-item">\n                    <div class="rect" cg-git-qc-rect="dashboard.minor_violations.value" cg-width="200"\n                         ng-if="dashboard.minor_violations"\n                         cg-max-violation="dashboard.violations.value"></div>\n                    <i class="gray exclamation icon"></i><span class="label">次要问题</span><span class="num"><a\n                        ng-href="/u/{{username}}/p/{{project_name}}/git/qc/tasks/{{task_id}}/issues?type=minor">{{dashboard.minor_violations.formatValue\n                    || 0}}</a></span></div>\n                <div class="box-item">\n                    <div class="rect" cg-git-qc-rect="dashboard.info_violations.value" cg-width="200"\n                         ng-if="dashboard.minor_violations"\n                         cg-max-violation="dashboard.violations.value"></div>\n                    <i class="info icon"></i><span class="label">提示信息</span><span class="num"><a\n                        ng-href="/u/{{username}}/p/{{project_name}}/git/qc/tasks/{{task_id}}/issues?type=info">{{dashboard.info_violations.formatValue\n                    || 0}}</a></span></div>\n            </div>\n        </div>\n    </section>\n</div>\n<div class="column">\n    <section>\n        <div class="report-box">\n            <h3 class="report-header"><span class="title">复杂度&nbsp;<i class="help icon"\n                                                                      data-html="<div class=\'pointer\'></div><div class=\'content\'>{{help.complexity.html}}</div>"\n                                                                      cg-help-popup="\'hover\'"></i></span><span\n                    class="num">{{dashboard.complexity.formatValue || 0}}</span><span\n                    class="desc">（整体复杂度）</span></h3>\n\n            <div class="report-content clearfix two column">\n                <p class="alone">类均值：{{dashboard.class_complexity.formatValue || 0}}</p>\n\n                <div class="box-item vr-dashes ">\n                    <p class="">方法均值：{{dashboard.function_complexity.formatValue || 0}}</p>\n\n                    <p>\n\n                    <p class="chart" cg-git-qc-chart="dashboard.function_complexity_distribution"\n                       ng-if="dashboard.function_complexity_distribution" cg-chart-w="180" cg-chart-h="90"\n                       cg-chart-margin-left="40" cg-chart-margin-Top="20" cg-chart-margin-right="10"\n                       cg-chart-margin-bottom="20">\n                    </p>\n                    </p>\n\n                    <p>复杂度(x)/方法数量(y)</p>\n                </div>\n                <div class="box-item ">\n                    <p>文件均值：{{dashboard.file_complexity.formatValue || 0}}</p>\n\n                    <p class="chart" cg-git-qc-chart="dashboard.file_complexity_distribution"\n                       ng-if="dashboard.file_complexity_distribution" cg-chart-w="180" cg-chart-h="90"\n                       cg-chart-margin-left="40" cg-chart-margin-Top="20" cg-chart-margin-right="10"\n                       cg-chart-margin-bottom="20">\n                    </p>\n\n                    <p>复杂度(x)/文件数量(y)</p>\n                </div>\n            </div>\n        </div>\n    </section>\n    <section ng-if="false">\n        <div class="report-box">\n            <h3 class="report-header"><span class="title">测试覆盖率&nbsp;<i class="help icon"\n                                                                        data-html="<div class=\'pointer\'></div><div class=\'content\'>{{help.coverage.html}}</div>"\n                                                                        cg-help-popup="\'hover\'"></i></span><span\n                    class="num">{{dashboard.tests.formatValue||0}}</span><span\n                    class="desc">（运行测试总数）</span>\n                        <span\n                                class="num">{{dashboard.test_execution_time.formatValue || 0}}</span><span\n                        class="desc">（运行测试耗时）</span></h3>\n\n            <div class="report-content clearfix two-split column">\n                <div class="box-item">\n                    <div cg-git-qc-arc="coverage.test_density_arc" cg-arc-x="105" cg-arc-y="55"\n                         cg-arc-w="300"\n                         cg-arc-h="200" cg-arc-r="45" cg-show-border="true" cg-v-font-size="\'18px\'"\n                         cg-c-font-size="\'13px\'" cg-dot-radius="3" cg-center-comment="\'测试\'"\n                         ng-if="dashboard.test_density_arc"></div>\n                </div>\n                <div class="box-item">\n                    <div cg-git-qc-arc="coverage.branch_coverage_arc" cg-arc-x="30" cg-arc-y="40"\n                         cg-arc-w="150"\n                         cg-arc-h="100" cg-arc-r="20" cg-show-border="true" cg-v-font-size="\'16px\'"\n                         cg-c-font-size="\'12px\'" cg-dot-radius="2" cg-center-comment="\'\'"\n                         ng-if="dashboard.branch_coverage_arc"></div>\n                    <div cg-git-qc-arc="coverage.line_coverage_arc" cg-arc-x="30" cg-arc-y="40"\n                         cg-arc-w="150"\n                         cg-arc-h="100" cg-arc-r="20" cg-show-border="true" cg-v-font-size="\'16px\'"\n                         cg-c-font-size="\'12px\'" cg-dot-radius="2" cg-center-comment="\'\'"\n                         ng-if="dashboard.branch_coverage_arc"></div>\n                </div>\n            </div>\n        </div>\n    </section>\n    <section>\n        <div class="report-box">\n            <h3 class="report-header"><span class="title">重复率&nbsp;<i class="help icon"\n                                                                      data-html="<div class=\'pointer\'></div><div class=\'content\'>{{help.duplication.html}}</div>"\n                                                                      cg-help-popup="\'hover\'"></i></span><span\n                    class="num">{{dashboard.duplicated_lines_density.formatValue || \'0%\'}}</span><span\n                    class="desc">（总重复率）</span></h3>\n\n            <div class="report-content clearfix three column">\n                <div class="box-item vr-dashes ">\n                    <p><a ng-href="/u/{{username}}/p/{{project_name}}/git/qc/tasks/{{task_id}}/duplications">{{dashboard.duplicated_lines.formatValue\n                        || 0}}行</a>\n                    </p>\n\n                    <p>重复行数</p>\n                </div>\n                <div class="box-item vr-dashes ">\n                    <p><a ng-href="/u/{{username}}/p/{{project_name}}/git/qc/tasks/{{task_id}}/duplications">{{dashboard.duplicated_blocks.formatValue\n                        || 0}}块</a>\n                    </p>\n\n                    <p>重复块数</p>\n                </div>\n                <div class="box-item">\n                    <p><a ng-href="/u/{{username}}/p/{{project_name}}/git/qc/tasks/{{task_id}}/duplications">{{dashboard.duplicated_files.formatValue\n                        || 0}}文件</a>\n                    </p>\n\n                    <p>重复文件数</p>\n                </div>\n            </div>\n        </div>\n    </section>\n</div>\n</div>\n</div>\n</div>\n</div>\n'),a.put("git/release/edit.html",""),a.put("git/release/index.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'"\n         class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container git-container releases">\n        <div class="ui tabular menu">\n            <a class="item active">\n                {{\'tab_release\' | i18n:\'code_release\'}}\n            </a>\n            <a class="item" ng-href="{{PROJECT.project_path}}/git/tags2">\n                {{\'tab_tag\' | i18n:\'code_release\'}}\n            </a>\n            <a class="ui button small" ng-href="{{PROJECT.project_path}}/git/releases/create">\n                <i class="add icon"></i>{{\'new_release\' | i18n:\'code_release\'}}\n            </a>\n        </div>\n        <div ng-show="loaded">\n            <div class="release-list" ng-if="releases && releases.length > 0">\n                <ul class="clearfix">\n                    <li ng-repeat="release in releases" class="clearfix">\n                        <div ng-if="!isSameDay(releases, $index)"\n                             class="date"\n                             cg-time-ago-day="release.created_at"\n                             cg-time-ago-day-with-year="!isSameYear(releases, $index)"\n                             ng-class="{green : isToday(release.created_at)}">\n                        </div>\n                    <span class="release-name">\n                        <a ng-href="{{PROJECT.project_path}}/git/release/tag/{{release.tag_name}}" >{{release.tag_name}}</a>\n                    </span>\n                        <div class="content">\n                            <div class="release-info">\n                                <a ng-href="{{release.author.link}}" class="avatar">\n                                    <img ng-src="{{release.author.avatar}}" alt="{{release.author.name}}" />\n                                </a>\n                                <div class="release-page">\n                                    <span class="circle"></span>\n                                    <div class="title">{{release.title}}</div>\n                                    <div class="btn">\n                                        <a ng-href="{{PROJECT.project_path}}/git/commit/{{release.last_commit.commitId}}">\n                                            <i class="code icon"></i>\n                                            {{release.last_commit.commitId | shortCommitId}}\n                                        </a>\n                                        <a ng-href="{{PROJECT.project_path}}/git/archive/{{release.tag_name | encodeGitUri}}.zip" target="_self">\n                                            <i class="download disk icon green"></i>\n                                            zip\n                                        </a>\n                                        <a ng-href="{{PROJECT.project_path}}/git/archive/{{release.tag_name | encodeGitUri}}.tar.gz" target="_self">\n                                            <i class="download disk icon green"></i>\n                                            tar.gz\n                                        </a>\n                                    </div>\n                                    <div class="message" ng-if="release.body">\n                                        <div class="markdown content" clip-copy-code="pre" cg-highlight="release.markdownBody"></div>\n                                        <div cg-gallery="release.markdownBody"></div>\n                                    </div>\n                                    <div cg-release-resource-reference\n                                         resource-references="release.resourceReferences"\n                                         show-add="false"\n                                         class="resource-reference"></div>\n                                    <div class="compare-tag-link" ng-if="release.compare_tag_name">\n                                        <a ng-href="{{PROJECT.project_path}}/git/compare/{{release.compare_tag_name}}...{{release.tag_name}}">{{\'view_diff_compared_to\' | i18n:\'code_release\':release.compare_tag_name}}</a>\n                                    </div>\n                                    <div class="attachments" ng-if="release.attachments.length > 0">\n                                        <ul>\n                                            <li ng-repeat="attachment in release.attachments">\n                                                <a ng-href="/api/user/{{PROJECT.owner_user_name}}/project/{{PROJECT.name}}/git/releases/attachments/download/{{attachment.id}}" target="_self">{{attachment.name}}</a>\n                                                <span class="size">({{attachment.size | bytes:2}})</span>\n                                            </li>\n                                        </ul>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </li>\n                </ul>\n            </div>\n\n            <div cg-pager="{{pager_id}}" class="center"></div>\n            <div ng-if="!releases || releases.length == 0">\n                <div ng-include="\'app/git/partial/_back-monkey.html\'"></div>\n                <div class="create-tag-tips">\n                    <p class="ui coding aligned center"><strong>{{\'no_release\' | i18n:\'code_release\'}}</strong></p>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div ng-if="!loaded" class="container">\n        <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n\n    </div>\n</div>'),
a.put("git/release/new.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'"\n         class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container git-container releases">\n        <div class="ui tabular menu">\n            <a class="item active" ng-href="{{PROJECT.project_path}}/git/releases">\n                {{\'tab_release\' | i18n:\'code_release\'}}\n            </a>\n            <a class="item" ng-href="{{PROJECT.project_path}}/git/tags2">\n                {{\'tab_tag\' | i18n:\'code_release\'}}\n            </a>\n            <a class="ui button small">\n                <i class="add icon"></i>{{\'new_release\' | i18n:\'code_release\'}}\n            </a>\n        </div>\n        <div class="release-new-pannel">\n            <div class="ui header clearfix dividing">{{\'new_release\' | i18n:\'code_release\'}}</div>\n            <div class="ui form">\n                <div class="field">\n                    <label>{{\'tag_name\' | i18n:\'code_release\'}}</label>\n                    <div class="inline-fields">\n                        <div class="field">\n                            <span>release</span>\n                        </div>\n                        <div class="field">\n                            <span class="split-sign">/</span>\n                        </div>\n                        <div class="field">\n                            <input type="text" ng-model="release.tagName" ng-change="updateTitle()">\n                        </div>\n                        <div class="field ">\n                            <span class="at-sign">@</span>\n                        </div>\n                        <div class="field">\n                            <div cg-git-commitish-suggester\n                                 ng-model="release.targetCommitish"\n                                 refs="refs"\n                                 width="200px"\n                                 selection-prefix="{{\'tag_point\' | i18n:\'code_release\'}}"\n                                 ng-change="updateCommitSha(release.targetCommitish)"></div>\n                        </div>\n                        <div class="field">\n                            <span class="commit-sha">{{release.commitSha}}</span>\n                        </div>\n                    </div>\n                </div>\n                <div class="field">\n                    <label>{{\'title\' | i18n:\'code_release\'}}</label>\n                    <input type="text"\n                           ng-model="release.title"\n                           ng-keyup="updateTitleFollowsTagName()"\n                           onfocus="this.select();">\n                </div>\n                <div class="field">\n                    <label>{{\'description\' | i18n:\'code_release\'}}</label>\n                    <div cg-light-md-editor="edit"\n                         editor-id="release-creation-body-editor"\n                         class="editor"\n                         ng-model="release.body"\n                         cg-refer-resource="project_dependency"\n                         at-item="PROJECT"\n                         at-context-type="\'project_member\'"\n                         img-compression="false"\n                         project_dependency="PROJECT"\n                         image_picker_mode="\'md-editor up\'"\n                         on-change="onContentChange"\n                         show-submit="false"\n                         on-preview="allLoadingDone"\n                         placeholder="{{\'put_release_description_here\' |  i18n:\'code_release\'}}"></div>\n                </div>\n                <div class="field">\n                    <label>{{\'select_release_tag_to_be_compared\' | i18n:\'code_release\'}}</label>\n                    <div cg-git-commitish-suggester\n                         ng-model="release.compareTagName"\n                         refs="compareTagNames"\n                         width="200px"\n                         selection-prefix=""\n                         prevent-custom-option="true"></div>\n                </div>\n                <div class="field">\n                    <div cg-release-resource-reference\n                         resource-references="release.resourceReferences"\n                         show-add="true"></div>\n                </div>\n                <div class="field">\n                    <div cg-release-attachment-upload\n                         attachment-list="release.attachments"></div>\n                </div>\n                <a class="ui dark gray medium submit button"\n                   ng-click="createRelease(release)"\n                   ng-disabled="uploading">{{\'create_button\' | i18n:\'code_release\'}}</a>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("git/release/show.html",""),a.put("git/release/tag/index.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'"\n         class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container git-container releases">\n        <div class="ui tabular menu">\n            <a class="item" ng-href="{{PROJECT.project_path}}/git/releases">\n                {{\'tab_release\' | i18n:\'code_release\'}}\n            </a>\n            <a class="item active">\n                {{\'tab_tag\' | i18n:\'code_release\'}}\n            </a>\n            <a class="ui button small" ng-href="{{PROJECT.project_path}}/git/releases/create">\n                <i class="add icon"></i>{{\'new_release\' | i18n:\'code_release\'}}\n            </a>\n        </div>\n        <div ng-show="loaded">\n            <div class="ui coding clearfix" style="margin-bottom:30px;"\n                 ng-if="(PROJECT | isRole:MEMBER)">\n                <div class="ui floated coding left">\n                    <a class="ui button small"\n                       ng-href="{{PROJECT.project_path}}/git/tags2/create"><i class="add icon"></i>{{\'new_tags\' | i18n:\'code_tag\'}}</a>\n                </div>\n            </div>\n\n            <div class="tag-list" ng-if="tags && tags.length > 0">\n                <ul class="clearfix">\n                    <li ng-repeat="tag in tags" class="clearfix">\n                        <div ng-if="!isSameDay(tags, $index)" class="date" cg-time-ago-day="tag.created_at" cg-time-ago-day-with-year="!isSameYear(tags, $index)" ng-class="{green : isToday(tag.created_at)}">\n                        </div>\n                    <span class="tag-name">\n                        <a ng-href="{{PROJECT.project_path}}/git/tree/{{tag.name | encodeGitUri}}" >{{tag.name}}</a>\n                    </span>\n                        <div class="content">\n                            <div class="tag-info">\n                                <a ng-href="{{tag.author.link}}" class="avatar">\n                                    <img ng-src="{{tag.author.avatar}}" alt="{{tag.author.name}}" />\n                                </a>\n                                <div class="tag-page">\n                                    <span class="circle"></span>\n                                    <div class="message" ng-if="tag.message"><pre>{{tag.message}}</pre></div>\n                                    <div class="info" ng-style="{\'margin-top\': tag.message?\'0\':\'20px\' }">\n                                        <span><a ng-href="{{tag.author.link}}">{{tag.author.name}}</a></span>\n                                        <span class="time">{{\'created_at\' | i18n:\'code_tag\'}} <span cg-friendly-time="tag.created_at"></span></span>\n                                    </div>\n                                    <div class="btn">\n                                        <a ng-href="{{PROJECT.project_path}}/git/commit/{{tag.last_commit.commitId}}">\n                                            <i class="code icon"></i>\n                                            {{tag.last_commit.commitId | shortCommitId}}\n                                        </a>\n                                        <a ng-href="{{PROJECT.project_path}}/git/archive/{{tag.name | encodeGitUri}}.zip" target="_self">\n                                            <i class="download disk icon green"></i>\n                                            zip\n                                        </a>\n                                        <a ng-href="{{PROJECT.project_path}}/git/archive/{{tag.name | encodeGitUri}}.tar.gz" target="_self">\n                                            <i class="download disk icon green"></i>\n                                            tar.gz\n                                        </a>\n                                        <a ng-if="(PROJECT | isRole:MEMBER)" href="javascript:void(0);" ng-click="delete_tag(tag)" >\n                                            <i class="minus sign alternate icon red"></i>\n                                            Delete\n                                        </a>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </li>\n                </ul>\n            </div>\n\n            <div cg-pager="{{pager_id}}" class="center"></div>\n            <div ng-if="!tags || tags.length == 0">\n                <div ng-include="\'app/git/partial/_back-monkey.html\'"></div>\n                <div class="create-tag-tips">\n                    <p class="ui coding aligned center"><strong>{{\'no_tags\' | i18n:\'code_tag\'}}</strong></p>\n\n'+"                    <p>{{'can_user' | i18n:'code_tag'}} <code>git tag</code> {{'create_tag' | i18n:'code_tag'}}</p>\n\n                    <p><code>git tag -a v1.0 -m 'version 1.0'</code></p>\n\n                    <p>{{'can_user' | i18n:'code_tag'}} <code>git push</code> {{'push_tag' | i18n:'code_tag'}}</p>\n\n                    <p><code>git push origin v1.0:v1.0</code></p>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div ng-if=\"!loaded\" class=\"container\">\n        <cg-monkey-loading image-size=\"50\" container-margin=\"60\"></cg-monkey-loading>\n\n    </div>\n</div>"),a.put("git/release/tag/new.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'" class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container tags releases git-container">\n        <div class="ui tabular menu">\n            <a class="item" ng-href="{{PROJECT.project_path}}/git/releases">\n                {{\'tab_release\' | i18n:\'code_release\'}}\n            </a>\n            <a class="item active" ng-href="{{PROJECT.project_path}}/git/tags2">\n                {{\'tab_tag\' | i18n:\'code_release\'}}\n            </a>\n            <a class="ui button small" ng-href="{{PROJECT.project_path}}/git/releases/create">\n                <i class="add icon"></i>{{\'new_release\' | i18n:\'code_release\'}}\n            </a>\n        </div>\n\n        <div class="ui form segment" style="max-width:500px;margin:20px auto;">\n            <h4>{{\'new_tags\' | i18n:\'code_tag\'}}</h4>\n            <div class="field">\n                <label>{{\'tag_name\' | i18n:\'code_tag\'}}</label>\n                <div class="ui left labeled input">\n                    <input type="text" ng-model="new_tag.name" placeholder="{{\'input_tag_name\' | i18n:\'code_tag\'}}" cg-enter="create_tag(new_tag)" required>\n                </div>\n            </div>\n            <div class="field">\n                <label>{{\'tag_point\' | i18n:\'code_tag\'}}</label>\n                <div class="ui left labeled input">\n                    <input type="text" ng-model="new_tag.tag_point" placeholder="{{\'tag_point_tip\' | i18n:\'code_tag\'}}" cg-enter="create_tag(new_tag)">\n                </div>\n            </div>\n            <div class="field">\n                <label>{{\'tag_message\' | i18n:\'code_tag\'}}</label>\n                <div class="ui left labeled input">\n                    <textarea ng-model="new_tag.message" placeholder="{{\'tag_message_tip\' | i18n:\'code_tag\'}}" cg-ctrl-enter="create_tag(new_tag)"></textarea>\n                </div>\n            </div>\n            <div class="ui dark gray medium submit button" ng-click="create_tag(new_tag)" ng-show="!submitting">{{\'create\' | i18n:\'code_tag\'}}</div>\n            <div class="ui dark gray medium submit button" ng-show="submitting"><i class="loading icon"></i></div>\n            <div class="ui error message"></div>\n        </div>\n    </div>\n</div>\n'),a.put("git/stargazers/stargazers.html",'<div class="public-project-view">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div class="container" ng-if="!loaded">\n     <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n</div>\n    <div ng-if="loaded">\n      <h2>收藏了 {{PROJECT.name}} 的人</h2>\n      <hr>\n      <div style="padding-top:20px;">\n          <div class="public-project-view-watchers" ng-if="stargazers.length > 0" ng-repeat="user in stargazers">\n            <div class="avatar">\n                <a ng-href="/u/{{user.global_key}}"><img class="ui image avatar64" ng-src="{{user.avatar}}"/></a>\n            </div>\n            <div class="info">\n                <a ng-href="/u/{{user.global_key}}">{{user.name}}</a>\n            </div>\n            <div class="action">\n                <div ng-if="user.followed && user.id != USER.id" class="ui down tiny gray button" ng-click="unfollow(user);">\n                    <i class="minus icon"></i>\n                    取消关注\n                </div>\n                <div ng-if="!user.followed && user.id != USER.id" class="ui down tiny green button" ng-click="follow(user);">\n                    <i class="add icon"></i>\n                    关注\n                </div>\n                <div ng-if="user.id != USER.id" class="ui down black tiny button" ng-click="showSendMsgDialog(user)">\n                    给TA私信\n                </div>\n                <div ng-if="user.id == USER.id" class="ui green label self" style="line-height: 14px;">\n                    你自己\n                </div>\n            </div>\n          </div>\n\n      </div>\n    </div>\n    <div cg-pager="{{pager_id}}" class="center"></div>\n</div>\n'),a.put("git/tag/index.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'"\n         class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div ng-if="!loaded" class="container">\n            <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n\n    </div>\n    <div class="container git-container" ng-if="loaded" style="overflow-x: hidden">\n        <h4 ng-if="!PROJECT.is_public">{{\'tags\' | i18n:\'code_tag\'}}</h4>\n\n        <div ng-if="!PROJECT.is_public" class="ui divider"></div>\n\n        <div class="ui coding clearfix" style="margin-bottom:30px;"\n             ng-if="(PROJECT | isRole:MEMBER)">\n            <div class="ui floated coding left">\n                <a class="ui button small" ng-href="{{PROJECT.project_path}}/git/tags/create"><i class="add icon"></i>{{\'new_tags\' | i18n:\'code_tag\'}}</a>\n            </div>\n        </div>\n\n        <div class="tag-list" ng-if="tags && tags.length > 0">\n            <ul class="clearfix">\n                <li ng-repeat="tag in tags" class="clearfix">\n                    <div ng-if="!isSameDay(tags, $index)" class="date" cg-time-ago-day="tag.created_at" cg-time-ago-day-with-year="!isSameYear(tags, $index)" ng-class="{green : isToday(tag.created_at)}">\n                    </div>\n                    <span class="tag-name">\n                        <a ng-href="{{PROJECT.project_path}}/git/tree/{{tag.name | encodeGitUri}}" >{{tag.name}}</a>\n                    </span>\n                    <div class="content">\n                        <div class="tag-info">\n                            <a ng-href="{{tag.author.link}}" class="avatar">\n                                <img ng-src="{{tag.author.avatar}}" alt="{{tag.author.name}}" />\n                            </a>\n                            <div class="tag-page">\n                                <span class="circle"></span>\n                                <div class="message" ng-if="tag.message"><pre>{{tag.message}}</pre></div>\n                                <div class="info" ng-style="{\'margin-top\': tag.message?\'0\':\'20px\' }">\n                                    <span><a ng-href="{{tag.author.link}}">{{tag.author.name}}</a></span>\n                                    <span class="time">{{\'created_at\' | i18n:\'code_tag\'}} <span cg-friendly-time="tag.created_at"></span></span>\n                                </div>\n                                <div class="btn">\n                                    <a ng-href="{{PROJECT.project_path}}/git/commit/{{tag.last_commit.commitId}}">\n                                        <i class="code icon"></i>\n                                        {{tag.last_commit.commitId | shortCommitId}}\n                                    </a>\n                                    <a ng-href="{{PROJECT.project_path}}/git/archive/{{tag.name | encodeGitUri}}.zip" target="_self">\n                                        <i class="download disk icon green"></i>\n                                        zip\n                                    </a>\n                                    <a ng-href="{{PROJECT.project_path}}/git/archive/{{tag.name | encodeGitUri}}.tar.gz" target="_self">\n                                        <i class="download disk icon green"></i>\n                                        tar.gz\n                                    </a>\n                                    <a ng-if="(PROJECT | isRole:MEMBER)" href="javascript:void(0);" ng-click="delete_tag(tag)" >\n                                        <i class="minus sign alternate icon red"></i>\n                                        Delete\n                                    </a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n        </div>\n\n        <div cg-pager="{{pager_id}}" class="center"></div>\n        <div ng-if="!tags || tags.length == 0">\n            <div ng-include="\'app/git/partial/_back-monkey.html\'"></div>\n            <div class="create-tag-tips">\n                <p class="ui coding aligned center"><strong>{{\'no_tags\' | i18n:\'code_tag\'}}</strong></p>\n\n'+"                <p>{{'can_user' | i18n:'code_tag'}} <code>git tag</code> {{'create_tag' | i18n:'code_tag'}}</p>\n\n                <p><code>git tag -a v1.0 -m 'version 1.0'</code></p>\n\n                <p>{{'can_user' | i18n:'code_tag'}} <code>git push</code> {{'push_tag' | i18n:'code_tag'}}</p>\n\n                <p><code>git push origin v1.0:v1.0</code></p>\n            </div>\n        </div>\n    </div>\n</div>\n"),a.put("git/tag/new.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'" ></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'" class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div class="container tags git-container">\n        <h4 ng-if="!PROJECT.is_public" class="header">{{\'tags\' | i18n:\'code_tag\'}}</h4>\n        <div ng-if="!PROJECT.is_public" class="ui divider"></div>\n\n        <div class="ui form segment" style="max-width:500px;margin:20px auto;">\n            <h4>{{\'new_tags\' | i18n:\'code_tag\'}}</h4>\n            <div class="field">\n                <label>{{\'tag_name\' | i18n:\'code_tag\'}}</label>\n                <div class="ui left labeled input">\n                    <input type="text" ng-model="new_tag.name" placeholder="{{\'input_tag_name\' | i18n:\'code_tag\'}}" cg-enter="create_tag(new_tag)" required>\n                </div>\n            </div>\n            <div class="field">\n                <label>{{\'tag_point\' | i18n:\'code_tag\'}}</label>\n                <div class="ui left labeled input">\n                    <input type="text" ng-model="new_tag.tag_point" placeholder="{{\'tag_point_tip\' | i18n:\'code_tag\'}}" cg-enter="create_tag(new_tag)">\n                </div>\n            </div>\n            <div class="field">\n                <label>{{\'tag_message\' | i18n:\'code_tag\'}}</label>\n                <div class="ui left labeled input">\n                <textarea ng-model="new_tag.message" placeholder="{{\'tag_message_tip\' | i18n:\'code_tag\'}}" cg-ctrl-enter="create_tag(new_tag)"></textarea>\n                </div>\n            </div>\n            <div class="ui dark gray medium submit button" ng-click="create_tag(new_tag)" ng-show="!submitting">{{\'create\' | i18n:\'code_tag\'}}</div>\n            <div class="ui dark gray medium submit button" ng-show="submitting"><i class="loading icon"></i></div>\n            <div class="ui error message"></div>\n        </div>\n    </div>\n</div>\n'),a.put("git/tree/tree.html",'<div ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div ng-if="!PROJECT.is_public" ng-include="\'app/git/partial/inner_menu.html\'"\n        class="ui secondary vertical fixed menu active" id="inner-menu"></div>\n    <div ng-if="!loaded" class="container">\n        <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n    </div>\n    <div ng-if="loaded" class="container" style="margin-bottom:40px;">\n        <div ng-if="empty" ng-include="\'app/git/partial/_empty.html\'"></div>\n        <div class="git-container" ng-if="!empty">\n\n            <div class="tree">\n                <div cg-git-file-navigation></div>\n                <div ng-if="too_many_files" class="ui message">\n                    <div class="header">\n                        {{\'coding_tip\' | i18n:\'code_tree\'}}：\n                    </div>\n                    <p>{{\'coding_tip1\' | i18n:\'code_tree\'}}<p/>\n                </div>\n                <div class="commit-tease">\n                    <span class="coding floated right">\n                        <a ng-href="{{PROJECT.project_path}}/git/commit/{{tree.lastCommit.commitId}}" class="commit-tease-sha">\n                            {{tree.lastCommit.commitId | shortCommitId:10}}\n                        </a>\n                        <i class="icon" ng-class="{\'green checkmark\':showCopyIcon,\'paste\':!showCopyIcon}" clip-copy="tree.lastCommit.commitId" clip-click="copyCommit()"></i>\n                        {{\'commit_at\' | i18n:\'code_tree\'}}\n                        <time cg-friendly-time="tree.lastCommit.commitTime"></time>\n                    </span>\n                    <span class="commit-author-section">\n                        <a ng-href="{{tree.lastCommitter.link}}">\n                            <img class="author-gravatar" ng-src="{{tree.lastCommitter.avatar}}" alt="@{{tree.lastCommitter.name}}"\n                                                         width="20" height="20"/>\n                        </a>\n                        <span class="author-name"><a href="{{tree.lastCommitter.link}}" title="{{tree.lastCommitter.name}}">{{tree.lastCommitter.name}}</a></span>\n                    </span>\n                    <span class="message">\n                        <a ng-href="{{PROJECT.project_path}}/git/commit/{{tree.lastCommit.commitId}}" cg-bind-html="shortMessage"></a>\n                    </span>\n                    <span ng-if="allMessage.length > 0" ng-click="toggleShowAllMessage(showAllMessage)"  class="hidden-text-expander">\n                        <a>...</a>\n                    </span>\n                    <div class="commit-desc">\n                        <pre ng-show="showAllMessage" cg-bind-html="allMessage"></pre>\n                    </div>\n                </div>\n                <div class="files-list">\n                    <table class="files">\n                        <tr ng-if="parentLink && parentLink.length > 0">\n                            <td class="content">\n                                <span class="truncate truncate-target">\n                                    <a ng-href="{{parentLink}}"><i class="reply mail icon"></i>..</a>\n                                </span>\n                            </td>\n                            <td></td>\n                            <td></td>\n                            <td></td>\n                            <td></td>\n                        </tr>\n                        <tr ng-repeat="file in tree.files" id="tr_{{md5.createHash(file.path)}}">\n                            <td class="icon">\n                                <i class="{{fileIcon(file.mode)}}"\n                                    ng-style="{\'color\':file.mode==\'git_link\'?\'orange\':\'\'}"></i>\n                            </td>\n                            <td class="content">\n                                <span class="truncate truncate-target">\n                                  <a cg-file-path="file" cg-ref="ref">\n                                  </a>\n                                </span>\n                            </td>\n                            <td class="age">\n                                <span class="truncate truncate-target"></span>\n                            </td>\n                            <td class="committer">\n                                <span class="truncate truncate-target">\n                                    <i class="loading icon" style="font-size: 10px"></i>\n                                    <a href="#"></a>\n                                </span>\n                            </td>\n                            <td class="name">\n                                <span class="truncate truncate-target">\n                                    <a href="#"></a>\n                                </span>\n                            </td>\n                            <td class="message">\n                                <span class="truncate truncate-target">\n                                    <a href=""></a>\n                                </span>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n            </div>\n\n            <div ng-if="readme" cg-git-readme="readme"></div>\n            <div ng-if="!readme && can_edit && !path" class="readme">\n                <div class="empty-readme">{{\'readme_recommend\' | i18n:\'code_tree\'}} <a\n                        ng-href="{{PROJECT.project_path}}/git/new/{{ref}}?filename=README.md">README</a>\n                </div>\n            </div>\n            <div cg-tree-info="tree_url" ng-if="tree_url.length > 0 && tree.files"></div>\n        </div>\n    </div>\n</div>\n<div class="ui page dimmer" id="git_upload_dragenter">\n    <div class="content" style="box-sizing: border-box; padding: 50px">\n        <div class="content" style="border: 2px dashed #fff;">\n            <div class="center">\n'+"                <span style=\"font-size: 24px;;line-height: 40px;\"><i class=\"upload cloud icon\"></i><span>{{'upload_tip' | i18n:'code_tree'}}</span><br/><span>{{'support_format' | i18n:'code_tree'}}</span></span>\n            </div>\n        </div>\n    </div>\n</div>\n"),a.put("git/watchers/watchers.html",'<div class="public-project-view">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div class="container" ng-if="!loaded">\n     <cg-monkey-loading image-size="50" container-margin="60"></cg-monkey-loading>\n    </div>\n    <div ng-if="loaded">\n      <h2>关注了 {{PROJECT.name}} 的人</h2>\n      <div style="padding-top:20px;">\n          <div class="public-project-view-watchers" ng-if="watchers.length > 0" ng-repeat="user in watchers">\n            <div class="avatar">\n                <a ng-href="/u/{{user.global_key}}"><img class="ui image avatar64" ng-src="{{user.avatar}}"/></a>\n            </div>\n            <div class="info">\n                <a ng-href="/u/{{user.global_key}}">{{user.name}}</a>\n            </div>\n            <div class="action">\n                <div ng-if="user.followed && user.id != USER.id" class="ui down small gray button" ng-click="unfollow(user);">\n                    <i class="minus icon"></i>\n                    取消关注\n                </div>\n                <div ng-if="!user.followed && user.id != USER.id" class="ui down small green button" ng-click="follow(user);">\n                    <i class="add icon"></i>\n                    关注\n                </div>\n                <div ng-if="user.id != USER.id" class="ui down black small button" ng-click="showSendMsgDialog(user)">\n                    给TA私信\n                </div>\n                <div ng-if="user.id == USER.id" class="ui green label self" style="line-height: 10px;">\n                    你自己\n                </div>\n            </div>\n        </div>\n      </div>\n    </div>\n    <div cg-pager="{{pager_id}}" class="center"></div>\n</div>\n'),a.put("topic/topic-create.html",'<form class="ui form" id="topic-create" ng-class="{loading: sending}" ng-controller="TopicCreateController">\n    <div class="ui medium fluid input fullscreen-title" style="margin-bottom: 20px;">\n        <input name="title" type="text" ng-model="topic.title" placeholder="输入讨论标题"/>\n    </div>\n\n    <div class="topic-labels tag-editor" ng-if="can_edit_tag" style="margin-bottom: 20px;">\n        标签：\n        <span class="add" title="添加标签"\n              cg-tag-dropdown="tags"\n              on-tag-add="onTagAdd"\n              on-tag-remove="onTagRemove">\n            <i class="icon" ng-class="{\'add sign\': !tag_editing, \'loading\': tag_editing}"></i>\n        </span>\n        <span class="tag editable"\n              ng-repeat="tag in topic.selected_tags"\n              cg-tag-color="tag.color">\n            <span ng-bind-html="::tag.name"></span> <i class="remove icon" ng-click="onTagRemove(tag);"></i>\n        </span>\n    </div>\n\n    <div cg-pagedown="contentUpdate($content)" min-height="500" id="-1" ng-model="topic.content">\n        <textarea placeholder="讨论内容"\n                  ng-model="topic.content"\n                  cg-refer-resource="PROJECT"\n                  cg-at-context\n                  at-context-type="\'project_topic\'"\n                  at-item="PROJECT"\n                  cg-at-emoji\n                  cg-textarea-editable></textarea>\n    </div>\n\n    <div class="action clearfix fullscreen-title-right-buttons" style="margin-top:20px; margin-bottom: 20px;">\n        <a class="ui dark gray button floated right" href="javascript:void(0);" ng-click="createTopic(topic);"\n           ng-if="!editing">立即发布</a>\n        <a class="ui dark gray button floated right" href="javascript:void(0);" ng-click="updateTopic(topic);"\n           ng-if="editing">立即更新</a>\n        <a class="ui button floated right" style="margin-right: 10px;"\n           href="javascript:void(0);" ng-click="cancelTopic(topic);">取消</a>\n    </div>\n</form>\n'),
a.put("topic/topic-detail.html",'<style>\n    #project-topic-detail-bottom .topic-comments-header {\n        margin: 0;\n    }\n</style>\n\n<div class="topic-container" ng-controller="TopicDetailController" id="project-topic-detail-wrapper">\n    <div id="project-topic-detail">\n        <div class="topic-title" ng-if="topic.owner">\n            <a class="avatar" ng-href="{{::topic.owner.path}}">\n                <img class="ui avatar42 image" ng-src="{{::topic.owner.avatar}}"/>\n            </a>\n\n            <h2 class="title" ng-bind-html="::topic.title"></h2>\n\n            <div class="toolbar">\n                <span class="mr10 number">\n                    {{::\'#\' + topic.number}}\n                </span>\n\n                <span class="mr10 owner">\n                    <a ng-href="{{::topic.owner.path}}">{{::topic.owner.name}}</a>\n                </span>\n\n                <span class="mr10 time">\n                    <i class="time icon"></i>\n                    <span cg-friendly-time="topic.created_at"></span>\n                </span>\n\n                <span class="mr10 comment">\n                    <i class="chat outline icon"></i>\n                    <span ng-bind="topic.child_count"></span>条回答\n                </span>\n\n                <span class="mr10" ng-if="!PROJECT.is_public">\n                    <i class="icon coding coding-share"\n                       cg-share="topic.share" object="topic" type="1" ng-class="{green: topic.share}">\n                        分享\n                    </i>\n                </span>\n\n                <span class="mr10 action" ng-if="canEdit()">\n                    <a ng-href="{{PROJECT.project_path}}/topic/{{topic.id}}/edit">\n                        <i class="edit icon"></i>\n                        编辑\n                    </a>\n                </span>\n\n                <span class="mr10 action" ng-if="canDelete()">\n                    <a href="javascript:void(0);" ng-click="deleteTopic(topic);">\n                        <i class="remove icon"></i>\n                        删除\n                    </a>\n                </span>\n\n                <span class="mr10 watch"  ng-if="PROJECT.is_public" id="topic-public-change-watch" style="cursor: pointer">\n                    <span ng-if="!watching" ng-click="addWatcherAndUpdateLists(USER)">\n                        <i class="icon unhide"></i>\n                        关注\n                    </span>\n                    <span ng-if="watching" ng-click="removeWatcherAndUpdateLists(USER)">\n                        <i class="icon hide"></i>\n                        取消关注\n                    </span>\n                </span>\n\n                <span class="mr10 tags-show" ng-if="!can_edit_tag && topic.labels.length > 0">\n                    <i class="tag icon"></i>标签:&nbsp;&nbsp;\n                    <a style="display: inline-block;"\n                        ng-repeat="tag in topic.labels"\n                        ng-href="{{::(PROJECT.project_path + \'/topic/tag/\' + tag.id + \'/\' + tag.name)}}">\n                        <span class="tag" ng-bind-html="::tag.name" cg-tag-color="tag.color"></span>\n                    </a>\n                </span>\n\n                <span class="mr10 tags" ng-if="can_edit_tag">\n                    <i class="tags icon"></i>\n                    标签:\n                    <span class="topic-labels"\n                          cg-tag-editor="topic.labels"\n                          tags="tags"\n                          on-tag-create="onTagCreate"\n                          on-tag-add="onTagAdd"\n                          on-tag-remove="onTagRemove"></span>\n                </span>\n            </div>\n        </div>\n\n        <div class="topic-content">\n            <div class="markdown content" clip-copy-code="pre" cg-highlight="topic.content" cg-page-scroll></div>\n            <div cg-gallery="topic.content"></div>\n            <div class="empty list" ng-if="detail_loading">\n                <i class="loading icon"></i>正在加载讨论内容...\n            </div>\n        </div>\n\n        <div ng-if="show_watcher" id="follower" class="topic-follow-header">\n            关注者（<span ng-bind="watchers.length"></span>）：<i id="topic-member-selector-down" class="icon add sign" style="margin-top: 4px;"></i>\n\n            <div ng-if="show_watcher"\n                 cg-member-selector\n                 cg-ms-selected="watchers"\n                 cg-ms-onselect="addWatcher(member)"\n                 cg-ms-oncancel="removeWatcher(member)"\n                 cg-ms-has-self="true"\n                 cg-ms-width="150"\n                 cg-ms-opener="\'#topic-member-selector-down\'"\n                 cg-ms-project="PROJECT"\n                 cg-ms-popup-menu="true"\n                 class="inline-mode small-avatar avatar-mode arrow-mode no-remove check-mode check-toggle-mode no-dropdown"\n            ></div>\n        </div>\n    </div>\n\n    <div id="project-topic-detail-bottom">\n        <div class="topic-comments-header">\n            回答（<span ng-bind="topic.child_count"></span>）\n\n            <div class="ui simple dropdown coding floated right" ng-if="comments.length > 0">\n                排序\n                <i class="dropdown icon"></i>\n\n                <div class="menu">\n                    <a class="item" href="javascript:void(0);" ng-class="{active: comment_sort_type === 2}"\n                       ng-click="loadCommentsOfType(2);">\n                        <i class="checkmark icon"></i>\n                        默认排序\n                    </a>\n                    <a class="item" href="javascript:void(0);" ng-class="{active: comment_sort_type === 0}"\n                       ng-click="loadCommentsOfType(0);">\n                        <i class="checkmark icon"></i>\n                        最旧回答\n                    </a>\n                    <a class="item" href="javascript:void(0);" ng-class="{active: comment_sort_type === 1}"\n                       ng-click="loadCommentsOfType(1);">\n                        <i class="checkmark icon"></i>\n                        最新回答\n                    </a>\n                </div>\n            </div>\n        </div>\n\n        <!--所有讨论评论-->\n        <div class="comments" id="topic-comments" cg-page-scroll cg-page-scroll-namespace="cgPageScroll.namespace">\n            <div class="comment" ng-repeat="item in comments track by item.id"\n                 ng-class="{\'recommended\': item.is_recommended === 1}" name="{{::item.anchor}}">\n\n                <a ng-href="{{::item.owner.path}}">\n                    <img class="ui avatar image" height="32" ng-src="{{::item.owner.avatar}}"/>\n                </a>\n\n                <a href="javascript:void(0);" class="vote-button" ng-click="toggleUpVote(item, $index)"\n                    ng-class="{voted : item.already_voted}">\n                    {{\'+\' + item.up_vote_counts}}\n                </a>\n\n                <div class="content-wrapper">\n                    <label class="recommend-label" ng-if="item.is_recommended === 1">\n                        <i class="icon trophy"></i>最佳答案\n                    </label>\n                    <span class="recommend-stat" ng-if="item.is_recommended === 1">\n                        <i class="icon time"></i><span cg-friendly-time="item.recommended_at"></span>\n                        {{::item.recommended_user.name}} 将其标记为最佳答案\n                    </span>\n\n                    <div class="content markdown" clip-copy-code="pre" cg-highlight="item.content">\n                    </div>\n\n                    <div cg-gallery="item.content"></div>\n\n                    <div class="votes" ng-if="item.up_vote_counts > 0">\n                        <span>{{item.up_vote_counts}}人赞同：</span>\n                        <a ng-repeat="user in item.up_vote_users track by $index"\n                            ng-show="item.show_all_up_vote_users || $index < 10"\n                            ng-href="{{::user.path}}">\n                            <img ng-src="{{::user.avatar}}">\n                        </a>\n                        <a ng-click="showAllUpVoteUsers(item)"\n                            ng-show="!item.show_all_up_vote_users && item.up_vote_counts > 10"\n                            ng-href="javascript:void(0);" class="show_all_up_vote_users">\n                            ...\n                        </a>\n                    </div>\n\n                    <div class="time">\n                        <span class="mr10">\n                            <a class="gray" ng-href="{{::item.owner.path}}">{{::item.owner.name}}</a>\n                        </span>\n\n                        <span class="mr11" ng-if="item.membership_type">{{::item.membership_type}}</span>\n\n                        <span class="mr10">\n                            <a ng-href="{{::\'#\' + item.anchor}}">\n                                <i class="time icon"></i><span cg-friendly-time="item.created_at"></span>\n                            </a>\n                        </span>\n\n                        <span class="mr10">\n                            <a href="javascript:void(0);" ng-click="toggleCommentComments(item, $index)"\n                                ng-class="{arrow: item.show_child_comment}">\n                                <i class="icon comment outline"></i>{{\n                                    item.show_child_comment ? \'收起评论\' :\n                                    item.child_count === 0 ? \'添加评论\' : item.child_count + \' 条评论\'\n                                }}\n                            </a>\n                        </span>\n\n                        <span class="mr10" ng-if="::canDeleteTopicComment(item)">\n                            <a class="gray remove" href="javascript:void(0);" ng-click="deleteComment(item);">\n                                <i class="remove icon"></i>删除\n                            </a>\n                        </span>\n\n                        <span class="mr10" ng-if="::canRecommend()">\n                            <a class="gray recommend" href="javascript:void(0);" ng-click="setAsRecommend(item, $index);"\n                                ng-if="item.is_recommended === 0">\n                                <i class="icon trophy"></i>设为最佳\n                            </a>\n                            <a class="gray recommend" href="javascript:void(0);" ng-click="cancelRecommend(item, $index);"\n                               ng-if="item.is_recommended === 1">\n                                <i class="icon trophy"></i>取消最佳\n                            </a>\n                        </span>\n                    </div>\n\n                    <!--评论的子评论-->\n                    <div class="child-comments" ng-show="item.show_child_comment">\n                        <div class="child-comments-container" ng-show="item.child_count > 0">\n                            <div class="child-comment" ng-repeat="cc in item.child_comments" name="{{::cc.anchor}}">\n                                <a ng-href="{{::cc.owner.path}}">\n                                    <img class="comment-avatar" ng-src="{{::cc.owner.avatar}}">\n                                </a>\n\n                                <div class="content markdown" cg-highlight="cc.content"></div>\n\n                                <div class="comment-time">\n                                    <a ng-href="{{::cc.owner.path}}">\n                                        {{::cc.owner.name}}\n                                    </a>\n\n                                    <a ng-href="{{::\'#\' + cc.anchor}}">\n                                        <i class="icon time"></i><span cg-friendly-time="cc.created_at"></span>\n                                    </a>\n\n                                    <a class="reply" href="javascript:void(0);" ng-click="replyComment(cc, item, $event)">\n                                        <i class="icon chat outline"></i>回复\n                                    </a>\n                                    <a class="remove" href="javascript:void(0);"\n                                       ng-if="::canDeleteCommentComment(item, cc)"\n                                       ng-click="deleteComment(cc, item);">\n                                        <i class="icon remove"></i>删除\n                                    </a>\n                                </div>\n                            </div>\n\n                            <div class="empty list comment-loading" ng-if="item.loading">\n                                <i class="loading icon"></i>正在加载评论...\n                            </div>\n\n                            <div class="comment-show-more" ng-click="loadCommentComments(item, $index)"\n                                 ng-if="!item.loading && item.child_count !== 0 && item.child_comments.length !== item.child_count">\n                                <i class="icon double angle down"></i>显示全部 {{item.child_count}} 条评论\n                            </div>\n                        </div>\n\n                        <div class="child-comment-input-container">\n                            <input type="text" class="child-comment-input"\n                                   cg-at-emoji cg-placeholder="评论该回答" ng-model="item.comment_text"\n                                   cg-ctrl-enter="commentComment(item)" cg-refer-resource="PROJECT"\n                                   cg-at-context at-item="topic" at-context-type="\'topic_comment\'">\n\n                            <i class="right icon" ng-click="commentComment(item)"></i>\n                            <i class="smile right icon" cg-emotion-btn basic-emoji="true"></i>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="empty list" ng-if="comments_loaded && comments.length == 0">\n                <i class="coffee icon"></i>还没人评论\n                <span ng-if="USER">，来一发？</span>\n            </div>\n            <div class="empty list" ng-if="comments_loading">\n                <i class="loading icon"></i>正在加载评论...\n            </div>\n            <div cg-pager="{{topic_detail_pager_id}}" ng-show="comments.length > 0"></div>\n        </div>\n\n        <form id="comment-form" ng-if="USER">\n            <div id="topic-comment-editor"\n                 editor-id="project-topic-comment-editor"\n                 cg-light-md-editor="commentTopic"\n                 placeholder="发表一下你对这个讨论的看法"\n                 data-ng-model="comment.content"\n                 at-item="topic"\n                 at-context-type="\'topic_comment\'"\n                 img-compression="false"\n                 project_dependency="topic.project">\n            </div>\n        </form>\n    </div>\n\n</div>\n\n<div class="guide-modal-shadow" id="topic-guide" ng-controller="TopicGuideController" ng-if="$root.canShowGuide(\'topic\')">\n    <div ng-show="modalVisible">\n        <div class="step-1" ng-show="step == 1">\n            <div class="close" ng-click="close()"></div>\n            <div class="explore" ng-click="next()"></div>\n        </div>\n        <div class="step-2" ng-show="step == 2">\n            <div class="close" ng-click="close()"></div>\n            <div class="next" ng-click="next()"></div>\n        </div>\n        <div class="step-3" ng-show="step == 3">\n            <div class="close" ng-click="close()"></div>\n            <div class="next" ng-click="next()"></div>\n        </div>\n        <div class="step-4" ng-show="step == 4">\n            <div class="close" ng-click="close()"></div>\n            <div class="next" ng-click="next()"></div>\n        </div>\n        <div class="step-5" ng-show="step == 5">\n            <div class="close" ng-click="close()"></div>\n            <div class="try" ng-click="close()"></div>\n        </div>\n        <div class="topic-guide-padding"></div>\n    </div>\n</div>\n'),a.put("topic/topic-edit-tag.html",'<div id="tags-all" ng-controller="ProjectTopicEditTagController">\n    <header ng-click="toggleShowTags($event)" ng-class="{active: tagActive()}">\n        <i class="icon triangle down" ng-if="just_show"></i>\n        <i class="icon triangle right" ng-if="!just_show"></i>\n        所有标签\n        <span ng-if="tags.length > 0" ng-bind="\'(\' + tags.length + \')\'"></span>\n    </header>\n    <i class="icon add" ng-click="toggleAddTag()"\n       data-html="添加新标签"\n       data-position="top center"\n       data-variation="inverted"\n       ng-if="can_edit"\n       cg-popup>\n    </i>\n    <div class="new-tag ui popup bottom left" ng-class="{visible: show_add_tag}">\n        <div class="tag">\n            <div class="ui input">\n                <input type="text" placeholder="回车新增标签" ng-model="new_tag.name" cg-enter="addIssuesTag(new_tag)">\n            </div>\n            <div class="tag-color" ng-model="new_tag" cg-tag-color-picker can-change-color="true"></div>\n            <i class="loading icon tag-icon" ng-if="new_tag.saving"></i>\n        </div>\n    </div>\n    <div class="tag-list" ng-if="just_show">\n        <div id="tag-search" class="search item">\n            <div class="ui icon input">\n                <input type="text" class="search-tags" placeholder="Search..." ng-model="searchTags">\n                <i class="search icon"></i>\n            </div>\n        </div>\n        <span class="loading-label" ng-if="loading_label">\n            <i class="loading icon"></i>正在加载数据...\n        </span>\n        <div class="tag-item"\n           ng-repeat="tag in tags | orderBy:\'name\' | filter:{name:searchTags}"\n           ng-class="{active: tag.id == task_label_id, \'no-highlight\': tag_editable[tag.id]}">\n            <div ng-if="!tag_editable[tag.id]">\n                <div class="tag">\n                    <i class="tag icon" ng-style="{color: tag.color}"></i>\n                </div>\n                <div class="tag-description" ng-bind-html="tagName(tag)" ng-click="selectTag(tag)"></div>\n                <i class="pencil icon"\n                   ng-click="enableTagEditable(tag.id, $event)"\n                   ng-if="can_edit"\n                   data-position="top center"\n                   data-variation="inverted"\n                   data-html="编辑标签"\n                   cg-popup>\n                </i>\n            </div>\n            <div ng-if="tag_editable[tag.id]">\n                <div class="ui input">\n                    <input type="text" ng-model="tag.reverted_name" cg-enter="updateTag(tag)">\n                    <i class="level down icon"\n                       ng-click="updateTag(tag)"\n                       title="回车完成编辑">\n                    </i>\n                </div>\n                <div class="tag-color" ng-model="tag"\n                     cg-tag-color-picker\n                     can-change-color="true"\n                     on-color-change="onColorChange">\n                </div>\n                <i class="icon"\n                   ng-class="{\'red remove\': !tag.updating, \'loading\': tag.updating}"\n                   ng-click="removeTag(tag, $event)"\n                   data-position="top center"\n                   data-variation="inverted"\n                   data-html="删除标签"\n                   cg-popup>\n                </i>\n            </div>\n        </div>\n    </div>\n</div>\n'),a.put("topic/topic-index.html",'<style type="text/css">\n    #inner-menu {\n        width: 260px;\n    }\n\n    #create_topic {\n        float: right;\n    }\n\n    #inner-menu > .topics {\n        height: 450px;\n        width: 330px;\n        overflow-y: auto;\n        overflow-x: hidden;\n        border-top: 1px solid #CCC;\n        position: relative;\n    }\n\n    #inner-menu > .topics .topic {\n        height: 70px !important;\n        position: relative;\n        padding: 10px 20px 0 20px !important;\n    }\n\n    #inner-menu > .topics .avatar {\n        position: absolute;\n        left: 20px;\n        top: 15px;\n    }\n\n    #inner-menu > .topics .wrapper {\n        height: 100%;\n        color: #000;\n        padding-left: 45px;\n    }\n\n    #inner-menu > .topics .wrapper .title {\n        height: 50%;\n        font-size: 16px;\n        line-height: 30px;\n    }\n\n    #inner-menu > .topics .wrapper .time {\n        height: 50%;\n        font-size: 12px;\n        color: #999;\n        line-height: 20px;\n    }\n\n    #topic-container {\n        width: 100%;\n    }\n\n    #topic-container #inner-menu {\n        margin: 0;\n        width: 250px;\n    }\n\n    #topic-container #topic-content {\n        margin-left: 250px;\n        min-height: 500px;\n        width: auto;\n        -webkit-flex: 1;\n                flex: 1;\n        padding: 20px;\n    }\n\n    #topic-content div.ui.dividing.header {\n        margin-bottom: 0;\n    }\n</style>\n\n<div class="topic-container" ng-class="{\'public-project-view\': PROJECT.is_public}">\n    <div ng-if="PROJECT.is_public" ng-include="\'app/git/public_view/inner_menu.html\'"></div>\n    <div id="topic-container" ng-if="!watcher_page">\n        <div class="ui secondary vertical menu active" id="inner-menu"\n             ng-class="{\'fixed\':!PROJECT.is_public, \'topic-inner-menu\': PROJECT.is_public}">\n            <header class="header item">\n                项目讨论\n                <a id="create_topic" ng-href="{{::(PROJECT.project_path + \'/topic/create\')}}" ng-if="::canCreate()">\n                    <i class="right add icon" data-position="top center" data-variation="inverted" data-html="添加讨论" cg-popup></i>\n                </a>\n                <i class="icon help tip" style="cursor: pointer;float: inherit;margin: 0px!important;"\n                   data-html="<div class=\'content\'>项目讨论是只有项目成员可见的互动交流区域。该项目上的所有成员都可以在讨论区创建新的讨论帖，评论或者回复讨论。只有项目创建者和该讨论发起者可以编辑或删除已存在的讨论。<br/><a href=\'/help/doc/project/discuss.html\' target=\'_blank\'>更多帮助<i class=\'icon double angle right\'></i></a></div>"\n                   cg-help-popup=""></i>\n                <article>\n                    显示该项目的所有讨论。热门以及推荐讨论。\n                </article>\n            </header>\n            <a class="item" ng-click="changeTopicListSimply(\'all\');" ng-class="{active:inner_menu == \'all\'}">\n                <i class="chat icon"></i>所有讨论 ({{counts.all}})\n            </a>\n            <a class="item" ng-click="changeTopicListSimply(\'mine\');" ng-class="{active:inner_menu == \'mine\'}">\n                <i class="user icon"></i>我的讨论 ({{counts.my}})\n            </a>\n            <a class="item" ng-click="changeTopicListSimply(\'watching\');" ng-class="{active:inner_menu == \'watching\'}">\n                <i class="unhide icon"></i>我关注的 ({{counts.watching}})\n            </a>\n            <!--<a class="item" ng-click="changeTopicList(\'recommend\');" ng-class="{active:inner_menu == \'recommend\'}">-->\n            <!--<i class="heart icon"></i>推荐讨论-->\n            <!--</a>-->\n\n            <!-- tags -->\n            <div ng-include="\'topic/topic-edit-tag.html\'"></div>\n        </div>\n        <div class="container" id="topic-content" ng-include="\'topic/\' + region + \'.html\'"></div>\n    </div>\n    <div ng-if="watcher_page" class="container" ng-include="\'topic/\' + region + \'.html\'"></div>\n</div>\n'),a.put("topic/topic-list.html",'<style type="text/css">\n    #topics-list {\n        padding: 30px 30px 10px 30px;\n        background-color: #fff;\n    }\n\n    #topics-list .topic{\n        position: relative;\n        min-height: 50px;\n        padding: 10px 0;\n        border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n    }\n\n    #topics-list .topic > img.avatar{\n        position: absolute;\n        height: 42px;\n        width: 42px;\n        top: 14px;\n    }\n\n    #topics-list .topic > .detail{\n        height: auto;\n        padding:0 120px 0 60px;\n        line-height: 25px;\n        -moz-user-select:   none;\n    }\n\n    #topics-list .topic > .detail .title{\n        height:50%;\n        font-size:16px;\n        font-weight: bold;\n    }\n\n    #topics-list .topic > .detail .tag{\n        font-size: 12px;\n        font-weight: normal;\n        color: #FFF;\n        -webkit-border-radius: 3px;\n        -moz-border-radius: 3px;\n        border-radius: 3px;\n        padding: 2px 3px;\n        margin-right: 5px;\n        word-break: break-all;\n        vertical-align: text-bottom;\n        line-height: 1.3em;\n        display: inline-block;\n    }\n\n    #topics-list .topic > .detail .tag.dark {\n        color: #000;\n    }\n\n    #topics-list .topic > .detail .title a{\n        color: #000;\n    }\n\n    #topics-list .topic > .detail .time {\n        height:50%;\n        font-size:14px;\n        color:#999;\n    }\n\n    #topics-list .topic > .detail .time a {\n        color:#999;\n    }\n\n    #topics-list .topic > .detail .time .field {\n        margin-right: 10px;\n    }\n\n    #topics-list .topic > .detail .time .field i.icon {\n        margin-right: 0;\n    }\n\n    #topics-list .topic .icons {\n        position: absolute;\n        right: 23px;\n        top: 13px;\n    }\n\n    #topics-list .topic .icons .icon {\n        font-size: 16px;\n        vertical-align: middle;\n    }\n\n    #topics-list .topic .icons .coding-share {\n        margin-left: 5px;\n    }\n\n    #topics-list .topic .icons .trophy {\n        color: #5BA8FF;\n        margin-left: 10px;\n    }\n\n    #topics-list i.angle.up {\n        font-size: 30px;\n        color: #000;\n        cursor: pointer;\n    }\n\n</style>\n<div class="topic-container" id="topics-list" ng-controller="TopicListController" ng-switch="::inner_menu">\n    <div class="ui dividing header">\n        <span ng-switch-when="all">所有讨论</span>\n        <span ng-switch-when="mine">我的讨论</span>\n\n        <span ng-switch-when="tag">标签：</span>\n        <span ng-switch-when="tag" ng-bind-html="cur_tag"></span>\n\n        <span ng-switch-when="watching">我关注的</span>\n\n        ({{topicResponse.totalRow}})\n\n        <div class="ui simple dropdown coding floated right">\n            排序\n            <i class="dropdown icon"></i>\n\n            <div class="menu">\n                <a class="item" href="javascript:void(0);" ng-class="{active: orderBy == \'votes.desc\'}"\n                   ng-click="changeTopicOrder(\'votes.desc\')">\n                    <i class="checkmark icon"></i>\n                    投票数\n                </a>\n                <a class="item" href="javascript:void(0);" ng-class="{active: orderBy == \'comment.asc\'}"\n                   ng-click="changeTopicOrder(\'comment.asc\')">\n                    <i class="checkmark icon"></i>\n                    最旧回答\n                </a>\n                <a class="item" href="javascript:void(0);" ng-class="{active: orderBy == \'comment.desc\'}"\n                   ng-click="changeTopicOrder(\'comment.desc\')">\n                    <i class="checkmark icon"></i>\n                    最新回答\n                </a>\n            </div>\n        </div>\n    </div>\n\n    <div class="topics">\n        <div class="topic" ng-repeat="topic in topics">\n\n            <img class="ui image avatar" ng-src="{{::topic.owner.avatar}}"/>\n\n            <div class="detail" onselectstart="return false;">\n                <div class="title">\n                    <a onselectstart="return true;"\n                       ng-href="{{::(PROJECT.project_path + \'/topic/\' + topic.id)}}">\n                        <span ng-bind-html="::topic.title"></span>\n                    </a>\n                    <span ng-repeat="tag in topic.labels" class="tag" cg-tag-color="tag.color"\n                          ng-bind-html="::tag.name"></span>\n                </div>\n\n                <div class="time">\n                    <span class="field">\n                        #<span>{{::topic.number}}</span>\n                    </span>\n                    <span class="field">\n                        <a ng-href="{{::topic.owner.path}}">{{::topic.owner.name}}</a>\n                    </span>\n                    <span class="field">\n                        <i class="time icon"></i>\n                        <span cg-friendly-time="topic.created_at"></span>\n                    </span>\n                    <span class="field">\n                        <i class="chat outline icon"></i>\n                        <span>{{::topic.child_count}}</span>条回答\n                    </span>\n                </div>\n            </div>\n\n            <!--左侧按钮-->\n            <div class="icons">\n                <i class="icon coding coding-share green" ng-if="topic.share"></i>\n                <i class="icon trophy" ng-if="topic.recommended_comment_counts > 0"></i>\n            </div>\n        </div>\n\n        <div class="empty center list" ng-if="loaded && topics.length == 0">\n            <i class="coffee icon"></i>没有一条讨论，略显寂寥了，无讨论，不协作！\n        </div>\n\n        <div class="empty center list" ng-if="loading">\n            <i class="loading icon"></i>正在加载讨论列表...\n        </div>\n    </div>\n    <div class="center" cg-pager="{{topic_pager_id}}"></div>\n</div>\n'),a.put("topic/topic-watchers.html",'<div ng-controller="TopicWatchersController">\n  <h2>关注了讨论 <a ng-href="{{PROJECT.project_path + \'/topic\' + \'/\' + topic.id}}">{{topic.title}}</a> 的人</h2>\n  <div style="padding-top:20px;">\n      <div class="public-project-view-watchers" ng-if="watchers.length > 0" ng-repeat="user in watchers">\n        <div class="avatar">\n            <a ng-href="/u/{{user.global_key}}"><img class="ui image avatar64" ng-src="{{user.avatar}}"/></a>\n        </div>\n        <div class="info">\n            <a ng-href="/u/{{user.global_key}}">{{user.name}}</a>\n        </div>\n        <div class="action">\n            <div ng-if="user.followed && user.id != USER.id" class="ui down small gray button" ng-click="unfollow(user);">\n                <i class="minus icon"></i>\n                取消关注\n            </div>\n            <div ng-if="!user.followed && user.id != USER.id" class="ui down small green button" ng-click="follow(user);">\n                <i class="add icon"></i>\n                关注\n            </div>\n            <div ng-if="user.id != USER.id" class="ui down black small button" ng-click="showSendMsgDialog(user)">\n                给TA私信\n            </div>\n            <div ng-if="user.id == USER.id" class="ui green label self" style="line-height: 10px;">\n                你自己\n            </div>\n        </div>\n    </div>\n  </div>\n</div>')}]);